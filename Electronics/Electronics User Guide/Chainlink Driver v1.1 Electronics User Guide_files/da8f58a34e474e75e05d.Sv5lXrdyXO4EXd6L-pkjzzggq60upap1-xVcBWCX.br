(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["paper_binder~paper_bundle~paper_cloud_docs~paper_influencer~paper_native_desktop~paper_pifs~paper_te~b48e404f"],{
1541:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.scoreSingleResult=void 0;t.scoreSingleResult=function(e,t,n,a){for(var o=t.replace(/\s/g,"").split("").map((function(e){
return e.charCodeAt(0)})),r=e.split("").map((function(e){return e.charCodeAt(0)})),s=o.length,i=r.length,l=i-1,d=0;d<s;d++){n[d]=[];a[d]=[];n[d][i]=-1/0;a[d][i]=0}for(var c=[],u=0;u<=i;u++)c[u]=0
;n[s]=c;a[s]=c;for(d=o.length-1;d>=0;d--)for(var p=n[d],h=n[d+1],m=a[d],f=a[d+1],g=l;g>=0;g--){var y=g+1,v=p[y];if(r[g]==o[d]){var E=h[y],_=f[y],S=1<<Math.min(20,_);if(0==g)S*=2;else{var C=r[g-1]
;C>=97&&C<=122||C>=48&&C<=57||(S*=2)}var b=E+S;if(b>=v){p[g]=b;m[g]=_+1;continue}}p[g]=v;m[g]=0}}},1548:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.DropboxSearchResultItem=void 0;var a=n(1),o=n(2),r=n(1549),s=n(7),i=n(138),l=n(14),d=n(23),c=n(0),u=n(868),p=n(4),h=(0,l.MsgFactory)("search"),m=h.F,f=(0,h.defineMessages)({inDropbox:{
description:"Displays the file path of the paper doc, the doc is filed in Dropbox",msg:"in Dropbox"},infilePath:{
description:"Displays the file path of the paper doc. For example, 'in Folder1/Folder2'",msg:"in {filePath}"},sharedwithyou:{
description:"This indicates a search result is a cloud doc shared with you.",msg:"Shared with you"},inPaper:{description:"This indicates a search result is located in Paper.",msg:"in Paper"}}),g=((0,
o.defineMessages)({inDropbox:{id:"N1LRaE",defaultMessage:"in Dropbox"},infilePath:{id:"dDRJMY",defaultMessage:"in {filePath}"},sharedwithyou:{id:"8QoRg8",defaultMessage:"Shared with you"},inPaper:{
id:"CF0iuE",defaultMessage:"in Paper"}}),function(e){a.__extends(t,e);function t(t,n){return e.call(this,t,n)||this}t.prototype.render=function(){var e=this.props,t=e.pad,n=e.originalQuery
;return t.padType===s.PadType.customTemplate?c.createElement(u.default,{info:this.renderByLine_(),pad:t,originalQuery:n}):c.createElement(r.DropboxSearchResultDocItem,{info:this.renderByLine_(),pad:t,
originalQuery:n})};t.prototype.getFileInfo=function(){var e=this.props.pad;if(e.isCloudDoc){if(e.cloudDocInfo&&e.cloudDocInfo.filePath){var t=this.getFilePath(e.cloudDocInfo.filePath);if(t){
var n=c.createElement("span",{className:"notranslate"},t);return c.createElement(m,a.__assign({values:{filePath:n}},f.infilePath))}return c.createElement(m,a.__assign({},f.inDropbox))}
return c.createElement(m,a.__assign({},f.sharedwithyou))}return c.createElement(m,a.__assign({},f.inPaper))};t.prototype.getFilePath=function(e){return e.split("/").slice(1,-1).join("/")}
;t.prototype.renderByLine_=function(){var e=this.getFileInfo();return c.createElement("div",{className:"hp-doclist-entry-byline"},e)};t.displayName="DropboxSearchResultItem";t.contextTypes={
stores:d.object.isRequired};return t=a.__decorate([i.default,p.trackContextDecorator],t)}(c.Component));t.DropboxSearchResultItem=g},1549:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0
});t.DropboxSearchResultDocItem=void 0;var a=n(1),o=n(3),r=n(8),s=n(233),i=n(10),l=n(139),d=n(354),c=n(138),u=n(201),p=n(23),h=n(0),m=n(32),f=n(13),g=n(4),y=function(e){a.__extends(t,e)
;function t(t,n){return e.call(this,t,n)||this}t.prototype.renderFavoriteIcon=function(){var e=this.props.pad.isFavorite;return e?h.createElement(s.FavoriteIcon,{isFavorite:e,inline:!0}):null}
;t.prototype.render=function(){
var e=this.props,t=e.pad,n=e.originalQuery,a=e.info,r=o("hp-list-item","hp-search-result-doc-item"),s=(n||"").split(/ +/),c=this.getTitle(),p=h.createElement(u.Presence,{maxNumVisibleUser:3,border:!0,
activeUsers:t.activeUsers}),m=h.createElement(f.default,{name:t.isArchived?"note-archived":"note"});return h.createElement(i.default,{styleless:!0,onClick:App.onLinkClicked,href:t.url,className:r,
tabIndex:-1,"track-title":"Doc item"},h.createElement(l.default,{title:c,className:"hp-list-item-icon-doc"},m),h.createElement("div",{className:"hp-list-item-content"},h.createElement("div",{
className:"hp-list-item-title notranslate"},h.createElement(d.default,{str:c,keywords:s}),this.renderFavoriteIcon()),h.createElement("div",{className:"hp-list-item-subtitle"},a)),p)}
;t.prototype.getTitle=function(){return m.padTitleOrDefault(this.props.pad.title,r.default.userLocale)};t.displayName="DropboxSearchResultDocItem";t.contextTypes={stores:p.object.isRequired}
;return t=a.__decorate([c.default,g.trackContextDecorator],t)}(h.Component);t.DropboxSearchResultDocItem=y},1550:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(6),r=n(1551),s=n(21),i=n(2),l=n(15),d=n(0),c=n(16),u=(0,n(5).PaperIntlFactory)(),p=u.F,h=u._f,m=(0,i.defineMessages)({notificationsBellAriaLabel:{id:"AL13rQ",
defaultMessage:"{badgeCount, plural, one {1 unread notification} other {# unread notifications}}"},shownotifications:{id:"mzX9QY",defaultMessage:"Show notifications"},notifications:{id:"dToisu",
defaultMessage:"Notifications"}}),f=function(e){var t=h(m.notificationsBellAriaLabel,{badgeCount:e.badgeCount}),n=o.omit(e,["badgeCount","isRed"]);return d.createElement(s.default,a.__assign({
isIcon:!0,variant:"transparent",className:"hp-notifications-bell hp-notifications-bell-no-margin","track-title":"Notifications Bell",id:"hp-notifications-bell","aria-label":t,tooltip:{
title:d.createElement(p,a.__assign({},m.shownotifications)),openDelay:660}},n),d.createElement(c.UIIcon,{src:l.NotificationLine}),d.createElement(r.default,{count:e.badgeCount,isRed:e.isRed}))}
;f.displayName="NotificationsBellButton";t.default=f},1551:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(3),r=n(11),s=n(114),i=n(5),l=n(0),d=n(264),c="notifications-bell-last-bounce-count",u=(0,i.PaperIntlFactory)().FormattedNumber,p=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.state={firstRender:!0,count:t.props.count,bouncing:!1};return t}t.prototype.componentWillReceiveProps=function(e){this.setState({
firstRender:void 0===this.props.count,count:void 0===e.count?this.state.count:e.count,bouncing:void 0!==this.props.count&&this.props.count<e.count})};t.prototype.componentDidUpdate=function(e){
var t=this;this.state.bouncing&&this.timers.setTimeout((function(){t.setState({bouncing:!1});s.localStorage&&s.localStorage.setObject(c,t.props.count)}),30)
;s.localStorage&&void 0!==this.props.count&&this.props.count<e.count&&s.localStorage.setObject(c,this.props.count)};t.prototype.render=function(){var e;e=this.state.count>=100?l.createElement("span",{
className:"notranslate"},"99+"):void 0===this.state.count?l.createElement(u,{value:0}):l.createElement(u,{value:this.state.count});var t=0;s.localStorage&&(t=s.localStorage.getNumber(c))
;return l.createElement(d.SpringySpan,{tension:50,from:-120,atRest:this.state.firstRender||this.state.count==t,open:this.props.count>0&&!this.state.bouncing,
className:o("hp-notifications-badge notranslate",{"hp-notifications-badge-grey":!this.props.isRed}),horiz:this.props.horizontal},e)};t.displayName="NotificationsBellBadge"
;return t=a.__decorate([r.default],t)}(l.Component);t.default=p},1552:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(4),r=n(21),s=n(2),i=n(7),l=n(11),d=n(114),c=n(28),u=n(1553),p=n(0),h=n(275),m=n(48),f=n(5),g="notifications-bell-current-filter",y=(0,f.PaperIntlFactory)().F,v=(0,s.defineMessages)({
gotit:{id:"HgzLt0",defaultMessage:"Got it"},changeinsettings:{id:"exHXHU",defaultMessage:"Change in settings"},yournotificationsarenowinPaper:{id:"0Zu+fK",
defaultMessage:"Your notifications are now in Paper"},whenyoureadanotificationherewewontsendyouanemailaboutit:{id:"Dy/Y2F",
defaultMessage:"When you read a notification here, we won't send you an email about it."}}),E=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.handleNotificationListChange=function(){n.loadNotificationStories()};n.showMarkReadBehaviorToast=function(){if(!n.state.markReadBehaviorToastShown){n.setState({markReadBehaviorToastShown:!0})
;m.default.show(p.createElement(m.default,{clickToDismiss:!0,autoDismiss:!1,className:"hp-mark-read-info-toast",actions:p.createElement(p.Fragment,null,p.createElement(r.default,{
variant:"transparent",inverse:!0},p.createElement(y,a.__assign({},v.gotit))),p.createElement(r.default,{variant:"transparent",inverse:!0,href:h.getSettingsUrl({page:h.SettingsPage.Notifications}),
target:"_blank"},p.createElement(y,a.__assign({},v.changeinsettings))))},p.createElement(o.TrackContext,{trackContext:o.AppContext.Notifications.MarkReadInfoToast},p.createElement("div",{
className:"hp-mark-read-info-toast-content"},p.createElement("div",{className:"hp-mark-read-info-toast-message"},p.createElement("div",{className:"hp-mark-read-info-toast-title"
},p.createElement(y,a.__assign({},v.yournotificationsarenowinPaper))),p.createElement(y,a.__assign({},v.whenyoureadanotificationherewewontsendyouanemailaboutit)))))))
;n.props.stores.notificationList.confirmAwareOfMarkReadBehavior()}};n.refreshUnreadStoryCount=function(){n.props.stores.notificationList.getUnreadStoryCount((function(e,t){t||(e=void 0);n.setState({
unreadTabCount:e})}))};n.markAllRead=function(){n.props.stores.notificationList.handleMarkAllReadClicked(n.state.currentFilter)};n.loadNotificationStories=function(e){e||(e=n.state.currentFilter)
;var t=n.props.stores.notificationList;t.getNotificationStories(e,(function(a,o,r){n.setState({notificationStories:a,currentFilter:e,earlierNotificationsCount:o,
isLoading:!t.hasFetchedInitialNotificationsForFilter(e),userHasAnyNotifications:n.state.userHasAnyNotifications||r>0})}))};n.handleSelectFilter=function(e){
d.localStorage&&d.localStorage.setObject(g,e);n.loadNotificationStories(e);n.reloadNotificationsForFilter(e)};n.handleLoadMore=function(){
n.props.stores.notificationList.loadMoreNotifications(n.state.currentFilter)};n.isFilterValid=function(e){return e==i.NotificationsPanelFilter.Incoming||e==i.NotificationsPanelFilter.Unread};var s=0
;n.props.stores.notificationList.getUnreadStoryCount((function(e,t){t&&(s=e)}));var l=i.NotificationsPanelFilter.Incoming;if(d.localStorage){var c=d.localStorage.getNumber(g)
;n.isFilterValid(c)?l=c:d.localStorage.setObject(g,l)}n.state={isLoading:!0,currentFilter:l,notificationStories:[],earlierNotificationsCount:0,unreadTabCount:s,markReadBehaviorToastShown:!1,
userHasAnyNotifications:!1};return n}t.prototype.getTrackContext=function(){};t.prototype.componentDidMount=function(){this.props.stores.notificationList.resetLimits()
;this.props.stores.notificationList.on("unread-story-count-change",this.refreshUnreadStoryCount);this.props.stores.notificationList.on("notification-list-change",this.handleNotificationListChange)
;this.props.stores.notificationList.on("show-mark-read-behavior-notice",this.showMarkReadBehaviorToast)};t.prototype.componentWillUnmount=function(){
this.props.stores.notificationList.off("unread-story-count-change",this.refreshUnreadStoryCount);this.props.stores.notificationList.off("notification-list-change",this.handleNotificationListChange)
;this.props.stores.notificationList.off("show-mark-read-behavior-notice",this.showMarkReadBehaviorToast)};t.prototype.onOpen=function(){var e=this.state.currentFilter;if(d.localStorage){
var t=d.localStorage.getNumber(g);this.isFilterValid(t)&&(e=t)}this.loadNotificationStories(e);this.reloadNotificationsForFilter(e,!0)};t.prototype.reloadNotificationsForFilter=function(e,t){
var n=this;this.props.stores.notificationList.loadNotificationList(e,{success:function(){n.loadNotificationStories();t&&n.props.stores.notificationList.handleWebNotificationsPanelOpen(e)}})}
;t.prototype.componentDidUpdate=function(e,t){c.isMobile()||e.currentLocalPadId!=this.props.currentLocalPadId&&this.loadNotificationStories()};t.prototype.render=function(){
return p.createElement(u.default,{app:this.props.app,isLoading:this.state.isLoading,notificationStories:this.state.notificationStories,earlierNotificationsCount:this.state.earlierNotificationsCount,
unreadTabCount:this.state.unreadTabCount,currentFilter:this.state.currentFilter,onSelectFilter:this.handleSelectFilter,loadMore:this.handleLoadMore,markAllRead:this.markAllRead,
stores:this.props.stores,userHasAnyNotifications:this.state.userHasAnyNotifications})};t.displayName="NotificationsPanel";return t=a.__decorate([l.default,o.trackContextDecorator],t)}(p.PureComponent)
;t.default=E},1553:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(6),r=n(4),s=n(3),i=n(2),l=n(7),d=n(11),c=n(10),u=n(266),p=n(1554),h=n(875),m=n(5),f=n(0),g=n(275),y=n(13),v=n(150),E=n(41),_=(0,
m.PaperIntlFactory)(),S=_.FormattedDate,C=_.F,b=_._f,P=(0,i.defineMessages)({settingsButtonAriaLabel:{id:"x/c7tU",defaultMessage:"Settings"},loadmore:{id:"3+YMqS",defaultMessage:"Load more"},today:{
id:"JDRaFD",defaultMessage:"Today"},lastweek:{id:"dsHtkw",defaultMessage:"Last week"},earlier:{id:"4Ky4Iq",defaultMessage:"Earlier"},youdonthaveanynotificationsyet:{id:"PdhEhv",
defaultMessage:"You don't have any notifications yet"},whenpeopleshareitemswithyoumentionyouoraddcommentsyoullseethemhere:{id:"uZEX9T",
defaultMessage:"When people share items with you, @mention you, or add comments, you'll see them here."},youhavenonotifications:{id:"Sx0jeu",defaultMessage:"You have no notifications!"},
youhavenounreadnotifications:{id:"NDTcWJ",defaultMessage:"You have no unread notifications!"},markallasread:{id:"hwVgx7",defaultMessage:"Mark all as read"},notifications:{id:"dToisu",
defaultMessage:"Notifications"},loadingnotifications:{id:"E7//fS",defaultMessage:"Loading notifications…"},yesterday:{id:"3gCyHF",defaultMessage:"Yesterday"},unread:{id:"4K/z9i",
defaultMessage:"Unread ({unreadCount, number})"}}),I=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},T=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.handleSeeAll=function(){n.setState({showAllForCurrentPad:!0})};n.handleScrollDebounced=o.debounce((function(){(0,r.trackUi)("Notifications Panel Scrolled",{
filter:l.NotificationsPanelFilter[n.props.currentFilter]})}),10*E.Time.SECOND,{leading:!0,trailing:!1});n.handlePanelScroll=function(e){n.handleScrollDebounced()};n.state={showAllForCurrentPad:!1}
;return n}t.prototype.renderNotificationStoryBundle=function(e){var t=e.notificationStories;return 1==t.length?f.createElement(h.default,{notificationStory:t[0],app:this.props.app,key:e.bundleKey,
stores:this.props.stores}):f.createElement(p.default,{notificationStoryBundle:e,app:this.props.app,key:e.bundleKey,stores:this.props.stores})};t.prototype.renderNotificationTimeSection=function(e){
return f.createElement("div",{className:"hp-notifications-section",key:e.sectionId},f.createElement("div",{className:"hp-notification-time-section-title"
},e.sectionTitle),e.notificationStoryBundles.map(this.renderNotificationStoryBundle,this))};t.prototype.renderNotificationStories=function(e){if(0==e.length)return null
;var t=this.getEmptyTimeSections();this.fillTimeSections(t,e);t=t.filter((function(e){return!!e.notificationStoryBundles.length}));var n=null
;this.props.earlierNotificationsCount>0&&(n=f.createElement("div",{key:"load-more-"+this.props.earlierNotificationsCount,className:"hp-notification hp-notifications-load-more"
},f.createElement(c.default,{onClick:this.props.loadMore},f.createElement(C,a.__assign({},P.loadmore)))));return f.createElement("div",null,t.map(this.renderNotificationTimeSection,this),n)}
;t.prototype.bundleKeyByDay=function(e){var t=new Date(e.notifications[0].createdTime.toString()),n=e.entityType
;n==l.NotificationEntityType.PadGlobalNum?n=l.NotificationEntityType.Pad:n==l.NotificationEntityType.CollectionGlobalNum&&(n=l.NotificationEntityType.Collection)
;return n+"-"+e.encryptedEntityId+"-"+t.toDateString()};t.prototype.createBundle=function(e){return{bundleKey:e[0].storyKey,entityType:e[0].entityType,encryptedEntityId:e[0].encryptedEntityId,
notificationStories:e}};t.prototype.bundleStories=function(e){var t=this,n=o.groupBy(e,this.bundleKeyByDay),a=[];o.values(n).forEach((function(e){
(e[0].entityType==l.NotificationEntityType.Pad||e[0].entityType==l.NotificationEntityType.PadGlobalNum)&&e.length>=p.MIN_STORIES_TO_BUNDLE?a.push(t.createBundle(e)):e.forEach((function(e){
a.push(t.createBundle([e]))}))}));return a=o.sortBy(a,(function(e){var t=e.notificationStories[0].notifications[0];return t.createdTime+"-"+t.encryptedNotificationId})).reverse()}
;t.prototype.fillTimeSections=function(e,t){this.bundleStories(t).forEach((function(t){if(t.notificationStories.length)for(var n=0;n<e.length;n++){var a=e[n]
;if(new Date(t.notificationStories[0].notifications[0].createdTime.toString())>a.startTime){a.notificationStoryBundles.push(t);return}}}))};t.prototype.getEmptyTimeSections=function(){
var e=new Date,t=[],n=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.push({sectionId:"today",sectionTitle:f.createElement(C,a.__assign({},P.today)),startTime:n,notificationStoryBundles:[]})
;for(var o=(n.getDay()+7-1)%7,r=1;r<=o;r++){var s=I(n,-1*r),i=void 0,l=void 0;if(1==r){l="yesterday";i=f.createElement(C,a.__assign({},P.yesterday))}else{l="day-"+s.getDay();i=f.createElement(S,{
value:s,weekday:"long"})}t.push({sectionId:l,sectionTitle:i,startTime:s,notificationStoryBundles:[]})}var d=I(n,-1*o),c=I(d,-7);t.push({sectionId:"last-week",
sectionTitle:f.createElement(C,a.__assign({},P.lastweek)),startTime:c,notificationStoryBundles:[]});t.push({sectionId:"earlier",sectionTitle:f.createElement(C,a.__assign({},P.earlier)),
startTime:new Date(0),notificationStoryBundles:[]});return t};t.prototype.renderEmptyState=function(){var e,t=s({"hp-notification-empty-animation":!0,
"hp-notification-empty-animation-shown":this.isEmpty(),"hp-notification-empty-animation-shown-animate":!this.state.justChangedFilter})
;this.props.userHasAnyNotifications?this.props.currentFilter==l.NotificationsPanelFilter.Incoming?e=f.createElement(C,a.__assign({},P.youhavenonotifications)):this.props.currentFilter==l.NotificationsPanelFilter.Unread&&(e=f.createElement(C,a.__assign({},P.youhavenounreadnotifications))):e=f.createElement("div",null,f.createElement("div",{
className:"hp-notification-empty-header"
},f.createElement(C,a.__assign({},P.youdonthaveanynotificationsyet))),f.createElement("div",null,f.createElement(C,a.__assign({},P.whenpeopleshareitemswithyoumentionyouoraddcommentsyoullseethemhere))),f.createElement("div",{
className:"hp-notification-empty-sticker"},f.createElement(u.default,{pack:"wizards",sticker:"fist-bump"})));return f.createElement("div",{className:t},f.createElement("div",{
className:"hp-notification-empty"},e))};t.prototype.isEmpty=function(){return 0==this.props.notificationStories.length};t.prototype.componentWillReceiveProps=function(e){this.setState({
justChangedFilter:e.currentFilter!=this.props.currentFilter})};t.prototype.renderMarkAllButton=function(){return f.createElement(c.default,{className:"hp-notifications-mark-read-button",
onClick:this.props.markAllRead},f.createElement(C,a.__assign({},P.markallasread)))};t.prototype.render=function(){var e=f.createElement(C,a.__assign({},P.unread,{values:{
unreadCount:this.props.unreadTabCount}})),t=f.createElement("div",{className:"hp-tabs hp-notifications-panel-tabs"},f.createElement(v.default,{value:l.NotificationsPanelFilter.Incoming,isDefault:!0,
selected:this.props.currentFilter,onChange:this.props.onSelectFilter},f.createElement(C,a.__assign({},P.notifications))),f.createElement(v.default,{value:l.NotificationsPanelFilter.Unread,
selected:this.props.currentFilter,onChange:this.props.onSelectFilter},e)),n=b(P.settingsButtonAriaLabel),o=f.createElement("a",{className:"hp-notifications-settings-button","aria-label":n,
href:g.getSettingsUrl({page:g.SettingsPage.Notifications}),target:"_blank",rel:"noopener noreferrer"},f.createElement(y.default,{name:"gear"})),i=s({"hp-notifications-panel":!0,
"hp-notifications-panel-empty-show-onboarding":this.isEmpty()&&!this.props.isLoading&&!this.props.userHasAnyNotifications});return f.createElement(r.TrackContext,{
trackContext:r.AppContext.NotificationsPanel[this.props.currentFilter]},f.createElement("div",{className:"hp-notifications-heading"},t,this.renderMarkAllButton(),o),f.createElement("div",{className:i,
onScroll:this.handlePanelScroll},this.renderPanelContent()))};t.prototype.renderPanelContent=function(){return this.props.isLoading?f.createElement("div",{className:"hp-notification-empty"
},f.createElement(C,a.__assign({},P.loadingnotifications))):f.createElement("div",null,this.renderEmptyState(),this.renderNotificationStories(this.props.notificationStories))}
;t.displayName="NotificationsPanelUI";return t=a.__decorate([d.default],t)}(f.PureComponent);t.default=T},1554:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.MIN_STORIES_TO_BUNDLE=void 0;var a=n(1),o=n(6),r=n(3),s=n(8),i=n(2),l=n(60),d=n(10),c=n(137),u=n(875),p=n(0),h=n(32),m=(0,n(5).PaperIntlFactory)().F,f=(0,i.defineMessages)({unknowndocumenttitle:{
id:"XTJqn5",defaultMessage:"Unknown document title"},markallasread:{id:"JdkCd3",defaultMessage:"Mark all as read"},markallasunread:{id:"0JptWn",defaultMessage:"Mark all as unread"},seeAll:{
id:"IVHXks",defaultMessage:"{numMore, plural, one {1 more} other {# more}}"}});t.MIN_STORIES_TO_BUNDLE=4;var g=function(e){a.__extends(n,e);function n(t){var n=e.call(this,t)||this
;n.handleSeeAll=function(){n.setState({isExpanded:!0})};n.handleMarkRead=function(e){e.stopPropagation();e.preventDefault();var t=o.map(n.getAllNotificationsInBundle(),"encryptedNotificationId")
;n.props.stores.notificationList.handleNotificationPanelReadClick(t)};n.handleMarkUnread=function(e){e.stopPropagation();e.preventDefault()
;var t=o.map(n.getAllNotificationsInBundle(),"encryptedNotificationId");n.props.stores.notificationList.handleNotificationPanelUnreadClick(t)};n.state={isExpanded:!1};return n}
n.prototype.renderNotificationStory=function(e){return p.createElement(u.default,{notificationStory:e,hideTitle:!0,app:this.props.app,key:e.storyKey,stores:this.props.stores})}
;n.prototype.getAllNotificationsInBundle=function(){var e=this.props.notificationStoryBundle.notificationStories;return o.flatMap(e,"notifications")};n.prototype.getPadTitleAndUrl=function(){
var e=this.props.notificationStoryBundle.notificationStories[0],t=e.encryptedEntityId,n=e.notifications[0].renderedPayload.padTitle;return{padTitle:n?p.createElement(l.default,{str:n
}):p.createElement(m,a.__assign({},f.unknowndocumenttitle)),padUrl:h.prettyUrl(t,n,s.default.userLocale)}};n.prototype.renderMarkButton=function(){
return c.isUnreadForPanelEntryMultiple(this.getAllNotificationsInBundle())?p.createElement("div",{className:"hp-notification-mark"},p.createElement(d.default,{onClick:this.handleMarkRead,
"track-title":"Mark Read"},p.createElement(m,a.__assign({},f.markallasread)))):p.createElement("div",{className:"hp-notification-mark"},p.createElement(d.default,{onClick:this.handleMarkUnread,
"track-title":"Mark Unread"},p.createElement(m,a.__assign({},f.markallasunread))))};n.prototype.render=function(){
var e,n=this,s=this.props.notificationStoryBundle.notificationStories,i=o.flatMap(s,"notifications"),l=c.isUnreadForPanelEntryMultiple(i);e=this.state.isExpanded?s.length:t.MIN_STORIES_TO_BUNDLE-1
;var u=s.slice(0,e).map((function(e){return n.renderNotificationStory(e)})),h=null;if(e<s.length){var g=s.slice(e),y=o.flatMap(g,"notifications"),v=c.isUnreadForPanelEntryMultiple(y),E=r({
"hp-notification-bundle-see-more":!0,"hp-notification":!0,"hp-notification-unread":v});h=p.createElement("div",{key:"see-more",className:E},p.createElement(d.default,{onClick:this.handleSeeAll
},p.createElement(m,a.__assign({},f.seeAll,{values:{numMore:s.length-e}}))))}var _=this.getPadTitleAndUrl(),S=r({"hp-notification-bundle-header":!0,"hp-notification-bundle-header-unread":l})
;return p.createElement("div",{className:"hp-notification-bundle"},p.createElement("div",{className:S},p.createElement("a",{href:_.padUrl,className:"hp-notification-bundle-title"
},_.padTitle),this.renderMarkButton()),p.createElement("div",{className:"hp-notification-bundle-stories"},u),h)};n.displayName="NotificationBundle";return n}(p.PureComponent);t.default=g},
1555:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(2),r=n(10),s=n(168),i=n(137),l=n(0),d=(0,n(5).PaperIntlFactory)().F,c=(0,o.defineMessages)({
actornamewantsyoutoviewshowcaseTitle:{id:"+hhDLx",defaultMessage:"{actorName} wants you to view {showcaseTitle}"},readmore:{id:"rQhs9V",defaultMessage:"Read more"},actorNameShared:{id:"AVjHTT",
defaultMessage:"{actorName} shared"}}),u=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.handleExpand=function(e){e.preventDefault();e.stopPropagation();n.setState({
contentExpanded:!0})};n.state={contentExpanded:!1};return n}t.prototype.renderPersonalMessage=function(e,t){var n=!1,a=e.split("\n");if(t&&a.length>3){a=a.slice(0,3);n=!0}var o=85,r=[]
;a.forEach((function(e,a){if(o>0){a>0&&r.push(l.createElement("br",{key:"message-br-".concat(a)}));if(t){if(e.length>o){e=e.substr(0,o);n=!0}o-=e.length}r.push(l.createElement("span",{
key:"message-".concat(a),className:"notranslate"},e))}}));return{elements:r,isTruncated:n}};t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications[0],t=l.createElement("strong",null,i.getDocTitleElement(e.renderedPayload.collectionTitle)),n=l.createElement("strong",null,e.renderedPayload.actorName)
;return!this.props.hideTitle?l.createElement(d,a.__assign({values:{actorName:n,showcaseTitle:t}},c.actornamewantsyoutoviewshowcaseTitle)):l.createElement(d,a.__assign({},c.actorNameShared,{values:{
actorName:n}}))};t.prototype.render=function(){var e=this.props.notificationStory.notifications[0],t=e.payload.personalMessage,n=l.createElement("div",null),o=null;if(t){
var i=!this.state.contentExpanded,u=this.renderPersonalMessage(t,i);i&&u.isTruncated&&(o=l.createElement("span",null,l.createElement("span",{className:"notranslate"},"… "),l.createElement(r.default,{
onClick:this.handleExpand,className:"hp-notification-story-read-more","title-track":"Read More: Collection Invite Story"},l.createElement(d,a.__assign({},c.readmore)))));n=l.createElement("div",{
className:"hp-notification-summary-invite-message"},u.elements,o)}return l.createElement(s.default,{notifications:[e],app:this.props.app,stores:this.props.stores
},l.createElement("span",null,this.getSentence()),n)};t.displayName="CollectionInviteNotification";return t}(l.PureComponent);t.default=u},1556:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});var a=n(1),o=n(6),r=n(876),s=n(2),i=n(60),l=n(168),d=n(137),c=n(0),u=(0,n(5).PaperIntlFactory)().F,p=(0,s.defineMessages)({someonereactedtoyourcommentinshowcaseTitle:{id:"Hs+Hh9",
defaultMessage:"Someone reacted to your comment in {showcaseTitle}"},actornamereactedtoyourcommentinshowcaseTitle:{id:"kQfFIt",defaultMessage:"{actorName} reacted to your comment in {showcaseTitle}"},
actorNameandactorNamereactedtoyourcommentinshowcaseTitle:{id:"5LVtYB",defaultMessage:"{actor1Name} and {actor2Name} reacted to your comment in {showcaseTitle}"},
actorNameandnumOtherspluraloneoneotherotherothersreactedtoyourcommentinshowcaseTitle:{id:"DFFCl+",
defaultMessage:"{actor1Name} and {numOthers, plural,\n              one {one other}\n              other {# others}\n            } reacted to your comment in {showcaseTitle}"}}),h=function(e){
a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications,t=c.createElement("strong",null,d.getDocTitleElement(e[0].renderedPayload.collectionTitle));e=e.filter((function(e){return!!e.renderedPayload.actorName
}));var n=o.uniq(e.map((function(e){return e.renderedPayload.actorName}))).map((function(e){return c.createElement("strong",null,e)}));if(0==n.length)return c.createElement(u,a.__assign({values:{
showcaseTitle:t}},p.someonereactedtoyourcommentinshowcaseTitle));if(1==n.length){var r=n[0];return c.createElement(u,a.__assign({values:{actorName:r,showcaseTitle:t}
},p.actornamereactedtoyourcommentinshowcaseTitle))}if(2==n.length){var s=n[0],i=n[1];return c.createElement(u,a.__assign({values:{actor1Name:s,actor2Name:i,showcaseTitle:t}
},p.actorNameandactorNamereactedtoyourcommentinshowcaseTitle))}s=n[0];var l=n.length-1;return c.createElement(u,a.__assign({values:{actor1Name:s,numOthers:l,showcaseTitle:t}
},p.actorNameandnumOtherspluraloneoneotherotherothersreactedtoyourcommentinshowcaseTitle))};t.prototype.render=function(){var e=this.props.notificationStory.notifications,t=o.uniq(e.map((function(e){
return e.renderedPayload.emoji}))).map((function(e){return c.createElement(i.default,{key:e,str:e})}));return c.createElement(l.default,{notifications:e,app:this.props.app,stores:this.props.stores
},c.createElement("span",null,this.getSentence()),c.createElement("div",null,c.createElement("div",{className:"hp-notification-reacji-emojis"
},t),r.default.renderCommentExcerpt(e[0].renderedPayload,100,2)))};t.displayName="CollectionReacjiNotification";return t}(c.PureComponent);t.default=h},1557:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(6),r=n(2),s=n(168),i=n(137),l=n(0),d=(0,n(5).PaperIntlFactory)().F,c=(0,r.defineMessages)({someoneopenedshowcaseTitle:{id:"mUgb+L",
defaultMessage:"Someone opened {showcaseTitle}"},actornameopenedshowcaseTitle:{id:"JXX4fl",defaultMessage:"{actorName} opened {showcaseTitle}"},actorNameandactorNameopenedshowcaseTitle:{id:"ttS2d2",
defaultMessage:"{actor1Name} and {actor2Name} opened {showcaseTitle}"},actorNameandnumOtherspluraloneoneotherotherothersopenedshowcaseTitle:{id:"CeWSXk",
defaultMessage:"{actor1Name} and {numOthers, plural,\n                one {one other}\n                other {# others}\n              } opened {showcaseTitle}"},someoneOpened:{id:"llvsho",
defaultMessage:"Someone opened"},actorNameOpened:{id:"RaErZg",defaultMessage:"{actorName} opened"},actorNamesOpened:{id:"PhVF7Y",defaultMessage:"{actor1Name} and {actor2Name} opened"},
actorNameAndMoreOpened:{id:"1BOPDa",defaultMessage:"{actor1Name} and {numOthers, plural, one {one other} other {# others}} opened"}}),u=function(e){a.__extends(t,e);function t(){
return null!==e&&e.apply(this,arguments)||this}t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications,t=l.createElement("strong",null,i.getDocTitleElement(e[0].renderedPayload.collectionTitle));e=e.filter((function(e){return!!e.renderedPayload.actorName
}));var n=o.uniq(e.map((function(e){return e.renderedPayload.actorName}))).map((function(e){return l.createElement("strong",null,e)}));if(this.props.hideTitle){
if(0==n.length)return l.createElement(d,a.__assign({},c.someoneOpened));if(1==n.length){var r=n[0];return l.createElement(d,a.__assign({},c.actorNameOpened,{values:{actorName:r}}))}if(2==n.length){
var s=n[0],u=n[1];return l.createElement(d,a.__assign({},c.actorNamesOpened,{values:{actor1Name:s,actor2Name:u}}))}s=n[0];var p=n.length-1
;return l.createElement(d,a.__assign({},c.actorNameAndMoreOpened,{values:{actor1Name:s,numOthers:p}}))}if(0==n.length)return l.createElement(d,a.__assign({values:{showcaseTitle:t}
},c.someoneopenedshowcaseTitle));if(1==n.length){r=n[0];return l.createElement(d,a.__assign({values:{actorName:r,showcaseTitle:t}},c.actornameopenedshowcaseTitle))}if(2==n.length){s=n[0],u=n[1]
;return l.createElement(d,a.__assign({values:{actor1Name:s,actor2Name:u,showcaseTitle:t}},c.actorNameandactorNameopenedshowcaseTitle))}s=n[0],p=n.length-1;return l.createElement(d,a.__assign({values:{
actor1Name:s,numOthers:p,showcaseTitle:t}},c.actorNameandnumOtherspluraloneoneotherotherothersopenedshowcaseTitle))};t.prototype.render=function(){var e=this.props.notificationStory.notifications
;return l.createElement(s.default,{notifications:e,app:this.props.app,stores:this.props.stores},l.createElement("span",null,this.getSentence()),l.createElement("span",null))}
;t.displayName="CollectionReadReceiptNotification";return t}(l.PureComponent);t.default=u},1558:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(2),r=n(168),s=n(137),i=n(0),l=(0,n(5).PaperIntlFactory)().F,d=(0,o.defineMessages)({actornamearchiveddocTitle:{id:"QLA8Yq",defaultMessage:"{actorName} archived {docTitle}"},
actorNameArchived:{id:"5jgL7Z",defaultMessage:"{actorName} archived"}}),c=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications[0],t=i.createElement("strong",null,s.getDocTitleElement(e.renderedPayload.padTitle)),n=i.createElement("strong",null,e.renderedPayload.actorName)
;return!this.props.hideTitle?i.createElement(l,a.__assign({values:{actorName:n,docTitle:t}},d.actornamearchiveddocTitle)):i.createElement(l,a.__assign({},d.actorNameArchived,{values:{actorName:n}}))}
;t.prototype.render=function(){var e=this.props.notificationStory.notifications[0];return i.createElement(r.default,{notifications:[e],app:this.props.app,stores:this.props.stores
},i.createElement("span",null,this.getSentence()),i.createElement("div",null))};t.displayName="DocArchivedNotification";return t}(i.PureComponent);t.default=c},1559:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(2),r=n(10),s=n(168),i=n(137),l=n(0),d=(0,n(5).PaperIntlFactory)().F,c=(0,o.defineMessages)({actornamesharedfolderTitle:{id:"rd9HFQ",
defaultMessage:"{actorName} shared {folderTitle}"},readmore:{id:"rQhs9V",defaultMessage:"Read more"},actorNameShared:{id:"ZyDysq",defaultMessage:"{actorName} shared"}}),u=function(e){a.__extends(t,e)
;function t(t){var n=e.call(this,t)||this;n.handleExpand=function(e){e.preventDefault();e.stopPropagation();n.setState({contentExpanded:!0})};n.state={contentExpanded:!1};return n}
t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications[0],t=l.createElement("strong",null,i.getFolderTitleElement(e.renderedPayload.folderTitle)),n=l.createElement("strong",null,e.renderedPayload.actorName)
;return!this.props.hideTitle?l.createElement(d,a.__assign({values:{actorName:n,folderTitle:t}},c.actornamesharedfolderTitle)):l.createElement(d,a.__assign({},c.actorNameShared,{values:{actorName:n}}))
};t.prototype.render=function(){var e=this.props.notificationStory.notifications[0],t=e.payload.personalMessage,n=l.createElement("div",null);if(t){var o=null
;if(!this.state.contentExpanded&&t.length>85){t=t.substr(0,85);o=l.createElement("span",null,l.createElement("span",null,"… "),l.createElement(r.default,{onClick:this.handleExpand,
className:"hp-notification-story-read-more","title-track":"Read More: Folder Invite Story"},l.createElement(d,a.__assign({},c.readmore))))}n=l.createElement("div",{
className:"hp-notification-summary-invite-message"},l.createElement("span",{className:"notranslate"},t),o)}return l.createElement(s.default,{notifications:[e],app:this.props.app,
stores:this.props.stores},l.createElement("span",null,this.getSentence()),n)};t.displayName="FolderInviteNotification";return t}(l.PureComponent);t.default=u},1560:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(6),r=n(3),s=n(8),i=n(2),l=n(7),d=n(168),c=n(137),u=n(0),p=n(877),h=(0,n(5).PaperIntlFactory)().F,m=(0,i.defineMessages)({
actornamementionedyouindocTitle:{id:"H03zAP",defaultMessage:"{actorName} mentioned you in {docTitle}"},actornameassignedyouataskindocTitle:{id:"aP4WX2",
defaultMessage:"{actorName} assigned you a task in {docTitle}"},actornameassignedyouatodoindocTitle:{id:"2nMFLV",defaultMessage:"{actorName} assigned you a to-do in {docTitle}"},
actornamecompletedataskindocTitle:{id:"oGxP+8",defaultMessage:"{actorName} completed a task in {docTitle}"},actornamecompletedatodoindocTitle:{id:"uusilB",
defaultMessage:"{actorName} completed a to-do in {docTitle}"},actornamemarkedataskasincompleteindocTitle:{id:"WOIbG5",defaultMessage:"{actorName} marked a task as incomplete in {docTitle}"},
actornamemarkedatodoasincompleteindocTitle:{id:"K5fMGE",defaultMessage:"{actorName} marked a to-do as incomplete in {docTitle}"},actornameaddedatimelineitemforyouindocTitle:{id:"pdIQiE",
defaultMessage:"{actorName} added a timeline item for you in {docTitle}"},actornameassignedyouatimelineitemindocTitle:{id:"/O5HLb",
defaultMessage:"{actorName} assigned you a timeline item in {docTitle}"},actornameassignedyouatimelineitem:{id:"Y/bN6f",defaultMessage:"{actorName} assigned you a timeline item"},
actornamecheckedoffatimelineitemindocTitle:{id:"7eONuk",defaultMessage:"{actorName} checked off a timeline item in {docTitle}"},actornamecompletedatimelineitemindocTitle:{id:"Ry+UCd",
defaultMessage:"{actorName} completed a timeline item in {docTitle}"},actornamecheckedoffatimelineitem:{id:"KXESPG",defaultMessage:"{actorName} checked off a timeline item"},
actornamecompletedatimelineitem:{id:"Cj18uK",defaultMessage:"{actorName} completed a timeline item"},actornameuncheckedatimelineitemindocTitle:{id:"gf6tP3",
defaultMessage:"{actorName} unchecked a timeline item in {docTitle}"},actornamemarkedatimelineitemasincompleteindocTitle:{id:"itiNW+",
defaultMessage:"{actorName} marked a timeline item as incomplete in {docTitle}"},actornameuncheckedatimelineitem:{id:"btoXs+",defaultMessage:"{actorName} unchecked a timeline item"},
actornamemarkedatimelineitemasincomplete:{id:"N6D89y",defaultMessage:"{actorName} marked a timeline item as incomplete"},actorNameMentionedYou:{id:"DiOP6X",defaultMessage:"{actorName} mentioned you"},
actorNameAssignedYouTodo:{id:"C7lK5H",defaultMessage:"{actorName} assigned you a to-do"},actorNameCompletedTodo:{id:"uf2bIK",defaultMessage:"{actorName} completed a to-do"},
actorNameMarkedTodoIncomplete:{id:"BHD66G",defaultMessage:"{actorName} marked a to-do as incomplete"}}),f=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications[0],t=u.createElement("strong",null,e.renderedPayload.actorName),n=!this.props.hideTitle,o=u.createElement("strong",null,c.getDocTitleElement(e.renderedPayload.padTitle))
;switch(e.type){case l.NotificationType.NewMention:return n?u.createElement(h,a.__assign({values:{actorName:t,docTitle:o}
},m.actornamementionedyouindocTitle)):u.createElement(h,a.__assign({},m.actorNameMentionedYou,{values:{actorName:t}}));case l.NotificationType.NewTask:return n?u.createElement(h,a.__assign({values:{
actorName:t,docTitle:o}},m.actornameassignedyouatodoindocTitle)):u.createElement(h,a.__assign({},m.actorNameAssignedYouTodo,{values:{actorName:t}}));case l.NotificationType.CompleteTask:
return n?u.createElement(h,a.__assign({values:{actorName:t,docTitle:o}},m.actornamecompletedatodoindocTitle)):u.createElement(h,a.__assign({},m.actorNameCompletedTodo,{values:{actorName:t}}))
;case l.NotificationType.IncompleteTask:return n?u.createElement(h,a.__assign({values:{actorName:t,docTitle:o}
},m.actornamemarkedatodoasincompleteindocTitle)):u.createElement(h,a.__assign({},m.actorNameMarkedTodoIncomplete,{values:{actorName:t}}));case l.NotificationType.TimelineItemAssignment:
return n?u.createElement(h,a.__assign({values:{actorName:t,docTitle:o}},m.actornameassignedyouatimelineitemindocTitle)):u.createElement(h,a.__assign({values:{actorName:t}
},m.actornameassignedyouatimelineitem));case l.NotificationType.TimelineItemComplete:return n?u.createElement(h,a.__assign({values:{actorName:t,docTitle:o}
},m.actornamecheckedoffatimelineitemindocTitle)):u.createElement(h,a.__assign({values:{actorName:t}},m.actornamecheckedoffatimelineitem));case l.NotificationType.TimelineItemIncomplete:
return n?u.createElement(h,a.__assign({values:{actorName:t,docTitle:o}},m.actornameuncheckedatimelineitemindocTitle)):u.createElement(h,a.__assign({values:{actorName:t}
},m.actornameuncheckedatimelineitem))}};t.prototype.getMentionPlaintext=function(e){var t;if(e.payload.linePlaintext)switch(e.type){case l.NotificationType.TimelineItemAssignment:
case l.NotificationType.TimelineItemComplete:case l.NotificationType.TimelineItemIncomplete:
t=p.formatTimelineTitlePlainTextWithDates(e.payload.linePlaintext,new Date(e.payload.startDate),new Date(e.payload.dueDate),s.default.userLocale);break;default:t=e.payload.linePlaintext}else{
var n=document.createElement("div");n.innerHTML=e.payload.lineHtml;t=n.textContent.trim()}t.length>100&&(t=t.substr(0,100)+"…");return t};t.prototype.render=function(){
var e=this.props.notificationStory.notifications[0],t=this.getMentionPlaintext(e),n=r({"listtype-task":o.includes([l.NotificationType.NewTask,l.NotificationType.IncompleteTask],e.type),
"listtype-taskdone":e.type==l.NotificationType.CompleteTask});return u.createElement(d.default,{notifications:[e],app:this.props.app,stores:this.props.stores
},u.createElement("span",null,this.getSentence()),u.createElement("div",{className:"hp-notification-mention-content notranslate"},u.createElement("ul",{className:n},u.createElement("li",{
className:"ace-line"},t))))};t.displayName="MentionBasedNotification";return t}(u.PureComponent);t.default=f},1561:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(2),r=n(10),s=n(168),i=n(137),l=n(0),d=(0,n(5).PaperIntlFactory)().F,c=(0,o.defineMessages)({actornameshareddocTitle:{id:"wymMJ7",defaultMessage:"{actorName} shared {docTitle}"},
readmore:{id:"rQhs9V",defaultMessage:"Read more"},actorNameShared:{id:"IoLlka",defaultMessage:"{actorName} shared"}}),u=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.handleExpand=function(e){e.preventDefault();e.stopPropagation();n.setState({contentExpanded:!0})};n.state={contentExpanded:!1};return n}t.prototype.renderPersonalMessage=function(e,t){
var n=!1,a=e.split("\n");if(t&&a.length>3){a=a.slice(0,3);n=!0}var o=85,r=[];a.forEach((function(e,a){if(o>0){a>0&&r.push(l.createElement("br",null));if(t){if(e.length>o){e=e.substr(0,o);n=!0}
o-=e.length}r.push(l.createElement("span",{className:"notranslate"},e))}}));return{elements:r,isTruncated:n}};t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications[0],t=l.createElement("strong",null,i.getDocTitleElement(e.renderedPayload.padTitle)),n=l.createElement("strong",null,e.renderedPayload.actorName)
;return!this.props.hideTitle?l.createElement(d,a.__assign({values:{actorName:n,docTitle:t}},c.actornameshareddocTitle)):l.createElement(d,a.__assign({},c.actorNameShared,{values:{actorName:n}}))}
;t.prototype.render=function(){var e=this.props.notificationStory.notifications[0],t=e.payload.personalMessage,n=l.createElement("div",null),o=null;if(t){
var i=!this.state.contentExpanded,u=this.renderPersonalMessage(t,i);i&&u.isTruncated&&(o=l.createElement("span",null,l.createElement("span",{className:"notranslate"},"… "),l.createElement(r.default,{
onClick:this.handleExpand,className:"hp-notification-story-read-more","title-track":"Read More: Pad Invite Story"},l.createElement(d,a.__assign({},c.readmore)))));n=l.createElement("div",{
className:"hp-notification-summary-invite-message"},u.elements,o)}return l.createElement(s.default,{notifications:[e],app:this.props.app,stores:this.props.stores
},l.createElement("span",null,this.getSentence()),n)};t.displayName="PadInviteNotification";return t}(l.PureComponent);t.default=u},1562:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0
});var a=n(1),o=n(6),r=n(2),s=n(168),i=n(137),l=n(0),d=(0,n(5).PaperIntlFactory)().F,c=(0,r.defineMessages)({someoneopeneddocTitle:{id:"sLOmEh",defaultMessage:"Someone opened {docTitle}"},
actornameopeneddocTitle:{id:"QIPSxf",defaultMessage:"{actorName} opened {docTitle}"},actorNameandactorNameopeneddocTitle:{id:"I20LSL",defaultMessage:"{actor1Name} and {actor2Name} opened {docTitle}"},
actorNameandnumOtherspluraloneoneotherotherothersopeneddocTitle:{id:"2w8wdv",
defaultMessage:"{actor1Name} and {numOthers, plural,\n                one {one other}\n                other {# others}\n              } opened {docTitle}"},someoneOpened:{id:"GBac9C",
defaultMessage:"Someone opened"},actorNameOpened:{id:"rQb0/N",defaultMessage:"{actorName} opened"},actorNamesOpened:{id:"FGUwhE",defaultMessage:"{actor1Name} and {actor2Name} opened"},
actornameandMoreOpened:{id:"RJdfcX",defaultMessage:"{actor1Name} and {numOthers, plural, one {one other} other {# others}} opened"}}),u=function(e){a.__extends(t,e);function t(){
return null!==e&&e.apply(this,arguments)||this}t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications,t=l.createElement("strong",null,i.getDocTitleElement(e[0].renderedPayload.padTitle));e=e.filter((function(e){return!!e.renderedPayload.actorName}))
;var n=o.uniq(e.map((function(e){return e.renderedPayload.actorName}))).map((function(e){return l.createElement("strong",null,e)}));if(this.props.hideTitle){
if(0==n.length)return l.createElement(d,a.__assign({},c.someoneOpened));if(1==n.length){var r=n[0];return l.createElement(d,a.__assign({},c.actorNameOpened,{values:{actorName:r}}))}if(2==n.length){
var s=n[0],u=n[1];return l.createElement(d,a.__assign({},c.actorNamesOpened,{values:{actor1Name:s,actor2Name:u}}))}s=n[0];var p=n.length-1
;return l.createElement(d,a.__assign({},c.actornameandMoreOpened,{values:{actor1Name:s,numOthers:p}}))}if(0==n.length)return l.createElement(d,a.__assign({values:{docTitle:t}
},c.someoneopeneddocTitle));if(1==n.length){r=n[0];return l.createElement(d,a.__assign({values:{actorName:r,docTitle:t}},c.actornameopeneddocTitle))}if(2==n.length){s=n[0],u=n[1]
;return l.createElement(d,a.__assign({values:{actor1Name:s,actor2Name:u,docTitle:t}},c.actorNameandactorNameopeneddocTitle))}s=n[0],p=n.length-1;return l.createElement(d,a.__assign({values:{
actor1Name:s,numOthers:p,docTitle:t}},c.actorNameandnumOtherspluraloneoneotherotherothersopeneddocTitle))};t.prototype.render=function(){var e=this.props.notificationStory.notifications
;return l.createElement(s.default,{notifications:e,app:this.props.app,stores:this.props.stores},l.createElement("span",null,this.getSentence()),l.createElement("span",null))}
;t.displayName="PadReadReceiptNotification";return t}(l.PureComponent);t.default=u},1563:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(2),r=n(137),s=n(168),i=n(0),l=(0,n(5).PaperIntlFactory)().F,d=(0,o.defineMessages)({actornamewantsaccesstothedocdocTitle:{id:"hAGbkZ",
defaultMessage:"{actorName} wants access to the doc “{docTitle}”"},actorNameWantsAccess:{id:"1cGyto",defaultMessage:"{actorName} wants access"}}),c=function(e){a.__extends(t,e);function t(){
return null!==e&&e.apply(this,arguments)||this}t.prototype.getNotification=function(){return this.props.notificationStory.notifications[0]};t.prototype.getSentence=function(){
var e=this.getNotification(),t=i.createElement("strong",null,e.renderedPayload.actorName);if(this.props.hideTitle)return i.createElement(l,a.__assign({},d.actorNameWantsAccess,{values:{actorName:t}}))
;var n=i.createElement("strong",null,(0,r.getDocTitleElement)(e.renderedPayload.padTitle));return i.createElement(l,a.__assign({values:{actorName:t,docTitle:n}
},d.actornamewantsaccesstothedocdocTitle))};t.prototype.render=function(){return i.createElement(s.default,{notifications:[this.getNotification()],app:this.props.app,stores:this.props.stores
},i.createElement("span",null,this.getSentence()),i.createElement("span",null))};t.displayName="PadRequestAccessNotification";return t}(i.PureComponent);t.default=c},1564:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(6),r=n(594),s=n(141),i=n(2),l=n(60),d=n(168),c=n(137),u=n(0),p=(0,n(5).PaperIntlFactory)().F,h=(0,i.defineMessages)({
someonereactedtoyourcommentindocTitle:{id:"A7j8qr",defaultMessage:"Someone reacted to your comment in {docTitle}"},actornamereactedtoyourcommentindocTitle:{id:"XIv07e",
defaultMessage:"{actorName} reacted to your comment in {docTitle}"},actorNameandactorNamereactedtoyourcommentindocTitle:{id:"DYTOba",
defaultMessage:"{actor1Name} and {actor2Name} reacted to your comment in {docTitle}"},actorNameandnumOtherspluraloneoneotherotherothersreactedtoyourcommentindocTitle:{id:"Ei8h6y",
defaultMessage:"{actor1Name} and {numOthers, plural,\n              one {one other}\n              other {# others}\n            } reacted to your comment in {docTitle}"}}),m=function(e){
a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications,t=u.createElement("strong",null,c.getDocTitleElement(e[0].renderedPayload.padTitle));e=e.filter((function(e){return!!e.renderedPayload.actorName}))
;var n=o.uniq(e.map((function(e){return e.renderedPayload.actorName}))).map((function(e){return u.createElement("strong",null,e)}));if(0==n.length)return u.createElement(p,a.__assign({values:{
docTitle:t}},h.someonereactedtoyourcommentindocTitle));if(1==n.length){var r=n[0];return u.createElement(p,a.__assign({values:{actorName:r,docTitle:t}},h.actornamereactedtoyourcommentindocTitle))}
if(2==n.length){var s=n[0],i=n[1];return u.createElement(p,a.__assign({values:{actor1Name:s,actor2Name:i,docTitle:t}},h.actorNameandactorNamereactedtoyourcommentindocTitle))}s=n[0];var l=n.length-1
;return u.createElement(p,a.__assign({values:{actor1Name:s,numOthers:l,docTitle:t}},h.actorNameandnumOtherspluraloneoneotherotherothersreactedtoyourcommentindocTitle))};t.prototype.render=function(){
var e=this.props.notificationStory.notifications,t=o.uniq(e.map((function(e){return e.renderedPayload.emoji}))).map((function(e){return u.createElement(l.default,{key:e,str:e})}))
;return u.createElement(d.default,{notifications:e,app:this.props.app,stores:this.props.stores},u.createElement("span",null,this.getSentence()),u.createElement("div",null,u.createElement("div",{
className:"hp-notification-reacji-emojis"},t),r.default.renderCommentExcerpt(e[0].renderedPayload,100,2,(0,s.default)("commententry"))))};t.displayName="ReacjiNotification";return t}(u.PureComponent)
;t.default=m},1565:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(2),r=n(7),s=n(168),i=n(137),l=n(0),d=n(13),c=(0,n(5).PaperIntlFactory)().F,u=(0,o.defineMessages)({
timelineitemtitleindocTitlestartstoday:{id:"HTcKSR",defaultMessage:"{timelineItemTitle} in {docTitle} starts today"},timelineitemtitlestartstoday:{id:"CQ4VGN",
defaultMessage:"{timelineItemTitle} starts today"},timelineitemtitleindocTitleendstomorrow:{id:"/23sOX",defaultMessage:"{timelineItemTitle} in {docTitle} ends tomorrow"},
timelineitemtitleendstomorrow:{id:"sX094h",defaultMessage:"{timelineItemTitle} ends tomorrow"}}),p=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.getSentence=function(){
var e=this.props.notificationStory.notifications[0],t=!this.props.hideTitle,n=l.createElement("strong",null,e.renderedPayload.timelineItemTitle),o=l.createElement("strong",null,i.getDocTitleElement(e.renderedPayload.padTitle))
;switch(e.type){case r.NotificationType.TimelineItemReminderStart:return t?l.createElement(c,a.__assign({values:{timelineItemTitle:n,docTitle:o}
},u.timelineitemtitleindocTitlestartstoday)):l.createElement(c,a.__assign({values:{timelineItemTitle:n}},u.timelineitemtitlestartstoday));case r.NotificationType.TimelineItemReminderEnd:
return t?l.createElement(c,a.__assign({values:{timelineItemTitle:n,docTitle:o}},u.timelineitemtitleindocTitleendstomorrow)):l.createElement(c,a.__assign({values:{timelineItemTitle:n}
},u.timelineitemtitleendstomorrow))}};t.prototype.render=function(){var e=l.createElement("span",{className:"hp-notification-custom-icon"},l.createElement(d.default,{name:"insert-timeline"}))
;return l.createElement(s.default,{notifications:this.props.notificationStory.notifications,app:this.props.app,stores:this.props.stores,icon:e},l.createElement("span",null,this.getSentence()))}
;t.displayName="TimelineReminderNotification";return t}(l.PureComponent);t.default=p},1566:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(8),r=n(60),s=n(10),i=n(139),l=n(138),d=n(0),c=n(32),u=n(32),p=n(454),h=n(13),m=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.render=function(){var e=this.props,t=e.event,n=e.attachment,a=u.padTitleOrDefault(n.name,o.default.userLocale),l=(0,c.relativePrettyPaperDocUrl)(n.id,n.name,o.default.userLocale),m=(0,
p.shortDateAndTime)(t.start_time),f=m.date,g=m.time;return d.createElement(s.default,{styleless:!0,href:l,onClick:App.onLinkClicked,className:"hp-list-item hp-search-result-doc-item",tabIndex:-1,
"track-title":"Doc item"},d.createElement(i.default,{title:a},d.createElement(h.default,{name:"note"})),d.createElement("div",{className:"hp-list-item-content"},d.createElement("div",{
className:"hp-list-item-title notranslate"},d.createElement(r.default,{str:a,skipFirstEmoji:!0})),d.createElement("div",{className:"hp-list-item-subtitle"},d.createElement("div",{
className:"hp-doclist-entry-byline notranslate"},f," · ",g," · ",t.title))))};t.displayName="CalendarEventAttachmentItem";return t=a.__decorate([l.default],t)}(d.Component);t.default=m},
1567:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(3),r=n(8),s=n(2),i=n(60),l=n(233),d=n(10),c=n(139),u=n(138),p=n(14),h=n(878),m=n(201),f=n(23),g=n(0),y=n(32),v=n(13),E=n(84),_=n(4),S=(0,p.MsgFactory)("search"),C=S.F,b=(0,
S.defineMessages)({iscurrentusereditorselecttrueYoufalseeditoreditedlastEditedDate:{
description:"Shows who (you or the name of the last editor) and when last edited this\n            doc, ex. You edited 1 day ago.",
msg:"\n              {isCurrentUserEditor, select,\n                  true {You}\n                  false {{editor}}\n              } edited {lastEditedDate}"}}),P=((0,s.defineMessages)({
iscurrentusereditorselecttrueYoufalseeditoreditedlastEditedDate:{id:"Q200lY",
defaultMessage:"\n              {isCurrentUserEditor, select,\n                  true {You}\n                  false {{editor}}\n              } edited {lastEditedDate}"}}),function(e){
a.__extends(t,e);function t(t,n){return e.call(this,t,n)||this}t.prototype.renderFavoriteIcon=function(){var e=this.props.pad.isFavorite;return e?g.createElement(l.FavoriteIcon,{isFavorite:e,inline:!0
}):null};t.prototype.render=function(){var e=o("hp-list-item","hp-search-result-doc-item"),t=g.createElement(m.Presence,{maxNumVisibleUser:3,border:!0,activeUsers:this.props.pad.activeUsers})
;return g.createElement(d.default,{styleless:!0,href:this.props.pad.url,onClick:App.onLinkClicked,className:e,tabIndex:-1,"track-title":"Doc item"},g.createElement(c.default,{title:this.getTitle()
},g.createElement(v.default,{name:"note"})),g.createElement("div",{className:"hp-list-item-content"},g.createElement("div",{className:"hp-list-item-title notranslate"},g.createElement(i.default,{
str:this.getTitle(),skipFirstEmoji:!0}),this.renderFavoriteIcon()),g.createElement("div",{className:"hp-list-item-subtitle"},this.renderByLine_())),t)};t.prototype.renderByLine_=function(){
var e=this.props.pad,t=null;if(e.lastEditedDate){var n=e.secureLastEditorId==r.default.secureUserId;t=g.createElement(C,a.__assign({values:{isCurrentUserEditor:n,editor:e.lastEditorName,
lastEditedDate:g.createElement(E.TimeAgo,{date:e.lastEditedDate,pastOnly:!0})}},b.iscurrentusereditorselecttrueYoufalseeditoreditedlastEditedDate))}return g.createElement("div",{
className:"hp-doclist-entry-byline"},g.createElement("span",{className:"hp-doclist-entry-activity-info"},g.createElement(h.default,{lastViewOnly:!!t,pad:e
})),t?g.createElement("span",null,g.createElement("span",{className:"hp-doclist-entry-sharing-status-separator notranslate"}," ","·"," "),t):null)};t.prototype.getTitle=function(){
return y.padTitleOrDefault(this.props.pad.title,r.default.userLocale)};t.displayName="RecentDocItem";t.contextTypes={stores:f.object.isRequired}
;return t=a.__decorate([u.default,_.trackContextDecorator],t)}(g.Component));t.default=P},1568:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(3),r=n(2),s=n(60),i=n(233),l=n(76),d=n(200),c=n(10),u=n(139),p=n(138),h=n(14),m=n(23),f=n(0),g=n(84),y=n(4),v=(0,h.MsgFactory)("search"),E=v.F,_=(0,v.defineMessages)({
youhaveneverviewed:{description:"This shows when you have never viewed this folder.",msg:"You have never viewed"},youviewedlastViewedRelativeTimeAgo:{
description:"Shows when you viewed this folder last time.",msg:"You viewed {lastViewedRelativeTimeAgo}"}}),S=((0,r.defineMessages)({youhaveneverviewed:{id:"86vfT/",
defaultMessage:"You have never viewed"},youviewedlastViewedRelativeTimeAgo:{id:"vkiulO",defaultMessage:"You viewed {lastViewedRelativeTimeAgo}"}}),function(e){a.__extends(t,e);function t(t,n){
return e.call(this,t,n)||this}t.prototype.renderFavoriteIcon=function(){var e=this.props.folder.inSidebar;return e?f.createElement(i.FavoriteIcon,{isFavorite:e,inline:!0}):null}
;t.prototype.render=function(){var e=o("hp-list-item","hp-search-result-doc-item"),t=this.props.folder,n=l.prettyFolderUrl(t.folder);return f.createElement(c.default,{styleless:!0,href:n,
onClick:App.onLinkClicked,className:e,tabIndex:-1,"track-title":"Folder item"},f.createElement(u.default,{title:this.getTitle(),hideEmojiBadge:!0},f.createElement(d.default,{folderData:t,
useDecoratedIcon:!0})),f.createElement("div",{className:"hp-list-item-content"},f.createElement("div",{className:"hp-list-item-title notranslate"},f.createElement(s.default,{str:this.getTitle()
}),this.renderFavoriteIcon()),f.createElement("div",{className:"hp-list-item-subtitle"},this.renderByLine_())))};t.prototype.renderByLine_=function(){
var e=this.props.folder,t=f.createElement(E,a.__assign({},_.youhaveneverviewed));e.folderView&&e.folderView.lastViewedFolderTime&&(t=f.createElement(E,a.__assign({values:{
lastViewedRelativeTimeAgo:f.createElement(g.TimeAgo,{date:e.folderView.lastViewedFolderTime,pastOnly:!0})}},_.youviewedlastViewedRelativeTimeAgo)));var n=l.getShortParentFolderName(e)
;return f.createElement("div",{className:"hp-doclist-entry-byline"},f.createElement("span",{className:"hp-doclist-entry-activity-info"},t),n?[f.createElement("span",{
className:"hp-doclist-entry-sharing-status-separator notranslate"}," ","·"," "),f.createElement("span",{className:"notranslate"},n)]:null)};t.prototype.getTitle=function(){
return this.props.folder.folder.name};t.displayName="RecentFolderItem";t.contextTypes={stores:m.object.isRequired};return t=a.__decorate([p.default,y.trackContextDecorator],t)}(f.Component))
;t.default=S},1569:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SearchResultDocItem=void 0
;var a=n(1),o=n(6),r=n(3),s=n(8),i=n(2),l=n(233),d=n(76),c=n(10),u=n(139),p=n(354),h=n(138),m=n(14),f=n(878),g=n(201),y=n(23),v=n(0),E=n(1570),_=n(32),S=n(13),C=n(4),b=(0,
m.MsgFactory)("search"),P=b.F,I=(0,b.defineMessages)({archived:{description:"Small badge that indicates the doc is archived",msg:"archived"},sharedbyperson:{
description:"This indicates a search result is shared to you by the person.",msg:"Shared by {person}"},yousharedtoperson:{description:"This indicates a search result is shared to the person by you.",
msg:"You shared to {person}"},personcreated:{description:"This indicates a search result is created by the person.",msg:"{person} created"},sharedwithusersotherCountpluraloneandotherotherandothers:{
description:"This indicates a search result is shared with some named people\n                    and maybe other unnamed people.",
msg:"Shared with {users} {\n                    otherCount, plural,\n                      one {and # other}\n                      other {and # others}\n                }"},sharedwithusers:{
description:"This indicates a search result is shared with some named people\n                    and maybe other unnamed people.",msg:"Shared with {users}"},sharedwithinvitedUserName:{
msg:"Shared with {invitedUserName}"},sharedwithnumOtherspluraloneotherothernumOthersothers:{
msg:"Shared with {numOthers, plural,\n                one {1 other}\n                other {{numOthers} others}\n              }"},privatetoyou:{msg:"Private to you",
description:"This indicates a search result is only accessible by you."},onlyyou:{msg:"Only you",description:"This indicates a search result can only be found by the current viewer."}}),T=((0,
i.defineMessages)({archived:{id:"Wa4M6Y",defaultMessage:"archived"},sharedbyperson:{id:"BkK0Ut",defaultMessage:"Shared by {person}"},yousharedtoperson:{id:"CCdGLm",
defaultMessage:"You shared to {person}"},personcreated:{id:"6+lxpG",defaultMessage:"{person} created"},sharedwithusersotherCountpluraloneandotherotherandothers:{id:"m6LE/p",
defaultMessage:"Shared with {users} {\n                    otherCount, plural,\n                      one {and # other}\n                      other {and # others}\n                }"},
sharedwithusers:{id:"iythzd",defaultMessage:"Shared with {users}"},sharedwithinvitedUserName:{id:"plEd/F",defaultMessage:"Shared with {invitedUserName}"},
sharedwithnumOtherspluraloneotherothernumOthersothers:{id:"7Tann4",
defaultMessage:"Shared with {numOthers, plural,\n                one {1 other}\n                other {{numOthers} others}\n              }"},privatetoyou:{id:"+YqtuF",defaultMessage:"Private to you"
},onlyyou:{id:"hZSnRZ",defaultMessage:"Only you"}}),function(e){a.__extends(t,e);function t(t,n){return e.call(this,t,n)||this}t.prototype.renderFavoriteIcon=function(){var e=this.props.pad.isFavorite
;return e?v.createElement(l.FavoriteIcon,{isFavorite:e,inline:!0}):null};t.prototype.render=function(){
var e=this.props.pad,t=r("hp-list-item","hp-search-result-doc-item"),n=(e.collatedQuery||e.originalQuery||"").split(/ +/),s=this.getTitle(),i=(0,p.getHighlightedTokens)(s,n),l=!o.some(i,(function(e){
return e.hit}))&&e.snippets&&e.snippets.length>0,d=v.createElement(g.Presence,{maxNumVisibleUser:3,border:!0,activeUsers:e.activeUsers}),h=e.isArchived&&v.createElement("span",{
className:"archived-badge"},v.createElement(P,a.__assign({},I.archived))),m=v.createElement(S.default,{name:e.isArchived?"note-archived":"note"});return v.createElement(c.default,{styleless:!0,
onClick:App.onLinkClicked,href:e.url,className:t,tabIndex:-1,"track-title":"Doc item"},v.createElement(u.default,{title:s,className:"hp-list-item-icon-doc"},m),v.createElement("div",{
className:"hp-list-item-content"},v.createElement("div",{className:"hp-list-item-title notranslate"},h,v.createElement(p.default,{str:s,keywords:n
}),this.renderFavoriteIcon()),l?this.renderSnippet():null,v.createElement("div",{className:"hp-list-item-subtitle"},this.renderByLine_())),d)};t.prototype.renderSnippet=function(){
return this.props.pad.snippets.length>0?v.createElement("div",{className:"hp-search-snippet notranslate",dangerouslySetInnerHTML:{__html:"…"+this.props.pad.snippets[0]+"…"}}):null}
;t.prototype.matchShareEdges_=function(e,t){var n={sharedBy:null,sharedTo:[]},a=s.default.secureUserId;if(t.length>0&&e.length>0){var r=o.map(e,"secureUserId"),i=o.zipObject(r,o.map(e,"name"))
;t.forEach((function(e){e[0]==a&&e[1]in i?n.sharedTo.push(i[e[1]]):e[1]==a&&e[0]in i&&(n.sharedBy=i[e[0]])}))}return n};t.prototype.getPeopleSearchOverrides=function(){
if(this.props.highlightedUsers&&this.props.highlightedUsers.length>0){var e=this.props.highlightedUsers.map((function(e){return e.name
})),t=this.matchShareEdges_(this.props.highlightedUsers,this.props.pad.secureShareEdges);if(t.sharedBy)return{byLine:v.createElement(P,a.__assign({values:{person:v.createElement("b",{className:"hit"
},t.sharedBy)}},I.sharedbyperson))};if(t.sharedTo)return{byLine:v.createElement(P,a.__assign({values:{person:v.createElement("b",{className:"hit"},t.sharedTo)}},I.yousharedtoperson))}
;if(e.indexOf(this.props.pad.creator)>=0)return{byLine:v.createElement(P,a.__assign({values:{person:v.createElement("b",{className:"hit"},this.props.pad.creator)}},I.personcreated))}
;if(this.props.pad.editors.length>0){var n=void 0;if(0==(e=o.intersection(e,this.props.pad.editors).slice(0,2)).length){e=this.props.pad.editors.slice(0,1);n=v.createElement("span",null,e[0])
}else n=e.map((function(e,t){return v.createElement("span",null,0==t?"":", ",v.createElement("b",{className:"hit"},e))}))
;var r=this.props.pad.invitedUserCount-e.length,s=r?v.createElement(P,a.__assign({values:{users:n,otherCount:r}
},I.sharedwithusersotherCountpluraloneandotherotherandothers)):v.createElement(P,a.__assign({values:{users:n}},I.sharedwithusers));return this.props.pad.folderData?{byLine:s}:{sharingStatus:s}}}
return{}};t.prototype.getSharingStatus=function(){var e=this.props.pad;if(e.folderData)return v.createElement("span",{className:"notranslate"},d.getTailFolderName(this.props.pad.folderData))
;if(e.invitedUserCount>0){var t=e.invitedUserCount;return 1==t&&e.invitedUserName?v.createElement(P,a.__assign({values:{invitedUserName:e.invitedUserName}
},I.sharedwithinvitedUserName)):v.createElement(P,a.__assign({values:{numOthers:t}},I.sharedwithnumOtherspluraloneotherothernumOthersothers))}return v.createElement(P,a.__assign({},I.onlyyou))}
;t.prototype.renderByLine_=function(){var e,t=this.props.pad,n=this.getPeopleSearchOverrides(),a=v.createElement("span",{className:"hp-doclist-entry-sharing-status-separator notranslate"
}," · "),o=n.byLine||v.createElement(f.default,{preSeparator:a,pad:t}),r=n.sharingStatus||this.getSharingStatus();if(r){var s=t.invitedUserCount;r=v.createElement(E.default,{
isCreator:this.props.pad.isCreator,isInvited:this.props.pad.isInvited,numOthersInvitedToPad:s,folderData:this.props.pad.folderData,padTeamName:this.props.pad.padTeamName,
isPersonalDomainPad:this.props.pad.isPersonalDomainPad,padEncryptedDomainId:this.props.pad.encryptedDomainId,companyGuestPolicy:this.props.pad.guestPolicy,sharingMessage:r,
publicGuestPolicy:this.props.pad.publicGuestPolicy,folderMemberGuestPolicy:this.props.pad.folderMemberGuestPolicy})}r&&(e=v.createElement("span",{className:"hp-doclist-entry-sharing-status"},r))
;return n.byLine?v.createElement("div",{className:"hp-doclist-entry-byline"},e,v.createElement("span",{className:"hp-doclist-entry-activity-info"},o)):v.createElement("div",{
className:"hp-doclist-entry-byline"},v.createElement(f.default,{postSeparator:a,pad:t,lastViewOnly:!0}),e,v.createElement("span",{className:"hp-doclist-entry-activity-info"
},v.createElement(f.default,{preSeparator:a,pad:t,lastEditOnly:!0})))};t.prototype.getTitle=function(){return _.padTitleOrDefault(this.props.pad.title,s.default.userLocale)}
;t.displayName="SearchResultDocItem";t.contextTypes={stores:y.object.isRequired};return t=a.__decorate([h.default,C.trackContextDecorator],t)}(v.Component));t.SearchResultDocItem=T},
1570:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(8),r=n(120),s=n(7),i=n(14),l=n(0),d=n(13),c=n(4),u=(0,i.MsgFactory)("ui"),p=u.F,h=(0,u.defineMessages)({creator:{
msg:"You can find this doc because you made it"},folderName:{msg:"You can find this doc because it is in the {folderTeamName} folder “{folderName}”"},shared:{
msg:"You can find this doc because it was shared with you"},inviteOnly:{msg:"You can find this doc because it is in the invite-only folder “{folderName}”"},folder:{
msg:"You can find this doc because it is in the folder “{folderName}”"}}),m=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.isInviteOnly=function(){return"deny"==this.props.publicGuestPolicy&&"deny"==this.props.companyGuestPolicy};t.prototype.isLegacyInviteOnly=function(){
return this.isInviteOnly()&&"default"==this.props.folderMemberGuestPolicy};t.prototype.inTeamFolder=function(){
return this.props.folderData&&this.props.folderData.folder&&this.props.folderData.folder.guestPolicy==s.FolderGuestPolicy.public};t.prototype.inInviteOnlyFolder=function(){
return this.props.folderData&&this.props.folderData.folder&&this.props.folderData.folder.guestPolicy==s.FolderGuestPolicy.private};t.prototype.isTeamDoc=function(){
return this.inTeamFolder()&&!this.isLegacyInviteOnly()};t.prototype.isTeamDocInYourTeamFolder=function(){
return this.isTeamDoc()&&this.props.folderData.folder.encryptedDomainId==o.default.encryptedTeamId};t.prototype.isOnlyMe=function(){return 0==this.props.numOthersInvitedToPad}
;t.prototype.render=function(){var e
;e=this.isLegacyInviteOnly()?"acl-lock-filled":this.inTeamFolder()?"acl-building-filled":this.isInviteOnly()?"acl-lock-filled":!this.props.folderData&&this.isOnlyMe()?"acl-person-filled":"acl-shared-filled"
;return l.createElement(r.default,{tooltip:this.tooltipContent(),className:"hp-search-privacy-message"},l.createElement("span",{className:"hp-search-privacy-avatar"},l.createElement(d.default,{name:e
})),this.props.sharingMessage)};t.prototype.tooltipContent=function(){var e
;if(this.props.isCreator)e=l.createElement(p,a.__assign({},h.creator));else if(this.isTeamDocInYourTeamFolder())e=l.createElement(p,a.__assign({values:{folderTeamName:this.props.folderData.teamName,
folderName:this.props.folderData.folder.name}
},h.folderName));else if(this.props.isInvited)e=l.createElement(p,a.__assign({},h.shared));else if(this.inInviteOnlyFolder())e=l.createElement(p,a.__assign({values:{
folderName:this.props.folderData.folder.name}},h.inviteOnly));else{if(!this.props.folderData){(0,c.trackEng)("Unexplainable search result");return null}e=l.createElement(p,a.__assign({values:{
folderName:this.props.folderData.folder.name}},h.folder))}return l.createElement("div",null,l.createElement("div",{className:"hp-search-privacy-avatar-tooltip-explanation"},e))}
;t.displayName="SearchPrivacyAvatar";return t}(l.PureComponent);t.default=m},1571:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SearchResultFolderItem=void 0
;var a=n(1),o=n(3),r=n(2),s=n(7),i=n(233),l=n(76),d=n(200),c=n(10),u=n(139),p=n(354),h=n(138),m=n(14),f=n(23),g=n(0),y=n(84),v=n(4),E=(0,m.MsgFactory)("search"),_=E.F,S=(0,E.defineMessages)({
inviteonlyproject:{description:"This indicates a project can be accessed by the invited people only.",msg:"Invite-only project"},inviteonlyfolder:{
description:"This indicates a folder can be accessed by the invited people only.",msg:"Invite-only folder"},everyoneatteamName:{
description:"This indicates a folder/project can be accessed by everyone on the team.",msg:"Everyone at {teamName}"},youviewedlastViewedRelativeTimeAgo:{
description:"Shows when you viewed this folder last time.",msg:"You viewed {lastViewedRelativeTimeAgo}"}}),C=((0,r.defineMessages)({inviteonlyproject:{id:"bv/h8E",defaultMessage:"Invite-only project"
},inviteonlyfolder:{id:"Xf3MOI",defaultMessage:"Invite-only folder"},everyoneatteamName:{id:"L+X7om",defaultMessage:"Everyone at {teamName}"},youviewedlastViewedRelativeTimeAgo:{id:"vkiulO",
defaultMessage:"You viewed {lastViewedRelativeTimeAgo}"}}),function(e){a.__extends(t,e);function t(t,n){return e.call(this,t,n)||this}t.prototype.renderFavoriteIcon=function(){
var e=this.props.folder.inSidebar;return e?g.createElement(i.FavoriteIcon,{isFavorite:e,inline:!0}):null};t.prototype.renderByLine=function(){
var e=this.props.folder,t=e.folder.isProject?g.createElement(_,a.__assign({},S.inviteonlyproject)):g.createElement(_,a.__assign({},S.inviteonlyfolder)),n=e.folder.guestPolicy==s.FolderGuestPolicy.public?g.createElement(_,a.__assign({
values:{teamName:e.teamName}},S.everyoneatteamName)):t,o=this.renderFolderPath(e),r=null;e.folderView&&e.folderView.lastViewedFolderTime&&(r=g.createElement(_,a.__assign({values:{
lastViewedRelativeTimeAgo:g.createElement(y.TimeAgo,{date:e.folderView.lastViewedFolderTime,pastOnly:!0})}},S.youviewedlastViewedRelativeTimeAgo)));return g.createElement("div",{
className:"hp-doclist-entry-byline"},g.createElement("span",null,n,o&&[g.createElement("span",{className:"hp-doclist-entry-sharing-status-separator notranslate"
}," ","·"," "),o],r&&[g.createElement("span",{className:"hp-doclist-entry-sharing-status-separator notranslate"}," ","·"," "),r]))};t.prototype.renderFolderPath=function(e){
if(e.folder.encryptedId==e.folder.encryptedTopFolderId)return null;var t=[],n=e.parentFolders;n.length>0&&t.push(n[0].name);n.length>=3&&t.push("…");n.length>=2&&t.push(n[n.length-1].name)
;return g.createElement("span",{className:"notranslate"},t.join("/"))};t.prototype.render=function(){
var e=this.props.folder,t=o("hp-list-item","hp-search-result-folder-item"),n=e.folder.isProject?"Project item":"Folder item",a=l.prettyFolderUrl(e.folder);return g.createElement(c.default,{
styleless:!0,onClick:App.onLinkClicked,href:a,className:t,tabIndex:-1,"track-title":n},g.createElement(u.default,{title:e.folder.name,hideEmojiBadge:!0},g.createElement(d.default,{folderData:e,
useDecoratedIcon:!0})),g.createElement("div",{className:"hp-list-item-content"},g.createElement("div",{className:"hp-list-item-title notranslate"},g.createElement(p.default,{str:e.folder.name,
keywords:(e.originalQuery||"").split(/ +/)}),this.renderFavoriteIcon()),g.createElement("div",{className:"hp-list-item-subtitle"},this.renderByLine())))};t.displayName="SearchResultFolderItem"
;t.contextTypes={stores:f.object.isRequired};return t=a.__decorate([h.default,v.trackContextDecorator],t)}(g.Component));t.SearchResultFolderItem=C},1572:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(3),r=n(10),s=n(0),i=n(102),l=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.render=function(){var e=this.props.user.name,t=this.props.user.email,n=o("hp-list-item"),a="/?q= with:"+encodeURIComponent(t);return s.createElement(r.default,{styleless:!0,className:n,
href:a,tabIndex:-1,"track-title":"People search entry"},s.createElement("div",{className:"hp-list-item-icon"},s.createElement(i.default,{user:this.props.user})),s.createElement("div",{
className:"hp-list-item-content"},s.createElement("div",{className:"hp-list-item-title notranslate"},e),s.createElement("div",{className:"hp-list-item-subtitle notranslate"},t)))}
;t.displayName="SearchResultPeopleItem";return t}(s.Component);t.default=l},1573:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SearchSectionShowAllButton=void 0
;var a=n(616),o=n(0),r=n(1574);t.SearchSectionShowAllButton=function(e){return o.createElement(a.PopoverListItem,{section:e.section,sectionKey:e.sectionKey,className:"hp-list-show-all",
key:"show-more-"+e.section},o.createElement(r.default,{onLinkClicked:e.onLinkClicked,url:e.url}))}},1574:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(3),r=n(2),s=n(10),i=n(14),l=n(0),d=n(13),c=(0,i.MsgFactory)("search"),u=c.F,p=(0,c.defineMessages)({gotoalldocs:{msg:"Go to all docs"},showall:{msg:"Show all"}}),h=((0,
r.defineMessages)({gotoalldocs:{id:"5jk3bW",defaultMessage:"Go to all docs"},showall:{id:"UKJ53o",defaultMessage:"Show all"}}),function(e){a.__extends(t,e);function t(){
return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=o("hp-list-item","hp-list-show-all-button");return l.createElement(s.default,{styleless:!0,className:e,
href:this.props.url,onClick:this.props.onLinkClicked,tabIndex:-1,"track-title":"show all"},l.createElement("div",{className:"hp-list-item-icon"},l.createElement(d.default,{name:"chevron"
})),l.createElement("div",{className:"hp-list-item-content"},l.createElement(u,a.__assign({},p.gotoalldocs))))};t.displayName="ShowAllButton";return t}(l.Component));t.default=h},1575:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.getStatusPlainText=t.showStatusText=t.isValidStatus=t.getStatusForSelection=void 0;var a=n(1),o=n(8),r=n(14),s=n(0),i=n(2),l=n(7),d=(0,
r.MsgFactory)("status"),c=d.F,u=d.defineMessages,p=d.IntlMessageFormat,h=u({error:{msg:"Error"},default:{msg:"Status not set"},draft:{msg:"Draft"},inReview:{msg:"In Review"},final:{msg:"Final"}});(0,
i.defineMessages)({error:{id:"fy9qFc",defaultMessage:"Error"},default:{id:"G82l1N",defaultMessage:"Status not set"},draft:{id:"I9M+Iq",defaultMessage:"Draft"},inReview:{id:"/EvhwK",
defaultMessage:"In Review"},final:{id:"ZysizF",defaultMessage:"Final"}});t.getStatusForSelection=function(){return[l.DocStatus.Draft,l.DocStatus.InReview,l.DocStatus.Final]}
;t.isValidStatus=function(e){return e>0&&e<5};t.showStatusText=function(e){switch(e){case void 0:case 0:return s.createElement(c,a.__assign({},h.error));case l.DocStatus.Default:
return s.createElement(c,a.__assign({},h.default));case l.DocStatus.Draft:return s.createElement(c,a.__assign({},h.draft));case l.DocStatus.InReview:return s.createElement(c,a.__assign({},h.inReview))
;case l.DocStatus.Final:return s.createElement(c,a.__assign({},h.final));default:return}};t.getStatusPlainText=function(e){var t;switch(e){case void 0:case 0:t=h.error;break;case l.DocStatus.Default:
t=h.default;break;case l.DocStatus.Draft:t=h.draft;break;case l.DocStatus.InReview:t=h.inReview;break;case l.DocStatus.Final:t=h.final;break;default:return}
return new p(t,o.default.userLocale).format()}},1745:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.noSidebarButton=void 0;n(1746);t.noSidebarButton="_noSidebarButton_myjxe_1"
;t.default={noSidebarButton:"_noSidebarButton_myjxe_1"}},1746:function(e,t,n){},1779:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.MoveWarningPopup=void 0
;var a=n(1),o=n(2),r=n(10),s=n(70),i=n(0),l=(0,n(5).PaperIntlFactory)().F,d=(0,o.defineMessages)({justsoyouknow:{id:"b16jsI",defaultMessage:"Just so you know"},learnmore:{id:"jzlCDx",
defaultMessage:"Learn more"},cancel:{id:"d9/SE1",defaultMessage:"Cancel"},continue:{id:"LgJiOW",defaultMessage:"Continue"},folderType:{id:"WOQ+r0",
defaultMessage:"This doc is saved to a {folderType} folder and can only be moved to another {folderType} folder."}}),c=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.cancel=function(){t.popup.close()};t.onAccept=function(){t.popup&&t.popup.close();t.props.continueToMove()};return t}t.prototype.render=function(){
var e=this,t=this.props.isCloudDoc?"Dropbox":"Paper",n=this.props.isCloudDoc?"https://help.dropbox.com/files-folders/paper/different-version":"https://help.dropbox.com/files-folders/paper/different-version-new"
;return i.createElement(s.default,{openOnMount:!0,closeOnEsc:!0,unmountOnClose:!0,ref:function(t){return e.popup=t}},i.createElement("div",{className:"hp-popup-content"
},i.createElement("h1",null,i.createElement(l,a.__assign({},d.justsoyouknow))),i.createElement("p",null,i.createElement(l,a.__assign({},d.folderType,{values:{folderType:t}
})),i.createElement("span",null," "),i.createElement("a",{href:n,target:"_blank",rel:"noreferrer"},i.createElement(l,a.__assign({},d.learnmore)))),i.createElement("div",{className:"dmc-button-pair"
},i.createElement(r.default,{secondary:!0,onClick:this.cancel},i.createElement(l,a.__assign({},d.cancel))),i.createElement(r.default,{primary:!0,onClick:this.onAccept
},i.createElement(l,a.__assign({},d.continue))))))};t.displayName="MoveWarningPopup";return t}(i.PureComponent);t.MoveWarningPopup=c},1780:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});t.open=t.DropinPopup=void 0;var a=n(1),o=n(8),r=n(18),s=n(14),i=n(70),l=n(40),d=n(0),c=n(36),u=n(24),p=n(44),h=n(71),m=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.close=function(){n.popup.close()};n.mountDropin=function(){Dropbox.mount(n.props.dropin,document.querySelector(".hp-dropin-move-popup"))};t.dropin.setOnCloseDialogMessage(n.close);return n}
t.prototype.componentDidMount=function(){(0,p.realSetTimeout)(this.mountDropin,0)};t.prototype.render=function(){var e=this;return d.createElement(i.default,{openOnMount:!0,ref:function(t){e.popup=t},
size:"large",onClose:function(){Dropbox.unmount(e.props.dropin);e.props.onClose()},className:"chooser-popup"},d.createElement("h2",{ref:"popupContent",
className:"hp-dropin-move-popup hp-popup-content","aria-labelledby":"move_dialog-header"}))};t.displayName="DropinPopup";return t=a.__decorate([l.default],t)}(d.Component);t.DropinPopup=m
;t.open=function(e){var t=document.querySelector("#hp-popup-container"),n=function(){u.unmountComponentAtNode(t);(0,r.empty)(t)};n()
;c.reactDomRender(d.createElement(h.ToastAndUnmountErrorBoundary,null,d.createElement(s.IntlProvider,{locale:o.default.userLocale},d.createElement(m,a.__assign({},e,{onClose:n})))),t)}},
1830:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(952),o=n(0),r=function(e){var t=e.padController,n=e.localPadId,r=e.stores,s=e.showSidebarButton
;return o.createElement(a.default,{showSidebarButton:s,localPadId:n,padController:t,stores:r})};r.displayName="LoggedInLeftHeader";t.default=r},1831:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.HeaderTitleTitle=void 0;var a=n(60),o=n(0),r=n(35);t.HeaderTitleTitle=function(e){var t=e.title;return o.createElement(r.Text,{color:"inherit",
className:"hp-header-title selenium-pad-header-title notranslate",dir:"auto"},o.createElement(a.default,{str:t}))};t.HeaderTitleTitle.displayName="HeaderTitleTitle"},1832:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(25),o=n(2),r=n(233),s=n(149),i=n(0),l=(0,n(5).PaperIntlFactory)()._f,d=(0,o.defineMessages)({addedToFavorites:{id:"6TRN8K",
defaultMessage:"Added doc to favorites."},removedFromFavorites:{id:"rzebb+",defaultMessage:"Removed doc from favorites."}}),c=(0,a.createReactClass)({displayName:"PadHeaderFavoriteButton",mixins:[s],
getInitialState:function(){return{isFavorite:this.props.initiallyFavorite}},bindEvents:function(){this.props.stores.padList.on("pad-list-change",this.handlePadListChange)},
componentDidMount:function(){this.bindEvents()},componentWillUnmount:function(){this.props.stores.padList.off("pad-list-change",this.handlePadListChange)},handlePadListChange:function(){
var e=this.props.stores.padList.getPadFromMemory(this.props.localPadId);e&&this.setState({isFavorite:e.isFavorite})},onSave:function(e){var t=e.isFavorite;this.setState({isFavorite:t})
;App.ariaStatusUpdate(l(t?d.addedToFavorites:d.removedFromFavorites))},render:function(){return i.createElement(r.default,{className:"hp-header-star",inline:!0,itemType:"note",
localPadId:this.props.localPadId,isFavorite:this.state.isFavorite,source:"pad-header",onSave:this.onSave,stores:this.props.stores})}});t.default=c},1833:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.SectionMoverLoadableLib=void 0;var a=n(165);t.SectionMoverLoadableLib=(0,a.default)({importPath:"client/lazy/section_mover_wrapper",
chunkName:"section_mover",requireAsync:function(){return new Promise((function(e){
Promise.all([n.e("vendors~paper_binder~paper_bundle~paper_cloud_docs~paper_native_desktop~paper_pifs~paper_view_only~s~152516be"),n.e("paper_binder~paper_bundle~paper_cloud_docs~paper_native_desktop~paper_pifs~paper_view_only~section_mover"),n.e("doc_pinning~section_mover"),n.e("section_mover")]).then(function(t){
e(n(704))}.bind(null,n)).catch(void 0)}))},resolveWeak:function(){return 704}})},1834:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},1835:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(26),r=n(2),s=n(120),i=n(60),l=n(143),d=n(273),c=n(0),u=n(13),p=n(4),h=n(17),m=n(455),f=(0,n(5).PaperIntlFactory)().F,g=(0,
r.defineMessages)({loading:{id:"sEukn4",defaultMessage:"Loading..."},folderunavailableoffline:{id:"DqyxJ6",defaultMessage:"Folder unavailable offline"},youdonthaveaccesstothisDropboxfolder:{
id:"Dylg5y",defaultMessage:"You don't have access to this Dropbox folder."}}),y=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
return c.createElement("div",{className:"hp-pad-folder"},c.createElement("div",{className:"hp-filesystem-breadcrumbs-folder-icon"},c.createElement(u.default,{name:"folder-small-gray"
})),c.createElement("div",{className:"hp-filesystem-breadcrumbs-folder-name"},this.renderContent()))};t.prototype.renderContent=function(){var e,t=this,n=this.props.filesystemInfo
;if(!n)return this.props.isOffline?c.createElement("span",{className:"hp-breadcrumbs-text hp-breadcrumbs-offline"
},c.createElement(f,a.__assign({},g.folderunavailableoffline))):c.createElement("span",{className:"hp-pad-folder-loading"},c.createElement(f,a.__assign({},g.loading)))
;if(n.errorMessage)e=[c.createElement(d.HpCrumb,null,c.createElement(s.default,{className:"notranslate",tooltip:c.createElement("div",{className:"hp-filesystem-breadcrumbs-tooltip"
},c.createElement(f,a.__assign({},g.youdonthaveaccesstothisDropboxfolder)))},c.createElement("span",{className:"notranslate"},n.errorMessage)))];else{if(!(e=n.path.map((function(e,a){
var o=a==n.path.length-1?"hp-filesystem-breadcrumbs-folder-name-current-parent":null;return c.createElement(d.HpCrumb,{href:e.browseUrl,target:"_top",key:"folder-"+a+e.displayName,onClick:function(e){
if(!t.props.isOffline){var o=n.path.slice(0,a+1).map((function(e,t){return"/"+e.displayName})).join("");t.linkToFolderInSidebar(e,o)}},isOffline:t.props.isOffline},c.createElement("span",{className:o
},c.createElement(i.default,{str:e.displayName})))}))).length){e.push(c.createElement(d.HpCrumb,{href:"https://".concat(o.default.dropboxDomainWWW,"/home"),target:"_top",key:"home",
isOffline:this.props.isOffline,onClick:function(e){t.props.isOffline||t.linkToFolderInSidebar(e,"/")}},c.createElement("span",{className:"hp-filesystem-breadcrumbs-folder-name-current-parent"
},c.createElement(i.default,{str:"Dropbox"}))))}(0,p.trigger)("filesystem-breadcrumbs-loaded")}return c.createElement("span",{className:"hp-pad-folder-name"},c.createElement(d.HpBreadcrumbs,{
isOffline:this.props.isOffline,size:"small_cloud_docs"},e))};t.prototype.linkToFolderInSidebar=function(e,t){
if(this.props.folderSidebarWrapper&&this.props.padController&&!h.default.events.shouldOpenInNewTab(e)&&!h.default.events.shouldOpenInNewWindow(e)){e.preventDefault()
;var n=this.props.folderSidebarWrapper.getFolderSidebar();if(!(null==n?void 0:n.isOpen())){var a=(0,l.getFolderSidebarToggleTrackDataFromPadController)(this.props.padController,!1);n.toggleByUser(a)}
var o=(0,l.getPadAndFolderApi)(this.props.padController);n.handleFolderLinkClicked(o.getDataForFolder({name:"",pathDisplay:t},null))}};t.displayName="DesktopFilesystemBreadcrumbs";return t
}(c.Component),v=(0,m.withFilesystemInfo)(y);t.default=v},1836:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.getSignupTagFromUrl=void 0;var a=n(118),o=n(80)
;t.getSignupTagFromUrl=function(e){var t=o.parseURISafe(e);if(t.bad)return null;var n=t.uri.getPath()
;return 0==n.indexOf("/doc/")?a.DropboxSignupTags.PaperViral:0==n.indexOf("/i/")?a.DropboxSignupTags.PaperInfluencer:0==n.indexOf("/template/library/")?a.DropboxSignupTags.PaperTemplateLibrary:null}},
1837:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.getMenuItemFromName=t.MigrateToFilesystemMenuItem=t.SharingSettingsMenuItem=t.CopyTemplateMenuItem=t.SaveAsTemplateMenuItem=t.PresentMenuItem=t.ExportMenuItem=t.MovePadIntoBinderMenuItem=t.MoveMenuItem=t.TrashMenuItem=t.ArchiveMenuItem=t.WideScreenMenuItem=t.OpenInWebMenuItem=t.PrintMenuItem=t.WordCountMenuItem=t.ViewHistoryMenuItem=t.SubscribeMenuItem=t.PadMenuFavoriteMenuItem=void 0
;var a=n(1),o=n(6),r=n(4),s=n(1838),i=n(1839),l=n(8),d=n(99),c=n(2),u=n(101),p=n(11),h=n(378),m=n(7),f=n(172),g=n(103),y=n(4),v=n(1840),E=n(28),_=n(488),S=n(1841),C=n(1842),b=n(1843),P=n(491),I=n(0),T=n(1844),N=n(1845),k=n(955),w=n(29),M=n(4),F=n(1847),x=n(956),D=n(1848),O=n(455),L=n(1849),R=n(31),A=n(843),B=n(518),U=(0,
n(5).PaperIntlFactory)().F,H=(0,c.defineMessages)({move:{id:"ds25UH",defaultMessage:"Move"},addToFolder:{id:"v62WDv",defaultMessage:"Add to folder"},moveToFolder:{id:"p+Enby",
defaultMessage:"Move to folder"}});t.PadMenuFavoriteMenuItem=function(e){return I.createElement(C.default,a.__assign({},e))};t.PadMenuFavoriteMenuItem.displayName="PadMenuFavoriteMenuItem"
;t.SubscribeMenuItem=function(e){return I.createElement(k.SubscribeButton,{localPadId:e.padController.getPadId(),isSubscribed:e.padController.followPreferences.isSubscribed(),
optedOutOfEmails:!e.stores.settings.getSettings().followEmails})};t.SubscribeMenuItem.displayName="SubscribeMenuItem";t.SubscribeMenuItem.displayName="SubscribeMenuItem"
;t.ViewHistoryMenuItem=function(e){return e.padController.isPadEditable()&&!E.isMobile()?I.createElement(x.default,a.__assign({},e)):null};t.ViewHistoryMenuItem.displayName="ViewHistoryMenuItem"
;t.WordCountMenuItem=function(e){return E.isMobile()?null:I.createElement(L.default,a.__assign({},e))};t.WordCountMenuItem.displayName="WordCountMenuItem";t.PrintMenuItem=function(e){
return E.isMobile()?null:I.createElement(P.default,a.__assign({},e))};t.PrintMenuItem.displayName="PrintMenuItem";t.OpenInWebMenuItem=function(e){return I.createElement(S.default,a.__assign({},e))}
;t.OpenInWebMenuItem.displayName="OpenInWebMenuItem";t.WideScreenMenuItem=function(){return d.isOn("wide-screen")?I.createElement(g.HpMenuItem,null,I.createElement(D.default,null)):null}
;t.WideScreenMenuItem.displayName="WideScreenMenuItem";t.ArchiveMenuItem=function(e){return e.padController.canUserArchivePad()?I.createElement(s.default,a.__assign({},e)):null}
;t.ArchiveMenuItem.displayName="ArchiveMenuItem";var j=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.handleFilesystemInfoUpdate=function(e){
t.props.padController.filesystemInfoStore&&t.refreshState()};t.handlePadOwnerChanged=function(e){t.refreshState()};t.state={canUserTrashPad:t.props.padController.canUserTrashPad()};return t}
t.prototype.refreshState=function(){this.setState({canUserTrashPad:this.props.padController.canUserTrashPad()})};t.prototype.componentDidMount=function(){var e
;this.events.on(null===(e=this.props.padController)||void 0===e?void 0:e.filesystemInfoStore,"change",this.handleFilesystemInfoUpdate)
;this.events.on(this.props.padController,"pad-owner-changed",this.handlePadOwnerChanged)};t.prototype.render=function(){return I.createElement(F.default,a.__assign({},this.props,{
disabled:!this.state.canUserTrashPad}))};t.displayName="TrashMenuItem";return t=a.__decorate([p.default],t)}(I.Component);t.TrashMenuItem=j;var W=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.handleRemoveFromFolder=function(){var e=t.props.padController.folderStore,n=e.getFolderData();y.IntentionEvent.RemovePadFromFolder.track(a.__assign({
context:r.AppContext.PadHeader.MoreMenu,is_public:n.folder.guestPolicy===m.FolderGuestPolicy.public},(0,f.default)(n)));e.clearFolder()};t.canUserMovePad=function(){
var e=t.props,n=e.padController,a=e.filesystemInfo;return!!(!n.isCloudDoc()||a&&a.canUserPerformFilesystemEditOperations)&&(n.peopleList&&n.peopleList.canCurrentUserChangeFolder())}
;t.getDropboxParentPath=function(){var e=t.props,n=e.padController,a=e.filesystemInfo;if(n.isCloudDoc()&&a){var r=a.path;if(!o.isUndefined(r))return o.map(r,"displayName").join("/")}return null}
;t.getMoveToFolderMessage=function(){var e=t.props,n=e.folderData,o=e.padController
;return n||o&&o.isCloudDoc()?I.createElement(U,a.__assign({},H.move)):l.default.isPersonalDomainUser?I.createElement(U,a.__assign({},H.addToFolder)):I.createElement(U,a.__assign({},H.moveToFolder))}
;return t}t.prototype.render=function(){var e=this.props,t=e.folderData,n=e.padController,a=e.stores;return I.createElement(_.default,{padController:n,stores:a,addNotMove:!t,folderData:t,
isMenuItem:!0,handleRemoveFromFolder:this.handleRemoveFromFolder,disabled:!this.canUserMovePad(),dropboxParentPath:this.getDropboxParentPath()},this.getMoveToFolderMessage())}
;t.displayName="MoveMenuItem";return t}(I.Component);t.MoveMenuItem=(0,O.withFilesystemInfo)(W);var V=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.canUserMovePad=function(){var e=t.props,n=e.padController,a=e.filesystemInfo
;return!!(!n.isCloudDoc()||a&&a.canUserPerformFilesystemEditOperations)&&(n.peopleList&&n.peopleList.canCurrentUserChangeFolder())};return t}t.prototype.render=function(){
return R.default.isOnButDoNotLog("binder_container")&&l.default.isSignedIn()?I.createElement(A.default,{disabled:!this.canUserMovePad()}):null};t.displayName="MovePadIntoBinderMenuItem";return t
}(I.Component);t.MovePadIntoBinderMenuItem=(0,O.withFilesystemInfo)(V);var Q=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.updateViewOnlyPadId=function(e){n.setState({
viewOnlyEnabled:!0,viewOnlyPadId:e})};n.handleViewOnlyDisabled=function(){n.setState({viewOnlyPadId:null,viewOnlyEnabled:!1})};n.state={viewOnlyEnabled:!!t.enabledViewOnlyPadId,
viewOnlyPadId:t.enabledViewOnlyPadId};return n}t.prototype.componentDidMount=function(){this.bindEvents()};t.prototype.bindEvents=function(){var e=this
;this.events.on(M.events,"view-only-id-updated",(function(t){e.updateViewOnlyPadId(t.viewOnlyPadId)}));this.events.on(M.events,"view-only-disabled",(function(){e.handleViewOnlyDisabled()}))}
;t.prototype.render=function(){return l.default.isSignedIn()?I.createElement(h.ExportSingleButton,{viewOnlyPadId:this.state.viewOnlyPadId,viewOnlyEnabled:this.state.viewOnlyEnabled,
padId:this.props.padId,padTitle:this.props.padTitle,padController:this.props.padController}):null};t.displayName="ExportMenuItem";return t=a.__decorate([p.default],t)}(I.Component);t.ExportMenuItem=Q
;t.PresentMenuItem=function(e){return I.createElement(b.default,a.__assign({},e))};t.PresentMenuItem.displayName="PresentMenuItem";t.SaveAsTemplateMenuItem=function(e){
return I.createElement(T.default,a.__assign({},e))};t.SaveAsTemplateMenuItem.displayName="SaveAsTemplateMenuItem";t.CopyTemplateMenuItem=function(e){return I.createElement(i.default,a.__assign({},e))}
;t.CopyTemplateMenuItem.displayName="CopyTemplateMenuItem";t.SharingSettingsMenuItem=function(e){return I.createElement(N.default,a.__assign({},e))}
;t.SharingSettingsMenuItem.displayName="SharingSettingsMenuItem";t.MigrateToFilesystemMenuItem=function(e){return I.createElement(v.default,{localPadId:e.localPadId})}
;t.MigrateToFilesystemMenuItem.displayName="MigrateToFilesystemMenuItem";t.getMenuItemFromName=function(e,n){
var a,o,r=n.padController,s=n.app,i=n.stores,l=n.folderData,d=n.platform,c=r.getPadId(),p=function(e,t,n){if(t==m.Platform.Desktop)return function(){n.getNativeServices().tabsUI.closeThisTab({
timestamps:{startTime:Date.now()},metadata:{cause:"pad-trashed"}})};if(e.isCloudDoc()&&t==m.Platform.Web)return function(){e.filesystemInfoStore.getFilesystemInfo().then((function(e){var t=(0,
u.dropboxUrl)("/paper");(0,w.topWindowLocationReplace)("delete-cloud-doc",t)}))};return null}(r,d,s);switch(e){case m.MenuItemName.Archive:return I.createElement(t.ArchiveMenuItem,{padController:r,
stores:i,isTemplate:r.isPadTemplate(),key:"archive"});case m.MenuItemName.CopyTemplate:return I.createElement(t.CopyTemplateMenuItem,{padController:r,stores:i,key:"copy-template"})
;case m.MenuItemName.Export:return I.createElement(Q,{padController:r,padId:c,padTitle:r.getTitle(),enabledViewOnlyPadId:r.padClientVars?r.padClientVars.enabledViewOnlyPadId:null,key:"export"})
;case m.MenuItemName.MigrateToFilesystem:return I.createElement(t.MigrateToFilesystemMenuItem,{localPadId:c,key:"migrate-to-filesystem"});case m.MenuItemName.Move:
return I.createElement(t.MoveMenuItem,{padController:r,stores:i,folderData:l,key:"move",isOffline:!1});case m.MenuItemName.MoveIntoBinder:return I.createElement(t.MovePadIntoBinderMenuItem,{
padController:r,key:"move-into-binder",isOffline:!1});case m.MenuItemName.OpenInWeb:return I.createElement(t.OpenInWebMenuItem,{app:s,padController:r,key:"open-in-web"})
;case m.MenuItemName.PadFavorite:return R.default.isOnButDoNotLog("paper_doc_pinning")&&r.isCloudDoc()?I.createElement(B.SectionMoverLazy,{file:{padId:r.getPadId(),
fileObjId:null!==(o=null===(a=r.padClientVars)||void 0===a?void 0:a.fileId)&&void 0!==o?o:"",name:r.getTitle()},isSubMenu:!0,disabled:!r.getPadId(),ref:n.sectionMoverRef,track:{pageName:"editor",
context:"editor_more_menu"}}):I.createElement(t.PadMenuFavoriteMenuItem,{padController:r,stores:i,key:"pad-favorite"});case m.MenuItemName.Present:return I.createElement(t.PresentMenuItem,{padId:c,
app:s,key:"present"});case m.MenuItemName.Print:return I.createElement(t.PrintMenuItem,{padId:c,key:"print"});case m.MenuItemName.SaveAsTemplate:return I.createElement(t.SaveAsTemplateMenuItem,{
padController:r,stores:i,key:"save-as-template"});case m.MenuItemName.SharingSettings:return I.createElement(t.SharingSettingsMenuItem,{padController:r,stores:i,key:"sharing-settings"})
;case m.MenuItemName.Subscribe:return I.createElement(t.SubscribeMenuItem,{padController:r,stores:i,key:"subscribe"});case m.MenuItemName.Trash:return I.createElement(j,{padController:r,stores:i,
app:s,onPadTrashed:p,key:"trash"});case m.MenuItemName.ViewHistory:return I.createElement(t.ViewHistoryMenuItem,{padController:r,key:"view-history"});case m.MenuItemName.Widescreen:
return I.createElement(t.WideScreenMenuItem,{key:"widescreen"});case m.MenuItemName.WordCount:return I.createElement(t.WordCountMenuItem,{padController:r,key:"word-count"})}}},1838:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(6),r=n(140),s=n(90),i=n(2),l=n(7),d=n(11),c=n(4),u=n(23),p=n(0),h=n(88),m=n(130),f=n(5),g="first-unarchive",y=(0,
f.PaperIntlFactory)(),v=y.F,E=y._f,_=(0,i.defineMessages)({close:{id:"u/p3Pl",defaultMessage:"Close"},archivePadSuccess:{id:"DLYVVS",defaultMessage:"Doc archived."},archiveTemplateSuccess:{
id:"J4Mv0C",defaultMessage:"Template archived."},restore:{id:"PL5ta5",defaultMessage:"Restore"},archive:{id:"JiHG/V",defaultMessage:"Archive"},restorethisdoc:{id:"dbh1E4",
defaultMessage:"Restore this doc?"},thenoteyouleftwhenyouarchivedyourdocwillberemoved:{id:"Wmno8L",defaultMessage:"The note you left when you archived your doc will be removed."}}),S=function(e){
a.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.onPadArchived=function(){var e=n.props.isTemplate;n.trackArchived()
;var t=e?"Archived template":"Archived pad",a=e?_.archiveTemplateSuccess:_.archivePadSuccess;h.Snackbar.show(p.createElement(h.Snackbar,{className:"notranslate",closeButtonText:E(_.close),
timeoutDelayMs:1e4,title:E(a),"track-title":t,variant:"complete"}))};n.onPadUnarchived=function(e){if(n.props.padController){var t=n.props.padController.getObjectStore()
;t&&t.removeObject(n.getReasonId())}e||n.trackUnarchived()};n.trackArchived=function(){c.IntentionEvent.ArchivePad.track({padType:n.props.padController.getPadType(),
__padId:n.props.padController.getPadId()})};n.trackUnarchived=function(){var e=n.props.padController.getPadType();e==l.PadType.customTemplate&&c.IntentionEvent.RestoreTemplate.track({
context:"archive button"});c.IntentionEvent.UnarchivePad.track({padType:e,__padId:n.props.padController.getPadId()})};n.handleToggleArchived=function(e){
n.props.padController.isPadArchived()?n.confirmUnarchivePad(e):e.runCommandById("archive_doc").then((function(){return n.onPadArchived()}));document.body.dispatchEvent(new Event("close-menu"))}
;n.unarchivePad=function(e){e.runCommandById("restore_doc").then((function(){return n.onPadUnarchived()}))};n.showConfirmDialog=function(e){
var t=p.createElement(v,a.__assign({},_.restorethisdoc)),o=p.createElement(v,a.__assign({},_.thenoteyouleftwhenyouarchivedyourdocwillberemoved)),r={
confirmText:p.createElement(v,a.__assign({},_.restore))};(0,s.confirm)(t,o,(function(){n.context.stores.onboarding.markCompleted(g,(function(){return n.unarchivePad(e)}),(function(){
return n.unarchivePad(e)}))}),r)};return n}n=t;t.prototype.render=function(){var e=this;return p.createElement(m.default,{commands:["archive_doc","restore_doc"],context:[]},(function(t){var n={
runCommandById:t.runCommandById,commands:t.commands,context:t.context};return p.createElement(r.default,a.__assign({onClick:function(){return e.handleToggleArchived(n)},
className:"selenium-menu-archive-button",disabled:!e.props.padController.getPadId()
},o.omit(e.props,"isTemplate","padController","stores")),e.props.padController.isPadArchived()?p.createElement(v,a.__assign({},_.restore)):p.createElement(v,a.__assign({},_.archive)))}))}
;t.prototype.confirmUnarchivePad=function(e){var t=this;if(!this.thereIsArchiveReason()||n.hasSeenUnarchiveModal)return this.unarchivePad(e)
;this.context.stores.onboarding.checkCompleted(g,(function(a){if(a){n.hasSeenUnarchiveModal=!0;return t.unarchivePad(e)}t.showConfirmDialog(e)}))};t.prototype.getReasonId=function(){
return this.props.padController?"archiveNote_"+this.props.padController.localPadId:null};t.prototype.thereIsArchiveReason=function(){if(this.props.padController){
var e=this.props.padController.getObjectStore();if(e){var t=e.getObject(this.getReasonId());return!!t&&!!t.atext.text.trim().length}}return!1};var n;t.displayName="ArchiveButton"
;t.hasSeenUnarchiveModal=!1;t.contextTypes={stores:u.object.isRequired};return t=n=a.__decorate([d.default],t)}(p.Component);t.default=S},1839:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});var a=n(1),o=n(4),r=n(140),s=n(53),i=n(2),l=n(83),d=n(0),c=n(159),u=n(29),p=(0,n(5).PaperIntlFactory)().F,h=(0,i.defineMessages)({makeacopy:{id:"j0Ho1C",defaultMessage:"Make a copy"}
}),m=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.copyTemplate=function(e){var n,a=t.props.padController.getPadId();l.shouldOpenInNewTab(e)&&(n=(0,
u.unsafeWindowOpen)("about:blank"));c.createTemplate({localPadId:a,trackContext:o.AppContext.PadHeader.toString(),successHandler:function(e){n?n.location.replace(App.constructUrl(s.default.PAD,{
id:e.padId,suffix:"?copyFromTemplate=1"})):App.navigateToPad({id:e.padId,suffix:"?copyFromTemplate=1",cloudDocId:e.cloudDocId});return!0}})};return t}t.prototype.render=function(){
return this.props.padController&&this.props.padController.isPadArchived()?null:d.createElement(r.default,{onClick:this.copyTemplate},d.createElement(p,a.__assign({},h.makeacopy)))}
;t.displayName="CopyTemplateButton";return t}(d.Component);t.default=m},1840:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(140),r=n(2),s=n(12),i=n(0),l=n(615),d=(0,
n(5).PaperIntlFactory)().F,c=(0,r.defineMessages)({migrate:{id:"kp7NnW",defaultMessage:"Migrate"}}),u=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.handleMigrateResult=function(e,t){(0,l.renderSnackbarForMigration)(e,t)};t.onClick=function(){var e=t.props.localPadId;s.post({url:"/cloud-docs/migrate-doc",analyticsTag:"cloud-doc-migrate-doc",
data:{localPadId:e},shardingKey:s.getShardingKeyForPad(e),errorHandler:function(){t.handleMigrateResult(!1);return!0},successHandler:function(e){
e?t.handleMigrateResult(e.success,e.link):t.handleMigrateResult(!1);return!0}})};return t}t.prototype.render=function(){return i.createElement(o.default,{"track-title":"migrate",onClick:this.onClick
},i.createElement(d,a.__assign({},c.migrate)))};t.displayName="MigrateToFilesystemButton";return t}(i.PureComponent);t.default=u},1841:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(169),r=n(140),s=n(47),i=n(2),l=n(0),d=n(83),c=n(4),u=(0,n(5).PaperIntlFactory)().F,p=(0,i.defineMessages)({openinbrowser:{id:"BSJpss",defaultMessage:"Open in browser"}}),h=function(e){
var t=e.app;e.padController;return l.createElement(r.default,{"track-name":"open-in-web-clicked",role:"menuitem",onClick:function(e){(0,c.track)("open-pad-in-web-clicked");var n=(0,
d.shouldOpenInNewTab)(e,!0);t.trigger("hp-navigate-to-link",[(0,o.addNoDesktopRedirectParam)(s.default.toString()),!0,n])}},l.createElement(u,a.__assign({},p.openinbrowser)))}
;h.displayName="OpenInWebButton";t.default=h},1842:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(140),r=n(25),s=n(8),i=n(2),l=n(149),d=n(0),c=n(15),u=n(16),p=n(130),h=(0,n(5).PaperIntlFactory)().F,m=(0,i.defineMessages)({padIsNotFavorited:{id:"hafebi",defaultMessage:"Star"},
padIsFavorited:{id:"5hVhqA",defaultMessage:"Starred"}}),f=(0,r.createReactClass)({displayName:"PadMenuFavoriteButton",mixins:[l],render:function(){var e=this
;return s.default.isSignedIn()?d.createElement(p.default,{commands:["favorite_doc","unfavorite_doc"],context:[]},(function(t){var n=t.runCommandById;return d.createElement(o.default,{role:"menuitem",
withRightAccessory:d.createElement(u.UIIcon,{src:e.props.padController.isPadFavorited()?c.StarFill:c.StarLine}),onClick:function(){
e.props.padController.getPadId()&&(e.props.padController.isPadFavorited()?n("unfavorite_doc"):n("favorite_doc"))},"data-track":"pad-menu-favorite",className:"selenium-menu-favorite-button",
"aria-checked":e.props.padController.isPadFavorited(),disabled:!e.props.padController.getPadId()
},e.props.padController.isPadFavorited()?d.createElement(h,a.__assign({},m.padIsFavorited)):d.createElement(h,a.__assign({},m.padIsNotFavorited)))})):null}});t.default=f},1843:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(140),r=n(2),s=n(0),i=n(48),l=n(130),d=(0,n(5).PaperIntlFactory)().F,c=(0,r.defineMessages)({addsomecontenttopresent:{id:"jl1BLz",
defaultMessage:"Add some content to present."},present:{id:"Tp96Me",defaultMessage:"Present"}}),u=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.handleClick=function(e){t.props.padId?e.runCommandById("present_doc"):i.default.show(s.createElement(i.default,{autoDismiss:!0,className:"notranslate"
},s.createElement(d,a.__assign({},c.addsomecontenttopresent))))};return t}t.prototype.render=function(){var e=this;return s.createElement(l.default,{commands:["present_doc"],context:[]},(function(t){
var n={runCommandById:t.runCommandById,commands:t.commands,context:t.context};return s.createElement(o.default,{className:"hp-button-present","track-name":"present-clicked",role:"menuitem",
onClick:function(){return e.handleClick(n)}},s.createElement(d,a.__assign({},c.present)))}))};t.displayName="PresentButton";return t}(s.PureComponent);u.displayName="PresentButton";t.default=u},
1844:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(140),r=n(8),s=n(2),i=n(23),l=n(0),d=n(48),c=n(130),u=(0,n(5).PaperIntlFactory)().F,p=(0,s.defineMessages)({
addsomecontenttoturnintoadoctemplate:{id:"ms2sWc",defaultMessage:"Add some content to turn into a doc template."},templatize:{id:"d0NOy9",defaultMessage:"Templatize"}}),h=function(e){a.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.createTemplate=function(e){t.props.padController.getPadId()?e.runCommandById("templatize_doc"):d.default.show(l.createElement(d.default,{
autoDismiss:!0},l.createElement(u,a.__assign({},p.addsomecontenttoturnintoadoctemplate))))};return t}t.prototype.render=function(){var e=this;return r.default.isSignedIn()?l.createElement(c.default,{
commands:["templatize_doc"],context:[]},(function(t){var n={runCommandById:t.runCommandById,commands:t.commands,context:t.context};return l.createElement(o.default,{
className:"hp-save-as-template-button",onClick:function(){return e.createTemplate(n)},role:"menuitem"},l.createElement(u,a.__assign({},p.templatize)))})):null};t.displayName="SaveAsTemplateButton"
;t.contextTypes={appNavigationService:i.object.isRequired};return t}(l.Component);t.default=h},1845:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(140),r=n(2),s=n(0),i=n(650),l=n(4),d=(0,n(5).PaperIntlFactory)().F,c=(0,r.defineMessages)({sharingsettings:{id:"FyUsaN",defaultMessage:"Sharing settings"}}),u=function(e){
a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.handleClick=function(){
var e=t.props.padController,n=e.peopleList,a=e.folderStore,o=i.default.handleLinkAccessChange(e.getPadId(),{isPersonalDomainPad:e.isPersonalDomainPad(),
domainDocSharePolicy:e.padClientVars.domainDocSharePolicy});i.default.show({padController:e,initialGuestPolicySpec:n&&n.getGuestPolicySpec()||null,onConfirm:o,
onCancel:i.default.handleLinkAccessCancel,folderData:a&&a.getFolderData()||null,trackContext:t.getTrackContext()})};return t}t.prototype.getTrackContext=function(){};t.prototype.render=function(){
return s.createElement(o.default,{role:"menuitem",className:"hp-sharing-settings-button",onClick:this.handleClick},s.createElement(d,a.__assign({},c.sharingsettings)))}
;t.displayName="SharingSettingsButton";return t=a.__decorate([l.trackContextDecorator],t)}(s.Component);t.default=u},1847:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(140),r=n(90),s=n(8),i=n(2),l=n(7),d=n(115),c=n(23),u=n(0),p=n(88),h=n(4),m=n(130),f=n(123),g=(0,n(5).PaperIntlFactory)().F,y=(0,i.defineMessages)({delete:{id:"9v2+SN",
defaultMessage:"Delete"},deletethistemplate:{id:"DL29rk",defaultMessage:"Delete this template?"},deletethisdoc:{id:"Mua31d",defaultMessage:"Delete this doc?"},
doctitlewillbedeletedforyouandeveryoneelse:{id:"VLAbwW",defaultMessage:"{docTitle} will be deleted for you and everyone else."},templatedeleted:{id:"MWHehG",defaultMessage:"Template deleted."},
successfullydeleted:{id:"OCBrPN",defaultMessage:"Successfully deleted"},docdeleted:{id:"2yL8Fr",defaultMessage:"Doc deleted."},undo:{id:"y2fa9e",defaultMessage:"Undo"},
thistemplatecannotbedeletedbecauseithasunsavedchanges:{id:"LcOZE3",defaultMessage:"This template can not be deleted because it has unsaved changes."},thisdoccannotbedeletedbecauseithasunsavedchanges:{
id:"2ON8HK",defaultMessage:"This doc can not be deleted because it has unsaved changes."},error:{id:"fy9qFc",defaultMessage:"Error"},willBeDeleted:{id:"iBVhXX",
defaultMessage:"{docTitle} will be deleted for you and everyone else. You have {autoPurgeDays} days to restore a doc before it’s permanently deleted."}}),v="permanent-delete",E=function(e){
a.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.handleClick=function(e){n.hasSeenModal?o.trashPad(e):o.context.stores.onboarding.checkCompleted(v,(function(t){if(t){n.hasSeenModal=!0
;o.trashPad(e)}else o.showConfirmDialog(e)}))};o.showConfirmDialog=function(e){var t,n=s.default.trashRetentionPolicy,i=u.createElement("b",null,o.props.padController.getTitle())
;t=o.props.padController.getPadType()==l.PadType.customTemplate?u.createElement(g,a.__assign({},y.deletethistemplate)):u.createElement(g,a.__assign({},y.deletethisdoc))
;var d=u.createElement(u.Fragment,null);d=-1==n?u.createElement(g,a.__assign({values:{docTitle:i}},y.doctitlewillbedeletedforyouandeveryoneelse)):u.createElement(g,a.__assign({},y.willBeDeleted,{
values:{docTitle:i,autoPurgeDays:n}}));var c={confirmText:u.createElement(g,a.__assign({},y.delete)),confirmButtonClass:"hp-button-dangerous",trackContext:h.AppContext.PadHeader.getContextName()};(0,
r.confirm)(t,d,(function(){o.context.stores.onboarding.markCompleted(v,(function(){return o.trashPad(e)}),(function(){return o.trashPad(e)}))}),c)};o.onTrashed_=function(e){
if(o.props.onPadTrashed)o.props.onPadTrashed();else{o.showPadTrashedSnackbar(e);o.props.app.navigateToUrl("/")}};o.trashPad=function(e){n.hasSeenModal=!0;var t
;t=o.props.padController.getPadType()==l.PadType.customTemplate?u.createElement(g,a.__assign({},y.thistemplatecannotbedeletedbecauseithasunsavedchanges)):u.createElement(g,a.__assign({},y.thisdoccannotbedeletedbecauseithasunsavedchanges))
;if(o.props.padController.disconnectBeforePadDeletion()){h.IntentionEvent.TrashPad.track({context:o.getTrackContext(),padType:o.props.padController.getPadType(),
__padId:o.props.padController.getPadId()});e.runCommandById("trash_doc").then((function(){return o.onTrashed_(o.props.padController.padMeta)}))}else(0,
r.alert)(u.createElement(g,a.__assign({},y.error)),t)};return o}n=t;t.prototype.getTrackContext=function(){};t.prototype.render=function(){var e=this;return u.createElement(m.default,{
commands:["trash_doc"],context:[]},(function(t){var n={runCommandById:t.runCommandById,commands:t.commands,context:t.context};return u.createElement(o.default,{disabled:e.props.disabled,
role:"menuitem",onClick:function(){return e.handleClick(n)}},u.createElement(g,a.__assign({},y.delete)))}))};t.prototype.showPadTrashedSnackbar=function(e){var t=this
;window.realSetTimeout((function(){var n,o,r;if(t.props.padController.getPadType()==l.PadType.customTemplate){n=u.createElement(g,a.__assign({},y.templatedeleted));o="Deleted template"}else{
n=u.createElement(g,a.__assign({},y.docdeleted));o="Deleted doc"}var s=u.createElement("form",{className:"control",ref:function(e){e&&(r=e)},method:"post",action:d.getUntrashUrl(e.localPadId)
},u.createElement(g,a.__assign({},y.undo)),u.createElement(f.default,null));p.Snackbar.show(u.createElement(p.Snackbar,{timeoutDelayMs:1e4,title:n,"track-title":o,variant:"complete",
actionButtonText:s,onActionClick:function(e){r.submit()}}))}),500)};var n;t.displayName="TrashButton";t.hasSeenModal=!1;t.contextTypes={stores:c.object.isRequired}
;return t=n=a.__decorate([h.trackContextDecorator],t)}(u.Component);t.default=E},1848:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(25),r=n(99),s=n(2),i=n(10),l=n(0),d=(0,n(5).PaperIntlFactory)().F,c=(0,s.defineMessages)({widescreenmode:{id:"q0mJav",defaultMessage:"Widescreen mode"}}),u=(0,o.createReactClass)({
displayName:"WideScreenButton",onClick_:function(){document.body.classList.add("hp-wide-screen")},render:function(){return r.isOn("wide-screen")?l.createElement(i.default,{
className:"hp-button-widescreen",role:"menuitem",onClick:this.onClick_},l.createElement(d,a.__assign({},c.widescreenmode))):null}});t.default=u},1849:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(140),r=n(25),s=n(2),i=n(0),l=n(4),d=n(492),c=(0,n(5).PaperIntlFactory)().F,u=(0,s.defineMessages)({wordcount:{id:"vzIF8D",
defaultMessage:"Word count"}}),p=(0,r.createReactClass)({displayName:"WordCountButton",mixins:[l.TrackContextMixin],handleClick:function(){(0,l.trackUi)("click_more_menu_word_count");var e={
controller:this.props.padController,mode:"counts",disableUndo:this.props.disableUndo,trackContext:this.getTrackContext()};d.open(e)},render:function(){return i.createElement(o.default,{
role:"menuitem",className:"hp-menu-versions-button",onClick:this.handleClick},i.createElement(c,a.__assign({},u.wordcount)))}});t.default=p},1850:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});var a,o=n(1),r=n(5),s=n(314),i=n(2),l=n(60),d=n(12),c=n(76),u=n(7),p=n(200),h=n(272),m=n(379),f=n(10),g=n(488),y=n(0),v=n(88),E=n(13),_=n(4),S=(0,r.PaperIntlFactory)(),C=S.F,b=S._f,P=(0,
i.defineMessages)({close:{id:"TWdE7m",defaultMessage:"Close"},docMoved:{id:"HcjXLj",defaultMessage:"Doc moved to {folder}."},goToFolder:{id:"R8UeOt",defaultMessage:"Go to folder"},teamFolderName:{
id:"42HxtA",defaultMessage:"{team} Docs"},makethisdoceasytofind:{id:"C6LwH5",defaultMessage:"Make this doc easy to find"},suggestedPaperfolders:{id:"AHa584",defaultMessage:"Suggested Paper folders"},
createfolder:{id:"l4Of7J",defaultMessage:"Create folder"},gotoallfolders:{id:"G2dSyI",defaultMessage:"Go to all folders"},movetofolder:{id:"0BSbU0",defaultMessage:"Move to folder"},movetoFolder:{
id:"JQrjCi",defaultMessage:"Move to Folder"}});!function(e){e.ERROR_GET_FOLDERS="error_get_folders";e.ERROR_CREATE_TEAM_FOLDER="error_create_team_folder";e.ERROR_REACT_BOUNDARY="error_react_boundary"
;e.ERROR_UI_TIMEOUT="error_ui_timeout";e.CLOSE_SHARE_MENU="close_share_menu";e.VIEW_ALL_FOLDERS="view_all_folders";e.MOVED_INTO_FOLDER="moved_into_folder"}(a||(a={}));var I="cancelled",T=function(e){
o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.createTeamFolderRequest=null;t.fetchSuggestedFoldersRequest=null;t.isDismissed=!1;t.state={folders:[],folderSelected:null,
showCreateFolderDialog:!1,showGoToAllFolders:!1};t.hasOpenPopup=function(){return t.state.showCreateFolderDialog};t.onFetchedSuggestedFolders=function(e,n){e.length>0?t.setState({folders:e,
folderSelected:e[0],showGoToAllFolders:n}):t.createTeamFolder(t.props.padController.getDomainOrgName(),(function(e){t.setState({folders:[e],folderSelected:e})}))};t.onClickMoveToFolder=function(){(0,
_.trackUi)("paper-filing-docs-folder-click-move-to-folder");t.movePadIntoFolderAndDismiss(t.state.folderSelected)};t.onClickGoToAllFolders=function(){(0,
_.trackUi)("paper-filing-docs-folder-click-go-to-all");t.dismiss(a.VIEW_ALL_FOLDERS)};t.onClickCreateFolder=function(){(0,_.trackUi)("paper-filing-docs-folder-click-create-folder");t.setState({
showCreateFolderDialog:!0})};t.onCreateFolderDialogClose=function(){(0,_.trackUi)("paper-filing-docs-folder-create-folder-dismiss");t.setState({showCreateFolderDialog:!1})}
;t.onCreateFolderDialogSuccess=function(e){(0,_.trackEng)("paper-filing-docs-folder-create-folder-success");t.setState({showCreateFolderDialog:!1},(function(){t.movePadIntoFolderAndDismiss(e)}))}
;return t}t.prototype.initialize=function(){(0,_.trackEng)("paper-filing-docs-folder-init");this.isDismissed=!1;this.setState({folders:[],folderSelected:null,showGoToAllFolders:!1,
showCreateFolderDialog:!1});this.cancelXHRs();this.fetchSuggestedFolders(4,this.onFetchedSuggestedFolders)};t.prototype.componentDidCatch=function(e,t){this.dismiss(a.ERROR_REACT_BOUNDARY,{
failure_reason:t.componentStack})};t.prototype.componentDidUpdate=function(e,t){var n=this.shouldComponentRender(this.props,this.state),o=this.shouldComponentRender(e,t);if(n&&!o)(0,
_.trackEng)("paper-filing-docs-folder-rendered",{num_folders:this.state.folders.length,limit:this.state.showGoToAllFolders
});else if(o&&!n)this.dismiss(a.CLOSE_SHARE_MENU);else if(!n&&this.props.isOpen&&!e.isOpen){this.dismiss(a.ERROR_UI_TIMEOUT);this.cancelXHRs()}};t.prototype.componentWillUnmount=function(){
this.cancelXHRs();(0,_.trackEng)("paper-filing-docs-folder-unmount")};t.prototype.render=function(){
var e=this,t=this.props,n=t.padController,a=t.stores,r=this.state,i=r.folders,d=r.folderSelected,c=r.showCreateFolderDialog,u=r.showGoToAllFolders
;return this.shouldComponentRender(this.props,this.state)?y.createElement(y.Fragment,null,y.createElement("div",{className:"folder-filing-form"},y.createElement("div",{
className:"folder-filing-form-content"},y.createElement("h1",{className:"folder-filing-form-header"},y.createElement(C,o.__assign({},P.makethisdoceasytofind))),y.createElement("div",{
className:"folder-filing-form-subheader"},y.createElement(C,o.__assign({},P.suggestedPaperfolders)),y.createElement(f.default,{onClick:this.onClickCreateFolder,href:"#"
},y.createElement(C,o.__assign({},P.createfolder)))),i.map((function(t){return y.createElement(m.FolderSelectEntry2,{key:t.folder.encryptedId,icon:y.createElement(p.default,{folderData:t,
useDecoratedIcon:!0}),"track-title":"Folder",isSelected:t===d,onSelect:function(){return e.setState({folderSelected:t})}},y.createElement("div",{className:"folder-filing-form-entry-title"
},y.createElement(l.default,{str:t.folder.name})),y.createElement(h.default,{folderData:t,className:"folder-filing-form-entry-subtitle",showIcon:!1,includeVisibleTo:!0}))
})),u&&y.createElement(g.default,{addNotMove:!0,className:"go-to-all-folders-button",padController:n,stores:a,onClick:this.onClickGoToAllFolders},y.createElement(E.default,{name:"task-arrow-right"
}),y.createElement(C,o.__assign({},P.gotoallfolders)))),y.createElement("div",{className:"folder-filing-form-footer"},y.createElement(f.default,{primary:!0,onClick:this.onClickMoveToFolder
},y.createElement(C,o.__assign({},P.movetofolder))))),c&&y.createElement(s.CreateFolderDialog,{onCreate:this.onCreateFolderDialogSuccess,onClose:this.onCreateFolderDialogClose,skipUnmountOnClose:!0,
stores:a})):null};t.prototype.shouldComponentRender=function(e,t){return!this.isDismissed&&e.isOpen&&t.folders.length>0};t.prototype.fetchSuggestedFolders=function(e,t){var n=this;(0,
_.trackEng)("paper-filing-docs-folder-get-folders-start");this.fetchSuggestedFoldersRequest=d.get({url:"/folder/list-suggest-shared",data:{folderListLimit:e},
analyticsTag:"folder-filing-fetch-suggest-shared",shardingKey:d.getStatelessShardingKey(),successHandler:function(e){if(Array.isArray(e.data)||"boolean"!=typeof e.hasMore){(0,
_.trackEng)("paper-filing-docs-folder-get-folders-success",{num_folders:e.data.length});t(e.data,!!e.hasMore)}else n.dismiss(a.ERROR_GET_FOLDERS,{failure_reason:"malformed"})},
errorHandler:function(e,t){t.statusText!==I&&n.dismiss(a.ERROR_GET_FOLDERS,{failure_reason:t.statusText});return!0},complete:function(){n.fetchSuggestedFoldersRequest=null}})}
;t.prototype.createTeamFolder=function(e,t){var n=this;(0,_.trackEng)("paper-filing-docs-folder-create-team-folder-start");var o=b(P.teamFolderName,{team:e});this.createTeamFolderRequest=d.post({
url:"/folder/create-nopad",data:{name:o,guestPolicy:u.FolderGuestPolicy.public},analyticsTag:"folder-filing-create-team-folder",shardingKey:d.getStatelessShardingKey(),hpAppLevel:!0,
successHandler:function(e){if(e&&e.data){(0,_.trackEng)("paper-filing-docs-folder-create-team-folder-success");t(e.data)}else n.dismiss(a.ERROR_CREATE_TEAM_FOLDER,{failure_reason:"malformed"})},
errorHandler:function(e,t){t.statusText!==I&&n.dismiss(a.ERROR_CREATE_TEAM_FOLDER,{failure_reason:t.statusText});return!0},complete:function(){n.createTeamFolderRequest=null}})}
;t.prototype.cancelXHRs=function(){[this.createTeamFolderRequest,this.fetchSuggestedFoldersRequest].map((function(e){return e&&e.abort()}))};t.prototype.movePadIntoFolderAndDismiss=function(e){
var t=this;this.dismiss(a.MOVED_INTO_FOLDER,{selected_index:String(this.state.folders.indexOf(e))});this.props.padController.folderStore.changeFolder(e,{isConfirmed:!1,onSuccess:function(e){(0,
_.trackEng)("paper-filing-docs-folder-move-success");t.onMovePadIntoFolderSuccess(e)},onError:function(){(0,_.trackEng)("paper-filing-docs-folder-move-error")}})}
;t.prototype.onMovePadIntoFolderSuccess=function(e){v.Snackbar.show(y.createElement(v.Snackbar,{actionButtonText:b(P.goToFolder),onActionClick:function(){(0,
_.trackUi)("paper-filing-docs-folder-click-snackbar-open-folder");App.navigateToUrl(c.prettyFolderUrl(e.folder))},closeButtonText:b(P.close),timeoutDelayMs:5e3,title:b(P.docMoved,{folder:e.folder.name
}),variant:"complete"}))};t.prototype.dismiss=function(e,t){if(!this.isDismissed){(0,_.trackEng)("paper-filing-docs-folder-dismiss",o.__assign({reason:e},t));this.isDismissed=!0}
this.props.isOpen&&this.props.onFolderFilingDismiss()};t.displayName="FolderFilingForm";return t}(y.Component);t.default=T},1851:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(5),r=n(8),s=n(2),i=n(14),l=n(10),d=n(117),c=n(0),u=n(4),p=(0,o.PaperIntlFactory)(),h=p.F,m=p.FormattedDate,f=(0,s.defineMessages)({
somemembersofthefolderNamefolderdonthaveaccesstothisdoc:{id:"XlG8VZ",defaultMessage:"Some members of the “{folderName}” folder don't have access to this doc."},
sharingsettingsforPaperdocschangedindate:{id:"6SoxNA",defaultMessage:"Sharing settings for Paper docs changed in {date}. "},sharingsettingforPaperdocshavechanged:{id:"yUndEf",
defaultMessage:"Sharing setting for Paper docs have changed. "},learnmore:{id:"gk12sS",defaultMessage:"Learn more"},viewsharingsettings:{id:"0OQqKV",defaultMessage:"View sharing settings"}
}),g=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.componentDidMount=function(){document.body.classList.add("has-banner");(0,
u.trackUi)("Show folder guest policy banner")};t.prototype.componentWillUnmount=function(){
1==document.querySelector("#banner-outer-container").childNodes.length&&document.body.classList.remove("has-banner")};t.prototype.render=function(){
var e=this.props.folderData.parentFolders,t=e.length?e[0].name:this.props.folderData.folder.name,n=new Date(2017,0,15);return c.createElement(d.default,{target:"#banner-outer-container",
appendAsChild:!0},c.createElement("div",{className:"hp-banner-container hp-banner-warning hp-folder-guest-policy-banner"},c.createElement(i.IntlProvider,{locale:r.default.userLocale
},c.createElement("div",{className:"hp-banner"},c.createElement("div",{className:"hp-banner-left hp-banner-help-text"},c.createElement("div",{className:"hp-banner-help-text-heading"
},c.createElement(h,a.__assign({values:{folderName:t}},f.somemembersofthefolderNamefolderdonthaveaccesstothisdoc))),c.createElement("div",{className:"hp-banner-help-text-body"
},c.createElement(h,a.__assign({values:{date:c.createElement(m,{value:n,month:"long",year:"numeric"})}},f.sharingsettingsforPaperdocschangedindate)),c.createElement("a",{
href:"https://www.dropbox.com/help/9288",target:"_blank"},c.createElement(h,a.__assign({},f.learnmore))))),c.createElement("div",{className:"hp-banner-right"},c.createElement(l.default,{secondary:!0,
onClick:this.props.onChangeSharingSettings},c.createElement(h,a.__assign({},f.viewsharingsettings))))))))};t.displayName="FolderGuestPolicyBanner";return t}(c.Component);t.default=g},
1871:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SharingFormOverlay=void 0;var a=n(1),o=n(5),r=n(2),s=n(0),i=n(7),l=n(448),d=(0,o.PaperIntlFactory)().F,c=(0,r.defineMessages)({
sendinginvites:{id:"YKR7Yy",defaultMessage:"Sending invites..."},invitessent:{id:"NEixZ8",defaultMessage:"Invites sent."}});t.SharingFormOverlay=function(e){var t,n={className:"progress-snackbar",
disablePositioningAndBackdrop:!0};switch(e.status){case i.SharingFormSubmitStatus.NONE:return null;case i.SharingFormSubmitStatus.PENDING:t=s.createElement(d,a.__assign({},c.sendinginvites))
;n=a.__assign(a.__assign({},n),{progress:80,title:t,variant:"sync"});break;case i.SharingFormSubmitStatus.SUCCESS:t=s.createElement(d,a.__assign({},c.invitessent));n=a.__assign(a.__assign({},n),{
title:t,variant:"complete"})}return s.createElement("div",{className:"sharing-form-overlay"},s.createElement(l.Snackbar,a.__assign({},n)))}},202:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});var a=n(3),o=n(10),r=n(13),s=n(52),i=n(0),l=function(e){var t=e.href,n=e.onClick,l=e.responsive,d=a("db-paper-logo-wrapper",{"db-paper-logo-responsive":l}),c=i.createElement("img",{
className:"db-paper-logo",src:(0,s.default)("/static/img/paper-logo-m1@2x.png"),alt:""}),u=i.createElement("span",{className:"db-paper-logo-compact"},i.createElement(r.default,{name:"dropbox"}))
;return t||n?i.createElement(o.default,{className:d,styleless:!0,href:t,onClick:n,"track-title":"Paper logo"},c,l?u:null):i.createElement("span",{className:d,"aria-label":"Dropbox Paper"},c,l?u:null)}
;l.displayName="PaperLogo";t.default=l},251:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.TasksButtonWithOmnibar=void 0
;var a=n(1),o=n(21),r=n(2),s=n(11),i=n(0),l=n(15),d=n(16),c=n(130),u=(0,n(5).PaperIntlFactory)(),p=u.F,h=u._f,m=(0,r.defineMessages)({fallbackTasksButton:{id:"ZHGMLi",defaultMessage:"Things to do"},
tasksButton:{id:"peu86j",defaultMessage:"Show to-dos"}});t.TasksButtonWithOmnibar=function(e){var t=e.runCommandById,n=i.createElement(p,a.__assign({},m.tasksButton)),r=h(m.tasksButton)
;return i.createElement(o.default,{className:"hp-tasks-button selenium-tasklet-entry-button hp-icon-button",id:"hp-tasks-button",onClick:function(){return t("show_tasklet")},tooltip:{title:n},
isIcon:!0,variant:"transparent","aria-label":r},i.createElement(d.UIIcon,{src:l.ToDoLine}))};var f=function(e){a.__extends(n,e);function n(){return null!==e&&e.apply(this,arguments)||this}
n.prototype.renderButtonWithCommand=function(e){return i.createElement(t.TasksButtonWithOmnibar,a.__assign({},e))};n.prototype.render=function(){return i.createElement(c.default,{
commands:["show_tasklet"],context:[]},this.renderButtonWithCommand)};n.displayName="TasksButton";return n=a.__decorate([s.default],n)}(i.Component);t.default=f},277:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.MoreMenu=t.MenuSection=void 0;var a=n(1),o=n(21),r=n(2),s=n(1837),i=n(170),l=n(284),d=n(15),c=n(87),u=n(0),p=n(16),h=n(478),m=n(31),f=(0,
n(5).PaperIntlFactory)(),g=f.F,y=f._f,v=(0,r.defineMessages)({moreButton:{id:"S6stj+",defaultMessage:"More"},youareofflineAccesstheseoptionswhenyourebackonline:{id:"i3X6m6",
defaultMessage:"You are offline. Access these options when you're back online."},starttypingtocreatedoc:{id:"WOLw1k",defaultMessage:"Start typing to create doc."},more:{id:"r7jxIb",
defaultMessage:"More"}}),E=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
var e=u.Children.toArray(this.props.children).filter((function(e){return e}));e.map((function(e){return u.createElement("li",{className:"hp-menu-section"},u.createElement("ul",null,e))}))
;return u.createElement(u.Fragment,null,e,u.createElement(i.HpMenuSeparator,null))};t.displayName="MenuSection";return t}(u.Component);t.MenuSection=E;var _=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.state={sectionMoverRef:u.createRef()};t.handleMenuSelect=function(e){var n,a
;null===(a=null===(n=t.state.sectionMoverRef.current)||void 0===n?void 0:n.handleSelection)||void 0===a||a.call(n,e)};t.maybeCreateDeferredPad=function(){var e
;t.props.padController.getPadId()||t.props.app&&(null===(e=t.props.app.padLoader)||void 0===e||e.createDeferredPad(t.props.padController))};return t}t.prototype.renderMenuItems=function(){
var e=this.props,t=e.app,n=e.padController,a=e.folderData,o=this.context.stores,r=this.context.moreMenuService.getOrderedMenuItemGrouping(n),i=this.context.moreMenuService.platform
;if(0==r.length)return null;var l=r.map((function(e,r){var l=e.map((function(e){return(0,s.getMenuItemFromName)(e,{app:t,padController:n,stores:o,folderData:a,platform:i})}))
;return u.createElement(E,{key:"menu-section-".concat(r)},l)}));return u.createElement(u.Fragment,null,l)};t.prototype.renderDigMenuItems=function(){
var e=this,t=this.props,n=t.app,a=t.padController,o=t.folderData,r=this.context.stores,i=this.context.moreMenuService.getOrderedMenuItemGrouping(a),d=this.context.moreMenuService.platform
;if(0==i.length)return null;var c=i.map((function(t,i){var c=t.map((function(t){return(0,s.getMenuItemFromName)(t,{app:n,padController:a,stores:r,folderData:o,platform:d,
sectionMoverRef:e.state.sectionMoverRef})}));return u.createElement(l.Menu.Segment,{key:"menu-section-".concat(i)},c)}));return u.createElement(u.Fragment,null,c)};t.prototype.render=function(){
var e,t=this,n=y(v.moreButton);if(!this.renderMenuItems())return null;e=this.props.isOffline?{title:u.createElement(g,a.__assign({},v.youareofflineAccesstheseoptionswhenyourebackonline))
}:this.props.padController.getPadId()?{title:u.createElement(g,a.__assign({},v.more))}:{title:u.createElement(g,a.__assign({},v.starttypingtocreatedoc))};return u.createElement(l.Menu.Wrapper,{
closeOnSelection:!1,isPortaled:m.default.isOnButDoNotLog("paper_doc_pinning")&&this.props.padController.isCloudDoc(),onSelection:this.handleMenuSelect},(function(r){
var s=r.getTriggerProps,i=r.getContentProps,c=r.triggerRef;return u.createElement(u.Fragment,null,u.createElement(o.default,a.__assign({forwardedRef:c,variant:"transparent",isIcon:!0,
inverse:t.props.inverse,className:"hp-pad-more-button selenium-pad-more-button hp-icon-button",hasPopup:!0,tooltip:e,"aria-label":n,disabled:t.props.isServerDBReadOnly||t.props.isOffline},s({
onClick:t.maybeCreateDeferredPad})),u.createElement(p.UIIcon,{src:d.MoreHorizontalLine})),u.createElement(l.Menu.Content,a.__assign({},i(),{className:"hp-pad-more-menu",triggerRef:c
}),t.renderDigMenuItems()))}))};t.displayName="MoreMenuComponent";t.contextTypes=c.MoreMenuServiceWithStoresAndNavigationServiceContextTypes;return t}(u.Component);t.MoreMenu=(0,
h.withServerDBStatus)(_)},278:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(11),r=n(0);t.default=function(e){var t=function(t){a.__extends(n,t);function n(){
var e=null!==t&&t.apply(this,arguments)||this;e.handleFolderStoreChange=function(){e.setState({folderData:e.props.padController.getFolderData()})};return e}
n.prototype.setStateFromPadController=function(e){e&&this.setState({localPadId:e.getPadId(),padType:e.getPadType(),folderData:e.getFolderData(),mainAce:e.mainAce})}
;n.prototype.initializeEvents=function(){var e,t=this,n=this.props.padController;this.setStateFromPadController(n);n.isInitialized()||this.events.on(n,"initialized",(function(){
t.setStateFromPadController(n)}));this.events.on(n,"pad-id-changed",(function(){t.setStateFromPadController(n)}));this.events.on(n,"pad-type-changed",(function(){t.setStateFromPadController(n)}))
;null===(e=null==n?void 0:n.folderStore)||void 0===e||e.on("change",this.handleFolderStoreChange)};n.prototype.componentDidMount=function(){this.props.padController&&this.initializeEvents()}
;n.prototype.componentDidUpdate=function(e,t){this.props.padController&&!e.padController&&this.initializeEvents()};n.prototype.componentWillUnmount=function(){var e,t=this.props.padController
;null===(e=null==t?void 0:t.folderStore)||void 0===e||e.off("change",this.handleFolderStoreChange)};n.prototype.render=function(){return r.createElement(e,a.__assign({},this.props,this.state))}
;return n=a.__decorate([o.default],n)}(r.Component);return t}},316:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SkipButtonDisplay=t.Card=void 0
;var a,o=n(1),r=n(6),s=n(3),i=n(8),l=n(2),d=n(11),c=n(10),u=n(43),p=n(14),h=n(117),m=n(0),f=n(18),g=n(13),y=n(304),v=(0,p.MsgFactory)("ui"),E=v.F,_=v.IntlMessageFormat,S=(0,v.defineMessages)({
prevSlideButtonAriaLabel:{msg:"Previous carousel card",description:"Aria label for the button to go to the previous carousel card."},nextSlideButtonAriaLabel:{msg:"Next carousel card",
description:"Aria label for the button to go to the next carousel card"},dotAriaLabel:{msg:"Carousel card {number}",
description:'Aria label for the button to jump to a specific carousel card. It reads like "Carousel card 1".'},skip:{msg:"Skip"}}),C=((0,l.defineMessages)({prevSlideButtonAriaLabel:{id:"r7ueIi",
defaultMessage:"Previous carousel card"},nextSlideButtonAriaLabel:{id:"OrUw9q",defaultMessage:"Next carousel card"},dotAriaLabel:{id:"P08Tcr",defaultMessage:"Carousel card {number}"}}),function(e){
o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.componentWillMount=function(){this.props.isCurrent&&this.props.onEnter&&this.props.onEnter(this)}
;t.prototype.componentWillUpdate=function(e){
this.props.isCurrent&&!e.isCurrent?this.props.onLeave&&this.props.onLeave(this):!this.props.isCurrent&&e.isCurrent&&this.props.onEnter&&this.props.onEnter(this)};t.prototype.render=function(){
var e=s("card",{current:this.props.isCurrent});return m.createElement("div",{className:e,id:this.props.id},this.props.children)};t.displayName="Card";return t}(m.Component));t.Card=C;!function(e){
e[e.Default=1]="Default";e[e.Always=2]="Always";e[e.Never=3]="Never"}(a=t.SkipButtonDisplay||(t.SkipButtonDisplay={}));var b=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.cards=[];n.overlay_=null;n.tether_=null;n.prev=function(){n.state.currentCard>0?n.jump(n.state.currentCard-1):n.props.loopCards&&n.jump(n.cards.length-1)};n.next=function(){
n.state.currentCard<n.cards.length-1?n.jump(n.state.currentCard+1):n.props.loopCards?n.jump(0):n.close()};n.jump=function(e){
if(e<0||e>=n.cards.length)console.error("Invalid carousel index",e);else if(e!==n.state.currentCard){n.props.onBeforeLeaveCard&&n.props.onBeforeLeaveCard(n.state.currentCard,e);n.setState({
currentCard:e})}};n.skip=function(){n.props.skipToLast&&n.state.currentCard!=n.cards.length-1?n.jump(n.cards.length-1):n.props.onSkip&&n.props.onSkip()};n.bindEvents=function(){
n.props.disableKeyboardShortcuts||n.events.on(document,"keydown",(function(e){if(!(n.props.skipToLast&&n.state.currentCard>=n.cards.length-1)){switch(e.which){case u.KeyCode.ESCAPE:n.skip();break
;case u.KeyCode.ENTER:case u.KeyCode.SPACE:if(!document.body.classList.contains("dmc-no-focusring"))return;n.next();break;case u.KeyCode.RIGHT:case 74:n.next();break;case u.KeyCode.LEFT:case 75:
n.prev();break;default:return}e.preventDefault()}}))};n.state={currentCard:0,isTetherLoaded:y.TetherLoadableLib.isLoaded()};return n}t.prototype.componentWillMount=function(){
this.initCards(this.props.children,this.state.currentCard)};t.prototype.componentWillUpdate=function(e,t){
this.state.currentCard==t.currentCard&&r.isEqual(this.props.children,e.children)||this.initCards(e.children,t.currentCard)};t.prototype.initCards=function(e,t){var n=this;this.cards=[]
;m.Children.forEach(e,(function(a,o){a&&n.cards.push(m.cloneElement(a,{key:a.props.id,index:o,isCurrent:t==o,isFirst:0==o,isLast:o==e.length-1}))}))};t.prototype.setupTether=function(){
if(!this.props.embedded){var e=y.TetherLoadableLib.get();if(e){var t=document.createElement("div");t.className="hp-card-carousel-overlay";document.body.appendChild(t);this.overlay_=t
;this.props.addBodyClass&&document.documentElement.classList.add("has-card-carousel");this.tether_=new e({element:this.refs.portal.getTarget(),target:document.body,attachment:"middle center",
targetAttachment:"middle center"})}}};t.prototype.componentDidMount=function(){var e=this;this.state.isTetherLoaded?this.setupTether():y.TetherLoadableLib.load().then((function(){e.setupTether()
;e.setState({isTetherLoaded:!0})}));this.props.onEnterCard&&this.props.onEnterCard(this.state.currentCard,null);this.timers.setTimeout(this.bindEvents,0)};t.prototype.componentDidUpdate=function(e,t){
this.state.currentCard!=t.currentCard&&this.props.onLeaveCard&&this.props.onLeaveCard(t.currentCard,this.state.currentCard)
;this.state.currentCard!=t.currentCard&&this.props.onEnterCard&&this.props.onEnterCard(this.state.currentCard,t.currentCard)};t.prototype.componentWillUnmount=function(){
this.props.onBeforeLeaveCard&&this.props.onBeforeLeaveCard(this.state.currentCard,null);this.props.onLeaveCard&&this.props.onLeaveCard(this.state.currentCard,null);if(!this.props.embedded){
document.documentElement.classList.remove("has-card-carousel");this.tether_.destroy();(0,f.removeElements)([this.overlay_])}};t.prototype.close=function(){this.props.onClose&&this.props.onClose()}
;t.prototype.render=function(){var e,t=this,n=this.cards.map((function(e,n){var a=s("hp-card-carousel-dot",{current:t.state.currentCard==n});return m.createElement(c.default,{className:a,
onClick:function(){return t.jump(n)},key:String(n),"track-title":t.cards[n].props.id,"aria-label":new _(S.dotAriaLabel,i.default.userLocale).format({number:n+1})},m.createElement("span",{
className:"the-dot"}))}));(this.props.skipButtonDisplay===a.Always||this.props.skipButtonDisplay===a.Default&&this.state.currentCard!=this.cards.length-1)&&(e=m.createElement(c.default,{
className:"card-carousel-skip",onClick:this.skip},m.createElement(E,o.__assign({},S.skip))));var r=s("hp-card-carousel",this.props.className,{"hp-card-carousel-large":this.props.large}),l={
width:"".concat(100*this.cards.length,"%"),marginLeft:"".concat(-100*this.state.currentCard,"%"),transition:"margin-left ".concat(this.props.cardTransitionSec,"s")},d=m.createElement("div",{
className:r},m.createElement("div",{className:"hp-card-carousel-cards",style:l},this.cards),m.createElement("div",{className:"hp-card-carousel-controls"
},e,this.props.showCarouselDots&&m.createElement("div",{className:"hp-card-carousel-dots"},n),this.props.showNavButtons&&m.createElement(m.Fragment,null,m.createElement(c.default,{
className:"hp-card-carousel-nav hp-card-carousel-nav-left",onClick:this.prev,"aria-label":new _(S.prevSlideButtonAriaLabel,i.default.userLocale).format()},m.createElement(g.default,{name:"previous"
})),m.createElement(c.default,{className:"hp-card-carousel-nav hp-card-carousel-nav-right",onClick:this.next,"aria-label":new _(S.nextSlideButtonAriaLabel,i.default.userLocale).format()
},m.createElement(g.default,{name:"next"})))));return this.props.embedded?d:m.createElement(h.NewPortal,{className:"hp-card-carousel-wrapper",ref:"portal"},d)};t.displayName="CardCarousel";t.Card=C
;t.defaultProps={cardTransitionSec:.5,skipButtonDisplay:a.Default,showCarouselDots:!0};return t=o.__decorate([d.default],t)}(m.PureComponent);t.default=b},322:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.BackButtonBehavior=void 0;var a,o=n(1),r=n(6),s=n(53),i=n(26),l=n(2),d=n(10),c=n(0),u=n(13),p=(0,n(5).PaperIntlFactory)(),h=p.F,m=p._f,f=(0,
l.defineMessages)({backButton:{id:"tSs2ty",defaultMessage:"Back"},backToFolder:{id:"NLoe0d",defaultMessage:"Back to folder"},backToProject:{id:"vENTE8",defaultMessage:"Back to project"},backToPad:{
id:"NYhFDe",defaultMessage:"Back to previous doc"},backToHome:{id:"NKw39W",defaultMessage:"Back to home"}});!function(e){e[e.LastHistoryItem=1]="LastHistoryItem";e[e.DropboxHome=2]="DropboxHome"
}(a=t.BackButtonBehavior||(t.BackButtonBehavior={}));function g(e){var t=e.behavior||a.LastHistoryItem;switch(t){case a.DropboxHome:return{
lastUrl:"https://".concat(i.default.dropboxDomainWWW,"/paper"),tooltip:f.backToHome,target:"_top"};case a.LastHistoryItem:
var n=e.app,o=n.getPreviousHistoryItem(),l=r.get(o,"pageName"),d=n.getBackNavigationURLForHistoryItem(o),c=function(e){
return e===s.default.FOLDER?f.backToFolder:e===s.default.PROJECT?f.backToProject:e===s.default.PAD?f.backToPad:e&&e!==s.default.HOME?f.backButton:f.backToHome}(l);return{handleLinkClicked:function(e){
return n.onLinkClicked(e,!0)},lastUrl:d,tooltip:c}}}var y=function(e){var t=g(e),n=t.handleLinkClicked,a=t.lastUrl,r=t.target,s=t.tooltip;return c.createElement("div",{
className:"hp-header-back-button-wrapper"},c.createElement(d.default,{className:"hp-header-back-button selenium-header-back-button",href:a,onClick:n,target:r,
tooltip:c.createElement(h,o.__assign({},s)),tooltipAside:"right","track-title":s.defaultMessage,"aria-label":m(s)},c.createElement(u.default,{name:"previous"})))};y.displayName="BackButton"
;t.default=y},323:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(143),r=n(641),s=n(0),i=function(e){return s.createElement(a.TrackContext,{
trackContext:a.AppContext.Sidebar},s.createElement("div",{className:"hp-header-sidebar-button-wrapper"},s.createElement(r.default,{isTemplate:e.isTemplate,handleToggleSidebar:function(){
var t=o.getFolderSidebarToggleTrackDataFromPadController(e.padController,e.inSidebar),n=e.sidebarWrapper;n&&n.getFolderSidebar().toggleByUser(t)},isSidebarOpen:e.isSidebarOpen,inSidebar:e.inSidebar
})))};i.displayName="ToggleFolderSidebarButton";t.default=i},379:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.FolderSelectPath2=t.FolderSelectEntry2=t.FolderSelector2=void 0
;var a=n(1),o=n(6),r=n(3),s=n(250),i=n(314),l=n(8),d=n(2),c=n(120),u=n(60),p=n(7),h=n(11),m=n(76),f=n(200),g=n(272),y=n(865),v=n(613),E=n(614),_=n(172),S=n(463),C=n(273),b=n(10),P=n(73),I=n(43),T=n(70),N=n(0),k=n(36),w=n(13),M=n(150),F=n(71),x=n(4),D=n(17),O=(0,
n(5).PaperIntlFactory)().F,L=(0,d.defineMessages)({add:{id:"YcxVqg",defaultMessage:"Add"},move:{id:"ds25UH",defaultMessage:"Move"},searchresults:{id:"AUTa6P",defaultMessage:"Search results"},
recentfolders:{id:"6Hd+PC",defaultMessage:"Recent folders"},recentlyviewed:{id:"/TFrfF",defaultMessage:"Recently viewed"},allfolders:{id:"Wju74d",defaultMessage:"All folders"},folders:{id:"Ga3Ee+",
defaultMessage:"Folders"},showresultCountpluraloneresultotherresults:{id:"kUrK1S",defaultMessage:"Show {resultCount, plural, one {1 result} other {# results}}"},removefromfolder:{id:"JNUdUq",
defaultMessage:"Remove from folder"},unfiled:{id:"jint2H",defaultMessage:"Unfiled"},createanewfolder:{id:"GMsrpv",defaultMessage:"Create a new folder"},createnewfoldertogetstarted:{id:"DYJP+Y",
defaultMessage:"{createNewFolder} to get started."},cancel:{id:"d9/SE1",defaultMessage:"Cancel"},createfolder:{id:"yzXXz9",defaultMessage:"Create folder"}}),R=function(e){a.__extends(t,e)
;function t(t){var n=e.call(this,t)||this;n.setSelectedFolderById=function(e){if(null==e)n.setSelectedFolder(null);else{var t=n.state.allFolders.filter((function(t){return t.folder.encryptedId==e}))
;1!=t.length?n.setSelectedFolder(null):n.setSelectedFolder(t[0])}};n.navigateToFolder=function(e){(0,x.track)("folder-mover-navigate",a.__assign({fromSearch:""!=n.state.query},(0,_.default)(e)))
;n.setSelectedFolder(e)};n.handleFilterChange=function(e){n.state.shownFoldersLoaded&&n.setState({filter:e,shownFolders:n.state.shownFolders?n.sortFolders(n.state.shownFolders,e):n.state.shownFolders
})};n.sortFolders=function(e,t){return(0,s.sortEntries)(e.map((function(e){var n=(0,S.getFolderSortValue)(e,t,!0);return(0,s.constructFolderListEntry)(e,n)})),t).map((function(e){return e.folderData
}))};n.onOpen=function(){n.refs.searchBox&&n.refs.searchBox.focus();n.events.on(document,"keydown",(function(e){e.which==I.KeyCode.ENTER&&n.confirmEnabled()&&n.onAccept()}))}
;n.updateSearchResults=function(){n.updateSearchResultsPreservingSelectedFolder(null)};n.updateAllFolders=function(){if(n.props.stores.folderList.hasLoadedFullList()){
var e=n.props.stores.folderList.getList()||[];e=n.sortFolders(e,p.ListViewFilter.recents);n.props.requireDomainId&&(e=e.filter((function(e){return e.folder.encryptedDomainId==n.props.requireDomainId
})));n.props.excludeFolderIds&&(e=e.filter((function(e){if(o.includes(n.props.excludeFolderIds,e.folder.encryptedId))return!1
;for(var t=0;t<e.parentFolders.length;t++)if(o.includes(n.props.excludeFolderIds,e.parentFolders[t].encryptedId))return!1;return!0})));n.setState({allFolders:e},(function(){
n.updateSearchResultsPreservingSelectedFolder(n.state.selectedFolder)}))}};n.onAccept=function(){n.refs.popup.close();n.props.onSelect(n.state.selectedFolder,!1)};n.cancel=function(e){
e.preventDefault();e.stopPropagation();(0,x.track)("folder-mover-cancelled");n.props.onCancel&&n.props.onCancel();n.refs.popup.close()};n.onCancelCreateFolder=function(){(0,
x.track)("folder-mover-create-folder-cancelled")};n.onCreatedFolder=function(e){(0,x.track)("folder-mover-create-folder-confirmed");n.props.onSelect(e,!0)};n.promptCreateFolder=function(){
n.refs.popup.close();var e=n.state.selectedFolder&&n.state.selectedFolder.folder;(0,x.track)("folder-mover-create-folder-prompt",{fromSearch:""!=n.state.query,inFolder:null!=e})
;var t=document.createElement("div");document.body.appendChild(t);k.reactDomRender(N.createElement(F.ToastAndUnmountErrorBoundary,null,N.createElement(i.CreateFolderDialog,{initialTitle:n.state.query,
stores:n.props.stores,parentFolderData:n.state.selectedFolder,onCancel:n.onCancelCreateFolder,onCreate:n.onCreatedFolder})),t)};n.handleShowMoreClicked=function(){n.setState({showAllFolders:!0,
shownFolders:n.state.matchedFolders})};n.state={allFolders:[],viewingFolder:null,matchedFolders:[],query:"",selectedFolder:null,showAllFolders:!1,shownFolders:[],shownFoldersLoaded:!1,
filter:p.ListViewFilter.recents,unfileThisDoc:!1};return n}t.prototype.setSelectedFolder=function(e){var t=this.childFolders(e);if(e&&0==t.length){var n=e
;if(this.state.selectedFolder==e)n=this.state.viewingFolder?this.state.viewingFolder:null;else if(!this.state.selectedFolder){n=e;this.setState({viewingFolder:e,shownFoldersLoaded:!0})}this.setState({
selectedFolder:n,unfileThisDoc:!1})}else this.setState({viewingFolder:e,matchedFolders:t,selectedFolder:e,query:"",shownFolders:this.state.showAllFolders?t:t.slice(0,50),shownFoldersLoaded:!0,
filter:p.ListViewFilter.recents,unfileThisDoc:!1})};t.prototype.getParentFolderIdFromData=function(e){if(null==e)return null;var t=e.parentFolders,n=t[t.length-1];return n&&n.encryptedId}
;t.prototype.getIconNameForFolder=function(e){return e.parentFolders.length>0?"folder":e.folder.guestPolicy==p.FolderGuestPolicy.public?"folder_company":"folder_shared"}
;t.prototype.inSearchMode=function(){return""!=this.state.query};t.prototype.userMatchesRequiredDomain=function(){var e=this.props.requireDomainId;return!e||e==l.default.encryptedTeamId}
;t.prototype.shouldShowCreateEntry=function(){return null!=this.state.viewingFolder||this.userMatchesRequiredDomain()};t.prototype.confirmEnabled=function(){
return this.state.selectedFolder||this.props.allowRoot&&this.userMatchesRequiredDomain()||this.state.unfileThisDoc};t.prototype.renderBreadcrumbs=function(){var e=this,t=this.state.viewingFolder
;if(!t)return null;var n=t.parentFolders.concat([t.folder]).map((function(t,n){return N.createElement(C.HpCrumb,{onClick:e.setSelectedFolderById.bind(e,t.encryptedId),key:t.encryptedId
},N.createElement(u.default,{str:t.name}))})),a=t.parentFolders[t.parentFolders.length-1],o=a?a.encryptedId:null;return N.createElement("div",{
className:"hp-folder-move-v2-results-title hp-folder-move-v2-results-breadcrumbs-panel"},N.createElement(b.default,{className:"hp-folder-move-v2-back-breadcrumbs",
onClick:this.setSelectedFolderById.bind(this,o),"data-track":"folder-mover-navigate-up","track-title":"folder-mover-back-button",role:"option"},N.createElement(P.default,{
src:"/static/img/composer/back.png",width:"10px",height:"10px"})),N.createElement(C.HpBreadcrumbs,{className:"hp-folder-move-v2-results-breadcrumbs",size:"small"},n),this.getCreateEntryButton())}
;t.prototype.render=function(){var e,t,n,o,r=this.state.shownFolders,s=!this.state.viewingFolder,i=r.map((function(e,t){var n,a;this.inSearchMode()?n=N.createElement(B,{folderData:e,
query:this.state.query}):a=N.createElement(g.default,{folderData:e,className:"hp-folder-move-v2-entry-subtitle",showIcon:!1,includeVisibleTo:!0})
;var o=m.getFullFolderName(e),r=N.createElement(f.default,{folderData:e,useDecoratedIcon:!e.folder.encryptedParentFolderId,hasTooltip:!0
}),s=!!this.state.selectedFolder&&this.state.selectedFolder.folder.encryptedId==e.folder.encryptedId;return N.createElement(A,{key:e.folder.encryptedId,icon:r,"track-title":"Folder",
showHasSubFolderIcon:e.folder.numSubFolders>0,isSelected:s,onSelect:this.navigateToFolder.bind(this,e)},N.createElement("div",{className:"hp-folder-move-v2-entry-title"},N.createElement(u.default,{
str:e.folder.name})),N.createElement(c.default,{tooltip:o},n),a)
}),this),h=this.confirmEnabled(),v=N.createElement(O,a.__assign({},L.add)),E=N.createElement(O,a.__assign({},L.move)),_=this.props.addNotMove&&l.default.isPersonalDomainUser?v:E,S=N.createElement(y.default,{
onKeyUp:this.updateSearchResults,onChange:this.updateSearchResults,ref:"searchBox"}),C=this.getCreateEntryButton();e=this.inSearchMode()?N.createElement("div",{
className:"hp-folder-move-v2-results-title hp-folder-move-v2-results-search-title"},N.createElement(O,a.__assign({},L.searchresults)),C):s?N.createElement("div",{
className:"hp-tabs hp-folder-move-v2-results-title"},N.createElement(M.default,{value:p.ListViewFilter.recents,selected:this.state.filter,onChange:this.handleFilterChange,isDefault:!0
},N.createElement(O,a.__assign({},L.recentfolders))),N.createElement(M.default,{value:p.ListViewFilter.alphabetical,selected:this.state.filter,onChange:this.handleFilterChange
},N.createElement(O,a.__assign({},L.allfolders))),C):this.renderBreadcrumbs();if(!this.state.showAllFolders&&this.state.shownFolders.length<this.state.matchedFolders.length){
var P=N.createElement(O,a.__assign({values:{resultCount:this.state.matchedFolders.length}},L.showresultCountpluraloneresultotherresults));t=N.createElement(A,{key:"show-more",
onSelect:this.handleShowMoreClicked,icon:null},N.createElement("div",{className:"hp-folder-move-v2-showall-text"},P))}if(this.props.folderData){var I=N.createElement(w.default,{name:"icon-paper"
}),k=N.createElement(O,a.__assign({},L.removefromfolder));n=N.createElement(A,{key:"remove-from-folder",onSelect:this.handleSelectToRemoveFromFolder.bind(this,null),icon:I,
isSelected:this.state.unfileThisDoc},N.createElement("div",{className:"hp-folder-move-v2-entry-title"},N.createElement(O,a.__assign({},L.unfiled))),N.createElement("p",{
className:"hp-folder-move-v2-entry-subtitle"},k))}if(this.state.shownFoldersLoaded&&this.props.stores.folderList.hasLoadedFullList())if(0!=r.length||n)o=N.createElement("div",{
className:"hp-folder-move-v2-results"},n,i,t);else{var F=N.createElement(b.default,{className:"project-contents-list-empty-link",onClick:this.promptCreateFolder
},N.createElement(O,a.__assign({},L.createanewfolder)));o=N.createElement("div",{className:"hp-folder-move-v2-results hp-folder-move-v2-results-empty"},N.createElement(O,a.__assign({values:{
createNewFolder:F}},L.createnewfoldertogetstarted)))}else{var D=N.createElement("div",{className:"hp-folder-move-v2-loading"},N.createElement("div",{className:"awesome-spinner"}))
;o=N.createElement("div",{className:"hp-folder-move-v2-results"},D)}return N.createElement(d.IntlProvider,{locale:l.default.userLocale},N.createElement(x.TrackContext,{
trackContext:this.props.trackContext},N.createElement(T.default,{className:"selenium-folder-move-popup hp-folder-move-v2-popup",ref:"popup",onOpen:this.onOpen,openOnMount:!0,unmountOnClose:!0,
size:"mediumlarge"},N.createElement(x.TrackContext,{trackContext:x.AppContext.MoveFolderDialog},N.createElement("div",{ref:"popupContent",className:"hp-popup-content"},N.createElement("div",{
className:"hp-folder-move-v2-top-content"},N.createElement("h1",null,this.props.title),S,e,o),N.createElement("div",{className:"dmc-button-pair"},N.createElement(b.default,{secondary:!0,
onClick:this.cancel},N.createElement(O,a.__assign({},L.cancel))),N.createElement(b.default,{className:"selenium-folder-move-confirm-button hp-folder-move-v2-button",ref:"ok",disabled:!h,primary:!0,
onClick:this.onAccept},_)))))))};t.prototype.getCreateEntryButton=function(){var e;if(this.shouldShowCreateEntry()){var t=N.createElement(O,a.__assign({},L.createfolder));e=N.createElement(b.default,{
className:"hp-folder-move-v2-create-text",onClick:this.promptCreateFolder,href:"#"},t);this.state.viewingFolder&&(e=N.createElement(b.default,{className:"hp-folder-move-v2-create-text-folder",
onClick:this.promptCreateFolder,href:"#"},t))}return e};t.prototype.componentDidMount=function(){this.updateAllFolders();this.props.baseFolder&&this.navigateToFolder(this.props.baseFolder)
;this.props.stores.folderList.on("folder-list-changed",this.updateAllFolders);this.props.stores.folderList.loadRecent(!1);this.props.stores.folderList.refresh(!0)}
;t.prototype.componentWillUnmount=function(){this.props.stores.folderList.off("folder-list-changed",this.updateAllFolders)};t.prototype.childFolders=function(e){if(!e)return this.state.allFolders
;var t=e&&e.folder.encryptedId;return this.state.allFolders.filter((function(e){return e.folder.encryptedParentFolderId==t}))};t.prototype.handleSelectToRemoveFromFolder=function(e){this.setState({
unfileThisDoc:!this.state.unfileThisDoc,selectedFolder:null})};t.prototype.updateSearchResultsPreservingSelectedFolder=function(e){var t=this,n=e?this.state.allFolders.filter((function(t){
return t.folder.encryptedId==e.folder.encryptedId}))[0]:null,a="";this.refs.searchBox&&(a=this.refs.searchBox.getValue());if(""==a)this.setSelectedFolder(n);else{
var o=this.state.allFolders.map((function(e){return{word:m.getFullFolderName(e),folderData:e}}));v.getInstance().searchList(o,a).then((function(e){var o=e.map((function(e){return e.word.folderData}))
;t.setState({viewingFolder:null,selectedFolder:n,matchedFolders:o,query:a,shownFolders:t.state.showAllFolders?o:o.slice(0,50),shownFoldersLoaded:!0})}))}};t.displayName="FolderSelector2"
;return t=a.__decorate([h.default],t)}(N.Component);t.FolderSelector2=R;var A=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
var e;this.props.showHasSubFolderIcon&&(e=N.createElement(w.default,{name:"chevron"}));var t=r("selenium-folder-move-entry","hp-folder-move-v2-entry",{
"hp-folder-move-v2-entry-highlighted":this.props.isHighlighted,"hp-folder-move-v2-entry-selected":this.props.isSelected});return N.createElement("div",{className:t,onClick:this.props.onSelect,
"data-track":"Select List Item","data-track-category":"ui","data-track-title":this.props["track-title"],"data-track-context":this.getTrackContext()},N.createElement("div",{
className:"hp-folder-move-v2-entry-icon-wrapper"},this.props.icon),N.createElement("div",{className:"hp-folder-move-v2-entry-text"},this.props.children),N.createElement("div",{
className:"hp-folder-move-v2-entry-more-icon"},e))};t.displayName="FolderSelectEntry2";return t=a.__decorate([x.trackContextDecorator],t)}(N.Component);t.FolderSelectEntry2=A
;t.default=function(e,t,n,o,r){var s=N.createElement(R,a.__assign({title:e,onSelect:n,onCancel:o},r,{stores:t})),i=document.createElement("div");document.body.appendChild(i)
;k.reactDomRender(N.createElement(F.ToastAndUnmountErrorBoundary,null,s),i)};var B=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.render=function(){var e=this.props.folderData,t=m.getFullFolderName(e),n=[e.folder.name];e.parentFolders.forEach((function(e){var t=D.default.string.ellipsize(e.name,15)
;n.splice(n.length-1,0,t,"/")}));return N.createElement(c.default,{tooltip:t,className:"hp-folder-move-v2-path"},N.createElement(E.default,{chunks:n,query:this.props.query}))}
;t.displayName="FolderSelectPath2";return t}(N.Component);t.FolderSelectPath2=B},381:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.DropboxSearchComboBox=void 0
;var a=n(1),o=n(6),r=n(3),s=n(53),i=n(228),l=n(47),d=n(2),c=n(1548),u=n(11),p=n(601),h=n(43),m=n(870),f=n(14),g=n(298),y=n(616),v=n(23),E=n(0),_=n(24),S=n(617),C=n(427),b=n(618),P=n(871),I=n(873),T=n(114).sessionStorage,N=n(874),k=n(27),w=n(44),M=n(4),F=n(29),x=n(17),D=n(135),O=(0,
f.MsgFactory)("search"),L=O.F,R=(0,O.defineMessages)({noPaperresultsfound:{msg:"No Paper results found",description:"No matching search results found in Paper."},
forfulltextordoctitlestrysearchingPaperontheweb:{msg:"For full text or doc titles, try searching Paper on the web",
description:"This will appear in Paper desktop app when the user searches something but there's no search results. It indicates that to search\n        full text in paper doc content or paper doc titles, the user can try searching in Paper Web instead."
},begintypingtosearch:{msg:"Begin typing to search",description:"User hasn't typed any text for search, implying user to begin searching."},searchforallyourPaperdoccontent:{
msg:"Search for all your Paper doc content"}});(0,d.defineMessages)({noPaperresultsfound:{id:"JO+NoN",defaultMessage:"No Paper results found"},forfulltextordoctitlestrysearchingPaperontheweb:{
id:"nL6Wgw",defaultMessage:"For full text or doc titles, try searching Paper on the web"},begintypingtosearch:{id:"gxKZ44",defaultMessage:"Begin typing to search"},searchforallyourPaperdoccontent:{
id:"vyu8fx",defaultMessage:"Search for all your Paper doc content"}});function A(e,t){return t?B(e):e.focused}function B(e){return!o.isNull(e.queryText)&&""!=e.queryText.trim()||0!=e.tokens.length}
var U=function(e){a.__extends(t,e);function t(t,a){var r=e.call(this,t,a)||this;r.everFocused=!1;r.windowFocused=!0;r.timeoutHandles={};r.lastQueryTime=0;r.itemElement={};r.onSearch=function(e){
var t=e[0];r.doSearchWithRawQuery(t)};r.afterPageLoad=function(){var e=x.default.getRawQueryParams().q||r.parseQueryFromUrl();if(e){
var t=decodeURIComponent(e.replace(/\+/g," ")),n=C.getSearchId(),a=C.getQueryId(),o=T.getItem("lastQuery");(0,M.trackEng)("parse search query from url",{isFirstQuery:null==o,initialQuery:t,
lastQuery:o,searchId:n,queryId:a});C.extendSearchSession();r.doSearchWithRawQuery(t)}else x.default.consumeQueryParam("openSearch")&&r.focus()};r.handleHighlightChanged=function(e,t){r.setState({
highlightedIndex:e,highlightedId:t})};r.handleMouseDownOnPopover=function(e){e.preventDefault()};r.focusForSearchHotkey=function(e){r.focus();return!1};r.handleInputFocus=function(){r.setState({
focused:!0});if(!r.everFocused){S.ensureBoost();r.everFocused=!0}};r.handleInputBlur=function(){r.timers.setTimeout((function(){r.windowFocused&&r.setState({focused:!1})}),0)}
;r.handleWindowBlur=function(){r.windowFocused=!1};r.handleWindowFocus=function(){r.windowFocused=!0};r.handleInputKeyDown=function(e){
e.keyCode!=h.KeyCode.UP&&e.keyCode!=h.KeyCode.DOWN||e.preventDefault()};r.handleGlobalKeyDown=function(e){if(e.keyCode==h.KeyCode.ESCAPE){r.searchInput.blur();r.setState({focused:!1})}}
;r.removeTokenByIndex=function(e){if(e>=0){var t=r.state.tokens;t=t.slice(0,e).concat(t.slice(e+1));r.setState({tokens:t})}};r.handleDropdownOpened=function(){r.props.onExpanded&&r.props.onExpanded()
;C.trackSearchSession();g.trackPopup("search",!0);r.updateHistory();(0,M.trackUi)("Search Dropdown Opened",{searchId:C.getSearchId(),context:r.getTrackContext()})};r.handleDropdownClosed=function(){
r.props.onCollapsed&&r.props.onCollapsed();r.removeQueryHash();C.endSearchSession();g.trackPopup("search",!1);(0,M.trackUi)("Search Dropdown Closed",{searchId:C.getSearchId(),
context:r.getTrackContext()})};r.removeQueryHash=function(){if(location.hash.indexOf("#q=")>=0){var e=l.default.pathname;(0,D.historyReplaceState)({},document.title,e)}};r.handleShowMore=function(){
return function(e,t){t.preventDefault();M.IntentionEvent.ExpandSearchResults.track({type:"pads",searchId:C.getSearchId(),queryId:C.getQueryId()});r.updateResults(r.state.results)}}
;r.handleSelectPad=function(e,t){return function(n,a,o){var i=e[t],l=0==a.button&&x.default.events.testAccelKey(a);C.trackOpenSearchResult(i.localPadId,{newtab:l,index:n,localIndex:t,
keyboard:!!a.keyCode});if(a.keyCode&&x.default.events.testAccelKey(a)){var d=r.props.app.constructUrl(s.default.PAD,{id:i.localPadId});(0,F.unsafeWindowOpen)(d)
}else(o||a.keyCode==h.KeyCode.ENTER)&&r.props.app.navigateToPad({id:i.localPadId,title:i.title})}};r.clearInput=function(){r.resetSelectedIndex();r.setState({focused:!0,isLoadingPads:!1,
isWaitingForRefreshing:!1,queryText:null,tokens:[],pads:[],lastExecutedQuery:""})};r.handleClearInput=function(){r.clearInput()};r.handleInputChange=function(e){var t=e.target.value
;t&&!r.state.focused&&r.focus();if(!B(r.state)&&t.trim())r.setState({isWaitingForRefreshing:!0});else if(t||B(r.state)){if(!t){r.resetSelectedIndex();r.setState({lastExecutedQuery:""})}}else{
r.resetSelectedIndex();r.setState({isWaitingForRefreshing:!1,lastExecutedQuery:""})}r.setState({queryText:t})};r.refreshSearchResults=function(){r.refreshFromStateThrottled_()}
;r.normalizeQuery=function(e){return e.split(/ +/).filter((function(e){return e.length>0})).join(" ")};r.checkIsExtended=function(e,t){var n=r.normalizeQuery(e)
;return t.length>0&&k.startsWith(n,t)&&n.substring(t.length).indexOf(" ")<0};r.refreshFromState_=function(){if(B(r.state)){var e=r.state.queryText,t=C.newQueryId()
;C.trackQuery(t,b.searchTokensToQuery(r.state.tokens,e));r.refreshPadsFromServer(e,!1).then((function(){r.updateResults([])}))}else r.setState({isWaitingForRefreshing:!1})}
;r.updateResults=function(e){var t=r.state.pads.slice(e.length),a=t.length>n.maxResultsToShow?n.maxResultsToShow:t.length;r.setState({results:e.concat(t.slice(0,a))})}
;r.refreshPadsFromServer=function(e,t){return new Promise((function(a,o){if(e)if(!r.checkIsExtended(e,r.state.lastExecutedQuery)||r.state.pads.length){var s=i.PerfProfile.newActionProfile("search")
;r.setLoadingDebounced("isLoadingPads",e,n.loadingShortDelay);var l=C.getSearchId(),d=C.getQueryId(),c=b.searchTokensToQuery(r.state.tokens,e),u={q:e,includeCloudDocInfo:!0},p=+new Date
;r.lastQueryTime=p;S.searchCloudDocs(r.context.stores.padList,u,{isAppLevel:!0,requestProfile:s,success:function(n){var o;if(p<r.lastQueryTime)a();else{r.lastQueryTime=p
;clearTimeout(r.timeoutHandles.isLoadingPads);if(r.state.queryText==e){C.trackQuery(d,c);M.IntentionEvent.Search.track({searchId:l,queryId:d,__query:c,queryLength:e.length,numTokens:0,
numPadResults:null===(o=null==n?void 0:n.pads)||void 0===o?void 0:o.length,latency:+new Date-p});r.resetSelectedIndex();r.setState({isLoadingPads:!1,isWaitingForRefreshing:!1,
pads:null==n?void 0:n.pads,lastExecutedQuery:r.normalizeQuery(e),isExpanded:t},(function(){r.searchCompleteCallBack(s);a()}))}else{r.setState({isLoadingPads:!1});a()}}}})}else a();else{r.setState({
isLoadingPads:!1,pads:[],isExpanded:!1});a()}}))};r.updateHistory=o.debounce((function(){var e=b.searchTokensToQuery(r.state.tokens,r.state.queryText);T.setItem("lastQuery",e)
;var t=l.default.pathname,n=e?"#q="+encodeURIComponent(e):"";(0,D.historyReplaceState)({},document.title,t+n)}),500);r.state=r.getInitialState_();return r}n=t;t.prototype.getTrackContext=function(){}
;t.prototype.getChildContext=function(){return{ariaComboBox:{input:{role:"combobox","aria-autocomplete":"list",
"aria-activedescendant":A(this.state,this.props.resultsPopoverShouldIgnoreFocusState)&&this.state.highlightedId?this.state.highlightedId:void 0,
"aria-expanded":A(this.state,this.props.resultsPopoverShouldIgnoreFocusState),"aria-haspopup":!0,"aria-owns":this.state.listId,
"aria-controls":A(this.state,this.props.resultsPopoverShouldIgnoreFocusState)?this.state.listId:void 0}}}};t.prototype.focus=function(){var e=this;this.setState({focused:!0},(function(){
e.searchInput&&e.searchInput.focus()}))};t.prototype.getInitialState_=function(){return{listId:o.uniqueId("dmc-"),focused:!1,queryText:null,tokens:[],isLoadingPads:!1,isWaitingForRefreshing:!1,
pads:[],results:[],highlightedIndex:null,highlightedId:null,lastExecutedQuery:""}};t.prototype.componentWillMount=function(){
this.refreshFromStateThrottled_=w.debounceWithLimit(this.refreshFromState_,100,600)};t.prototype.componentDidMount=function(){this.events.on(this.props.app,"hp-after-page-load",this.afterPageLoad)
;this.events.on(this.props.app,"hp-search",this.onSearch);this.events.on(window,"blur",this.handleWindowBlur);this.events.on(window,"focus",this.handleWindowFocus)
;this.props.focusOnMount&&this.focus()};t.prototype.componentDidUpdate=function(e,t){if(t.queryText!=this.state.queryText||t.tokens!=this.state.tokens){this.updateHistory();this.refreshSearchResults()
}if(t.focused!=this.state.focused){this.events.off(this.keyDownEventHandle);this.state.focused&&(this.keyDownEventHandle=this.events.on(window,"keydown",this.handleGlobalKeyDown))}
var n=A(this.state,this.props.resultsPopoverShouldIgnoreFocusState);A(t,e.resultsPopoverShouldIgnoreFocusState)!=n&&(n?this.handleDropdownOpened():this.handleDropdownClosed())}
;t.prototype.parseQueryFromUrl=function(){if(l.default.hash){var e=l.default.hash.slice(1),t=e.indexOf("q=");if(t>=0)return decodeURIComponent(e.slice(t+2))}return null}
;t.prototype.doSearchWithRawQuery=function(e){var t=this;this.setState({queryText:e,focused:!0},(function(){t.timers.setTimeout((function(){t.searchInput.focus()}),0)}))}
;t.prototype.renderShowMoreItem=function(){return E.createElement(y.PopoverListItem,{className:"hp-list-show-more",key:"show-more-",onSelection:this.handleShowMore()},E.createElement(N.default,null))}
;t.prototype.renderNoResults=function(){var e=E.createElement(m.LookMagnifyingGlassSpot,null);return E.createElement(p.HpMenuEmptyState,{header:E.createElement(L,a.__assign({},R.noPaperresultsfound)),
description:E.createElement(L,a.__assign({},R.forfulltextordoctitlestrysearchingPaperontheweb)),newIllustration:e})};t.prototype.renderEmptyState=function(){
var e=E.createElement(m.LookMagnifyingGlassSpot,null);return E.createElement(p.HpMenuEmptyState,{header:E.createElement(L,a.__assign({},R.begintypingtosearch)),
description:E.createElement(L,a.__assign({},R.searchforallyourPaperdoccontent)),newIllustration:e})};t.prototype.renderPadResults=function(){
var e=this,t=this.state.pads.length>this.state.results.length,n=this.state.results;return 0==n.length&&(this.state.isLoadingPads||t)?E.createElement(y.PopoverListItem,{section:"",
className:"hp-list-placeholder"},E.createElement(I.SearchResultPlaceholder,{rows:"5"})):n.map((function(t,a){
var o="pad-"+t.localPadId,r=e.handleSelectPad(n,a),s=E.createElement(c.DropboxSearchResultItem,{pad:t,originalQuery:e.state.queryText});return E.createElement(y.PopoverListItem,{key:o,ref:function(t){
return e.itemElement[o]=_.findDOMNode(t)},className:"hp-list-doc-item selenium-hp-list-doc-item",onSelection:r},s)})).concat(t?[this.renderShowMoreItem()]:[])}
;t.prototype.renderSearchDropdownContents=function(){if(!A(this.state,this.props.resultsPopoverShouldIgnoreFocusState))return[];var e
;if(this.state.isWaitingForRefreshing)(e=[E.createElement(y.PopoverListItem,{className:"hp-list-placeholder"},E.createElement(I.SearchResultPlaceholder,{rows:"1"
}))]).push(E.createElement(y.PopoverListItem,{className:"hp-list-placeholder"},E.createElement(I.SearchResultPlaceholder,{rows:"5"})));else if(B(this.state)){var t=[];t.push(this.renderPadResults())
;e=t.every((function(e){return Array.isArray(e)&&o.isEmpty(e)}))?this.renderNoResults():t}else e=this.renderEmptyState();return e};t.prototype.render=function(){
var e=this,t=A(this.state,this.props.resultsPopoverShouldIgnoreFocusState),n=this.props.halfCollapse&&!t,a=r("dmc-combobox","hp-search-combobox",{"hp-search-collapsible":this.props.collapsible,
"hp-search-focused":this.state.focused,"hp-search-half-collapse":n,"dmc-combobox-open":t,"dmc-combobox-child-focused":t&&null!==this.state.highlightedId});return E.createElement("div",{className:a,
role:"search"},E.createElement(P.SearchBox,{ref:function(t){return e.searchInput=t},collapsible:this.props.collapsible,onChange:this.handleInputChange,onClear:this.handleClearInput,
onKeyDown:this.handleInputKeyDown,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,tokens:n?null:this.state.tokens,removeTokenByIndex:this.removeTokenByIndex,
value:n?null:this.state.queryText,searchHotkeyHandler:this.focusForSearchHotkey,newDropboxSearch:!0,isOffline:this.props.isOffline}),E.createElement(y.PopoverList,{
className:"dmc-combobox-popover hp-search-result-list selenium-hp-search-result-list",ref:function(t){return e.searchPopoverList=_.findDOMNode(t)},open:t,
onHighlightChanged:this.handleHighlightChanged,onMouseDown:this.handleMouseDownOnPopover,"aria-hidden":!t,id:this.state.listId},this.renderSearchDropdownContents()))}
;t.prototype.setLoadingDebounced=function(e,t,n){var a=this;if(this.timeoutHandles[e]){clearTimeout(this.timeoutHandles[e]);this.timeoutHandles[e]=null}
this.timeoutHandles[e]=this.timers.setTimeout((function(){var n;a.state.queryText==t&&a.setState(((n={})[e]=!0,n))}),n)};t.prototype.resetSelectedIndex=function(){if(this.searchPopoverList){
var e=new Event("resetHighlightedIndex");this.searchPopoverList.dispatchEvent(e)}};t.prototype.searchCompleteCallBack=function(e){e.mark(i.Marks.TIME_TO_INTERACTIVE);e.send()};var n
;t.displayName="DropboxSearchComboBox";t.maxResultsToShow=9;t.loadingShortDelay=0;t.loadingLongDelay=600;t.childContextTypes={ariaComboBox:v.object};t.contextTypes={stores:v.object.isRequired}
;return t=n=a.__decorate([u.default,M.trackContextDecorator],t)}(E.Component);t.DropboxSearchComboBox=U},382:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SearchComboBox=void 0
;var a,o=n(1),r=n(6),s=n(1566),i=n(3),l=n(18),d=n(53),c=n(228),u=n(47),p=n(8),h=n(2),m=n(347),f=n(101),g=n(7),y=n(11),v=n(860),E=n(76),_=n(293),S=n(147),C=n(172),b=n(601),P=n(839),I=n(43),T=n(7),N=n(870),k=n(14),w=n(298),M=n(616),F=n(23),x=n(0),D=n(24),O=n(1567),L=n(1568),R=n(29),A=n(617),B=n(427),U=n(618),H=n(871),j=n(1569),W=n(1571),V=n(1572),Q=n(873),K=n(868),q=n(1573),G=n(114).sessionStorage,z=n(874),Y=n(838),X=n(1575),J=n(27),Z=n(41),$=n(44),ee=n(4),te=n(29),ne=n(465),ae=n(17),oe=n(135),re=(0,
k.MsgFactory)("search"),se=re.F,ie=(0,re.defineMessages)({filterbypeople:{msg:"Filter by people"},upcomingMeetings:{msg:"Upcoming Meetings"},recentlyviewed:{msg:"Recently viewed"},starred:{
msg:"Starred"},couldntfindithere:{msg:"Couldn't find it here",description:"No matching search results within Paper, implying user to search in another place."},searchmyDropboxfolders:{
msg:"Search my Dropbox folders",description:"Onclick shows a page with search results from Dropbox folders matching the keyword."},searchresultsnumberOfResultsnumber:{
msg:"search results ({numberOfResults, number})"},searchresultsnumberOfResults:{msg:"search results ({numberOfResults})"},searchingforcollatedQuerySearchoriginalQueryinstead:{
msg:"Searching for {collatedQuery}. Search {originalQuery} instead?",
description:"This appears when we detect and automatically correct spelling errors in a search query.\n                      The user can click on this label to search with their original query."},
didyoumeancollatedQuery:{msg:"Did you mean {collatedQuery}?",description:"Suggesting a new query when we detect spelling errors in a search query."}}),le=((0,h.defineMessages)({filterbypeople:{
id:"1mBlVT",defaultMessage:"Filter by people"},upcomingMeetings:{id:"e5KoOa",defaultMessage:"Upcoming Meetings"},recentlyviewed:{id:"/TFrfF",defaultMessage:"Recently viewed"},starred:{id:"5hVhqA",
defaultMessage:"Starred"},couldntfindithere:{id:"FgI96w",defaultMessage:"Couldn't find it here"},searchmyDropboxfolders:{id:"VvSlJB",defaultMessage:"Search my Dropbox folders"},
searchresultsnumberOfResultsnumber:{id:"vf4itV",defaultMessage:"search results ({numberOfResults, number})"},searchresultsnumberOfResults:{id:"95l+DC",
defaultMessage:"search results ({numberOfResults})"},searchingforcollatedQuerySearchoriginalQueryinstead:{id:"wFfKPY",defaultMessage:"Searching for {collatedQuery}. Search {originalQuery} instead?"},
didyoumeancollatedQuery:{id:"02zKsX",defaultMessage:"Did you mean {collatedQuery}?"}}),function(){function e(){this.pads=0;this.folders=0}Object.defineProperty(e.prototype,"total",{get:function(){
return this.pads+this.folders},enumerable:!1,configurable:!0});return e}());!function(e){e[e.Pad=0]="Pad";e[e.Folder=1]="Folder"}(a||(a={}));function de(e,t){return t?ce(e):e.focused}function ce(e){
return!r.isNull(e.queryText)&&""!=e.queryText.trim()||0!=e.tokens.length}var ue=function(e){o.__extends(t,e);function t(t,s){var i=e.call(this,t,s)||this;i.everFocused=!1;i.windowFocused=!0
;i.timeoutHandles={};i.lastQueryTime={pads:0,folders:0,people:0};i.itemElement={};i.panelId="search";i.handleFolderListChange=function(){i.setState({folderData:i.context.stores.folderList.getList()})}
;i.onPadListChange=function(){i.refreshPadListFromStore()};i.fetchUpcomingEvents=function(){var e=new Date(Date.now()-1*Z.Time.HOUR),t=new Date(Date.now()+24*Z.Time.HOUR);i.setState({
isLoadingUpcomingEvents:!0},(function(){i.calendarEvents.filter({timeMin:e,timeMax:t})}))};i.updateEventsFromStore=function(){i.setState({upcomingEvents:i.calendarEvents.getEvents(),
isLoadingUpcomingEvents:!1})};i.fetchPads_=function(e,t){var n={filter:e,limit:i.getMaxPadsToLoad(e)};if(!t||!i.context.stores.padList.hasLoaded({filter:e})){i.setState({isLoadingPads:!0})
;i.context.stores.padList.loadPadList(n,{success:function(){i.setState({isLoadingPads:!1})}})}};i.refreshPadListFromStore=function(e){
[T.ListViewFilter.recents,T.ListViewFilter.recentFavorites].forEach((function(t){i.updatePadList(t,(function(n){e&&e(t)}))}))};i.onSearch=function(e){var t=e[0],n=e[1]
;n?i.doSearchWithQueryAndTokens(t,n):i.doSearchWithRawQuery(t)};i.afterPageLoad=function(){var e=ae.default.getRawQueryParams().q||i.parseQueryFromUrl();if(e){
var t=decodeURIComponent(e.replace(/\+/g," ")),n=B.getSearchId(),a=B.getQueryId(),o=G.getItem("lastQuery");(0,ee.trackEng)("parse search query from url",{isFirstQuery:null==o,initialQuery:t,
lastQuery:o,searchId:n,queryId:a});B.extendSearchSession();i.doSearchWithRawQuery(t)}else ae.default.consumeQueryParam("openSearch")&&i.focus()};i.closeDropdown=function(){i.setState({focused:!1})}
;i.handleClickSearchDropboxFolders=function(){var e=p.default.isPersonalDomainUser?f.DropboxUserRole.Personal:f.DropboxUserRole.Work,t=(0,
f.dropboxSearchPaperUrl)(e,i.searchInput.getSearchInputValue());i.closeDropdown();(0,R.safeWindowOpen)(t,!0)};i.handleSelectUpcomingMeeting=function(e,t,n){return function(a,r,s){
ee.IntentionEvent.ClickUpcomingMeetingInSearch.track({position:e,calendarType:n.calendarType});var l=o.__spreadArray(o.__spreadArray([],Array.apply(null,Array(e)),!0),[{localPadId:t.id,title:t.name
}],!1);return i.handleSelectPad(l,e,n)(a,r,s)}};i.handleSelectMixed=function(e,t,n){return function(o,r,s){if(e[t].type==a.Pad){var l=e.map((function(e){return e.pad}));i.handleSelectPad(l,t,n)(o,r,s)
}else if(e[t].type==a.Folder){var d=e.map((function(e){return e.folder}));i.handleSelectFolder(d,t,n)(o,r,s)}}};i.handleHighlightChanged=function(e,t){i.setState({highlightedIndex:e,highlightedId:t})}
;i.handleMouseDownOnPopover=function(e){e.preventDefault()};i.focusForSearchHotkey=function(e){i.focus();return!1};i.handleInputFocus=function(){i.setState({focused:!0});if(!i.everFocused){
A.ensureBoost();i.everFocused=!0}};i.handleInputBlur=function(){i.timers.setTimeout((function(){i.windowFocused&&i.setState({focused:!1})}),0)};i.handleWindowBlur=function(){i.windowFocused=!1}
;i.handleWindowFocus=function(){i.windowFocused=!0};i.handleInputKeyDown=function(e){e.keyCode!=I.KeyCode.UP&&e.keyCode!=I.KeyCode.DOWN||e.preventDefault()};i.handleGlobalKeyDown=function(e){
if(e.keyCode==I.KeyCode.ESCAPE){i.searchInput.blur();i.setState({focused:!1})}};i.selectSpellcheckHandler=function(){i.state.spellcheck.collation&&i.setState({queryText:i.state.spellcheck.collation,
spellcheck:o.__assign(o.__assign({},i.state.spellcheck),{originalQuery:U.searchTokensToQuery(i.state.tokens,i.state.queryText),isCollatedQuery:!0})})};i.searchWithOriginalQuery=function(){i.setState({
autoCollation:!1,spellcheck:null});i.refreshSearchResults()};i.removeTokenByIndex=function(e){if(e>=0){var t=i.state.tokens;t=t.slice(0,e).concat(t.slice(e+1));i.setState({tokens:t})}}
;i.handleDropdownOpened=function(){i.props.onExpanded&&i.props.onExpanded();B.trackSearchSession();w.trackPopup("search",!0);if(i.shouldPreviewDocs()){
var e=r.map(i.state.recentPads,"localPadId").slice(0,n.topNDocsToPreload),t=r.map(i.state.favoritePads,"localPadId").slice(0,n.topNDocsToPreload);i.previewLoader.clearPreloadQueue()
;i.previewLoader.schedulePreload(e.concat(t))}i.updateHistory();(0,ee.trackUi)("Search Dropdown Opened",{searchId:B.getSearchId(),context:i.getTrackContext()})};i.handleDropdownClosed=function(){
i.props.onCollapsed&&i.props.onCollapsed();i.removeQueryHash();B.endSearchSession();w.trackPopup("search",!1);(0,ee.trackUi)("Search Dropdown Closed",{searchId:B.getSearchId(),
context:i.getTrackContext()})};i.removeQueryHash=function(){if(location.hash.indexOf("#q=")>=0){var e=u.default.pathname;(0,oe.historyReplaceState)({},document.title,e)}}
;i.handleSelectPeople=function(e){return function(t,n){n.preventDefault();var a=i.state.people[e];B.trackAddPeopleFilter({localIndex:e,__peopleQuery:a.query,__selectedSecureUserId:a.secureUserId})
;var r=i.state.tokens.concat([o.__assign({type:"people"},a)]),s=i.state.queryText.replace(new RegExp(J.escapeRegExp(a.query)+" *$","i"),"");i.setState({queryText:s,tokens:r,people:[]})
;i.searchInput.focus()}};i.handleShowMore=function(e){return function(t,a){var o;a.preventDefault();ee.IntentionEvent.ExpandSearchResults.track({type:e,searchId:B.getSearchId(),queryId:B.getQueryId()
})
;"pads"==e?i.refreshPadsFromServer(i.state.queryText,i.getAssociatedSecureUserIdsForQuery_(),i.getSelectedDocStatusForQuery_(),n.maxExpandedPadResults,!0):"mixed"==e?i.refreshPadsFromServer(i.state.queryText,i.getAssociatedSecureUserIdsForQuery_(),i.getSelectedDocStatusForQuery_(),n.maxExpandedPadResults,!0,!0).then((function(){
i.sortResults(i.state.lastSortedItemIndex.pads,i.state.lastSortedItemIndex.folders,i.state.sortedMixedResults)})):i.setState({isExpanded:ne(i.state.isExpanded,(o={},o[e]={$set:!0},o))})}}
;i.handleSelectFolder=function(e,t,n){return function(a,r,s){var l=e[t].folder,d=0==r.button&&ae.default.events.testAccelKey(r);B.trackOpenFolderSearchResult(l.encryptedId,o.__assign(o.__assign({
isProject:l.isProject,newtab:d,index:a,localIndex:t,keyboard:!!r.keyCode},n),(0,C.default)(e[t])));var c=E.prettyFolderUrl(l);if(r.keyCode&&ae.default.events.testAccelKey(r))(0,
te.unsafeWindowOpen)(c);else if(s||r.keyCode==I.KeyCode.ENTER){event.stopPropagation();i.props.app.navigateToUrl(c)}}};i.handleSelectPad=function(e,t,n){return function(a,r,s){
var l=e[t],c=0==r.button&&ae.default.events.testAccelKey(r);B.trackOpenSearchResult(l.localPadId,o.__assign({newtab:c,index:a,localIndex:t,keyboard:!!r.keyCode},n))
;if(r.keyCode&&ae.default.events.testAccelKey(r)){var u=i.props.app.constructUrl(d.default.PAD,{id:l.localPadId});(0,te.unsafeWindowOpen)(u)
}else(s||r.keyCode==I.KeyCode.ENTER)&&i.props.app.navigateToPad({id:l.localPadId,title:l.title})}};i.handleClickPreview=function(e,t){e.preventDefault();var n=(0,
l.closest)(e.target,".hp-doc-preview-box"),a=null==n?void 0:n.dataset.targetId,o=null;if(a){var r=a.split("-")
;r&&"dmc"==r[0]?o=parseInt(r[r.length-1],10):console.error("Unknown target for doc preview. Expected dmc PopoverList.")}t(o,e,!0)};i.clearInput=function(){i.resetSelectedIndex();i.setState({
focused:!0,isLoadingPeople:!1,isLoadingPads:!1,isLoadingFolders:!1,isWaitingForRefreshing:!1,queryText:null,tokens:[],pads:[],people:[],folders:[],lastSortedItemIndex:{pads:0,folders:0},
sortedMixedResults:[],lastExecutedQuery:{pads:"",folders:"",people:""}})};i.handleClearInput=function(){i.clearInput()};i.handleInputChange=function(e){var t=e.target.value
;t&&!i.state.focused&&i.focus();if(!ce(i.state)&&t.trim())i.setState({isWaitingForRefreshing:!0});else if(t||ce(i.state)){if(!t){i.resetSelectedIndex();i.setState({lastExecutedQuery:{pads:"",
folders:"",people:""}})}}else{i.resetSelectedIndex();i.setState({isWaitingForRefreshing:!1,numberOfResultsFound:new le,numberOfResultsLoaded:new le,lastSortedItemIndex:{pads:0,folders:0},
sortedMixedResults:[],lastExecutedQuery:{pads:"",folders:"",people:""}})}i.setState({queryText:t,spellcheck:null})};i.hasAnyResults=function(){
return i.state.pads.length||i.state.folders.length||i.state.people.length};i.refreshSearchResults=function(){i.refreshFromStateThrottled_()};i.refreshPeopleFromServer=function(e){
if((e=e.trim()).split(/ +/).pop().length<3||i.getPeopleTokens().length>0)i.state.people.length>0?i.setState({people:[],isLoadingPeople:!1}):i.setState({isLoadingPeople:!1
});else if(!i.checkIsExtended(e,i.state.lastExecutedQuery.people)||i.state.people.length){
0==i.state.pads.length&&0==i.state.folders.length&&(0==i.state.people.length?i.setLoadingDebounced("isLoadingPeople",e,n.loadingShortDelay):i.setLoadingDebounced("isLoadingPeople",e,n.loadingLongDelay))
;var t=Date.now();i.lastQueryTime.people=t;A.searchPeople(e,2,(function(n){if(!(t<i.lastQueryTime.people)){i.lastQueryTime.people=t;if(e==i.state.queryText){
clearTimeout(i.timeoutHandles.isLoadingPeople);n.forEach((function(e,t){e.index=t}));var a={isLoadingPeople:!1,isWaitingForRefreshing:!1,lastExecutedQuery:ne(i.state.lastExecutedQuery,{people:{
$set:i.normalizeQuery(e)}})};0==n.length&&0==i.state.people.length||(a.people=n);i.resetSelectedIndex();i.setState(a)}else i.setState({isLoadingPeople:!1})}}))}};i.sortResults=function(e,t,n){
var a=i.state.queryText,o=i.state.pads.slice(e),r=i.state.folders.slice(t),s=i.getMixedPadAndFolderResults3(a,o,r);i.setState({sortedMixedResults:n.concat(s),
lastSortedItemIndex:ne(i.state.lastSortedItemIndex,{pads:{$set:e+o.length},folders:{$set:t+r.length}})})};i.normalizeQuery=function(e){return e.split(/ +/).filter((function(e){return e.length>0
})).join(" ")};i.checkIsExtended=function(e,t){var n=i.normalizeQuery(e);return t.length>0&&J.startsWith(n,t)&&n.substring(t.length).indexOf(" ")<0};i.refreshFromState_=function(){if(ce(i.state)){
var e=i.state.queryText,t=B.newQueryId();B.trackQuery(t,U.searchTokensToQuery(i.state.tokens,e))
;var a=i.refreshPadsFromServer(e,i.getAssociatedSecureUserIdsForQuery_(),i.getSelectedDocStatusForQuery_(),n.maxMixedResultsToLoad,!1),o=i.refreshFoldersFromServer(e,i.getAssociatedSecureUserIdsForQuery_())
;i.refreshPeopleFromServer(e);Promise.all([a,o]).then((function(){i.sortResults(0,0,[])}))}else i.setState({isWaitingForRefreshing:!1})};i.refreshFoldersFromServer=function(e,t){
return new Promise((function(a,o){if(e&&!t.length)if(!i.checkIsExtended(e,i.state.lastExecutedQuery.folders)||i.state.folders.length){
i.hasAnyResults()?i.setLoadingDebounced("isLoadingFolders",e,n.loadingLongDelay):i.setLoadingDebounced("isLoadingFolders",e,n.loadingShortDelay)
;var r=B.getSearchId(),s=B.getQueryId(),l=i.state.orderBy,d=Date.now();i.lastQueryTime.folders=d;var c={q:e,searchId:r,queryId:s,orderBy:l,limit:n.maxFoldersToShow,
productType:i.props.app&&i.props.app.getProductType()};A.searchFolders(c,(function(t){if(!t||d<i.lastQueryTime.folders)a();else{i.lastQueryTime.folders=d
;clearTimeout(i.timeoutHandles.isLoadingFolders);if(i.state.queryText==e){(0,ee.trackEng)("Search Folders",{searchId:r,queryId:s,__query:U.searchTokensToQuery(i.state.tokens,e),latency:Date.now()-d})
;i.setState({isLoadingFolders:!1,folders:t.folders,isExpanded:{},isWaitingForRefreshing:!1,numberOfResultsFound:ne(i.state.numberOfResultsFound,{folders:{$set:t.folders.length}}),
numberOfResultsLoaded:ne(i.state.numberOfResultsLoaded,{folders:{$set:t.folders.length}}),lastExecutedQuery:ne(i.state.lastExecutedQuery,{folders:{$set:i.normalizeQuery(e)}})},(function(){a()}))}else{
i.setState({isLoadingFolders:!1});a()}}}))}else a();else{i.setState({isLoadingFolders:!1,folders:[],numberOfResultsFound:ne(i.state.numberOfResultsFound,{folders:{$set:0}}),
numberOfResultsLoaded:ne(i.state.numberOfResultsLoaded,{folders:{$set:0}})});a()}}))};i.refreshPadsFromServer=function(e,t,a,o,r,s){void 0===s&&(s=!1);return new Promise((function(l,d){
if(e||t||a)if(!i.checkIsExtended(e,i.state.lastExecutedQuery.pads)||i.state.pads.length){var u=c.PerfProfile.newActionProfile("search");i.setLoadingDebounced("isLoadingPads",e,n.loadingShortDelay)
;o=s?n.numberOfResultsToLoadEachTime:n.numberOfResultsToLoadFirstTime
;var p=B.getSearchId(),h=B.getQueryId(),m=U.searchTokensToQuery(i.state.tokens,e),f=s?i.state.numberOfResultsLoaded.pads:0,g=i.state.orderBy,y={q:e,secureUserIds:t||void 0,selectedStatus:a||void 0,
orderBy:g,searchId:p,queryId:h,limit:o,start:f,disableCollation:!i.state.autoCollation||void 0,productType:i.props.app&&i.props.app.getProductType()},v=+new Date;i.lastQueryTime.pads=v
;A.searchPads(i.context.stores.padList,y,{isAppLevel:!0,requestProfile:u,success:function(n){if(v<i.lastQueryTime.pads)l();else{i.lastQueryTime.pads=v;clearTimeout(i.timeoutHandles.isLoadingPads)
;if(i.state.queryText==e){B.trackQuery(h,m);var a=i.state.spellcheck&&i.state.spellcheck.isCollatedQuery;ee.IntentionEvent.Search.track({searchId:p,queryId:h,__query:m,orderBy:g,queryLength:e.length,
numTokens:t?t.split(",").length:0,numPadResults:n.pads.length,latency:+new Date-v,isCollatedQuery:a,__originalQueyr:a?i.state.spellcheck.originalQuery:null});var o=r?ne(i.state.isExpanded,{pads:{
$set:!0}}):{};i.resetSelectedIndex();s?i.setState({autoCollation:!0,isLoadingPads:!1,isWaitingForRefreshing:!1,pads:ne(i.state.pads,{$push:n.pads}),
numberOfResultsFound:ne(i.state.numberOfResultsFound,{pads:{$set:n.numFound}}),numberOfResultsLoaded:ne(i.state.numberOfResultsLoaded,{pads:{$apply:function(e){return e+n.pads.length}}}),
lastExecutedQuery:ne(i.state.lastExecutedQuery,{pads:{$set:i.normalizeQuery(e)}})},(function(){i.searchCompleteCallBack(u,n,!1);l()})):i.setState({autoCollation:!0,isLoadingPads:!1,pads:n.pads,
spellcheck:n.spellcheck,numberOfResultsFound:ne(i.state.numberOfResultsFound,{pads:{$set:n.numFound}}),numberOfResultsLoaded:ne(i.state.numberOfResultsLoaded,{pads:{$set:n.pads.length}}),
lastExecutedQuery:ne(i.state.lastExecutedQuery,{pads:{$set:i.normalizeQuery(e)}}),isExpanded:o},(function(){i.searchCompleteCallBack(u,n);l()}))}else{i.setState({isLoadingPads:!1});l()}}}})
}else l();else{i.setState({isLoadingPads:!1,pads:[],isExpanded:{},numberOfResultsFound:ne(i.state.numberOfResultsFound,{pads:{$set:0}}),numberOfResultsLoaded:ne(i.state.numberOfResultsLoaded,{pads:{
$set:0}})});l()}}))};i.getAssociatedSecureUserIdsForQuery_=function(){return r.map(i.getPeopleTokens(),"secureUserId").join(",")};i.getSelectedDocStatusForQuery_=function(){
return i.getStatusTokens().map((function(e){return e.archived?"archived":e.status.toString()})).join(",")};i.updateHistory=r.debounce((function(){
var e=U.searchTokensToQuery(i.state.tokens,i.state.queryText);G.setItem("lastQuery",e);var t=u.default.pathname,n=e?"#q="+encodeURIComponent(e):"";(0,oe.historyReplaceState)({},document.title,t+n)
}),500);i.previewLoader=new m.default(i.context.stores.padPreview);var h=i.getInitialState_();i.getPadListIfLoaded(T.ListViewFilter.recents,(function(e){h.recentPads=e}))
;i.getPadListIfLoaded(T.ListViewFilter.recentFavorites,(function(e){h.favoritePads=e}));h.folderData=i.context.stores.folderList.getList();i.state=h;return i}n=t
;t.prototype.getTrackContext=function(){};t.prototype.getChildContext=function(){return{ariaComboBox:{input:{role:"combobox","aria-autocomplete":"list",
"aria-activedescendant":de(this.state,this.props.resultsPopoverShouldIgnoreFocusState)&&this.state.highlightedId?this.state.highlightedId:void 0,
"aria-expanded":de(this.state,this.props.resultsPopoverShouldIgnoreFocusState),"aria-haspopup":!0,"aria-owns":this.state.listId,
"aria-controls":de(this.state,this.props.resultsPopoverShouldIgnoreFocusState)?this.state.listId:void 0}}}};t.prototype.openPanel=function(){this.state.focused||this.focus()}
;t.prototype.closePanel=function(){if(this.state.focused){this.searchInput.blur();this.setState({focused:!1})}};t.prototype.shouldPreviewDocs=function(){return!this.props.hidePreview}
;t.prototype.getFavoriteFolders=function(e){return e.filter((function(e){return e.inSidebar}))};t.prototype.getViewedFolders=function(e){return e.filter((function(e){return!!e.folderView}))}
;t.prototype.getPadListIfLoaded=function(e,t){this.context.stores.padList.hasLoaded({filter:e})&&this.context.stores.padList.getPadList({filter:e},t)};t.prototype.updatePadList=function(e,t){
var n=this,a=e==T.ListViewFilter.recents?"recentPads":"favoritePads";this.context.stores.padList.getPadList({filter:e},(function(e){var o;n.setState(((o={})[a]=e,o),(function(){t&&t(e)}))}))}
;t.prototype.focus=function(){var e=this;this.setState({focused:!0},(function(){e.searchInput&&e.searchInput.focus()}))};t.prototype.getInitialState_=function(){return{listId:r.uniqueId("dmc-"),
focused:!1,queryText:null,orderBy:T.SearchSortingOption.BestMatch,tokens:[],isLoadingPeople:!1,isLoadingPads:!1,isLoadingFolders:!1,isLoadingUpcomingEvents:!1,isWaitingForRefreshing:!1,pads:[],
people:[],folders:[],folderData:[],recentPads:[],favoritePads:[],upcomingEvents:[],hotPads:[],isExpanded:{},highlightedIndex:null,highlightedId:null,numberOfResultsFound:new le,
numberOfResultsLoaded:new le,sortedMixedResults:[],lastSortedItemIndex:{pads:0,folders:0},lastExecutedQuery:{pads:"",folders:"",people:""},autoCollation:!0,spellcheck:null}}
;t.prototype.componentWillMount=function(){this.refreshFromStateThrottled_=$.debounceWithLimit(this.refreshFromState_,100,600)};t.prototype.componentDidMount=function(){var e=this
;this.context.panels&&this.context.panels.registerPanel(this);this.events.on(this.props.app,"hp-after-page-load",this.afterPageLoad);this.events.on(this.props.app,"hp-search",this.onSearch)
;this.events.on(window,"blur",this.handleWindowBlur);this.events.on(window,"focus",this.handleWindowFocus);var t=this.context.stores;this.events.on(t.padList,"pad-list-change",this.onPadListChange)
;this.refreshPadListFromStore((function(t){e.fetchPads_(t,!0)}));this.events.on(t.folderList,"folder-list-changed",this.handleFolderListChange);t.folderList.loadRecent();t.folderList.loadFavorites()
;this.calendarEvents=new v.default(t.calendarEvents);this.events.on(this.calendarEvents,"change",this.updateEventsFromStore);this.updateEventsFromStore();this.fetchUpcomingEvents()
;this.props.focusOnMount&&this.focus()};t.prototype.componentDidUpdate=function(e,t){if(t.queryText!=this.state.queryText||t.tokens!=this.state.tokens){this.updateHistory();this.refreshSearchResults()
}if(t.focused!=this.state.focused){this.events.off(this.keyDownEventHandle);this.state.focused&&(this.keyDownEventHandle=this.events.on(window,"keydown",this.handleGlobalKeyDown))}
var n=de(this.state,this.props.resultsPopoverShouldIgnoreFocusState);if(de(t,e.resultsPopoverShouldIgnoreFocusState)!=n)if(n){this.handleDropdownOpened()
;this.calendarEvents&&!ce(this.state)&&this.fetchUpcomingEvents()}else this.handleDropdownClosed()};t.prototype.componentWillUnmount=function(){
this.context.panels&&this.context.panels.unregisterPanel(this);if(this.calendarEvents){this.calendarEvents.dispose();this.calendarEvents=null}};t.prototype.getMaxPadsToLoad=function(e){switch(e){
case T.ListViewFilter.recents:return n.maxRecentsToLoad;case T.ListViewFilter.recentFavorites:return n.maxFavoritesToLoad;default:throwException("unknown filter")}}
;t.prototype.parseQueryFromUrl=function(){if(u.default.hash){var e=u.default.hash.slice(1),t=e.indexOf("q=");if(t>=0)return decodeURIComponent(e.slice(t+2))}return null}
;t.prototype.doSearchWithQueryAndTokens=function(e,t){var n=this;this.setState({queryText:e,tokens:t,focused:!0},(function(){n.timers.setTimeout((function(){n.searchInput.focus()}),0)}))}
;t.prototype.doSearchWithRawQuery=function(e){var t=this,n=U.parseCombinedValue(e),a=n.text,o=n.emailFilters,s=n.secureUserIdFilters,i=n.folderFilters,l=n.statuslist,d=o.map((function(e){return{
type:"people",secureUserId:null,userPic:null,email:e,name:null}})),c=s.map((function(e){return{type:"people",secureUserId:e,userPic:null,email:e,name:null}})),u=d.concat(c),p=l.map((function(e){
return{type:"status",status:e,statusName:X.getStatusPlainText(e)}})),h=[].concat(u).concat(i).concat(p);this.setState({queryText:a,tokens:h,focused:!0},(function(){t.timers.setTimeout((function(){
t.searchInput.focus()}),0)}));if(u.length>0){var m=U.peopleSearchFilterFromPeopleTokens(u);A.searchPeople(m,u.length,(function(e){var n=t.state.tokens.filter((function(e){return"folder"==e.type
})),a=e.map((function(e){return r.assignIn(e,{type:"people"})})),o=t.state.queryText;o&&e.forEach((function(e){o=o.replace(new RegExp(J.escapeRegExp(e.query)+" *$","i"),"")}));t.setState({queryText:o,
tokens:a.concat(n)})}))}};t.prototype.renderPeopleResults=function(){var e=this
;if(!(!this.state.isLoadingPeople||this.state.isLoadingPads||this.state.isLoadingFolders||this.state.sortedMixedResults.length>0))return x.createElement(M.PopoverListItem,{
className:"hp-list-placeholder"},x.createElement(Q.SearchResultPlaceholder,{rows:"5"}));if(!this.state.isLoadingPeople){var t=x.createElement(se,o.__assign({},ie.filterbypeople))
;return this.state.people.map((function(n,a){return x.createElement(M.PopoverListItem,{section:t,sectionKey:"people",key:"person"+a,className:"hp-list-people-item",onSelection:e.handleSelectPeople(a)
},x.createElement(V.default,{user:n}))}))}};t.prototype.renderShowMoreItem=function(e,t,n){return x.createElement(M.PopoverListItem,{section:e,sectionKey:t,className:"hp-list-show-more",
key:"show-more-"+e,onSelection:this.handleShowMore(n)},x.createElement(z.default,null))};t.prototype.sortPadsAndFoldersByLastViewed=function(e,t){var n=this,a=[].concat(e).concat(t)
;return r.sortBy(a,(function(e){if(n.isPad(e)){var t=e;return t.myLastViewedDate?new Date(t.myLastViewedDate.toString()).getTime():0}var a=e
;return a.folderView&&a.folderView.lastViewedFolderTime?new Date(a.folderView.lastViewedFolderTime.toString()).getTime():0})).reverse()};t.prototype.renderRecentPadOrFolder=function(e,t,n,a){
var o=this,r=e[t];if(this.isPad(r)){var s="".concat(a,"-").concat(r.localPadId),i=this.handleSelectPad(e,t,{padType:a}),l=this.shouldPreviewDocs()?x.createElement(Y.SmartDocPreviewCallout,{
attachment:this.props.previewPosition||"left",onMouseDown:function(e){return o.handleClickPreview(e,i)},previewLoader:this.previewLoader,localPadId:r.localPadId,target:this.itemElement[s]}):null
;return x.createElement(M.PopoverListItem,{section:n,sectionKey:a,key:s,ref:function(e){return o.itemElement[s]=D.findDOMNode(e)},className:"hp-list-doc-item selenium-hp-list-doc-item",onSelection:i
},x.createElement(O.default,{pad:r}),l)}var d="".concat(a,"-").concat(r.folder.encryptedId);return x.createElement(M.PopoverListItem,{section:n,sectionKey:a,key:d,
className:"hp-list-doc-item selenium-hp-list-doc-item",onSelection:this.handleSelectFolder(e,t,{padType:a})},x.createElement(L.default,{folder:r}))};t.prototype.renderUpcoming=function(){
for(var e=this,t=this.state.upcomingEvents.filter((function(e){return e.attachments&&e.attachments.length})).sort((function(e,t){
return new Date(e.start_time).getTime()-new Date(t.start_time).getTime()
})),a=x.createElement(se,o.__assign({},ie.upcomingMeetings)),r=[],i=this.state.isExpanded.upcoming,l=i?n.maxExpandedUpcomingToShow:n.maxUpcomingToShow,d=0,c=t;d<c.length;d++)for(var u=c[d],p=function(t){
if("paper_pad"!=t.attachment_type)return"continue";if(r.length>=l){i||r.push(h.renderShowMoreItem(a,"upcoming","upcoming"));return{value:r}}var n="upcoming-".concat(t.id)
;r.push(x.createElement(M.PopoverListItem,{key:n,section:a,sectionKey:"upcoming",ref:function(t){return e.itemElement[n]=D.findDOMNode(t)},className:"hp-list-doc-item selenium-hp-list-doc-item",
onSelection:h.handleSelectUpcomingMeeting(r.length,t,{calendarType:g.CalendarType[(0,S.getCalendarType)(u)]})},x.createElement(s.default,{event:u,attachment:t
}),x.createElement(Y.SmartDocPreviewCallout,{attachment:h.props.previewPosition||"left",previewLoader:h.previewLoader,localPadId:t.id,target:h.itemElement[n]})))
},h=this,m=0,f=u.attachments;m<f.length;m++){var y=p(f[m]);if("object"==typeof y)return y.value}return r};t.prototype.renderRecents=function(){
var e=this,t=x.createElement(se,o.__assign({},ie.recentlyviewed)),a=this.sortPadsAndFoldersByLastViewed(this.state.recentPads,this.getViewedFolders(this.state.folderData)),r=a.length>n.maxRecentsToShow&&!this.state.isExpanded.recents,s=r?a.slice(0,n.maxRecentsToShow):a.slice(0,n.maxRecentsToLoad),i=a.length>n.maxRecentsToLoad,l=s.map((function(n,a){
return e.renderRecentPadOrFolder(s,a,t,"recent")})),d=r?[this.renderShowMoreItem(t,"recent","recents")]:i?[x.createElement(q.SearchSectionShowAllButton,{section:t,sectionKey:"recent",url:"/docs",
onLinkClicked:this.props.app.onLinkClicked})]:[];return l.concat(d)};t.prototype.renderFavorite=function(){
var e=this,t=x.createElement(se,o.__assign({},ie.starred)),a=this.sortPadsAndFoldersByLastViewed(this.state.favoritePads,this.getFavoriteFolders(this.state.folderData)),r=a.length>n.maxFavoritesToShow&&!this.state.isExpanded.favorites,s=r?a.slice(0,n.maxFavoritesToShow):a.slice(0,n.maxFavoritesToLoad),i=a.length>n.maxFavoritesToLoad,l=s.map((function(n,a){
return e.renderRecentPadOrFolder(s,a,t,"favorites")})),d=r?[this.renderShowMoreItem(t,"favorites","favorites")]:i?[x.createElement(q.SearchSectionShowAllButton,{section:t,sectionKey:"favorites",
url:"/favorites",onLinkClicked:this.props.app.onLinkClicked})]:[];return l.concat(d)};t.prototype.renderNoResults=function(){return x.createElement(b.HpMenuEmptyState,{
header:x.createElement(se,o.__assign({},ie.couldntfindithere)),actionButton:x.createElement(P.HpMenuEmptyStateActionButton,{onClick:this.handleClickSearchDropboxFolders,
buttonText:x.createElement(se,o.__assign({},ie.searchmyDropboxfolders))}),newIllustration:x.createElement(N.LookMagnifyingGlassSpot,null)})};t.prototype.getMixedScoreForPad=function(e,t){
if(this.state.orderBy==T.SearchSortingOption.RecentlyEdited&&e&&e.lastEditedDate)return new Date(e.lastEditedDate).getTime();var n=_(e.title),a=_(e.collatedQuery||t)
;return U.getWeightedMatchPercentage(a,n)};t.prototype.getMixedScoreForFolder=function(e,t){
if(this.state.orderBy==T.SearchSortingOption.RecentlyEdited&&e&&e.folder&&e.folder.lastActivityDate)return new Date(e.folder.lastActivityDate).getTime();var n=_(e.folder.name),a=_(t)
;return U.getWeightedMatchPercentage(a,n)};t.prototype.getMixedPadAndFolderResults3=function(e,t,n){for(var o=[],r=0,s=0;r<t.length||s<n.length;){
var i=r<t.length?1*this.getMixedScoreForPad(t[r],e):null,l=s<n.length?.9*this.getMixedScoreForFolder(n[s],e):null;if(null==l||null!=i&&i>=l){o.push({type:a.Pad,score:i,pad:t[r]});r++}else{o.push({
type:a.Folder,score:l,folder:n[s]});s++}}return o};t.prototype.renderPadAndFolderResults=function(){var e=this,t=x.createElement(se,o.__assign({values:{
numberOfResults:this.state.numberOfResultsFound.total}
},ie.searchresultsnumberOfResultsnumber)),n=this.state.numberOfResultsFound.total>this.state.numberOfResultsLoaded.total,s=this.state.sortedMixedResults
;if(0==s.length&&(this.state.isLoadingPads||this.state.isLoadingFolders||this.state.isLoadingPeople||n))return x.createElement(M.PopoverListItem,{section:"",className:"hp-list-placeholder"
},x.createElement(Q.SearchResultPlaceholder,{rows:"5"}));s.forEach((function(e){e.scores={type:e.type,solr:e.type==a.Pad?e.pad.score:e.folder.score,title:e.score}}))
;var i=r.map(s,"scores"),l=x.createElement(M.PopoverListSectionMenu,{section:t,sectionKey:"mixed",menu:null}),d=s.map((function(n,o){
var r,l="mixed-"+(n.type==a.Pad?n.pad.localPadId:n.folder.folder.encryptedId),d=e.handleSelectMixed(s,o,{scoreList:i,padType:n.type==a.Pad?"pad-result":"folder-result"
}),c=e.shouldPreviewDocs()&&n.type==a.Pad?x.createElement(Y.SmartDocPreviewCallout,{attachment:e.props.previewPosition||"left",onMouseDown:function(t){return e.handleClickPreview(t,d)},
previewLoader:e.previewLoader,localPadId:n.pad.localPadId,target:e.itemElement[l]}):null,u=n.type==a.Pad&&[x.createElement(j.SearchResultDocItem,{key:l,pad:n.pad,appProxy:e.props.app
}),c],p=n.pad&&n.pad.padType==g.PadType.customTemplate&&[x.createElement(K.default,{key:l,pad:n.pad,originalQuery:n.pad.originalQuery}),c]
;r=n.type==a.Pad?p||u:x.createElement(W.SearchResultFolderItem,{folder:n.folder,appProxy:e.props.app});return x.createElement(M.PopoverListItem,{section:t,sectionKey:"mixed",key:l,ref:function(t){
return e.itemElement[l]=D.findDOMNode(t)},className:"hp-list-doc-item selenium-hp-list-doc-item",onSelection:d},r)})).concat(n?[this.renderShowMoreItem(t,"mixed","mixed")]:[])
;return d.length>0?[l].concat(d):[]};t.prototype.renderCollatedQuery=function(){var e=this.state.spellcheck.suggestions,t=this.state.queryText,n=0,a=[];if(0==r.size(e))return[x.createElement("span",{
className:"hit"},this.state.spellcheck.collation)];e.forEach((function(e){var o=e.startOffset,r=e.endOffset,s=e.topSuggestion;n<o&&a.push(t.substring(n,o));a.push(x.createElement("span",{
className:"hit"},s));n=r}));n<t.length&&a.push(t.substring(n));return a};t.prototype.renderSpellingSuggestion=function(){
return this.state.spellcheck.isCollatedQuery?x.createElement(M.PopoverListItem,{section:null,sectionKey:"spellcheck",key:"spellcheck",className:"hp-list-spellcheck-item",
onSelection:this.searchWithOriginalQuery},x.createElement("div",{className:"hp-list-item"},x.createElement("div",{className:"hp-list-item-content notranslate"},x.createElement(se,o.__assign({values:{
collatedQuery:x.createElement("span",{className:"notranslate"},this.renderCollatedQuery()),originalQuery:x.createElement("span",{className:"collation notranslate"},this.state.queryText)}
},ie.searchingforcollatedQuerySearchoriginalQueryinstead))))):x.createElement(M.PopoverListItem,{section:null,sectionKey:"spellcheck",key:"spellcheck",className:"hp-list-spellcheck-item",
onSelection:this.selectSpellcheckHandler},x.createElement("div",{className:"hp-list-item"},x.createElement("div",{className:"hp-list-item-content notranslate"},x.createElement(se,o.__assign({values:{
collatedQuery:x.createElement("span",{className:"collation notranslate"},this.renderCollatedQuery())}},ie.didyoumeancollatedQuery)))))};t.prototype.renderSearchDropdownContents=function(){
if(!de(this.state,this.props.resultsPopoverShouldIgnoreFocusState))return[];var e;if(this.state.isWaitingForRefreshing)(e=[x.createElement(M.PopoverListItem,{className:"hp-list-placeholder"
},x.createElement(Q.SearchResultPlaceholder,{rows:"1"}))]).push(x.createElement(M.PopoverListItem,{className:"hp-list-placeholder"},x.createElement(Q.SearchResultPlaceholder,{rows:"5"
})));else if(ce(this.state)){var t=[];t.push(this.renderPadAndFolderResults());t.push(this.renderPeopleResults());e=t.every((function(e){return Array.isArray(e)&&r.isEmpty(e)
}))?this.renderNoResults():t}else e=[this.renderUpcoming(),this.renderRecents(),this.renderFavorite()];return e};t.prototype.render=function(){
var e=this,t=de(this.state,this.props.resultsPopoverShouldIgnoreFocusState),n=this.props.halfCollapse&&!t,a=i("dmc-combobox","hp-search-combobox",{"hp-search-collapsible":this.props.collapsible,
"hp-search-focused":this.state.focused,"hp-search-half-collapse":n,"dmc-combobox-open":t,"dmc-combobox-child-focused":t&&null!==this.state.highlightedId});return x.createElement("div",{className:a,
role:"search"},x.createElement(H.SearchBox,{ref:function(t){return e.searchInput=t},collapsible:this.props.collapsible,onChange:this.handleInputChange,onClear:this.handleClearInput,
onKeyDown:this.handleInputKeyDown,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,tokens:n?null:this.state.tokens,removeTokenByIndex:this.removeTokenByIndex,
value:n?null:this.state.queryText,searchHotkeyHandler:this.focusForSearchHotkey,isOffline:this.props.isOffline}),x.createElement(M.PopoverList,{
className:"dmc-combobox-popover hp-search-result-list selenium-hp-search-result-list",ref:function(t){return e.searchPopoverList=D.findDOMNode(t)},open:t,
onHighlightChanged:this.handleHighlightChanged,onMouseDown:this.handleMouseDownOnPopover,"aria-hidden":!t,id:this.state.listId},this.renderSearchDropdownContents()))};t.prototype.isPad=function(e){
return void 0!==e.localPadId};t.prototype.setLoadingDebounced=function(e,t,n){var a=this;if(this.timeoutHandles[e]){clearTimeout(this.timeoutHandles[e]);this.timeoutHandles[e]=null}
this.timeoutHandles[e]=this.timers.setTimeout((function(){var n;a.state.queryText==t&&a.setState(((n={})[e]=!0,n))}),n)};t.prototype.resetSelectedIndex=function(){if(this.searchPopoverList){
var e=new Event("resetHighlightedIndex");this.searchPopoverList.dispatchEvent(e)}};t.prototype.searchCompleteCallBack=function(e,t,a){void 0===a&&(a=!0);e.mark(c.Marks.TIME_TO_INTERACTIVE);e.send()
;if(this.shouldPreviewDocs()&&a){var o=r.map(t.pads,"localPadId");this.previewLoader.clearPreloadQueue();this.previewLoader.schedulePreload(o.slice(0,n.topNDocsToPreload))}}
;t.prototype.getPeopleTokens=function(){return this.state.tokens.filter((function(e){return"people"==e.type}))};t.prototype.getStatusTokens=function(){
return this.state.tokens.filter(this.isStatusToken)};t.prototype.isStatusToken=function(e){return"status"==e.type};var n;t.displayName="SearchComboBox";t.numberOfResultsToLoadEachTime=20
;t.numberOfResultsToLoadFirstTime=6;t.maxRecentsToShow=5;t.maxRecentsToLoad=10;t.maxFavoritesToShow=5;t.maxFavoritesToLoad=10;t.maxUpcomingToShow=2;t.maxExpandedUpcomingToShow=10
;t.maxTemplatesToShow=2;t.maxFoldersToShow=3;t.maxPadResults=5;t.maxMixedResultsToShow=9;t.maxMixedResultsToLoad=15;t.maxExpandedPadResults=20;t.topNDocsToPreload=5;t.loadingShortDelay=0
;t.loadingLongDelay=600;t.childContextTypes={ariaComboBox:F.object};t.contextTypes={stores:F.object.isRequired,panels:F.object};return t=n=o.__decorate([y.default,ee.trackContextDecorator],t)
}(x.Component);t.SearchComboBox=ue},386:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.ControlledWalkthroughGuideWidget=t.WalkthroughGuideWidget=void 0
;var a=n(1),o=n(6),r=n(887),s=n(21),i=n(3),l=n(15),d=n(2),c=n(888),u=n(10),p=n(73),h=n(252),m=n(27),f=n(0),g=n(52),y=n(35),v=n(16),E=(0,n(5).PaperIntlFactory)().F,_=(0,d.defineMessages)({
showmoretips:{id:"yRwEN0",defaultMessage:"Show more tips"}}),S=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={closed:!1};t.handleChange=function(e){
t.setState({closed:e})};return t}t.prototype.render=function(){var e=this.props,t=e.children,n=a.__rest(e,["children"]);return f.createElement(C,a.__assign({closed:this.state.closed,
onChange:this.handleChange},n),t)};t.displayName="WalkthroughGuideWidget";return t}(f.Component);t.WalkthroughGuideWidget=S;var C=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.state={currentStep:-1,status:[]};t.initializeState=function(){t.props.getCompletedSteps((function(e){var n=o.map(t.props.stepNames,(function(t){
return e.indexOf(t)>=0}));if(-1==n.indexOf(!1))t.props.onComplete();else{t.setState({currentStep:0,status:n});t.props.closed&&t.props.show&&t.props.onChange(!1)}
t.props.onInitializationComplete&&t.props.onInitializationComplete()}))};t.moveToStep=function(e){if(e<0||e>=t.state.status.length)t.props.onComplete();else{t.state.status[e]||t.completeStep(e)
;t.state.currentStep!==e&&t.setState({currentStep:e})}};t.moveToNextStep=function(){var e=t.state.status.indexOf(!1);t.moveToStep(e)};t.onClosedBarClicked=function(){t.props.onChange(!1)
;t.moveToNextStep()};t.onCloseClicked=function(){if(t.props.completeOnClose||-1==t.state.status.indexOf(!1))t.props.onComplete();else{t.props.onChange(!0);var e=t.state.status.indexOf(!1);t.setState({
currentStep:e})}};t.viewAllTips=function(){t.props.app instanceof h.default&&t.props.app.getAssistMenuButton().openTip()};return t}t.prototype.componentDidMount=function(){this.initializeState()}
;t.prototype.componentDidUpdate=function(e,t){if(!e.show&&this.props.show){this.props.closed&&this.props.onChange(!1);this.moveToNextStep();var n=this.props.app.getMainAce()
;n&&n.selection.focusOn(n.selection.getEnd())}};t.prototype.completeStep=function(e){var t=this;this.props.onStepComplete(this.props.stepNames[e],(function(){}),(function(){t.state.status[e]=!1
;t.setState({status:t.state.status})}));this.state.status[e]=!0;this.setState({status:this.state.status})};t.prototype.renderOpenState=function(){
var e=this,t=i("ob-walkthrough-guide-container","ob-walkthrough-guide-container-dig",{"ob-walkthrough-guide-container-original":!this.props.darkMode});return f.createElement("div",{className:t
},f.createElement("div",{className:"ob-walkthrough-guide-header"},f.createElement(y.Title,{size:"small",inverse:!0},this.props.header),f.createElement(s.default,{isIcon:!0,inverse:!0,
variant:"transparent",className:"selenium-ob-walkthrough-guide-close ob-walkthrough-guide-header-button ob-walkthrough-guide-header-x",onClick:this.onCloseClicked},f.createElement(v.UIIcon,{
src:l.CloseLine}))),f.createElement("div",{className:"ob-walkthrough-guide-body"},o.map(this.state.status,(function(t,n){
var a=e.props.stepNames[n],o=e.props.guideStepContents[a],r=e.props.hasCarousel?o.icon:void 0,s=e.props.hasCarousel?o.carouselMetadata:void 0;return f.createElement(b,{
key:"WalkthroughGuideEntry-idx-"+n,stepNo:n,checked:t,darkMode:e.props.darkMode,closed:n!==e.state.currentStep,stepName:a,title:o.title,icon:r,caption:o.caption,src:o.src,skip2x:o.skip2x,
onEntryClicked:e.moveToStep,carouselMetadata:s})}))),!this.props.darkMode&&f.createElement("div",{className:"ob-walkthrough-guide-footer"},f.createElement(u.default,{href:"#tips",
onClick:this.viewAllTips,"track-title":"View all tips"},f.createElement(E,a.__assign({},_.showmoretips)))))};t.prototype.render=function(){if(!this.props.show)return null
;var e=this.props.stepNames[this.state.currentStep],t=this.props.hasCarousel&&e&&this.props.guideStepContents[e]?this.props.guideStepContents[e].icon:void 0
;return this.props.closed?f.createElement(I,{stepTitle:this.props.guideStepContents[e].title,stepIcon:t,onClosedBarClick:this.onClosedBarClicked}):this.renderOpenState()}
;t.displayName="ControlledWalkthroughGuideWidget";return t}(f.PureComponent);t.ControlledWalkthroughGuideWidget=C;var b=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.onEntryClicked=function(){t.props.onEntryClicked(t.props.stepNo)};return t}t.prototype.render=function(){
var e=i("ob-walkthrough-guide-entry-button-content",{"ob-walkthrough-guide-entry-button-content-closed":this.props.closed}),t=(0,g.default)(this.props.src),n="mp4"==(0,
m.parseFileExtension)(this.props.src).extension?f.createElement("video",{className:"ob-walkthrough-guide-entry-gif",autoPlay:!0,loop:!0,muted:!0,controls:!1,src:t}):f.createElement(p.default,{
className:"ob-walkthrough-guide-entry-gif",src:this.props.src,skip2x:this.props.skip2x});return f.createElement("div",{className:"ob-walkthrough-guide-entry"},f.createElement("a",{className:e,
href:"#step"+this.props.stepNo},f.createElement(s.default,{size:"large",inverse:!0,hasNoUnderline:!0,className:"ob-walkthrough-guide-entry-button",onClick:this.onEntryClicked,variant:"transparent",
"track-title":this.props.stepName},f.createElement("div",null,f.createElement("div",{className:e},f.createElement("div",{className:"ob-walkthrough-guide-entry-title"
},this.props.icon,this.props.title),f.createElement(v.UIIcon,{src:this.props.closed?l.ChevronRightLine:l.ChevronDownLine}))))),!this.props.closed&&(this.props.carouselMetadata?f.createElement(P,{
carouselMetadata:this.props.carouselMetadata}):f.createElement(f.Fragment,null,n,!!this.props.caption&&f.createElement("div",{className:"ob-walkthrough-guide-entry-caption"},f.createElement(y.Text,{
inverse:!0,color:"faint"},this.props.caption)))))};t.displayName="WalkthroughGuideEntry";return t}(f.PureComponent),P=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.cardRefs={};return t}t.prototype.render=function(){var e=this,t=this.props.carouselMetadata.map((function(t,n){
return f.createElement(c.GifCarouselCard,{key:n,ref:function(t){e.cardRefs[n]=t},classNamePrefix:"walkthrough-guide-carousel",idx:n,name:"walkthrough-guide-carousel-"+n,url:t.src,onEnded:function(){
return e.carousel.moveToNextCard(n)}},f.createElement("div",{className:"walkthrough-guide-carousel-caption"},f.createElement(y.Text,{inverse:!0,color:"faint"},t.caption)))}))
;return f.createElement(r.AutoScrollingCardCarousel,{className:"walkthrough-guide-carousel",ref:function(t){e.carousel=t},cards:t,cardRefs:this.cardRefs,disableKeyboardShortcuts:!0})}
;t.displayName="WalkthroughGuideCarousel";return t}(f.PureComponent),I=function(e){return f.createElement("div",{
className:"ob-walkthrough-guide-container-closed ob-walkthrough-guide-container-closed-dig"},f.createElement(s.default,{className:"ob-walkthrough-guide-closed",onClick:e.onClosedBarClick,
"track-title":"Closed bar",size:"large",variant:"primary"},f.createElement("div",{className:"ob-walkthrough-guide-container-wrapper"},f.createElement("div",{
className:"ob-walkthrough-guide-entry-title"},e.stepIcon,e.stepTitle),f.createElement(v.UIIcon,{src:l.ChevronUpLine}))))}},471:function(e,t,n){var a;Object.defineProperty(t,"__esModule",{value:!0})
;t.shouldUserSeeMeetingNotesOnboarding=void 0;var o=n(1),r=n(4),s=n(2),i=n(157),l=n(23),d=n(40),c=n(248),u=n(0),p=n(244),h=n(37),m=n(7),f=n(4),g=n(17),y=n(386),v=(0,n(5).PaperIntlFactory)().F,E=(0,
s.defineMessages)({offtoaflyingstart:{id:"FbhLKc",defaultMessage:"Off to a flying start"},ourmeetingtemplategetsyougoingquick:{id:"kCKPrC",defaultMessage:"Our meeting template gets you going quick."},
pushtheaction:{id:"Cz1UgN",defaultMessage:"Push the action"},assigntodosandaddduedatestogetstuffdone:{id:"TxU2bf",defaultMessage:"Assign to-dos and add due dates to get stuff done."},
workbettertogether:{id:"W6nejw",defaultMessage:"Work better, together"},sharethedoctokeepyourcolleaguesintheloop:{id:"EnT5L7",defaultMessage:"Share the doc to keep your colleagues in the loop."},
makeyourmeetingsmove:{id:"YptN2I",defaultMessage:"Make your meetings move"}});t.shouldUserSeeMeetingNotesOnboarding=function(){var e=g.default.getQueryParams()
;return!(!e[c.QueryParamNames.CREATE_MEETING_NOTE_FROM_TRAY]&&!e[c.QueryParamNames.MEETING_ONBOARDING])};var _=function(){function e(){}e.Speedy="assistant-tray-meeting-notes-speedy"
;e.Action="assistant-tray-meeting-notes-action";e.Collaborate="assistant-tray-meeting-notes-collaborate";return e}(),S=((a={})[_.Speedy]={title:u.createElement(v,o.__assign({},E.offtoaflyingstart)),
caption:u.createElement(v,o.__assign({},E.ourmeetingtemplategetsyougoingquick)),src:"/static/img/composer/onboarding/assistant-tray-meeting-notes/meeting-support.png",skip2x:!1},a[_.Action]={
title:u.createElement(v,o.__assign({},E.pushtheaction)),caption:u.createElement(v,o.__assign({},E.assigntodosandaddduedatestogetstuffdone)),
src:"/static/img/composer/onboarding/assistant-tray-meeting-notes/todo.mp4",skip2x:!1},a[_.Collaborate]={title:u.createElement(v,o.__assign({},E.workbettertogether)),
caption:u.createElement(v,o.__assign({},E.sharethedoctokeepyourcolleaguesintheloop)),src:"/static/img/composer/onboarding/assistant-tray-meeting-notes/share-doc.mp4",skip2x:!1},
a),C=[_.Speedy,_.Action,_.Collaborate],b=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={initialized:!1,closed:!1};t.getCompletedSteps=function(e){
t.context.onboardingStore.getCompleted((function(t){e(t)}))};t.handleWidgetChange=function(e){t.state.closed!==e&&t.setState({closed:e});if(e){f.IntentionEvent.OnboardingTrayMeetingNoteClosed.track()
;t.complete()}};t.onInitializationComplete=function(){t.setState({initialized:!0},t.notifyOnChange)};t.onStepComplete=function(e,n,a){t.context.onboardingStore.markCompleted(e,n,a)}
;t.handleComplete=function(){f.IntentionEvent.OnboardingTrayMeetingNoteClosed.track();t.complete()};return t}t.prototype.bindEvents=function(){};t.prototype.checkReady=function(){
return!!(this.props.padController&&this.props.editor&&this.state.initialized)};t.prototype.render=function(){var e=u.createElement(v,o.__assign({},E.makeyourmeetingsmove))
;return u.createElement(r.TrackContext,{trackContext:r.AppContext.Onboarding.AssistantTrayMeetingNotes},u.createElement(y.ControlledWalkthroughGuideWidget,{app:this.props.app,completeOnClose:!1,
darkMode:!0,getCompletedSteps:this.getCompletedSteps,guideStepContents:S,hasCarousel:!1,header:e,onInitializationComplete:this.onInitializationComplete,onComplete:this.handleComplete,
closed:this.state.closed,onChange:this.handleWidgetChange,onStepComplete:this.onStepComplete,show:!!this.props.isCurrent,stepNames:C}))};t.displayName="AssistantTrayMeetingNotes";t.defaultProps={
name:m.TourStopNames.AssistantTrayMeetingNotes,rateLimitingBucket:h.RateLimitingBucket.NotRateLimited};t.contextTypes={onboardingStore:l.instanceOf(i.default).isRequired,
tourMachine:l.instanceOf(p.default).isRequired};return t=o.__decorate([d.default],t)}(h.default);t.default=b},488:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(140),r=n(8),s=n(2),i=n(7),l=n(172),d=n(10),c=n(4),u=n(89),p=n(1779),h=n(0),m=n(36),f=n(379),g=n(71),y=n(23),v=n(5),E=n(90),_=n(1780),S=n(66),C=(0,v.PaperIntlFactory)().F,b=(0,
s.defineMessages)({unabletomovedoc:{id:"OkV8ib",defaultMessage:"Unable to move doc"},unabletomovedocument:{id:"sW+lqj",defaultMessage:"Unable to move document"},movetemplate:{id:"EDKy45",
defaultMessage:"Move template"},movedoc:{id:"lPDDYS",defaultMessage:"Move doc"},movedocument:{id:"yNbmrg",defaultMessage:"Move document"},addtofolder:{id:"v62WDv",defaultMessage:"Add to folder"},
movetofolder:{id:"p+Enby",defaultMessage:"Move to folder"}}),P=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.handleFolderSelectConfirm=function(e,n){var o,r
;if(e){var s=t.props.padController,d=s.folderStore;c.IntentionEvent.MovePadToFolder.track(a.__assign({context:t.getTrackContext(),is_public:e.folder.guestPolicy==i.FolderGuestPolicy.public,
padType:s.getPadType()},(0,l.default)(e)));(0,c.trackUi)("Move pad started",{folderNewlyCreated:n,context:t.getTrackContext(),padType:s.getPadType()});d.changeFolder(e,{isConfirmed:!1})
}else null===(r=(o=t.props).handleRemoveFromFolder)||void 0===r||r.call(o)};t.handleFolderSelectCancel=function(){(0,c.trackUi)("Move pad cancelled",{context:t.getTrackContext(),
padType:t.props.padController.getPadType()})};t.handleClick=function(e){e.preventDefault();if((0,u.isUserInPurgatory)(t.props.padController.isCloudDoc())){var n=document.createElement("div")
;document.body.appendChild(n);m.reactDomRender(h.createElement(g.ToastAndUnmountErrorBoundary,null,h.createElement(p.MoveWarningPopup,{isCloudDoc:t.props.padController.isCloudDoc(),
continueToMove:t.showFolderSelector})),n)}else t.showFolderSelector();t.props.onClick&&t.props.onClick(e)};t.showFolderSelector=function(){t.props.padController.isCloudDoc()?(0,
S.isApollo)()?t.showFolderSelectorForDesktop():t.context.panels.open("filemover"):t.showFolderSelectorForLegacyDoc()};t.showFolderSelectorForDesktop=function(){
var e,n=h.createElement(C,a.__assign({},b.unabletomovedoc)),o=t.props.padController,r={cloud_doc_id:o.padClientVars.cloudDocId,name:"".concat(o.title,".paper")},s=new Dropbox.Mover({
appKey:Dropbox.appKey,accountId:null===(e=o.myUserInfo)||void 0===e?void 0:e.dropboxAccountId,entries:[r],initialFolderSelection:t.props.dropboxParentPath||"",showSearchBar:!0,onError:function(e){
E.errorModal({title:n})},onSuccess:function(){o.refetchFilesystemInfo()}});(0,_.open)({dropin:s})};t.showFolderSelectorForLegacyDoc=function(){var e;if(t.props.padController.isPadTemplate()){
c.IntentionEvent.AddTemplateToFolderClick.track({context:t.getTrackContext()});e=h.createElement(C,a.__assign({},b.movetemplate))}else e=h.createElement(C,a.__assign({},b.movedoc))
;var n=h.createElement(C,a.__assign({},b.addtofolder));r.default.isPersonalDomainUser||(n=h.createElement(C,a.__assign({},b.movetofolder)));var o,s=t.props.addNotMove?n:e
;t.props.title&&(s=t.props.title);t.props.padController.isDocsExternallySharable()||(o=t.props.padController.getPadEncryptedDomainId());(0,
f.default)(s,t.props.stores,t.handleFolderSelectConfirm,t.handleFolderSelectCancel,{allowRoot:!1,trackContext:t.getTrackContext(),addNotMove:t.props.addNotMove,requireDomainId:o,
folderData:t.props.folderData,baseFolder:t.props.baseFolder})};return t}t.prototype.getTrackContext=function(){};t.prototype.render=function(){return this.props.isMenuItem?h.createElement(o.default,{
onClick:this.handleClick,className:this.props.className,disabled:this.props.disabled},this.props.children):h.createElement(d.default,{primary:this.props.primary,secondary:this.props.secondary,
role:this.props.role,onClick:this.handleClick,className:this.props.className,disabled:this.props.disabled},this.props.children)};t.contextTypes={panels:y.object};t.displayName="MovePadButton"
;return t=a.__decorate([c.trackContextDecorator],t)}(h.Component);t.default=P},493:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.LoggedOutLeftHeader=t.SIGN_IN_URL=void 0
;var a=n(1),o=n(4),r=n(322),s=n(8),i=n(381),l=n(11),d=n(1830),c=n(494),u=n(277),p=n(620),h=n(202),m=n(397),f=n(23),g=n(0),y=n(382),v=n(651),E=n(63),_=n(13),S=n(251),C=n(323),b=n(278)
;t.SIGN_IN_URL="/paper/ep/account/sign-in";var P=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e
;this.props.padController&&(e=this.renderMain());return g.createElement("div",{id:"main-header-container",className:"hp-header"},g.createElement("header",{id:"main-header"
},g.createElement("div",null,e)),g.createElement("div",{id:"under-main-header"}))};t.prototype.componentDidMount=function(){s.default.isSignedIn()||o.IntentionEvent.LopsVisitPad.track()}
;t.prototype.renderMain=function(){var e,t=this.props,n=t.app,a=t.padController,i=t.showSidebarButton,l=null,u=null;if(s.default.isSignedIn()&&a.folderStore){u=g.createElement(r.default,{app:n,
behavior:r.BackButtonBehavior.LastHistoryItem});l=g.createElement(d.default,{localPadId:this.props.localPadId,padController:a,stores:this.context.stores,showSidebarButton:i})
}else l=g.createElement(I,null);var p,h=i?g.createElement(C.default,{padController:this.props.padController,sidebarWrapper:this.props.folderSidebarWrapper,isSidebarOpen:this.props.isSidebarOpen,
inSidebar:!1}):null;if(s.default.isSignedIn())p=g.createElement(T,{app:n,padController:a,localPadId:this.props.localPadId,padType:this.props.padType,initiallyFavorite:a.isPadFavorited(),
folderData:this.props.folderData,mainAce:this.props.mainAce,stores:this.context.stores});else{var m=null===(e=null==a?void 0:a.peopleList)||void 0===e?void 0:e.getGuestPolicySpec()
;p="link"===(null==m?void 0:m.publicGuestPolicy)?g.createElement(c.LoggedOutRightHeaderEdit,null):g.createElement(c.default,null)}return g.createElement(o.TrackContext,{
trackContext:o.AppContext.PadHeader},u,h,g.createElement("div",{className:"header-reserve-space"}),l,p)};t.displayName="EditorHeader";t.contextTypes={stores:f.object.isRequired}
;return t=a.__decorate([l.default,b.default],t)}(g.PureComponent);t.default=P;var I=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.render=function(){return g.createElement("div",{className:"main-header-left main-header-left-logged-out"},g.createElement("div",{className:"hp-sidebar-top hp-header-top-logo"
},g.createElement(h.default,{responsive:!0,href:"/"})))};t.displayName="LoggedOutLeftHeader";return t}(g.Component);t.LoggedOutLeftHeader=I;var T=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.state={searchExpanded:!1};t.handleSearchCollapsed=function(){t.timers.setTimeout((function(){t.setState({searchExpanded:!1})}),150)}
;t.handleSearchExpanded=function(){t.setState({searchExpanded:!0})};return t}t.prototype.getTrackContext=function(){return""};t.prototype.renderDocHeader=function(){
if(this.state.searchExpanded)return null;var e,t=this.props,n=t.app,a=t.padController,o=t.folderData,r=t.localPadId,s=t.mainAce,i=t.stores;a.peopleList&&s&&(e=g.createElement(v.default,{key:"sharing",
padController:a,stores:i,mainAce:s,peopleList:a.peopleList}));var l=null;s&&(l=s.contents);return g.createElement(g.Fragment,null,e,g.createElement(m.default,{padId:r,app:n,contents:l
}),g.createElement(u.MoreMenu,{padController:a,folderData:o,serverDBStatusStore:this.props.stores.serverDBStatus,app:n}),g.createElement("div",{className:"main-header-divider"}))}
;t.prototype.renderAppLevelControls=function(){var e=this.props,t=e.app,n=e.padController,a=e.localPadId,o=e.stores,r=g.createElement(_.default,{name:"plus-header"
}),s=t.createNewPadButton(this.getTrackContext(),r),l=E.isOnButDoNotLog("paper_combined_search")?g.createElement(i.DropboxSearchComboBox,{app:t,collapsible:!0,onCollapsed:this.handleSearchCollapsed,
onExpanded:this.handleSearchExpanded}):g.createElement(y.SearchComboBox,{app:t,collapsible:!0,onCollapsed:this.handleSearchCollapsed,onExpanded:this.handleSearchExpanded})
;return g.createElement(g.Fragment,null,l,g.createElement(S.default,null),g.createElement(p.default,{app:t,currentLocalPadId:a,padController:n,stores:o}),s)};t.prototype.render=function(){
return g.createElement("div",{className:"main-header-right"},this.renderDocHeader(),this.renderAppLevelControls())};t.displayName="LoggedInRightHeader"
;return t=a.__decorate([l.default,o.trackContextDecorator],t)}(g.PureComponent)},494:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.LoggedOutRightHeaderEdit=t.getUrl=t.LoggedOutPadPageRedirect=void 0;var a,o=n(1),r=n(21),s=n(281),i=n(47),l=n(2),d=n(101),c=n(1836),u=n(0),p=n(4),h=n(49),m=n(29),f=(0,
n(5).PaperIntlFactory)().F,g=(0,l.defineMessages)({signin:{id:"raLp6W",defaultMessage:"Sign in"},signup:{id:"C4FJfI",defaultMessage:"Sign up"},edit:{id:"UwFkjc",defaultMessage:"Edit"}});!function(e){
e.PAPER_SIGNUP="/paper/signup";e.PAPER_SIGNIN="/paper/signin";e.PAPER_REGISTER="/paper/register"}(a=t.LoggedOutPadPageRedirect||(t.LoggedOutPadPageRedirect={}));t.getUrl=function(e,t){
var n=h.URI.parse(i.default.href).toString(),r={signup_tag:(0,c.getSignupTagFromUrl)(n),cont:n,email:t},s=h.URI.parse(d.dropboxUrl(a.PAPER_REGISTER));s.setQuery(r)
;if(e==a.PAPER_REGISTER)return s.toString();var l=h.URI.parse(d.dropboxUrl(e));l.setQuery(o.__assign(o.__assign({},r),{fallback:s.toString()}));return l.toString()};var y=function(e){
void 0===e&&(e="");p.IntentionEvent.LopsHeaderSignIn.track();m.locationAssign("header-LoggedOutRightHeader-signIn",(0,t.getUrl)(a.PAPER_SIGNIN,e))},v=function(e){void 0===e&&(e="")
;p.IntentionEvent.LopsHeaderSignUp.track();m.locationAssign("header-LoggedOutRightHeader-signUp",(0,t.getUrl)(a.PAPER_SIGNUP,e))},E=function(e){return u.createElement(s.ButtonGroup,null,(function(t){
var n=t.getButtonProps;return u.createElement("div",{className:"main-header-right-logged-out"},u.createElement(r.default,o.__assign({},n({variant:"primary"}),{onClick:e.onSignInClick||function(){
return y()}}),u.createElement(f,o.__assign({},g.signin))),u.createElement(r.default,o.__assign({},n({variant:"outline"}),{id:"header-sign-up-button",onClick:e.onSignUpClick||function(){return v()}
}),u.createElement(f,o.__assign({},g.signup))))}))};E.displayName="LoggedOutRightHeader";t.default=E;var _=function(e){o.__extends(n,e);function n(n){var o=e.call(this,n)||this
;o.defaultSignUpClick=function(){return v(o.state.email)};o.defaultSignInClick=function(){return y(o.state.email)};o.defaultEditClick=function(){return function(e){void 0===e&&(e="")
;p.IntentionEvent.LopsHeaderEdit.track();m.locationAssign("header-LoggedOutRightHeader-edit",(0,t.getUrl)(a.PAPER_REGISTER,e))}(o.state.email)};o.state={email:""};return o}
n.prototype.componentWillMount=function(){if(0===this.state.email.length){var e=i.default.searchTupleArray.filter((function(e){return"email"==e[0]})),t=void 0;if(e.length){t=e[0][1];this.setState({
email:decodeURIComponent(t)})}}};n.prototype.render=function(){var e=this;return u.createElement(p.TrackContext,{trackContext:p.AppContext.PadHeader.LoggedOutEdit},u.createElement("div",{
className:"main-header-right-logged-out"},u.createElement(s.ButtonGroup,null,(function(t){var n=t.getButtonProps;return u.createElement("div",null,u.createElement(r.default,o.__assign({},n({
variant:"transparent"}),{hasNoUnderline:!0,id:"header-sign-up-button",onClick:e.props.onSignUpClick||e.defaultSignUpClick
}),u.createElement(f,o.__assign({},g.signup))),u.createElement(r.default,o.__assign({},n({variant:"outline"}),{onClick:e.props.onSignInClick||e.defaultSignInClick
}),u.createElement(f,o.__assign({},g.signin))))})),u.createElement("span",{className:"main-header-right-divider"}),u.createElement(r.default,{variant:"primary",onClick:this.defaultEditClick
},u.createElement(f,o.__assign({},g.edit)))))};n.displayName="LoggedOutRightHeaderEdit";return n}(u.Component);t.LoggedOutRightHeaderEdit=_},518:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});t.SectionMoverMethods=t.SectionMoverProps=t.SectionMoverLazy=void 0;var a=n(1),o=n(0),r=n(1833),s=n(1834);Object.defineProperty(t,"SectionMoverProps",{enumerable:!0,get:function(){
return s.SectionMoverProps}});Object.defineProperty(t,"SectionMoverMethods",{enumerable:!0,get:function(){return s.SectionMoverMethods}});t.SectionMoverLazy=o.forwardRef((function(e,t){
var n=o.useState(!1),s=n[0],i=n[1];o.useEffect((function(){(function(){if(r.SectionMoverLoadableLib.isLoaded())return Promise.resolve()
;return r.SectionMoverLoadableLib.load().catch((function(){})).then((function(){}))})().then((function(){return i(!0)}))}),[]);if(!s)return null;var l=r.SectionMoverLoadableLib.get().SectionMover
;return o.createElement(l,a.__assign({},e,{ref:t}))}));t.SectionMoverLazy.displayName="SectionMoverLazy";t.SectionMoverLazy.displayName="SectionMoverLazy"},613:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.getInstance=t.synchronousRunner=void 0;var a=n(1),o=n(26),r=n(1541),s=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.workers_=null;t.resolveMap={};t.resolveFuncId=0;return t}t.prototype.init=function(){var e=this;if(!this.workers_){this.workers_=[]
;for(var n=0;n<t.WORKERS_COUNT_;n++){var a=new Worker(o.default.fuzzySearchWebWorkerUrl);a.onmessage=function(t){e.resolveMap[t.data.resolveId](t.data);delete e.resolveMap[t.data.resolveId]}
;this.workers_.push(a)}}};t.prototype.maxChunks=function(){return t.WORKERS_COUNT_};t.prototype.searchChunk=function(e,t,n){var a=this
;if(!this.workers_)throw new Error("must call init before searchChunk");var o=this.workers_[n];return new Promise((function(n){a.resolveFuncId++;a.resolveMap[a.resolveFuncId]=function(t){
for(var a=t.matchingWords,o=0;o<a.length;o++)a[o].word=e[a[o].index];n(a)};o.postMessage({words:e.map((function(e){return e.word.toLowerCase()})),query:t.toLowerCase(),resolveId:a.resolveFuncId})}))}
;t.WORKERS_COUNT_=4;return t}(function(){function e(){}e.prototype.init=function(){throw Error("abstract")};e.prototype.searchChunk=function(e,t,n){throw Error("abstract")}
;e.prototype.maxChunks=function(){throw Error("abstract")};e.prototype.chunkArray=function(t,n){var a=[]
;if(t.length<e.MIN_ITEMS_FOR_CHUNKING)a.push(t);else for(var o=Math.ceil(t.length/n)+1,r=0;r<n;r++)a.push(t.slice(r*o,(r+1)*o));return a};e.prototype.searchList=function(e,t){var n=this;this.init()
;var a=this.chunkArray(e,this.maxChunks()).map((function(e,a){return n.searchChunk(e,t,a)}));return Promise.all(a).then((function(e){var t=[];e.forEach((function(e){t=t.concat(e)}))
;t.sort((function(e,t){var n=i(t.score,e.score);return 0!=n?n:i(e.word.word.length,t.word.word.length)}));return t}))};e.MIN_ITEMS_FOR_CHUNKING=200;return e}());t.synchronousRunner=function(e,t){
t=t.toLowerCase();for(var n=[],a=0;a<e.length;a++){var o=[];(0,r.scoreSingleResult)(e[a].word.toLowerCase(),t,o,[]);var s=o[0][0];s>0&&n.push({index:a,score:s,word:e[a]})}return n};function i(e,t){
return e>t?1:e<t?-1:0}var l=null;t.getInstance=function(){l||(l=new s);return l}},614:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(25),o=n(0),r=(0,a.createReactClass)({
displayName:"FuzzySearchHighlighter",render:function(){var e=[],t=0,n=this.props.query.replace(/\s/g,"").toLowerCase();this.props.chunks.forEach((function(a){
if("string"==typeof a)for(var o=0;o<a.length;o++){var r=t<n.length&&n[t]==a[o].toLowerCase(),s=e.length>0?e[e.length-1]:null,i="text-"+r;r&&t++;s&&s.type==i?s.value+=a[o]:e.push({type:i,value:a[o]})
}else e.push({type:"react",value:a})}));return o.createElement("span",{className:"notranslate"},e.map((function(e,t){return"text-true"==e.type?o.createElement("strong",{key:t},e.value):e.value})))}})
;t.default=r},615:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.renderSnackbarForMigration=void 0;var a=n(1),o=n(5),r=n(88),s=n(0),i=n(2),l=(0,o.PaperIntlFactory)().F,d=(0,
i.defineMessages)({migrationissuccessfullyscheduled:{id:"A6gvOS",defaultMessage:"Migration is successfully scheduled."},dashboard:{id:"2H9HtH",defaultMessage:"Dashboard"},failedtoschedulemigration:{
id:"OA4KUC",defaultMessage:"Failed to schedule migration."}});t.renderSnackbarForMigration=function(e,t){e?r.Snackbar.show(s.createElement(r.Snackbar,{
title:s.createElement(l,a.__assign({},d.migrationissuccessfullyscheduled)),variant:"complete",onActionClick:function(){window.location.replace(t)},
actionButtonText:s.createElement(l,a.__assign({},d.dashboard)),timeoutDelayMs:1e4})):r.Snackbar.fail(s.createElement(l,a.__assign({},d.failedtoschedulemigration)))}},616:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.PopoverListSectionMenu=t.PopoverListItem=t.PopoverList=void 0;var a=n(1),o=n(3),r=n(6),s=n(746),i=n(11),l=n(0),d=n(43),c=n(61),u=function(e){
a.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.highlightItem=function(e){e!=n.state.highlightedIndex&&n.setState({highlightedIndex:e})};n.handleKeydown=function(e){
var t=l.Children.count(n.props.children),a=n.state.highlightedIndex;switch(e.keyCode){case d.KeyCode.DOWN:null==a?a=0:++a>=t&&(a=null);n.setState({highlightedIndex:a});(0,
s.default)(document.getElementById(n.getIdForItem(a)),n.listbox);break;case d.KeyCode.UP:null==a?a=t-1:--a<0&&(a=null);n.setState({highlightedIndex:a});(0,
s.default)(document.getElementById(n.getIdForItem(a)),n.listbox)}};n.state={highlightedIndex:null,listId:(0,r.uniqueId)("dmc-")};return n}t.prototype.componentDidMount=function(){this.setupEvents()}
;t.prototype.componentDidUpdate=function(e,t){if(t.highlightedIndex!=this.state.highlightedIndex){var n=this.state.highlightedIndex,a=this.getIdForItem(n),o=document.getElementById(a)
;null==o||o.dispatchEvent(new Event("highlight"));var r=l.Children.toArray(this.props.children);l.isValidElement(r[n])&&r[n].props.onHighlight&&r[n].props.onHighlight(n)
;this.props.onHighlightChanged&&this.props.onHighlightChanged(n,this.getIdForItem(n))}};t.prototype.componentWillUpdate=function(e,t){if(t.highlightedIndex!=this.state.highlightedIndex){
var n=this.state.highlightedIndex,a=this.getIdForItem(n),o=document.getElementById(a);null==o||o.dispatchEvent(new Event("dehighlight"));var r=l.Children.toArray(this.props.children)
;l.isValidElement(r[n])&&r[n].props.onDehighlight&&r[n].props.onDehighlight(n)}};t.prototype.setupEvents=function(){var e=this;this.events.on(this.listbox,"resetHighlightedIndex",(function(){
null!==e.state.highlightedIndex&&e.setState({highlightedIndex:null})}));this.events.on(window,"keydown",this.handleKeydown)};t.prototype.groupBySection=function(e){var t=[],n=null,a=null,o=null,r=[]
;e.forEach((function(e){var s=e;if(s.props.sectionKey!=a){r.length>0&&t.push({sectionKey:a,sectionMenu:o,title:n,items:r});n=s.props.section;a=s.props.sectionKey;s.type==h&&(o=s.props.menu);r=[]}
s.type!=h&&r.push(e)}));r.length>0&&t.push({sectionKey:a,sectionMenu:o,title:n,items:r});return t};t.prototype.getIdForItem=function(e){return null!=e?this.state.listId+"-"+String(e):null}
;t.prototype.render=function(){var e=this,t=this.props.className,n=this.state.highlightedIndex,s=(0,
r.omit)(this.props,"className","children","onHighlightChanged","open"),i=o("dmc-popover-list",t),d=l.Children.toArray(this.props.children),c=this.groupBySection(d),u=[],p=0;c.forEach((function(t,a){
var o=[];t.title&&o.push(l.createElement("div",{className:"dmc-popover-list-section-title",key:"title"+t.sectionKey},t.title));t.sectionMenu&&o.push(l.createElement("div",{
className:"dmc-popover-list-section-menu",key:"menu"+t.sectionKey},t.sectionMenu));o.length&&u.push(l.createElement("div",{className:"dmc-popover-list-section-title-row"},o))
;t.items.forEach((function(t){u.push(l.cloneElement(t,{index:p,id:e.getIdForItem(p),active:p==n,"aria-selected":p==n,onMouseOver:e.highlightItem.bind(null,p)}));p++}))}))
;return u.length?l.createElement("div",a.__assign({role:"listbox",className:i,ref:function(t){return e.listbox=t}},s),u.length>0&&this.props.open?u:null):null};t.displayName="PopoverList"
;return t=a.__decorate([i.default],t)}(l.Component);t.PopoverList=u;var p=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.selectItem=function(e,n){
t.props.onSelection&&t.props.onSelection(e,n)};t.handleMouseDown=function(e){0!=e.button||e.altKey||(!c.default.mac||e.ctrlKey)&&(c.default.mac||e.metaKey)||t.selectItem(t.props.index,e.nativeEvent)}
;t.handleKeydown=function(e){e.keyCode==d.KeyCode.ENTER&&t.selectItem(t.props.index,e)};return t}t.prototype.componentDidUpdate=function(e){if(this.props.active!=e.active){this.events.removeAll()
;this.props.active&&this.events.on(window,"keydown",this.handleKeydown)}};t.prototype.render=function(){var e=this.props,t=e.active,n=e.className,s=e.children,i=o("dmc-popover-list-item",n,{
"dmc-active-popover-list-item":t}),d=(0,r.omit)(this.props,"className","children");return l.createElement("div",a.__assign({role:"option",className:i,onMouseDown:this.handleMouseDown},d),s)}
;t.displayName="PopoverListItem";return t=a.__decorate([i.default],t)}(l.Component);t.PopoverListItem=p;var h=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.render=function(){return null};t.displayName="PopoverListSectionMenu";return t}(l.Component);t.PopoverListSectionMenu=h},617:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0
});t.searchCloudDocs=t.searchFolders=t.searchPeople=t.searchPads=t.ensureBoost=void 0;var a=n(1),o=n(8),r=n(12);t.ensureBoost=function(){r.get({url:"/ep/stateless/ensure-search-boost",
analyticsTag:"ensure-search-boost",shardingKey:r.getStatelessShardingKey(),data:{secureUserId:o.default.secureUserId}})};t.searchPads=function(e,t,n){void 0===n&&(n={});r.get({
url:"/ep/internal/padlist/",data:t,analyticsTag:"pad-list",shardingKey:r.getStatelessShardingKey(),hpAppLevel:n.isAppLevel,requestProfile:n.requestProfile,includeXsrfToken:!0,
successHandler:function(e){if(e){var o=(null==e?void 0:e.pads)||[];o.forEach((function(e){e.snippets=t.q&&t.q.length>1?e.snippets:[]}));return!!n.success&&n.success(a.__assign(a.__assign({},e),{
params:t,pads:o}))}},errorHandler:function(a,o,s){if(o&&r.isOfflineResponse(o)&&!n.remoteOnly){e.searchPadList(t,(function(e){n.success&&n.success({params:t,pads:e})}));return!0}if(n.error){
n.error(a,o,s);return!0}return!1}})};t.searchPeople=function(e,t,n){var a={q:e,limit:t};r.get({url:"/ep/search/people",analyticsTag:"people-search",shardingKey:r.getStatelessShardingKey(),
dataType:"json",contentType:"application/json; charset=UTF-8",data:a,hpAppLevel:!0,includeXsrfToken:!0,successHandler:function(e){if(e){var t=(null==e?void 0:e.people)||[];n(t)}}})}
;t.searchFolders=function(e,t){r.get({url:"/ep/search/folder",analyticsTag:"folder-search",shardingKey:r.getStatelessShardingKey(),dataType:"json",contentType:"application/json; charset=UTF-8",data:e,
hpAppLevel:!0,includeXsrfToken:!0,successHandler:function(e){e&&t(e)}})};t.searchCloudDocs=function(e,t,n){void 0===n&&(n={});r.get({url:"/cloud-docs/search",data:t,analyticsTag:"docs-list",
shardingKey:r.getStatelessShardingKey(),hpAppLevel:n.isAppLevel,requestProfile:n.requestProfile,includeXsrfToken:!0,successHandler:function(e){if(e){var o=null==e?void 0:e.pads
;return!!n.success&&n.success(a.__assign(a.__assign({},e),{params:t,pads:o}))}},errorHandler:function(a,o,s){if(o&&r.isOfflineResponse(o)&&!n.remoteOnly){e.searchPadList(t,(function(e){
n.success&&n.success({params:t,pads:e})}));return!0}if(n.error){n.error(a,o,s);return!0}return!1}})}},618:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.getWeightedMatchPercentage=t.parseCombinedValue=t.statusSearchFilterFromStatusTokens=t.peopleSearchFilterFromPeopleTokens=t.folderSearchFilterFromFolderTokens=t.searchTokensToQuery=void 0
;var a=n(6),o=n(133),r=n(38),s=n(27);t.searchTokensToQuery=function(e,t){return[t,l(e.filter((function(e){return"people"==e.type}))),i(e.filter((function(e){return"folder"==e.type
}))),d(e.filter((function(e){return"status"==e.type})))].filter((function(e){return!!e})).join(" ")};function i(e){return e.map((function(e){
return"in:".concat(e.encryptedFolderId,'|"').concat(e.folderName,'"')})).join(" ")}t.folderSearchFilterFromFolderTokens=i;function l(e){return a.flatMap(e,(function(e){
return[e.email?"with:".concat(e.email):"",e.secureUserId?"withid:".concat(e.secureUserId):""]})).filter((function(e){return!!e})).join(" ")}t.peopleSearchFilterFromPeopleTokens=l;function d(e){
return e.map((function(e){return"status:".concat(e.statusName)})).join(" ")}t.statusSearchFilterFromStatusTokens=d;t.parseCombinedValue=function(e){
var t=[],n=[],a=[],o=[],r=e.replace(/ *with:([^ ]+)/g,(function(e,n){t.push(n);return""}));return{fullQuery:e,text:r=(r=(r=r.replace(/ *withid:([^ ]+)/g,(function(e,t){n.push(t);return""
}))).replace(/ *status:([^ ]+)/g,(function(e,t){o.push(parseInt(t,10));return""}))).replace(/ *in:([^ ]+)\|"(.*?)"/g,(function(e,t,n){a.push({type:"folder",folderName:n,encryptedFolderId:t});return""
})),emailFilters:t,secureUserIdFilters:n,folderFilters:a,statuslist:o}};t.getWeightedMatchPercentage=function(e,t){
var n=/\s+/,a=t.toLowerCase().split(n).filter(Boolean),i=e.toLowerCase().split(n).filter(Boolean),l=0;a.forEach((function(e,t){for(var n=0;n<i.length;n++){
var a=i[n],r=a.search(o.CJK_UNICODE_RANGE)>=0,d=new RegExp((r?"":"\\b")+s.escapeForRegExp(a));if(e.match(d)){l+=a.length*Math.pow(.4,t)*Math.pow(.4,n);break}}}));var d=r.sum(a.map((function(e,t){
return e.length*Math.pow(.4,2*t)})));return l/d}},619:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.ComboBoxWrapper=t.ComboBoxWrapperContextTypes=void 0
;var a=n(1),o=n(3),r=n(6),s=n(197),i=n(11),l=n(23),d=n(0),c=n(43);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){
for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.forEach((function(e){e&&e.apply(null,t)}))}}t.ComboBoxWrapperContextTypes={ariaComboBox:l.object};var p=function(e){a.__extends(n,e)
;function n(t){var n=e.call(this,t)||this;n.windowFocused=!0;n.handleMouseDownOnPopover=function(e){e.preventDefault()};n.handleInputFocus=function(e){n.setState({open:!0})}
;n.handleWindowBlur=function(){n.windowFocused=!1};n.handleWindowFocus=function(){n.windowFocused=!0};n.handleInputBlur=function(e){n.timers.setTimeout((function(){n.windowFocused&&n.setState({open:!1
})}),0)};n.handleInputChange=function(e){e.target.value&&!n.state.open&&n.setState({open:!0})};n.handleInputKeyDown=function(e){e.keyCode!=c.KeyCode.UP&&e.keyCode!=c.KeyCode.DOWN||e.preventDefault()}
;n.handleHighlightChanged=function(e,t){n.setState({highlightedId:t})};n.handleGlobalKeyDown=function(e){if(e.keyCode==c.KeyCode.ESCAPE){n.input&&n.input.blur();n.setState({open:!1})}}
;n.handleClickOutside=function(){n.setState({open:!1})};n.state={listId:null,open:!1,highlightedId:null};return n}n.prototype.componentWillMount=function(){this.setState({listId:(0,r.uniqueId)("dmc-")
})};n.prototype.componentDidUpdate=function(e,t){if(this.state.open!=t.open){this.events.removeAll();if(this.state.open){this.events.on(window,"keydown",this.handleGlobalKeyDown)
;this.events.on(window,"blur",this.handleWindowBlur);this.events.on(window,"focus",this.handleWindowFocus);this.props.onDropdownOpened&&this.props.onDropdownOpened()
}else this.props.onDropdownClosed&&this.props.onDropdownClosed()}};n.prototype.getChildContext=function(){return{ariaComboBox:{input:{role:"combobox","aria-autocomplete":"list",
"aria-activedescendant":this.state.open&&this.state.highlightedId?this.state.highlightedId:void 0,"aria-expanded":this.state.open,"aria-haspopup":!0,"aria-owns":this.state.listId,
"aria-controls":this.state.open?this.state.listId:void 0}}}};n.prototype.render=function(){var e=this,t=this.props,n=t.className,i=t.children,l=(0,
r.omit)(this.props,"className","children","onDropdownOpened","onDropdownClosed"),c=o("dmc-combobox",n,{"dmc-combobox-open":this.state.open,
"dmc-combobox-child-focused":this.state.open&&null!==this.state.highlightedId}),p=d.Children.toArray(i),h=p[0],m=p[1],f=d.cloneElement(m,{id:this.state.listId,
className:o("dmc-combobox-popover",m.props.className),open:this.state.open,onHighlightChanged:u(m.props.onHighlightChanged,this.handleHighlightChanged),onMouseDown:this.handleMouseDownOnPopover,
"aria-hidden":!this.state.open}),g=h,y=d.cloneElement(g,{className:o(g.props.className,"dmc-combobox-input"),onFocus:u(g.props.onFocus,this.handleInputFocus),
onBlur:u(g.props.onBlur,this.handleInputBlur),onChange:u(g.props.onChange,this.handleInputChange),onKeyDown:u(g.props.onKeyDown,this.handleInputKeyDown),ref:function(t){return e.input=t}})
;return d.createElement(s.default,{onClickOutside:this.handleClickOutside},d.createElement("div",a.__assign({className:c},l),y,f))};n.prototype.focus=function(){this.input.focus()}
;n.displayName="ComboBoxWrapper";n.childContextTypes=t.ComboBoxWrapperContextTypes;return n=a.__decorate([i.default],n)}(d.Component);t.ComboBoxWrapper=p},620:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(11),r=n(4),s=n(34),i=n(28),l=n(1550),d=n(1552),c=n(23),u=n(0),p=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.panelId="notifications";n.refreshBadge=function(){n.props.stores.notificationList.getBadge((function(e,t,a){n.setState({badgeCount:a?e:void 0,isRed:t})}))};n.onOpen=function(){var e
;r.IntentionEvent.ViewNotifications.track({badgeCount:n.state.badgeCount,context:n.getTrackContext()});null===(e=n.notificationsPanel)||void 0===e||e.onOpen()};n.menuRef=u.createRef();var a=0,o=!1
;n.props.stores.notificationList.getBadge((function(e,t,n){a=e;n||(a=void 0);o=t}));n.state={badgeCount:a,isRed:o};return n}t.prototype.getTrackContext=function(){};t.prototype.openPanel=function(){
this.open()};t.prototype.closePanel=function(){var e;(null===(e=this.menuRef.current)||void 0===e?void 0:e.isOpen())&&this.menuRef.current.close()};t.prototype.componentDidMount=function(){var e=this
;if(!i.isMobile()){this.context.panels&&this.context.panels.registerPanel(this);this.events.on(this.props.stores.notificationList,"badge-count-change",(function(){return e.refreshBadge()}))
;if(this.props.padController){this.events.on(this.props.padController,"navigate-same-doc-refocus",(function(){return e.closePanel()}));this.events.on(this.props.app,"hp-after-navigate",(function(){
return e.closePanel()}))}this.refreshBadge()}};t.prototype.componentWillUnmount=function(){this.menuRef.current=null;this.context.panels&&!i.isMobile()&&this.context.panels.unregisterPanel(this)}
;t.prototype.open=function(){var e;null===(e=this.menuRef.current)||void 0===e||e.open()};t.prototype.render=function(){var e=this;return i.isMobile()?null:u.createElement(s.Menu.Wrapper,{
hasMaxHeight:480,onToggle:function(t){return t&&e.onOpen()}},(function(t){var n=t.getTriggerProps,o=t.getContentProps,r=t.triggerRef,i=t.openMenu,c=t.closeMenu,p=o();e.menuRef.current={
isOpen:function(){return p.open},open:function(){return i({})},close:function(){return c({})}};return u.createElement("div",{className:"margin-right-90"},u.createElement(l.default,a.__assign({
forwardedRef:r,badgeCount:e.state.badgeCount||0,isRed:!!e.state.isRed},n())),u.createElement(s.Menu.Content,a.__assign({},p),u.createElement(s.Menu.Segment,null,u.createElement(d.default,{
ref:function(t){return e.notificationsPanel=t},app:e.props.app,stores:e.props.stores,currentLocalPadId:e.props.currentLocalPadId}))))}))};t.displayName="NotificationsBell";t.contextTypes={
panels:c.object};return t=a.__decorate([o.default,r.trackContextDecorator],t)}(u.PureComponent);t.default=p},641:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(21),r=n(30),s=n(2),i=n(11),l=n(77),d=n(0),c=n(15),u=n(16),p=n(143),h=n(5),m=n(1745),f=(0,h.PaperIntlFactory)(),g=f.F,y=f._f,v=(0,s.defineMessages)({open:{id:"PzO8uX",
defaultMessage:"Open folder view"},close:{id:"gehxjr",defaultMessage:"Close folder view"}}),E=function(e){a.__extends(t,e);function t(t,n){var a=e.call(this,t,n)||this;a.getIcon=function(e,t){
return e&&p.isInDocBrowseStormcrowOn||!e&&t?c.SidebarHideLine:e?c.CloseLine:c.SidebarShowLine};return a}t.prototype.getTooltip=function(){
var e=this.props,t=e.hideTooltip,n=e.inSidebar,o=e.isSidebarOpen;return t?null:n||o?d.createElement(g,a.__assign({},v.close)):d.createElement(g,a.__assign({},v.open))};t.prototype.render=function(){
var e=this.props,t=e.inSidebar,n=void 0!==t&&t,a=e.isSidebarOpen,s=void 0!==a&&a,i=n?"folder sidebar close":"folder sidebar open",c=y(n||s?v.close:v.open)
;return d.createElement(l.LayerContext.Provider,{value:{zIndex:r.default.zindex_above_header}},d.createElement(o.default,{variant:"transparent",inverse:this.props.isTemplate,
onClick:this.props.handleToggleSidebar,tooltip:{title:this.getTooltip(),placement:"right"},className:p.isInDocBrowseStormcrowOn?m.default.noSidebarButton:void 0,title:c,"aria-label":c,"track-title":i,
isIcon:!0},d.createElement(u.UIIcon,{src:this.getIcon(n,s)})))};t.displayName="FolderSidebarButton";return t=a.__decorate([i.default],t)}(d.PureComponent);t.default=E},649:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(3),r=n(7),s=n(11),i=n(83),l=n(1831),d=n(10),c=n(1832),u=n(0),p=n(31),h=n(518),m=function(e){a.__extends(t,e);function t(t){
var n=e.call(this,t)||this;n.handleTitleClick=function(e){var t,a;if(!i.shouldOpenInNewTab(e)){e.preventDefault()
;null===(a=null===(t=n.props.padController.mainAce)||void 0===t?void 0:t.getViewport())||void 0===a||a.scrollToTitle()}};n.handleTitleChange=function(){n.setState({
title:n.props.padController.getTitle(),url:n.props.padController.getUrl()})};n.state={title:t.padController.getTitle(),url:t.padController.getUrl()};return n}t.prototype.componentDidMount=function(){
this.bindEvents()};t.prototype.componentDidUpdate=function(e,t){this.bindEvents()};t.prototype.bindEvents=function(){this.events.removeAll()
;this.events.on(this.props.padController,r.DocEvents.TitleChanged,this.handleTitleChange)};t.prototype.render=function(){
var e,t,n,a=this.props,r=a.padController,s=a.favoriteProps,i=a.stores,m=this.state,f=m.title,g=m.url
;s&&i&&""!=f&&r.getPadId()&&(n=p.default.isOnButDoNotLog("paper_doc_pinning")&&(null==r?void 0:r.isCloudDoc())?u.createElement(h.SectionMoverLazy,{file:{padId:r.getPadId(),
fileObjId:null!==(t=null===(e=r.padClientVars)||void 0===e?void 0:e.fileId)&&void 0!==t?t:"",name:r.getTitle()},triggerClassName:"hp-header-title--pinning-trigger",triggerSize:"small",hideSpinner:!0,
fetchDataIfNotExist:!0,track:{pageName:"editor",context:"editor_title"}}):u.createElement(c.default,{localPadId:s.localPadId,initiallyFavorite:r.isPadFavorited(),stores:i}))
;var y=o("hp-header-title-wrapper",{"hp-header-title-wrapper--center":!!this.props.centerTitle});return u.createElement("div",{className:y},u.createElement(d.default,{styleless:!0,href:g,
onClick:this.handleTitleClick,"track-title":"Pad title"},u.createElement(l.HeaderTitleTitle,{title:f})),n)};t.displayName="HeaderTitle";return t=a.__decorate([s.default],t)}(u.PureComponent)
;t.default=m},651:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(5),r=n(6),s=n(21),i=n(3),l=n(652),d=n(310),c=n(957),u=n(8),p=n(2),h=n(11),m=n(1850),f=n(1851),g=n(241),y=n(68),v=n(69),E=n(4),_=n(201),S=n(66),C=n(863),b=n(15),P=n(653),I=n(28),T=n(23),N=n(248),k=n(0),w=n(164),M=n(958),F=n(1871),x=n(7),D=n(654),O=n(650),L=n(471),R=n(27),A=n(4),B=n(16),U=n(17),H=(0,
o.PaperIntlFactory)().F,j=(0,p.defineMessages)({share:{id:"CcpVyl",defaultMessage:"Share"},invite:{id:"sTZgnw",defaultMessage:"Invite"},youarecurrentlyofflineInvitecollaboratorswhenyouarebackonline:{
id:"JZ+oUf",defaultMessage:"You are currently offline. Invite collaborators when you are back online."},copylink:{id:"L4Tupd",defaultMessage:"Copy link"},sharewithpeoplewhocanaccesstheDropboxfile:{
id:"+IL4I1",defaultMessage:"Share with people who can access the Dropbox file?"}}),W=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.mounted_=!1;n._emailsToShare=null
;n.panelId="sharing";n.shouldCloseOnClick_=function(){var e
;return!((null===(e=n.sharingForm.current)||void 0===e?void 0:e.hasOpenPopup())||n.folderFilingForm.current&&n.folderFilingForm.current.hasOpenPopup())};n.handleChangeSharingSettings=function(){
var e={isPersonalDomainPad:n.props.padController.isPersonalDomainPad(),domainDocSharePolicy:n.props.padController.padClientVars.domainDocSharePolicy,fromMigrationBanner:!0
},t=O.default.handleLinkAccessChange(n.props.padController.getPadId(),e,!0),a={padController:n.props.padController,initialGuestPolicySpec:n.state.guestPolicySpec,onConfirm:t,
onCancel:O.default.handleLinkAccessCancel,folderData:n.state.folderData,trackContext:n.getTrackContext(),closeAfterMigrationChoice:!0};O.default.show(a)};n.openSharing=function(){
n.sharingMenu.current&&n.sharingMenu.current.open()};n.closeSharing=function(){n.sharingMenu.current&&n.sharingMenu.current.close()};n.toggleSharing=function(){
n.sharingMenu.current&&n.sharingMenu.current.toggle()};n.onExtraPeopleClick_=function(){if(!n.props.isOffline){n.toggleSharing();(0,A.track)("extra-people-clicked")}};n.onGhostAvatarClick=function(){
n.toggleSharing();E.IntentionEvent.ClickGhostAvatar.track()};n.onOpen_=function(){var e;if(n.mounted_){n.setState({isOpen:!0,sharingFormSubmitStatus:x.SharingFormSubmitStatus.NONE})
;null===(e=n.sharingForm.current)||void 0===e||e.initialize();n.folderFilingForm.current&&n.folderFilingForm.current.initialize()
;n.props.padController&&n.props.padController.isCloudDoc()&&n.props.padController.cloudDocsUrlStore&&n.props.padController.cloudDocsUrlStore.loadCloudDocUrls();n.forceUpdate();(0,
A.trigger)("people-panel-opened")}};n.onShow_=function(){var e,t;if(n._emailsToShare){null===(e=n.sharingForm.current)||void 0===e||e.setSharingTargetsWithoutCountingAsUserAdded(n._emailsToShare)
;n.state.sharingFormSimplifiedHeaderMessage&&(null===(t=n.sharingForm.current)||void 0===t||t.performLoggingOnSubmit(n._emailsToShare));n._emailsToShare=null}};n.onBeforeClose_=function(){(0,
A.trigger)("people-panel-closing")};n.onClose_=function(){if(n.mounted_){n.setState({isOpen:!1,sharingFormSubmitStatus:x.SharingFormSubmitStatus.NONE});(0,A.trigger)("people-panel-closed")}}
;n.onInviteSubmit_=function(e){n.setState({sharingFormSimplifiedHeaderMessage:null,sharingFormSubmitStatus:x.SharingFormSubmitStatus.PENDING,numSharingTargets:e||0})
;n.enablePostInviteFilingDocsFlow()||n.closeSharing()};n.onFolderFilingDismiss=function(){n.closeSharing()};n.onInviteSuccess=function(){n.setState({
sharingFormSubmitStatus:x.SharingFormSubmitStatus.SUCCESS});n.props.padController.isCloudDoc()&&n.props.padController.fetchCloudDocSeenStateFromServer()};n.handleFolderStoreChange=function(){
n.props.padController&&n.setState({folderData:n.props.padController.getFolderData()})};n.onPageNavigate=function(){
var e=U.default.consumeQueryParam(N.QueryParamNames.OPEN_SHARING),t=U.default.consumeQueryParam("shareTo");if(t&&(0,L.shouldUserSeeMeetingNotesOnboarding)()&&0===u.default.onboardingCompleted.length){
n.shareTo=t;n.events.on(E.events,E.IntentionEvent.OnboardingTrayMeetingNoteClosed.canonicalName,n.handleMeetingNotesOnboardingComplete)}else if(e||t){var a={delay:100};if(t){
a.shareTo=JSON.safeParse(t);a.delay=0}n.openSharingPanel(a)}};n.handleMeetingNotesOnboardingComplete=function(){n.openSharingPanel({shareTo:JSON.safeParse(n.shareTo),delay:0})}
;n.openSharingPanel=function(e){void 0===e&&(e={});n._emailsToShare=e.shareTo||null;var t={};e.message!=n.state.initialMessage&&(t.initialMessage=e.message)
;e.headerMessage!=n.state.sharingFormSimplifiedHeaderMessage&&(t.sharingFormSimplifiedHeaderMessage=e.headerMessage);r.isEmpty(t)||n.setState(t);n.timers.setTimeout((function(){n.openSharing()
}),e.delay||0)};n.bindPeopleListEvents=function(){n.props.peopleList&&n.props.peopleList.on("change",n.handlePeopleListChange)};n.onPeopleListChanged_=function(){n.setState({
guestPolicySpec:n.props.peopleList.getGuestPolicySpec(),nonDeletedInvitedUsers:n.props.peopleList.getAllUsersOnDocExceptKickedOut()})};n.handlePeopleListChange=r.debounce(n.onPeopleListChanged_,33)
;n.reopenInvite_=function(){n.openSharing()};n.handleServerDBStatusChange=function(){n.setState({isReadOnly:n.props.stores.serverDBStatus.isReadOnly()})};n.state={
isReadOnly:n.props.stores.serverDBStatus.isReadOnly(),folderData:n.props.padController&&n.props.padController.getFolderData(),guestPolicySpec:n.props.peopleList.getGuestPolicySpec(),
nonDeletedInvitedUsers:n.props.peopleList.getAllUsersOnDocExceptKickedOut(),mode:"people",submitEnabled:!1,emails:[],isOpen:!1,initialMessage:null,sharingFormSimplifiedHeaderMessage:null,
sharingFormSubmitStatus:x.SharingFormSubmitStatus.NONE,numSharingTargets:0};n.sharingMenu=k.createRef();n.sharingForm=k.createRef();n.folderFilingForm=k.createRef();return n}
t.prototype.openPanel=function(){this.openSharing()};t.prototype.closePanel=function(){this.closeSharing()};t.prototype.enablePostInviteFilingDocsFlow=function(){
return!(this.props.padController.isPadTemplate()||this.props.padController.isCloudDoc()||this.state.folderData||u.default.isPersonalDomainUser||!u.default.encryptedTeamId)}
;t.prototype.shouldShowGuestPolicyBanner=function(){
return this.props.peopleList.canCurrentUserChangePermissions()&&!!this.state.folderData&&"default"==this.state.guestPolicySpec.folderMemberGuestPolicy&&this.props.padController.getPadEncryptedDomainId()==u.default.encryptedTeamId&&!I.isMobile()&&!(0,
S.isApollo)()};t.prototype.getInviteMessage=function(){return this.props.padController.isPadTemplate()?k.createElement(H,a.__assign({},j.share)):k.createElement(H,a.__assign({},j.invite))}
;t.prototype.renderInviteButtonTriggerInPadHeader=function(){var e,t=this.getInviteMessage();this.props.isOffline&&(e={
title:k.createElement(H,a.__assign({},j.youarecurrentlyofflineInvitecollaboratorswhenyouarebackonline))});return k.createElement(s.default,{disabled:this.state.isReadOnly||this.props.isOffline,
"track-title":"Share",tooltip:e,hasPopup:!0,variant:"primary",className:"hp-sharing-button",onClick:this.openSharing},t)};t.prototype.renderInviteButton=function(){return k.createElement(v.default,{
ref:this.sharingMenu,className:"hp-sharing-main-menu selenium-hp-sharing-main-menu",onOpen:this.onOpen_,onShow:this.onShow_,onClose:this.onClose_,onBeforeClose:this.onBeforeClose_,
shouldCloseOnClick:this.shouldCloseOnClick_,dontReposition:!0,dontSwallowSpecialKeystrokes:!0},this.renderInviteButtonTriggerInPadHeader(),k.createElement(A.TrackContext,{
trackContext:A.AppContext.PadHeader.SharingPanel},k.createElement(y.default,{className:"hp-sharing-menu",type:"custom"},this.renderSharingForm())))};t.prototype.renderSharingForm=function(){
var e=this.props,t=e.desktopStyle,n=e.mainAce,a=e.padController,o=e.peopleList,r=e.stores,s=this.state.sharingFormSubmitStatus,i=this.enablePostInviteFilingDocsFlow()
;return k.createElement(k.Fragment,null,k.createElement(M.default,{ref:this.sharingForm,peopleList:o,padController:a,mainAce:n,initialMessage:this.state.initialMessage||void 0,
onInviteFailed:this.reopenInvite_,onInviteSubmit:this.onInviteSubmit_,onInviteSuccess:this.onInviteSuccess,isOpen:this.state.isOpen,
simplifiedHeaderSharingMessage:this.state.sharingFormSimplifiedHeaderMessage,stores:r,hideImport:t,hideSuccessToast:i,inviteSubmitStatus:s,hideEmptyState:!1
}),i&&k.createElement(k.Fragment,null,k.createElement(F.SharingFormOverlay,{numSharingTargets:this.state.numSharingTargets,status:s}),k.createElement(m.default,{ref:this.folderFilingForm,
isOpen:s===x.SharingFormSubmitStatus.SUCCESS,onFolderFilingDismiss:this.onFolderFilingDismiss,padController:a,stores:r})))};t.prototype.renderCopyLinkBtn=function(){var e
;if(!this.props.padController.isPadTemplate()&&!R.isEmpty(this.props.padController.getPadId())&&U.default.clipboard.canCopy()){
if(this.props.desktopStyle&&this.props.padController.isCloudDoc())return k.createElement(l.CloudDocCopyLinkButton,{padController:this.props.padController,styleless:!1});var t=(0,
g.getSharableLinkFromLocalPadId)(this.props.padController.getPadId(),this.props.padController.getTitle());e=k.createElement(d.default,{className:"hp-sharing-header-copylink",key:"copy-link",url:t,
tooltip:k.createElement(H,a.__assign({},j.copylink)),padController:this.props.padController,styleless:!this.props.desktopStyle,isIcon:!0},k.createElement(B.UIIcon,{src:b.LinkLine}))}return e}
;t.prototype.renderCreateViewOnlyLinkButton=function(){var e=this.props.padController;if((0,C.isViewOnlyEnabled)(e)){var t=e.getPadId();return k.createElement(c.CreateViewOnlyLinkButton,{
padController:e,localPadId:t})}};t.prototype.render=function(){var e,t=u.default.isSignedIn(),n=i("hp-sharing","selenium-hp-sharing-panel",{"hp-sharing-readonly":t})
;this.shouldShowGuestPolicyBanner()&&(e=k.createElement(f.default,{folderData:this.state.folderData,onChangeSharingSettings:this.handleChangeSharingSettings}))
;var a=this.renderInviteButton(),o=this.props.desktopStyle?3:void 0;return k.createElement("div",{className:n},k.createElement(_.default,{users:this.state.nonDeletedInvitedUsers.map((function(e){
return e.info})),mainAce:this.props.mainAce,onExtraPeopleClick:this.onExtraPeopleClick_,maxNumVisibleUser:o,border:!0,avatarSize:this.props.avatarSize,onGhostAvatarClick:this.onGhostAvatarClick
}),a,k.createElement(P.MaybeOpenInAppButton,{padController:this.props.padController}),e,this.renderCreateViewOnlyLinkButton(),this.renderCopyLinkBtn(),k.createElement(D.default,{
openSharingPanel:this.openSharing}))};t.prototype.componentDidMount=function(){var e=this;this.mounted_=!0;this.setState({sharingFormSimplifiedHeaderMessage:null})
;this.context.panels&&this.context.panels.registerPanel(this);this.onPageNavigate();if(this.props.padController){
this.events.on(this.props.padController,"navigate-same-doc-refocus",this.onPageNavigate);this.events.on(this.props.padController,"open-sharing-panel",(function(t){e.openSharingPanel(t)}))
;this.events.on(this.props.padController,"pad-id-changed",(function(){e.forceUpdate()}));this.props.padController.isCloudDoc()&&this.props.padController.fetchCloudDocSeenStateFromServer()}
this.props.padController&&this.props.padController.folderStore&&this.props.padController.folderStore.on("change",this.handleFolderStoreChange);this.bindPeopleListEvents()
;this.bindInviteAllCollaboratorsEvents();this.handleServerDBStatusChange=this.handleServerDBStatusChange.bind(this);this.props.stores.serverDBStatus.addEventListener(this.handleServerDBStatusChange)}
;t.prototype.componentDidUpdate=function(e,t){!e.peopleList&&this.props.peopleList&&this.bindPeopleListEvents()};t.prototype.bindInviteAllCollaboratorsEvents=function(){var e=this
;this.events.on(E.events,"show-invite-education",(function(){if(e.props.padController&&e.props.padController.getPadId()){var t={padId:e.props.padController.getPadId(),emails:[],max:20,word:""}
;w.shareSuggestionsDataSource.load(a.__assign({autocompleteType:"dropboxOnly"},t)).then((function(n){if(n&&n.data){var o=w.shareSuggestionsDataSource.parse(n.data,t);if(o&&o.length){
w.shareSuggestionsDataSource.saveParsedEntries(o);var r=o.sort((function(e,t){return t.priority-e.priority})).map((function(e){return e.email}));r.length>0&&e.setState({
sharingFormSimplifiedHeaderMessage:k.createElement(H,a.__assign({},j.sharewithpeoplewhocanaccesstheDropboxfile))},(function(){e.openSharingPanel({shareTo:r});(0,
A.track)("people-panel-opened-invite-all-education",{num_emails:r.length,account_age:u.default.accountAge})}))}}}))}}))};t.prototype.componentWillUnmount=function(){this.mounted_=!1
;this.context.panels&&this.context.panels.unregisterPanel(this);this.props.stores.serverDBStatus.removeEventListener(this.handleServerDBStatusChange)
;this.props.peopleList&&this.props.peopleList.off("change",this.handlePeopleListChange)
;this.props.padController&&this.props.padController.folderStore&&this.props.padController.folderStore.off("change",this.handleFolderStoreChange)};t.displayName="SharingPanel";t.contextTypes={
panels:T.object};return t=a.__decorate([h.default,E.trackContextDecorator],t)}(k.PureComponent);t.default=W},652:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.CloudDocCopyLinkButton=void 0;var a=n(1),o=n(310),r=n(2),s=n(7),i=n(11),l=n(15),d=n(0),c=n(16),u=n(32),p=n(17),h=(0,n(5).PaperIntlFactory)().F,m=(0,r.defineMessages)({copylink:{id:"L4Tupd",
defaultMessage:"Copy link"}}),f=function(e){a.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.handleUrlChange=function(){var e=n.props.padController;if(e&&e.cloudDocsUrlStore){
var t=e.cloudDocsUrlStore.getMaxAccessUrl(),a=e.getTitle();n.setState({copyLinkUrl:(0,u.updateTitleInCloudDocUrl)(t,a)});n.props.padController.updateShareUrl(n.state.copyLinkUrl)}};n.state={
copyLinkUrl:""};return n}t.prototype.bindEvents=function(){var e=this.props.padController;e.cloudDocsUrlStore.on("change",this.handleUrlChange);this.events.on(e,"pad-id-changed",this.handleUrlChange)
;this.events.on(e,s.DocEvents.TitleChanged,this.handleUrlChange)};t.prototype.componentDidMount=function(){this.bindEvents();this.handleUrlChange()};t.prototype.componentWillUnmount=function(){
this.props.padController.cloudDocsUrlStore.off("change",this.handleUrlChange)};t.prototype.render=function(){
return!p.default.clipboard.canCopy()||this.props.padController.isPadTemplate()?null:d.createElement(o.default,{key:"copy-link",url:this.state.copyLinkUrl,
tooltip:d.createElement(h,a.__assign({},m.copylink)),padController:this.props.padController,disableTrackingToken:!0,styleless:this.props.styleless,isIcon:!0,disabled:!this.state.copyLinkUrl
},d.createElement(c.UIIcon,{src:l.LinkLine}))};t.displayName="CloudDocCopyLinkButton";return t=a.__decorate([i.default],t)}(d.Component);t.CloudDocCopyLinkButton=f},653:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.MaybeOpenInAppButton=void 0;var a=n(1),o=n(8),r=n(14),s=n(49),i=n(21),l=n(169),d=n(66),c=n(28),u=n(32),p=n(4),h=n(0),m=(0,
r.MsgFactory)("sharing"),f=m.F,g=(0,m.defineMessages)({openinapp:{msg:"Open in app"}}),y=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.handleClick=function(){p.IntentionEvent.OpenInAppClick.track();(0,l.launchApolloWithRelativeUrl)({relativeUrl:s.URI.parse((0,
u.relativePaperDocUrl)(t.props.padController.padId)).updateQuery("dropboxAccountId",o.default.dropboxAccountId).toString(),onFailure:function(){return null}})};return t}t.prototype.render=function(){
return h.createElement(i.default,{className:"hp-open-in-app-button","track-title":"Open in app",variant:"outline",onClick:this.handleClick},h.createElement(f,a.__assign({},g.openinapp)))}
;t.displayName="OpenInAppButton";return t}(h.Component);var v=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
return e=this.props.padController,c.isNativeMobileApp()||c.isMobile()||(0,d.isApollo)()||e.isPadTemplate()||!(0,l.isOpenInAppButtonEnabled)()?null:h.createElement(y,a.__assign({},this.props));var e}
;t.displayName="MaybeOpenInAppButton";return t}(h.Component);t.MaybeOpenInAppButton=v},654:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(75),r=n(0),s=n(119),i=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.onShareAction=function(e){e.stopPropagation();t.props.openSharingPanel()
};return t}t.prototype.componentDidMount=function(){s.WindowKeyEvents.define(o.PadHotkeys.Share,this.onShareAction)};t.prototype.componentWillUnmount=function(){
s.WindowKeyEvents.off(o.PadHotkeys.Share,this.onShareAction)};t.prototype.render=function(){return!0};t.displayName="SharingHotkeys";return t}(r.PureComponent);t.default=i},860:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(59),r=n(41),s=function(e){a.__extends(t,e);function t(t){var n=e.call(this)||this;n.store=t;n.filterParams={}
;n.handleStoreChange=function(){n.trigger("change",void 0)};n.store.on("change",n.handleStoreChange);return n}t.prototype.dispose=function(){this.store.off("change",this.handleStoreChange)
;this.store=null};t.prototype.normalizeParams=function(e){var t=e.num||10,n=e.timeMin||new Date,a=e.timeMax||new Date(n.getTime()+2*r.Time.DAY);return{num:t,timeMin:n,timeMax:a,context:e.context}}
;t.prototype.hasFetched=function(e){return this.store.hasFetched(this.normalizeParams(e))};t.prototype.filter=function(e,t){void 0===t&&(t=!0);this.filterParams=e;var n=this.normalizeParams(e)
;this.handleStoreChange();!t&&this.store.hasFetched(n)||this.store.fetch(n)};t.prototype.fetch=function(){this.store.fetch(this.normalizeParams(this.filterParams||{}))}
;t.prototype.getEvents=function(){return this.store.getFilteredEvents(this.normalizeParams(this.filterParams))};return t}(o.EventEmittingClass);t.default=s},865:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(3),r=n(2),s=n(10),i=n(0),l=n(13),d=n(4),c=(0,n(5).PaperIntlFactory)()._f,u=(0,r.defineMessages)({searchOrCreate:{id:"vOBkFB",
defaultMessage:"Search"}}),p=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={focused:!1};t.onFocus=function(){t.setState({focused:!0})}
;t.onBlur=function(){t.setState({focused:!1})};t.onClear=function(e){(0,d.track)("folder-mover-search-cleared");t.clear(e)};return t}t.prototype.getValue=function(){
return this.refs.searchInput&&this.refs.searchInput.value};t.prototype.setValue=function(e){this.refs.searchInput.value=e};t.prototype.focus=function(){this.refs.searchInput.focus()}
;t.prototype.blur=function(){this.refs.searchInput.blur()};t.prototype.clear=function(e){this.setValue("");this.props.onChange(e)};t.prototype.render=function(){
var e=o("hp-folder-move-v2-search-box",{"hp-folder-move-v2-search-focused":this.state.focused}),t=o("hp-folder-move-v2-search-clear-button",{hidden:!this.getValue()});return i.createElement("div",{
className:e},i.createElement("div",{className:"hp-folder-move-v2-search-box-wrapper"},i.createElement("div",{className:"hp-folder-move-v2-search-input-wrapper"},i.createElement("span",{
className:"icon-search"},i.createElement(l.default,{name:"search"})),i.createElement("input",{name:"title",type:"text",ref:"searchInput",dir:"auto",autoComplete:"off",autoCorrect:"off",
className:"selenium-folder-move-search-input hp-folder-move-v2-search-input",placeholder:c(u.searchOrCreate),onChange:this.props.onChange,onKeyUp:this.props.onKeyUp,onFocus:this.onFocus,
onBlur:this.onBlur}),i.createElement(s.default,{className:t,onClick:this.onClear},i.createElement(l.default,{name:"close"})))))};t.displayName="FolderSearchBox2";return t}(i.Component);t.default=p},
868:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(53),r=n(8),s=n(2),i=n(7),l=n(83),d=n(10),c=n(354),u=n(138),p=n(14),h=n(0),m=n(32),f=n(159),g=n(869),y=n(84),v=n(4),E=n(29),_=(0,p.MsgFactory)("search"),S=_.F,C=(0,_.defineMessages)({
youviewedlastViewedDate:{description:"Shows when the user last viewed a template. E.g. You viewed 1 day ago.",msg:"You viewed {lastViewedDate}"},createdoc:{msg:"Create doc"},archived:{
description:"Small badge that indicates the doc is archived",msg:"archived"}}),b=((0,s.defineMessages)({youviewedlastViewedDate:{id:"enSkX0",defaultMessage:"You viewed {lastViewedDate}"},createdoc:{
id:"KLVfpZ",defaultMessage:"Create doc"},archived:{id:"Wa4M6Y",defaultMessage:"archived"}}),function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.handleCreateDoc=function(e){e.preventDefault();var n;l.shouldOpenInNewTab(e)&&(n=(0,E.unsafeWindowOpen)("about:blank"));f.createDocFromTemplate({templateId:t.props.pad.localPadId,
templateType:i.TemplateType.custom,successHandler:function(e){n?n.location.replace(App.constructUrl(o.default.PAD,{id:e.padId,suffix:"?createFromTemplate=1"})):App.navigateToPad({id:e.padId,
suffix:"?createFromTemplate=1"})},trackContext:t.getTrackContext()})};t.renderByline=function(){var e=t.props,n=e.pad,o=e.info;if(o)return o;var r=[];n.isArchived?r.push(h.createElement(S,a.__assign({
key:"last-viewed-date",values:{lastViewedDate:h.createElement(y.TimeAgo,{date:n.myLastViewedDate,pastOnly:!0})}},C.youviewedlastViewedDate))):r.push(f.getTemplateByline(n))
;return h.createElement("div",{className:"hp-doclist-entry-byline"},r)};return t}t.prototype.getTrackContext=function(){};t.prototype.render=function(){
var e,t=this.props,n=t.pad,o=(t.originalQuery||"").split(" "),s=f.getTemplateMetaFromPadMetaOrSearchResult(n),i=(0,m.relativePrettyPaperDocUrl)(s.templateId,s.title,r.default.userLocale)
;s.isArchived||(e=h.createElement("div",{className:"hp-list-item-inline-share template-tile-result__action"},h.createElement(d.default,{className:"create-doc-button",onClick:this.handleCreateDoc,
secondary:!0},h.createElement(S,a.__assign({},C.createdoc)))));var l=n.isArchived&&h.createElement("span",{className:"archived-badge"},h.createElement(S,a.__assign({},C.archived)))
;return h.createElement("div",{className:"template-search-result-item__wrapper"},h.createElement(d.default,{styleless:!0,href:i,onClick:App.onLinkClicked,
className:"hp-list-item hp-search-result-doc-item",tabIndex:-1,"track-title":"Template item"},h.createElement(g.TemplateEmojiTile,{template:s,size:"small"}),h.createElement("div",{
className:"hp-list-item-content"},h.createElement("div",{className:"hp-list-item-title template-tile-result__title notranslate"},l,h.createElement(c.default,{str:s.title,keywords:o
})),h.createElement("div",{className:"hp-list-item-subtitle template-tile-result__subtitle"},this.renderByline()))),e)};t.displayName="SearchResultTemplateItem"
;return t=a.__decorate([u.default,v.trackContextDecorator],t)}(h.Component));t.default=b},869:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.TemplateEmojiTile=void 0
;var a=n(139),o=n(0),r=n(13),s=n(159);t.TemplateEmojiTile=function(e){var t=e.size,n=e.template,i=o.createElement(a.default,{title:n.title||""},o.createElement(r.default,{name:"note-small-plus"})),l={
backgroundColor:s.getTemplateColor(n)};return o.createElement("div",{className:"template-emoji-tile template-emoji-tile--".concat(t)},o.createElement("div",{className:"template-emoji-tile__color",
style:l}),o.createElement("div",{className:"template-emoji-tile__emoji hide-on-template-tile-hover"},i))};t.TemplateEmojiTile.displayName="TemplateEmojiTile"},870:function(e,t,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});t.LookMagnifyingGlassSpot=void 0;var a=n(1),o=(0,a.__importStar)(n(0));t.LookMagnifyingGlassSpot=function(e){var t=e.altText,n=e.inverse,r=(0,
a.__rest)(e,["altText","inverse"]),s="dig-Illustration dig-Illustration-spot".concat(n?" dig-Illustration--inverse":"");return o.createElement("svg",(0,a.__assign)({role:"presentation"},r,{
className:s,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o.createElement("title",null,t),o.createElement("path",{
d:"M246.6 107.5c-177.4-41-168.1 232.7-10.8 243.7 35 2 52.8 14.2 70 43.7 6.4 4.9 15.9 5.4 22 11.2 12.2 11.6 9.8 25.1 30.2 26.6 21.7 1.6 25.8-19.6 14.5-34.6-18.8-18.8-28.9-17.1-39.8-46.1-7.7-16.9-5.7-46.9-21.1-58.4-6.3-4.7-24.4-6.9-22-19.4 1.2-5.9 18.5-17.9 23.6-22 25.5-20.9 46.4-56.6 25.3-88.8-13.1-20-44.6-22.4-63.6-34.9-10.6-6.8-13.1-16.3-28.3-21z",
fill:"#E39D77"}),o.createElement("path",{
d:"M298.7 273.7c1.8 21 1.5 41.8 3.6 62.7-.5 5.6 4.7 15.7-3.4 17-7.3 1.4-14.6 2.5-21.7 4.6-4.4.8-5 .2-5.4-4.2-3.1-23.9-3.5-48-5-72.1-16.2-4-35.8-7.2-46.3-21.5-10.6-16.7-27.5-31.1-30.1-51.6-3.4-23.7 8.6-45 23.7-62.2 9.5-13.2 24.7-19.7 40.4-22.1 37-4.5 94.1 5.9 98.5 50.8.4 19.2.4 38.5-9.2 55.7-9.4 19.3-23.2 38.1-45.1 42.9zm-25-123.8c-36.8-2.8-61.5 32.6-51.3 66.8 7.8 17.9 18.1 38.2 39.5 41.2 37.2 12.4 68.2-28.6 66.5-63.1-1.7-24.8-30.3-46.7-54.7-44.9z",
fill:"#B4C8E1"}),o.createElement("g",{fill:"#1E1919"},o.createElement("path",{
d:"M341 421.6c-5.4-21.8-32.1-22.5-43.2-39.7-4.6-8.2-3.2-18.3-7.4-26.7-2.4-6.7-10.2-15.1-18-11.2 17.7 9.8 11.5 32.6 22.9 46.2 18.8 18.1 35.8 14.2 43.8 44.6 6.4-2.9 3.3-8.4 1.9-13.2zm-82.5-91.9c2.4-.8 1.3-4.9.6-6.9-1.4-4.2 1.5-7.7 4-10.8 2.9-3.4 8.2-.9 11.9-.2 9 3.9 18.6 7 26.1 13.6 1.6 1.5 4.2 3.1 5.9.9.9-9.6-26.8-19.5-35.3-19.4-9.5.2-22.4 10.6-17.1 20.9.9 1.6 2.5 2.3 3.9 1.9z"
}),o.createElement("path",{
d:"M264.8 345.1c-5.4-3.6-5.5-12.1-.4-15.8 7-3.4 31.2 14.1 35.4 6.1-8-5.8-17.9-7.5-27.2-10.2-8-1.2-17.6 7.2-17.3 15.3-.5 6.7 12.4 16.3 17 8.8-1.4-.3-2.7-.6-4-.8-1.2-1.2-2.2-2.5-3.5-3.4zm-1-45.8c-3 1.4-8.2 7.9-3.6 9.9 2.8-3.2 3.5-10.3 8.8-9.4 6 .8 11.9 1.6 17.8 2.5 7.8 2.5 16 3.6 23.6 6.8 1.9 1.1 3 .5 4.8-1.9-6.4-7.7-19.4-6-28.4-9.5 2.6-10.4-7.6-10.6-3.4-.2-6.8-.7-13.5-1.8-19.6 1.8zM131.5 168.6c15.2-1.5 30.1-5.6 43.3-13.5 15.5 18.3 34-1.4 51.8-1.3 23.6-5.5 44.6-22.6 53.5-45.3.8-3.1 3.8-8.5-.9-9.6-6.4 23.1-35.7 50.2-56.7 52.1 7-4 24.3-25.9 5.4-22.7-8.6 3.3-23 14.2-14.7 24-8.7 5.4-31.7 16.8-34.9.6 8.6-6.3 20.7-10 25.7-20 3.6-7.8-6.8-7.9-11.1-4.6-34 22.6 1.1 24-66.8 39.2 2 1.2 3.7 1.3 5.4 1.1zm83.7-23.8c3-8.2 9.4-12.6 17.2-15.7 1.4 8.9-10 17.3-16.8 21.9-1.1-2.3-1.1-4.2-.4-6.2zM200.9 128c-.8 10-14.1 14.6-21.5 19.1 1.5-6.3 14.6-17.9 21.5-19.1zm-42.7 51.8c32.2 3.6 26.6 27.6 26.3 52 0 11.2-4.5 21.8-5.1 32.9 1.9 12.7 16.7 3 20.8-3.6 2.6 13.4 10.2 11.2 16.3 1.4-2.4 0-2.4 0-8.1 4.3-2.9-15.8-13.3-5.4-19.6 1.9-7.3-5.5 1.3-18.1 1.4-25.8 2.7-14 2.3-28.2 2.1-42.3-6.2-33-57-26.9-72.8-4.5 13.8-3.5 20-17.9 38.7-16.3zm102.4 30.6c12 2.2 25.1-10.2 15.9-21.3 12.1.7 17.4 11.6 25.8 18.3 2.6-2.1 3-3 1.2-5-15.5-22.4-59-21.1-68.4 6 6.6 2.4 9.9-13.9 19.3-15.2-3.9 7-3 16.6 6.2 17.2z"
}),o.createElement("path",{
d:"M177.3 210.5c4.6-1.1-.1-5-1.9-6.6-13.2-10.8-36.5-10.6-45.1 5.9 6.8 1.3 8.6-6.2 14-8.6-10.5 14.3 20.1 22.1 19.6 1.3 5 1.9 7.5 9.8 13.4 8zm71.5-37.3c20.8-4.9 42.5-3.5 61.3 7.3.1-5.7-5.6-6-9.3-8.4-19.7-10.9-55-12.5-68.9 6 5.8-1.7 11-3.7 16.9-4.9zm-5 99.2c-21.7-3.8-40.6 8.1-59.8 15.9 11.3 5.3 23.9-5.4 34.9-8.2 9.6-3.2 19.4-1.9 29.3-4-1-2.3-2.1-3.2-4.4-3.7zm-33.5 20.5c-4.4 1.3-8.3 2-12.9 1.7.5 2 .4 3.9 2.6 4.3 4.2.4 9.2 2.1 12.4-1.4 2.2-1.5.4-5.4-2.1-4.6z"
})))}},871:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SearchBox=void 0
;var a=n(1),o=n(6),r=n(3),s=n(619),i=n(25),l=n(8),d=n(2),c=n(11),u=n(10),p=n(18),h=n(14),m=n(43),f=n(149),g=n(0),y=n(618),v=n(872),E=n(13),_=(0,
h.MsgFactory)("search"),S=_.defineMessages,C=_.IntlMessageFormat,b=_.F,P=S({searchPlaceholder:{msg:"Search"},searchPlaceholderV2:{msg:"Search by keyword or person"},clearSearch:{msg:"Clear search"},
offline:{msg:"Search is unavailable offline. Try searching when you are back online",description:"Tooltip for the search button when it is disabled because the user is offline"},offlineShort:{
msg:"Search is unavailable offline"},searchforPaperdocs:{msg:"Search for Paper docs"},search:{msg:"Search"}}),I=((0,d.defineMessages)({searchPlaceholder:{id:"vOBkFB",defaultMessage:"Search"},
searchPlaceholderV2:{id:"Ob7gMe",defaultMessage:"Search by keyword or person"},clearSearch:{id:"ZzAND+",defaultMessage:"Clear search"},offline:{id:"Y3RQTG",
defaultMessage:"Search is unavailable offline. Try searching when you are back online"},offlineShort:{id:"4o570L",defaultMessage:"Search is unavailable offline"},searchforPaperdocs:{id:"2UnD0g",
defaultMessage:"Search for Paper docs"},search:{id:"vOBkFB",defaultMessage:"Search"}}),function(e){a.__extends(t,e);function t(t,n){var a=e.call(this,t,n)||this;a.placeholder=null;a._isMounted=!1
;a.onFocus_=function(e){if(!a.props.isOffline){a.setState({focused:!0},(function(){a.timers.setTimeout((function(){var e;null===(e=a.searchInput)||void 0===e||e.select()}),0)}))
;a.props.onFocus&&a.props.onFocus(e)}};a.onBlur_=function(e){a.setState({focused:!1});a.props.onBlur&&a.props.onBlur(e)};a.getSearchInputValue=function(){return a.searchInput.value}
;a.onSearchBarClick=function(e){var t;a.focus();if(e.target!=a.searchInput){e.preventDefault();null===(t=a.searchInput)||void 0===t||t.select()}};a.onKeyUp_=function(e){
a.props.onKeyUp&&a.props.onKeyUp(e)};a.onKeyDown_=function(e){switch(e.which){case m.KeyCode.BACKSPACE:if(0==a.getCaretPosition()){
var t=a.state.highlightedIndex<0?a.props.tokens.length-1:a.state.highlightedIndex;a.props.removeTokenByIndex(t);a.state.highlightedIndex>=a.props.tokens.length&&a.setState({highlightedIndex:-1})}break
;case m.KeyCode.LEFT:if(0==a.getCaretPosition()){var n=a.state.highlightedIndex<0?a.props.tokens.length-1:a.state.highlightedIndex-1>=0?a.state.highlightedIndex-1:0;a.setState({highlightedIndex:n})
;e.preventDefault()}break;case m.KeyCode.RIGHT:if(a.state.highlightedIndex>=0){n=a.state.highlightedIndex+1<a.props.tokens.length?a.state.highlightedIndex+1:-1;a.setState({highlightedIndex:n})
;e.preventDefault()}break;default:a.setState({highlightedIndex:-1})}a.props.onKeyDown&&a.props.onKeyDown(e)};a.onClickToken=function(e){a.setState({highlightedIndex:e})};a.onClearClicked=function(e){
e.preventDefault();a.props.onClear&&a.props.onClear();a.focus()};a.onChange_=function(e){if((0,p.isFocused)(a.searchInput)){e&&e.target&&(e=o.assignIn({},e,{target:o.assignIn({},e.target,{
value:o.isUndefined(e.target.value)?y.searchTokensToQuery(a.props.tokens||[],e.target.value):e.target.value})}));a.props.onChange(e)}};a.expandSearchBox=function(){a.setState({focused:!0},(function(){
a.focus()}))};a.state=a.getInitialState_();return a}t.prototype.getInitialState_=function(){return{focused:!1,highlightedIndex:-1}};t.prototype.focus=function(){this.searchInput.focus()}
;t.prototype.blur=function(){this.searchInput.blur()};t.prototype.getCaretPosition=function(){var e=this.searchInput;if(document.selection){var t=document.selection.createRange()
;t.moveStart("character",-e.value.length);return t.text.length}return e.selectionEnd};t.prototype.componentDidMount=function(){this._isMounted=!0;this.placeholder=this.searchInput.placeholder
;this.setState({highlightedIndex:-1})};t.prototype.componentWillUnmount=function(){this._isMounted=!1};t.prototype.componentDidUpdate=function(e,t){var n=this.searchInput.placeholder
;this.props.tokens&&this.props.tokens.length>0?""!=n&&(this.searchInput.placeholder=""):n==this.placeholder||this.props.isOffline||(this.searchInput.placeholder=this.placeholder)
;this.props.tokens&&e.tokens!=this.props.tokens&&this.triggerInputChangeEvent()};t.prototype.triggerInputChangeEvent=function(){this.searchInput.dispatchEvent(new Event("input",{bubbles:!0,
cancelable:!0}))};t.prototype.render=function(){var e=this,t=r("hp-search-input","hp-doclist-search-box",{"hp-doclist-search-box-collapsible":this.props.collapsible,
"hp-doclist-search-focused":this.state.focused}),n=this.props.tokens||[],o=r("hp-doclist-clear-button",{hidden:!this.props.value&&!n.length}),s=n.map((function(t,n){return g.createElement(T,{token:t,
key:"token-"+n.toString(),index:n,highlightedIndex:e.state.highlightedIndex,onClick:e.onClickToken})
})),i=this.props.isOffline,d=i?new C(P.offlineShort,l.default.userLocale).format():new C(P.searchPlaceholder,l.default.userLocale).format();i||this.props.newDropboxSearch||!(0,
h.isTranslationAvailable)(P.searchPlaceholderV2.id,l.default.userLocale)||(d=new C(P.searchPlaceholderV2,l.default.userLocale).format());var c=g.createElement("input",a.__assign({name:"title",
type:"text",dir:"auto",ref:function(t){return e.searchInput=t}},this.context.ariaComboBox.input,{autoComplete:"off",autoCorrect:"off",
className:"hp-doclist-search-input selenium-hp-doclist-search-input",placeholder:d,onChange:this.onChange_,onFocus:this.onFocus_,onBlur:this.onBlur_,onKeyUp:this.onKeyUp_,onKeyDown:this.onKeyDown_,
value:this.props.value||"","aria-label":d,tabIndex:0,disabled:!this._isMounted})),p=g.createElement(b,a.__assign({},P.searchforPaperdocs)),m=new C(P.clearSearch,l.default.userLocale).format()
;return g.createElement("div",{className:t,onMouseDown:this.onSearchBarClick},g.createElement(v.default,{tooltip:i?g.createElement(b,a.__assign({},P.offline)):p,"aria-label":d,
onClick:this.expandSearchBox,searchHotkeyHandler:this.props.searchHotkeyHandler,showTooltipWhenDisabled:i,disabled:i}),g.createElement("div",{className:"hp-search-box-wrapper"},g.createElement("div",{
className:r("hp-doclist-search-input-wrapper","dmc-combobox-input",{offline:i})},g.createElement("span",{className:"icon-search"},g.createElement(E.default,{name:"search"})),g.createElement("ul",{
className:"hp-searchbox-token-list"},s),c,g.createElement(u.default,{className:o,onMouseDown:this.onClearClicked,tooltip:g.createElement("span",{className:"notranslate"},m),"aria-label":m
},g.createElement(E.default,{name:"close"})))))};t.displayName="SearchBox";t.contextTypes=s.ComboBoxWrapperContextTypes;return t=a.__decorate([c.default],t)}(g.Component));t.SearchBox=I;var T=(0,
i.createReactClass)({displayName:"Token",mixins:[f],render:function(){var e=this.props.token,t=r("hp-searchbox-token","notranslate",{
"hp-searchbox-token-highlighted":this.props.highlightedIndex==this.props.index,"hp-search-box-people-token":"people"==e.type,"hp-search-box-folder-token":"folder"==e.type,
"hp-search-box-status-token":"status"==e.type});return"people"==e.type?g.createElement("li",{className:t,onClick:this.onClick_,title:e.name},g.createElement("span",{className:"hp-searchbox-token-with"
},"with:"),e.name):"folder"==e.type?g.createElement("li",{className:t,onClick:this.onClick_,title:e.folderName},g.createElement("span",{className:"hp-searchbox-token-in"
},"in:"),e.folderName):"status"==e.type?g.createElement("li",{className:t,onClick:this.onClick_,title:e.statusName},g.createElement("span",{className:"hp-searchbox-token-status"
},"status:"),e.statusName):null},onClick_:function(){this.props.onClick(this.props.index)}})},872:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(75),r=n(21),s=n(0),i=n(15),l=n(16),d=n(119),c=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.hotKeyHandler=function(e){var n,a
;void 0===t.props.searchHotkeyHandler&&t.button?t.button?null===(n=t.button)||void 0===n||n.handleClick(e):(null===(a=t.digButton)||void 0===a?void 0:a.current)&&t.digButton.current.click():t.props.searchHotkeyHandler&&t.props.searchHotkeyHandler(e)
;e.preventDefault()};t.getBoundingClientRect=function(){return t.searchDiv.getBoundingClientRect()};t.setSearchDivRef=function(e){t.searchDiv=e};return t}t.prototype.componentDidMount=function(){
if(null===this.props.searchHotkeyHandler)this.didRegisterHotkeys=!1;else{this.didRegisterHotkeys=!0;this.registerGlobalHotkeys()}};t.prototype.componentWillUnmount=function(){
this.didRegisterHotkeys&&this.unregisterGlobalHotkeys()};t.prototype.registerGlobalHotkeys=function(){d.WindowKeyEvents.define(o.AppHotkeys.Search,this.hotKeyHandler.bind(this))
;d.WindowKeyEvents.define(o.AppHotkeys.AltSearch,this.hotKeyHandler.bind(this))};t.prototype.unregisterGlobalHotkeys=function(){d.WindowKeyEvents.off(o.AppHotkeys.Search,this.hotKeyHandler.bind(this))
;d.WindowKeyEvents.off(o.AppHotkeys.AltSearch,this.hotKeyHandler.bind(this))};t.prototype.render=function(){var e=this.props,t=(e.searchHotkeyHandler,a.__rest(e,["searchHotkeyHandler"]))
;return s.createElement("div",{ref:this.setSearchDivRef},s.createElement(r.default,{variant:"transparent",isIcon:!0,className:"hp-search-header-icon hp-icon-button",forwardedRef:this.digButton,
disabled:t.disabled,"track-name":t.track,onClick:function(e){return t.onClick?t.onClick(e):null},tooltip:{title:t.tooltip},"aria-label":t["aria-label"]},s.createElement(l.UIIcon,{src:i.SearchLine})))}
;t.displayName="SearchButton";t.hotkeyClassname="search-button-hotkeys";return t}(s.Component);t.default=c},873:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.SearchResultPlaceholder=void 0;var a=n(3),o=n(0),r=n(13);t.SearchResultPlaceholder=function(e){var t=a("hp-search-placeholder","placeholder-rows-".concat(e.rows));return o.createElement("div",{
className:t},o.createElement(r.default,{name:"search-skeletons"}),o.createElement("div",{className:"animated-layer"}))}},874:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(3),r=n(2),s=n(10),i=n(14),l=n(0),d=n(13),c=(0,i.MsgFactory)("search"),u=c.F,p=(0,c.defineMessages)({showmore:{msg:"Show more"}}),h=((0,r.defineMessages)({showmore:{id:"JZEdSO",
defaultMessage:"Show more"}}),function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=o("hp-list-item","hp-list-show-more-button")
;return l.createElement(s.default,a.__assign({styleless:!0,className:e,href:"#",tabIndex:-1,"track-title":"show more"},this.props),l.createElement("div",{className:"hp-list-item-icon"
},l.createElement(d.default,{name:"caret"})),l.createElement("div",{className:"hp-list-item-content"},l.createElement(u,a.__assign({},p.showmore))))};t.displayName="ShowMoreButton";return t
}(l.Component));t.default=h},875:function(e,t,n){var a;Object.defineProperty(t,"__esModule",{value:!0});t.getReactClassForNotificationStoryType=t.notificationClassesByType=void 0
;var o=n(1),r=n(876),s=n(1555),i=n(1556),l=n(1557),d=n(594),c=n(1558),u=n(7),p=n(1559),h=n(1560),m=n(1561),f=n(1562),g=n(1563),y=n(1564),v=n(0),E=n(1565)
;t.notificationClassesByType=((a={})[u.NotificationType.Comment]=d.default,a[u.NotificationType.CommentReminder]=d.default,a[u.NotificationType.PadInvite]=m.default,
a[u.NotificationType.PadReadReceipt]=f.default,a[u.NotificationType.PadRequestAccess]=g.default,a[u.NotificationType.Reacji]=y.default,a[u.NotificationType.DocArchived]=c.default,
a[u.NotificationType.NewMention]=h.default,a[u.NotificationType.NewTask]=h.default,a[u.NotificationType.CompleteTask]=h.default,a[u.NotificationType.IncompleteTask]=h.default,
a[u.NotificationType.TimelineItemAssignment]=h.default,a[u.NotificationType.TimelineItemComplete]=h.default,a[u.NotificationType.TimelineItemIncomplete]=h.default,
a[u.NotificationType.TimelineItemReminderStart]=E.default,a[u.NotificationType.TimelineItemReminderEnd]=E.default,a[u.NotificationType.FolderInvite]=p.default,
a[u.NotificationType.CollectionComment]=r.default,a[u.NotificationType.CollectionInvite]=s.default,a[u.NotificationType.CollectionReacji]=i.default,
a[u.NotificationType.CollectionReadReceipt]=l.default,a);function _(e){return e.notifications.length>0?t.notificationClassesByType[e.notifications[0].type]:null}
t.getReactClassForNotificationStoryType=_;var S=function(e){o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
var e=_(this.props.notificationStory);return e?v.createElement(e,this.props):null};t.displayName="NotificationStoryCell";return t}(v.PureComponent);t.default=S},876:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(6),r=n(72),s=n(141),i=n(8),l=n(2),d=n(156),c=n(50),u=n(168),p=n(137),h=n(20),m=n(0),f=n(182),g=n(166),y=(0,
n(5).PaperIntlFactory)().F,v=(0,l.defineMessages)({someonecommentedwithastickerindocTitle:{id:"poBSsJ",defaultMessage:"Someone commented with a sticker in {docTitle}"},
actornamecommentedwithastickerindocTitle:{id:"pLvJTQ",defaultMessage:"{actorName} commented with a sticker in {docTitle}"},actorNameandactorNamecommentedwithastickerindocTitle:{id:"mNfTE0",
defaultMessage:"{actor1Name} and {actor2Name} commented with a sticker in {docTitle}"},actorNameandnumOtherspluraloneoneotherotherotherscommentedwithastickerindocTitle:{id:"c7LvYh",
defaultMessage:"{actor1Name} and {numOthers, plural,\n                  one {one other}\n                  other {# others}\n                } commented with a sticker in {docTitle}"},
someonecommentedindocTitle:{id:"2sz3rW",defaultMessage:"Someone commented in {docTitle}"},actornamecommentedindocTitle:{id:"Nn8Fd8",defaultMessage:"{actorName} commented in {docTitle}"},
actorNameandactorNamecommentedindocTitle:{id:"asQfZY",defaultMessage:"{actor1Name} and {actor2Name} commented in {docTitle}"},actorNameandnumOtherspluraloneoneotherotherotherscommentedindocTitle:{
id:"+gCzWs",defaultMessage:"{actor1Name} and {numOthers, plural,\n                  one {one other}\n                  other {# others}\n                } commented in {docTitle}"},
someoneCommentedSticker:{id:"sfiSNN",defaultMessage:"Someone commented with a sticker"},actorNameCommentedSticker:{id:"IOukA4",defaultMessage:"{actorName} commented with a sticker"},
actorNamesCommentedSticker:{id:"MZxesC",defaultMessage:"{actor1Name} and {actor2Name} commented with a sticker"},actorNameAndMoreCommentedSticker:{id:"NxR8mZ",
defaultMessage:"{actor1Name} and {numOthers, plural, one {one other} other {# others}} commented with a sticker"},someoneCommented:{id:"/ucigw",defaultMessage:"Someone commented"},actorNameCommented:{
id:"RaTcNT",defaultMessage:"{actorName} commented"},actorNamesCommented:{id:"d4jCpq",defaultMessage:"{actor1Name} and {actor2Name} commented"},actorNameAndMoreCommented:{id:"6LNYYd",
defaultMessage:"{actor1Name} and {numOthers, plural, one {one other} other {# others}} commented"}}),E=function(e){a.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.renderCommentExcerpt=function(e,t,n){var a=m.createElement("div",null);(0,c.loggingTryCatch)((function(){if(e.commentZatext){var o=(new r.default).fromJsonableNoCloning(e.commentPool),l={
renderContext:g.thisBrowserRenderContext(),disallowAnchorTags:!0,locale:i.default.userLocale,maxChars:t,maxLines:n,staticReactMarkup:!0
},d=f.renderEditorStaticHtml(e.commentZatext,o,"commententry",l,(0,s.default)()),c=m.createElement("div",{dangerouslySetInnerHTML:{__html:d.html}});a=m.createElement("div",{
className:"hp-notification-collection-comment-content","data-mention-person-pad-id":e.localPadId},c)}}));return a};t.prototype.isSticker=function(e){var t=e.commentZatext;if(!t)return!1
;var n=d.getAllEmbedsInPad(t,e.commentPool),a="*"==t.text[h.Position.ROOT_ZONE].trim()&&1==Object.keys(t.text).length,o=1==n.length&&n[0].embed&&-1!=["sticker","live-sticker"].indexOf(n[0].embed.slug)
;return a&&o};t.prototype.getSentence=function(){var e=this.props.notificationStory.notifications,t=m.createElement("strong",null,p.getDocTitleElement(e[0].renderedPayload.collectionTitle))
;e=e.filter((function(e){return!!e.renderedPayload.actorName}));var n=o.uniq(e.map((function(e){return e.renderedPayload.actorName}))).map((function(e){return m.createElement("strong",null,e)}))
;if(this.isSticker(e[0].renderedPayload)){if(this.props.hideTitle){if(0==n.length)return m.createElement(y,a.__assign({},v.someoneCommentedSticker));if(1==n.length){var r=n[0]
;return m.createElement(y,a.__assign({},v.actorNameCommentedSticker,{values:{actorName:r}}))}if(2==n.length){var s=n[0],i=n[1];return m.createElement(y,a.__assign({},v.actorNamesCommentedSticker,{
values:{actor1Name:s,actor2Name:i}}))}s=n[0];var l=n.length-1;return m.createElement(y,a.__assign({},v.actorNameAndMoreCommentedSticker,{values:{actor1Name:s,numOthers:l}}))}
if(0==n.length)return m.createElement(y,a.__assign({values:{docTitle:t}},v.someonecommentedwithastickerindocTitle));if(1==n.length){r=n[0];return m.createElement(y,a.__assign({values:{actorName:r,
docTitle:t}},v.actornamecommentedwithastickerindocTitle))}if(2==n.length){s=n[0],i=n[1];return m.createElement(y,a.__assign({values:{actor1Name:s,actor2Name:i,docTitle:t}
},v.actorNameandactorNamecommentedwithastickerindocTitle))}s=n[0],l=n.length-1;return m.createElement(y,a.__assign({values:{actor1Name:s,numOthers:l,docTitle:t}
},v.actorNameandnumOtherspluraloneoneotherotherotherscommentedwithastickerindocTitle))}if(this.props.hideTitle){if(0==n.length)return m.createElement(y,a.__assign({},v.someoneCommented))
;if(1==n.length){r=n[0];return m.createElement(y,a.__assign({},v.actorNameCommented,{values:{actorName:r}}))}if(2==n.length){s=n[0],i=n[1]
;return m.createElement(y,a.__assign({},v.actorNamesCommented,{values:{actor1Name:s,actor2Name:i}}))}s=n[0],l=n.length-1;return m.createElement(y,a.__assign({},v.actorNameAndMoreCommented,{values:{
actor1Name:s,numOthers:l}}))}if(0==n.length)return m.createElement(y,a.__assign({values:{docTitle:t}},v.someonecommentedindocTitle));if(1==n.length){r=n[0];return m.createElement(y,a.__assign({
values:{actorName:r,docTitle:t}},v.actornamecommentedindocTitle))}if(2==n.length){s=n[0],i=n[1];return m.createElement(y,a.__assign({values:{actor1Name:s,actor2Name:i,docTitle:t}
},v.actorNameandactorNamecommentedindocTitle))}s=n[0],l=n.length-1;return m.createElement(y,a.__assign({values:{actor1Name:s,numOthers:l,docTitle:t}
},v.actorNameandnumOtherspluraloneoneotherotherotherscommentedindocTitle))};t.prototype.render=function(){var e=this.props.notificationStory.notifications;return m.createElement(u.default,{
notifications:e,app:this.props.app,stores:this.props.stores},m.createElement("span",null,this.getSentence()),m.createElement("div",null,t.renderCommentExcerpt(e[0].renderedPayload,100,2)))}
;t.displayName="CollectionCommentNotification";return t}(m.PureComponent);t.default=E},877:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.createTimelineDateRangeText=t.formatTimelineTitlePlainTextWithDates=void 0;var a=n(416),o=(0,n(191).MsgFactory)("timeline-notifications").IntlDateTimeFormat
;t.formatTimelineTitlePlainTextWithDates=function(e,t,n,a){void 0===a&&(a="en-US");var o=r(t,n,a);return o?"".concat(e," (").concat(o,")"):e};function r(e,t,n){void 0===n&&(n="en-US")
;if(!e||!t||isNaN(e.getTime())||isNaN(t.getTime()))return null;var r=e.getFullYear()!=t.getFullYear()?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"
},s=new o(n,r).format(e),i=new o(n,r).format(t);return a.isSameDay(e,t)?s:"".concat(s," — ").concat(i)}t.createTimelineDateRangeText=r},878:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});var a=n(1),o=n(110),r=n(2),s=n(14),i=n(0),l=n(41),d=n(84),c=(0,s.MsgFactory)("search"),u=c.F,p=(0,c.defineMessages)({youviewedlastViewedDate:{
description:"Shows when you viewed this doc last time.",msg:"You viewed {lastViewedDate}"},youeditedlastEditedDate:{description:"Shows when you edited this doc last time.",
msg:"You edited {lastEditedDate}"},editoreditedlastEditedDate:{description:"Shows who and when edited this doc last time.",msg:"{editor} edited {lastEditedDate}"},
preseparatorYouviewedandeditedlastViewedRelativeTimeAgo:{description:"Shows when you viewed and edited this doc last time.",msg:"{preSeparator}You viewed and edited {lastViewedRelativeTimeAgo}"}});(0,
r.defineMessages)({youviewedlastViewedDate:{id:"IKpIQ7",defaultMessage:"You viewed {lastViewedDate}"},youeditedlastEditedDate:{id:"lissgN",defaultMessage:"You edited {lastEditedDate}"},
editoreditedlastEditedDate:{id:"gYfaEP",defaultMessage:"{editor} edited {lastEditedDate}"},preseparatorYouviewedandeditedlastViewedRelativeTimeAgo:{id:"ouNGtc",
defaultMessage:"{preSeparator}You viewed and edited {lastViewedRelativeTimeAgo}"}});t.default=function(e){
var t=e.pad,n=e.preSeparator,r=e.postSeparator,s=t.myLastViewedDate?i.createElement(u,a.__assign({values:{lastViewedDate:i.createElement(d.TimeAgo,{date:t.myLastViewedDate,pastOnly:!0})}
},p.youviewedlastViewedDate)):null;if(e.lastViewOnly)return s?i.createElement("span",null,n,s,r):i.createElement("span",null);var c=t.myLastEditedDate?i.createElement(u,a.__assign({values:{
lastEditedDate:i.createElement(d.TimeAgo,{date:t.myLastEditedDate,pastOnly:!0})}},p.youeditedlastEditedDate)):null;c||(c=t.lastEditedDate?i.createElement(u,a.__assign({values:{editor:t.lastEditorName,
lastEditedDate:i.createElement(d.TimeAgo,{date:t.lastEditedDate,pastOnly:!0})}},p.editoreditedlastEditedDate)):null)
;if(e.lastEditOnly)return c?i.createElement("span",null,n,c,r):i.createElement("span",null);var h=o.default.toTimestamp(t.myLastViewedDate),m=o.default.toTimestamp(t.myLastEditedDate)
;if(h&&m&&Math.abs(h-m)<=l.Time.MINUTE)return i.createElement(u,a.__assign({values:{preSeparator:n,lastViewedRelativeTimeAgo:i.createElement(d.TimeAgo,{date:t.myLastViewedDate,pastOnly:!0})}
},p.preseparatorYouviewedandeditedlastViewedRelativeTimeAgo));if(s&&c)return i.createElement("span",null,n,s,i.createElement("span",{className:"hp-doclist-entry-sharing-status-separator notranslate"
}," · "),c);var f=s||c;return f?i.createElement("span",null,n,f):i.createElement("span",null)}},887:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.AutoScrollingCardCarousel=void 0
;var a=n(1),o=n(6),r=n(316),s=n(0),i=function(e){a.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.onEnterCard=function(e){if(o.has(t.props.cardRefs,e)){
t.props.cardRefs[e].play()}};t.onBeforeLeaveCard=function(e){if(o.has(t.props.cardRefs,e)){t.props.cardRefs[e].stop()}};return t}t.prototype.moveToNextCard=function(e){if(this.carousel){
var t=(e+1)%this.carousel.cards.length;this.carousel.jump(t)}};t.prototype.render=function(){var e=this;return s.createElement(r.default,{ref:function(t){return e.carousel=t},
className:this.props.className,embedded:!0,loopCards:!0,showNavButtons:!0,skipButtonDisplay:r.SkipButtonDisplay.Never,onEnterCard:this.onEnterCard,onBeforeLeaveCard:this.onBeforeLeaveCard,
disableKeyboardShortcuts:this.props.disableKeyboardShortcuts},this.props.cards)};t.displayName="AutoScrollingCardCarousel";return t}(s.PureComponent);t.AutoScrollingCardCarousel=i},
888:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.GifCarouselCard=void 0;var a=n(1),o=n(316),r=n(52),s=n(0),i=function(e){a.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.gif=null;t.loggedCardStart=!1;return t}t.prototype.play=function(){if(this.gif){this.gif.play()
;document.hidden||this.loggedCardStart||(this.loggedCardStart=!0)}};t.prototype.stop=function(){if(this.gif){!document.hidden&&this.loggedCardStart&&(this.loggedCardStart=!1);this.gif.pause()
;this.gif.currentTime=0}};t.prototype.render=function(){
var e=this,t=this.props.classNamePrefix?this.props.classNamePrefix+"-gif":void 0,n=this.props.classNamePrefix?this.props.classNamePrefix+"-body":void 0,a=s.createElement("video",{ref:function(t){
return e.gif=t},className:t,controls:!1,muted:!0,src:(0,r.default)(this.props.url),onEnded:function(){var t,n;return null===(n=(t=e.props).onEnded)||void 0===n?void 0:n.call(t,e.props.idx)}})
;return s.createElement(o.Card,{id:this.props.name,key:this.props.idx},this.props.children,s.createElement("div",{className:n},a))};t.displayName="GifCarouselCard";return t}(s.PureComponent)
;t.GifCarouselCard=i},952:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=n(953),r=n(649),s=n(954),i=n(0),l=function(e){var t=i.createElement(s.default,{
store:e.padController.folderStore,stores:e.stores,padController:e.padController,peopleList:e.padController.peopleList}),n=a("header-pad-title-and-folder",{
"header-pad-title-and-folder-sidebar":e.showSidebarButton});return i.createElement("div",{className:n},i.createElement(r.default,{favoriteProps:{localPadId:e.localPadId},padController:e.padController,
stores:e.stores}),i.createElement("div",{className:"hp-header-pad-subtitle"},t,i.createElement(o.default,{peopleList:e.padController.peopleList,padController:e.padController})))}
;l.displayName="PadTitleAndFolder";t.default=l},953:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(6),r=n(8),s=n(2),i=n(120),l=n(7),d=n(11),c=n(0),u=n(13),p=n(4),h=(0,
n(5).PaperIntlFactory)().F,m=(0,s.defineMessages)({onlyme:{id:"sVE0C/",defaultMessage:"Only me"},sharedWith:{id:"+MPl2e",
defaultMessage:"Shared with {numOthers, plural, one {{otherUserNameForPad}} other {# others}}"},everyoneatfolderTeamName:{id:"BYD+YZ",defaultMessage:"Everyone at {folderTeamName}"},sharedWithOther:{
id:"tZPmV9",defaultMessage:"Shared with {numOthers, plural, one {{otherUserName}} other {# others}}"},onlyPeopleInvitedTemplates:{id:"9bYL8/",
defaultMessage:"Only people invited to this template can find it in Paper"},onlyPeopleInvitedDocs:{id:"Hk4Y8R",defaultMessage:"Only people invited to this doc can find it in Paper"},
sharedWithFolderTeamName:{id:"Vp/p2x",defaultMessage:"Shared with {folderTeamName} + {numExternal, number}"},sharedWithFolderName:{id:"c8C+b5",defaultMessage:"Shared with {folderName}"},
sharedWithNumOthersFolderName:{id:"ZaLZkg",defaultMessage:"Shared with {numOthers, plural, one {{otherUserName}} other {# others}} + {folderName}"},everyoneAtFolderTeamNameCanFindTemplate:{
id:"PLx0RI",defaultMessage:"Everyone at {folderTeamName} can find this template in Paper because they can access {folderName}."},everyoneAtFolderTeamNameCanFindDoc:{id:"ZIKywB",
defaultMessage:"Everyone at {folderTeamName} can find this doc in Paper because they can access {folderName}."},membersOfFolderNameTemplate:{id:"8YmYEA",
defaultMessage:"Members of {folderName} and people invited to this template can find it in Paper."},membersOfFolderNameDoc:{id:"mv5GXH",
defaultMessage:"Members of {folderName} and people invited to this doc can find it in Paper."},onlyPeopleInvitedTemplate:{id:"/D8xtQ",
defaultMessage:"Only people invited to this template can find it in Paper."},onlyPeopleInvitedDoc:{id:"nP1orE",defaultMessage:"Only people invited to this doc can find it in Paper."}}),f=function(e){
a.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.handlePeopleListChange=function(){n.setState({guestPolicySpec:n.props.peopleList.getGuestPolicySpec(),
padInvitedUsers:n.props.peopleList.getAllUsersOnDocExceptKickedOut().map((function(e){return e.info}))})};n.handleFolderStoreChange=function(){n.props.padController&&n.setState({
folderData:n.props.padController.getFolderData()})};n.state={folderData:t.padController&&t.padController.getFolderData(),guestPolicySpec:t.peopleList.getGuestPolicySpec(),
padInvitedUsers:t.peopleList.getAllUsersOnDocExceptKickedOut().map((function(e){return e.info}))};return n}t.prototype.componentDidMount=function(){var e,t
;null===(t=null===(e=this.props.padController)||void 0===e?void 0:e.folderStore)||void 0===t||t.on("change",this.handleFolderStoreChange);this.props.peopleList.on("change",this.handlePeopleListChange)
};t.prototype.componentWillUnmount=function(){var e,t;null===(t=null===(e=this.props.padController)||void 0===e?void 0:e.folderStore)||void 0===t||t.off("change",this.handleFolderStoreChange)
;this.props.peopleList.off("change",this.handlePeopleListChange)};t.prototype.inTeamFolder=function(){
return this.state.folderData&&this.state.folderData.folder&&this.state.folderData.folder.guestPolicy==l.FolderGuestPolicy.public};t.prototype.inInaccessibleFolder=function(){
return this.state.folderData&&!this.state.folderData.members};t.prototype.isLegacyInviteOnly=function(){return this.isInviteOnly()&&"default"==this.state.guestPolicySpec.folderMemberGuestPolicy}
;t.prototype.isInviteOnly=function(){return"deny"==this.state.guestPolicySpec.publicGuestPolicy&&"deny"==this.state.guestPolicySpec.guestPolicy};t.prototype.getPadInvitedUserInfo=function(){
return this.state.padInvitedUsers.filter((function(e){return"guest"!=e.status})).map((function(e){return{encryptedAccountId:e.secureUserId.substring(2),encryptedDomainId:e.encryptedTeamId,name:e.name}
}))};t.prototype.getFolderInvitedUserInfo=function(){return this.state.folderData&&this.state.folderData.members?this.state.folderData.members.map((function(e){return{
encryptedAccountId:e.encryptedAccountId,encryptedDomainId:e.encryptedDomainId,name:e.name}})):[]};t.prototype.getMergedInvitedUserInfo=function(){
var e=o.keyBy(this.getPadInvitedUserInfo().concat(this.getFolderInvitedUserInfo()),"encryptedAccountId");return o.values(e)};t.prototype.getOtherUserName=function(e){
var t=r.default.encryptedUserId,n=o.find(e,(function(e){return e.encryptedAccountId!=t}));return n?n.name:null};t.prototype.getSharingStatusInfo=function(){
var e,t,n=this.getMergedInvitedUserInfo(),o=n.length,r=this.getOtherUserName(n);if(this.isLegacyInviteOnly()){var s=this.getPadInvitedUserInfo(),i=s.length;e="acl-lock-filled"
;if(1==i)t=c.createElement(h,a.__assign({},m.onlyme));else{var l=this.getOtherUserName(s);t=c.createElement(h,a.__assign({values:{otherUserNameForPad:l,numOthers:i-1}},m.sharedWith))}
}else if(this.inTeamFolder()){var d=this.state.folderData.folder.encryptedDomainId,u=this.state.folderData.teamName,p=n.filter((function(e){return e.encryptedDomainId!=d})).length
;e="acl-building-filled";t=0!=p?c.createElement(h,a.__assign({},m.sharedWithFolderTeamName,{values:{folderTeamName:u,numExternal:p}})):c.createElement(h,a.__assign({},m.everyoneatfolderTeamName,{
values:{folderTeamName:u}}))}else if(this.inInaccessibleFolder()){var f=this.state.folderData.folder.name;e="acl-shared-filled";t=1==o?c.createElement(h,a.__assign({},m.sharedWithFolderName,{values:{
folderName:f}})):c.createElement(h,a.__assign({},m.sharedWithNumOthersFolderName,{values:{numOthers:o-1,otherUserName:r,folderName:f}}))}else if(1==o){
e=this.isInviteOnly()?"acl-lock-filled":"acl-person-filled";t=c.createElement(h,a.__assign({},m.onlyme))}else{e=this.isInviteOnly()?"acl-lock-filled":"acl-shared-filled"
;t=c.createElement(h,a.__assign({values:{otherUserName:r,numOthers:o-1}},m.sharedWithOther))}return{iconName:e,labelMessage:t}};t.prototype.render=function(){
var e=this.getSharingStatusInfo(),t=c.createElement("span",{className:"hp-header-privacy-avatar-doc-type"},e.labelMessage);return c.createElement(i.default,{className:"hp-header-privacy-avatar",
tooltip:this.tooltipContent()},!this.props.hideIcon&&c.createElement(u.default,{name:e.iconName}),t)};t.prototype.tooltipContent=function(){var e,t=this.props.padController.isPadTemplate()
;if(this.isLegacyInviteOnly())e=t?c.createElement(h,a.__assign({},m.onlyPeopleInvitedTemplates)):c.createElement(h,a.__assign({},m.onlyPeopleInvitedDocs));else if(this.inTeamFolder()){
var n=(r=this.state.folderData.parentFolders).length?r[0].name:this.state.folderData.folder.name,o=this.state.folderData.teamName
;e=t?c.createElement(h,a.__assign({},m.everyoneAtFolderTeamNameCanFindTemplate,{values:{folderTeamName:o,folderName:c.createElement("strong",null,n)}
})):c.createElement(h,a.__assign({},m.everyoneAtFolderTeamNameCanFindDoc,{values:{folderTeamName:o,folderName:c.createElement("strong",null,n)}}))}else if(this.state.folderData){var r
;n=(r=this.state.folderData.parentFolders).length?r[0].name:this.state.folderData.folder.name;e=t?c.createElement(h,a.__assign({},m.membersOfFolderNameTemplate,{values:{
folderName:c.createElement("strong",null,n)}})):c.createElement(h,a.__assign({},m.membersOfFolderNameDoc,{values:{folderName:c.createElement("strong",null,n)}}))
}else e=t?c.createElement(h,a.__assign({},m.onlyPeopleInvitedTemplate)):c.createElement(h,a.__assign({},m.onlyPeopleInvitedDoc));return c.createElement("div",null,c.createElement("div",{
className:"hp-header-privacy-avatar-tooltip-explanation"},c.createElement("div",null,e)))};t.displayName="HeaderPrivacyAvatar";return t=a.__decorate([d.default,p.trackContextDecorator],t)
}(c.PureComponent);t.default=f},954:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(6),r=n(25),s=n(8),i=n(2),l=n(1835),d=n(60),c=n(7),u=n(76),p=n(172),h=n(273),m=n(4),f=n(488),g=n(149),y=n(0),v=n(17),E=(0,n(5).PaperIntlFactory)().F,_=(0,i.defineMessages)({
addtofolder:{id:"v62WDv",defaultMessage:"Add to folder"},folderunavailableoffline:{id:"DqyxJ6",defaultMessage:"Folder unavailable offline"},movetofolder:{id:"p+Enby",defaultMessage:"Move to folder"}
}),S=(0,r.createReactClass)({displayName:"PadFolder",mixins:[g,m.TrackContextMixin],getInitialState:function(){return{isOffline:!1}},handleNetworkStatusChange:function(){this.setState({
isOffline:this.props.stores.networkStatus.isOffline()})},canCurrentUserChangeFolder:function(){var e=this.props.peopleList;return e&&e.canCurrentUserChangeFolder()},render:function(){var e=this
;if(!this.props.store)return null;if(this.props.padController.isCloudDoc())return y.createElement("span",{className:"hp-pad-folder__wrapper"},y.createElement(l.default,{key:"breadcrumbs",
isOffline:this.state.isOffline,padController:this.props.padController}),y.createElement("span",{className:"hp-header-subtitle-dot-separator"}));var t,n=this.props.store.getFolderData()
;if(!n)return this.renderAddToFolder();window.App&&s.default.isSignedIn()&&(t=App.onLinkClicked);var a=n.parentFolders.concat([n.folder]).map((function(n,a){var o=function(e){
return u.prettyFolderUrl(e)}(n);return y.createElement(h.HpCrumb,{href:o,onClick:t,isOffline:e.state.isOffline,key:n.encryptedId},y.createElement(d.default,{str:n.name}))}))
;return y.createElement("span",{className:"hp-pad-folder__wrapper"},y.createElement("div",{className:"hp-pad-folder"},y.createElement("span",{
className:"selenium-pad-folder-breadcrumb hp-pad-folder-name"},y.createElement(h.HpBreadcrumbs,{isOffline:this.state.isOffline,size:"small"},a))),y.createElement("span",{
className:"hp-header-subtitle-dot-separator"}))},renderAddToFolder:function(){if(!this.canCurrentUserChangeFolder())return null;var e=y.createElement(E,a.__assign({},_.addtofolder))
;this.state.isOffline?e=y.createElement(E,a.__assign({},_.folderunavailableoffline)):s.default.isPersonalDomainUser||(e=y.createElement(E,a.__assign({},_.movetofolder)))
;return y.createElement("span",{className:"hp-pad-folder__wrapper"},y.createElement("div",{className:"hp-pad-folder"},y.createElement(f.default,{
className:"selenium-add-to-folder-button hp-breadcrumbs-unset",addNotMove:!0,padController:this.props.padController,stores:this.props.stores,disabled:this.state.isOffline},e)),y.createElement("span",{
className:"hp-header-subtitle-dot-separator"}))},onLinkClick:function(e){if(!v.default.events.shouldOpenInNewTab(e)){e.preventDefault();App.navigateToUrl(e.currentTarget.href)}},
removeFromFolder:function(){var e=this.props.store.getFolderData();m.IntentionEvent.RemovePadFromFolder.track(a.__assign({context:m.AppContext.PadHeader,
is_public:e.folder.guestPolicy==c.FolderGuestPolicy.public},(0,p.default)(e)));this.props.store.clearFolder()},componentDidMount:function(){var e=this;this.handleNetworkStatusChange()
;this.props.stores.networkStatus.addEventListener((function(){e.handleNetworkStatusChange()}));this.bindEvents()},componentDidUpdate:function(){this.bindEvents()},componentWillUnmount:function(){
this.props.peopleList.off("change",this.onChange);this.props.store&&this.props.store.off("change",this.onChange);this.props.stores.networkStatus.removeEventListener(this.handleNetworkStatusChange)},
bindEvents:function(){this.props.peopleList.off("change",this.onChange);this.props.store&&this.props.store.on("change",this.onChange)
;this.props.peopleList&&this.props.peopleList.on("change",this.onChange)},onChange:o.debounce((function(){this.forceUpdate()}),30)});t.default=S},955:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.SubscribeButton=void 0;var a=n(1),o=n(140),r=n(3),s=n(8),i=n(2),l=n(11),d=n(0),c=n(130),u=(0,n(5).PaperIntlFactory)().F,p=(0,i.defineMessages)({
isSubscribed:{id:"kO6xAI",defaultMessage:"Following"},isNotSubscribed:{id:"Zlh6em",defaultMessage:"Follow"},tofollowdocsyoullneedtoadjustyourNotificationsettings:{id:"wgCmvC",
defaultMessage:"To follow docs, you’ll need to adjust your Notification settings."}}),h=d.memo((function(e){if(!s.default.isSignedIn())return null
;var t=e.optedOutOfEmails,n=e.localPadId,i=e.isSubscribed,l=e.isBinder,h=void 0!==l&&l,m=e.className,f=null;t&&(f=d.createElement("div",{className:"follow-button-disabled-tooltip"
},d.createElement(u,a.__assign({},p.tofollowdocsyoullneedtoadjustyourNotificationsettings))));var g=r("hp-header-follow-button",{"hp-menu-selected":i,"hp-header-follow-button--disabled":t},m)
;return d.createElement(c.default,{commands:h?["follow_binder_page","unfollow_binder_page"]:["follow_doc","unfollow_doc"],context:[]},(function(e){var t=e.runCommandById
;return d.createElement(o.default,{className:g,onClick:function(){n&&t(i?h?"unfollow_binder_page":"unfollow_doc":h?"follow_binder_page":"follow_doc")},"aria-checked":i,tooltip:f?{title:f}:void 0,
role:"menuitemcheckbox",disabled:!n},i?d.createElement(u,a.__assign({},p.isSubscribed,{values:{isSubscribed:i}})):d.createElement(u,a.__assign({},p.isNotSubscribed,{values:{isSubscribed:i}})))}))}))
;h.displayName="SubscribeButtonComponent";h.displayName="SubscribeButton";t.SubscribeButton=(0,l.withEventHandler)(h)},956:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var a=n(1),o=n(140),r=n(25),s=n(2),i=n(0),l=n(48),d=n(4),c=n(492),u=n(5),p=n(128),h=(0,u.PaperIntlFactory)().F,m=(0,s.defineMessages)({nochangesorcommentstoshow:{id:"Du6pAS",
defaultMessage:"No changes or comments to show."},templatehistory:{id:"jeTUGV",defaultMessage:"Template history"},dochistory:{id:"DCo6Bq",defaultMessage:"Doc history"}}),f=(0,r.createReactClass)({
displayName:"ViewHistoryButton",mixins:[d.TrackContextMixin],handleClick:function(){if(this.props.padController){(0,d.trackUi)("click_more_menu_version_history");var e={
controller:this.props.padController,isTemplate:this.props.isTemplate,mode:"segments",disableUndo:this.props.disableUndo,trackContext:this.getTrackContext()};if(!e.controller.getPadId()){
l.default.show(i.createElement(l.default,{autoDismiss:!0},i.createElement(h,a.__assign({},m.nochangesorcommentstoshow))));return}c.open(e)}},render:function(){
var e=this.props,t=e.className,n=e.isTemplate,r=e.padController,s=p("hp-menu-versions-button",t);return i.createElement(o.default,{role:"menuitem",className:s,onClick:this.handleClick,disabled:!r
},n?i.createElement(h,a.__assign({},m.templatehistory)):i.createElement(h,a.__assign({},m.dochistory)))}});t.default=f},957:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.ConfirmDisablePopup=t.ViewOnlyDropDown=t.CreateViewOnlyLinkButton=t.VIEW_ONLY_ENABLED_STORAGE_KEY=void 0
;var a=n(1),o=n(4),r=n(33),s=n(21),i=n(30),l=n(11),d=n(12),c=n(241),u=n(77),p=n(352),h=n(114),m=n(34),f=n(14),g=n(70),y=n(0),v=n(29),E=n(32),_=n(88),S=n(410),C=n(4),b=n(297),P=n(17),I=(0,
f.MsgFactory)("sharing"),T=I.F,N=(0,I.defineMessages)({docunpublished:{msg:"Doc unpublished"},copied:{msg:"Public link copied to your clipboard.",
description:"Lets the user know that a public link was copied to the clipboard."},publishdoc:{msg:"Publish doc"},copylink:{msg:"Copy link"},unpublish:{msg:"Unpublish"},publisheddoc:{
msg:"Published doc"},unpublishthisdoc:{msg:"Unpublish this doc?"},loseAccess:{msg:"Your doc will no longer be publicly viewable. Anyone with the published doc link will lose access."},cancel:{
msg:"Cancel"}});t.VIEW_ONLY_ENABLED_STORAGE_KEY="view-only-enabled";var k=function(e){a.__extends(n,e);function n(n){var r=e.call(this,n)||this;r.updateToken=function(){
p.getLinkTrackingToken(r.props.padController.getPadId(),b.TrafficSources.ViewOnlyPadHeaderCopyButton,r.handleGetLinkTrackingToken)};r.handleGetLinkTrackingToken=function(e){
e&&e.success&&(r.token=e.token)};r.handleLocalStorageEvent=function(){clearInterval(r.getViewOnlyIdTimer);if(h.localStorage.getObject(t.VIEW_ONLY_ENABLED_STORAGE_KEY)==S.hashCode(r.props.localPadId)){
r.setState({hasViewOnlyLinkEnabled:!0});r.getViewOnlyIdTimer=r.timers.setInterval((function(){e=r.props.localPadId,t=r.updateViewOnlyPadId,d.get({url:"/published/id/".concat(e),
analyticsTag:"get-enabled-view-only-pad-id",shardingKey:d.getStatelessShardingKey(),successHandler:t});var e,t}),2e3)}};r.updateViewOnlyPadId=function(e){if(e&&e.success){r.setState({
viewOnlyPadId:e.viewOnlyPadId});clearInterval(r.getViewOnlyIdTimer);h.localStorage.removeItem(t.VIEW_ONLY_ENABLED_STORAGE_KEY);C.trigger("view-only-id-updated",{viewOnlyPadId:e.viewOnlyPadId})}}
;r.onCreateClick=function(e){e.preventDefault();o.IntentionEvent.CreateViewOnlyLink.track({__padId:r.props.localPadId,context:o.AppContext.PadHeader});(0,v.ensureWindowName)()
;var t="/published/preview/".concat(r.props.localPadId);(0,v.unsafeWindowOpen)(t)};r.openViewOnlyLink=function(){o.IntentionEvent.OpenViewOnlyLink.track({__padId:r.props.localPadId,
viewOnlyPadId:r.state.viewOnlyPadId,context:o.AppContext.PadHeader});var e=r.props.padController.getTitle(),t=E.relativePrettyPaperViewOnlyUrl(r.state.viewOnlyPadId,e,r.token);(0,v.safeWindowOpen)(t)}
;r.disableCurrentViewOnlyLink=function(){o.IntentionEvent.DisableViewOnlyLink.track({__padId:r.props.localPadId,viewOnlyPadId:r.state.viewOnlyPadId,context:o.AppContext.PadHeader});!function(e,t){
d.post({url:"/published/disable",data:{viewOnlyPadId:e},analyticsTag:"disable-view-only-link",shardingKey:d.getStatelessShardingKey(),successHandler:t})
}(r.state.viewOnlyPadId,r.disableViewOnlyLinkSuccess);r.setState({viewOnlyPadId:null,hasViewOnlyLinkEnabled:!1});C.trigger("view-only-disabled");r.token=null}
;r.confirmDisableCurrentViewOnlyLink=function(){r.setState({confirmDisableModalOpen:!0})};r.disableViewOnlyLinkSuccess=function(){
_.Snackbar.complete(y.createElement(T,a.__assign({},N.docunpublished)))};r.copyCurrentViewOnlyLink=function(){var e=y.createElement(T,a.__assign({},N.copied)),t=r.props.padController.getTitle(),n=(0,
c.getSharableViewOnlyLink)(r.state.viewOnlyPadId,t,r.token);o.IntentionEvent.CopyViewOnlyLink.track({__padId:r.props.localPadId,viewOnlyPadId:r.state.viewOnlyPadId,context:o.AppContext.PadHeader})
;P.default.clipboard.copy(n,e)};r.cancelUnpublishdoc=function(){r.setState({confirmDisableModalOpen:!1})};var s=n.padController.padClientVars,i=s?s.enabledViewOnlyPadId:null,l=!!i;r.state={
viewOnlyPadId:i,hasViewOnlyLinkEnabled:l,confirmDisableModalOpen:!1};l&&r.updateToken();r.copyViewOnlyLinkButtonRef=y.createRef();return r}n.prototype.bindEvents=function(){
this.events.on(this.props.padController,"pad-id-changed",this.updateToken);this.events.on(this.props.padController,"pad-meta-changed",this.updateToken)
;this.events.on(window,"storage",this.handleLocalStorageEvent)};n.prototype.componentDidMount=function(){this.bindEvents()};n.prototype.render=function(){
return this.state.hasViewOnlyLinkEnabled?y.createElement(w,{forwardRef:this.copyViewOnlyLinkButtonRef,navigateToViewOnlyPad:this.openViewOnlyLink,
disableCurrentViewOnlyLink:this.disableCurrentViewOnlyLink,confirmDisableCurrentViewOnlyLink:this.confirmDisableCurrentViewOnlyLink,copyCurrentViewOnlyLink:this.copyCurrentViewOnlyLink,
confirmDisableModalOpen:this.state.confirmDisableModalOpen,cancelUnpublishdoc:this.cancelUnpublishdoc}):y.createElement(s.default,{variant:"outline",onClick:this.onCreateClick,
className:"sharing-publish-button-dig"},y.createElement(T,a.__assign({},N.publishdoc)))};n.displayName="CreateViewOnlyLinkButton";return n=a.__decorate([l.default],n)}(y.PureComponent)
;t.CreateViewOnlyLinkButton=k;var w=function(e){return y.createElement(r.SplitButton,{className:"sharing-publish-button-dig",variant:"outline",onClick:e.navigateToViewOnlyPad,renderMenu:function(t){
var n=t.buttonProps;return y.createElement(m.Menu.Wrapper,null,(function(t){var o=t.getTriggerProps,s=t.getContentProps;return y.createElement(y.Fragment,null,y.createElement(r.Button,a.__assign({
"aria-label":"Show options"},n,o())),y.createElement(u.LayerContext.Provider,{value:{zIndex:i.default.zindex_above_header}
},y.createElement(m.Menu.Content,a.__assign({},s()),y.createElement(m.Menu.Segment,null,P.default.clipboard.canCopy()&&y.createElement(m.Menu.ActionItem,{onClick:e.copyCurrentViewOnlyLink
},y.createElement(T,a.__assign({},N.copylink))),y.createElement(m.Menu.ActionItem,{onClick:e.confirmDisableCurrentViewOnlyLink
},y.createElement(T,a.__assign({},N.unpublish)),e.confirmDisableModalOpen?y.createElement(M,{onClose:e.cancelUnpublishdoc,onConfirm:e.disableCurrentViewOnlyLink}):null)))))}))}
},y.createElement(T,a.__assign({},N.publisheddoc)))};t.ViewOnlyDropDown=w;w.displayName="ViewOnlyDropDown";var M=function(e){return y.createElement(g.default,{openOnMount:!0,closeButton:!0,
onClose:e.onClose,size:"medium",className:"disable-view-only-popup"},y.createElement("p",{className:"disable-view-only-popup-header"
},y.createElement(T,a.__assign({},N.unpublishthisdoc))),y.createElement("p",{className:"disable-view-only-popup-body"},y.createElement(T,a.__assign({},N.loseAccess))," "),y.createElement("div",{
className:"disable-view-only-popup-buttons-container"},y.createElement(s.default,{className:"disable-view-only-popup-buttons-cancel",variant:"opacity",onClick:e.onClose
},y.createElement(T,a.__assign({},N.cancel))),y.createElement(s.default,{className:"disable-view-only-popup-buttons-unpublish",variant:"primary",onClick:e.onConfirm
},y.createElement(T,a.__assign({},N.unpublish)))))};t.ConfirmDisablePopup=M;M.displayName="ConfirmDisablePopup"}}]);

//# sourceMappingURL=https://paper.dropbox.com/static/sourcemap/da8f58a34e474e75e05d.Sv5lXrdyXO4EXd6L-pkjzzggq60upap1-xVcBWCXkkY.js.map