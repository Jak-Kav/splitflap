(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["paper_admin_off_view_only~paper_binder~paper_bundle~paper_cloud_docs~paper_influencer~paper_jasmine_~1ca7a66a"],{
1105:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(3),r=n(528),a=n(0),s=n(719),l=function(e){o.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.el=null;return t}t.prototype.getHtml=function(){return this.el?this.el.innerHTML:null};t.prototype.render=function(){
var e=this,t=i("ace-editor","selenium-ace-editor","syntax","notranslate","zoneId-0","doesWrap"),n=this.props.serverRenderInfo?this.props.serverRenderInfo.appHtml:"<span>&nbsp;</span>",l=this.props.serverRenderInfo?this.props.serverRenderInfo.docLang:null,d=r.getRootStyleDetails(l||"")
;return a.createElement("div",{id:this.props.id,className:this.props.className},a.createElement("div",o.__assign({className:t,ref:function(t){return e.el=t},style:{fontFamily:d.fontFamily},
spellCheck:d.spellcheck?"true"===d.spellcheck:void 0,contentEditable:this.props.contentEditable,"data-zone-id":"0",dangerouslySetInnerHTML:{__html:n},"aria-label":this.props["aria-label"],
role:this.props.role,"aria-multiline":this.props["aria-multiline"]},s.hydrationWarningSuppressionSetting)),a.createElement("div",{className:"non-editor"},this.props.children))}
;t.displayName="AceContent";return t}(a.PureComponent);t.default=l},1114:function(e,t,n){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0});t.AceEditor=void 0
;var o=n(1115),i=n(238),r=n(1117),a=n(1329),s=n(1330),l=n(528),d=n(1331),c=n(1332),u=n(799),h=n(1334),p=n(804),f=n(449),g=n(72),m=n(1343),v=n(807),y=n(364),b=n(808),C=n(1351),E=n(1356),I=n(1357),_=n(6),T=n(243),S=n(75),k=n(12),x=n(268),w=n(178),P=n(785),A=n(573),O=n(162),L=n(28),N=n(1384),M=n(1387),R=n(817),D=n(1389),F=n(1390),z=n(1391),U=n(591),H=n(1392),B=n(819),Z=n(20),j=n(31),W=n(1394),V=n(1395),K=n(18),G=n(4),q=n(1396),Y=n(119),X=n(81),J=function(){
function e(e){var t,n=this;this.options=e;this.isSetupComplete=!1;this.disposed=!1;this.innerZoneEditorNodes={};this.handleUnload=function(){n.dispose("unload")};this.dispose=(0,
X.wrapCallOnce)((function(e){var t,o,i,r,a;void 0===e&&(e="unknown");n.disposed=!0;n.callStack.getIdleWorkTimer()&&n.callStack.getIdleWorkTimer().never();(0,G.trackEng)("detach editor",{
editorType:n.editorType,reason:e});n.addons.dispose();n.intersectionObserver&&(null===(o=(t=n.intersectionObserver).disconnect)||void 0===o||o.call(t));if(n.observer){n.onMentionLinksUnfurled.cancel()
;n.observer.unbindEditorEvents(n.dom.getRoot());n.observer.off("document-click",n.handleDocumentClick);n.observer.off("unload",n.handleUnload)}n.authors.dispose();n.autoComplete.dispose()
;n.autoCompleteV2&&n.autoCompleteV2.dispose();n.autolink.dispose();n.code.dispose();n.copycut.dispose();n.core.dispose();n.keystrokes.dispose();n.lists.dispose();n.managers.dispose();n.media.dispose()
;n.mediaDrag.dispose();n.mouse.dispose();n.notifications.dispose();n.selection.dispose();n.commentsController&&n.commentsController.dispose();n.dynamicCSS&&n.dynamicCSS.dispose()
;null===(i=n.placeholder)||void 0===i||i.dispose();null===(r=n.textDrag)||void 0===r||r.dispose();null===(a=n.paste)||void 0===a||a.dispose();n.observer&&n.observer.detachEditor();if(n.lexings){
n.lexings.dispose();n.lexings=null}n.lineTrackers&&n.lineTrackers.dispose();n.templatePlaceholder&&n.templatePlaceholder.dispose();for(var s in n.reps)n.reps[s].lines.dispose();n.reps=null
;for(var s in n.innerZoneEditorNodes)n.innerZoneEditorNodes[s].dispose();n.innerZoneEditorNodes=null;n.dom.getRoot()&&(n.dom.getRoot().padController=null)}));this.execute=function(e,t,o){
return n.callStack.execute(e,t,o)};this.onMentionLinksUnfurled=(0,_.debounce)((function(){var e=n.getPadId();n.hasFeature("mention-auto-update")&&e&&k.post({url:"/pad/update-pad-mentions",data:{
localPadId:n.getPadId()},shardingKey:k.getShardingKeyForPad(e),analyticsTag:"update-pad-mentions"})}),2e3);this.handleDocumentClick=function(e){n.contents.getIsEditable()||(0,
K.toggleClass)(n.dom.getEditorEl(),"ace-focused",n.dom.isNodeInEditor(e.target))};this.enableA11yTabNavigation=function(){n.a11yAllowNavigateWithTab=!0;n.bindA11yTabNavCancelEvents()}
;this.handleNoTabKey=function(e){S.PadHotkeys.EnableA11yTabNavigation.test(e)||S.EditingHotkeys.Indent.test(e)||S.EditingHotkeys.Unindent.test(e)||n.disableA11yTabNavigation()}
;this.disableA11yTabNavigation=function(){n.a11yAllowNavigateWithTab=!1;n.unbindA11yTabNavCancelEvents()};this.editorType=this.options.type||"full";this.observer=this.options.observer
;this.viewport=new q.default(this);this.padController=this.options.padController;this.lexings=this.options.prerender?this.options.prerender.lexings:new v.BoundedHashMap(5e3)
;this.reps=this.options.prerender?this.options.prerender.reps:{0:{lines:(0,U.default)(),alltext:"",alines:[]}};this.vectorReps=this.options.prerender?this.options.prerender.vectorReps:{}
;this.apool=this.options.pool||new g.default;this.lineIdPrefix=this.options.lineIdPrefix;this.eventNamespace=".ace-"+this.lineIdPrefix;this.dom=new d.default(this)
;this.editableState=new c.default(this);this.usingResizeObserver=!!this.options.usingResizeObserver;this.authors=new i.AceAuthors(this);this.autolink=new a.default(this)
;this.callStack=new s.AceCallStack(this,this.options.contentTypeRegistry);this.code=new l.default(this);this.contents=new C.default(this,e.contentTypeRegistry,this.editableState)
;this.contentTypeRegistry=e.contentTypeRegistry;this.copycut=new E.default(this,e.contentTypeRegistry);this.core=new I.Core(this,e.contentTypeRegistry,this.lineIdPrefix,this.lexings,this.options)
;this.dynamicCSS=e.dynamicCSS||(0,D.default)();this.inlineMagicLatex=new P.InlineMagicLatex(this);this.keystrokes=new N.default({contentTypeRegistry:e.contentTypeRegistry,editor:this,
keyPerfMonitor:e.keyPerfMonitor});this.lists=new u.default(this,this.options.contentTypeRegistry);this.managers=new M.default(this,e.contentTypeRegistry)
;this.media=new h.default(this,(null===(t=this.options.prerender)||void 0===t?void 0:t.attachmentStore)||void 0);this.mediaDrag=new F.default(this);this.mouse=new z.default(this)
;this.notifications=new p.default(this,this.options.initialIdMapToHighlight||{});this.paste=new H.default(this,e.contentTypeRegistry)
;this.selection=new f.default(this,this.options.contentTypeRegistry);this.textDrag=new V.default(this);this.dom.getRoot().padController=this.padController;this.observer.attachEditor(this)
;this.placeholder=new B.default(this,this.options.stores,this.options.contentTypeRegistry,this.options.placeholder)
;if(this.options.prerender)for(var T in this.options.prerender.rootNodes)this.innerZoneEditorNodes[T]=new A.InnerZoneEditorNode(T,this,this.contents.getIsEditable(),this.options.prerender.rootNodes[T])
;if(this.options.prerender){this.lineTrackers=this.options.prerender.lineTrackers;this.lineTrackers.setEditor(this)
}else this.lineTrackers=new R.LineTrackers(this,this.apool,this.hasFeature("collapsed-sections"));if(this.hasFeature("comments")){
this.padController?this.comments=this.padController.getComments():this.options.readonlyObjectStore&&(this.comments=new y.default(this,null,this.options.readonlyObjectStore,null));if(this.comments){
this.comments.setAce(this);this.commentsController=new b.default(this,this.comments,this.options.commentsNotifyOnly)}}
(this.hasFeature("template-placeholder")||this.hasFeature("dynamic-placeholder"))&&(this.templatePlaceholder=new W.default(this));this.initializeDoc()
;var x=this.options.stores&&this.options.stores.onboarding;(0,O.isAutocompleteRefactorEnabled)()&&(this.autoCompleteV2=new m.default(this,x,this.padController))
;var w=this.options.stores&&this.options.stores.networkStatus;this.autoComplete=new r.AceAutocomplete(this,this.padController,this.options.autocompletePadId,w,x)
;this.addons=new o.AceAddonManager(this);this.isSetupComplete=!0}e.prototype.initializeDoc=function(){var e=this;this.execute("setup",(function(){if(e.options.prerender){if((0,
w.getChildrenLines)(e.dom.getRoot()).length!==e.reps[0].alines.length)throw new Error("something went wrong with pre-rendering. terrible. really sad.")
;j.default.isOnButDoNotLog("paper_intersection_observer")&&!(0,L.isMobile)()?e.initIntersectionObserver():e.core.decorateMagicObjectsAfterPrerender();e.callStack.getCurrentCallStack().repChanged=!0
;e.callStack.getCurrentCallStack().docTextChanged=!0;e.callStack.getIdleWorkTimer().atMost(100)}else e.core.initializeEmptyDoc();e.editableState.internalEnforceEditabilityInDom();if(e.observer){
e.observer.bindEditorEvents(e.dom.getRoot());e.observer.on("document-click",e.handleDocumentClick);e.observer.on("unload",e.handleUnload)}
j.default.isOnButDoNotLog("paper_a11y_editor_keyboard_trap")&&Y.WindowKeyEvents.define(S.PadHotkeys.EnableA11yTabNavigation,e.enableA11yTabNavigation)}),{shouldIncorp:!1})}
;e.prototype.isDisposed=function(){return this.disposed};e.prototype.getRep=function(e){if(!e)throw new Error("getRep got bad zoneId");return this.reps[e]};e.prototype.getReps=function(){
return this.reps};e.prototype.getApool=function(){return this.apool};e.prototype.getSelectedRep=function(){var e=this.selection.get(),t=e.hasSelection,n=e.start;return t?this.getRep(n.zone):null}
;e.prototype.getLineEntry=function(e,t){return null!==e&&t?this.reps[e].lines.atIndex(t.line):null};e.prototype.getCurrentLineEntry=function(){var e=this.selection.get().start
;return this.getSelectedRep()&&this.getLineEntry(e.zone,e)};e.prototype.getVectorsRep=function(e,t){e in this.vectorReps||(this.vectorReps[e]={vectorIds:[],forRow:t,alines:[""]})
;if(this.vectorReps[e].forRow!==t)throw new Error("zoneId "+e+" in rep as forRow="+this.vectorReps[e].forRow+" but getVectorsRep called with forRow="+t);return this.vectorReps[e]}
;e.prototype.getVectorReps=function(){return this.vectorReps};e.prototype.hasSelection=function(){return this.selection.hasSelection};e.prototype.hasFeature=function(e,t,n){
void 0===t&&(t=Z.Position.ROOT_ZONE);var o=(void 0===n?{}:n).shouldMatchRootZone,i=void 0===o||o;if(this.options.features)return-1!=this.options.features.indexOf(e);t=t||Z.Position.ROOT_ZONE
;var r=-1!=x.GATED_FEATURES[this.editorType].indexOf(e);return t==Z.Position.ROOT_ZONE?r:(!i||r)&&(0,T.doesNonRootZoneHaveFeature)(t,e,this.contentTypeRegistry)}
;e.prototype.hasFeatureForSelectedRep=function(e,t){if(this.hasSelection()){var n=this.selection.get().zone;return this.hasFeature(e,n,t)}return!1};e.prototype.focus=function(){
this.selection.focusEditor()};e.prototype.getViewport=function(){return this.viewport};e.prototype.getPadType=function(){
return this.options.padType||(this.padController?this.padController.getPadType():null)};e.prototype.getPadId=function(){
return this.options.padId?this.options.padId:this.padController?this.padController.getPadId():null};e.prototype.getContentTypeRegistry=function(){return this.contentTypeRegistry}
;e.prototype.isManagingEditorSizeState=function(){return this.usingResizeObserver};e.prototype.setEditorSizeState=function(e){if(!(0,_.isEqual)(e,this.editorSizeState)){this.editorSizeState=e
;this.observer.broadcastEditorContainerResize(e)}};e.prototype.getEditorSizeState=function(){return this.editorSizeState};e.prototype.setIsMousing=function(e){if(e!==this.userIsMousing){
this.userIsMousing=e;document.body.classList.toggle("is-mousing",this.userIsMousing)}};e.prototype.isMousing=function(){return this.userIsMousing};e.prototype.bindA11yTabNavCancelEvents=function(){
this.observer.on("mousemove",this.disableA11yTabNavigation);this.observer.on("mousedown",this.disableA11yTabNavigation);this.observer.on("click",this.disableA11yTabNavigation)
;this.observer.on("keypress",this.handleNoTabKey)};e.prototype.unbindA11yTabNavCancelEvents=function(){this.observer.off("mousemove",this.disableA11yTabNavigation)
;this.observer.off("mousedown",this.disableA11yTabNavigation);this.observer.off("click",this.disableA11yTabNavigation);this.observer.off("keypress",this.handleNoTabKey)}
;e.prototype.canA11yNavigateWithTab=function(){return this.a11yAllowNavigateWithTab};e.prototype.initIntersectionObserver=function(){var e,t=this,n={root:this.dom.getScrollEl(),threshold:0}
;this.intersectionObserver=new IntersectionObserver((e=this,function(t,n){var o=t.filter((function(e){return!!e.isIntersecting}));if(o.length){var i=e.contents.exportZatextAndPool()
;o.forEach((function(t){var o=e.dom.zoneOfTopLevelNode(t.target),r=e.reps[o].lines.atKey(t.target.id);e.core.decorateMagicObjectsInLine(r,i);var a=e.managers.lineManagerForLine(r,"aceTable")
;a&&a.setContentEditable(e.editableState.getIsEditable());n.unobserve(t.target)}))}}),n);for(var o in this.reps)this.reps[o].lines.forEach((function(e){t.intersectionObserver.observe(e.lineNode)}))}
;return e}();t.AceEditor=J},1115:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.AceAddonManager=void 0;var n=function(){function e(e){this.editor=e;this.addons=[]
;this.addonsByName={}}e.prototype.registerAddon=function(e){if(e.addonName in this.addonsByName)throw new Error("duplicate AceAddon registration for name ".concat(e.addonName))
;this.addonsByName[e.addonName]=e;this.addons.push(e);e.init(this.editor)};e.prototype.registerAddons=function(e){var t=this;e.forEach((function(e){return t.registerAddon(e)}))}
;e.prototype.dispose=function(){for(var e=this.addons.length-1;e>=0;e--){var t=this.addons[e],n=t.addonName;t.dispose();this.addons[e]=null;delete this.addonsByName[n]}}
;e.prototype.getByName=function(e){return this.addonsByName[e]||null};Object.defineProperty(e.prototype,"autocompose",{get:function(){return this.getByName("autocompose")},enumerable:!1,
configurable:!0});return e}();t.AceAddonManager=n},1117:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.AceAutocomplete=void 0
;var o=n(1),i=n(6),r=n(532),a=n(1118),s=n(89),l=n(1119),d=n(30),c=n(8),u=n(164),h=n(542),p=n(4),f=n(223),g=n(162),m=n(14),v=n(162),y=n(50),b=n(118),C=n(430),E=n(446),I=n(28),_=n(20),T=n(0),S=n(36),k=n(24),x=n(145),w=n(224),P=n(420),A=n(222),O=n(541),L=n(259),N=n(31),M=n(13),R=n(71),D=n(18),F=n(7),z=null,U=null,H={},B="hp-doc-preview-holder"
;function Z(e){u.dataSources.forEach((function(t){return t.padController=e}));H=e?(0,l.createAceAutocompleters)(e):{};z=e}var j=function(){function e(e,t,n,r,s,h){void 0===h&&(h=u.dataSources)
;var p=this;this.editor=e;this.padId=n;this.networkStatusStore=r;this.dataSources_=h;this.activeDataSources_=null;this.mostRecentContext_=null;this.cachedQueries_={};this.lastWord_=null
;this.lastTypedWord_=null;this.showedResults_=null;this.hasResults=null;this.lastRealOffset_=null;this.lastAutocompleteType=null;this.lastPadPrivacy_=null;this.spring_=null;this.mentionUndoer=null
;this.shouldShowSlashCommandMenu=null;this.handleInsertMentionContact=function(e){if(e){var t=H[e.type];t&&t.complete(e,p)}};this.handleDismissMentionListPopup=function(){p.dispose()
;p.editor.autolink.clearAutolink()};this.updateEmojiQuery_=i.debounce((function(e){var t=p.editor.autolink.caretWordPopupPosition();if(t&&App.getEmojis){var n=App.getEmojis();e=e.substr(1);var o=(0,
D.offset)(p.editor.dom.getRoot()),i=(0,g.getMenuPosition)(t,o);if(!n.isOpen()){n.open();n.updatePosition(i);n.setOnSelect((function(e,t,o,i){p.editor.focus();var r=H.emoji;if(r){var a={isCustom:e,
ch:t,url:o,tags:i};r.log(t,a,p.editor);r.complete(a,p);n.close();p.reset_()}}));n.setOnAbort((function(){(0,g.safeAceReplaceRange)("",[],p.editor);n.close();p.reset_()}))}n.setQuery(e)
;p.updateLastPositions_(e,!0,i);return p.showedResults_}}),150);this.handlePreview=i.throttle((function(e){var t=(0,D.closest)(e.target,".hp-mention-result");if(t){var n=t.dataset.id
;if(n!==p.currentPreviewPadId){p.hidePreview();p.showPreview(n)}}}),200);this.loadRequestThrottle_=i.throttle(this.loadMostRecentContext_.bind(this),500)
;this.options_=o.__assign(o.__assign({},a.default.defaults),{width:d.default.mention_menu_width,formatMatch:function(e){return e.autocompleteText},formatItem:function(e){return e.autocompleteDisplay()
},max:b.MAX_AUTOCOMPLETE_LOAD,matchContains:!0,selectFirst:!0,scroll:!0,data:[],resultsClass:"hp-mentioning selenium-hp-mentioning"});var f={focus:function(){e.focus()}}
;this.select_=a.default.Select(this.options_,f,this.finish_.bind(this),{});this.cache_=a.default.Cache(this.options_);var m=window.App;if(this.isNativeListEnabled()){
null==m||m.on(b.NATIVE_BRIDGE_APP_EVENTS.insertMentionContact,this.handleInsertMentionContact);null==m||m.on(b.NATIVE_BRIDGE_APP_EVENTS.dismissMentionListPopup,this.handleDismissMentionListPopup)}
this.mentionUndoer=new C.default(e,s);if(t){U=this;Z(t)}else H=(0,l.createAceAutocompleters)(null);c.default.isSignedIn()&&s&&s.getCompleted((function(e){
p.shouldShowSlashCommandMenu=1==e.filter((function(e){return e==F.TourGroupNames.Walkthrough})).length}));this.editor.autolink.setAutocompleteCallback(this.aceAutocompleteCallback_.bind(this))
;u.peopleDataSource&&u.peopleDataSource.preload()}e.prototype.dispose=function(){var e=window.App;if(this.isNativeListEnabled()){
null==e||e.off(b.NATIVE_BRIDGE_APP_EVENTS.insertMentionContact,this.handleInsertMentionContact);null==e||e.off(b.NATIVE_BRIDGE_APP_EVENTS.dismissMentionListPopup,this.handleDismissMentionListPopup)}
this.reset_();if(U==this){Z(null);U=null}};e.prototype.isOffline=function(){return this.networkStatusStore&&this.networkStatusStore.isOffline()};e.prototype.isCloudDoc=function(){
return z&&z.isCloudDoc&&z.isCloudDoc()};e.prototype.isCloudDocOrCloudDocsUxEnabled=function(){return this.isCloudDoc()||(0,s.cloudDocsUxEnabled)()}
;e.prototype.aceAutocompleteCallback_=function(e,t,n,o){void 0===e&&(e="");if(!n){this.reset_();return this.showedResults_}1==e.length&&"@"==e[0]&&u.peopleDataSource.preload();var i=(0,
g.isSpecialTargetsDisabled)(this.editor)?[u.peopleDataSource]:[u.peopleDataSource,u.specialTargetsDataSource],a="space"!=t&&"cancel"!=t;switch((e=e.replace(" "," "))[0]){case"@":
if(!this.isNativeListEnabled()&&N.default.isOnButDoNotLog("paper_mention_autocomplete_refactor"))return a;this.handleTextChange_(e,t,n,{autocompleteType:r.AC_TYPE.AT,activeDataSources:i,promptMsg:(0,
E.getPromptMessage)(this.editor,this.isOffline())});return a;case"{":this.handleTextChange_(e,t,n,{autocompleteType:r.AC_TYPE.PLACEHOLDER,activeDataSources:[u.dynamicPlaceholdersDataSource],
promptMsg:E.messages.dynamicPlaceholderCopy});return a;case"+":var s=this.isCloudDocOrCloudDocsUxEnabled()?[u.dropboxDataSource]:[u.padsAndFoldersDataSource];this.handleTextChange_(e,t,n,{
autocompleteType:r.AC_TYPE.PLUS,activeDataSources:s,promptMsg:this.isOffline()?E.messages.offlinePadsNotAvailableCopy:E.messages.mentionPadCopy});return a;case":":this.handleEmojiChange_(e,t,n)
;return a;case"/":if(!this.shouldShowSlashCommandMenu){this.reset_();return!1}var l=P.parseSlashCommand(e,!0),d=l.command,c=l.arg;if("space"==t){
var h=P.getSlashCommandForLine(this.editor,e,new _.Position("0",0,e.length),!1);if(h){var p={data:u.slashCommandsDataSource.parse([h.slashCommandConfig],null)[0]};this.finish_(p);return!0}}
this.handleTextChange_(d,t,n,{autocompleteType:r.AC_TYPE.SLASH,activeDataSources:[u.slashCommandsDataSource],promptMsg:E.messages.slashCommandsCopy},c);return a;default:this.reset_()}return a}
;e.prototype.isVisible=function(){return this.select_.visible()||"undefined"!=typeof App&&App.getEmojis()&&App.getEmojis().isOpen()};e.prototype.isNativeListEnabled=function(){
return window.App&&I.isNativeMobileApp()};e.prototype.reset_=function(){var e=this,t=null!==this.showedResults_;this.lastWord_=this.lastTypedWord_=null;this.lastRealOffset_=null
;this.showedResults_=null;this.hasResults=null;this.cachedQueries_={};if("undefined"!=typeof App&&App.getEmojis){var n=App.getEmojis();n&&n.isOpen()&&n.close()}if(this.select_.visible()){(0,
p.trackUi)("Close Menu",{title:r.AC_TRACK_TITLES[this.lastAutocompleteType],context:p.EditorContext.Editor[this.editor.editorType]})
;window.App&&I.isNativeMobileApp()&&window.App.trigger(b.NATIVE_BRIDGE_APP_EVENTS.mentionListPopupDismissed,void 0)}this.spring_&&this.spring_.hide({callback:function(){e.select_&&e.select_.hide()}})
;t&&this.isNativeListEnabled()&&window.App.trigger(b.NATIVE_BRIDGE_APP_EVENTS.mentionListDismissed,void 0)};e.prototype.getData_=function(e){return e?(0,y.loggingTryCatch)((function(){
return JSON.parse(e.dataset.acData)})):null};e.prototype.finish_=function(e,t){if(void 0===e&&void 0===t||null==e.data){var n=this.select_.current();e=this.getData_(n);t=(0,D.indexInParent)(n)}
if(e.data.autocompleteText){var i=H[e.data.type];if(i){i.log(e.data.autocompleteText,o.__assign({editorType:this.editor.editorType,searchWordLength:(this.lastWord_||"").length,selectedIndex:t
},e.data),this.editor);i.complete(e.data,this);this.reset_()}}};e.prototype.showImmediately_=function(e,t,n){var o=I.isPhone();this.select_.display(t,e);var i=this.select_.getEl()
;this.spring_||(this.spring_=new L.SimpleSpring("autocomplete",i));var r=(0,D.offset)(this.editor.dom.getRoot()),a=(0,
g.getMenuPosition)(n,r),s=a.y,l=o?-9999:parseInt(d.default.mention_menu_height,10),c=this.select_.show(o?"0px":a.x+"px",s+"px",l);i&&(0,D.toggleClass)(i,"reverse",c);this.spring_.show({immediate:!1,
isReverse:c});this.updateLastPositions_(e,t&&t.length>0,a)};e.prototype.updateLastPositions_=function(e,t,n){this.lastWord_=e;this.showedResults_=t;this.lastRealOffset_=n}
;e.prototype.show_=function(e,t,n){var o=this;if(this.lastAutocompleteType!==r.AC_TYPE.AT||!(0,v.isAutocompleteRefactorEnabled)()){if(null==this.lastWord_){(0,p.trackUi)("Open Menu",{
title:r.AC_TRACK_TITLES[this.lastAutocompleteType],context:p.EditorContext.Editor[this.editor.editorType]})
;window.App&&I.isNativeMobileApp()&&window.App.trigger(b.NATIVE_BRIDGE_APP_EVENTS.mentionListPopupShown,void 0)}if(I.isPhone()){var i={y:n.y,height:parseInt(d.default.mobile_mention_menu_height,10)}
;this.editor.getViewport().scrollSelectionIntoView(i.height,!0,(function(){o.showImmediately_(e,t,n)}))}else this.showImmediately_(e,t,n)}};e.prototype.handleEmojiChange_=function(e,t,n){
if(App.getEmojis){var o=App.getEmojis();n=this.editor.autolink.caretWordPopupPosition();this.lastAutocompleteType=r.AC_TYPE.EMOJI;if(!e||"cancel"==t||" "==e[1]||!n){o.close();this.reset_()
;return this.showedResults_}if("left"==t){o.updateSelection(0,-1);return this.showedResults_}if("up"==t){o.updateSelection(-1,0);return this.showedResults_}if("right"==t){o.updateSelection(0,1)
;return this.showedResults_}if("down"==t){o.updateSelection(1,0);return this.showedResults_}if("enter"==t||"tab"==t){var i=this.showedResults_;o.chooseSelection();return i}
return this.updateEmojiQuery_(e)}};e.prototype.handleTextChange_=function(e,t,n,i,a,s){this.lastTypedWord_=e.substring(1);if(!e||"cancel"==t||" "==e[1]){this.reset_();return this.showedResults_}
this.activeDataSources_=i.activeDataSources;if(!this.activeDataSources_.length||!this.activeDataSources_[0].isValid(e)){this.reset_();return this.showedResults_}
var l=z?z.getPadOptions().guestPolicy:null;if(i.autocompleteType!=this.lastAutocompleteType||l!=this.lastPadPrivacy_){this.cache_.flush();this.cachedQueries_={}}
this.lastAutocompleteType=i.autocompleteType;this.lastPadPrivacy_=l;if(i.autocompleteType==r.AC_TYPE.PLUS&&1==e.length){var d=[{data:{autocompleteText:"",autocompleteDisplay:function(){
return x.renderToString(T.createElement(m.IntlProvider,{locale:c.default.userLocale},T.createElement("span",{className:"placeholder"},T.createElement(E.F,o.__assign({},i.promptMsg)))))}},result:null,
value:null}];this.show_(e,d,n);this.cleanUpPreview();return this.showedResults_}var u=(e=e.substr(1))!=this.lastWord_;if(!u){if("up"==t){this.moveSelection(!0);return this.showedResults_}
if("down"==t){this.moveSelection();return this.showedResults_}if("enter"==t||"tab"==t||"right"==t){var h=this.showedResults_;this.finish_();return h}}var p={dataType:this.options_.dataType,
max:this.options_.max,word:e,autocompleteType:i.autocompleteType,offset:n,padId:this.padId,mentionUrl:null,promptMsg:i.promptMsg,queryArg:a};this.loadAndDisplayData_(p,!1);if(s){
s.mark("Ace Autocomplete Open");s.send()}u&&this.shouldSkipEntry()&&this.select_.next();if(this.cachedQueries_[e.toLowerCase()])return this.showedResults_;this.mostRecentContext_=p
;this.loadRequestThrottle_();return this.showedResults_};e.prototype.moveSelection=function(e){void 0===e&&(e=!1);var t=e?this.select_.prev:this.select_.next;this.hidePreview();t()
;this.shouldSkipEntry()&&t();var n=this.select_.current(),o=n&&this.getData_(n);o&&o.data&&this.showPreview(o.data.localPadId)};e.prototype.showPreview=function(e){var t=this
;this.previewPad&&e&&(this.throttlePreviewTimeout=setTimeout((function(){(0,D.children)(t.select_.getEl(),B).forEach((function(e){e.style.visibility="visible"}));t.previewPad.updatePadId(e)
;t.currentPreviewPadId=e}),500))};e.prototype.hidePreview=function(){this.throttlePreviewTimeout&&clearTimeout(this.throttlePreviewTimeout);if(this.select_&&this.select_.getEl()){(0,
D.children)(this.select_.getEl(),B).forEach((function(e){e.style.visibility="hidden"}));this.currentPreviewPadId=null}};e.prototype.shouldSkipEntry=function(){
if(this.lastAutocompleteType===r.AC_TYPE.AT||this.lastAutocompleteType===r.AC_TYPE.PLACEHOLDER||this.lastAutocompleteType===r.AC_TYPE.SLASH){var e=this.select_.current(),t=e&&this.getData_(e)
;return t&&!t.result}};e.prototype.loadMostRecentContext_=function(){var e=this;if(this.mostRecentContext_){var t=this.mostRecentContext_;this.mostRecentContext_=null
;var n=this.activeDataSources_.map((function(e){return e.loadAndParse(t).then(this.loadAndDisplayData_.bind(this,t,!1))}),this);Promise.all(n).then((function(){e.loadAndDisplayData_(t,!0)}))
;this.cachedQueries_[t.word.toLowerCase()]=!0}};e.prototype.loadAndDisplayData_=function(e,t){var n,i=this;if(this.isOffline())this.show_(e.word,[this.getPromptData_(e)],e.offset);else{
this.options_.data=[];this.activeDataSources_.forEach((function(e){e.entries&&(e instanceof O.SpecialTargetDataSource?this.options_.data=this.options_.data.concat(e.entries.filter((function(e){
return e.specialTargetName===A.SpecialMentionTarget.Doc}))):this.options_.data=this.options_.data.concat(e.entries))}),this);this.cache_.populate();if(e.word==this.lastTypedWord_){
var a=this.cache_.load(e.word.toLowerCase())||[];a=(0,w.scoreAndSortAutocompleteMatches)(a,e.word.toLowerCase(),!1);this.hasResults=a.length>0
;if(e.autocompleteType==r.AC_TYPE.PLUS)if("1"==e.word.trim())this.hasResults=!1;else{this.hasResults=!0;a.push({data:{autocompleteText:e.word,autocompleteDisplay:function(){
return x.renderToString(T.createElement(m.IntlProvider,{locale:c.default.userLocale},T.createElement("div",{className:"hp-mention-result"},T.createElement("div",{
className:"hp-user-details-icon hp-user-details-icon-pad"},T.createElement(M.default,{name:"note"})),T.createElement("div",{className:"hp-user-details-content"},T.createElement("div",{
className:"hp-user-details-content-top notranslate"},e.word),T.createElement("div",{className:"hp-user-details-content-bottom"},T.createElement(E.F,o.__assign({},E.messages.createNewDocument)))))))},
type:"__AUTOCREATE__"},results:null,value:null})}else if(e.autocompleteType==r.AC_TYPE.PLACEHOLDER)a.unshift(this.getPromptData_(e));else if(e.autocompleteType!=r.AC_TYPE.AT||(0,
v.isAutocompleteRefactorEnabled)())e.autocompleteType==r.AC_TYPE.SLASH&&(a=a.filter((function(t){var n=e.queryArg?"".concat(e.word," ").concat(e.queryArg):e.word
;return t.data&&P.commandDoesAutocomplete(i.editor,t.data,n)})));else{var s=e.word,l=function(e){return e.padId||(z?z.getPadId():void 0)}(e);s=s.toLowerCase()
;var d=!!z&&!!z.padClientVars&&z.isDocsExternallySharable(),p=z&&z.padClientVars?z.padClientVars.domainOrgName:null,g=!1;(!z||z.isPadEditable())&&f.isValid(s)&&(g=a.every((function(e){
return(e.data.email||"").toLowerCase()!=s})));var y=null;if(g)if(d)a.push({data:{type:"email",isContact:!1,name:s,email:s,autocompleteText:s,autocompleteDisplay:function(){
return x.renderToString(T.createElement(m.IntlProvider,{locale:c.default.userLocale},T.createElement("div",{className:"mention-prompt-invite"
},T.createElement(E.F,o.__assign({},E.messages.inviteEmail,{values:{email:s}})))))},padId:l,priority:0}});else{this.isNativeListEnabled()&&(y=p?(0,E._f)(E.messages.cantInviteEmailCopy,{email:s,
teamName:p}):(0,E._f)(E.messages.cantInviteEmailNoTeamCopy,{email:s}));a.push({data:{autocompleteText:"",autocompleteDisplay:function(){return x.renderToString(T.createElement(m.IntlProvider,{
locale:c.default.userLocale},T.createElement("div",{className:"mention-warning-invite"},T.createElement(E.F,o.__assign({},E.messages.cantInviteEmailCopy,{values:{email:s,teamName:p}})))))},padId:l}})
}else if(0==a.length){this.isNativeListEnabled()&&(y=(0,E._f)(t?E.messages.noMatchContactCopy:E.messages.searchingContactsCopy));a.push({data:{autocompleteText:"",autocompleteDisplay:function(){
return x.renderToString(T.createElement(m.IntlProvider,{locale:c.default.userLocale},T.createElement("div",{className:"placeholder"
},t?T.createElement(E.F,o.__assign({},E.messages.noMatchContactCopy)):T.createElement(E.F,o.__assign({},E.messages.searchingContactsCopy)))))},padId:l}})}if(this.isNativeListEnabled()){
var C=a.map((function(e){return e.data})).filter((function(e){return!!e.type})),I=e.promptMsg&&(0,E._f)(e.promptMsg),_={contacts:C,contentMessage:y||I,searchText:e.word}
;if(this.editor.getSelectedRep()){var k=this.editor.selection.get().focus,L=this.editor.selection.getNodeForPosition(k),N=L instanceof HTMLElement?L:L.parentElement;_.currentLineRectTop=N&&N.offsetTop
}var F=null===(n=window.App)||void 0===n?void 0:n.getNativeFeatureDetectionService();if(F&&F.supportsNativeMentionList()){window.App.trigger(b.NATIVE_BRIDGE_APP_EVENTS.mentionListChanged,_)
;this.showedResults_=a&&a.length>0;return}}a.unshift(this.getPromptData_(e))}if(a.length){1==this.activeDataSources_.length&&(a=this.activeDataSources_[0].categorizeResults(e,a))
;this.show_(e.word,a,e.offset);if(e.autocompleteType==r.AC_TYPE.PLUS){
var U=this.isCloudDocOrCloudDocsUxEnabled()?u.dropboxDataSource.getPreviewLoader():u.padsAndFoldersDataSource.getPreviewLoader(),H=(0,D.children)(this.select_.getEl(),B),Z=a.map((function(e){
return e.data&&e.data.localPadId})).filter((function(e){return!!e}));if(Z.length){U.clearPreloadQueue();U.schedulePreload(Z);if(!H.length){var j=document.createElement("div");j.classList.add(B)
;this.select_.getEl().prepend(j);H=(0,D.children)(this.select_.getEl(),B)}H[0].style.visibility="visible"
;S.reactDomRender(T.createElement(R.ToastAndUnmountErrorBoundary,null,T.createElement(h.DocPreviewBox,{localPadId:Z[0],previewLoader:U,ref:function(e){return i.previewPad=e}})),H[0])
;this.select_.getEl().removeEventListener("mouseover",this.handlePreview);this.select_.getEl().addEventListener("mouseover",this.handlePreview)}else this.cleanUpPreview()}
}else e.autocompleteType==r.AC_TYPE.SLASH&&(e.word||e.queryArg)&&this.reset_()}}};e.prototype.cleanUpPreview=function(){if(this.select_&&this.select_.getEl()){var e=(0,
D.children)(this.select_.getEl(),B);this.hidePreview();this.previewPad=null;e.length>0&&k.unmountComponentAtNode(e[0]);this.select_.getEl().removeEventListener("mouseenter",this.handlePreview)}}
;e.prototype.getPromptData_=function(e){return{data:{autocompleteText:"",autocompleteDisplay:function(){return x.renderToString(T.createElement(m.IntlProvider,{locale:c.default.userLocale
},T.createElement("span",{className:"placeholder people-placeholder"},T.createElement(E.F,o.__assign({},e.promptMsg)))))}},result:null,value:null}};return e}();t.AceAutocomplete=j},
1118:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(18),r=!1;t.default=Autocompleter={defaults:{inputClass:"ac_input",resultsClass:"ac_results",
loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,minCountForSelect:1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,parentContainer:document.body||null,mustMatch:!1,extraParams:{},
selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",scroll:!0,scrollHeight:180},Cache:function(e){var t={},n=0;function o(t,n){
e.matchCase||(t=t.toLowerCase());var o=t.indexOf(n);if("word"==e.matchContains){var i=n.toLowerCase().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")
;o=t.toLowerCase().search((n.match(/^[+-]/)?"":"\\b")+i)}return-1!=o&&(0==o||e.matchContains)}function i(o,i){n>e.cacheLength&&a();t[o]||n++;t[o]=i}function r(){if(!e.data)return!1;var t={},n=0
;e.url||(e.cacheLength=1);t[""]=[];for(var o=0,r=e.data.length;o<r;o++){var a=e.data[o];a="string"==typeof a?[a]:a;var s=e.formatMatch(a,o+1,e.data.length);if(!1!==s){var l=s.charAt(0).toLowerCase()
;t[l]||(t[l]=[]);var d={value:s,data:a,result:e.formatResult&&e.formatResult(a)||s};t[l].push(d);n++<e.max&&t[""].push(d)}}Object.keys(t).forEach((function(n){e.cacheLength++;i(n,t[n])}))}
setTimeout(r,25);function a(){t={};n=0}return{flush:a,add:i,populate:r,load:function(i){if(!e.cacheLength||!n)return null;if(!e.url&&e.matchContains){var r=[];for(var a in t)if(a.length>0){
((l=t[a])||[]).forEach((function(e){o(e.value,i)&&r.push(e)}))}return r}if(t[i])return t[i];if(e.matchSubset)for(var s=i.length-1;s>=e.minChars;s--){var l;if(l=t[i.substr(0,s)]){r=[]
;(l||[]).forEach((function(e){o(e.value,i)&&(r[r.length]=e)}));return r}}return null}}},Select:function(e,t,n,a){var s,l,d,c,u="ac_over",h=-1,p="",f=!0;function g(e){
for(var t=e.target;t&&"LI"!=t.tagName;)t=t.parentNode;return t||[]}function m(t){var n,o,r;null===(o=null===(n=s[h])||void 0===n?void 0:n.classList)||void 0===o||o.remove(u);!function(e){h+=e
;h<0?h=s.length-1:h>=s.length&&(h=0)}(t);var a=s[h],l=(0,i.children)(a,"placeholder");(null==l?void 0:l.length)||null===(r=a.classList)||void 0===r||r.add(u);if(e.scroll){var d=0
;(s||[]).slice(0,h).forEach((function(){d+=this.offsetHeight}));if(d+a.offsetHeight-(0,i.getScrollTop)(c)>(null==c?void 0:c.clientHeight)){var p=getComputedStyle(c,null).getPropertyValue("height");(0,
i.setScrollTop)(c,d+a.offsetHeight-p)}else d<(0,i.getScrollTop)(c)&&(0,i.setScrollTop)(c,d)}}function v(e,t){
return t?e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"):e}function y(){c&&(c.innerHTML="")
;(0,i.empty)(c);for(var t,n=(t=l.length,e.max&&e.max<t?e.max:t),r=0;r<n;r++){if(l[r]){var a=m(p),d=e.formatItem(l[r].data,r+1,n,l[r].value,a);if(!1!==d){var f=v(d,a),g=document.createElement("li")
;g.innerHTML=f;g.classList.add(r%2==0?"ac_even":"ac_odd");c.appendChild(g);g.dataset.acData=JSON.stringify(l[r])}}function m(e){var t=/[&<>'"]/g;t.MAP||(t.MAP={"&":"&amp;","<":"&lt;",">":"&gt;",
'"':"&#34;","'":"&#39;"});return e.replace(t,(function(e){return t.MAP[e]}))}}s=o.__spreadArray([],(null==c?void 0:c.querySelectorAll("li"))||[],!0);if(e.selectFirst&&e.minCountForSelect<=s.length){
var y=h>=0&&h<s.length?h:0,b=s[y];if(!(0,i.children)(b,"placeholder").length){b.classList.add(u);h=y}}}return{display:function(o,s){!function(){if(f){
(d=document.createElement("div")).style.visibility="hidden";d.style.position="absolute";e.resultsClass.split(/\s+/).forEach((function(e){d.classList.add(e)}))
;(e.parentContainer||document.body).appendChild(d);c=document.createElement("ul");d.appendChild(c);null==c||c.addEventListener("mouseover",(function(e){var t,n;if(r){r=!1;return!0}
if(g(e).nodeName&&"LI"==g(e).nodeName.toUpperCase()){(0,i.children)(c,u).forEach((function(e){e.classList.remove(u)}));h=(0,i.indexInParent)(g(e));(0,
i.children)(g(e),"placeholder").length||null===(n=null===(t=g(e))||void 0===t?void 0:t.classList)||void 0===n||n.add(u)}}));null==c||c.addEventListener("click",(function(e){var o
;null===(o=g(e).classList)||void 0===o||o.add(u);n(e);t.focus();return!1}));null==c||c.addEventListener("mousedown",(function(){a.mouseDownOnSelect=!0}))
;null==c||c.addEventListener("mouseup",(function(){a.mouseDownOnSelect=!1}));e.width>0&&(c.style.width=isNaN(e.width)?e.width:"".concat(e.width,"px"));f=!1}}();l=o;p=s;y()},next:function(){m(1)},
prev:function(){m(-1)},pageUp:function(){m(0!=h&&h-8<0?-h:-8)},pageDown:function(){h!=s.length-1&&h+8>s.length?m(s.length-1-h):m(8)},hide:function(){var e
;d&&(null===(e=null==d?void 0:d.style)||void 0===e||(e.visibility="hidden"));s&&s.length&&s.forEach((function(e){var t;return null===(t=e.classList)||void 0===t?void 0:t.remove(u)}));h=-1},
visible:function(){return!!d&&(0,i.isVisible)(d)},current:function(){if(!this.visible())return!1;var t=(s||[]).filter((function(e){var t;return null===(t=e.classList)||void 0===t?void 0:t.contains(u)
}));return t.length?t[0]:e.selectFirst&&s.length>=e.minCountForSelect&&s[0]},show:function(n,o,r){n=parseInt(n,10);o=parseInt(o,10);var a=!1;if(null==n){var s=(0,i.getOffset)(t),l=s.left,u=s.top
;d.style.top="".concat(u+t.offsetHeight,"px");d.style.left="".concat(l,"px")
;"string"==typeof e.width||e.width>0?d.style.width=isNaN(e.width)?e.width:"".concat(e.width,"px"):d.style.width="".concat((0,i.width)(t),"px");d.style.visibility="visible"}else{
d.style.top="".concat(o,"px");d.style.left="".concat(n,"px");"string"==typeof e.width||e.width>0?d.style.width=isNaN(e.width)?e.width:"".concat(e.width,"px"):d.style.width="200px"
;d.style.visibility="visible"}if(parseFloat(o)+(void 0===r?(0,i.outerHeight)(d):r)>window.innerHeight-20){a=!0;d.style.top="".concat(parseFloat(o)-(0,i.outerHeight)(d)-20,"px")}parseFloat(n)+(0,
i.outerWidth)(d)>window.innerWidth-20&&(d.style.left="".concat(window.innerWidth-(0,i.outerWidth)(d)-20,"px"));if(e.scroll){(0,i.setScrollTop)(c,0)
;c.style.maxHeight=isNaN(e.scrollHeight)?e.scrollHeight:"".concat(e.scrollHeight,"px");c.style.overflow="auto"}return a},selected:function(){var e=(s||[]).filter((function(e){var t
;return null===(t=e.classList)||void 0===t?void 0:t.contains(u)}));e.forEach((function(e){var t;null===(t=e.classList)||void 0===t||t.remove(u)}));var t=e[0],n=(0,i.indexInParent)(t)
;return t&&t.length&&{data:JSON.parse(t.dataset.acData),pos:n}},emptyList:function(){c&&(c.innerHTML="");c&&(0,i.empty)(c)},unbind:function(){d&&(d.innerHTML="")},getEl:function(){return d}}}}},
1119:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.createAceAutocompleters=void 0
;var o=n(1),i=n(89),r=n(4),a=n(12),s=n(162),l=n(51),d=n(58),c=n(7),u=n(224),h=n(742),p=n(420),f=n(27);t.createAceAutocompleters=function(e){return{__AUTOCREATE__:{log:function(e,t){
r.IntentionEvent.MentionAndCreatePad.track(o.__assign({context:r.EditorContext.Editor[t.editorType]},t))},complete:function(t,n){var o=(0,f.trim)(t.autocompleteText),r={title:o,
sourcePadId:null==e?void 0:e.getPadId(),isCloudDoc:(0,i.alwaysCreateCloudDocs)()},l=n.editor;(0,s.insertDocMentionPlaceholder)(o,l).then((function(e){a.post({url:"/paper/ep/pad/new",data:r,
hpAppLevel:!0,analyticsTag:"create-new-pad",shardingKey:a.getShardingKeyForCreatingNewPad(),dataType:"json",successHandler:function(t){var n=t.padClientVars,o=n.padId;n.isCloudDoc?(0,
s.updatePlaceholderToCloudDocMention)(e,o,l):(0,s.updatePlaceholderToLegacyDocMention)(e,o,l)}})}))}},pad:{log:function(e,t){r.IntentionEvent.MentionPad.track(o.__assign({
context:r.EditorContext.Editor[t.editorType]},t))},complete:function(e,t){var n=(0,f.trim)(e.autocompleteText),o=t.editor;(0,s.insertLegacyDocMention)(n,e.localPadId,o).then((function(){
e.cloudDocInfo&&(0,s.replaceLegacyByCloudDocMention)(e.localPadId,o)}))}},folder:{log:function(e,t){r.IntentionEvent.MentionFolder.track(o.__assign({context:r.EditorContext.Editor[t.editorType]},t))},
complete:function(e,t){var n=(0,f.trim)(e.name);(0,s.safeAceReplaceRange)("*",d.getMentionAttributesForFolder(e.encryptedId,n),t.editor)}},user:{log:function(t,n,i){var a=i.selection.getStart(),s=(0,
l.isCellId)(a.zone)?r.EditorContext.Table.Cell:r.EditorContext.Editor[n.editorType];r.IntentionEvent.MentionUser.track(o.__assign({context:s,padType:e?e.getPadType():"undefined",
isOnTaskLine:0==i.contents.getLineType(a).indexOf("task")},n))},complete:function(t,n){
var o=n.mentionUndoer,i=null==e?void 0:e.getPadId(),r=e&&e.peopleList.isUserWithEmailInDoc(t.email),a=(null==e?void 0:e.getPadType())==c.PadType.space;if((0,s.isTimelineItemTitle)(n.editor))(0,
s.getTimelineAttributesAndReplaceRange)(n.editor,t).then((function(){r||o.showUndoMentionToast(t.name?t.name:t.email,t.link,t.email,i,a,u.MentionToastType.TimelineAssignment)}));else{var l=(0,
s.getMentionParentType)(n.editor),d=(0,s.getDisplayName)(t);(0,s.getMentionAttributesAndReplaceRange)(n.editor,t).then((function(){r||o.showUndoMentionToast(d,t.link,t.email,i,a,l)}))}}},email:{
log:function(e,t){(0,r.track)("mention-user-by-email",t)},complete:function(t,n){var i=(0,f.trim)(t.name);a.post({url:"/ep/pad/invite/emailmention",analyticsTag:"mention-email",
shardingKey:a.getShardingKeyForPad(t.padId),data:{email:t.email,name:i,padId:t.padId},successHandler:function(i){
var r=n.mentionUndoer,a=null==e?void 0:e.getPadId(),l=e&&e.peopleList.isUserWithEmailInDoc(t.email),d=o.__assign(o.__assign(o.__assign({},t),{link:i.mentionUrl
}),i),h=(null==e?void 0:e.getPadType())==c.PadType.space;if((0,s.isTimelineItemTitle)(n.editor))(0,s.getTimelineAttributesAndReplaceRange)(n.editor,d).then((function(){
l||r.showUndoMentionToast(t.name?t.name:t.email,d.link,t.email,a,h,u.MentionToastType.TimelineAssignment)}));else{var p=(0,s.getMentionParentType)(n.editor),f=(0,s.getDisplayName)(d);(0,
s.getMentionAttributesAndReplaceRange)(n.editor,d).then((function(){l||r.showUndoMentionToast(f,d.link,t.email,a,h,p)}))}},errorHandler:function(e,t,n){return 403==n}})}},special:{log:function(e,t){
(0,r.track)("mention-special-target",t)},complete:function(t,n){var o=(0,f.trim)(t.specialTargetName),i=e?e.invitedUserInfos.length-1:0;(0,h.showAtDocWarningIfNeeded)({userCount:i,
target:t.specialTargetName}).then((function(){(0,s.safeAceReplaceRange)("*",d.getMentionAttributesForSpecialTarget(o),n.editor)}))}},emoji:{log:function(e,t){t.emoji=e;(0,r.track)("emoji",t)},
complete:function(e,t){if(e.isCustom){var n={url:e.url,tags:e.tags};(0,s.safeAceReplaceRange)("*",[["magicObject","customEmoji"],["customEmoji",JSON.stringify(n)]],t.editor)}else(0,
s.safeAceReplaceRange)(e.ch,[],t.editor)}},placeholder:{log:function(e,t){(0,r.track)("dynamic-placeholders",t)},complete:function(e,t){(0,
s.safeAceReplaceRange)(e.displayName,[["dynamicPlaceholder","true"]],t.editor)}},slash:{log:function(e,t){(0,r.track)("slash command completed",{method:"autocompleter",name:t.name})},
complete:function(e,t){var n=t.editor;return n.execute("slash command execute",(function(){var t=n.autolink.linkWordAndPosition(),o=t&&t.word,i=t.start,r=t.end,a={command:e.name,
arg:p.parseSlashCommand(o).arg},s={startPos:i,endPos:r,slashCommandConfig:p.getSlashCommandByName(e.name),parsedCommand:a};p.executeSlashCommand(n,s)}))}}}}},119:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.WindowKeyEvents=t.Dispatcher=void 0;var o=n(59),i=n(11),r=n(43),a=n(61),s=function(){function e(e){var t=this
;this.eventEmitter=new o.EventEmittingClass;this.eventEmitterHandlers=new i.EventHandler;this.root=null;this.handleKeydown=function(e){if(l()){if(e&&t.isRightAlt(e)){t.rightAltDown=!0
;t.deferredEvents=[]}if(t.rightAltDown&&e.ctrlKey&&e.altKey){t.deferredEvents.push(e);return}}return t.triggerHandlers(e)};this.handleKeypress=function(e){
l()&&t.rightAltDown&&e.charCode&&(a.default.gecko||e.altKey&&e.ctrlKey)&&(t.deferredEvents=[])};this.handleKeyup=function(e){if(l()){var n
;if(t.deferredEvents.length)for(var o=0,i=t.deferredEvents;o<i.length;o++){var r=i[o];if(r.which==e.which){n=t.triggerHandlers(e);t.deferredEvents.splice(t.deferredEvents.indexOf(r),1)}}
if(e&&t.isRightAlt(e)){t.rightAltDown=!1;t.deferredEvents=[]}return n}};this.deferredEvents=[];this.knownEventTypes={};if(e){this.root=e;this.root.addEventListener("keydown",this.handleKeydown)
;this.root.addEventListener("keypress",this.handleKeypress);this.root.addEventListener("keyup",this.handleKeyup)}}e.prototype.dispose=function(){this.eventEmitterHandlers.removeAll();if(this.root){
this.root.removeEventListener("keydown",this.handleKeydown);this.root.removeEventListener("keypress",this.handleKeypress);this.root.removeEventListener("keyup",this.handleKeyup);this.root=null}}
;e.prototype.extractEventIdentifersFromHotKey=function(e,t){void 0===t&&(t=!1);for(var n=[],o=0,i=e.eventTypes();o<i.length;o++){var r=i[o];t&&(this.knownEventTypes[r]=!0);n.push(r)}return n}
;e.prototype.define=function(e,t){var n=this,o=this.extractEventIdentifersFromHotKey(e,!0);o.length&&o.forEach((function(e){n.eventEmitterHandlers.on(n.eventEmitter,e,t)}))}
;e.prototype.off=function(e,t){var n=this,o=this.extractEventIdentifersFromHotKey(e);o.length&&o.forEach((function(e){n.eventEmitterHandlers.off({caller:n.eventEmitter,event:e,callback:t})}))}
;e.prototype.handleEvent=function(e){switch(e.type){case"keydown":return this.handleKeydown(e);case"keypress":return this.handleKeypress(e);case"keyup":return this.handleKeyup(e)}}
;e.prototype.triggerHandlers=function(e){var t=e.which,n=String(t);e.altKey&&(n+="-alt");e.metaKey&&(n+="-cmd");e.ctrlKey&&(n+="-ctrl");e.shiftKey&&(n+="-shift")
;if(n in this.knownEventTypes&&(e.altKey||e.metaKey||e.ctrlKey||(o=e.target,i=o.tagName,r=o.isContentEditable,"INPUT"!=i&&"TEXTAREA"!=i&&"SELECT"!=i&&!r))){var o,i,r
;return this.eventEmitter.trigger(n,e)}};e.prototype.isRightAlt=function(e){return e.keyCode==r.KeyCode.ALT&&2==e.location};return e}();t.Dispatcher=s;function l(){return!a.default.mac}
t.WindowKeyEvents=new s(window)},130:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(74),r=n(6),a=function(e){o.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.state={commands:{},context:{}};t.handleOmnibarEvent=function(e){var n,o=e.commands||t.context.omnibar.getCommands(),i=t.state.context,a=t.state.commands
;t.props.context&&(i=r.pick(null!==(n=e.context)&&void 0!==n?n:{},t.props.context));t.props.commands&&e.availableCommandIds&&o&&(a=t.getAvailableCommandsMap(e.availableCommandIds,o))
;r.isEqual(a,t.state.commands)&&r.isEqual(i,t.state.context)||t.setState({commands:a,context:i})};return t}t.prototype.componentDidMount=function(){if(this.context.omnibar){
this.context.omnibar.on("contextChange",this.handleOmnibarEvent);this.context.omnibar.on("commandsChange",this.handleOmnibarEvent)
;var e=this.context.omnibar.getAvailableCommandIds(),t=this.context.omnibar.getCommands(),n=this.context.omnibar.getContext();this.handleOmnibarEvent({context:n,commands:t,availableCommandIds:e})}}
;t.prototype.componentWillUnmount=function(){if(this.context.omnibar){this.context.omnibar.off("contextChange",this.handleOmnibarEvent)
;this.context.omnibar.off("commandsChange",this.handleOmnibarEvent)}};t.prototype.getAvailableCommandsMap=function(e,t){var n=new Map,o=new Map,i={};t.forEach((function(e){n.set(e.id,e)}))
;this.props.commands.forEach((function(e){o.set(e,!0)}));e.forEach((function(e){n.has(e)&&o.has(e)&&(i[e]=n.get(e))}));return i};t.prototype.render=function(){var e;if(!this.props.children)return null
;var t={context:this.state.context,commands:this.state.commands,runCommandById:null===(e=this.context.omnibar)||void 0===e?void 0:e.runCommandById.bind(this.context.omnibar)}
;return this.props.children(t)};t.displayName="WithOmnibarInterface";t.contextTypes=r.pick(i.ReactAppContextTypes,["omnibar"]);return t}(n(0).Component);t.default=a},1329:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(532),r=n(22),a=n(162),s=n(18),l=n(20),d=n(61),c=n(17),u=n(81),h=function(){function e(e){var t=this;this.editor=e
;this.lastAutolinkPosition=null;this.autolinkAttrId=1;this.autocompleteCallback_=function(){return!1};this.autocompleteV2Callback_=function(){return!1};this.dispose=(0,u.wrapCallOnce)((function(){
t.autocompleteCallback_=function(){return!1};t.autocompleteV2Callback_=function(){return!1};t.editor=null}));this.linkWordAndPosition=function(e){var n,o=t.editor
;if(!t.editor.callStack.getCurrentCallStack().domClean)throw new Error("linkWordAndPosition must be called with domClean. Try calling core.incorporateUserChanges")
;if(!o.selection.isCollapsed())return null;var i=e||t.findAutolinkStartPosition(),r=o.selection.getEnd();if(!i||i.line!==r.line)return null
;var a=(null===(n=o.getSelectedRep())||void 0===n?void 0:n.lines.atIndex(i.line).text.substring(i.col,r.col))||"";return t.shouldTriggerLink(a,o)?{word:a,start:i,end:r}:null}}
e.prototype.getLastAutolinkPosition=function(){return this.lastAutolinkPosition};e.prototype.setAutocompleteCallback=function(e){this.autocompleteCallback_=e}
;e.prototype.setAutocompleteV2Callback=function(e){this.autocompleteV2Callback_=e};e.prototype.shouldTriggerLink=function(e,t){var n=[":","{","/"];t.hasFeature("disableDocMention")||n.push("+")
;t.hasFeature("disablePersonMention")||n.push("@");return-1!=n.indexOf(e[0])};e.prototype.setAutolink=function(e){this.autolinkAttrId++
;this.editor.contents.performDocumentApplyAttributesToRange(e,new l.Position(e.zone,e.line,e.col+1),[["clientside-autolink",String(this.autolinkAttrId)]])}
;e.prototype.setLastAutolinkPosition=function(e){this.lastAutolinkPosition=e};e.prototype.clearAutolink=function(){this.autolinkAttrId++};e.prototype.findAutolinkStartPosition=function(e){var t=this
;if(!this.editor.selection.isCollapsed())return null;var n=this.editor.getSelectedRep(),o=this.editor.getApool().attribToNum["clientside-autolink,"+String(this.autolinkAttrId)]
;if(void 0===o||!n)return null;for(var i=e||this.editor.selection.getLine(),a=n.alines[i],s=r.opIterator(a),d=null,c=0;s.hasNext();){var u=s.next();r.eachAttribNumber(u.attribs,(function(e){
e==o&&(d=new l.Position(t.editor.selection.getStart().zone,i,c))}));if(d)break;c+=u.chars}return d};e.prototype.handleAutocomplete=function(){
var e=this.editor.callStack.getCurrentCallStack(),t=this.caretWordInLink(),n=this.findAutolinkStartPosition();this.lastAutolinkPosition=n;var o=this.linkWord(n)
;if(!t&&n&&o&&this.shouldTriggerLink(o,this.editor)){if(e.docTextChanged){var i=this.caretWordPopupPosition();this.autocompleteCallback_(o,void 0,i,undefined);this.autocompleteV2Callback_(o,void 0,i)}
}else if(n&&e.docTextChanged&&o){if(!this.shouldTriggerLink(o,this.editor)){this.autocompleteCallback_();this.autocompleteV2Callback_()}}else{this.autocompleteCallback_()
;this.autocompleteV2Callback_()}};e.prototype.handleAutocompleteAction=function(e){var t=this.findAutolinkStartPosition(),n=this.linkWord(t),o=e;if(!n){this.autocompleteCallback_()
;this.autocompleteV2Callback_();this.clearAutolink();return!1}var r,s=this.caretWordPopupPosition();if((0,a.isAutocompleteRefactorEnabled)()&&"@"===n[0])r=this.autocompleteV2Callback_(n,e,s);else{
if("space"==e||"enter"==e)if(1!=n.length||this.editor.autoComplete.lastAutocompleteType==i.AC_TYPE.AT||this.editor.autoComplete.lastAutocompleteType==i.AC_TYPE.SLASH||this.editor.autoComplete.lastAutocompleteType==i.AC_TYPE.EMOJI&&-1!=App.getEmojis().getSelection()){
var l=this.editor.autoComplete;switch(l.lastAutocompleteType){case i.AC_TYPE.PLUS:case i.AC_TYPE.PLACEHOLDER:case i.AC_TYPE.AT:case i.AC_TYPE.SLASH:l.hasResults||(e="cancel")}}else e="cancel"
;r=this.autocompleteCallback_(n,e,s)}"cancel"==e&&this.clearAutolink();return d.default.gecko&&"enter"==o||r};e.prototype.isValidLinkStart=function(e){
var t=this.editor.selection.getLine(),n=this.editor.selection.getColumn(),o=this.editor.selection.getZone();return!!(e&&e.zone==o&&e.line==t&&e.col<n)};e.prototype.linkWord=function(e){
var t=this,n=e||this.findAutolinkStartPosition();return n?c.default.error.silentTryCatch((function(){
var e=t.editor.getRep(n.zone).lines.atIndex(n.line),o=t.editor.selection.internalGetPointForLineEntryAndCol(e,n.col),i=t.editor.selection.internalGetSelectionPoints()
;if(!i||i.startPoint.node!==i.endPoint.node||i.endPoint.index!=i.endPoint.index)return null;var r=i.endPoint;if(!(0,s.hasClosestElement)(r.node,e.lineNode))return null;var a=document.createRange()
;a.setStart(o.node,o.node.nodeType==Node.ELEMENT_NODE?o.node.childNodes.length*o.index:o.index);a.setEnd(r.node,r.node.nodeType==Node.ELEMENT_NODE?r.node.childNodes.length*r.index:r.index)
;for(var l=a.cloneContents(),d="",u=0;u<l.childNodes.length;u++)d+=c.default.dom.nodeText(l.childNodes[u]);return t.shouldTriggerLink(d,t.editor)?d:null}),(function(e){return null})):null}
;e.prototype.caretWordPopupPosition=function(){var e=this.caretWordPositionWithNode();if(e){var t=this.editor.dom.getRoot(),n=(0,s.offset)(t);return{x:e.left-n.left,y:e.top-n.top+e.node.offsetHeight+3
}}};e.prototype.caretWordPositionWithNode=function(){var e=this.editor.selection.internalGetSelectionPoints();if(!e)return null
;var t,n,i=(e.isReversed?e.startPoint:e.endPoint).node,r=this.editor.dom.rootNodeOfZoneContaining(i);for(;!i||"SPAN"!=i.nodeName||!c.default.classes.has(i,"autolink");){
if(!i||i.parentNode==r)return null;i=(n=void 0,(n=(t=i).previousSibling)?n.childNodes.length?n.childNodes[n.childNodes.length-1]:n:t.parentNode)}return o.__assign({node:i},(0,s.offset)(i))}
;e.prototype.caretWordInLink=function(){var e=this.editor.selection.internalGetSelectionPoints();if(!e)return!1;var t=(e.isReversed?e.startPoint:e.endPoint).node.parentNode
;return c.default.classes.has(t,"attrlink")};return e}();t.default=h},1330:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.AceCallStack=void 0
;var o=n(1),i=n(178),r=n(100),a=n(58),s=n(20),l=n(4),d=n(17),c=function(){function e(e,t){var n=this;this.editor=e;this.contentTypeRegistry=t;this.caughtErrors=[];this.currentCallStack=null
;this.successiveIdleWorkTimerFailures=0;this.successiveIdleWorkTimerSuccesses=0;this.idleWorkTimer=i.makeIdleAction((function(){
n.editor.core.getIMEStatus()?n.idleWorkTimer.atLeast(500):n.execute("idleWorkTimer",(function(){var e=i.newTimeLimit(99),t=!1;d.default.error.loggingTryCatch((function(){
n.editor.core.incorporateUserChanges();t=!0;n.successiveIdleWorkTimerFailures=0;n.successiveIdleWorkTimerSuccesses++
;n.successiveIdleWorkTimerSuccesses>=10&&!e()&&(n.successiveIdleWorkTimerSuccesses=0);e()||n.editor.getViewport().getIsScrolling()||n.editor.observer.trigger("idlework",void 0)}),(function(e){
n.successiveIdleWorkTimerFailures++;n.successiveIdleWorkTimerFailures>3&&(0,r.freakout)("incorporateUserChanges failed too many times in a row: "+e)}),(function(o){
if(o)n.idleWorkTimer.atMost(1e3);else if(t)n.idleWorkTimer.atMost(500);else{var i=Math.round(e.elapsed()/2);i<100&&(i=100);n.idleWorkTimer.atMost(i)}}))}),{shouldIncorp:!1})}))}
e.prototype.hasCurrentCallStack=function(){return!!this.currentCallStack};e.prototype.getCurrentCallStack=function(){
if(!this.currentCallStack)throw new Error("AceCallStack.getCurrentCallStack() called from outside of an execute() block.         See AceEditor.execute() for more information on the call stack and fixing this issue.")
;return this.currentCallStack};e.prototype.getIdleWorkTimer=function(){return this.idleWorkTimer};e.prototype.makeNewEvent=function(e,t){
if("nonundoable"===e)throw new Error("use makeNewNonundoableEvent instead");this.restoreInvariants();var n=this.getCurrentCallStack().editEvent.eventType
;this.getCurrentCallStack().startNewEvent("macro");t();this.restoreInvariants();this.getCurrentCallStack().startNewEvent(n)};e.prototype.makeNewNonundoableEvent=function(e){
var t=this.getCurrentCallStack().editEvent.eventType;this.getCurrentCallStack().startNewEvent("nonundoable");e();this.getCurrentCallStack().startNewEvent(t)};e.prototype.execute=function(e,t,n){
var i=this;if(!(0,r.hasFreakedOut)()){var a;n=o.__assign({shouldIncorp:!0,shouldScroll:!0},n);var s=this.editor;a=n.shouldIncorp?function(){s.core.incorporateUserChanges()
;return t.apply(this,arguments)}:t;if(this.currentCallStack)return a();if(s&&s.isDisposed())return null
;if(s.core.explicitlyRecordingMutations)throw Error("Can't enter callstack "+e+", already in recordingMutations stack");var c=this;this.currentCallStack={type:e,docTextChanged:!1,selectionAffected:!1,
domClean:!1,isUserChange:!1,repChanged:!1,editEvent:u(e),startNewEvent:function(e,t){var n=c.currentCallStack.editEvent;t||s.contents.internalSubmitUndoEvent(n);c.currentCallStack.editEvent=u(e)
;return n},shouldRefocusAtEnd:s.selection.isEditorFocused(),alwaysHandleAutocompleteAtEnd:!1};return d.default.error.loggingTryCatch(a,(function(e){i.caughtErrors.push({error:e,time:Date.now()})
;throw e}),(function(e){d.default.error.loggingTryCatch((function(){var t=i.currentCallStack
;t.docTextChanged&&t.domClean&&"setup"!=t.type&&"applyChangesToBase"!=t.type&&s.contents.getIsEditable()&&i.restoreInvariants();t.domClean&&s.lineTrackers.doUpdate()
;i.editor.contents.internalSubmitUndoEvent(t.editEvent);e?d.default.error.loggingTryCatch((function(){if(t.domClean&&"setup"!=t.type){var e=!1
;t.selectionAffected&&(e=s.selection.internalUpdateSelectionFromRep(t.shouldRefocusAtEnd));if(t.docTextChanged&&"applyChangesToBase"!=t.type){n.shouldScroll&&s.getViewport().scrollSelectionIntoView()
;if(-1==t.type.indexOf("importText")&&!e){s.observer.trigger("caret",!1);(0,l.trackEng)("call_stack-caret")}}
(t.alwaysHandleAutocompleteAtEnd||t.isUserChange&&t.selectionAffected&&t.repChanged)&&s.autolink.handleAutocomplete()}})):"idleWorkTimer"==i.currentCallStack.type&&i.idleWorkTimer.atLeast(1e3)
;i.currentCallStack=null}),(function(e){(0,r.freakout)("exception cleaning up call stack",e)}));false}))}function u(e){return{eventType:e,backset:null}}};e.prototype.restoreInvariants=function(){
this.sanitizeTitleLine_();this.restoreLastEmptyLineIfNecessary_()};e.prototype.sanitizeTitleLine_=function(){var e=this.editor
;if(!this.editor.hasFeature("notitle")&&(e.contents.getLineType(s.Position.zero)||a.lineHasLineLevelObject(s.Position.ROOT_ZONE,0,e.getRep(s.Position.ROOT_ZONE),e.getApool(),this.contentTypeRegistry))){
var t=e.contents.getLineType(s.Position.zero)
;/^h(one|two|three).*/.test(t)?e.contents.performDocumentReplaceRange(s.Position.zero,new s.Position("0",0,1),""):e.contents.performDocumentReplaceRange(s.Position.zero,s.Position.zero,"\n")}}
;e.prototype.restoreLastEmptyLineIfNecessary_=function(){if(this.editor.hasFeature("emptylastline")){var e=this.editor.getRep(s.Position.ROOT_ZONE),t=e.lines.atIndex(e.lines.length()-1).text
;if(""!=t){var n=new s.Position(s.Position.ROOT_ZONE,e.lines.length()-1,t.length);this.editor.contents.performDocumentReplaceRange(n,n,"\n",[],!0)}}};e.prototype.getUnhandledErrors=function(){
return this.caughtErrors.slice()};return e}();t.AceCallStack=c},1331:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),i=n(573),r=n(20),a=n(18),s=function(){function e(e){
this.editor=e;this.editorSelector=e.options.editorSelector;this.editorEl=document.querySelector(this.editorSelector);this.rootSelector=this.editorSelector+" .ace-editor.zoneId-0"
;this.root=document.querySelector(this.rootSelector);this.scrollSelector=e.options.scrollSelector||this.rootSelector;this.viewportNode=e.hasFeature("viewport")?(0,
a.closest)(this.root,"#padeditor"):null;this.root.zoneId={value:"0"}}e.prototype.isRootZoneId=function(e){return e==r.Position.ROOT_ZONE};e.prototype.getSelectorWithId=function(e,t){
return this.rootSelector+" #"+e+(t?" "+t:"")};e.prototype.getElementWithSelector=function(e){return this.root.querySelector(e)};e.prototype.getAceLineById=function(e){return document.getElementById(e)
};e.prototype.getEditorEl=function(){return this.editorEl};e.prototype.getRoot=function(){return this.root};e.prototype.getRootForZone=function(e){
return this.editorEl.parentElement.getElementsByClassName("zoneId-".concat(e))[0]||null};e.prototype.getRootSelector=function(){return this.rootSelector};e.prototype.getScrollEl=function(){
return"string"==typeof this.scrollSelector?document.querySelector(this.scrollSelector):this.scrollSelector};e.prototype.getScrollTop=function(){return(0,a.getScrollTop)(this.getScrollEl())}
;e.prototype.getLineHeight=function(){return parseInt(o.default.ace_line_height,10)};e.prototype.getViewportNode=function(){return this.viewportNode||this.root}
;e.prototype.getAceLineForNode=function(e){if(!e||!e.parentNode||e==this.root)return null;for(;!this.isRootOfZone(e.parentNode);)if(!(e=e.parentNode).parentNode)return null;return e}
;e.prototype.getParentZoneAceLine=function(e){if(!e||e==this.root)return null;for(;e.parentNode!=this.root;)if(!(e=e.parentNode))return null;return e};e.prototype.rootNodeOfZoneContaining=function(e){
if(!e||e==this.root)return null;for(;!this.isRootOfZone(e);)if(!(e=e.parentNode))return null;return e};e.prototype.zoneOfTopLevelNode=function(e){
return this.zoneOfRootNode(this.rootNodeOfZoneContaining(e))};e.prototype.zoneOfRootNode=function(e){return this.isRootOfZone(e)?e.zoneId.value:null};e.prototype.isRootOfZone=function(e){
if(e===this.root)return!0;if(!e||!e.zoneId)return!1;var t=this.editor.innerZoneEditorNodes[e.zoneId.value];return!(!t||t.getNode()!==e)};e.prototype.isNodeInEditor=function(e){return!!(0,
a.closest)(e,this.editorSelector)};e.prototype.isNodeLineManaged=function(e){return e&&!!(0,a.closest)(e,"[data-line-manager]")};e.prototype.rootNodeOfZone=function(e){if("0"==e)return this.root
;if(!this.editor.innerZoneEditorNodes[e]){this.editor.innerZoneEditorNodes[e]=new i.InnerZoneEditorNode(e,this.editor,this.editor.contents.getIsEditable())
;this.editor.core.initiateRepForZoneIfNecessary(e)}return this.editor.innerZoneEditorNodes[e].getNode()};e.prototype.internalIsNodeDirty=function(e){if(!this.isRootOfZone(e.parentNode))return!0
;var t=e._magicdom_dirtiness;return!t||(e.id!==t.nodeId||!t.isManagedLine&&!!this.editor.core.dirtyRangeObservationSystem.isNodeDirty(e))};e.prototype.getPadding=function(){return((0,
a.outerWidth)(this.root)-(0,a.width)(this.root))/2};return e}();t.default=s},1332:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(54),i=n(31),r=n(18),a=n(17),s=function(){
function e(e){this.editor=e;this.editableState=e.options.editableState;this.assertEditableStateIsOkay(e.options.editableState);this.setContentEditable(this.editableState===o.EditableState.Editable)}
e.prototype.assertEditableStateIsOkay=function(e){
if(this.editableState!==o.EditableState.Readonly&&this.editableState!==o.EditableState.CommentOnly&&this.editableState!==o.EditableState.Editable)throw new Error("invalid editable state: "+this.editableState)
;if(this.editor.padController&&this.editableState!==o.EditableState.Readonly&&(!window.App.padLoader.containsPadController(this.editor.padController)||this.editor.padController.mainAce!==this.editor))throw new Error("any non-readonly Ace with a pad controller must be findable via window.App")
};e.prototype.getEditableState=function(){return this.editableState};e.prototype.getIsEditable=function(){return this.editableState==o.EditableState.Editable};e.prototype.getIsCommentOnly=function(){
return this.editableState==o.EditableState.CommentOnly};e.prototype.getIsCommentable=function(){return this.editor.hasFeature("comments")&&this.editableState!=o.EditableState.Readonly}
;e.prototype.hasMinimumEditableState=function(e){return this.getEditableState()>=e};e.prototype.setEditable=function(e){var t=this;this.assertEditableStateIsOkay(e)
;var n=this.editableState!=e,r=this.editableState==o.EditableState.Editable,s=e==o.EditableState.Editable;(r&&!s||!r&&s)&&a.default.error.loggingTryCatch((function(){
t.editor.execute(s?"goingEditable":"goingNonEditable",(function(){}))}));this.editableState=e;r!==s&&this.internalEnforceEditabilityInDom();s&&!r&&a.default.error.loggingTryCatch((function(){
t.editor.execute("goingEditableSetSelection",(function(){t.editor.selection.internalUpdateRepFromSelection(t.editor.selection.internalGetSelectionPoints(),void 0,void 0)
;t.editor.selection.internalUpdateSelectionFromRep(!0)}))}))
;(!i.default.isOnButDoNotLog("paper_fix_editable_state_change_events")||n)&&(this.editor.isDisposed()||this.editor.observer.trigger("editable-state-changed",this.editableState));return s!==r}
;e.prototype.internalEnforceEditabilityInDom=function(){var e=this.getIsEditable();this.setContentEditable(e);(0,r.toggleClass)(this.editor.dom.getEditorEl(),"ace-readonly",!e);(0,
r.toggleClass)(this.editor.dom.getEditorEl(),"ace-editable",e);(0,r.toggleClass)(this.editor.dom.getRoot(),"ace-editor-readonly",!e);a.default.classes.enable(this.editor.dom.getRoot(),"static",!e)
;this.editor.managers.getAllLineManagers("aceTable").forEach((function(t){t.setContentEditable(e)}))
;for(var t in this.editor.innerZoneEditorNodes)this.editor.innerZoneEditorNodes[t].updateEditorContentEditable(e)};e.prototype.setContentEditable=function(e){var t=this
;a.default.error.loggingTryCatch((function(){var n=e.toString(),o=t.editor.dom.getRoot();o.contentEditable!==n&&(o.contentEditable=n)}),(function(){}))};return e}();t.default=s},1333:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.lineIsBlank=t.isH1orH2Line=void 0;var o=n(17);function i(e){var t=e.domInfo;return!!(t&&t.listType&&["htwo","hone"].indexOf(t.listType)>-1)}
t.isH1orH2Line=i;t.lineIsBlank=function(e){var t=e.text;i(e)&&(t=t.substring(e.lineMarker));return o.default.string.isBlank(t)}},1334:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(90),a=n(7),s=n(363),l=n(1337),d=n(22),c=n(107),u=n(30),h=n(8),p=n(1338),f=n(2),g=n(576),m=n(58),v=n(107),y=n(94),b=n(801),C=n(802),E=n(146),I=n(178),_=n(447),T=n(10),S=n(360),k=n(439),x=n(4),w=n(51),P=n(75),A=n(7),O=n(28),L=n(577),N=n(27),M=n(20),R=n(85),D=n(0),F=n(24),z=n(563),U=n(31),H=n(13),B=n(4),Z=n(1341),j=n(17),W=n(18),V=n(119),K=n(81),G=(0,
n(5).PaperIntlFactory)().F,q=(0,f.defineMessages)({fileTooBigTitle:{id:"6CnAhu",defaultMessage:"File too big"},fileTooBigBody:{id:"gCSpb3",
defaultMessage:"Files over 50 MB can't be dragged in. Upload the file to Dropbox first and then paste the link into your doc."},noUploadWhenImpersonatingTitle:{id:"sRrXCV",defaultMessage:"Sorry"},
noUploadWhenImpersonatingBody:{id:"Xj2YXn",defaultMessage:"Uploading is disabled when signed-in as another user."},fileDragErrorTitle:{id:"y2nKYn",defaultMessage:"Can't add item"},
fileDragErrorTitleMobile:{id:"zno2dX",defaultMessage:"Can’t drag in this file"},fileDragErrorBody:{id:"Ex5pMP",defaultMessage:"Folders and apps can't be dragged into Paper. "},
fileDragErrorBodyMobile:{id:"44vJEK",defaultMessage:"Only images can be dragged into a doc. To add other file types, use the insert toolbar that appears when you start a new line."},
fileDragLearnMoreButtonText:{id:"DDD+Ux",defaultMessage:"Learn how to add files and folders to a doc."},fileDragLearnMoreButtonTextMobile:{id:"YigKaQ",
defaultMessage:"Learn more about inserting files."}}),Y=[M.Position.ROOT_ZONE],X=function(){function e(e,t){var n=this;this.unfurlCache=new Z.UnfurlDataCache;this.hasCurrentEventFiles=null
;this.onOpenHotkey=function(e){n.editor.contents.getIsEditable()||n.onKeydown(e)};this.handleInsertFiles=function(e){var t=e[0],o=e[1],i=e[2]
;n.insertFiles(t,o,i||A.MediaInsertionMode.AppendToExistingGallery)};this.onMouseDown=function(e){if(e.shiftKey){var t=window.getSelection(),o=n.getGalleryItemElFromEvent(e);if(!o){
var i=n.getSelectedGalleryElement();if(i){o=i;var r=void 0;document.caretRangeFromPoint?r=document.caretRangeFromPoint(e.clientX,e.clientY):(r=document.createRange()).selectNode(e.target)
;t.removeAllRanges();t.addRange(r)}}if(o){n.extendSelectionToIncludeGalleryElement(t,o);e.preventDefault();return!0}}};this.onEditorBlur=function(){var e=n.getSelectedGalleryElement()
;if(e&&e!=document.activeElement){var t=n.editor.selection.getPositionForNode(e),o=t.zone,i=t.line,r=n.editor.managers.getLineManager(o,i,"gallery");r&&r.handleEditorBlur&&r.handleEditorBlur()}}
;this.onDragOver=function(e){if(n.eventHasFiles(e)){e.preventDefault();var t=e.dataTransfer&&e.dataTransfer.dropEffect,o=e.dataTransfer&&e.dataTransfer.effectAllowed
;"none"==t&&"none"!=o&&(e.dataTransfer.dropEffect="copy");n.onImageDragOver(e)}};this.onDragLeave=function(e){
var t=e.clientX&&(e.clientX>=window.innerWidth||e.clientX<=0),o=e.clientY&&(e.clientY>=window.innerHeight||e.clientY<=0);(!e.clientX&&!e.clientY||t||o)&&n.removeImageDragPlaceholder(!0)}
;this.onDrop=function(e){var t=!O.isNativeMobileApp();if(e.dataTransfer&&e.dataTransfer.files.length){e.preventDefault();e.stopPropagation();var i,s=n.imageDragDropCurrentEl
;n.removeImageDragPlaceholder(!0);var l=(0,_.findNearestDropLineFor)(e.target);if(!l){if(!s)return;l=s}i=n.editor.selection.getPositionForNode(l);if(n.isDropAllowed(i)){i=i.withCol(0)
;var d=Array.apply(n,e.dataTransfer.files),c={fileTypes:[],fileSizes:[],context:(0,b.getContextForZone)(i.zone)};d.forEach((function(e){if(e.name&&e.size){c.fileTypes.push((0,
N.parseFileExtension)(e.name).extension);c.fileSizes.push(e.size)}}));(0,B.trackUi)("Drag and Drop Files in Paper Attempt",c);(0,_.getUploadableFiles)(e.dataTransfer,!t).then((function(e){
if(e.length){x.IntentionEvent.FileDragAndDrop.track(o.__assign({allowed:!0},c));n.insertFiles(e,i,A.MediaInsertionMode.CreateNewGallery,a.AttachmentInsertionSource.DragAndDrop);(0,
x.trackAce)("toolbar-image",{drop:!0})}else{var t=D.createElement(H.default,{name:"insert-small"})
;O.isNativeMobileApp()?r.alert(D.createElement(G,o.__assign({},q.fileDragErrorTitleMobile)),D.createElement("span",{className:"non-image-drag-drop-message"
},D.createElement(G,o.__assign({},q.fileDragErrorBodyMobile,{values:{plus:t}})),D.createElement("br",null),D.createElement(T.default,{href:"https://www.dropbox.com/help/9167"
},D.createElement(G,o.__assign({},q.fileDragLearnMoreButtonTextMobile))))):r.alert(D.createElement(G,o.__assign({},q.fileDragErrorTitle)),D.createElement("span",{
className:"non-image-drag-drop-message"},D.createElement(G,o.__assign({},q.fileDragErrorBody)),D.createElement("br",null),D.createElement(T.default,{href:"https://www.dropbox.com/help/9167"
},D.createElement(G,o.__assign({},q.fileDragLearnMoreButtonText)))));(0,x.trackAce)("drag-drop-non-image");x.IntentionEvent.FileDragAndDrop.track(o.__assign({allowed:!1},c))}}))}}}
;this.handleImageChange=function(e){var t=e.currentTarget,o=n.editor.selection.getStart(),i=Array.prototype.slice.apply(t.files)
;n.editor.observer.trigger("insert-files",[i,o,A.MediaInsertionMode.ReplaceExistingItem]);var r=n.editor.dom.getEditorEl().querySelector(".web-image-upload")
;r.removeEventListener("change",n.handleImageChange);r.value=""};this.dispose=(0,K.wrapCallOnce)((function(){var e=document.querySelector(".web-image-upload")
;null==e||e.removeEventListener("change",n.handleImageChange);n.attachmentStore.dispose();V.WindowKeyEvents.off(P.MediaHotkeys.Open,n.onOpenHotkey);n.unbindEvents();n.editor=null
;n.attachmentStore=null}));this.editor=e;this.attachmentStore=t||new s.AttachmentStore(e.padController);V.WindowKeyEvents.define(P.MediaHotkeys.Open,this.onOpenHotkey);this.bindEvents()}
e.prototype.onAttach=function(e,t,n){var o;0==e.type.indexOf("image/")&&"image/tiff"!=e.type&&!U.isOnButDoNotLog("paper_enhance_embed_experience")||(o=s.Endpoint.Paper)
;o?this.attachmentStore.attachToDropbox(o,e,t,void 0,void 0,void 0,n):this.attachmentStore.attachImage(e,t)};e.prototype.finalizeAttachment=function(e,t,n){var o=this,i=this.editor
;e.done?i.execute("finalizeAttachment",(function(){i.callStack.makeNewNonundoableEvent((function(){o.fixFlickerOfUploadImage(t,e.attachmentId,e.dimensions,e.dataUrl);o.setAttachmentUrl(e,t)}))
;i.observer.trigger("gallery-item-upload-finish",void 0)})):e.failed&&(0,_.showFailedUploadToast)(e,(function(){o.onAttach(e.originalFile,e.attachmentId,n)}),(function(){
o.cancelFailedUpload(e.attachmentId,t)}))};e.prototype.setAttachmentUrl=function(e,t){
var n=e.attachmentId,o=e.finalUrl,i=this.editor.dom.getAceLineForNode(F.findDOMNode(t)),r=this.editor.selection.getPositionForNode(i),a=JSON.parse(JSON.stringify(t.getGalleryData()))
;a.items=a.items.map((function(e){n&&e.attachmentId==n&&o&&(e.url=o);(0,c.isPencilKitDrawingItemData)(e)&&e.pencilKitDataAttachmentId==n&&o&&(e.pencilKitDataUrl=o);return e}))
;var s=[["gallery",JSON.stringify(a)]];this.editor.contents.performDocumentApplyAttributesToRange(r,r.withCol(1),s)};e.prototype.cancelFailedUpload=function(e,t){var n=t.getGalleryData().items,o=-1
;n.forEach((function(t,n){t.attachmentId==e&&(o=n)}));o>=0&&t.removeItem(o)};e.prototype.fixFlickerOfUploadImage=function(e,t,n,o){var i=(0,
W.width)(this.editor.dom.getRoot()),r=".gallery-attachment-id-"+t+" .inline-img";this.editor.dynamicCSS.selectorStyle(r).backgroundImage="url("+o+")"
;e.getCount()>2?i=i/3-2*parseInt(u.default.gallery_item_margin,10):2==e.getCount()&&(i=i/2-2*parseInt(u.default.gallery_item_margin,10));var a=document.querySelector(r);if(a){
var s=getComputedStyle(a,null),l=s.height,d=s.width;this.editor.dynamicCSS.selectorStyle(r).width=parseFloat(d)+"px";this.editor.dynamicCSS.selectorStyle(r).height=parseFloat(l)+"px"
;if(-1!=[y.GalleryStyle.FullWidth,y.GalleryStyle.Overlay].indexOf(e.getGalleryStyle())){this.editor.dynamicCSS.selectorStyle(r).backgroundSize="cover"
;this.editor.dynamicCSS.selectorStyle(r).backgroundPosition="center center"}else this.editor.dynamicCSS.selectorStyle(r).backgroundSize="100% 100%"}};e.prototype.isImageType=function(e){
return"image"==e||"dropbox-image"==e};e.prototype.isImagePlaceholder=function(e){return e&&!!(0,W.closest)(e,".gallery-item-is-uploading")};e.prototype.insertImageData=function(e,t){
var n="base64:image/jpeg;,"+e;this.insertFiles([(0,p.dataURIToBlob)(n)],t)};e.prototype.insertPencilKitImage=function(e,t,n,i,r){var a=this,s=(0,p.dataURIToBlob)("base64:image/jpeg;,"+e),l=(0,
p.dataURIToBlob)("base64:application/octet-stream;,"+t);if(this.checkFilesBeforeUploadAndMaybeShowAlert([s,l])){var d=A.MediaInsertionMode.CreateNewGallery
;null!=i&&null!=r&&(d=A.MediaInsertionMode.ReplaceExistingItem);var u=(0,L.newAttachmentId)(),h=(0,
L.newAttachmentId)(),f=this.embedSlugForUploadPlaceholder(s,this.computePositionForMediaInsertion(d,n)),g=(0,c.createPlaceholderGalleryItemData)(u,f),m=o.__assign(o.__assign({},g),{
pencilKitDataAttachmentId:h});this.onAttach(s,u);this.attachmentStore.attachPencilKitDrawing(l,h);if(d==A.MediaInsertionMode.ReplaceExistingItem){var v=(0,
C.getGalleryForGalleryClientsideId)(this.editor,i);if(v){var y,E=v.getPosition();if(y=(0,c.replaceInGallery)(v.getGalleryData(),r,m)){this.editor.execute("insertMedia",(function(){(0,
x.trackAce)("insert-media",{zone:E.zone,attachmentId:u,insertionMode:d,context:(0,b.getContextForZone)(E.zone)})
;a.editor.contents.performDocumentApplyAttributesToRange(E.withCol(0),E.withCol(1),[["magicObject","gallery"],["gallery",JSON.stringify(y)]])}));return}}}
this.insertMedia([m],n,A.MediaInsertionMode.CreateNewGallery)}};e.prototype.embedSlugForUploadPlaceholder=function(e,t){var n=0==e.type.indexOf("image/")&&"image/tiff"!=e.type,o=O.isNativeMobileApp()
;return n||o?"image":"dropbox"};e.prototype.checkFilesBeforeUploadAndMaybeShowAlert=function(e){if(h.default.impersonatorEncryptedAccountId){
r.alert(D.createElement(G,o.__assign({},q.noUploadWhenImpersonatingTitle)),D.createElement(G,o.__assign({},q.noUploadWhenImpersonatingBody)));return!1}if(i.some(e,(function(e){return e.size>52428800
}))){r.alert(D.createElement(G,o.__assign({},q.fileTooBigTitle)),D.createElement(G,o.__assign({},q.fileTooBigBody)));return!1}return!0};e.prototype.insertFiles=function(e,t,n,o){var i=this
;void 0===n&&(n=A.MediaInsertionMode.CreateNewGallery);if(this.checkFilesBeforeUploadAndMaybeShowAlert(e)){var r=e.map((function(e){
var o=i.embedSlugForUploadPlaceholder(e,i.computePositionForMediaInsertion(n,t));return(0,c.createPlaceholderGalleryItemData)((0,L.newAttachmentId)(),o)}))
;if(U.isOnButDoNotLog("paper_enhance_embed_experience"))this.editor.observer.trigger("insert_files_begin",{items:r});else{var a=r.filter((function(e){return"dropbox"==e.type}))
;this.editor.observer.trigger("insert_files_begin",{items:a})}r.forEach((function(t,n){var r=e[n],a=t.attachmentId;i.onAttach(r,a,o)}));this.insertMedia(r,t,n)}}
;e.prototype.computePositionForMediaInsertion=function(e,t){var n,o=this.editor.selection.getStart(),i=M.Position.endOfZone(this.editor,M.Position.ROOT_ZONE)
;(n=e==A.MediaInsertionMode.AppendToLastLine?i.withCol(0):(t||o||i).withCol(0)).zone==M.Position.ROOT_ZONE&&0==n.line&&(n=n.withLine(n.line+1));return n};e.prototype.replaceWithReflow=function(e,t,n){
var o=this;this.editor.execute("replaceWithReflow",(function(){var i=t.getGalleryData().items,r=t.getCurrentIndex(),a=i.slice(0,r),s=i.slice(r+1),l=a.concat(e,s)
;o.insertMedia(l,n,A.MediaInsertionMode.CreateNewGallery);t.removeGallery()}))};e.prototype.insertMedia=function(e,t,n){var o=this;void 0===n&&(n=A.MediaInsertionMode.CreateNewGallery)
;this.editor.execute("insertMedia",(function(){var i=o.computePositionForMediaInsertion(n,t),r=o.editor.getRep(i.zone);if(-1!=Y.indexOf(i.zone)||(0,w.isCellId)(i.zone)){e.forEach((function(e){(0,
x.trackAce)("insert-media",{zone:i.zone,attachmentId:e.attachmentId,insertionMode:A.MediaInsertionMode[n],context:(0,b.getContextForZone)(i.zone)})}))
;t&&t.zone==M.Position.ROOT_ZONE&&0==t.line&&o.editor.contents.performDocumentReplaceRange(i,i,"\n");var a
;n!=A.MediaInsertionMode.CreateNewGallery&&(a=o.editor.managers.getLineManager(i.zone,i.line,"gallery"));var s=[];if(n==A.MediaInsertionMode.ReplaceWithReflow)o.replaceWithReflow(e,a,t);else{if(a){
var l=null;if(n==A.MediaInsertionMode.ReplaceExistingItem){R.default.checkArgument(1==e.length,"Can only replace one at a time.");l=(0,c.replaceInGallery)(a.getGalleryData(),a.getCurrentIndex(),e[0])
}else{var d=a.getCount(),u=void 0;u=n==A.MediaInsertionMode.PrependToExistingGallery?0:n==A.MediaInsertionMode.InsertAfterSelectionInExistingGallery?a.getCurrentIndex()+1:d
;var h=Math.max(Math.min(m.MAX_GALLERY_ITEMS_PER_ROW-d,e.length),0);(h<e.length&&u<d||o.isImageFullWidth(i)||(0,c.isFullRowItemGallery)(a.getGalleryData(),i.zone))&&(h=0);h>0&&(l=(0,
c.spliceInGallery)(a.getGalleryData(),u,0,e.slice(0,h)));s=e.slice(h)}
l&&o.editor.contents.performDocumentApplyAttributesToRange(i.withCol(0),i.withCol(1),[["magicObject","gallery"],["gallery",JSON.stringify(l)]])}else s=e;if(s.length>0){
n==A.MediaInsertionMode.PrependToExistingGallery&&(i=i.withLine(Math.max(0,i.line-1)));(0,m.splitMultirowGallery)({items:s},i.zone).forEach((function(e){var t=r.lines.atIndex(i.line)
;if(!j.default.string.isBlank(t.text)){var n=i.withCol(t.text.length);o.editor.contents.performDocumentReplaceRange(n,n,"\n");i=i.withLine(i.line+1)}
var a=[["magicObject","gallery"],["gallery",JSON.stringify(e)]];o.editor.contents.performDocumentReplaceRange(i,i,"*",a);o.editor.lists.renumberListsInRange(i.zone,i.line+1,i.line+2)}))}}}}))}
;e.prototype.handleContentCollectorUploadToMake=function(e){switch(e.type){case"blob-url":this.beginUploadOfBlobUrl(e.attachmentId,e.blobUrl);return;case"data-url":
this.beginUploadOfDataUrl(e.attachmentId,e.dataUrl);return;default:throw new Error("unknown contentcollector UploadToMake type")}};e.prototype.beginUploadOfDataUrl=function(e,t){var n=(0,
p.dataURIToBlob)(t);this.onAttach(n,e)};e.prototype.beginUploadOfBlobUrl=function(e,t){var n=this;l.loadBlob(t).then((function(t){return n.onAttach(t,e)}))};e.prototype.getAllImages=function(){
return Array.prototype.slice.call(this.editor.dom.getRoot().querySelectorAll(".inline-img"))};e.prototype.tryUnfurl=function(e){return this.unfurlCache.tryUnfurl(e)}
;e.prototype.beginTryUnfurl=function(e,t){var n=this;this.tryUnfurl(t).then((function(o){(0,z.shouldRenderUnfurlEmbed)(o)&&n.editor.execute("unfurlSuccessAddGallery",(function(){
var o=n.getLineWithPotentialUnfurlId(e);if(o){var i=new M.Position(o.zone,o.line+1,o.col);n.editor.contents.performDocumentReplaceRange(o,i,"\n")
;n.editor.contents.performDocumentReplaceRange(o,i,"*",[["magicObject","gallery"],["gallery",JSON.stringify((0,c.embedToGalleryAttrib)(t,"unfurl"))]])}}))}))}
;e.prototype.getLineWithPotentialUnfurlId=function(e){
for(var t=this.editor.getReps(),n=0,o=Object.keys(t);n<o.length;n++)for(var i=o[n],r=0;r<t[i].alines.length;r++)for(var a=d.opIterator(t[i].alines[r]);a.hasNext();){var s=a.next()
;if(d.attribsAttributeValue(s.attribs,"clientside-potential-unfurl-embed-id",this.editor.getApool())===e)return new M.Position(i,r,0)}return null};e.prototype.getAllLightboxableElements=function(){
var e=this;return Array.prototype.slice.call(this.editor.dom.getRoot().querySelectorAll(".ace-line.line-manager-type-gallery .gallery-item")).filter((function(t){return!!e.lightboxItemForElement(t)}))
};e.prototype.findNextLightboxableElement=function(e,t){void 0===t&&(t=!1);var n=(0,W.closest)(e,".gallery-item"),o=this.getAllLightboxableElements();if(o.length<=1)return null
;for(var i=0;i<o.length;i++)if(o[i]===n){return o[(i+(t?-1:1)+o.length)%o.length]}return null};e.prototype.lightboxItemForElement=function(e){
if(!e.classList||!i.some(["inline-img","inline-embed"],(function(t){return e.classList.contains(t)})))return null
;var t=this.editor.selection.getPositionForNode(e),n=this.editor.managers.getLineManager(t.zone,t.line,"gallery");if(!n)return null;var o=(0,
W.closest)(e,"[data-gallery-index]"),r=parseInt(o.dataset.galleryIndex,10),a=n.getEmbedComponentByIndex(r);return a&&a.getLightboxItem?a.getLightboxItem():null}
;e.prototype.galleryItemForElement=function(e){var t=this.editor.selection.getPositionForNode(e),n=this.editor.managers.getLineManager(t.zone,t.line,"gallery");return n?n.getItemForEl(e):null}
;e.prototype.extendSelectionToIncludeGalleryElement=function(e,t){var n=this.editor.dom.getAceLineForNode(t);if(e.rangeCount){var o=!1;if(1==e.rangeCount){
var i=e.getRangeAt(0),r=document.createRange();r.selectNode(t);o=1!=i.compareBoundaryPoints(Range.START_TO_START,r)}e.extend(n,o?1:0)}else e.selectAllChildren(t)}
;e.prototype.getGalleryItemElFromElement=function(e){var t=(0,W.closest)(e,".gallery-item");if(t)return t;var n=(0,W.closest)(e,".inline-embed");if(n)return n.querySelector(".gallery-item");var o=(0,
W.closest)(e,".gallery-image-annotations-wrapper"),i=(0,W.closest)(e,".gallery-annotation-point"),r=(0,W.closest)(e,".gallery-item-comment-prompt");if(o&&!i&&!r)return o.querySelector(".gallery-item")
;if(!!(0,W.closest)(e,".ace-gallery-caption.inner-zone-ace-editor-wrapper")){var a=(0,W.closest)(e,".gallery-item-wrapper");if(a)return a.querySelector(".gallery-item")}return null}
;e.prototype.getGalleryItemElFromEvent=function(e){return!!e&&this.getGalleryItemElFromElement(e.target)||null};e.prototype.onClick=function(e){var t=this,n=this.getGalleryItemElFromEvent(e)
;if(n&&this.editor.hasFeature("lightbox")){var o=e.target;if((0,W.closest)(o,".mention-pad,.attrlink, .dynamiclink")&&(0,W.closest)(o,".gallery-click-to-select-only"))return!1;if((0,
W.closest)(o,".gallery-click-selection-disabled")){e.preventDefault();return!0}if(e.shiftKey){e.preventDefault();return!0}if((0,W.closest)(o,".embed-popout-button")){this.open(n,!0);e.preventDefault()
;return!0}var i=this.editor.selection.getPositionForNode(n),r=this.editor.managers.getLineManager(i.zone,i.line,"gallery");if(r){if(r.handleAnnotationMouseClick(n,e)){e.preventDefault();return!0}}
var a=this.editor.selection.getPositionForNode(n),s=this.editor.hasSelection()&&a.zone===this.editor.selection.getZone()&&this.editor.selection.getStart().line<=a.line&&a.line<=this.editor.selection.getEnd().line&&this.getSelectedGalleryElement()==n,l=this.editor.hasSelection()&&this.editor.selection.getZone()!=M.Position.ROOT_ZONE&&this.editor.managers.getLineManagerForNonRootZoneId(this.editor.selection.getZone())==r&&((0,
W.hasClosestElement)(r.getCurrentItem(),n)||(0,W.has)(r.getCurrentItem(),n)),d=s||l,c=!!(0,
W.closest)(o,".selected-line"),u=d&&c&&this.getSelectedGalleryElement()==n&&r&&r.currentIndexStillFocused(),h=!!(0,W.closest)(o,".inner-zone-ace-editor-wrapper"),p=function(){
t.editor.hasSelection()&&t.editor.selection.getZone()!=M.Position.ROOT_ZONE&&(t.editor.selection.getZone()==M.Position.ROOT_ZONE||h)&&t.editor.managers.getLineManagerForNonRootZoneId(t.editor.selection.getZone())==r||t.editor.execute("select-in-gallery",(function(){
t.editor.selection.set({start:i.withCol(0),end:i.withCol(1)});t.editor.focus()}),{shouldIncorp:!1})
},f=!("binder"===this.editor.editorType||O.isMobile()&&!this.editor.contents.getIsEditable()&&!this.editor.options.showContextualToolbar||(0,W.closest)(o,".gallery-click-to-open-lightbox"));if(!u&&f){
r&&r.selectItemByEl(n);p();var g=this.lightboxItemForElement(n);g&&g.canBePrerendered&&this.editor.observer.trigger("lightbox-prerender",g)}else if(!n.classList.contains("unclickable")&&!(0,
W.closest)(o,".gallery-click-to-select-only")){p();this.open(n)}e.preventDefault();return!0}return!1};e.prototype.getGallery=function(e){if(!this.editor)return null;if(!e)return null
;var t=this.editor.selection.getPositionForNode(e);return this.editor.managers.getLineManager(t.zone,t.line,"gallery")};e.prototype.getSelectedGalleryEmbedData=function(){
var e=this.getSelectedGalleryElement();if(!e)return{embedUrl:null,embedType:null,embedComponent:null,galleryItemData:null,index:null};var t=this.getGallery(e);if(!t)return{embedUrl:null,
embedType:null,embedComponent:null,galleryItemData:null,index:null};var n=t.getIndexForEl(e),o=t.getGalleryData().items[n],i=t.getTypeByIndex(n),r=t.getEmbedComponentByIndex(n);return{
embedUrl:o&&o.url,embedType:i,embedComponent:r,galleryItemData:o,index:n}};e.prototype.getSelectedGalleryElement=function(){var e=this.editor
;return e.getSelectedRep()&&e.hasSelection()&&e.hasFeature("lightbox")?e.selection.getStart().line!=e.selection.getEnd().line?null:this.getGalleryItemAtLine(e.selection.getZone(),e.selection.getLine()):null
};e.prototype.getSelectedGalleryOrNull=function(){
return this.editor.hasSelection()&&this.editor.selection.isSameLine()?this.editor.managers.getLineManager(this.editor.selection.getStart().zone,this.editor.selection.getStart().line,"gallery"):null}
;e.prototype.getAllSelectedGalleryElements=function(){var e=this.editor;if(!e.getSelectedRep()||!e.hasSelection())return[]
;for(var t=[],n=e.selection.getStart().line,o=e.selection.getEnd().line,i=n;i<=o;i++){var r=this.getGalleryItemAtLine(e.selection.getZone(),i);r&&t.push(r)}
0==t.length&&t.push(this.getSelectedGalleryElement());return t};e.prototype.getGalleryItemAtLine=function(e,t,n){void 0===n&&(n=null);var o=this.editor.managers.getLineManager(e,t,"gallery")
;if(!o)return null;if(n){var i=o.getIndexForThread(n);if(i)return o.getElAtIndex(i)}return o.getCurrentItem().querySelector(".gallery-item")};e.prototype.openSelectedObj=function(e){
var t=this.getSelectedGalleryElement();if(t){this.open(t);e&&e.preventDefault()}};e.prototype.open=function(e,t,n){
var o=!O.isNativeMobileApp()&&!O.isMobile()||this.editor.options.nativeLightboxAvailable,i=!O.isNativeMobileApp()&&!O.isMobile(),r=this.lightboxItemForElement(e),a=r instanceof k.ImageLightboxItem,s=r instanceof S.IframeLightboxItem&&!t
;if(a&&o||s&&i){if(r){this.editor.observer.trigger("lightbox",[r,n]);return}}else if(e.classList.contains("inline-embed")){var l=e.getAttribute("href")
;this.editor.observer.trigger("open-link",[l,!1,[]]);var d=this.galleryItemForElement(e);d&&x.IntentionEvent.OpenLinkFromEmbed.track({type:d.type})}};e.prototype.onDblclick=function(e){}
;Object.defineProperty(e.prototype,"keyEventHandlerMap",{get:function(){return{8:this.onBackspaceKeyPress.bind(this),13:this.onEnterKeyPress.bind(this),32:this.onSpaceKeyPress.bind(this),
46:this.onBackspaceKeyPress.bind(this),37:this.onArrowKeyPress("left"),38:this.onArrowKeyPress("up"),39:this.onArrowKeyPress("right"),40:this.onArrowKeyPress("down")}},enumerable:!1,configurable:!0})
;e.prototype.onKeydown=function(e){var t=this.keyEventHandlerMap[e.keyCode];t&&t(e)};e.prototype.onBackspaceKeyPress=function(e){var t=this,n=this.getSelectedGalleryElement()
;n&&this.editor.execute("gallerykeypress",(function(){if(n=t.getSelectedGalleryElement()){var o=t.editor.selection.getPositionForNode(n)
;t.editor.contents.performDocumentReplaceRange(new M.Position(o.zone,o.line,0),new M.Position(o.zone,o.line,1),"");e.preventDefault()}}))};e.prototype.onSpaceKeyPress=function(e){
this.openSelectedObj(e)};e.prototype.onEnterKeyPress=function(e){this.openSelectedObj(e)};e.prototype.onArrowKeyPress=function(e){var t=this,n=this.editor;return function(o){
n.execute("gallerykeypress",(function(){var i=n.getSelectedRep(),r=t.getSelectedGalleryElement(),a=n.managers.getLineManager(n.selection.getZone(),n.selection.getLine(),"gallery")
;if(r||o.shiftKey&&a){var s=n.selection.getStart().line,l=void 0,d=void 0,c=void 0,u=n.managers.getLineManager(n.selection.getZone(),s,"gallery"),h=u.getCurrentIndex(),p=u.getCount()
;o.preventDefault();if(o.shiftKey){var f="left"==e||"up"==e?n.selection.getStart().line-1:n.selection.getStart().line,g="left"==e||"up"==e?n.selection.getEnd().line:n.selection.getEnd().line+1
;l=new M.Position(n.selection.getStart().zone,f,0);d=new M.Position(n.selection.getStart().zone,Math.min(i.lines.length()-1,g),0);c="left"==e||"up"==e}else{if("left"==e&&h>0){u.selectItem(h-1);return}
if("right"==e&&h<p-1){u.selectItem(h+1);return}if("right"==e||"down"==e){l=d=new M.Position(n.selection.getStart().zone,Math.min(i.lines.length()-1,s+1),0);c=!1}else{if("left"!=e&&"up"!=e){
console.warn("onArrowKeyPress of neither up, down, right, or left: "+e);return}var m=i.lines.atIndex(s-1).text.length;l=d=new M.Position(n.selection.getStart().zone,s-1,m);c=!1}}
l.line<0&&(l=l.withLine(0));d.line<0&&(d=d.withLine(0));n.selection.set({start:l,end:d,isReversed:c})}n.getViewport().scrollSelectionIntoView()}))}};e.prototype.eventHasFiles=function(e){
if(null!==this.hasCurrentEventFiles)return this.hasCurrentEventFiles;if(!e||!e.dataTransfer||!e.dataTransfer.types){this.hasCurrentEventFiles=!1;return this.hasCurrentEventFiles}if((0,
_.eventHasFiles)(e)){this.hasCurrentEventFiles=!0;return this.hasCurrentEventFiles}this.hasCurrentEventFiles=!1;return this.hasCurrentEventFiles};e.prototype.removeImageDragPlaceholder=function(e){
var t=this,n=function(){t.imageDragDropCurrentPocket&&t.imageDragDropCurrentPocket.remove(t.imageDragDropCurrentPocketRef);t.imageDragDropCurrentPocket=null;t.imageDragDropCurrentPocketRef=null
;t.imageDragDropCurrentEl=null;t.hasCurrentEventFiles=null};window.clearTimeout(this.imageDragDropTimeout);e?n():this.imageDragDropTimeout=window.setTimeout(n,333)}
;e.prototype.isDropAllowed=function(e){return e.zone==M.Position.ROOT_ZONE||(0,w.isCellId)(e.zone)};e.prototype.onImageDragOver=function(e){var t=(0,_.findNearestDropLineFor)(e.target);if(t){
var n=this.editor.selection.getPositionForNode(t);if(this.isDropAllowed(n)){var o=this.editor.getRep(n.zone).lines.atIndex(n.line).text;if(j.default.string.isBlank(o)){var i=(0,
I.getPreviousLine)(t,this.editor);if(i){t=i.lineNode;n=n.withLine(n.line-1)}}if(t!=this.imageDragDropCurrentEl){
this.imageDragDropCurrentPocket&&this.imageDragDropCurrentPocket.remove(this.imageDragDropCurrentPocketRef);this.imageDragDropCurrentEl=t;if(U.isOnButDoNotLog("paper_pocket_interstitial")){
var r=this.editor.selection.getPositionForNode(t),a=this.editor.getLineEntry(r.zone,r);a&&(this.imageDragDropCurrentPocket=(0,E.getLazyPocket)(this.editor,a,!0))
}else this.imageDragDropCurrentPocket=(0,E.getPocket)(t);var s=e.dataTransfer.items?e.dataTransfer.items.length:1
;this.imageDragDropCurrentPocketRef=this.imageDragDropCurrentPocket.put(D.createElement(g.DropHint,{count:s}),"drop-hint")}}}};e.prototype.getGalleryFromHTMLElement=function(e){
var t=this.editor.dom.getAceLineForNode(e),n=this.editor.selection.getPositionForNode(t);return this.editor.managers.getLineManager(n.zone,n.line,"gallery")}
;e.prototype.removeSelectedItems=function(){var e,t=this,n=this.getAllSelectedGalleryElements(),o=[];if(n.length>1)this.editor.execute("gallerykeypress",(function(){for(var e=0,i=n;e<i.length;e++){
var r=i[e],a=t.getGalleryFromHTMLElement(r);if(a){o=a.getGalleryData().items;a.removeGallery()}}}),{shouldIncorp:!1});else if(1==n.length){var i=n[0],r=this.getGalleryFromHTMLElement(i);if(r){
var a=r.getCurrentIndex(),s=r.getTypeByIndex(a),l=r.getPosition().zone;o.push(r.getItemForEl(i));r.removeItem(a);e=(0,b.getContextForZone)(l);(0,x.trackAce)("gallery-item-deleted",{galleryItemType:s,
zone:l,context:e})}}o.forEach((function(t){t&&(0,x.trackAce)("gallery-item-deleted",{galleryItemType:t.type,context:e})}))};e.prototype.getPositionOfCurrentlySelectedObject=function(){
var e=this.getSelectedGalleryElement(),t=this.editor.dom.getAceLineForNode(e);return this.editor.selection.getPositionForNode(t)};e.prototype.moveGalleryItemToNewGallery=function(e,t,n,o){
void 0===o&&(o=!0);var i=e.getItems()[t];if(i&&i.item){var r=n.withLine(n.line);this.insertMedia([i.item],r);e.removeItem(t,!0);if(o){n=n.withLine(n.line+1);this.editor.selection.set({
start:n.withCol(0),end:n.withCol(1)})}}return n};e.prototype.applyNewGalleryLayout=function(e,t){var n=this.editor.managers.getLineManager(t.zone,t.line,"gallery");if(n&&n.getCount()>1){
var o=n.getCurrentIndex();t=this.moveGalleryItemToNewGallery(n,o,t)}var i=Object.keys(v.GalleryLayoutAttribNames).map((function(t){return e[0]==t?e:[t,""]}))
;this.editor.contents.performDocumentApplyAttributesToRange(new M.Position(t.zone,t.line,0),new M.Position(t.zone,t.line,1),i)};e.prototype.floatImage=function(e,t){
var n=t||this.getPositionOfCurrentlySelectedObject();this.applyNewGalleryLayout(["float",e],n)};e.prototype.toggleFullWidth=function(e,t){var n,o=t||this.getPositionOfCurrentlySelectedObject()
;n=void 0!==e?e?"true":"":this.isImageFullWidth(o)?"":"true";this.applyNewGalleryLayout(["fullWidth",n],o)};e.prototype.toggleOverlay=function(e){var t,n=this.getPositionOfCurrentlySelectedObject()
;t=void 0!==e?e?"true":"":this.isImageOverlay(n)?"":"true";this.applyNewGalleryLayout(["overlay",t],n);(0,x.trackAce)("toolbar-click",{command:"img-overlay",enable:t})}
;e.prototype.replaceImage=function(){var e=document.querySelector(".web-image-upload");null==e||e.removeEventListener("change",this.handleImageChange)
;null==e||e.addEventListener("change",this.handleImageChange);null==e||e.click();this.editor.focus()};e.prototype.startCroppingGalleryImage=function(){var e=this.getSelectedGalleryElement();if(e){
var t=this.getGalleryFromHTMLElement(e);if(t){var n=t.getEmbedComponentByIndex(t.getCurrentIndex());if(n&&n.enterCroppingMode){n.enterCroppingMode()
;this.editor.observer.trigger("enter-embed-cropping-mode",void 0)}}}};e.prototype.isImageOverlay=function(e){var t=this.editor.getRep(e.zone).alines[e.line]
;return!!d.attribsAttributeValue(t,"overlay",this.editor.getApool())};e.prototype.isImageFullWidth=function(e){var t=this.editor.getRep(e.zone).alines[e.line]
;return!!d.attribsAttributeValue(t,"fullWidth",this.editor.getApool())};e.prototype.isImageNormalWidth=function(e){var t=this.editor.getRep(e.zone).alines[e.line]
;return!d.attribsAttributeValue(t,"fullWidth",this.editor.getApool())&&!d.attribsAttributeValue(t,"float",this.editor.getApool())&&!d.attribsAttributeValue(t,"overlay",this.editor.getApool())}
;e.prototype.isImageFloatLeft=function(e){var t=this.editor.getRep(e.zone).alines[e.line];return"left"==d.attribsAttributeValue(t,"float",this.editor.getApool())}
;e.prototype.isImageFloatRight=function(e){var t=this.editor.getRep(e.zone).alines[e.line];return"right"==d.attribsAttributeValue(t,"float",this.editor.getApool())};e.prototype.bindEvents=function(){
this.editor.observer.on("mousedown",this.onMouseDown);this.editor.observer.on("insert-files",this.handleInsertFiles);this.editor.observer.on("blur",this.onEditorBlur)
;this.editor.observer.on("dragover",this.onDragOver);this.editor.observer.on("dragleave",this.onDragLeave);this.editor.observer.on("drop",this.onDrop)};e.prototype.unbindEvents=function(){
this.editor.observer.off("mousedown",this.onMouseDown);this.editor.observer.off("insert-files",this.handleInsertFiles);this.editor.observer.off("blur",this.onEditorBlur)
;this.editor.observer.off("dragover",this.onDragOver);this.editor.observer.off("dragleave",this.onDragLeave);this.editor.observer.off("drop",this.onDrop)};e.prototype.getThreadIdsForItem=function(e){
var t=[],n=this.editor.selection.getPositionForNode(e),o=this.editor.managers.getLineManager(n.zone,n.line,"gallery");if(o){var i=o.getIndexForItem(e);t=Object.keys(o.getThreadIdsForItemIndex(i))}
return t=t.concat(this.editor.comments.getThreadIdsAtPoint(n))};e.prototype.getClientsideGalleryIdForGallery=function(e){
var t=e.getPosition().line,n=this.editor.getRep(M.Position.ROOT_ZONE).alines[t],o=d.opIterator(n);if(o.hasNext()){var i=o.next().getAttribute("clientside-galleryId",this.editor.getApool())
;if(i)return i}return null};return e}();t.default=X},1337:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.loadBlob=void 0;var o=n(12),i=n(80);t.loadBlob=function(e){
return new Promise((function(t,n){var r=(0,i.parseURISafe)(e);if(!r.bad&&"blob"==r.uri.getScheme())return new Promise((function(t,n){o.get({url:e,analyticsTag:"blob_url_loader",shardingKey:null,
processData:!1,successHandler:function(e,n){return t(n.blob())},errorHandler:function(e,t,o,i){n(i);return!0}})}));n(new Error("loadBlob can only be used with valid blob: urls"))}))}},
1338:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.dataURIToBlob=t.replaceImageUrls=t.ccDataToZatext=void 0;var o=n(6),i=n(531),r=n(22),a=n(64);t.ccDataToZatext=function(e){
var t=e.lines,n=e.lineAttribs,i=t.join("\n")+"\n",a=r.joinAttributionLinesAddingNewlines(n),s=r.makeZatext(i,a);if(e.additionalZatext){s.text=o.assignIn(s.text,e.additionalZatext.text)
;s.attribs=o.assignIn(s.attribs,e.additionalZatext.attribs);e.additionalZatext.rows&&(s.rows=e.additionalZatext.rows);e.additionalZatext.cols&&(s.cols=e.additionalZatext.cols)}return s}
;t.replaceImageUrls=function(e,t,n){var o=(0,a.docHand)(e,t),i=o.changesetFromEachOp((function(e,t){var o=t.getAttribute("gallery");if(o){var i=JSON.parse(o);i.items.forEach((function(e){
if(e.attachmentId&&e.attachmentId in n){e.url=n[e.attachmentId];delete e.attachmentId}}));e.keepOverOpWithNewAttributes(t,[["gallery",JSON.stringify(i)]])}else e.keepOverOp(t)}))
;return o.withAppliedChangeset(i,t).raw()};t.dataURIToBlob=function(e){var t;if(e.split(",")[0].indexOf("base64")>=0){var n=e.split(",")[1];t=i.atob(n)}else t=unescape(e.split(",")[1])
;for(var o=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return new Blob([r],{type:o})}},1339:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.item=t.hint=void 0;n(1340);t.hint="_hint_1anhu_1";t.item="_item_1anhu_6";t.default={hint:"_hint_1anhu_1",item:"_item_1anhu_6"}},134:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.renderReadonlyInDomNode=void 0
;var o=n(1),i=n(1105),r=n(1114),a=n(820),s=n(363),l=n(72),d=n(1402),c=n(1406),u=n(3),h=n(1409),p=n(141),f=n(30),g=n(8),m=n(2),v=n(1416),y=n(54),b=n(75),C=n(136),E=n(268),I=n(87),_=n(453),T=n(138),S=n(1449),k=n(50),x=n(365),w=n(28),P=n(14),A=n(1451),O=n(42),L=n(302),N=n(7),M=n(1452),R=n(164),D=n(20),F=n(0),z=n(36),U=n(840),H=n(31),B=n(1469),Z=n(4),j=n(4),W=n(119),V=n(1477),K=n(842),G=n(843),q=1,Y=(0,
P.MsgFactory)("ace"),X=Y.defineMessages,J=Y.IntlMessageFormat,Q=X({taskPlaceholder0:{msg:"Even superheroes have sidekicks @someone",description:"This the placeholder text for an empty task."},
taskPlaceholder1:{msg:"Stand up and stretch @someone",description:"This the placeholder text for an empty task."}}),$=((0,m.defineMessages)({taskPlaceholder0:{id:"fmAFU6",
defaultMessage:"Even superheroes have sidekicks @someone"},taskPlaceholder1:{id:"0prC/+",defaultMessage:"Stand up and stretch @someone"}}),function(e){o.__extends(t,e);function t(t){
var n=e.call(this,t)||this;n.ace=null;n.aceAttached=!1;n.poolToInitializeWith=null;n.initialIdMapToHighlight=null;n.acePrerender=null;n.currentlyPrerendering=!1;n.hotkeyEvents2=W.WindowKeyEvents
;n.isComponentMounted=!1;n.observer=null;n.state={editor:null,showPadTypeSelector:!1,openCalendarDropdown:!1,isOffline:!1};n.handleNetworkStatusChange=function(){
var e=n.props.stores.networkStatus.isOffline();n.setState({isOffline:e})};n.handleAddCommentHotkey=function(e){if(n.ace){n.ace.hasSelection()&&e.preventDefault()
;n.ace.commentsController.newCommentThreadForSelection()}};n.subscribeAddCommentHotkey=function(){n.hotkeyEvents2.off(b.EditingHotkeys.AddComment,n.handleAddCommentHotkey)
;n.aceAttached&&n.ace&&n.ace.contents.getEditableState()===y.EditableState.CommentOnly&&n.hotkeyEvents2.define(b.EditingHotkeys.AddComment,n.handleAddCommentHotkey)}
;n.contentTypeRegistry=t.contentTypeRegistry||(0,p.default)(t.type);return n}t.prototype.componentDidMount=function(){var e=this;this.isComponentMounted=!0;this.observer=new L.default
;if(!1===this.props.manuallyAttachAce){window.csi&&csi.tick("before-ace-mounted");Promise.resolve().then((function(){return e.isComponentMounted&&e.attachAce()})).catch(k.logException)
;window.csi&&csi.tick("after-ace-mounted")}this.props.keyPerfMonitor&&this.props.keyPerfMonitor.start((function(){var t=e.getAceRoot(),n={};t&&(n.nodeCount=(0,_.getNodeCount)(t));return n}))
;this.props.stores.networkStatus.addEventListener(this.handleNetworkStatusChange)};t.prototype.componentWillReceiveProps=function(e){
if(e.id!==this.props.id)throw new Error("Ace id must be kept constant. Core ace relies heavily on this id.")
;e.contentTypeRegistry?this.contentTypeRegistry=e.contentTypeRegistry:this.props.type!==e.type&&(this.contentTypeRegistry=(0,p.default)(e.type))
;H.default.isOnButDoNotLog("paper_draft_comments")&&e.isNew&&e.isNew!=this.props.isNew&&this.ace&&this.ace.contents&&this.ace.contents.importZatext(e.content.zatext,e.content.apool)}
;t.prototype.componentDidUpdate=function(e,t){this.props.editableState!=e.editableState&&this.ace&&this.ace.contents.setEditable(this.props.editableState)};t.prototype.componentWillUnmount=function(){
var e,t;null===(t=null===(e=this.ace)||void 0===e?void 0:e.observer)||void 0===t||t.off("editable-state-changed",this.subscribeAddCommentHotkey)
;this.hotkeyEvents2.off(b.EditingHotkeys.AddComment,this.handleAddCommentHotkey);this.acePrerender&&this.acePrerender.dispose();if(this.aceAttached&&this.ace){this.ace.dispose("unmount");this.ace=null
}this.props.keyPerfMonitor&&this.props.keyPerfMonitor.stop();this.props.stores.networkStatus.removeEventListener(this.handleNetworkStatusChange);this.contentTypeRegistry=null
;this.isComponentMounted=!1};t.prototype.prerender=function(e,t,n,o,i,r,l){var d=this;if(this.aceAttached)throw new Error("cannot pre-render if ace is already attached");this.poolToInitializeWith=t
;this.initialIdMapToHighlight=i;var c=this.props.type||"full"
;this.acePrerender=new a.AcePrerender(this.getAceRoot(),e,t,n,new s.AttachmentStore(this.props.padController),this.contentTypeRegistry,this.props.padId,E.GATED_FEATURES[c],this.getLineIdPrefix(),o,c,this.props.stores,this.props.disableHashtags)
;this.currentlyPrerendering=!0;this.acePrerender.doPrerender(r,(function(){Promise.resolve().then((function(){d.currentlyPrerendering=!1;var e=d.attachAce();l(e)})).catch(k.logException)}))}
;t.prototype.getAceHtmlContent=function(){return this.content?this.content.getHtml():null};t.prototype.hasAceAttached=function(){return this.aceAttached};t.prototype.getAceRoot=function(){
var e="#"+this.getID()+" .ace-editor.zoneId-0";return document.querySelector(e)};t.prototype.getID=function(){if(!this.aceID){this.aceID=this.props.id+"-"+q;q++}return this.aceID}
;t.prototype.getEditorSelector=function(){return"#"+this.getID()};t.prototype.getLineIdPrefix=function(){return this.getID().replace(/[^\w-]/g,"")};t.prototype.getPageType=function(){
return this.props.type};t.prototype.getPeopleDatasource=function(){return this.props.padController&&this.props.padController.getPadType()===N.PadType.onboarding?(0,v.default)():R.peopleDataSource}
;t.prototype.importContent=function(e){this.isComponentMounted&&this.ace&&e&&e.zatext&&e.apool&&this.ace.contents.importZatext(e.zatext,e.apool)};t.prototype.showPadTypeSelector=function(e){
void 0===e&&(e=!1);this.setState({showPadTypeSelector:!0,openCalendarDropdown:e})};t.prototype.maybeHidePadTypeSelector=function(){this.setState({showPadTypeSelector:!1})}
;t.prototype.isMentionTooltipEnabled=function(){var e=this.props.type;return("full"===e||"commententry"===e)&&!w.isMobile()};t.prototype.attachAce=function(){
if(this.aceAttached)throw new Error("AceUI cannot attachAce: ace is already attached!");if(this.currentlyPrerendering)throw new Error("AceUI cannot attachAce: currently pre-rendering!")
;this.aceAttached=!0;if(void 0===this.props.stores)throw Error("stores is a required prop");(0,j.trackEng)("attach editor",{editorType:this.props.type});var e={
autocompletePadId:this.props.autocompletePadId,editableState:this.props.editableState,editorSelector:this.getEditorSelector(),lineIdPrefix:this.getLineIdPrefix(),
readonlyObjectStore:this.props.readonlyObjectStore,observer:this.observer,padController:this.props.padController,pool:this.poolToInitializeWith,
placeholder:this.props.placeholder||this.props.placeholderWithZones,prerender:this.acePrerender,scrollSelector:this.props.scrollSelector,type:this.props.type,
commentsNotifyOnly:this.props.commentsNotifyOnly,enableCommentToolbar:this.props.enableCommentToolbar,showContextualToolbar:this.props.showContextualToolbar,minTopPadding:this.getMinTopPadding(),
padId:this.props.padId,padType:this.props.padType,skipBackspaceHandling:this.props.skipBackspaceHandling,stores:this.props.stores,initialIdMapToHighlight:this.initialIdMapToHighlight,
nativeLightboxAvailable:this.props.nativeLightboxAvailable,disableHashtags:this.props.disableHashtags,contentTypeRegistry:this.contentTypeRegistry,keyPerfMonitor:this.props.keyPerfMonitor,
usingResizeObserver:this.props.usingResizeObserver};this.ace=new r.AceEditor(e);this.toolbar&&this.toolbar.initialize(this.ace);this.notifPills&&this.notifPills.initialize(this.ace)
;this.mentionTooltip&&this.mentionTooltip.initialize(this.ace);this.padTypeSelector&&this.padTypeSelector.initialize(this.ace);this.carets&&this.carets.initialize(this.ace)
;this.props.addons&&this.ace.addons.registerAddons(this.props.addons)
;this.props.content?this.ace.contents.importZatext(this.props.content.zatext,this.props.content.apool):this.props.text?this.ace.contents.importText(this.props.text):this.props.placeholder&&this.ace.contents.importText("full"==this.props.type?"\n":"")
;if(this.acePrerender){this.acePrerender.dispose();this.acePrerender=null}if(this.ace.hasFeature("comments")){this.ace.observer.on("editable-state-changed",this.subscribeAddCommentHotkey)
;this.subscribeAddCommentHotkey()}this.setupTaskPlaceholders();this.setupDueDateDetection();this.setState({editor:this.ace});this.props.onAceCreated&&this.props.onAceCreated(this.ace);return this.ace}
;t.prototype.getMinTopPadding=function(){
return-1!=E.GATED_FEATURES[this.props.type].indexOf("viewport")?this.props.reducedMinTopPadding?parseInt(f.default.editor_min_top_padding_embedded,10):parseInt(f.default.editor_min_top_padding,10):null
};t.prototype.setupTaskPlaceholders=function(){if(!w.isNativeMobileApp()&&!w.isMobile())for(var e=0;e<O.numTaskPlaceholders;e++){
var t=".task-placeholder-"+e+".focused-line ul:before",n=new J(Q["taskPlaceholder"+e],g.default.userLocale).format();this.ace.dynamicCSS.selectorStyle(t).content=JSON.stringify(n)}}
;t.prototype.setupDueDateDetection=function(){var e=this;w.isNativeMobileApp()||w.isMobile()||this.ace&&this.ace.execute("highlightDueDateSuggestionsInTaskLine",(function(){
e.ace.getRep(D.Position.ROOT_ZONE).lines.forEach((function(t){t.domInfo.hasDatesToSuggest()&&e.ace.core.withoutRecordingMutations((function(){return e.ace.core.rerenderDomLine(D.Position.ROOT_ZONE,t)
}))}))}))};t.prototype.render=function(){var e,t,n=this,o=null,r=null,a=null;if(!1!==this.props.toolbar){r=this.state.editor?F.createElement(T.LazyRenderForServer,null,F.createElement(h.default,{
editor:this.state.editor})):null;o=F.createElement(B.default,{ref:function(e){return n.toolbar=e}});a=this.state.editor?F.createElement(T.LazyRenderForServer,null,F.createElement(S.default,{
editor:this.state.editor})):null}var s=this.props.showBottomInsertToolbar?F.createElement(d.default,{editor:this.state.editor,hideOnEditorLostFocus:!0
}):null,l=this.props.toc,p=this.props.notifPills?F.createElement(A.default,{ref:function(e){return n.notifPills=e}
}):null,f=Z.EditorContext.Editor[this.props.type],g=this.props.padTypeSelector?F.createElement(M.default,{padController:this.props.padController,ref:function(e){return n.padTypeSelector=e},
forceShow:this.state.showPadTypeSelector,forceOpen:this.state.openCalendarDropdown,stores:this.props.stores}):null,m=E.GATED_FEATURES[this.props.type].map((function(e){return"ace-feature-".concat(e)
})),v=u("ace-type-".concat(this.props.type),m,this.props.className,{"ace-feature-due-dates":this.props.dueDates,"ace-feature-bottom-insert-toolbar":!!s
}),y=!!this.props.className&&this.props.className.indexOf("comment-private-toggled")>=0,b=E.GATED_FEATURES[this.props.type].indexOf("carets")&&F.createElement(c.default,{ref:function(e){
return n.carets=e}}),I=H.default.isOnButDoNotLog("paper_a11y_editor_keyboard_trap"),_=null
;(null===(e=this.props.padController)||void 0===e?void 0:e.isCloudDoc())&&(_=F.createElement(V.FileMoverPopup,{padController:this.props.padController,isOffline:this.state.isOffline}))
;var k=null,w=null,P=null;if(null===(t=this.props.padController)||void 0===t?void 0:t.isCloudDoc()){var O=H.default.isOnButDoNotLog("paper_file_chooser_allow_folders")
;k=F.createElement(K.FileChooserPopup,{folderSelect:O});w=F.createElement(K.FileChooserPopup,{multiSelect:!1,extensions:[".binder"],altPanelId:"binderchooser"})
;P=F.createElement(G.PaperMoveIntoBinderModal,{padController:this.props.padController})}return F.createElement(C.EditorErrorBoundary,null,F.createElement(Z.TrackContext,{trackContext:f
},F.createElement(x.default,{ref:function(e){return n.mentionTooltip=e},enabled:this.isMentionTooltipEnabled(),onClick:this.props.onMentionTooltipClick,peopleDataSource:this.getPeopleDatasource(),
scrollSelector:this.props.scrollSelector,padController:this.props.padController,isOffline:this.state.isOffline,isPrivate:y},F.createElement("div",{
className:-1!=E.GATED_FEATURES[this.props.type].indexOf("viewport")?"editor-viewport-outer":""},F.createElement("div",{className:"email-initiated-onboarding-expt-portal-hook"}),F.createElement("div",{
className:-1!=E.GATED_FEATURES[this.props.type].indexOf("viewport")?"editor-viewport":""},I&&F.createElement("div",{className:"non-editor"},g),F.createElement(i.default,{id:this.getID(),className:v,
ref:function(e){return n.content=e},editor:this.state.editor,contentTypeRegistry:this.contentTypeRegistry,serverRenderInfo:this.props.serverRenderInfo,"aria-label":this.props["aria-label"],
role:this.props.role,"aria-multiline":this.props["aria-multiline"]},I?null:g,l,F.createElement(U.ScrollMarksContainer,{editor:this.state.editor}),p,o,r,a,s,b,_,k,w,P))))))};t.defaultProps={
manuallyAttachAce:!1};t.displayName="AceUI";return t}(F.Component));t.default=$;t.renderReadonlyInDomNode=function(e,t,n,i,r,a){var s,d=(0,I.getInitialAppContext)(),c={};a&&(c.serverRenderInfo=a)
;r&&(c.onAceCreated=r);z.reactDomRender(F.createElement($,o.__assign({},c,{id:"editor",ref:function(e){return s=e},className:"hp-editor",content:t,type:"static",
editableState:void 0===i?y.EditableState.CommentOnly:i,toolbar:!1,padId:n,stores:d.stores,manuallyAttachAce:!0,contentTypeRegistry:(0,p.default)("static")})),document.querySelector(e));if(a){
var u=new l.default;u.fromJsonable(t.apool);s.prerender(t.zatext,u,a,null,null,(function(){}),(function(e){}))}else s.attachAce()}},1340:function(e,t,n){},1341:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.UnfurlDataCache=void 0;var o=n(12),i=n(44),r=n(1342),a=function(){function e(){this.cache={}
;this.rateLimitedFetch=new r.TokenBucketRateLimitedFetch(i.realSetTimeout,1e3,20,0)}e.prototype.tryUnfurl=function(e){var t=this;this.cache[e]||(this.cache[e]=new Promise((function(n,i){
t.rateLimitedFetch.get({url:"/integrations/embed/unfurl",data:{url:e},analyticsTag:"load-unfurl-embed",shardingKey:o.getStatelessShardingKey(),successHandler:function(e){var t=e.success,o=e.metadata
;t?n(o):i(!1)},errorHandler:function(){i.apply(null,arguments);return!1}})})));return this.cache[e]};return e}();t.UnfurlDataCache=a},1342:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});t.SemaphoreRateLimitedFetch=t.TokenBucketRateLimitedFetch=void 0;var o=n(12),i=n(586),r=function(){function e(e,t,n,o){var r=this;this.queue=[];this.dequeueCall=function(){
if(r.queue.length>0){r.queue.shift()();r.scheduleNextFetch()}};this.tokenBucket=new i.default(e,this.dequeueCall,t,n,o)}e.prototype.queueCall=function(e){var t=this;return new Promise((function(n,o){
t.queue.push((function(){n(e())}));t.scheduleNextFetch()}))};e.prototype.scheduleNextFetch=function(){this.tokenBucket.handleCall(this,[])};e.prototype.get=function(e){
return this.queueCall((function(){return o.get(e)}))};e.prototype.post=function(e){return this.queueCall((function(){return o.post(e)}))};e.prototype.del=function(e){return this.queueCall((function(){
return o.del(e)}))};return e}();t.TokenBucketRateLimitedFetch=r;var a=function(){function e(e){}e.prototype.get=function(e){throw new Error("not yet implemented")};e.prototype.post=function(e){
throw new Error("not yet implemented")};e.prototype.del=function(e){throw new Error("not yet implemented")};return e}();t.SemaphoreRateLimitedFetch=a},1343:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(532),i=n(1344),r=n(162),a=n(446),s=n(1345),l=n(430),d=n(18),c=n(0),u=n(24),h=n(259),p=null,f=null;function g(e){p=e}var m=function(e,t,n){
var m=this;this.hasResults=!1;this.lastAutocompleteType=null;this.mentionUndoer=null;this.spring=null;this.isVisible=function(){return!1};this.createRef=function(e){m.autocompleteRef=e}
;this.aceAutocompleteCallback=function(e,t,n){var l="space"!==t&&"cancel"!==t;if(n&&e){var f=e.replace(" "," ");if("@"===f[0]&&" "===f[1])m.reset();else if("@"===f[0]){m.hasResults=!0
;m.isVisible=function(){return!0};m.lastAutocompleteType=o.AC_TYPE.AT;var g=m.editor.dom.getRoot(),v=(0,d.offset)(g),y=(0,r.getMenuPosition)(n,v)
;m.autocompleteRoot.style.setProperty("left","".concat(y.x,"px"));m.autocompleteRoot.style.setProperty("top","".concat(y.y,"px"));m.autocompleteRoot.classList.add("ace-autocomplete-container")
;m.spring||(m.spring=new h.SimpleSpring("autocomplete",m.autocompleteRoot));m.spring.show({immediate:!1,isReverse:!1});var b=(0,a.getPromptMessage)(m.editor).msg;u.render(c.createElement(i.default,{
ref:m.createRef},(function(e){e.getMenuProps,e.getItemProps,e.isOpen;var t=e.inputValue;return m.editor&&p?c.createElement(s.default,{editor:m.editor,mentionUndoer:m.mentionUndoer,query:t.substr(1),
reset:m.reset,autocompleteRoot:m.autocompleteRoot,padController:p,specialTargetsEnabled:m.isSpecialTargetsEnabled,menuTitle:b||null}):null})),m.autocompleteRoot);m.autocompleteRef.keyHandlers({
type:t||"key",payload:{inputValue:f}})}}else m.lastAutocompleteType&&m.reset();return l};this.reset=function(){u.unmountComponentAtNode(m.autocompleteRoot)
;m.autocompleteRoot.classList.remove("ace-autocomplete-container");m.isVisible=function(){return!1};m.hasResults=!1;m.lastAutocompleteType=null;m.spring&&m.spring.hide({callback:function(){
m.autocompleteRoot&&m.autocompleteRoot.classList.remove("ace-autocomplete-container")}})};this.dispose=function(){if(m.autocompleteRoot){document.body.removeChild(m.autocompleteRoot)
;m.autocompleteRoot=null;m.autocompleteRef=null}if(f===m){g(null);f=null}};this.mentionUndoer=new l.default(e,t);if(n){f=this;g(n)}this.autocompleteRoot=document.getElementById("autocompleteRoot")
;if(!this.autocompleteRoot){this.autocompleteRoot=document.createElement("div");this.autocompleteRoot.setAttribute("id","autocompleteRoot");document.body.appendChild(this.autocompleteRoot)}
this.editor=e;this.isSpecialTargetsEnabled=(0,r.isSpecialTargetsEnabled)(this.editor);this.editor.autolink.setAutocompleteV2Callback(this.aceAutocompleteCallback)};t.default=m},1344:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(162),r=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.initialState={highlightedIndex:-1,
inputValue:"",isOpen:!1};t.items=[];t.menuId="autocomplete-menu";t.state={highlightedIndex:t.props.initialHighlightedIndex,inputValue:t.props.initialInputValue,isOpen:t.props.initialIsOpen}
;t.internalSetState=function(e,n){var o={};t.setState((function(n){o=t.props.stateReducer(n,e);return Object.keys(o).length?o:null}),(function(){
"function"==typeof t.props.onChange&&t.props.onChange(o);return n&&n()}))};t.getState=function(e){var n=e.type,r=e.payload,a=void 0===r?t.initialState:r;switch(n){case"cancel":case"escape":default:
return t.initialState;case"click":return o.__assign(o.__assign({},t.initialState),{item:t.getItem(a.highlightedIndex)});case"enter":case"tab":return o.__assign(o.__assign({},t.initialState),{
item:t.getItem(t.state.highlightedIndex)});case"down":return{highlightedIndex:(0,i.getNextWrappingIndex)({baseIndex:t.state.highlightedIndex,moveAmount:1,itemCount:t.itemCount})};case"key":return{
inputValue:a.inputValue};case"mouseEnter":return{highlightedIndex:a.highlightedIndex};case"mouseLeave":return{highlightedIndex:-1};case"up":return{highlightedIndex:(0,i.getNextWrappingIndex)({
baseIndex:t.state.highlightedIndex,moveAmount:-1,itemCount:t.itemCount})}}};t.keyHandlers=function(e){var n=e.type,o=e.payload,i=t.getState({type:n,payload:o});t.internalSetState(i)}
;t.getItemProps=function(e){var n=e.index;return{"aria-selected":n===t.state.highlightedIndex,isSelected:n===t.state.highlightedIndex,onClick:function(){return t.keyHandlers({type:"click",payload:{
highlightedIndex:n}})},onMouseEnter:function(){return t.keyHandlers({type:"mouseEnter",payload:{highlightedIndex:n}})},onMouseLeave:function(){return t.keyHandlers({type:"mouseLeave"})},role:"option"}
};t.getMenuProps=function(e){return{"aria-expanded":!0,"aria-label":e.title,id:t.menuId,ref:t.setMenuRef,role:"listbox"}};t.setMenuRef=function(e){t.menuNode=e};t.clearItems=function(){t.items=[]}
;t.getItem=function(e){var n=t.items[e];if(null!=n)return n};t.setItems=function(e){var n=e.item,o=e.index;if(void 0===o){t.items.push(n);o=t.items.indexOf(n)}else t.items[o]=n;return o}
;t.getStateAndHelpers=function(){return{getItemProps:function(e){var n=e.item,o=e.index;o=t.setItems({item:n,index:o});return t.getItemProps({index:o})},getMenuProps:t.getMenuProps,
highlightedIndex:t.state.highlightedIndex,inputValue:t.state.inputValue,isOpen:t.state.isOpen}};return t}t.prototype.componentDidUpdate=function(e,t){
if(this.shouldScroll(t))return this.scrollHighlightedItemIntoView()};t.prototype.scrollHighlightedItemIntoView=function(){
return this.menuNode&&this.menuNode.children[this.state.highlightedIndex]&&this.menuNode.children[this.state.highlightedIndex].scrollIntoView(!1)};t.prototype.shouldScroll=function(e){
var t=this.state.highlightedIndex,n=e.highlightedIndex;return t&&this.state.isOpen&&!e.isOpen||t!==n};Object.defineProperty(t.prototype,"itemCount",{get:function(){return this.items.length},
enumerable:!1,configurable:!0});t.prototype.render=function(){this.clearItems();return this.props.children&&this.props.children(this.getStateAndHelpers())};t.defaultProps={initialHighlightedIndex:-1,
initialInputValue:"",initialIsOpen:!1,stateReducer:function(e,t){return t}};t.displayName="Autocomplete";return t}(n(0).Component);t.default=r},1345:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(1346),r=n(446),a=n(1347),s=n(0),l=n(1348),d=n(35),c=n(516),u=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.state={loading:!1,data:{peopleDataStore:[],specialTargetDataStore:[]}};n.renderGenericRow=function(e,t){return s.createElement(c.Typeahead.Row,{key:"autocomplete-row-".concat(t.key),
onClick:function(){return t.onClick(e)},value:t.title,withLeftAccessory:t.leftAccessory,withSubtitle:t.subtitle,withTitle:t.title})};n.peopleDataStore=new a.PeopleDataStore({editor:t.editor,
padController:t.padController,mentionUndoer:t.mentionUndoer});n.specialTargetDataStore=new l.SpecialTargetDataStore({editor:t.editor,padController:t.padController});return n}
t.prototype.componentDidMount=function(){this.props.padController.getPadId()&&this.loadData(this.props.query)};t.prototype.componentDidUpdate=function(e){
e.query!==this.props.query&&this.props.padController.getPadId()&&this.loadData(this.props.query)};t.prototype.componentWillUnmount=function(){this.diposeData()};t.prototype.diposeData=function(){
this.peopleDataStoreCancelable&&this.peopleDataStoreCancelable.cancel&&this.peopleDataStoreCancelable.cancel()
;this.specialTargetDataStoreCancelable&&this.specialTargetDataStoreCancelable.cancel&&this.specialTargetDataStoreCancelable.cancel()};t.prototype.loadData=function(e){var t=this;this.setState({data:{
specialTargetDataStore:[],peopleDataStore:[]},loading:!0});this.peopleDataStoreCancelable=this.peopleDataStore.load(e,(function(e){t.setState({loading:!1,data:o.__assign(o.__assign({},t.state.data),{
peopleDataStore:e})})}));this.specialTargetDataStoreCancelable=this.specialTargetDataStore.load(e,(function(e){t.setState({loading:!1,data:o.__assign(o.__assign({},t.state.data),{
specialTargetDataStore:e})})}))};t.prototype.render=function(){var e=this;return s.createElement(c.Typeahead.Wrapper,null,(function(t){t.getContentProps,t.openMenu
;return s.createElement(c.Typeahead.Container,{loading:e.state.loading,triggerRef:{current:e.props.autocompleteRoot},open:!0,isEmptyQuery:0===e.state.data.peopleDataStore.length,
emptyPrompt:s.createElement("div",{className:"autocomplete-mention__emptyState"},s.createElement(d.Text,{color:"faint"},s.createElement(i.default,{message:r.messages.noMatchContactCopy.msg})))
},s.createElement("div",{className:"autocomplete-mention__label"},s.createElement(d.Text,{size:"small",color:"faint"},s.createElement(i.default,{message:e.props.menuTitle||""
}))),s.createElement(c.Typeahead.Results,{results:e.state.data.specialTargetDataStore,initialResults:30,maxResults:30,renderRow:function(t){
return e.renderGenericRow(t,e.specialTargetDataStore.renderRowProps(t))}}),s.createElement(c.Typeahead.Results,{results:e.state.data.peopleDataStore,initialResults:30,maxResults:30,
renderRow:function(t){return e.renderGenericRow(t,e.peopleDataStore.renderRowProps(t))}}))}))};t.displayName="MentionAutocomplete";return t}(s.Component);t.default=u},1346:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=n(2),r=n(0);t.default=function(e){var t=e.message;return r.createElement(i.IntlProvider,{locale:o.default.userLocale
},r.createElement("span",{className:"placeholder people-placeholder notranslate"},t))}},1347:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.PeopleDataStore=void 0
;var o=n(1),i=n(805),r=n(91),a=n(4),s=n(12),l=n(294),d=n(162),c=n(51),u=n(806),h=n(7),p=n(224),f=n(0),g=n(162),m=n(27),v=function(e){o.__extends(t,e);function t(t){
var n=t.editor,i=t.padController,c=t.mentionUndoer,v=e.call(this,{editor:n,padController:i})||this;v.loadData=function(e){return(0,l.fetchPeopleData)({isMention:!0,max:20,
padId:v.padController.getPadId(),word:e}).then((function(t){if(t&&t.success&&t.data&&t.data.length>0){var n=(0,g.scoreAndSortContactMatches)(t.data,e,!1);return(0,
u.normalizePeopleDataForUI)(n,v.padController)}return[]}))};v.renderRowProps=function(e){return{key:e.key,leftAccessory:f.createElement(r.Avatar,{src:e.item.userPic,hasNoOutline:!0}),title:e.title,
subtitle:e.subtitle,onClick:v.onClick}};v.onClick=function(e){console.log(e);"email"===e.item.type?v.completeEmailQuery(e.item):"user"===e.item.type&&v.completeUserQuery(e.item)}
;v.completeUserQuery=function(e){var t,n=null===(t=v.padController.peopleList)||void 0===t?void 0:t.isUserWithEmailInDoc(e.email),o={emailHash:e.emailHash,givenName:e.givenName,link:e.link,
name:e.name,surname:e.surname,type:e.type},i=v.padController.getPadId(),r=v.padController.getPadType()==h.PadType.space;(0,d.isTimelineItemTitle)(v.editor)?(0,
d.getTimelineAttributesAndReplaceRange)(v.editor,o).then((function(){v.trackUserMention(e)
;!n&&v.mentionUndoer&&v.mentionUndoer.showUndoMentionToast(o.name?o.name:e.email,o.link,e.email,i,r,p.MentionToastType.TimelineAssignment)})):(0,
d.getMentionAttributesAndReplaceRange)(v.editor,o).then((function(){var t;v.trackUserMention(e);if(!n){var a=(0,d.getMentionParentType)(v.editor),s=(0,d.getDisplayName)(o)
;null===(t=v.mentionUndoer)||void 0===t||t.showUndoMentionToast(s,o.link,e.email,i,r,a)}}))};v.completeEmailQuery=function(e){
var t=v,n=t.padController,i=t.mentionUndoer,r=t.editor,l=null==n?void 0:n.getPadId(),c=(0,m.trim)(e.name);s.post({url:"/ep/pad/invite/emailmention",analyticsTag:"mention-email",
shardingKey:s.getShardingKeyForPad(l),data:{email:e.email,name:c,padId:l},successHandler:function(t){var s;(0,a.track)("mention-user-by-email",e)
;var l=null==n?void 0:n.getPadId(),c=n&&(null===(s=null==n?void 0:n.peopleList)||void 0===s?void 0:s.isUserWithEmailInDoc(e.email)),u=o.__assign(o.__assign(o.__assign({},e),{link:t.mentionUrl
}),t),f=(null==n?void 0:n.getPadType())==h.PadType.space;if((0,d.isTimelineItemTitle)(r))(0,d.getTimelineAttributesAndReplaceRange)(r,u).then((function(){
c||null==i||i.showUndoMentionToast(e.name?e.name:e.email,u.link,e.email,l,f,p.MentionToastType.TimelineAssignment)}));else{var g=(0,d.getMentionParentType)(r),m=(0,d.getDisplayName)(u);(0,
d.getMentionAttributesAndReplaceRange)(r,u).then((function(){c||null==i||i.showUndoMentionToast(m,u.link,e.email,l,f,g)}))}},errorHandler:function(e,t,n){return 403==n}})};v.mentionUndoer=c;return v}
t.prototype.trackUserMention=function(e){if(this.editor){var t=this.editor.selection.getStart(),n=(0,c.isCellId)(t.zone)?a.EditorContext.Table.Cell:a.EditorContext.Editor[this.editor.editorType]
;a.IntentionEvent.MentionUser.track(o.__assign({context:n,padType:this.padController?this.padController.getPadType():"undefined",isOnTaskLine:0==this.editor.contents.getLineType(t).indexOf("task")
},e))}};return t}(i.AutocompleteDataStore);t.PeopleDataStore=v},1348:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SpecialTargetDataStore=void 0
;var o=n(1),i=n(805),r=n(91),a=n(294),s=n(58),l=n(806),d=n(0),c=n(162),u=n(742),h=n(27),p=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.loadData=function(e){return(0,a.fetchSpecialTargetData)({padId:t.padController.getPadId()}).then((function(t){var n=[];if(t&&t.success&&t.data&&t.data.length>0){var o=t.data.filter((function(t){
return t.autocompleteText.indexOf(e)>=0}));n=(0,l.normalizeSpecialTargetDataForUI)(o)}return n}))};t.renderRowProps=function(e){return{key:e.key,
leftAccessory:d.createElement(r.Facepile,null,e.item.avatarUsers.map((function(e){return d.createElement(r.Facepile.Item,{src:null==e?void 0:e.userPic},e.name)}))),title:e.title,subtitle:e.subtitle,
onClick:t.onClick}};t.onClick=function(e){var n=(0,h.trim)(e.item.specialTargetName),o=t.padController?t.padController.invitedUserInfos.length-1:0;(0,u.showAtDocWarningIfNeeded)({userCount:o,
target:e.item.specialTargetName}).then((function(){(0,c.safeAceReplaceRange)("*",s.getMentionAttributesForSpecialTarget(n),t.editor)}))};return t}return t}(i.AutocompleteDataStore)
;t.SpecialTargetDataStore=p},1349:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.newRandomThreadId=t.newRandomCommentId=void 0;var o=n(38);t.newRandomCommentId=function(){
return o.getStandardLengthRandomId()};t.newRandomThreadId=function(){return o.getStandardLengthRandomId()}},1350:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.createCommentAttrSyncer=void 0;var o=n(6),i=n(245),r=n(22),a=n(587),s=n(8),l=n(4),d=n(20);t.createCommentAttrSyncer=function(e){return new c(e)};var c=function(){function e(e){this.editor=e}
e.prototype.markThreadAsDeleted=function(e){var t=(0,a.changesetSetThreadValue)(this.editor,"thread-"+e,s.default.secureUserId,""),n=(0,
a.changesetSetThreadValue)(this.editor,"thread-"+e,s.default.secureUserId,"false"),o=(0,a.changesetSetThreadValue)(this.editor,"thread-"+e,"true","false")
;this.editor.comments.getThread(e).isPrivate?this.editor.comments.applyCommentsChangeset(n):this.editor.comments.applyCommentsChangeset(r.compose(t,o,this.editor.getApool()))}
;e.prototype.markAnnotationAsDeleted=function(e,t){this.editor.comments.applyCommentsChangeset(this.changesetToDetachAnnotations(t))};e.prototype.markThreadAsPublished=function(e,t,n){
var o=t?"false":s.default.secureUserId,i=this.editor.comments.getThread(e);n||i.isPrivate?this.editor.comments.applyCommentsChangeset((0,
a.changesetSetThreadValue)(this.editor,"thread-"+e,o,s.default.secureUserId)):this.editor.comments.applyCommentsChangeset((0,a.changesetSetThreadValue)(this.editor,"thread-"+e,o,"true"))}
;e.prototype.markAnnotationAsPublished=function(e,t,n){var o=n?"hidden":s.default.secureUserId;this.editor.comments.applyCommentsChangeset((0,
a.changesetSetAnnotationEnabledValue)(this.editor,t,o,"true"))};e.prototype.addDraftThread=function(e,t,n){var a,s;if(void 0!==n.opt_posLine){
var c=void 0===n.opt_zone?d.Position.ROOT_ZONE:n.opt_zone,u=this.editor.getRep(c),h=u.lines.atIndex(n.opt_posLine).lineMarker;a=new d.Position(c,n.opt_posLine,h)
;s=n.opt_posLine<u.lines.length()-1?new d.Position(c,n.opt_posLine+1,0):d.Position.endOfLine(this.editor,a)}else if(this.editor.hasSelection()){a=this.editor.selection.getStart()
;s=this.editor.selection.getEnd()}if(a&&s){var p=function(e,t,n,a,s,d){if(0!=a.indexOf("thread-"))throw new Error("invalid threadid");if(!t||!n)return r.identity()
;var c=e.getRep(t.zone).lines.atIndex(t.line),u=e.getRep(n.zone).lines.atIndex(n.line),h=null
;"gallery"==c.domInfo.lineManagerType&&(t.line==n.line||n.line==t.line+1&&n.col<=u.lineMarker)&&(h=e.managers.getLineManager(t.zone,t.line,"gallery"));if(h){
var p=o.isNumber(d)?d:h.getCurrentIndex(),f=JSON.parse(e.contents.getAttributeValueForPoint(h.getPosition(),"gallery"));f.items[p][a]=s;l.IntentionEvent.CreateThreadOnGallery.track({
embedType:f.items[p].type});return(0,i.buildApplyAttributesToRange)(e.getReps(),e.getApool(),h.getPosition(),h.getPosition().withCol(1),[["gallery",JSON.stringify(f)]])}return(0,
i.buildApplyAttributesToRange)(e.getReps(),e.getApool(),t,n,[[a,s]])}(this.editor,a,s,"thread-"+e,t,n.opt_galleryIndex);this.editor.comments.applyCommentsChangeset(p)}}
;e.prototype.changesetToDetachAnnotations=function(e){return r.compose((0,a.changesetSetAnnotationEnabledValue)(this.editor,e,"true","hidden"),(0,
a.changesetSetAnnotationEnabledValue)(this.editor,e,s.default.secureUserId,"false"),this.editor.getApool())};return e}()},1351:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(1352),r=n(1353),a=n(1354),s=n(1355),l=n(22),d=n(54),c=n(20),u=n(226),h=n(192),p=n(355),f=n(64),g=n(4),m=n(810),v=n(17),y=function(){function e(e,t,n){this.editor=e;this.editableState=n
;this.apool=e.getApool();this.reps=e.getReps();this.attributes=new i.default(e,t);this.importExport=new r.default(e);this.read=new a.default(e);this.write=new s.default(e,t)
;this.undoModule=new m.default(this.apool)}e.prototype.getTextInRange=function(e,t){return this.read.getTextInRange(e,t)};e.prototype.eachLineInRange=function(e,t,n,o){
this.read.eachLineInRange(e,t,n,o)};e.prototype.undo=function(){this.undoRedo("undo")};e.prototype.canPerformUndo=function(){return this.undoModule.canPerformUndo()};e.prototype.redo=function(){
this.undoRedo("redo")};e.prototype.canPerformRedo=function(){return this.undoModule.canPerformRedo()};e.prototype.getLineType=function(e){var t=this.editor.getRep(e.zone).alines[e.line];if(t){
var n=l.opIterator(t);if(n.hasNext())return l.opAttributeValue(n.next(),"list",this.editor.getApool())||""}return""};e.prototype.setLineType=function(e,t,n){this.editor.lists.setLineListType(e,t,n)}
;e.prototype.performDocumentApplyChangeset=function(e,t,n){void 0===n&&(n=d.EditableState.Editable);this.write.performDocumentApplyChangeset(e,t,n,!0)};e.prototype.replaceRange=function(e,t,n,o,i,r){
this.write.replaceRange(e,t,n,o,i,r)};e.prototype.performAttributePreservingDocumentReplaceRange=function(e,t,n,o,i,r){this.write.performAttributePreservingDocumentReplaceRange(e,t,n,o,i,r)}
;e.prototype.performDocumentReplaceRange=function(e,t,n,o,i,r){this.write.performDocumentReplaceRange(e,t,n,o,i,r)};e.prototype.performDocumentReplaceSelection=function(e,t){
this.write.performDocumentReplaceSelection(e,t)};e.prototype.performDocumentReplaceCharRange=function(e,t,n,o){this.write.performDocumentReplaceCharRange(e,t,n,o)}
;e.prototype.replaceVectorRange=function(e,t,n,o,i){this.write.replaceVectorRange(e,t,n,o,i)};e.prototype.performDocumentReplaceVectorRange=function(e,t,n,o,i){
this.write.performDocumentReplaceVectorRange(e,t,n,o,i)};e.prototype.replaceZoneIds=function(e,t,n){this.write.replaceZoneIds(e,t,n)};e.prototype.performDocumentDeleteLine=function(e,t){
this.write.performDocumentDeleteLine(e,t)};e.prototype.getEditableState=function(){return this.editableState.getEditableState()};e.prototype.getIsEditable=function(){
return this.editableState.getIsEditable()};e.prototype.getIsCommentable=function(){return this.editableState.getIsCommentable()};e.prototype.getIsCommentOnly=function(){
return this.editableState.getIsCommentOnly()};e.prototype.hasMinimumEditableState=function(e){return this.editableState.hasMinimumEditableState(e)};e.prototype.hasEmptyContent=function(){
return-1!==["","\n"].indexOf(this.getTextInRange(new c.Position(c.Position.ROOT_ZONE,1,0),c.Position.endOfZone(this.editor,c.Position.ROOT_ZONE)))};e.prototype.isBlankDoc=function(){
return!this.getTitle()&&this.hasEmptyContent()};e.prototype.setEditable=function(e){return this.editableState.setEditable(e)};e.prototype.getTitle=function(){
var e=this.reps[c.Position.ROOT_ZONE],t=e.lines;if(t.length()<1)return"";var n=t.atIndex(0).text;return(0,h.default)(n,e.alines[0],this.apool)}
;e.prototype.performDocumentApplyAttributesToRange=function(e,t,n,o){this.attributes.performDocumentApplyAttributesToRange(e,t,n,o)};e.prototype.getNativeToolbarAttributesForSelection=function(){
if(this.editor.selection.isCollapsed())return this.attributes.getNativeToolbarTextAttributesForSelectionWithCaret();var e=this.editor.media.getSelectedGalleryOrNull();if(null==e){
var t=this.attributes.getNativeToolbarTextAttributesForSelectionWithRange();return Object.keys(t)}return this.attributes.getGalleryAttributesForCurrentItem(e)}
;e.prototype.getNativeToolbarAttributesForLine=function(){return this.attributes.getNativeToolbarAttributesForLine()};e.prototype.getTaskAttributesForLine=function(){
return this.attributes.getTaskAttributesForLine()};e.prototype.getGalleryAttributesForCurrentItem=function(e){return this.attributes.getGalleryAttributesForCurrentItem(e)}
;e.prototype.getFormattedAttributesForSelection=function(){return this.attributes.getNativeToolbarTextAttributesForSelectionWithRange()};e.prototype.setAttributeOnSelection=function(e,t){
this.attributes.setAttributeOnSelection(e,t)};e.prototype.setImageSelectionAttribute=function(e){var t=this.editor.selection;if(t.hasSelection){var n=t.getStart().line,o=t.getZone()
;this.editor.managers.getLineManager(o,n,"gallery")&&this.attributes.setImageSelectionAttribute(e)}};e.prototype.getAttributesForPoint=function(e){return this.attributes.getAttributesForPoint(e)}
;e.prototype.getAttributeValueForPoint=function(e,t){return this.attributes.getAttributeValueForPoint(e,t)};e.prototype.getAttributesForLine=function(e){return this.attributes.getAttributesForLine(e)}
;e.prototype.getUniqueAttributeValuesInRange=function(e,t,n){return this.attributes.getUniqueAttributeValuesInRange(e,t,n)};e.prototype.getRangeOfAttribute=function(e,t,n,o){
return this.attributes.getRangeOfAttribute(e,t,n,o)};e.prototype.getHeadOfAttribute=function(e,t,n,o){return this.attributes.getHeadOfAttribute(e,t,n,o)}
;e.prototype.getEndOfAttribute=function(e,t,n,o){return this.attributes.getEndOfAttribute(e,t,n,o)};e.prototype.removeFormatOnSelection=function(){this.attributes.removeFormatOnSelection()}
;e.prototype.toggleAttributeOnSelection=function(e,t){this.attributes.toggleAttributeOnSelection(e,t)};e.prototype.validateAttribs=function(e){this.attributes.validateAttribs(e)}
;e.prototype.importText=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!1);this.importExport.importText(e,t,n)};e.prototype.importZatext=function(e,t,n){void 0===n&&(n=!1)
;this.importExport.importZatext(e,t,n)};e.prototype.setDocZatext=function(e){this.importExport.setDocZatext(e)};e.prototype.importZatextForZone=function(e,t,n,o){
this.importExport.importZatextForZone(e,t,n,o)};e.prototype.exportZatextAndPool=function(){return this.importExport.exportZatextAndPool()};e.prototype.exportHand=function(){
return this.importExport.exportHand()};e.prototype.exportZatext=function(){return this.importExport.exportZatext()};e.prototype.internalZatext=function(){return this.importExport.internalZatext()}
;e.prototype.internalSubmitUndoEvent=function(e){var t=this;if(this.editor.hasSelection()){
var n=this.editor.selection.get(),o=n.start,i=n.end,r=n.zone,a=n.isReversed,s=this.editor.getRep(r),l=s.lines.offsetOfIndex(o.line)+o.col,d=s.lines.offsetOfIndex(i.line)+i.col;e.selZone=r;e.selStart=l
;e.selEnd=d;e.selIsReversed=a}v.default.error.loggingTryCatch((function(){var n=!1;if("setup"==e.eventType||"importText"==e.eventType||"setBaseText"==e.eventType){t.undoModule.clearHistory();n=!0
}else if("nonundoable"==e.eventType||"idleWorkTimer"==e.eventType)e.changeset&&t.undoModule.reportExternalChange(e.changeset);else{t.undoModule.reportEvent(e);n=!0}n&&t.triggerUndoRedoEvent()}))}
;e.prototype.forEachOpInRange=function(e,t){var n;if(e.start.zone!==(null===(n=e.end)||void 0===n?void 0:n.zone))throw new RangeError("Range cannot have start/end positions across different zones")
;var i=e.start.zone,r=this.editor.getApool(),a=this.editor.getRep(i),s=a.lines.atIndex(e.start.line),d=!1,u=function(){return d=!0};e:for(var h=e.start.line;h<=e.end.line;h++){
for(var p=s.domInfo,g=p.text,m=p.aline,v=l.opIterator(m),y=0;v.hasNext();){var b=v.next(),C=new c.Position(i,h,y),E=new c.Position(i,h,y+b.chars)
;if(c.Position.greaterOrEqual(e.start,E))y+=b.chars;else{if(c.Position.greaterOrEqual(C,e.end))break e;var I=new f.SmartOpImpl(b,r,g,y,i),_={start:h===e.start.line?e.start.col-C.col:0,
end:h===e.end.line?b.chars-(E.col-e.end.col):b.chars},T=0===_.start&&_.end===b.chars;t(I,o.__assign(o.__assign({},_),{wholeOp:T}),u);if(d)break e;y+=b.chars}}s=a.lines.next(s)}}
;e.prototype.getAllAttributesInRange=function(e){return this.attributes.getAllAttributesInRange(e)};e.prototype.undoRedo=function(e){var t=this;this.editor.execute("undoRedo",(function(){
var n=t.editor.callStack.getCurrentCallStack(),o=n.editEvent.eventType;n.startNewEvent(e);t.undoModule[e]((function(e,n){e&&t.performDocumentApplyChangeset(e);n&&t.editor.selection.set(new p.default({
start:(0,u.positionFromDocChar)(t.editor,n.selZone,n.selStart),end:(0,u.positionFromDocChar)(t.editor,n.selZone,n.selEnd),isReversed:n.selIsReversed}))
;return t.editor.callStack.getCurrentCallStack().startNewEvent(o,!0)}));(0,g.trackAce)(e);t.triggerUndoRedoEvent();t.editor.keystrokes.macroMarkUndoRedoHappened()}))}
;e.prototype.triggerUndoRedoEvent=function(){var e,t,n=this.undoModule.canPerformUndo(),o=this.undoModule.canPerformRedo()
;null===(t=null===(e=this.editor)||void 0===e?void 0:e.observer)||void 0===t||t.trigger("undo-redo-updated",[n,o])};return e}();t.default=y},1352:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});var o=n(1),i=n(6),r=n(220),a=n(245),s=n(22),l=n(242),d=n(58),c=n(20),u=n(290),h=n(86),p=n(17),f=["bold","italic","underline","strikethrough"],g=function(){function e(e,t){this.editor=e
;this.contentTypeRegistry=t;this.apool=e.getApool();this.reps=e.getReps()}e.prototype.performDocumentApplyAttributesToRange=function(e,t,n,o){this.validateAttribs(n);if(n)for(var i=0;i<n.length;i++){
var r=n[i][0];if(d.isMagicKey(r)){if(e.line!=t.line||0!=e.col||1!=t.col)throw new Error("Trying to apply magic key "+r+" to range "+e+", "+t)
;if("*"!=this.reps[e.zone].lines.atIndex(e.line).text.charAt(0))throw new Error("Trying to apply magic key "+r+" to line not starting with *")
;if(!(this.getAttributeValueForPoint(e,r)||"gallery"==r&&(this.getAttributeValueForPoint(e,"img")||this.getAttributeValueForPoint(e,"embed"))))throw new Error("Trying to apply magic key "+r+" to line without that attribute")
}}this.editor.contents.performDocumentApplyChangeset((0,a.buildApplyAttributesToRange)(this.reps,this.apool,e,t,n),!1,o)};e.prototype.getNativeToolbarAttributesForLine=function(){
var e=[],t=["hone","htwo","indent","outdent","task","taskdone","bullet","number"];if(this.editor.hasSelection()){
var n=this.editor.contents.getLineType(this.editor.selection.getStart()),o=d.parseListType(n);if(o)for(var i=0;i<t.length;i++){var r=t[i];o.type==r&&e.push(r)}}
-1==e.indexOf("task")&&-1==e.indexOf("taskdone")||null!=this.getTaskDueDateForLine()&&e.push("taskduedate");return e};e.prototype.getGalleryAttributesForCurrentItem=function(e){
if(e.getIsImageByIndex(e.getCurrentIndex())){var t=e.getElAtIndex(e.getCurrentIndex()),n=this.getImageSelectionAttributes(t);return["imageGalleryItem"].concat(n)}return["unknownGalleryItem"]}
;e.prototype.getImageSelectionAttributes=function(e){if(!e)return[];var t=[];if(this.editor.hasSelection()){var n=this.editor.selection.getPositionForNode(e)
;this.editor.media.isImageFloatRight(n)?t.push("imageRight"):this.editor.media.isImageFloatLeft(n)?t.push("imageLeft"):this.editor.media.isImageFullWidth(n)?t.push("imageFull"):this.editor.media.isImageNormalWidth(n)&&t.push("imageCenter")
}return t};e.prototype.setImageSelectionAttribute=function(e){switch(e){case"imageLeft":this.editor.media.floatImage("left");break;case"imageCenter":this.editor.media.toggleFullWidth(!1);break
;case"imageRight":this.editor.media.floatImage("right");break;case"imageFull":this.editor.media.toggleFullWidth(!0)}};e.prototype.isCurrentLineATaskItem=function(){if(this.editor.hasSelection()){
if(0===this.editor.contents.getLineType(this.editor.selection.getStart()).indexOf("task"))return!0}return!1};e.prototype.getTaskAttributesForLine=function(){var e={};if(this.isCurrentLineATaskItem()){
var t=this.getTaskDueDateForLine();t&&(e.dueDateUtcMillis=t)}return e};e.prototype.getTaskDueDateForLine=function(){if(this.isCurrentLineATaskItem()){
var e=this.editor.selection.getStart(),t=this.editor.lists.getDueDateForTaskLine(e.zone,e.line);return t?new Date(t).getTime():null}return null}
;e.prototype.getNativeToolbarTextAttributesForSelectionWithRange=function(){var e={};if(!this.editor.hasSelection())return e;for(var t=[{attribute:"bold",allowedValues:["true"]},{attribute:"italic",
allowedValues:["true"]},{attribute:"underline",allowedValues:["true"]},{attribute:"strikethrough",allowedValues:["true"]},{attribute:"highlight",
allowedValues:o.__spreadArray(["true"],h.TextHighlightColors.colors,!0)},{attribute:"placeholder",allowedValues:["true"]},{attribute:"subscript",allowedValues:["true"]},{attribute:"superscript",
allowedValues:["true"]}],n=this.editor.selection.get(),i=[{start:n.start,end:n.end}],r=0;r<t.length;r++){var a=t[r],s=a.attribute,l=a.allowedValues,d=this.testRangesHaveAttributeApplied_({
attributeName:s,ranges:i,allowedAttributeValues:l}),c=d.hasAttribute,u=d.attributeValue;c&&null!==u&&(e[s]=u)}return e};e.prototype.getNativeToolbarTextAttributesForSelectionWithCaret=function(){
var e=[];if(!this.editor.selection.isCollapsed())return e;for(var t=0,n=f;t<n.length;t++){var o=n[t];document.queryCommandState(o)&&e.push(o)}return e}
;e.prototype.setAttributeOnSelection=function(e,t){if(this.editor.hasSelection()){var n=this.editor.selection.get(),o=n.start,i=n.end;this.performDocumentApplyAttributesToRange(o,i,[[e,t]])}}
;e.prototype.getAttributesForPoint=function(e){for(var t=this,n=s.opIterator(this.reps[e.zone].alines[e.line]),o=0,i=[];n.hasNext();){var r=n.next();if((o+=r.chars)>=e.col+1){
s.eachAttribNumber(r.attribs,(function(e){var n=t.apool.getAttribKey(e),o=t.apool.getAttribValue(e);i.push([n,o])}));break}}return i};e.prototype.getAttributeValueForPoint=function(e,t){
for(var n=this.getAttributesForPoint(e),o=0;o<n.length;o++)if(n[o][0]==t)return n[o][1];return""};e.prototype.getAttributesForLine=function(e){
var t=this,n=this.reps[e.zone].alines[e.line],o=s.getAttribNumbers(n);return(o=i.uniq(o)).map((function(e){var n=t.apool.getAttribKey(e);if(!n)return{num:e,key:"XXX",value:"XXX"}
;var o=t.apool.getAttribValue(e);return{num:e.toString(36),key:n,value:o}}))};e.prototype.getUniqueAttributeValuesInRange=function(e,t,n){if(!e||!t)return[]
;for(var o=[],i={},r=this.editor.getRep(e.zone),a=e.line;a<=t.line;a++)for(var l=s.opIterator(r.alines[a]),d=0;l.hasNext();){var c=l.next(),u=d;d+=c.chars
;if(!(a==e.line&&d<e.col)&&!(a==t.line&&u>t.col)){var h=s.attribsAttributeValue(c.attribs,n,this.apool);if(h&&!(h in i)){o.push(h);i[h]=!0}}}return o}
;e.prototype.getRangeOfAttribute=function(e,t,n,o){return{start:this.getHeadOfAttribute(e,t,n,o),end:this.getEndOfAttribute(e,t,n,o)}};e.prototype.getHeadOfAttribute=function(e,t,n,o){
var i=this.reps,r=this.apool,a=e.line,l=e.col,d=r.putAttrib([t,n],!0);if(d<0||this.getAttributeValueForPoint(e,t)!=n)return null
;for(;a>=0;)for(var u=s.opIterator(i[e.zone].alines[a]),h=0,p=null;u.hasNext();){var f=u.next();s.hasAttribNumber(f.attribs,d)||(p={length:f.chars,col:h});if((h+=f.chars)>=l){if(p){
var g=i[e.zone].lines.atIndex(a).text.length;return p.col+p.length>g?new c.Position(e.zone,a+1,0):new c.Position(e.zone,a,p.col+p.length)}if(!o)return new c.Position(e.zone,a,0);a--
;l=i[e.zone].lines.atIndex(a).text.length;break}}return new c.Position(e.zone,0,0)};e.prototype.getEndOfAttribute=function(e,t,n,o){var i,r=this.reps,a=this.apool,l=e.line,d=0,u=a.putAttrib([t,n],!0)
;if(u<0||this.getAttributeValueForPoint(e,t)!=n)return null;for(;l<r[e.zone].alines.length;){for(var h=s.opIterator(r[e.zone].alines[l]);h.hasNext();){var p=h.next()
;if(i||d+p.chars>=e.col)if(s.hasAttribNumber(p.attribs,u))i||(i=new c.Position(e.zone,l,d));else if(i)return new c.Position(e.zone,l,d);d+=p.chars}if(!o)return new c.Position(e.zone,e.line,d-1);l++
;d=0}var f=r[e.zone].lines.atIndex(l-1).width;return new c.Position(e.zone,l-1,f-1)};e.prototype.removeFormatOnSelection=function(){document.execCommand("removeFormat")}
;e.prototype.toggleAttributeOnSelection=function(e,t){var n,o=this,i=["true"];if(t){n=t.attributeValue;i=t.allowedAttributeValues}var r=[],a=this.editor.managers.getLineManagerWithSpecialSelection()
;if(a){a.getSelectedZonesForSpecialSelection().forEach((function(e){var t=o.reps[e],n=t.lines.length(),i=t.lines.atIndex(n-1).width;r.push({start:new c.Position(e,0,0),end:new c.Position(e,n-1,i-1)})
}))}else if(this.editor.hasSelection()){var s=this.editor.selection.get(),d=s.start,u=s.end,h=s.zone,g=s.isCollapsed,m=h===c.Position.ROOT_ZONE&&0===d.line
;if(!this.editor.hasFeature("notitle")&&"placeholder"!==e&&m){if(0===u.line)return;d=d.set({line:1,col:0})}if(h!=c.Position.ROOT_ZONE&&this.editor.hasFeature("plaintext",h,{shouldMatchRootZone:!1
}))return;if(g&&document.execCommand&&p.default.iter._contains(f,e)){var v=!(0,l.isRangeEqual)({start:d,end:u},s);v&&this.editor.selection.set({start:d,end:u});document.execCommand(e)
;v&&this.editor.selection.set(s);this.editor.observer.trigger("command-state-change",void 0);return}r.push({start:d,end:u})}r.length&&this.toggleAttributeOnRanges_({attributeName:e,ranges:r,
attributeValue:n,allowedAttributeValues:i})};e.prototype.validateAttribs=function(e){var t=this;e&&e.forEach((function(e){var n=e[0],o=String(e[1]);if("gallery"==n){
if("[object Object]"==o)throw new Error("value was [object Object] wat u doin?");JSON.parse(o).items.forEach((function(e){if(!e.url||!e.type)throw new Error("bad gallery value: "+o)}))}
p.default.error.loggingTryCatch((function(){if(!r.isValidKeyValuePair(n,o,t.contentTypeRegistry))throw new Error("invalid key/val pair with key "+n)}))}))}
;e.prototype.toggleAttributeOnRanges_=function(e){for(var t=e.attributeName,n=e.attributeValue,o=e.ranges,i=e.allowedAttributeValues,r=this.testRangesHaveAttributeApplied_({attributeName:t,ranges:o,
allowedAttributeValues:i}).hasAttribute,a=0;a<o.length;a++){var s=new u.default(o[a]);if(r)this.performDocumentApplyAttributesToRange(s.start,s.end,[[t,""]]);else{var l=n||"true"
;this.performDocumentApplyAttributesToRange(s.start,s.end,[[t,l]])}}this.editor.observer.trigger("attr-selection-change",void 0)};e.prototype.testRangesHaveAttributeApplied_=function(e){
for(var t=this,n=e.attributeName,o=e.ranges,i=e.allowedAttributeValues,r=!0,a=null,l=i.map((function(e){var o=s.makeAttribsString("+",[[n,e]],t.apool)
;return new RegExp(o.replace(/\*/g,"\\*")+"(\\*|$)")})),d=function(e){return l.some((function(t,n){var o=t.test(e);o&&(a=i[n]);return o}))},c=0;c<o.length;c++){
for(var h=new u.default(o[c]),p=h.start.line,f=h.end.line,g=h.start.zone,m=this.reps[g],v=p;v<=f;v++){var y=s.opIterator(m.alines[v]),b=0,C=0,E=m.lines.atIndex(v).text.length;v==p&&(C=h.start.col)
;v==f&&(E=h.end.col);for(;y.hasNext();){var I=y.next(),_=b,T=_+I.chars;if(!d(I.attribs)&&!(T<=C||_>=E)){r=!1;break}b=T}if(!r)break}if(!r)break}return{hasAttribute:r,attributeValue:a}}
;e.prototype.getAllAttributeNumbersInRange=function(e){var t=[];this.editor.contents.forEachOpInRange(e,(function(e){var n=e.attribs;t=t.concat(s.getAttribNumbers(n))}));return i.uniq(t)}
;e.prototype.getAllAttributesInRange=function(e){var t=this.editor.getApool();return this.getAllAttributeNumbersInRange(e).map((function(e){return t.getAttrib(e)}))};return e}();t.default=g},
1353:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(72),i=n(22),r=n(309),a=n(64),s=n(54),l=n(17),d=function(){function e(e){this.editor=e;this.apool=e.getApool()
;this.reps=e.getReps();this.vectorReps=e.getVectorReps()}e.prototype.importText=function(e,t,n){var o,i=this;if(n){if("\n"!=e.charAt(e.length-1))throw new Error("new raw text must end with newline")
;if(/[\r\t\xa0]/.exec(e))throw new Error("new raw text must not contain CR, tab, or nbsp");o=e.substring(0,e.length-1).split("\n")}else o=l.default.iter.map(e.split("\n"),this.textify);var r="\n"
;o.length>0&&(r=o.join("\n")+"\n");this.editor.execute("importText"+(t?"Undoable":""),(function(){i.setDocText(r)}),{shouldIncorp:!1})
;if(n&&this.reps[0].alltext!=e)throw new Error("mismatch error setting raw text in importText")};e.prototype.textify=function(e){
return e.replace(/[\n\r ]/g," ").replace(/\xa0/g," ").replace(/\t/g,"        ")};e.prototype.importZatextHelper=function(e,t){e=i.cloneZatext(e);if(t){var n=(new o.default).fromJsonableNoCloning(t)
;r.default.validateWireApool(n);for(var a in e.attribs)e.attribs[a]=i.moveOpsToNewPool(e.attribs[a],n,this.apool)}return e};e.prototype.importZatext=function(e,t,n){var o=this
;e=this.importZatextHelper(e,t);this.editor.execute("importText"+(n?"Undoable":""),(function(){o.setDocZatext(e)}),{shouldIncorp:!1})};e.prototype.setDocText=function(e){
this.setDocZatext(i.makeZatext(e))};e.prototype.setDocZatext=function(e){this.editor.core.incorporateUserChanges();var t=i.changesetReplacingZatext(this.internalZatext(),e);i.checkRep(t)
;this.editor.contents.performDocumentApplyChangeset(t,!1,s.EditableState.Readonly);this.editor.callStack.getIdleWorkTimer().atMost(100)
;for(var n in e.text)if(this.reps[n].alltext!==e.text[n])throw new Error("mismatch error setting raw text in setDocZatext");this.editor.observer.trigger("initial-text",void 0)}
;e.prototype.importZatextForZone=function(e,t,n,o){var i=this;t=this.importZatextHelper(t,n);this.editor.execute("setTextForZone"+(o?"Undoable":""),(function(){
i.editor.core.withoutRecordingMutations((function(){i.setDocZatextForZone(e,t,o)}))}),{shouldIncorp:!1})};e.prototype.setDocZatextForZone=function(e,t,n){var o=this
;this.editor.core.incorporateUserChanges();var r=function(){var n,r,a={text:(n={},n[e]=o.reps[e].alltext,n),attribs:(r={},r[e]=i.joinAttributionLines(o.reps[e].alines),r)
},l=i.changesetReplacingZatext(a,t);i.checkRep(l);o.editor.contents.performDocumentApplyChangeset(l,!1,s.EditableState.Readonly)};n?r():this.editor.callStack.makeNewNonundoableEvent(r)}
;e.prototype.exportZatextAndPool=function(){return i.prepareZatextForWire(this.exportZatext(),this.apool)};e.prototype.exportHand=function(){var e=this.exportZatextAndPool();return(0,
a.docHand)(e.zatext,e.pool)};e.prototype.exportZatext=function(){var e=this,t=this.internalZatext();for(var n in t.attribs)t.attribs[n]=i.filterAttribNumbers(t.attribs[n],(function(t){
return 0!=e.apool.getAttribKey(t).indexOf("clientside-")}));return t};e.prototype.internalZatext=function(){var e={text:{},rows:{},cols:{},attribs:{}}
;for(var t in this.reps)if("0"==t||"\n"!=this.reps[t].alltext){e.text[t]=this.reps[t].alltext;e.attribs[t]=i.joinAttributionLines(this.reps[t].alines)}
for(var t in this.vectorReps)if(this.vectorReps[t].vectorIds.length>0){(this.vectorReps[t].forRow?e.rows:e.cols)[t]=this.vectorReps[t].vectorIds;e.attribs[t]=this.vectorReps[t].alines[0]}return e}
;return e}();t.default=d},1354:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.editor=e;this.reps=this.editor.getReps()}
e.prototype.getTextInRange=function(e,t){if(e.zone!=t.zone)throw new Error("mismatched zones!");var n=this.reps[e.zone],o=n.lines.offsetOfIndex(e.line)+e.col,i=n.lines.offsetOfIndex(t.line)+t.col
;return n.alltext.substring(o,i)};e.prototype.eachLineInRange=function(e,t,n,o){for(var i=this.reps[e],r=i.lines.atIndex(t),a=t;a<n;a++){a!=t&&(r=i.lines.next(r));o(r,a)}};return e}();t.default=n},
1355:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(533),i=n(245),r=n(22),a=n(54),s=n(58),l=n(20),d=n(226),c=n(51),u=function(){function e(e,t){this.editor=e
;this.contentTypeRegistry=t;this.apool=e.getApool();this.reps=e.getReps();this.vectorReps=e.getVectorReps()}e.prototype.performDocumentApplyChangeset=function(e,t,n,o){
void 0===n&&(n=a.EditableState.Editable)
;if(!this.editor.contents.hasMinimumEditableState(n))throw new Error("In callstack: "+this.editor.callStack.getCurrentCallStack().type+", editableState is "+a.EditableState[this.editor.contents.getEditableState()]+" but required is "+a.EditableState[n]+". To fix this, either need to check editable state before calling, or pass the correct minimumRequiredEditableState argument.")
;r.checkRep(e,this.apool);r.checkCSAppliesToRep(e,this.reps,this.vectorReps);this.editor.core.performDocumentApplyChangeset(e,t,{skipCheckRepBecauseIAlreadyDidIt:!0,processRootZoneLast:o})}
;e.prototype.replaceRange=function(e,t,n,o,i,r){var a=this;this.editor.execute("replaceRange",(function(){a.performDocumentReplaceRange(e,t,n,o,i,r)}))}
;e.prototype.performAttributePreservingDocumentReplaceRange=function(e,t,n,i,r,a){var s,d=this.reps[e.zone].lines.atIndex(e.line)
;s=l.Position.equals(e,t)?e.col>d.lineMarker?this.editor.contents.getAttributesForPoint(e.withCol(e.col-1)):[]:e.col<d.text.length?this.editor.contents.getAttributesForPoint(e):[];var c={}
;s.forEach((function(e){o.isPreserveable(e[0])&&(c[e[0]]=e[1])}));i&&i.forEach((function(e){c[e[0]]=e[1]}));var u=[];for(var h in c)u.push([h,c[h]]);this.performDocumentReplaceRange(e,t,n,u,r,a)}
;e.prototype.performDocumentReplaceRange=function(e,t,n,o,a,s){var d=this;null==e&&(e=this.editor.selection.getStart());null==t&&(t=this.editor.selection.getEnd())
;if(e.zone!=t.zone)throw new Error("mismatched zones!");var c=e.zone;this.editor.contents.validateAttribs(o)
;var u=this.safeReplacement(e,t,n),h={},p=this.editor.managers.getChildZonesInRangeRecursive(e,t);p.text.forEach((function(t){
d.editor.hasSelection()&&t==d.editor.selection.getStart().zone&&d.editor.selection.set(e);if("\n"!=d.reps[t].alltext){var n=r.builder(d.reps[t].lines.totalWidth());(0,
i.buildRemoveRange)(d.reps,n,new l.Position(t,0,0),l.Position.endOfZone(d.editor,t));h[t]=n.toUnpacked()}}));p.rows.forEach((function(e){h[e]=d.editor.core.changesetUnpackedVectorsZoneClear(!0,e)}))
;p.cols.forEach((function(e){h[e]=d.editor.core.changesetUnpackedVectorsZoneClear(!1,e)}));var f=r.builder(this.reps[c].lines.totalWidth());(0,i.buildKeepToStartOfRange)(this.reps,f,e);(0,
i.buildRemoveRange)(this.reps,f,e,t);var g=this.editor.authors.getThisAuthor();u.newlineBefore&&f.insert("\n",s?[]:[["author",g]],this.apool);o=o||[];s||(o=[["author",g]].concat(o))
;f.insert(n,o,this.apool);u.newlineAfter&&f.insert("\n",s?[]:[["author",g]],this.apool);h[c]=f.toUnpacked();var m=r.pack(h);this.performDocumentApplyChangeset(m,a)}
;e.prototype.performDocumentReplaceSelection=function(e,t){if(this.editor.hasSelection()){var n=this.editor.selection.getStart(),o=this.editor.selection.getEnd()
;if(n.zone!=o.zone)throw new Error("mismatched zones!");var i=n.zone;if(!t){n.col==this.reps[i].lines.atIndex(n.line).lineMarker&&(n=new l.Position(n.zone,n.line,0))
;o.col==this.reps[i].lines.atIndex(o.line).lineMarker&&(o=new l.Position(o.zone,o.line,0))}
0==n.col||0!=o.col||""!=e&&"\n"==e.slice(-1)||!this.reps[i].lines.atIndex(o.line).lineMarker||(o=o.withCol(1));this.performDocumentReplaceRange(n,o,e)
;this.editor.selection.set(this.editor.selection.getEnd())}};e.prototype.performDocumentReplaceCharRange=function(e,t,n,o){if(t!=n||0!=o.length){if(n==this.reps[e].alltext.length)if(t==n){t--;n--
;o="\n"+o.substring(0,o.length-1)}else if(0==o.length){t--;n--}else{n--;o=o.substring(0,o.length-1)}this.performDocumentReplaceRange((0,d.positionFromDocChar)(this.editor,e,t),(0,
d.positionFromDocChar)(this.editor,e,n),o)}};e.prototype.replaceVectorRange=function(e,t,n,o,i){var r=this;this.editor.execute("replaceVectorRange",(function(){
r.performDocumentReplaceVectorRange(e,t,n,o,i)}))};e.prototype.performDocumentReplaceVectorRange=function(e,t,n,o,i){var a=this,s=this.editor.getVectorsRep(t,e)
;if(!(0<=n&&n<=o&&o<=s.vectorIds.length))throw new Error("performDocumentReplaceVectorRange: bad range "+n+", "+o+", "+s.vectorIds.length)
;for(var d=[],u=0;u<i;u++)d.push(e?c.newUniqueRowId():c.newUniqueColId());if(o>n){
var h=this.editor.managers.getLineEntryContainingZone(t),p=s.vectorIds.slice(n,o),f=h.domInfo.lineManagerData,g=e?f.colsZoneId:f.rowsZoneId,m=this.editor.getVectorsRep(g,!e).vectorIds
;c.crossProduct(p,m,!e).forEach((function(e){if(e in a.reps){a.performDocumentReplaceRange(new l.Position(e,0,0),l.Position.endOfZone(a.editor,e),"")
;if(a.editor.selection.getStart()&&a.editor.selection.getStart().zone==e){var t=a.editor.managers.positionOfLineManagerContainingZone(e);a.editor.selection.set(t)}}}))}var v=r.smartOpAssembler()
;v.append({opcode:"=",attribs:"",lines:0,chars:n});v.append({opcode:"-",attribs:"",lines:0,chars:o-n});v.append({opcode:"+",attribs:"",lines:0,chars:i});var y={};y[t]={itemType:e?"R":"C",
oldLen:s.vectorIds.length,newLen:s.vectorIds.length-(o-n)+i,ops:v.toString(),itemBank:d};var b=r.pack(y);this.performDocumentApplyChangeset(b)};e.prototype.replaceZoneIds=function(e,t,n){
var o=this.editor.getVectorsRep(e,n),i=o.vectorIds.length,a=r.smartOpAssembler();a.append({opcode:"-",attribs:"",lines:0,chars:i});a.append({opcode:"+",attribs:"",lines:0,chars:t.length});var s={}
;s[e]={itemType:n?"R":"C",oldLen:o.vectorIds.length,newLen:t.length,ops:a.toString(),itemBank:t};var l=r.pack(s);this.performDocumentApplyChangeset(l)}
;e.prototype.performDocumentDeleteLine=function(e,t){var n=this.reps[e]
;t+1<n.lines.length()?this.performDocumentReplaceRange(new l.Position(e,t,0),new l.Position(e,t+1,0),""):t>0?this.performDocumentReplaceRange(new l.Position(e,t-1,n.lines.atIndex(t-1).text.length),new l.Position(e,t,n.lines.atIndex(t).text.length),""):this.performDocumentReplaceRange(new l.Position(e,t,0),new l.Position(e,t,n.lines.atIndex(t).text.length),"")
};e.prototype.safeReplacement=function(e,t,n){
var o,i,r=this.reps[e.zone].lines.atIndex(t.line),a=1==e.col&&s.lineHasLineLevelObject(e.zone,e.line,this.reps[e.zone],this.apool,this.contentTypeRegistry),l=0==t.col&&s.lineHasLineLevelObject(t.zone,t.line,this.reps[t.zone],this.apool,this.contentTypeRegistry)
;if(n.length>0){o="\n"==n.charAt(0);i="\n"==n.charAt(n.length-1)}else{o=t.col==r.text.length;i=0==e.col}var d=a&&!o,c=l&&!i;return 0==n.length?{newlineBefore:d||c,newlineAfter:!1}:{newlineBefore:d,
newlineAfter:c}};return e}();t.default=u},1356:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(81),r=n(22),a=n(28),s=n(589),l=n(8),d=n(18),c=n(296),u=n(20),h=function(){function e(e,t){this.contentTypeRegistry=t;this.editor_=e;this.cutHandler_=this.onCut_.bind(this)
;this.copyHandler_=this.onCopy_.bind(this);if(!this.editor_.hasFeature("disableCutCopy")){this.editor_.dom.getRoot().addEventListener("cut",this.cutHandler_)
;this.editor_.dom.getRoot().addEventListener("copy",this.copyHandler_)}}e.prototype.dispose=function(){this.editor_.dom.getRoot().removeEventListener("cut",this.cutHandler_)
;this.editor_.dom.getRoot().removeEventListener("copy",this.copyHandler_)};e.prototype.onCut_=function(e){var t=this;this.editor_.contents.getIsEditable()?this.handleEvent_(e,(function(e){
var n=t.editor_;e?e.deleteSelectedZones(!0):n.selection.isCollapsed()||n.keystrokes.doBackspaceNotAsCaret()})):this.copyHandler_(e)};e.prototype.onCopy_=function(e){this.handleEvent_(e)}
;e.prototype.handleEvent_=function(e,t){var n=this;(0,d.isInput)(e.target)||this.editor_.hasSelection()&&this.editor_.execute("copycut",(function(){
var o=n.editor_.managers.getLineManagerWithSpecialSelection();if(o||!n.editor_.selection.isCollapsed()&&n.editor_.getSelectedRep()){var i=o&&o.getClipboardZatextForSpecialSelection()
;n.maybeExpandSelection();var r=n.getPlainText(i);if(null!==r){var s=n.getHtml(i);e.clipboardData.setData("text/plain",r);e.clipboardData.setData("text/html",s)
;if(!(!e.clipboardData.getData("text/plain")&&!e.clipboardData.getData("text/html")||(0,a.isApple)()&&(0,a.compareIOSVersion)("11.3")>=0)){e.preventDefault();t&&t(o)}}}}))}
;e.prototype.maybeExpandSelection=function(){var e=this.editor_.selection.getStart(),t=this.editor_.selection.getEnd(),n=this.editor_.getSelectedRep();if(e&&t&&n){
var o=n.lines.atIndex(t.line),i=e.line!=t.line||e.col<=o.lineMarker,r=t.col>=o.text.length-1;if(t.zone==u.Position.ROOT_ZONE&&i&&r&&o.domInfo.isCollapsedHeading()){
for(var a=1,s=o.lineNode.nextElementSibling;s&&s.classList.contains("ace-line-collapsed");){a++;s=s.nextElementSibling}this.editor_.selection.set({start:e,end:new u.Position(t.zone,t.line+a,0)})}}}
;e.prototype.getGalleryIndex=function(){var e=this.editor_.selection.getStart();if(e.line==this.editor_.selection.getEnd().line){if("gallery"==this.editor_.managers.getLineManagerType(e.zone,e.line)){
return this.editor_.managers.getLineManager(e.zone,e.line).getCurrentIndex()}}};e.prototype.getPlainText=function(e){if(e){
var t=new c.PlainTextRenderer(e,this.editor_.getApool(),this.contentTypeRegistry),n=r.splitTextLines(e.text[0]),o=r.splitAttributionLines(e.attribs[0],e.text[0])
;return t.getPlainText(o,n,0,0,n.length-1,n[n.length-1].length)}var i=this.editor_.getSelectedRep()
;return(t=new c.PlainTextRenderer(this.editor_.contents.internalZatext(),this.editor_.getApool(),this.contentTypeRegistry)).getPlainText(i.alines,r.splitTextLines(i.alltext),this.editor_.selection.getStart().line,this.editor_.selection.getStart().col,this.editor_.selection.getEnd().line,this.editor_.selection.getEnd().col,!1,!1,!1,this.getGalleryIndex())
};e.prototype.getHtml=function(e){if(e){var t=e,n=t.text[0].split("\n").slice(0,-1),o=r.splitAttributionLines(t.attribs[0],t.text[0]);return new s.CopyCutHtmlRenderer({zatext:t,alines:o,textlines:n,
apool:this.editor_.getApool(),zoneId:"0",startLine:0,startCharacter:0,endLine:n.length-1,endCharacter:n[n.length-1].length,isFirstLineTitle:!1,relativeUrlPrefix:void 0,locale:l.default.userLocale,
isForDocxExport:!1,galleryIndex:void 0,contentTypeRegistry:this.contentTypeRegistry}).render()}var i=this.editor_.getSelectedRep(),a=this.editor_.selection.getZone();return new s.CopyCutHtmlRenderer({
zatext:this.editor_.contents.internalZatext(),alines:i.alines,textlines:r.splitTextLines(i.alltext),apool:this.editor_.getApool(),zoneId:a,startLine:this.editor_.selection.getStart().line,
startCharacter:this.editor_.selection.getStart().col,endLine:this.editor_.selection.getEnd().line,endCharacter:this.editor_.selection.getEnd().col,isFirstLineTitle:a==u.Position.ROOT_ZONE,
relativeUrlPrefix:void 0,locale:l.default.userLocale,isForDocxExport:!1,galleryIndex:this.getGalleryIndex(),contentTypeRegistry:this.contentTypeRegistry}).render()}
;o.__decorate([i.callOnce],e.prototype,"dispose",null);return e=o.__decorate([i.nullifyProperties],e)}();t.default=h},1357:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.Core=void 0
;var o=n(1),i=n(220),r=n(230),a=n(1358),s=n(1359),l=n(1382),d=n(22),c=n(22),u=n(1383),h=n(146),p=n(591),f=n(178),g=n(20),m=n(355),v=n(238),y=n(447),b=n(51),C=n(6),E=n(24),I=n(81),_=n(100),T=n(246),S=n(18),k=n(4),x=n(133),w=n(17),P=n(31),A=n(61)
;window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var O,L=function(){function e(e,t,n,o,i){this.nextId=1;this.currentMagicObjectId=1;this.hasAnyUserChangeYet=!1
;this.lineIdsWithPastedEmbeds={};this.explicitlyRecordingMutations=!1;this.imeStatus=O.NotInIME;this.editor=e;this.contentTypeRegistry=t;this.apool=e.getApool();this.reps=e.getReps()
;this.vectorReps=e.getVectorReps();this.root=this.editor.dom.getRoot();this.lineIdPrefix=n;this.dom=new s.AceCoreDOM(e,t,this.lineIdsWithPastedEmbeds,n,o)
;this.dirtyRangeObservationSystem=new a.DirtyRangeObservationSystem(e);this.dirtyRangeObservationSystem.initializeMutationObserver();if(i.prerender){
this.currentMagicObjectId=i.prerender.currentMagicObjectId+1;this.nextId=i.prerender.aceLineId+1}}e.prototype.dispose=function(){};e.prototype.doRepApplyChangeset=function(e,t){var n=this;if((0,
_.hasFreakedOut)())throw new Error("cannot doRepApplyChangeset after a freakout");if(!t||!t.skipCheckRepBecauseIAlreadyDidIt){c.checkRep(e,this.apool)
;c.checkCSAppliesToRep(e,this.reps,this.vectorReps)}w.default.error.loggingTryCatch((function(){
if(e.match(x.DENIED_UNICODE_CHARS_1))throw new Error("doRepApplyChangeset: failed DENIED_UNICODE_CHARS_1")
;if(e.match(x.DENIED_UNICODE_CHARS_2))throw new Error("doRepApplyChangeset: failed DENIED_UNICODE_CHARS_2")}));var o=this.editor,r=o.padController,a=r&&r.getChangesetTracker()
;if(r&&!a)throw new Error("changesetTracker hasn't been created yet but someone is trying to apply a change. This is bad and will cause ace to get out of sync with changesettracker")
;var s=this.reps,l=this.vectorReps,d=this.apool,u=a&&a.isTracking()&&a.isMarkingUnsaved()
;a&&a.isTracking()&&a.isApplyingNonUserChanges()||(e=u?c.compose(e,c.addAttributeToEachChange(e,["clientside-unsaved","true"],d),d):c.filterAttribNumbers(e,(function(e){var t=d.getAttrib(e)
;return!("clientside-unsaved"==t[0]&&"true"==t[1])})));!function(e){var t=o.callStack.getCurrentCallStack().editEvent
;if("nonundoable"==t.eventType)t.changeset?t.changeset=c.compose(t.changeset,e,d):t.changeset=e;else{var n=c.inverseOnRep(e,s,l,d);t.backset?t.backset=c.compose(n,t.backset,d):t.backset=n}
}(e=this.addMagicInlineObjectIds(e));c.mutateAttributionLines(e,(function(e,t){if("Z"==t){n.initiateRepForZoneIfNecessary(e);var i=n.reps[e].alines;return{splice:function(t){i.splice.apply(i,t)
;n.editor.lineTrackers.splice(e,t[0],t[1],Array.prototype.slice.call(t,2))},get:function(e){return i[e]},length:function(){return i.length},slice:function(e,t){return i.slice(e,t)}}}
return o.getVectorsRep(e,"R"==t).alines}),d);if(a&&a.isTracking()){var h=c.filterAttribNumbers(e,(function(e){var t=d.getAttrib(e),o=t[0],r=t[1];if(0==o.indexOf("clientside-"))return!1
;if(!i.isValidKeyValuePair(o,r,n.contentTypeRegistry))throw new Error("doRepApplyChangeset: attrib pair is invalid, key="+o);return!0}));a.composeUserChangeset(h)}
a&&a.isApplyingNonUserChanges()||c.isIdentity(e)||(this.hasAnyUserChangeYet=!0)};e.prototype.addMagicInlineObjectIds=function(e){var t=this;return c.csMap(e,(function(e,n){
n.ops=t.addMagicInlineObjectIdsToOps(n.ops);return n}))};e.prototype.addMagicInlineObjectIdsToOps=function(e){for(var t=c.smartOpAssembler(),n=c.opIterator(e);n.hasNext();){
var o=n.next(),i=c.attribsToDict(o.attribs,this.apool);if("-"!=o.opcode&&i.magicObject){if(o.lines>0)throw new Error("inlineMagicObject on newline");for(var r=0;r<o.chars;r++){
var a=""+this.currentMagicObjectId++,s=c.composeAttributes(o.attribs,c.makeAttribsString(o.opcode,[["clientside-magicObjectId",a]],this.apool),!1,this.apool);t.append({lines:0,chars:1,opcode:o.opcode,
attribs:s})}}else t.append(o)}return t.toString()};e.prototype.incorporateUserChanges=function(e){var t=this;if((0,_.hasFreakedOut)())throw new Error("cannot incorporateUserChanges after a freakout")
;if("nonundoable"===this.editor.callStack.getCurrentCallStack().editEvent.eventType)throw new Error("cannot incoporateUserChanges during a nonundoable event")
;return this.withoutRecordingMutations((function(){var n=t.editor.observer.hasBeenFocused();if(t.editor.contents.getIsEditable()&&n)return t.incorporateUserChangesForEditable(e)
;t.incorporateUserChangesForNotEditableWithUnincorp();return!1}))};e.prototype.incorporateUserChangesForEditable=function(e){
var t,n,i=this,a=this.editor.callStack.getCurrentCallStack(),s=this.reps,l=this.apool;if(!e&&a.domClean||window.acePausedForDebug)return!1;a.isUserChange=!0;var d=[];if(e){
if(this.dirtyRangeObservationSystem.hasAnyDirtyRanges())throw new Error("cannot do a paste incorp if there are other changes!");d.push({zone:e.zoneId,start:e.lineNum,end:e.lineNum+1,numNewNodes:1})
}else{var u=this.dirtyRangeObservationSystem.getDirtyRangesByZone(),p=function(e){var t=m.editor.dom.rootNodeOfZone(e);if(!t.firstChild){
1==u[e].length&&0==u[e][0].start&&0==u[e][0].nodes.length||throwException("wut - the dirty ranges don't make sense");t.innerHTML="<div>\x3c!-- --\x3e</div>";u[e][0].nodes=[t.firstChild]}
m.dirtyRangeObservationSystem.assertDirtyRangesCheckOut(e,t,m.reps[e],u[e]);u[e].forEach((function(t){d.push({zone:e,start:t.start,end:t.start+t.numDeleted,numNewNodes:t.nodes.length})}))},m=this
;for(var b in u)p(b);this.dirtyRangeObservationSystem.flush()}var E,I,_,T=this.incorpDisposalInfo(d);d=d.filter((function(e){return!(e.zone in T.deletedZones)}))
;E=e?o.__assign(o.__assign({},e.selection),{isReversed:!0}):this.editor.selection.internalGetSelectionPoints()
;for(var S,x=0,P=[],A=[],L=[],N=[],M=[],R=[],D=this.editor.selection.getStart(),F=function(){0!=x&&d[x].zone==d[x-1].zone||(S=0);var o=d[x],i=o.start,a=o.end,s=o.zone,u=z.editor.dom.rootNodeOfZone(s)
;if(o.numNewNodes>0){var h=f.getChildrenLines(u),p=h[i+S],m=h[i+S+o.numNewNodes-1],b=r.makeContentCollectorWithoutWidgets(z.contentTypeRegistry,l,v.className2Author,{disabledMediaTypes:(0,
y.getDisabledMediaTypesForZone)(s,z.editor),disableCode:!z.editor.hasFeature("code",s)||s!=g.Position.ROOT_ZONE,comments:z.editor.hasFeature("comments")?z.editor.comments:null,
disableBulleted:!z.editor.hasFeature("bulleted",s),disableNumbered:!z.editor.hasFeature("numbered",s),disableHeaders:!z.editor.hasFeature("headers",s),disableQuotes:!z.editor.hasFeature("quotes",s),
disableTasks:!z.editor.hasFeature("tasks",s),disableTables:!z.editor.hasFeature("tables")||s!=g.Position.ROOT_ZONE,disableTimelines:!z.editor.hasFeature("timelines",s)||s!=g.Position.ROOT_ZONE,
editorType:z.editor.editorType,allowedEmbedsForPasting:r.EmbedPastingRule.OnlyConfiguredEmbeds,useIESpaceRules:r.doesThisBrowserUseIESpaceRules(),allowMagicInPasted:!!e,
disableMediaUrlInPastedEmbed:e&&e.disableMediaUrlInPastedEmbed,expandMentionsWithoutTitles:z.editor.hasFeature("mention-auto-update"),includeMagicObjectIds:!0});b.notifySelection(E);var C=[];if(e){
C.push(p);b.notifyNode(e.lineNode);if(window.cclog){console.log("paste:");w.default.dom.dumpNode(e.lineNode)}}else for(var T=p;T&&(!T.previousSibling||T.previousSibling!=m);T=T.nextSibling){
window.cclog&&w.default.dom.dumpNode(T);b.notifyNode(T);C.push(T)}var O=b.finish(),D=O.selStart,F=O.selEnd,U=O.lines,H=O.lineAttribs,B=O.linesWrapped
;O.newAuthors.length&&(null===(n=null===(t=z.editor)||void 0===t?void 0:t.observer)||void 0===n||n.trigger("missing-authors",O.newAuthors));O.hasUnfurledDocMentions&&z.editor.onMentionLinksUnfurled()
;B>0&&w.default.error.loggingTryCatch((function(){f.doLongLineWarning(B,O.numLinesAfter)}));D.line>=0&&(I=new g.Position(s,D.line+i+S,D.col));F.line>=0&&(_=new g.Position(s,F.line+i+S,F.col))
;for(var Z=[],j=m,W=function(t){var n=U[t],o=z.dom.createDomLineEntry(n);e&&c.eachAttribNumber(H[t],(function(e){if("gallery"===l.getAttribKey(e)){
JSON.parse(l.getAttribValue(e)).items.forEach((function(e){O.pastedGalleryItems.forEach((function(t){t.type===e.type&&t.url===e.url&&(o.containsPastedEmbed=!0)}))}))}}));Z.push(o)
},V=0;V<U.length;V++)W(V);w.default.iter.forEach(C,(function(e){A.push(e)}));R.push({nodeToAddAfter:j,entries:Z,zone:s,dirtyNodes:C,ccData:O});var K={selStart:I,selEnd:_,preserveAuthorship:!!e,
thisAuthor:z.editor.authors.getThisAuthor()};L.push({zone:s,domSpliceStart:i+S,numDeleted:a-i,newEntries:Z,lineAttribs:H,spliceHints:K,originalStart:i});S+=U.length-(a-i)
;if(Object.keys(O.additionalZatext.attribs).length){(0,k.track)("paste-zone");P.push(O.additionalZatext)}N=N.concat(O.uploadsToMake);M=M.concat(O.unfurlsToTry)}else if(a>i){L.push({zone:s,
domSpliceStart:i+S,numDeleted:a-i,newEntries:[],lineAttribs:[],spliceHints:void 0,originalStart:i});S-=a-i}x++},z=this;x<d.length;)F();T.lineManagers.forEach((function(e){
w.default.error.loggingTryCatch((function(){i.editor.managers.unmountLineManager(e)}))}));for(var b in T.deletedZones){this.editor.managers.unregisterZone(b);this.initiateRepForZoneIfNecessary(b)
;var U=[this.dom.createDomLineEntry("")];L.push({zone:b,domSpliceStart:0,numDeleted:s[b].lines.length(),newEntries:U,lineAttribs:[""],spliceHints:void 0,originalStart:0})
;var H=this.editor.dom.rootNodeOfZone(b),B=f.getChildrenLines(H);for(x=0;x<B.length;x++)A.push(B[x]);R.push({nodeToAddAfter:null,entries:U,zone:b,dirtyNodes:[],ccData:null})}
for(var b in T.vectorZonesToClear)this.editor.managers.unregisterZone(b);var Z=L.length>0;w.default.iter.forEach(P,(function(t){for(var n in t.text){var o=t.text[n].split("\n"),r=[]
;for(x=0;x<o.length-1;x++)r.push(i.dom.createDomLineEntry(o[x]));var a=c.splitAttributionLines(t.attribs[n],t.text[n]);for(x=0;x<a.length;x++)a[x]=c.subattribution(a[x],0,o[x].length)
;i.initiateRepForZoneIfNecessary(n);var s={selStart:null,selEnd:null,preserveAuthorship:!!e,thisAuthor:i.editor.authors.getThisAuthor()};i.doIncorpLineSplice(n,0,1,r,a,s);R.push({nodeToAddAfter:null,
entries:r,zone:n,dirtyNodes:void 0,ccData:null});A.push(i.editor.dom.rootNodeOfZone(n).firstChild)}for(var n in t.rows)i.doIncorpVectorsZoneInsert(!0,n,t.rows[n],t.attribs[n])
;for(var n in t.cols)i.doIncorpVectorsZoneInsert(!1,n,t.cols[n],t.attribs[n])}));w.default.iter.forEach(L,(function(e){
i.doIncorpLineSplice(e.zone,e.domSpliceStart,e.numDeleted,e.newEntries,e.lineAttribs,e.spliceHints)}));var j,W=[];w.default.iter.forEach(R,(function(t){
var n=t.zone,o=i.dom.insertDomLines(n,t.nodeToAddAfter,t.entries,null,t.dirtyNodes,!e&&1===R.length&&1===A.length&&t.nodeToAddAfter==A[0]&&i.imeStatus===O.NotInIME);W.push(t.entries[0].domInfo.node)
;o&&(A=[]);if(!(e||1!=R.length||1!=A.length||t.nodeToAddAfter!=A[0]||t.entries[0].domInfo.lineManagerType||t.entries[0].domInfo.anyInlineMagicObj||o||i.imeStatus==O.NotInIME)){
var r=t.entries[0].domInfo.node,a=A[0];i.incorpMaybePreserveInternationalComposition(E,a,r,t.entries[0],t.ccData)}}));W.length>0&&this.editor.code.updateSyntaxHighlightingOnChange(W);if(A.length>0){
this.editor.code.updateSyntaxHighlightingOnChange(A);(0,h.clearPocketFromNodes)(A);A.forEach(w.default.dom.remove)}for(var b in T.vectorZonesToClear){var V="row"==T.vectorZonesToClear[b]
;this.doIncorpVectorsZoneClear(V,b)}w.default.error.loggingTryCatch((function(){j=i.editor.selection.internalUpdateRepFromSelection(E,I,_)}),(function(e){
w.default.error.logError(e.message+", "+JSON.stringify({selection:i.selectionForDebugging(E),selStart:I||"null",selEnd:_||"null",dump:i.bigDebugDump(),useNewObservation:"old system is gone",
dirtyRanges:d}),void 0,void 0,void 0,e);throw new Error("internalUpdateRepFromSelection failed")}));I=this.editor.selection.getStart();_=this.editor.selection.getEnd();N.forEach((function(e){
w.default.error.loggingTryCatch((function(){i.editor.media.handleContentCollectorUploadToMake(e)}))}));M.forEach((function(e){w.default.error.loggingTryCatch((function(){
i.editor.media.beginTryUnfurl(e.id,e.url)}))}));this.imeStatus==O.InIMEWithoutIncorp&&(this.imeStatus=O.MaybeInIMEWithIncorp);w.default.error.loggingTryCatch((function(){
j.wasCaret||!j.wasAffected&&E||i.editor.selection.internalRemoveAllLineHighlights();j.wasAffected&&!i.editor.selection.isCollapsed()&&i.editor.selection.internalAddLineHighlights()}));a.domClean=!0
;if(E&&(Z||j.wasAffected&&this.editor.selection.isCollapsed())){a.selectionAffected=!0;Z&&this.editor.selection.isCollapsed()&&this.editor.lists.renumberListsInRange(I.zone,I.line,I.line+1)}
w.default.error.loggingTryCatch((function(){i.editor.observer.trigger("update-toolbar",void 0)}));j&&j.wasAffected&&w.default.error.loggingTryCatch((function(){
i.editor.observer.trigger("selection-change",void 0)}));w.default.error.loggingTryCatch((function(){i.fixView()}));(L.length||R.length||A.length)&&w.default.error.loggingTryCatch((function(){
var e=C.uniq(L.map((function(e){return e.zone})).concat(R.map((function(e){return e.zone})))).filter(Boolean).filter((function(e){return e!=g.Position.ROOT_ZONE}));i.editor.observer.broadcastChange({
updatedZoneIds:e});i.editor.observer.trigger("user-change",{origSelStart:D})}));this.editor.callStack.getCurrentCallStack().docTextChanged&&this.editor.keystrokes.macroMarkIncorpHappened();return Z}
;e.prototype.rerenderDomLine=function(e,t){this.dom.rerenderDomLine(e,t)};e.prototype.initiateRepForZoneIfNecessary=function(e){var t=this;this.editor.execute("initiateRep",(function(){
if(!(e in t.reps)){t.reps[e]={lines:(0,p.default)(),alltext:"",alines:[]};var n=t.dom.createDomLineEntry("");t.doRepLineSplice(e,0,0,[n]);t.withoutRecordingMutations((function(){
t.dom.insertDomLines(e,null,[n],null)}));t.reps[e].alines=["|1+1"]}}),{shouldIncorp:!1})};e.prototype.fixView=function(){A.default.gecko&&function(e,t,n){if(e[t]!=n){e[t]=n;return!0}
}(this.root.style,"height","")};e.prototype.incorporateUserChangesForNotEditableWithUnincorp=function(){var e=this,t=this.editor.callStack.getCurrentCallStack()
;if(!t.domClean&&!window.acePausedForDebug){this.imeStatus=O.NotInIME
;var n=this.editor.selection.internalGetSelectionPoints(),o=[],i=this.dirtyRangeObservationSystem.getDirtyRangesByZone(),r=function(e){var t=a.editor.dom.rootNodeOfZone(e)
;a.dirtyRangeObservationSystem.assertDirtyRangesCheckOut(e,t,a.reps[e],i[e]);i[e].forEach((function(t){o.push({zone:e,start:t.start,end:t.start+t.numDeleted,numNewNodes:t.nodes.length})}))},a=this
;for(var s in i)r(s);this.dirtyRangeObservationSystem.flush();if(o.length>0){(0,k.track)("ace-non-editable-incorp-has-dirty-range");o.forEach((function(t){
for(var n=e.editor.dom.rootNodeOfZone(t.zone),o=f.getChildrenLines(n),i=t.start+t.numNewNodes-1;i>=t.start;i--)n.removeChild(o[i])
;var r=0==t.start?null:f.getChildrenLines(n)[t.start-1],a=e.reps[t.zone].lines.slice(t.start,t.end);e.dom.insertDomLines(t.zone,r,a,n)}))}
if(n&&n.startPoint.node!==this.editor.dom.getRoot()&&n.endPoint.node!==this.editor.dom.getRoot()&&(0,S.hasClosestElement)(n.startPoint.node.parentNode,this.editor.dom.getRoot())&&(0,
S.hasClosestElement)(n.endPoint.node.parentNode,this.editor.dom.getRoot())){this.editor.selection.internalUpdateRepFromSelection(n,void 0,void 0);this.editor.selection.internalUpdateLineHighlights(!0)
}w.default.error.loggingTryCatch((function(){e.editor.observer.trigger("update-toolbar",void 0)}));t.domClean=!0}};e.prototype.incorpDisposalInfo=function(e){var t=this,n=[],o={},i={};e=C.clone(e)
;for(var r=0;r<e.length;r++){var a=e[r],s=this.reps[a.zone];if(s)for(var l=a.start;l<a.end;l++){var d=s.lines.atIndex(l);if(d.domInfo.lineManagerType){n.push(d.domInfo.node.lineManager)
;var c=this.editor.managers.getChildZonesAtLine(a.zone,l);c.text.forEach((function(n){if(!o[n]){o[n]=!0;var i=t.reps[n];i&&e.push({start:0,end:i.lines.length(),zone:n})}}))
;c.rows.forEach((function(e){i[e]="row"}));c.cols.forEach((function(e){i[e]="col"}))}}}return{lineManagers:C.uniq(n),deletedZones:o,vectorZonesToClear:i}}
;e.prototype.doIncorpLineSplice=function(e,t,n,o,i,r){var a=(0,u.computeIncorpLineSplice)(this.reps[e],this.apool,e,t,n,o,i,r,this.contentTypeRegistry)
;if(c.isIdentity(a))this.doRepLineSplice(e,t,n,o,!0);else{this.doRepApplyChangeset(a);this.doRepLineSplice(e,t,n,o);this.editor.observer.trigger("changeset",a)}}
;e.prototype.changesetUnpackedVectorsZoneClear=function(e,t){var n=this.editor.getVectorsRep(t,e).vectorIds.length,o=c.smartOpAssembler();o.append({opcode:"-",attribs:"",lines:0,chars:n});return{
itemType:e?"R":"C",oldLen:n,newLen:0,ops:o.toString(),itemBank:[]}};e.prototype.doIncorpVectorsZoneClear=function(e,t){var n={};n[t]=this.changesetUnpackedVectorsZoneClear(e,t)
;var o=c.pack(n),i=this.editor.getVectorsRep(t,e);this.doRepApplyChangeset(o);i.vectorIds=[]};e.prototype.doIncorpVectorsZoneInsert=function(e,t,n,o){var i={};i[t]={itemType:e?"R":"C",oldLen:0,
newLen:n.length,ops:o,itemBank:n};var r=c.pack(i),a=this.editor.getVectorsRep(t,e);this.doRepApplyChangeset(r);a.vectorIds=n.slice(0)}
;e.prototype.incorpMaybePreserveInternationalComposition=function(e,t,n,o,i){if(e&&w.default.dom.isNodeText(e.startPoint.node)&&i.selStart&&0==i.selStart.line){var r=e.startPoint.node;if((0,
S.has)(t,r)){var a=this.editor.selection.internalGetPointForLineEntryAndCol(o,i.selStart.col);if(a&&w.default.dom.isNodeText(a.node)){var s=a.index-e.startPoint.index,l=s+r.nodeValue.length
;if(s>=0&&l<=a.node.nodeValue.length&&a.node.nodeValue.substring(s,l)===r.nodeValue){(0,k.trackEng)("incorp-preserve-international-composition");var d=a.node;l<d.nodeValue.length&&d.splitText(l)
;if(s>0){d.splitText(s);d=d.nextSibling}d.parentNode.insertBefore(r,d.nextSibling);d.parentNode.removeChild(d)}}}}};e.prototype.bigDebugDump=function(){var e=this
;return w.default.error.loggingTryCatch((function(){var t={reps:{},selStart:e.editor.selection.getStart(),selEnd:e.editor.selection.getEnd(),cleansedHtml:r.nodeToRedactedString(e.root)}
;for(var n in e.reps){for(var o=[],i=0;i<e.reps[n].lines.length();i++){var a=e.reps[n].lines.atIndex(i);o.push({hasDomInfo:!!a.domInfo,lineManagerType:a.domInfo?a.domInfo.lineManagerType:"null",
key:a.key,node:a.domInfo&&a.domInfo.node?r.nodeToRedactedString(a.domInfo.node):"null"})}var s=e.editor.dom.rootNodeOfZone(n),l=void 0;if(s){var d=f.getChildrenLines(s);l=[];for(i=0;i<d.length;i++){
var c=d[i];l.push({id:c.id,dirtiness:c._magicdom_dirtiness?{nodeId:c._magicdom_dirtiness.nodeId,isManagedLine:c._magicdom_dirtiness.isManagedLine}:"null",isDirty:e.editor.dom.internalIsNodeDirty(c)})}
}else l="no root of zone found";var u={};for(var h in e.apool.numToAttrib)u[h]=e.apool.getAttrib(h)[0];t.reps[n]={alines:e.reps[n].alines,apoolKeys:u,entries:o,topLevelNodes:l}}return t
}),(function(e){return{error:"Could not reconstruct big data dump: "+e.message}}))};e.prototype.isNodeInLineWithPastedEmbed=function(e){var t=this.editor.dom.getAceLineForNode(e);if(t){
var n=t.getAttribute("id");return!(!n||!(n in this.lineIdsWithPastedEmbeds))}return!1};e.prototype.serializeNodeForDebugging=function(e){for(var t=[];e&&e.parentNode&&e!==this.root;){
for(var n=e.parentNode,o=-1,i=0;i<n.childNodes.length;i++)if(n.childNodes[i]===e){o=i;break}t.push(o);e=n}var r=e===this.root?"root":"???";for(i=t.length-1;i>=0;i--)r+="["+t[i]+"]";return{
nodeType:e.nodeType,address:r}};e.prototype.selectionForDebugging=function(e){return e?{startPoint:{node:this.serializeNodeForDebugging(e.startPoint.node),index:e.startPoint.index,
maxIndex:e.startPoint.maxIndex},endPoint:{node:this.serializeNodeForDebugging(e.endPoint.node),index:e.endPoint.index,maxIndex:e.endPoint.maxIndex}}:"null"}
;e.prototype.performDocumentApplyChangeset=function(e,t,n){var o=this;if((0,_.hasFreakedOut)())throw new Error("cannot performDocumentApplyChangeset after a freakout")
;this.withoutRecordingMutations((function(){o._performDocumentApplyChangeset(e,t,n)}))};e.prototype._performDocumentApplyChangeset=function(e,t,n){
var o=this,i=this.editor.callStack.getCurrentCallStack();if(!i.domClean)throw new Error("performDocumentApplyChangeset called with dom not clean")
;if(this.imeStatus==O.InIMEWithoutIncorp)throw new Error("cannot performDocumentApplyChangeset while in InIMEWithoutIncorp");this.doRepApplyChangeset(e,n)
;var r,a=this.editor.selection.get(),s=a.start,u=a.end,h=a.hasSelection&&"setBaseText"!=i.type;h&&(r=new l.default(s,u,this.editor))
;var p=!1,f=[],g=[],v={},y=n.processRootZoneLast?d.csForeachUnpackedProcessingRootLast:d.csForeach;c.mutateTextLines(e,(function(e,t){return"Z"==t?{splice:function(t){
var n=t[0],i=t[1],r=Array.prototype.slice.call(t,2);o.domAndRepSplice(e,n,i,w.default.iter.map(r,(function(e){return e.slice(0,-1)})),f);p=!0;"0"==e||e in v||(v[e]=!0)},get:function(t){
return o.reps[e].lines.atIndex(t).text+"\n"},length:function(){return o.reps[e].lines.length()}}:{splice:function(n){
var i=n[0],r=n[1],a=Array.prototype.slice.call(n,2),s=o.domAndRepVectorsSplice(e,"R"==t,i,r,C.clone(a)),l=s.deletedZones,d=s.insertedZones;f=f.concat(l);g=g.concat(d);var c=C.keyBy(g,(function(e){
return e}));f=f.filter((function(e){return!(e in c)}));p=!0},get:function(n){return o.editor.getVectorsRep(e,"R"==t).vectorIds[n]},length:function(){
return o.editor.getVectorsRep(e,"R"==t).vectorIds.length}}}),this.apool,y);f.forEach((function(e){o.editor.managers.unregisterZone(e)}));this.editor.observer.trigger("changeset",e);if(h){
r.applyChangeset(e,t);var b=r.getRange(this.editor),E=this.editor.selection.get().isReversed;this.editor.selection.set(m.default.from(b,{isReversed:E}))}if(p){var I=Object.keys(v)
;this.editor.observer.broadcastChange({touchedZoneIds:I})}};e.prototype.domAndRepSplice=function(e,t,n,o,i){var r,a,s=this,l=[],d=this.editor.dom.rootNodeOfZone(e),c=f.getChildrenLines(d)
;if(n>0)for(var u=this.reps[e].lines.atIndex(t),p=function(t){u.domInfo&&u.domInfo.lineManagerType&&(i=i.concat(g.editor.managers.getChildZonesOfLineManager(u)));if(u.domInfo){
var n=u.domInfo.node.lineManager;w.default.error.loggingTryCatch((function(){n&&l.push(n)}))}u=g.reps[e].lines.next(u)},g=this,m=0;m<n;m++)p()
;var v=Array.prototype.slice.call(c,t,t+n),y=w.default.iter.map(o,this.dom.createDomLineEntry.bind(this.dom));this.doRepLineSplice(e,t,n,y)
;var b=P.default.isOnButDoNotLog("paper_pocket_interstitial")?c:f.getChildrenLines(this.editor.dom.rootNodeOfZone(e)),C=0==t?null:b[t-1],I=!1,_=(null===(r=v[0])||void 0===r?void 0:r.previousElementSibling)||null
;if(P.default.isOnButDoNotLog("paper_pocket_interstitial"))for(;_&&(null===(a=_.classList)||void 0===a?void 0:a.contains("ace-line-pocket"));)_=_.previousElementSibling
;1===v.length&&1===y.length&&C===_?I=this.dom.insertDomLines(e,v[0],y,null,v,!0):this.dom.insertDomLines(e,C,y,null,v);if(y.length>0){var T=y.map((function(e){return e.domInfo.node}))
;this.editor.code.updateSyntaxHighlightingOnChange(T)}if(!I&&v.length>0){this.editor.code.updateSyntaxHighlightingOnChange(v);(0,h.clearPocketFromNodes)(v);v.forEach(w.default.dom.remove)}
var S=this.editor.selection.getStart(),k=this.editor.selection.getEnd();(S&&S.line>=t&&S.line<=t+n||k&&k.line>=t&&k.line<=t+n)&&(this.editor.callStack.getCurrentCallStack().selectionAffected=!0)
;l.forEach((function(e){var t=E.findDOMNode(e);s.editor.dom.getAceLineForNode(t)||s.editor.managers.unmountLineManager(e)}))};e.prototype.domAndRepVectorsSplice=function(e,t,n,o,i){
var r,a,s=this,l=this.editor.getVectorsRep(e,t),d=this.editor.managers.getLineEntryContainingZone(e),u={},h=[],p=[];if(d){r=d.domInfo.node.lineManager;a=d.domInfo.lineManagerData
;var f=t?a.colsZoneId:a.rowsZoneId,g=this.editor.getVectorsRep(f,!t).vectorIds;p=b.crossProduct(i,g,!t);h=b.crossProduct(l.vectorIds.slice(n,n+o),g,!t);p.forEach((function(e){
s.editor.managers.registerZoneForLine(e,d);u[e]=!0}))}l.vectorIds=l.vectorIds.slice(0);l.vectorIds.splice.apply(l.vectorIds,[n,o].concat(i))
;d&&r.setRep(a.rowsZoneId,a.colsZoneId,this.editor.getVectorsRep(a.rowsZoneId,!0).vectorIds,this.editor.getVectorsRep(a.colsZoneId,!1).vectorIds,c.getAttributesPerCharacter(this.editor.getVectorsRep(a.rowsZoneId,!0).alines[0],this.apool),c.getAttributesPerCharacter(this.editor.getVectorsRep(a.colsZoneId,!1).alines[0],this.apool),a.fullWidth,a.tableTopHeader,a.tableSideHeader)
;h=h.filter((function(e){return!(e in u)}));return{deletedZones:h,insertedZones:p}};e.prototype.doRepLineSplice=function(e,t,n,o,i){w.default.iter.forEach(o,(function(e){e.width=e.text.length+1}))
;var r=this.reps[e],a=r.lines.offsetOfIndex(t),s=r.lines.offsetOfIndex(t+n);if(!i){this.editor.callStack.getCurrentCallStack().repChanged=!0
;if(n!=o.length)this.editor.callStack.getCurrentCallStack().docTextChanged=!0;else for(var l=r.lines.atIndex(t),d=0;d<n;d++){if(!l||o[d].text!=l.text){
this.editor.callStack.getCurrentCallStack().docTextChanged=!0;break}l=r.lines.next(l)}}r.lines.splice(t,n,o);var c=w.default.iter.map(o,(function(e){return e.text+"\n"})).join("")
;r.alltext=r.alltext.substring(0,a)+c+r.alltext.substring(s,r.alltext.length)};e.prototype.decorateMagicObjectsAfterPrerender=function(){this.dom.decorateMagicObjectsAfterPrerender()}
;e.prototype.decorateMagicObjectsInLine=function(e,t){this.dom.decorateMagicObjectsInLine(e,t)};e.prototype.initializeEmptyDoc=function(){var e=this;this.withoutRecordingMutations((function(){
for(;e.editor.dom.getRoot().firstChild;)e.editor.dom.getRoot().removeChild(e.editor.dom.getRoot().firstChild);var t=e.dom.createDomLineEntry("")
;e.doRepLineSplice(g.Position.ROOT_ZONE,0,e.reps[0].lines.length(),[t]);e.dom.insertDomLines("0",null,[t],null);e.reps[0].alines=["|1+1"]}))};e.prototype.withoutRecordingMutations=function(e){
return this.dirtyRangeObservationSystem.withoutRecordingMutations(e)};e.prototype.recordingMutations=function(e){
if(this.editor.callStack.hasCurrentCallStack())throw new Error("pasteHtmlAtCaret: cannot be in callstack for DOM mutation")
;if(!this.dirtyRangeObservationSystem.isCurrentlyRecordingMutations())throw new Error("pasteHtmlAtCaret: must be recording mutations");this.explicitlyRecordingMutations=!0;var t;try{t=e()}finally{
this.explicitlyRecordingMutations=!1}return t};e.prototype.setIMEStatus=function(e){this.imeStatus=e?O.InIMEWithoutIncorp:O.NotInIME};e.prototype.getIMEStatus=function(){
return this.imeStatus==O.InIMEWithoutIncorp};e.prototype.getHasAnyUserChangeYet=function(){return this.hasAnyUserChangeYet};o.__decorate([I.dispose],e.prototype,"dirtyRangeObservationSystem",void 0)
;o.__decorate([T.freakoutOnException],e.prototype,"incorporateUserChanges",null);o.__decorate([T.freakoutOnException],e.prototype,"performDocumentApplyChangeset",null);return e}();t.Core=L
;!function(e){e[e.NotInIME=1]="NotInIME";e[e.InIMEWithoutIncorp=2]="InIMEWithoutIncorp";e[e.MaybeInIMEWithIncorp=3]="MaybeInIMEWithIncorp"}(O||(O={}))},1358:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.DirtyRangeObservationSystem=void 0;var o=n(1),i=n(230),r=n(246),a=n(178),s=n(81),l=n(31),d=n(17),c=function(){function e(e){
this.currentlyNotRecordingMutations=!1;this.dirtyRangesByZone={};this.opLog=[];this._debugNodeId=1;this.editor=e;this.reps=e.getReps();this.root=e.dom.getRoot()}e.prototype.dispose=function(){
this.mutationObserver&&this.mutationObserver.disconnect()};e.prototype.getDirtyRangesByZone=function(){return this.dirtyRangesByZone};e.prototype.hasAnyDirtyRanges=function(){
for(var e in this.dirtyRangesByZone)if(this.dirtyRangesByZone[e].length>0)return!0;return!1};e.prototype.flush=function(){this.dirtyRangesByZone={};this.opLog=[]}
;e.prototype.initializeMutationObserver=function(){var e=this;this.mutationObserver=new MutationObserver((function(t,n){e.currentlyNotRecordingMutations?t.forEach((function(t){e.opLog.push({
mutationRecord:t,skipped:"currentlyNotRecordingMutations is true"})})):t.forEach((function(t){e.handleMutationRecord(t)}))}));this.observeNode(this.editor.dom.getRoot())}
;e.prototype.observeNode=function(e){this.mutationObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!0})}
;e.prototype.isNodeDirty=function(e){this.withoutRecordingMutations((function(){}))
;for(var t in this.dirtyRangesByZone)for(var n=this.dirtyRangesByZone[t],o=0;o<n.length;o++)if(-1!==n[o].nodes.indexOf(e))return!0;return!1};e.prototype.withoutRecordingMutations=function(e){
var t=this;if(this.currentlyNotRecordingMutations)return e();var n=void 0;try{this.currentlyNotRecordingMutations=!0;this.mutationObserver.takeRecords().forEach((function(e){t.handleMutationRecord(e)
}));n=e()}finally{this.currentlyNotRecordingMutations=!1;this.mutationObserver.takeRecords().forEach((function(e){t.opLog.push({mutationRecord:e,skipped:"post-withoutRecordingMutations"})}))}return n}
;e.prototype.isCurrentlyRecordingMutations=function(){return!this.currentlyNotRecordingMutations};e.prototype.handleMutationRecord=function(e){var t=this;d.default.error.loggingTryCatch((function(){
t.handleMutationRecord_(e)}),(function(){throw new Error("handleMutationRecord failed: log data is "+t.getLogData("0",t.editor.dom.getRoot(),t.reps[0]))}))}
;e.prototype.handleMutationRecord_=function(e){var t=this;this.opLog.push({mutationRecord:e,skipped:"not skipped"});if("attributes"!=e.type||e.target.getAttribute(e.attributeName)!==e.oldValue){
var n=function(e){var n=t.getTopLevelNode(e)
;n&&(n._magicdom_dirtiness&&n._magicdom_dirtiness.isManagedLine||n._magicdom_isdirty||n._magicdom_dirtiness&&(l.default.isOnButDoNotLog("paper_pocket_interstitial")&&n.classList.contains("ace-line-pocket")||t.handleMutation(t.editor.dom.zoneOfTopLevelNode(n),null,n,1,[n])))
};if("characterData"==e.type||"attributes"==e.type)n(e.target);else if("childList"==e.type)if(e.target.zoneId){
var o=e.target.zoneId.value,i=e.removedNodes.length,r=Array.prototype.slice.call(e.addedNodes);if(l.default.isOnButDoNotLog("paper_pocket_interstitial")&&0==(r=r.filter((function(e){var t
;return!(null===(t=e.classList)||void 0===t?void 0:t.contains("ace-line-pocket"))}))).length&&0==i)return;this.handleMutation(o,e.previousSibling,null,i,r)}else n(e.target)}}
;e.prototype.getTopLevelNode=function(e){var t=e;if(!t||!t.parentNode||t==this.root)return null;for(;!this.editor.dom.isRootOfZone(t.parentNode);){
if(t.inlineMagicObject||t.classList&&t.classList.contains("ace-line-pocket"))return null;if(!(t=t.parentNode).parentNode)return null}return t};e.prototype.handleMutation=function(e,t,n,o,i){var r={
zoneId:e,previousSibling:t?{id:t.id,dirty:t._magicdom_isdirty}:"null",firstNodeDeleted:n?{id:n.id,dirty:n._magicdom_isdirty}:"null",numDeleted:o,newNodes:i.length};this.opLog.push({mutation:r})
;var a,s,l=this.dirtyRangesByZone[e]||[];a=this.handleMutationIndexOfStart(l,e,t,n);s=this.handleMutationIndexOfEnd(l,e,a,o);var d=this.handleMutationDoDirtyRangesSplice(a,s,l,e,o,i);r.indexOfStart=a
;r.indexOfEnd=s;this.dirtyRangesByZone[e]=d;r.newDirtyRanges=d.map((function(e){return{start:e.start,numDeleted:e.numDeleted,nodes:e.nodes.length}}));i.forEach((function(e){e._magicdom_isdirty=!0}))}
;e.prototype.handleMutationIndexOfStart=function(e,t,n,o){var i;if(o)if(o._magicdom_isdirty){for(l=0;l<e.length;l++){for(var r=0;r<e[l].nodes.length;r++)if(e[l].nodes[r]===o){i={clean:!1,
indexOfRange:l,indexInRange:r};break}if(i)break}if(!i)throw new Error("handleMutation: firstNodeDeleted is dirty but not in any of the dirty ranges")}else{
for(var a=this.reps[t].lines.indexOfKey(o.id),s=0,l=0;l<e.length;l++){if(e[l].start>a){i={clean:!0,indexOfRange:l,indexInRange:a-s};break}s=e[l].start+e[l].numDeleted}i||(i={clean:!0,
indexOfRange:e.length,indexInRange:a-s})}else if(n)if(n._magicdom_isdirty){for(l=0;l<e.length;l++){for(r=0;r<e[l].nodes.length;r++)if(e[l].nodes[r]===n){i=r==e[l].nodes.length-1?{clean:!0,
indexOfRange:l+1,indexInRange:0}:{clean:!1,indexOfRange:l,indexInRange:r+1};break}if(i)break}if(!i)throw new Error("handleMutation: previousSibling is dirty but not in any of the dirty ranges")}else{
for(a=this.reps[t].lines.indexOfKey(n.id),s=0,l=0;l<e.length;l++){if(e[l].start>a){i=a==e[l].start-1?{clean:!1,indexOfRange:l,indexInRange:0}:{clean:!0,indexOfRange:l,indexInRange:a-s+1};break}
s=e[l].start+e[l].numDeleted}i||(i={clean:!0,indexOfRange:e.length,indexInRange:a-s+1})}else i=e.length>0&&0==e[0].start?{clean:!1,indexOfRange:0,indexInRange:0}:{clean:!0,indexOfRange:0,
indexInRange:0};i.clean||0!=e[i.indexOfRange].nodes.length||(i={clean:!0,indexOfRange:i.indexOfRange+1,indexInRange:0});return i};e.prototype.handleMutationIndexOfEnd=function(e,t,n,o){for(var i={
clean:n.clean,indexOfRange:n.indexOfRange,indexInRange:n.indexInRange},r=o;r>0;){var a=r;if(i.clean){var s=i.indexOfRange
;if((l=(s==e.length?this.reps[t].lines.length():e[s].start)-(0==s?0:e[s-1].start+e[s-1].numDeleted)-i.indexInRange)<=r){s==e.length?i.indexInRange+=r:i=0==e[s].nodes.length?{clean:!0,indexOfRange:s+1,
indexInRange:0}:{clean:!1,indexOfRange:s,indexInRange:0};r-=l}else{i.indexInRange+=r;r=0}}else{var l
;if((l=e[i.indexOfRange].nodes.length-i.indexInRange)<0)throw new Error("leftInRange < 0 (dirty case)");if(l<=r){i={clean:!0,indexOfRange:i.indexOfRange+1,indexInRange:0};r-=l}else{i.indexInRange+=r
;r=0}}if(a<=r)throw new Error("leftToDelete did not decrease")}return i};e.prototype.handleMutationDoDirtyRangesSplice=function(e,t,n,o,i,r){var a=[]
;if(e.clean&&e.indexInRange>0&&t.clean&&e.indexOfRange==t.indexOfRange){var s=e.indexInRange+(0==e.indexOfRange?0:n[e.indexOfRange-1].start+n[e.indexOfRange-1].numDeleted)
;a=n.slice(0,e.indexOfRange).concat([{start:s,numDeleted:i,nodes:r}]).concat(n.slice(e.indexOfRange))}else{var l=void 0,d=void 0,c=void 0,u=void 0,h=void 0
;if(e.clean)if(0==e.indexInRange&&e.indexOfRange>0){l=n[c=e.indexOfRange-1].nodes;h=n[c].start}else{l=[];h=(0==(c=e.indexOfRange)?0:n[c-1].start+n[c-1].numDeleted)+e.indexInRange}else{
l=n[c=e.indexOfRange].nodes.slice(0,e.indexInRange);h=n[c].start}if(t.clean){u=t.indexOfRange-1;d=[]}else d=n[u=t.indexOfRange].nodes.slice(t.indexInRange)
;for(var p=i+l.length+d.length,f=c;f<=u;f++)p+=n[f].numDeleted-n[f].nodes.length;var g=l.concat(r).concat(d);a=n.slice(0,c).concat(0==p&&0==g.length?[]:[{start:h,numDeleted:p,nodes:g
}]).concat(n.slice(u+1))}return a};e.prototype.getLogData=function(e,t,n){for(var o=this,i=[],r=(0,a.getChildrenLines)(t),s=0;s<r.length;s++){var d=r[s];i.push({id:d.id||"null",
dirty:d._magicdom_isdirty||"null",node:this._node(d)})}var c={};for(var u in this.dirtyRangesByZone)c[u]=this.dirtyRangesByZone[u].map((function(e){return{start:e.start,numDeleted:e.numDeleted,
nodes:e.nodes.length}}));var h=[];this.opLog.forEach((function(e){e.mutationRecord?h.push({mutationRecord:o.cleansedRecord(e.mutationRecord),skipped:e.skipped}):h.push(e)}));var p={zone:e,
repLen:n.lines.length(),domLen:l.default.isOnButDoNotLog("paper_pocket_interstitial")?r.length:(0,a.getChildrenLines)(t).length,allDirtyRanges:c,domData:i,opLog:h,
repKeys:n.lines.slice().map((function(e){return e.key})),repNodes:n.lines.slice().map((function(e){return e&&e.domInfo&&o._node(e.domInfo.node)}))};return JSON.stringify(p)}
;e.prototype.assertDirtyRangesCheckOut=function(e,t,n,o){var i=this,r=function(o,r){if(!o)throw new Error("assertDirtyRangesCheckOut failed: "+r+", data = "+JSON.stringify(i.getLogData(e,t,n)))
},s=n.lines.length();o.forEach((function(e){s+=e.nodes.length-e.numDeleted}));var l=(0,a.getChildrenLines)(t).length;r(s==l,"length of dom does not match "+s+", "+l);for(var d=0;d<o.length;d++){
var c=o[d];r(c.numDeleted>0||c.nodes.length>0,"dirty range is no-op");r(c.start>=0,"start must be >= 0");r(c.start+c.numDeleted<=n.lines.length(),"end too big");if(d>0){var u=o[d-1]
;r(u.start+u.numDeleted<c.start,"ranges overlap")}}};e.prototype.logRecord=function(e){return{type:e.type,target:e.target&&(e.target.outerHTML||e.target.nodeValue),
addedNodes:e.addedNodes&&Array.prototype.map.call(e.addedNodes,(function(e){return e.outerHTML||e.nodeValue})),removedNodes:e.removedNodes&&Array.prototype.map.call(e.removedNodes,(function(e){
return e.outerHTML||e.nodeValue})),previousSibling:e.previousSibling&&(e.previousSibling.outerHTML||e.previousSibling.nodeValue),
nextSibling:e.nextSibling&&(e.nextSibling.outerHTML||e.nextSibling.nodeValue),attributeName:e.attributeName,attributeNamespace:e.attributeNamespace,oldValue:e.oldValue}};e.prototype._node=function(e){
if(!e)return null;if(e==this.editor.dom.getRoot())return"root";if(!e._debugNodeId){e._debugNodeId=this._debugNodeId;this._debugNodeId++}return"{"+e._debugNodeId+"}"+i.nodeToRedactedString(e)}
;e.prototype.cleansedRecord=function(e){return{type:e.type,target:this._node(e.target),addedNodes:e.addedNodes&&Array.prototype.map.call(e.addedNodes,this._node.bind(this)),
removedNodes:e.removedNodes&&Array.prototype.map.call(e.removedNodes,this._node.bind(this)),previousSibling:this._node(e.previousSibling),nextSibling:this._node(e.nextSibling),
attributeName:e.attributeName,attributeNamespace:e.attributeNamespace,oldValue:e.oldValue?"redacted non-null value":e.oldValue}}
;o.__decorate([r.freakoutOnException],e.prototype,"handleMutationRecord",null);return e=o.__decorate([s.nullifyProperties],e)}();t.DirtyRangeObservationSystem=c},1359:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.AceCoreDOM=void 0
;var o=n(1),i=n(146),r=n(180),a=n(764),s=n(8),l=n(136),d=n(100),c=n(1360),u=n(1364),h=n(1367),p=n(812),f=n(243),g=n(1379),m=n(0),v=n(24),y=n(816),b=n(31),C=n(51),E=n(166),I=n(6),_=n(4),T=n(1381),S=function(){
function e(e,t,n,o,i){this.editor=e;this.contentTypeRegistry=t;this.lineIdsWithPastedEmbeds=n;this.lineIdPrefix=o;this.lexings=i;this.apool=e.getApool();this.reps=e.getReps()
;this.vectorReps=e.getVectorReps()}e.prototype.createDomLineEntry=function(e){return{key:this.generateUniqueId(),text:e,lineNode:null,domInfo:null,lineMarker:0}}
;e.prototype.insertDomLines=function(e,t,n,o,r,a){if(0!=n.length){
for(var s=o||this.editor.dom.rootNodeOfZone(e),l=new k(r||[]),d=n.length>0?this.reps[e].lines.indexOfEntry(n[0]):null,c=this.editor.code.getDefaultLang(e),u=this.editor.lineTrackers,h=this.editor.contents.getIsEditable(),p=this.editor.media.attachmentStore,f=this.editor.getPadId(),m=a&&r&&1===r.length&&1===n.length&&t===r[0],v=!1,C=document.createDocumentFragment(),E=0,I=n;E<I.length;E++){
(O=I[E]).containsPastedEmbed&&(this.lineIdsWithPastedEmbeds[O.key]=!0)
;(0,y.renderLine)(e,O,d,this.reps,this.vectorReps,this.apool,this.lexings,c,u,h,p,f,this.editor.hasFeature("slidethings"),this.contentTypeRegistry,this.editor.editorType,void 0,void 0,this.editor.options.stores,this.editor.options.disableHashtags)
;this.editor.lineTrackers.markClean(e,d);var _=O.domInfo,T=_.node,S=void 0
;if(m&&!r[0].lineManager&&!n[0].domInfo.lineManagerType&&(b.default.isOnButDoNotLog("paper_inline_objs_perf")||!n[0].domInfo.anyInlineMagicObj)){(S=r[0]).id=T.id
;v=T.outerHTML===this.normalizeOldNodeOuterHtml(S)||(0,g.optimizedLineReplacement)(_,S)}if(v){var x=r[0];x.id=O.key;O.lineNode=x;O.domInfo.node=x;this.markNodeClean(e,_)}else C.appendChild(T);d++}
if(t)if(b.default.isOnButDoNotLog("paper_pocket_interstitial")&&(0,i.getPocketNode)(t,!0)){var w=(0,i.getPocketNode)(t,!0).parentElement;s.insertBefore(C,w.nextSibling)
}else s.insertBefore(C,t.nextSibling);else s.insertBefore(C,s.firstChild);for(var P=0,A=n;P<A.length;P++){var O=A[P];this.decorateMagicObjects(O,l);this.markNodeClean(e,O.domInfo)}return v}}
;e.prototype.rerenderDomLine=function(e,t){var n=t.lineNode,o=n.parentNode;(0,i.clearPocketFromNodes)([n]);this.insertDomLines(e,n.previousSibling,[t],o,[n]);o.removeChild(n)}
;e.prototype.getContentTypeFromLine=function(e){var t=this.contentTypeRegistry.getClassById(e.lineManagerType);return t?new t(e.lineManagerData):null}
;e.prototype.updateBlockContentType=function(e,t,n,o){var i=this,r=e.domInfo,a=this.getContentTypeFromLine(r);r.lineManagerElement=this.updateContentTypeMagicObject(a,n,o,(function(t){var n=e.domInfo
;n.node.lineManager=t;var o=i.getContentTypeFromLine(n);if(!o){var r=n.lineManagerType;(0,d.freakout)("Attempting to register inner zones for: ".concat(r," but the ContentType could not be found"))}
var a=i.editor.contents.exportZatextAndPool();i.contentTypeRegistry.getZoneIds(o,a).forEach((function(t){i.editor.managers.registerZoneForLine(t,e)}))}),t)}
;e.prototype.updateInlineContentType=function(e,t,n,o){this.updateContentTypeMagicObject(e,n,o||null,(function(e){(o||n).inlineMagicObject=e}),t)}
;e.prototype.updateContentTypeMagicObject=function(e,t,n,i,r){var d,c,u,h=this,p=n?n.parentElement:t.parentElement,f={editor:this.editor,update:function(e,t){(0,T.updateContentTypeForReactInstance)({
ref:c,callback:e,flags:t,editor:h.editor,contentTypeRegistry:h.contentTypeRegistry})},ref:function(e){return c=e}},g=new a.default({type:"browser",contentType:e,contentTypeProps:f,context:o.__assign({
locale:s.default.userLocale},(0,E.thisBrowserRenderContext)()),preservationId:(n||t).getAttribute("data-preservation-id"),registry:this.contentTypeRegistry,editorForInnerZoneProvider:this.editor,
documentZatextAndPool:r}),y=g.renderComponent((function(e){return u=e}));v.hydrate(m.createElement(l.EditorErrorBoundary,null,y),p,(function(){if(u&&c){u.magicObject=c;i(c)}}));if(n){
var b=this.editor.callStack.getCurrentCallStack();document.activeElement&&n.contains(document.activeElement)&&b&&(b.selectionAffected=b.shouldRefocusAtEnd=!0)
;var C=null===(d=t.parentElement)||void 0===d?void 0:d.parentElement;if(C){n.parentElement&&C.insertBefore(n.parentElement,t.parentElement);t.parentElement&&C.removeChild(t.parentElement)}}
return g.element};e.prototype.decorateMagicObjectsAfterPrerender=function(){var e=this,t=new k([]),n=this.editor.contents.exportZatextAndPool(),o=function(o){i.reps[o].lines.forEach((function(i){
e.decorateMagicObjects(i,t,n);e.markNodeClean(o,i.domInfo,i.key)}))},i=this;for(var r in this.reps)o(r)};e.prototype.decorateMagicObjectsInLine=function(e,t){var n=new k([])
;this.decorateMagicObjects(e,n,t);this.markNodeClean(e.domInfo.zone(),e.domInfo,e.key)};e.prototype.decorateMagicObjects=function(e,t,n){var o=this;(0,i.isPocketEnabled)()&&this.updatePocket(e)
;if(e.domInfo.lineManagerType){var r=e.domInfo.node.querySelector("[data-preservation-id]"),a=r.getAttribute("data-preservation-id"),s=function(){e.domInfo.node.lineManager=r.magicObject
;"aceTable"==e.domInfo.lineManagerType?o.renderLineTableSetup(e):(0,f.lineManagerTypeCanHaveZones)(e.domInfo.lineManagerType,o.contentTypeRegistry)&&o.renderLineManagerSetup(e)
},l=t.getNodeForPreservationId(a),d=this.contentTypeRegistry.hasContentType(e.domInfo.lineManagerType)
;if(l&&["gallery","aceTable"].indexOf(e.domInfo.lineManagerType)>=0)this.updateExistingLineManager(e,r,l,s);else if(d){n=n||this.editor.contents.exportZatextAndPool()
;this.updateBlockContentType(e,n,r,l)}else this.hydrateNewLineManager(e,r,s)}else e.domInfo.anyInlineMagicObj&&this.updateInlineMagicObjects(e,t)}
;e.prototype.updateExistingLineManager=function(e,t,n,o){var i=e.domInfo.lineManagerData;t.appendChild(n.firstChild);t.removeChild(t.firstChild);t.magicObject=n.magicObject
;if("gallery"==e.domInfo.lineManagerType){t.magicObject.setGalleryData(i,e.domInfo.galleryStyle)}else{
if("aceTable"!=e.domInfo.lineManagerType)throw new Error("smart updating not implemented for type: "+e.domInfo.lineManagerType);var r=t.magicObject;r.updateTableLineKey(e.key);r.updateTableData({
fullWidth:i.fullWidth,tableSideHeader:i.tableSideHeader,tableTopHeader:i.tableTopHeader})}o()};e.prototype.hydrateNewLineManager=function(e,t,n){var i=e.domInfo.lineManagerElement
;e.domInfo.lineManagerElement=m.createElement(i.type,o.__assign(o.__assign({},i.props),{editor:this.editor}));x(e.lineNode,"lineManager");x(t,"magicObject")
;var r=m.cloneElement(e.domInfo.lineManagerElement,{ref:function(e){t.magicObject=e;e&&n()}});v.hydrate(m.createElement(l.EditorErrorBoundary,null,r),t.firstChild)}
;e.prototype.updateInlineMagicObjects=function(e,t,n){var o=this,i=(0,I.toArray)(e.lineNode.querySelectorAll("[data-inline-magic-object]"));if(i.length){n=n||this.editor.contents.exportZatextAndPool()
;i.forEach((function(e){var i=t.getNodeForPreservationId(e.getAttribute("data-preservation-id")),a=e.getAttribute(r.CONTENT_TYPE_ID_ATTR);if(o.contentTypeRegistry.hasContentType(a)){
"mention"!==a&&"customEmoji"!==a||(i=null);var s=o.contentTypeRegistry.createFromElement(e);o.updateInlineContentType(s,n,e,i)}}))}if(!this.contentTypeRegistry.hasContentType("latex")){
Array.prototype.slice.call(e.lineNode.querySelectorAll(".inline-latex")).forEach((function(e){var n=t.getNodeForPreservationId(e.getAttribute("data-preservation-id"))
;n?o.editor.inlineMagicLatex.move(n,e):o.editor.inlineMagicLatex.register(e)}))}};e.prototype.updatePocket=function(e){if(b.default.isOnButDoNotLog("paper_pocket_interstitial")){(0,
p.insertTaskToolbarIntoPocket)(this.editor,e);(0,u.insertCollapsableHandleIntoPocket)(this.editor,e);(0,c.insertBookmarkIntoPocket)(this.editor,e)}else if((0,i.getPocketNodeByLine)(e)){(0,
i.addPocketToLine)(this.editor,e);(0,p.insertTaskToolbarIntoPocket)(this.editor,e);(0,h.insertCollapsableSectionHandleIntoPocket)(this.editor,e)}};e.prototype.renderLineTableSetup=function(e){
var t=this;this.editor.managers.registerZoneForLine(e.domInfo.lineManagerData.rowsZoneId,e);this.editor.managers.registerZoneForLine(e.domInfo.lineManagerData.colsZoneId,e)
;var n=this.editor.getVectorsRep(e.domInfo.lineManagerData.rowsZoneId,!0).vectorIds,o=this.editor.getVectorsRep(e.domInfo.lineManagerData.colsZoneId,!1).vectorIds
;C.crossProduct(n,o).forEach((function(n){t.editor.managers.registerZoneForLine(n,e)}))};e.prototype.renderLineManagerSetup=function(e){var t=this
;e.domInfo.node.lineManager.getAllChildZones().forEach((function(n){t.editor.managers.registerZoneForLine(n,e)}))};e.prototype.markNodeClean=function(e,t,n){var o=t.node;o._magicdom_dirtiness={
nodeId:n||this.uniqueId(o),isManagedLine:!!t.lineManagerType,zone:e};o._magicdom_isdirty=!1};e.prototype.uniqueId=function(e){var t=e.id;if(t)return t;e.id=this.generateUniqueId();return e.id}
;e.prototype.generateUniqueId=function(){return this.lineIdPrefix+"-ace-line-"+this.editor.core.nextId++};e.prototype.normalizeOldNodeOuterHtml=function(e){var t=e.outerHTML;(0,
i.clearPocketFromNodes)([e]);if(t&&t.match(/focused-line|ace-task-line-highlighted|ace-line-pocket-custom-/)){(e=e.cloneNode(!0)).classList.remove("focused-line")
;e.classList.remove("ace-task-line-highlighted");return e.outerHTML}return t};return e}();t.AceCoreDOM=S;var k=function(){function e(e){this.oldDomNodes=e;this.preservationIdToDomNode=null}
e.prototype.getNodeForPreservationId=function(e){if(!this.preservationIdToDomNode){this.preservationIdToDomNode={};var t=this.preservationIdToDomNode;this.oldDomNodes.forEach((function(e){
Array.prototype.slice.call(e.querySelectorAll("span[data-preservation-id]")).forEach((function(e){e.magicObject&&(t[e.getAttribute("data-preservation-id")]=e)}))}))}
return this.preservationIdToDomNode[e]};return e}();function x(e,t){Object.defineProperty(e,t,{get:function(){_.trackEng("ace-magic-object-render-failure")
;console&&console.warn&&console.warn("Accessing ".concat(t," property on Node before it has been set!"));return null},set:function(e){Object.defineProperty(this,t,{value:e,writable:!0})},
configurable:!0})}},1360:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.insertBookmarkIntoPocket=void 0;var o=n(590),i=n(3),r=n(146),a=n(0),s=n(1362),l=function(e){
var t,n=e.lineEntry,o=e.children,r=n.domInfo.listType,l="hone"==r||"htwo"==r?r:void 0,d=i(s.default.wrapper,"pocket-item-revealable",((t={})[s.default.h1]="hone"==l,t[s.default.h2]="htwo"==l,t)),c={
transform:"translateY(-".concat(n.lineNode.clientHeight,"px)")};return a.createElement("div",{className:d,style:c},o)};l.displayName="BookmarkPocketItem";t.insertBookmarkIntoPocket=function(e,t){
if((0,r.isHeaderInRootZone)(t,e)&&e.hasFeature("bookmark")){var n=(0,r.getLazyBackPocket)(e,t);n&&null==t.bookmarkRef&&(t.bookmarkRef=n.put(a.createElement(l,{lineEntry:t
},a.createElement(o.BookmarkLink,{editor:e,line:t})),"bookmark-handle"))}}},1361:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.CollapseTracker=t.NOT_A_HEADING_LEVEL=void 0
;var o=n(1),i=n(811);t.NOT_A_HEADING_LEVEL=10;var r=function(e){o.__extends(n,e);function n(){return null!==e&&e.apply(this,arguments)||this}n.prototype.defaultLine1Input=function(){return{
headingLevel:t.NOT_A_HEADING_LEVEL,hasCollapsedAttrForMe:!1}};n.prototype.transition=function(e,t){return e.renderCollapsed&&e.collapsedHeadingLevel<t.headingLevel?{
collapsedHeadingLevel:e.collapsedHeadingLevel,startOfCollapseSection:!1,renderCollapsed:!0}:{collapsedHeadingLevel:t.headingLevel,startOfCollapseSection:t.hasCollapsedAttrForMe,
renderCollapsed:t.hasCollapsedAttrForMe}};n.prototype.outputsEqual=function(e,t){
return e&&t&&e.collapsedHeadingLevel==t.collapsedHeadingLevel&&e.renderCollapsed==t.renderCollapsed&&e.startOfCollapseSection==t.startOfCollapseSection};n.prototype.emptyLineOutput=function(){return{
collapsedHeadingLevel:t.NOT_A_HEADING_LEVEL,startOfCollapseSection:!1,renderCollapsed:!1}};return n}(i.default);t.CollapseTracker=r},1362:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0
});t.h2=t.h1=t.wrapper=void 0;n(1363);t.wrapper="_wrapper_1e0x5_1";t.h1="_h1_1e0x5_6";t.h2="_h2_1e0x5_7";t.default={wrapper:"_wrapper_1e0x5_1",h1:"_h1_1e0x5_6",h2:"_h2_1e0x5_7"}},
1363:function(e,t,n){},1364:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.insertCollapsableHandleIntoPocket=void 0;var o=n(3),i=n(590),r=n(146),a=n(0),s=n(1365),l=function(e){
var t=e.children,n=e.isSectionCollapsed,i=(e.headerType,e.lineEntry),r=o(s.default.wrapper,{"pocket-item-revealable":!n}),l={transform:"translateY(-".concat(i.lineNode.clientHeight,"px)")}
;return a.createElement("div",{className:r,style:l},t)};l.displayName="CollapsablePocketItem";l.displayName="CollapsablePocketItem";t.insertCollapsableHandleIntoPocket=function(e,t){var n;if((0,
r.isHeaderInRootZone)(t,e)&&function(e,t){var n="hone"===e.domInfo.listType,o="htwo"===e.domInfo.listType;return(n||o)&&t.hasFeature("collapsed-sections")}(t,e)){var d=(0,r.getLazyBackPocket)(e,t)
;if(d&&null==t.collapsibleSectionHandleRef){var c=t.domInfo.isCollapsedHeading(),u=t.domInfo.listType,h="hone"==u||"htwo"==u?u:void 0;t.collapsibleSectionHandleRef=d.put(a.createElement(l,{
isSectionCollapsed:c,headerType:h,lineEntry:t},a.createElement("div",{className:o(s.default.handle,(n={},n[s.default.collapsed]=c,n))},a.createElement(i.CollapsingHandle,{isSectionCollapsed:c,
editor:e,line:t}))),"collapsable-header-handle")}}}},1365:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.collapsed=t.handle=t.wrapper=void 0;n(1366);t.wrapper="_wrapper_1kd1t_1"
;t.handle="_handle_1kd1t_8";t.collapsed="_collapsed_1kd1t_12";t.default={wrapper:"_wrapper_1kd1t_1",handle:"_handle_1kd1t_8",collapsed:"_collapsed_1kd1t_12"}},1366:function(e,t,n){},
1367:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.insertCollapsableSectionHandleIntoPocket=void 0;var o=n(1368),i=n(590),r=n(146),a=n(0),s=n(31)
;t.insertCollapsableSectionHandleIntoPocket=function(e,t){if((0,r.isHeaderInRootZone)(t,e)){var n=function(e,t){var n="hone"===e.domInfo.listType,o="htwo"===e.domInfo.listType
;return(n||o)&&t.hasFeature("collapsed-sections")}(t,e),l=e.hasFeature("bookmark");if(n||l){var d=s.default.isOnButDoNotLog("paper_pocket_interstitial")?(0,r.getLazyPocket)(e,t):(0,
r.getPocket)(t.lineNode);if(d&&null==t.collapsibleSectionHandleRef){var c=t.domInfo.isCollapsedHeading();t.collapsibleSectionHandleRef=d.put(a.createElement(o.CollapsableSection,{isSectionCollapsed:c
},n&&a.createElement(i.CollapsingHandle,{isSectionCollapsed:c,editor:e,line:t}),l&&a.createElement(i.BookmarkLink,{editor:e,line:t})),"collapsable-header-handle")}}}}},1368:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.CollapsableSection=void 0;var o=n(3),i=n(0);t.CollapsableSection=function(e){
var t=e.children,n=e.isSectionCollapsed,r=o("collapsable-section-handle",{"collapsable-section-handle-collapsed":n});return i.createElement("div",{className:r},t)}
;t.CollapsableSection.displayName="CollapsableSection";t.CollapsableSection.displayName="CollapsableSection"},1369:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(351),a=n(10),s=n(3),l=n(544),d=n(8),c=n(2),u=n(4),h=n(430),p=n(68),f=n(69),g=n(28),m=n(157),v=n(7),y=n(20),b=n(0),C=n(15),E=n(4),I=n(16),_=n(224),T=n(5),S=n(813),k=(0,
T.PaperIntlFactory)(),x=k.F,w=k._f,P=(0,c.defineMessages)({placeholder:{id:"1/VQgS",defaultMessage:"Assign by name or email"},placeholderMore:{id:"P9aXml",defaultMessage:"Assign more by name or email"
},offlinePlaceholder:{id:"G1BXIk",defaultMessage:"You can’t assign tasks to people while offline"}}),A=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.contactsSelectorRef=null;t.state={removedUsers:[],isOffline:!1};t.handleNetworkStatusChange=function(){t.setState({isOffline:t.props.editor.options.stores.networkStatus.isOffline()})}
;t.handleAddUser=function(e,n){var o=(t.state.removedUsers||[]).filter((function(t){return e.secureUserId&&t!=e.secureUserId.substring(2)}));t.performEdit(e,n,o);t.setState({removedUsers:o})
;t.menuRef&&t.menuRef.close();e.inPad||t.inviteUserToPad(e,n)};t.handleRemoveUser=function(e){var n=i.uniq(t.state.removedUsers.concat([e.encryptedAccountId]));t.setState({removedUsers:n})}
;t.handleUndoRemovingUser=function(e){u.IntentionEvent.UndoRemoveTaskAssignee.track({context:t.getTrackContext()});var n=t.state.removedUsers.filter((function(t){return t!=e.encryptedAccountId}))
;t.setState({removedUsers:n})};t.handleMenuOpen=function(){u.IntentionEvent.OpenTaskAssigneePicker.track({context:t.getTrackContext()});t.props.onOpen&&t.props.onOpen();t.setState({isMenuOpen:!0})}
;t.handleMenuClose=function(){t.contactsSelectorRef&&t.contactsSelectorRef.clearInput();t.performEdit(null,null,t.state.removedUsers);t.setState({removedUsers:[],isMenuOpen:!1})
;t.props.onClose&&t.props.onClose()};return t}t.prototype.componentDidMount=function(){this.onboardingStore=this.onboardingStore||new m.default
;this.mentionUndoer=new h.default(this.props.editor,this.onboardingStore);this.props.editor.options.stores.networkStatus.addEventListener(this.handleNetworkStatusChange)
;this.handleNetworkStatusChange()};t.prototype.componentWillUnmount=function(){this.props.editor.options.stores.networkStatus.removeEventListener(this.handleNetworkStatusChange)}
;t.prototype.getTrackContext=function(){};t.prototype.inviteUserToPad=function(e,t){var n=i.fromPairs(t),o=e.name?e.name:e.email
;this.mentionUndoer.showUndoMentionToast(o,n.mentionurl,e.email,this.props.localPadId,this.props.editor.getPadType()==v.PadType.space,_.MentionToastType.Task)};t.prototype.performEdit=function(e,t,n){
if(e||0!=n.length){n.length>0&&u.IntentionEvent.RemoveTaskAssignee.track({numUsers:n.length,numRemainingMentions:this.props.line.mentions.length,isReassigning:!!e,context:this.getTrackContext()})
;e&&u.IntentionEvent.ChangeTaskAssignee.track({numMentions:this.props.line.mentions.length,isReassigning:n.length>0,isMe:e.secureUserId==d.default.secureUserId,context:this.getTrackContext()})
;this.props.onSave(e,n,t)}};t.prototype.isVisible=function(){return!!this.props.line.mentions.length||!g.isNativeMobileApp()&&!this.props.readOnly&&!!this.state.isMenuOpen}
;t.prototype.isRevealable=function(){return!this.isVisible()&&!this.props.readOnly&&!g.isNativeMobileApp()};t.prototype.render=function(){
var e,t,n,i,c,u=this,h=!!this.props.line.mentions.length,g=s(S.default.control,((e={notranslate:!this.props.readOnly})[S.default.floatAbove]=!!this.state.isMenuOpen,
e[S.default.spaceOut]=!!h||(null===(n=this.props.line)||void 0===n?void 0:n.lineZone)==y.Position.ROOT_ZONE,e[S.default.alwaysVisible]=h,e[S.default.visible]=this.isVisible(),
e["pocket-item-revealable"]=this.isRevealable(),e)),m=s(S.default.button,((t={})[S.default.active]=!!this.state.isMenuOpen,t[S.default.completed]=this.props.line.isComplete,
t)),v=h?b.createElement(r.AssignedUsersPile,{mentions:this.props.line.mentions,isCompleteTask:this.props.line.isComplete,withBorder:!0}):null
;if(this.props.readOnly)return d.default.isSignedIn()?b.createElement("div",{className:S.default.button},v):null
;var E=this.state.isOffline&&!!(null===(c=null===(i=this.props.editor)||void 0===i?void 0:i.padController)||void 0===c?void 0:c.allowSavePadClientVars()),_=E?P.offlinePlaceholder:h?P.placeholderMore:P.placeholder,T=w(_),k=this.props.line&&!!this.props.line.lineZone&&this.props.line.lineZone!=y.Position.ROOT_ZONE
;return b.createElement(f.default,{disableAutoCloseOnScroll:!k,className:g,ref:function(e){return u.menuRef=e},onOpen:this.handleMenuOpen,onClose:this.handleMenuClose,portalize:k,
portalClassName:"portalized-assign-menu"},b.createElement(a.default,{className:m,tooltip:b.createElement(x,o.__assign({},_)),tooltipAbove:!0,"track-title":"assign-task","aria-label":T,disabled:E,
showTooltipWhenDisabled:!0},v||b.createElement(I.UIIcon,{src:C.ShareLine})),b.createElement(p.default,{noPadding:!0,className:s({notranslate:k})},b.createElement(l.default,{ref:function(e){
return u.contactsSelectorRef=e},mentions:this.props.line.mentions,onAddUser:this.handleAddUser,onRemoveUser:this.handleRemoveUser,onUndoRemovingUser:this.handleUndoRemovingUser,
removedUsers:this.state.removedUsers,localPadId:this.props.localPadId})))};t.displayName="AssignTaskButtonV2";return t=o.__decorate([E.trackContextDecorator],t)}(b.PureComponent);t.default=A},
1370:function(e,t,n){},1371:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.DueDateCalendar=void 0
;var o=n(1),i=n(163),r=n(520),a=n(299),s=n(2),l=n(142),d=n(1372),c=n(1373),u=n(0),h=(0,n(5).PaperIntlFactory)().F,p=(0,s.defineMessages)({previousMonth:{id:"pmNXET",defaultMessage:"Previous"},
nextMonth:{id:"Cseg08",defaultMessage:"Next"}}),f=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.jumpToCurrentMonth=function(){
var e=l.toDateObject(l.today(),(new Date).getTimezoneOffset());t.dayPicker.showMonth(e)};return t}t.prototype.render=function(){var e=this,t=null;t=this.props.dueDate?u.createElement(d.DueDateRow,{
date:this.props.dueDate,onClick:this.props.removeDueDate}):u.createElement(c.GuessedDueDateSuggestions,{setDueDate:this.props.setDueDate,line:this.props.line});return u.createElement("div",{
className:"duedatecalendar-dig"},t,u.createElement(r.DatePicker,{isBlock:!0,onSelection:function(t){t.selectedDate&&e.props.setDueDate(null,t.selectedDate)},selectedDate:this.props.dueDate?(0,
i.convertFromYYYYMMDD)(this.props.dueDate):void 0,monthLabelFormat:a.default.localeUtils.formatMonthTitleString,weekdayLabelFormat:a.default.localeUtils.formatWeekdayLetterString,
withPreviousLabel:u.createElement(h,o.__assign({},p.previousMonth)),withNextLabel:u.createElement(h,o.__assign({},p.nextMonth))}))};t.displayName="DueDateCalendar";return t}(u.Component)
;t.DueDateCalendar=f},1372:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.DueDateRow=void 0;var o=n(1),i=n(10),r=n(15),a=n(2),s=n(450),l=n(0),d=n(13),c=n(16),u=(0,
n(5).PaperIntlFactory)().F,h=(0,a.defineMessages)({dueDate:{id:"E8s5qp",defaultMessage:"Due {date}"}});t.DueDateRow=function(e){var t=e.date,n=e.onClick,a=l.createElement("span",{
className:"ace-line-task-controls-small-date"},(0,s.formatDate)(t,!1));return l.createElement("div",{className:"ace-line-task-controls-current-due-date"},l.createElement(c.UIIcon,{src:r.CalendarLine
}),l.createElement(u,o.__assign({},h.dueDate,{values:{date:a}})),l.createElement(i.default,{styleless:!0,onClick:n},l.createElement(d.default,{name:"task-x"})))}},1373:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.GuessedDueDateSuggestions=void 0;var o=n(142),i=n(1374),r=n(4),a=n(0);t.GuessedDueDateSuggestions=function(e){var t=e.setDueDate,n=e.line
;if(!n||!n.guessedDueDates)return null;var s=function(e,n){r.IntentionEvent.ClickDueDateSuggestion.track({date:n,isGuessedDate:!0});t(e,n)};return a.createElement("div",{
className:"ace-line-task-controls-suggestions"},n.guessedDueDates.map((function(e,t){var n="dueDateSuggestion".concat(t),r=o.toDateString(e.date);return a.createElement(i.DueDateSuggestion,{key:n,
onClick:s,date:r})})))};t.GuessedDueDateSuggestions.displayName="GuessedDueDateSuggestions"},1374:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.DueDateSuggestion=void 0
;var o=n(10),i=n(15),r=n(3),a=n(142),s=n(450),l=n(5),d=n(0),c=n(16),u=(0,l.PaperIntlFactory)().FormattedDate;t.DueDateSuggestion=function(e){
var t=e.date,n=e.onClick,l=e.withSeparator,h=r("ace-line-task-controls-suggestion",{"ace-line-task-controls-suggestion-separator":l}),p=(new Date).getTimezoneOffset(),f=null
;t!=a.tomorrow()&&(f=d.createElement("span",{className:"ace-line-task-controls-suggestion-date"},d.createElement(u,{value:a.toDateObject(t,p),month:"numeric",day:"numeric"})))
;return d.createElement(o.default,{className:h,styleless:!0,onClick:function(e){return n(e,a.toDateObject(t,p))}},d.createElement(c.UIIcon,{src:i.CalendarLine}),d.createElement("span",{
className:"ace-line-task-controls-suggestion-fancy-date"},(0,s.formatDate)(t,!0)),f)};t.DueDateSuggestion.displayName="DueDateSuggestion"},1375:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});t.visible=t.alwaysVisible=t.active=t.completed=t.overdue=t.today=t.button=t.floatAbove=t.spaceOut=t.control=void 0;n(1376);t.control="_control_xxt4p_1";t.spaceOut="_spaceOut_xxt4p_6"
;t.floatAbove="_floatAbove_xxt4p_11";t.button="_button_xxt4p_16";t.today="_today_xxt4p_26";t.overdue="_overdue_xxt4p_30";t.completed="_completed_xxt4p_34";t.active="_active_xxt4p_38"
;t.alwaysVisible="_alwaysVisible_xxt4p_43";t.visible="_visible_xxt4p_50";t.default={control:"_control_xxt4p_1",spaceOut:"_spaceOut_xxt4p_6",floatAbove:"_floatAbove_xxt4p_11",button:"_button_xxt4p_16",
today:"_today_xxt4p_26",overdue:"_overdue_xxt4p_30",completed:"_completed_xxt4p_34",active:"_active_xxt4p_38",alwaysVisible:"_alwaysVisible_xxt4p_43",visible:"_visible_xxt4p_50"}},
1376:function(e,t,n){},1377:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.indent8=t.indent7=t.indent6=t.indent5=t.indent4=t.indent3=t.indent2=t.hasContent=t.inTable=t.rtl=t.ltr=t.controls=void 0;n(1378);t.controls="_controls_2hvqv_1";t.ltr="_ltr_2hvqv_9"
;t.rtl="_rtl_2hvqv_13";t.inTable="_inTable_2hvqv_17";t.hasContent="_hasContent_2hvqv_17";t.indent2="_indent2_2hvqv_33";t.indent3="_indent3_2hvqv_36";t.indent4="_indent4_2hvqv_39"
;t.indent5="_indent5_2hvqv_42";t.indent6="_indent6_2hvqv_45";t.indent7="_indent7_2hvqv_48";t.indent8="_indent8_2hvqv_51";t.default={controls:"_controls_2hvqv_1",ltr:"_ltr_2hvqv_9",rtl:"_rtl_2hvqv_13",
inTable:"_inTable_2hvqv_17",hasContent:"_hasContent_2hvqv_17",indent2:"_indent2_2hvqv_33",indent3:"_indent3_2hvqv_36",indent4:"_indent4_2hvqv_39",indent5:"_indent5_2hvqv_42",
indent6:"_indent6_2hvqv_45",indent7:"_indent7_2hvqv_48",indent8:"_indent8_2hvqv_51"}},1378:function(e,t,n){},1379:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.optimizedNodeReplacement=t.optimizedLineReplacement=void 0;var o=n(6);t.optimizedLineReplacement=function(e,t){return!e.lineManagerType&&!e.anyInlineMagicObj&&i(e.node,t)};function i(e,t){
if(r(e)&&r(t)){if(e.tagName!==t.tagName)return!1;if(e.classList.contains("ace-line-pocket"))return!1;for(var n=0,l=s(t);n<l.length;n++){var d=l[n];null===e.getAttribute(d)&&t.removeAttribute(d)}
for(var c=0,u=s(e);c<u.length;c++){d=u[c];var h=e.getAttribute(d);h!==t.getAttribute(d)&&t.setAttribute(d,h)}if(e.childNodes.length===t.childNodes.length){
for(var p=0;p<e.childNodes.length;p++)if(!i(e.childNodes[p],t.childNodes[p])){var f=t.childNodes[p];t.insertBefore(e.childNodes[p].cloneNode(!0),f);t.removeChild(f)}}else{
var g=document.createDocumentFragment();o.forEach(e.childNodes,(function(e){return g.appendChild(e.cloneNode(!0))}));for(;t.childNodes.length;)t.removeChild(t.firstChild);t.appendChild(g)}return!0}
if(a(e)&&a(t)){e.nodeValue!==t.nodeValue&&(t.nodeValue=e.nodeValue);return!0}return!1}t.optimizedNodeReplacement=i;function r(e){return e.nodeType===Node.ELEMENT_NODE}function a(e){
return e.nodeType===Node.TEXT_NODE}function s(e){return o.map(e.attributes,"name")}},138:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.LazyRenderForServer=t.LazyRenderForServerMixin=void 0;var o=n(1),i=n(0),r=!(clientVars&&clientVars.wasServerRendered);function a(e){
var t=e.prototype.componentDidMount,n=e.prototype.componentWillMount;e.prototype.componentWillMount=function(){this.setState({renderHiddenThings:r});n&&"function"==typeof n&&n.apply(this)}
;e.prototype.componentDidMount=function(){r=!0;this.state&&this.state.renderHiddenThings||this.setState({renderHiddenThings:r});t&&"function"==typeof t&&t.apply(this)}}t.default=a
;t.LazyRenderForServerMixin={componentWillMount:function(){this.setState({renderHiddenThings:r})},componentDidMount:function(){r=!0;this.state&&this.state.renderHiddenThings||this.setState({
renderHiddenThings:r})}};var s=function(e){o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
return this.state.renderHiddenThings?this.props.children:null};t.displayName="LazyRenderForServer";return t=o.__decorate([a],t)}(i.Component);t.LazyRenderForServer=s},1380:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.editorRenderingOneLineHand=void 0;var o=n(6),i=n(22),r=n(64);t.editorRenderingOneLineHand=function(e,t,n,o,i,s){
return new r.AtextHandImpl(n,new a(e,t,s,o,i),s)};var a=function(){function e(e,t,n,o,i){this.reps=e;this.vectorReps=t;this.zoneId=n;this.textline_=o;this.aline_=i;this.zatext_=null}
Object.defineProperty(e.prototype,"zatext",{get:function(){this.zatext_||(this.zatext_=function(e,t){var n={text:{},rows:{},cols:{},attribs:{}};o.forEach(e,(function(e,t){n.text[t]=e.alltext
;n.attribs[t]=i.joinAttributionLines(e.alines)}));o.forEach(t,(function(e,o){if(e.vectorIds.length){var i=e.forRow?"rows":"cols";n[i][o]=t[o].vectorIds;n.attribs[o]=e.alines[0]}}));return n
}(this.reps,this.vectorReps));return this.zatext_},enumerable:!1,configurable:!0});e.prototype.text=function(e){if(e==this.zoneId)return this.textline_+"\n";var t=this.reps[e];return t?t.alltext:"\n"}
;e.prototype.attribs=function(e){return this.zatext.attribs[e]};e.prototype.alines=function(e){var t=this.reps[e];return t?t.alines:["|1+1"]};e.prototype.textlines=function(e){var t=this.reps[e]
;return t?t.alltext.split("\n"):[]};e.prototype.aline=function(e,t){if(e==this.zoneId)return this.aline_;var n=this.reps[e];return(n?n.alines:["|1+1"])[t]};e.prototype.textline=function(e,t){
if(e==this.zoneId)return this.textline_+"\n";var n=this.reps[e];if(n)return n.lines.atIndex(t).text+"\n";if(0==t)return"\n";throw new Error("line number "+t+" out of range")}
;e.prototype.rowOrColAttribs=function(e,t){var n=this.vectorReps[t];return n?n.alines[0]:""};e.prototype.rowOrColIds=function(e,t){var n=this.vectorReps[t];return n?n.vectorIds:[]};return e}()},
1381:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.updateContentTypeForReactInstance=void 0;var o=n(1),i=n(100),r=n(50),a=n(24);t.updateContentTypeForReactInstance=function(e){
var t=e.ref,n=e.contentTypeRegistry,r=e.editor,l=e.callback,d=e.flags,c=o.__assign({isUndoable:!0},d).isUndoable;s(r,(function(){r.execute("update-content-type",(function(){var e=function(e,t){
var n=null;e.execute("find-position-for-react-instance",(function(){var o=a.findDOMNode(t);e.dom.getAceLineForNode(o)&&(n=e.selection.getPositionForNode(o))}));return n}(r,t);if(e){
var o=n.findContentType(r,e),s=n.getClassById(o.id)
;if(!s)throw new Error('No ComponentRegistryProvider defined for identifier: "'.concat(o.id,'",\n        register it in content_type_component_registry_instance.tsx'));var d=l(o.data,(function(e){
return n.createZoneId(s,e)})),u=new s(d),h=function(){n.updateContentType(r,u,{start:e,end:e.translate({col:1})})};c?h():r.callStack.makeNewNonundoableEvent(h)}else(0,
i.freakout)("ContentType received an assignZonesToContentType call for: ".concat(t,"        but an associated line could not be found in the editor"))}))}))};function s(e,t){var n=function(){
if(!e.isDisposed()&&e.contents.getIsEditable()){e.observer.off("editable-state-changed",n);Promise.resolve().then((function(){e.isDisposed()||(e.contents.getIsEditable()?t():s(e,t))
})).catch(r.logException)}};e.contents.getIsEditable()?n():e.observer.on("editable-state-changed",n)}},1382:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(22),r=n(226),a=n(81),s=n(20),l=function(){function e(e,t,n){if(e.zone!=t.zone)throw new Error("mismatched zones");this.leafZone=e.zone;this.startChar=(0,r.docCharFromPosition)(n,e)
;this.endChar=(0,r.docCharFromPosition)(n,t);var o=n.selection.internalPositionAncestry(n.selection.getStart());this.tower=[];for(var i=1;i<o.length;i++){var a=o[i];this.tower.push({zone:a.zone,
totalPos:(0,r.docCharFromPosition)(n,a)})}if(e.zone!=s.Position.ROOT_ZONE&&this.tower[this.tower.length-1].zone!=s.Position.ROOT_ZONE)throw new Error("bad tower")}
e.prototype.applyChangeset=function(e,t){var n=i.characterRangeFollow(e,this.leafZone,this.startChar,this.endChar,t);this.startChar=n[0];this.endChar=n[1];this.tower.forEach((function(n){
n.totalPos=i.characterRangeFollow(e,n.zone,n.totalPos,n.totalPos,t)[0]}))};e.prototype.getRange=function(e){if(this.leafZone==s.Position.ROOT_ZONE||e.managers.isZoneRegistered(this.leafZone))return{
start:(0,r.positionFromDocChar)(e,this.leafZone,this.startChar),end:(0,r.positionFromDocChar)(e,this.leafZone,this.endChar)};for(var t=0;t<this.tower.length;t++){var n=this.tower[t]
;if(n.zone==s.Position.ROOT_ZONE||e.managers.isZoneRegistered(n.zone)){var o=(0,r.positionFromDocChar)(e,n.zone,n.totalPos);return{start:o,end:o}}}
throw new Error("CaretRangeTower.getRange: Should never get here")};return e=o.__decorate([a.nullifyProperties],e)}();t.default=l},1383:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.computeIncorpLineSplice=void 0;var o=n(6),i=n(220),r=n(22),a=n(219),s=n(133);t.computeIncorpLineSplice=function(e,t,n,i,s,c,u,h,p){
if(c.length!=u.length)throw new Error("new line entries and line attribs must match");var f=e.lines.slice(i,i+s),g=i>0,m=i+s==e.lines.length()
;if(m&&!g&&(0==s||0==c.length))throw new Error("If excludeLastNewline is true, and includeLastNewline is false, then it must be true that the old entries and the new entries are both non-empty. Why? Because if one of them is empty and there is no previous newline added, then there is no newline at all to exclude.")
;var v=l(t,o.map(f,"text"),e.alines.slice(i,i+s),g,m),y=l(t,o.map(c,"text"),u,g,m),b=function(e,t){for(var n={},o=0;o<t.length;o++)t[o].magicObjectId&&(n[t[o].magicObjectId]=o);var i=[],r=0
;for(o=0;o<e.length;o++)if(e[o].magicObjectId){var a=n[e[o].magicObjectId];if(a&&a>=r){i.push({srcIndex:o,dstIndex:a});r=a+1}}return i
}(v,y),C=r.builder(e.alltext.length,"Z",n),E=e.lines.offsetOfIndex(i)+(g?-1:0),I=e.lines.indexOfOffset(E),_=e.lines.offsetOfIndex(I);C.keep(_,I);C.keep(E-_);var T=null
;h&&h.selEnd&&h.selEnd.zone===n&&(T=e.lines.offsetOfIndex(h.selEnd.line)+h.selEnd.col);for(var S=E,k=0;k<=b.length;k++){
for(var x=0==k?0:b[k-1].srcIndex+1,w=0==k?0:b[k-1].dstIndex+1,P=k==b.length?v.length:b[k].srcIndex,A=k==b.length?y.length:b[k].dstIndex,O="",L=x;L<P;L++)O+=v[L].text;var N=""
;for(L=w;L<A;L++)N+=y[L].text;h&&(h.isStructZone=(0,a.isValidStructNodeId)(n));d(v.slice(x,P),y.slice(w,A),S,T,h,O,N,C,t,p);v.forEach((function(e){S+=e.text.length}));if(k<b.length){
if("*"!=v[P].text)throw new Error("magic object should be a *, for realz");C.keep(1);S+=1}}return C.toChangeset()};function l(e,t,n,o,i){var a=[];o&&a.push({magicObjectId:null,text:"\n",attribs:{}})
;for(var s=0;s<t.length;s++){for(var l=0,d=t[s]+"\n",c=r.opIterator(n[s]),u=function(){var t=c.next(),n={};r.eachAttribNumber(t.attribs,(function(t){var o=e.getAttrib(t);n[o[0]]=o[1]}))
;if(n.magicObject)for(var o=0;o<t.chars;o++){a.push({magicObjectId:n["clientside-magicObjectId"]||"-1",attribs:n,text:d.substring(l,l+1)});l++}else if(t.chars>t.lines){a.push({magicObjectId:null,
attribs:n,text:d.substring(l,l+t.chars-t.lines)});l+=t.chars-t.lines}};c.hasNext();)u();a.push({magicObjectId:null,attribs:{},text:"\n"})}if(i){
if("\n"!=a[a.length-1].text)throw new Error("res should have ended in a newline");a.length--}return a}function d(e,t,n,r,a,l,d,p,f,g){var m=function(e,t,n,o,i,r,a,l){
var d=h(e,t,!0,l),c=h(e,t,!1,l),u=r.length,p=a.length,f="number"==typeof o?n+p-o:-1;if(d+c>u){var g=c;d=u-(c=f>=(m=u-d)&&f<=g?f:m)}if(d+c>p){var m;g=c;d=p-(c=f>=(m=p-d)&&f<=g?f:m)}
d=s.moveCommonStartToVisualUnicodeBoundary(d,r,a);c=s.moveCommonEndToVisualUnicodeBoundary(c,r,a);return{commonStart:d,commonEnd:c}}(e,t,n,r,0,l,d,g),v=m.commonStart,y=m.commonEnd
;p.keepText(l.substring(0,v));var b=u(e,v,l.length-y),C=u(t,v,d.length-y),E=l.substring(v,l.length-y);l===d?function(e,t,n,r,a,s){for(var l=function(e,t){var n=[],o=0,i=0,r=0,a=0;for(;o<e.length;){
var s=e[o].text.length-r,l=t[i].text.length-a,d=Math.min(s,l);n.push({range1:{magicObjectId:e[o].magicObjectId,attribs:e[o].attribs,text:e[o].text.substring(r,r+d)},range2:{
magicObjectId:t[i].magicObjectId,attribs:t[i].attribs,text:t[i].text.substring(a,a+d)}});if(s===d){o++;r=0}else r+=d;if(l===d){i++;a=0}else a+=d}return n}(e,t),d=0;d<l.length;d++){
var u=l[d].range1,h=l[d].range2,p=[];for(var f in u.attribs){var g=u.attribs[f],m=h.attribs[f]||"";m!==g&&p.push([f,m])}for(var f in h.attribs)f in u.attribs||p.push([f,h.attribs[f]])
;if(u.magicObjectId===h.magicObjectId&&o.every(p,(function(e){return"author"==e[0]||i.incorpApplyableFilter(e[0])}))){p=p.filter((function(e){return"author"!=e[0]}));a.keepText(h.text,p,r)
}else c([u],[h],u.text,r,a,s)}}(b,C,0,f,p,a):c(b,C,E,f,p,a);p.keepText(l.substring(l.length-y,l.length))}function c(e,t,n,o,i,r){var a=r&&r.preserveAuthorship,s=r&&r.thisAuthor,l=r&&r.isStructZone
;i.removeText(n);for(var d=0;d<t.length;d++){var c=[];for(var u in t[d].attribs)"author"!=u&&c.push([u,t[d].attribs[u]]);if(!l){var h=t[d].attribs.author
;a?h?c.push(["author",h]):s&&c.push(["author",s]):s?c.push(["author",s]):h&&c.push(["author",h])}i.insert(t[d].text,c,o)}}function u(e,t,n){for(var o=[],i=0,r=0;r<e.length&&!(i>=n);r++){
var a=e[r].text.length;if(i+a>t){i<t?o.push({magicObjectId:e[r].magicObjectId,text:e[r].text.substring(t-i,e[r].text.length),attribs:e[r].attribs}):o.push(e[r]);if(i+a>n){var s=o[o.length-1]
;o[o.length-1]={magicObjectId:s.magicObjectId,text:s.text.substring(0,s.text.length-(i+a-n)),attribs:s.attribs}}}i+=a}return o}function h(e,t,n,o){for(var i=0,r=0,a=0,s=0,l=0;r<e.length&&s<t.length;){
var d=e[n?r:e.length-1-r],c=t[n?s:t.length-1-s];if("\n"!=d.text||"\n"!=c.text){if(!p(d.attribs,c.attribs,o)||d.magicObjectId!==c.magicObjectId)break;for(var u=!1;a<d.text.length&&l<c.text.length;){
if(d.text.charCodeAt(n?a:d.text.length-1-a)!==c.text.charCodeAt(n?l:c.text.length-1-l)){u=!0;break}a++;l++;i++}if(u)break;if(a===d.text.length){r++;a=0}if(l===c.text.length){s++;l=0}}else{r++;s++;i++}
}return i}function p(e,t,n){for(var o in e)if(e[o]!==(t[o]||"")&&i.incorpedAttribFilter(o,n))return!1;for(var o in t)if(!(o in e)&&i.incorpedAttribFilter(o,n))return!1;return!0}},1384:function(e,t,n){
var o;Object.defineProperty(t,"__esModule",{value:!0})
;var i,r=n(1),a=n(533),s=n(58),l=n(226),d=n(155),c=n(245),u=n(22),h=n(146),p=n(178),f=n(42),g=n(432),m=n(192),v=n(20),y=n(449),b=n(242),C=n(1385),E=n(1386),I=n(420),_=n(568),T=n(125),S=n(269),k=n(350),x=n(51),w=n(63),P=n(6),A=n(75),O=n(119),L=n(81),N=n(28),M=n(189),R=n(4),D=n(133),F=n(17),z=n(86),U=n(43),H=n(61),B=n(44),Z=f.REGEX_AUTOCOMPLETE_AFTER,j=new RegExp("^[\\s\\uFEFF\\xA0]{1,3}","g")
;!function(e){e.MENTION="@";e.DOCUMENT="+";e.EMOJI=":"}(i||(i={}));var W=P.invert(i),V=((o={})[U.KeyCode.SHIFT]=!0,o[U.KeyCode.CTRL]=!0,o[U.KeyCode.ALT]=!0,o[U.KeyCode.CAPS_LOCK]=!0,
o[U.KeyCode.COMMAND]=!0,o[U.KeyCode.RIGHT_META]=!0,o[U.KeyCode.OTHER_RIGHT_META]=!0,o[U.KeyCode.META]=!0,o);function K(e){var t=[];e.metaKey&&t.push(H.default.mac?"accel":"meta")
;e.ctrlKey&&t.push(H.default.mac?"ctrl":"accel");e.altKey&&t.push("alt");e.shiftKey&&t.push("shift");var n=(0,A.keyCodeToChar)(e.which).replace("|","\\");t.push(n);return t.join("-")}
var G=A.EmacsHotkeys.ForwardDeleteOneCharacter,q=A.EmacsHotkeys.ForwardOneCharacter,Y=A.EmacsHotkeys.JumpToBeginningOfLine,X=A.EmacsHotkeys.JumpToEndOfLine,J=A.EmacsHotkeys.KillToEndOfLine,Q=A.EmacsHotkeys.SelectToBeginningOfLine,$=A.EmacsHotkeys.SelectToEndOfLine,ee="  ",te={
"“":'"',"”":'"',"‘":"'","’":"'","—":"--"},ne=function(){function e(e){var t=e.editor,n=e.keyPerfMonitor,o=e.contentTypeRegistry,i=this;this.thisKeyDoesntTriggerNormalize=!1;this.shiftKeyPressed=!1
;this.keyEvents=new O.Dispatcher;this.ignoreNextSpaceFromDate=null;this.defaultEnterBehavior=!H.default.gecko;this.dispose=(0,L.wrapCallOnce)((function(){if(i.keyEvents){i.keyEvents.dispose()
;i.keyEvents=null}i.unbindEvents();i.editor=null}));this.previousKeyPressCharCodes=[];this.onKeyEvent=function(e){if(e.defaultPrevented)return!1;i.trackKeyLatency(e);return i.onKeyEvent_(e)}
;this.onCompositionEvent=function(e){var t=i.editor.padController&&i.editor.padController.collabClient;if("compositionstart"==e.type){(0,M.doOncePerFetchPage)("trackimecomposition",(function(){
R.IntentionEvent.StartIMEComposition.track()}));i.editor.core.setIMEStatus(!0);if(t){(0,R.trackEng)("IME collab pause",{
hasUncommittedChanges:i.editor.padController.collabClient.hasUncommittedChanges()});i.imePauseStart=Date.now();i.editor.padController.collabClient.socket.pause("IME pause")}
}else if("compositionend"==e.type){if(t){(0,R.trackEng)("IME collab unpause",{pauseTimeMS:Date.now()-i.imePauseStart});i.editor.padController.collabClient.socket.unpause("IME unpause")}
i.editor.core.setIMEStatus(!1);i.performMacrosForCompositionEvent(e)}};this.onDocKeyUpEvent=function(e){e.shiftKey||(i.shiftKeyPressed=!1)};this.onMouseEvent=function(e){
e.shiftKey||(i.shiftKeyPressed=!1)};this.didIncorpSinceLastUndo=!0;this.handleKeydown=function(e){i.onKeyEvent(e)||i.editor.media.onKeydown(e)};this.editor=t;this.keyPerfMonitor=n
;this.contentTypeRegistry=o;this.keyEvents.define(A.FormattingHotkeys.Highlight,this.wrapKeyEventCallback((function(){
var e=void 0!==t.contents.getFormattedAttributesForSelection().highlight,n=z.TextHighlightColors.getLastUsedColor()||z.TextHighlightColors.getDefaultColorForEditor(t)
;t.contents.toggleAttributeOnSelection("highlight",{attributeValue:z.TextHighlightColors.getAttributeForHighlight(n),allowedAttributeValues:["true"].concat(z.TextHighlightColors.colors)});var o=(0,
x.isCellId)(t.selection.getStart().zone)?R.EditorContext.Table.KeyboardShortcut:R.EditorContext.KeyboardShortcut;R.IntentionEvent.FormatText.track({type:"highlight",context:o,color:e?null:n})})))
;this.keyEvents.define(A.EditingHotkeys.Undo,this.wrapKeyEventCallback((function(){t.contents.undo()})));this.keyEvents.define(A.EditingHotkeys.Redo,this.wrapKeyEventCallback((function(){
t.contents.redo()})));if(t.hasFeature("comments-ui-non-lightbox")){this.keyEvents.define(A.EditingHotkeys.AddComment,this.commentKeyEventCallback(!1))
;w.isOnButDoNotLog("paper_suggested_changes")&&this.keyEvents.define(A.EditingHotkeys.SuggestChanges,this.commentKeyEventCallback(!0))}
this.keyEvents.define(A.FormattingHotkeys.RemoveFormatting,this.wrapKeyEventCallback((function(e){t.contents.removeFormatOnSelection();R.IntentionEvent.FormatText.track({type:"removeFormat",key:K(e),
context:R.EditorContext.KeyboardShortcut})})));this.keyEvents.define(A.FormattingHotkeys.Bold,this.wrapKeyEventCallback((function(e){t.contents.toggleAttributeOnSelection("bold")
;R.IntentionEvent.FormatText.track({type:"bold",key:K(e),context:R.EditorContext.KeyboardShortcut})})));this.keyEvents.define(A.FormattingHotkeys.Italics,this.wrapKeyEventCallback((function(e){
t.contents.toggleAttributeOnSelection("italic");R.IntentionEvent.FormatText.track({type:"italic",key:K(e),context:R.EditorContext.KeyboardShortcut})})))
;this.keyEvents.define(A.FormattingHotkeys.Underline,this.wrapKeyEventCallback((function(e){t.contents.toggleAttributeOnSelection("underline");R.IntentionEvent.FormatText.track({type:"underline",
key:K(e),context:R.EditorContext.KeyboardShortcut})})));this.keyEvents.define(A.FormattingHotkeys.Strikethrough,this.wrapKeyEventCallback((function(e){
t.contents.toggleAttributeOnSelection("strikethrough");R.IntentionEvent.FormatText.track({type:"strikethrough",key:K(e),context:R.EditorContext.KeyboardShortcut})})));if(t.hasFeature("headers")){
this.keyEvents.define(A.BlockFormattingHotkeys.HeadingOne,this.wrapKeyEventCallback((function(e){if(t.hasFeatureForSelectedRep("headers")){t.lists.doSetHeadingLevel(1)
;R.IntentionEvent.FormatText.track({type:"h1",key:K(e),context:R.EditorContext.KeyboardShortcut})}})));this.keyEvents.define(A.BlockFormattingHotkeys.HeadingTwo,this.wrapKeyEventCallback((function(e){
if(t.hasFeatureForSelectedRep("headers")){t.lists.doSetHeadingLevel(2);R.IntentionEvent.FormatText.track({type:"h2",key:K(e),context:R.EditorContext.KeyboardShortcut})}})))
;this.keyEvents.define(A.BlockFormattingHotkeys.HeadingThree,this.wrapKeyEventCallback((function(e){if(t.hasFeatureForSelectedRep("headers")){t.lists.doSetHeadingLevel(3)
;R.IntentionEvent.FormatText.track({type:"h3",key:K(e),context:R.EditorContext.KeyboardShortcut})}})))}
t.hasFeature("numbered")&&this.keyEvents.define(A.BlockFormattingHotkeys.NumberedList,this.wrapKeyEventCallback((function(e){if(t.hasFeatureForSelectedRep("numbered")){t.lists.doInsertOrderedList()
;R.IntentionEvent.CreateList.track({type:"numbered list",key:K(e),context:R.EditorContext.KeyboardShortcut})}})))
;t.hasFeature("bulleted")&&this.keyEvents.define(A.BlockFormattingHotkeys.BulletedList,this.wrapKeyEventCallback((function(e){if(t.hasFeatureForSelectedRep("bulleted")){t.lists.doInsertUnorderedList()
;R.IntentionEvent.CreateList.track({type:"bulleted list",key:K(e),context:R.EditorContext.KeyboardShortcut})}})))
;t.hasFeature("tasks")&&this.keyEvents.define(A.BlockFormattingHotkeys.Checklist,this.wrapKeyEventCallback((function(e){if(t.hasFeatureForSelectedRep("tasks")){t.lists.doInsertTaskList();var n=(0,
x.isCellId)(t.selection.getStart().zone)?R.EditorContext.Table.KeyboardShortcut:R.EditorContext.KeyboardShortcut;R.IntentionEvent.CreateTask.track({type:"todo",key:K(e),context:n})}})))
;t.hasFeature("quotes")&&this.keyEvents.define(A.BlockFormattingHotkeys.Blockquote,this.wrapKeyEventCallback((function(e){if(t.hasFeatureForSelectedRep("quotes")){t.lists.doInsertQuote()
;R.IntentionEvent.FormatText.track({type:"quote",key:K(e),context:R.EditorContext.KeyboardShortcut})}})))
;t.hasFeature("code")&&this.keyEvents.define(A.BlockFormattingHotkeys.CodeBlock,this.wrapKeyEventCallback((function(){if(t.hasFeatureForSelectedRep("code")){
var e=t.getSelectedRep(),n=t.selection.getStart(),o=t.selection.getEnd(),i=t.selection.get().isReversed,r=e.lines.atIndex(n.line),a=e.lines.atIndex(o.line)
;if(t.selection.isCollapsed())t.lists.doInsertCodeList();else if(n)if(n.line!=o.line){var s=n.col==r.text.length,l=o.col<=a.lineMarker;if(s){
n=new v.Position(n.zone,n.line+1,e.lines.atIndex(n.line+1).lineMarker);r=e.lines.atIndex(n.line)}if(l){o=new v.Position(o.zone,o.line-1,e.lines.atIndex(o.line-1).text.length);a=e.lines.atIndex(o.line)
}t.selection.set({start:n,end:o,isReversed:i})
;n.line==o.line?n.col<=r.lineMarker&&o.col==r.text.length?t.lists.doInsertCodeList():t.contents.toggleAttributeOnSelection("inline-code"):t.lists.doInsertCodeList()
}else n.col<=r.lineMarker&&o.col==r.text.length?t.lists.doInsertCodeList():t.contents.toggleAttributeOnSelection("inline-code")}})));this.keyEvents.define(A.SelectionHotkeys.SelectAll,(function(e){
t.selection.getStart().zone==v.Position.ROOT_ZONE&&(0,y.handleSelectAllCommand)(t,e);return!1}));this.keyEvents.define(A.SelectionHotkeys.StartOfDoc,(function(e){if(t.execute("cmdUp",(function(){
return i.doMetaArrowKey(U.KeyCode.UP)}))){t.getViewport().scrollSelectionIntoView();e.preventDefault()}}));this.keyEvents.define(A.SelectionHotkeys.EndOfDoc,(function(e){
if(t.execute("cmdDown",(function(){return i.doMetaArrowKey(U.KeyCode.DOWN)}))){t.getViewport().scrollSelectionIntoView();e.preventDefault()}}))
;this.keyEvents.define(A.SelectionHotkeys.EndOfLine,(function(e){if(t.execute("cmdRight",(function(){return i.doMetaArrowKey(U.KeyCode.RIGHT)}))){t.getViewport().scrollSelectionIntoView()
;e.preventDefault()}}));this.bindEvents()}e.prototype.commentKeyEventCallback=function(e){var t=this;return this.wrapKeyEventCallback((function(){if(t.editor.selection.isCollapsed()){
var n=t.editor.comments.getSelectionThreadIds();if(n.length>0)t.editor.commentsController.openCommentThread(n[0]);else{var o=(0,l.getWordForPosition)(t.editor,t.editor.selection.getStart())
;if(!o.word)return!1;t.editor.selection.set(o)}}t.editor.commentsController.newCommentThreadForSelection(!1,!1,e)}))};e.prototype.canUseKeyboardEventKey_=function(e){
return"string"==typeof e.key&&"Unidentified"!==e.key};e.prototype.isAutoCompleteTrigger_=function(e){return Boolean(W[e])};e.prototype.performMacrosForCompositionEvent=function(e){var t=this
;if(e&&"`"===e.data){if(this.editor.hasFeature("inline-code")){var n=this.editor.selection.get(),o=n.start,i=n.end,r=n.hasSelection,a=n.isCollapsed;if(r&&!a&&o.line==i.line){
this.editor.execute("handle-composition-event",(function(){t.editor.contents.toggleAttributeOnSelection("inline-code")}));(0,R.trackAce)("wrap-quotes",{ch:"`"});return}}
var s=new KeyboardEvent("keyup");this.editor.execute("handle-composition-event",(function(){return t.handleMacros(s)}))}};e.prototype.trackKeyLatency=function(e){
this.keyPerfMonitor&&this.keyPerfMonitor.track(e)};e.prototype.onKeyEvent_=function(e){var t=this;if(!this.editor.contents.getIsEditable())return!1;var n=e.type,o=e.charCode,i=e.keyCode,r=e.which
;"keydown"==n&&e.shiftKey?this.shiftKeyPressed=!0:"keyup"!=n||e.shiftKey||(this.shiftKeyPressed=!1);var a=H.default.ios,s=!1
;if(0!=e.which&&229!=e.which||!H.default.android&&!a)"keypress"!=n||a||e.metaKey||e.ctrlKey||e.altKey||this.previousKeyPressCharCodes.push(o);else{
var l=this.editor.selection.internalGetSelectionPoints();if(l&&l.startPoint&&l.startPoint.index>0){s=!0;if(l.startPoint.node.nodeValue){var d=l.startPoint.node.nodeValue[l.startPoint.index-1]
;160==(r=o=i=d.charCodeAt(0))?r=o=i=U.KeyCode.SPACE:46==r&&(r=o=i=U.KeyCode.PERIOD)}}"keyup"==n&&this.previousKeyPressCharCodes.push(r)
;var c=this.canUseKeyboardEventKey_(e)?this.isAutoCompleteTrigger_(e.key):this.isAutoCompleteTrigger_(String.fromCharCode(o));if("keyup"!=e.type&&!c)return}if(o||"keyup"!=n&&"keydown"!=n||!V[i]){
var u=!1;this.editor.execute("handleKeyEvent",(function(){t.editor.hasSelection()||t.editor.core.incorporateUserChanges()
;t.ignoreNextSpaceFromDate&&i!=U.KeyCode.SPACE&&(t.ignoreNextSpaceFromDate=null);u=t.handleSpecialKeys(e,n,o,i,r,s);var a=U.KeyCode.isPrintable(i)
;t.canUseKeyboardEventKey_(e)&&(a=1===e.key.length||["Enter","Tab","Spacebar"].indexOf(e.key)>=0);u||t.editor.core.getIMEStatus()||!a||(u=t.handleMacros(e))
;if("keydown"==n)t.editor.callStack.getIdleWorkTimer().atLeast(500);else if("keypress"==n)t.editor.callStack.getIdleWorkTimer().atLeast(500);else if("keyup"==n){
t.editor.callStack.getIdleWorkTimer().atLeast(200);t.editor.callStack.getIdleWorkTimer().atMost(200)}var l=H.default.gecko&&e.altKey&&0==o&&0==i,d=(H.default.webkit||H.default.blink)&&e.altKey&&229==i
;if(t.thisKeyDoesntTriggerNormalize||l||d){t.editor.callStack.getIdleWorkTimer().atLeast(3e3);t.thisKeyDoesntTriggerNormalize=!0}
if(!u&&!t.thisKeyDoesntTriggerNormalize&&!t.editor.core.getIMEStatus()&&"keyup"==n){var c=window.getSelection()
;if(N.isMobile()&&H.default.webkit&&!window.imeCrashRepro&&c&&c.rangeCount>=1&&!F.default.dom.isInDocument(c.anchorNode)){var h=t.editor.selection.internalIMEHackOnIOS(),p=document.createRange()
;p.setStart(h.container,h.offset);p.setEnd(h.container,h.offset);c.removeAllRanges();c.addRange(p);(0,R.trackEng)("fixed up bad selection on iOS for IME that would have caused crash.")}
t.incorpIfQuick()}if("keyup"==n){t.thisKeyDoesntTriggerNormalize=!1;var f=t.previousKeyPressCharCodes.shift(),g=void 0
;for(g=0;g<t.previousKeyPressCharCodes.length&&t.previousKeyPressCharCodes[g]==f;++g);t.previousKeyPressCharCodes.splice(0,g)}}),{shouldIncorp:!1});return u}this.keyEvents.handleEvent(e)}
;e.prototype.handleZoneSpecificKeystrokes=function(e){var t=this.editor.selection.getStart().zone;if(t===v.Position.ROOT_ZONE)return!1;this.editor.observer.trigger("zone-key-event",{zoneId:t,event:e})
;return e.defaultPrevented};e.prototype.incorpIfQuick=function(){var e=this.incorpIfQuick,t=e.failures||0;if(t<5){var n=p.newTimeLimit(40);this.editor.core.incorporateUserChanges()
;n()&&(e.failures=t+1);return!0}var o=e.skipCount||0;if(20==++o){o=0;e.failures=0}e.skipCount=o;return!1};e.prototype.handleSpecialKeys=function(e,t,n,o,r,a){
var s,d,c=this.editor.getSelectedRep(),h="keydown"===t;if(e&&function(e){if(!H.default.gecko)return!1;if("keypress"!==e.type)return!1
;if("Enter"===e.key)return!!(e.altKey||e.metaKey||e.getModifierState("OS"))||e.ctrlKey&&e.shiftKey;return!e.charCode||e.ctrlKey||e.altKey||e.metaKey||e.getModifierState("OS")}(e))return!0
;d=this.canUseKeyboardEventKey_(e)?e.key:String.fromCharCode(r).toLowerCase();h&&(e.metaKey||e.ctrlKey||e.altKey)&&(0,R.trackAce)("shortcuts",{ch:encodeURIComponent(d),shiftKey:e.shiftKey,
altKey:e.altKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey});if(h&&!1===(null===(s=this.editor.addons.autocompose)||void 0===s?void 0:s.handleKeyDown(e)))return!0
;var p=this.editor.code.isCaretInCode(),f=this.editor.autolink.findAutolinkStartPosition();if(f&&("keydown"==t||a)){(m={})[U.KeyCode.TAB]="tab";m[U.KeyCode.ENTER]="enter";m[U.KeyCode.ESCAPE]="cancel"
;m[U.KeyCode.SPACE]="space";m[U.KeyCode.LEFT]="left";m[U.KeyCode.UP]="up";m[U.KeyCode.RIGHT]="right";m[U.KeyCode.DOWN]="down";if(y=m[o]){if(this.editor.autolink.handleAutocompleteAction(y)){
e.preventDefault();e.stopPropagation()}return!0}}if("keydown"==t&&this.doDocumentShortcut(e))return!0;var g=e.ctrlKey&&(H.default.mac?e.metaKey:e.shiftKey);if(h&&g&&this.editor.hasSelection()){var m,y
;(m={})[U.KeyCode.UP]="up";m[U.KeyCode.DOWN]="down";if(y=m[o]){this.editor.core.incorporateUserChanges();var b=this.editor.selection.getStart(),C=this.editor.selection.getEnd();if(b.line<C.line){
var E=c.lines.atIndex(b.line);if(b.col==E.text.length&&E.text.length>E.lineMarker){this.editor.selection.set({start:new v.Position(b.zone,b.line+1,0),end:C,
isReversed:this.editor.selection.get().isReversed});b=this.editor.selection.getStart();C=this.editor.selection.getEnd()}}if(b.line<C.line){var I=c.lines.atIndex(C.line),_=c.lines.atIndex(C.line-1)
;if(C.col<=I.lineMarker){this.editor.selection.set({start:b,end:new v.Position(C.zone,C.line-1,_.text.length),isReversed:this.editor.selection.get().isReversed});b=this.editor.selection.getStart()
;C=this.editor.selection.getEnd()}}
var S=u.builder(c.lines.totalWidth(),"Z",this.editor.selection.getStart().zone),k=this.editor.selection.getStart().line!=this.editor.selection.getEnd().line&&0==this.editor.selection.getEnd().col?this.editor.selection.getEnd().line-1:this.editor.selection.getEnd().line,x=this.editor.selection.getStart().line,w=this.editor.selection.getZone()!=v.Position.ROOT_ZONE||this.editor.hasFeature("notitle")?0:1,P=!1,O=this.editor.selection.getStart(),L=this.editor.selection.getEnd(),M=this.editor.selection.get().isReversed
;if("up"==y&&x>w){S.keep(c.lines.offsetOfIndex(x-1),x-1);for(var F=x;F<=k;F++){S.insertAText({text:c.lines.atIndex(F).text+"\n",attribs:c.alines[F]});S.insert("\n",[[]],this.editor.getApool())}
S.keep(c.lines.atIndex(x-1).text.length,0);k!=c.lines.length()-1?S.keep(1,1):S.remove(1,1);for(F=x;F<=k;F++){S.remove(c.lines.atIndex(F).text.length,0);F==k&&k==c.lines.length()-1||S.remove(1,1)}P=!0
;O=O.withLine(O.line-1);L=L.withLine(L.line-1)}else if("down"==y&&x>=w&&k<c.lines.length()-(1+w)){S.keep(c.lines.offsetOfIndex(x),x);for(F=x;F<=k;F++)S.remove(c.lines.atIndex(F).text.length+1,1)
;S.keep(c.lines.atIndex(k+1).text.length,0);k+1!=c.lines.length()-1?S.keep(1,1):S.insert("\n",[[]],this.editor.getApool());for(F=x;F<=k;F++){S.insertAText({text:c.lines.atIndex(F).text+"\n",
attribs:c.alines[F]});F==k&&k+1==c.lines.length()-1||S.insert("\n",[[]],this.editor.getApool())}P=!0;O=O.withLine(O.line+1);L=L.withLine(L.line+1)}if(P){c=this.editor.getSelectedRep()
;var z=S.toChangeset();u.isIdentity(z)||this.editor.contents.performDocumentApplyChangeset(z);v.Position.isValid(this.editor,O)||(O=new v.Position(O.zone,0,0))
;v.Position.isValid(this.editor,L)||(L=v.Position.endOfZone(this.editor,L.zone));this.editor.selection.set({start:O,end:L,isReversed:M})
;this.editor.lists.renumberListsInRange(this.editor.selection.getStart().zone,this.editor.selection.getStart().line-1,this.editor.selection.getEnd().line+1);e.preventDefault();(0,
R.trackAce)("line-move");return!0}}}if(this.isAutoCompleteTrigger_(d)&&d!==i.EMOJI&&(a||"keypress"==t)&&this.isSelectionEligibleForAutocomplete()&&!p){var B=Math.max((0,
l.docCharFromPosition)(this.editor,this.editor.selection.getStart())-1,0),j=c.alltext.charAt(B);if(Z.test(j)){this.editor.core.incorporateUserChanges();c=this.editor.getSelectedRep();(0,
R.trackAce)("at-linking");e.preventDefault()
;var W=a?new v.Position(this.editor.selection.getStart().zone,this.editor.selection.getStart().line,this.editor.selection.getStart().col-1):this.editor.selection.getStart()
;this.editor.contents.performAttributePreservingDocumentReplaceRange(W,this.editor.selection.getEnd(),d);this.editor.autolink.setAutolink(W);return!0}}
if(!f&&!N.isMobile()&&d==i.EMOJI&&(a||"keypress"==t)&&this.isSelectionEligibleForAutocomplete()&&!p){B=Math.max((0,l.docCharFromPosition)(this.editor,this.editor.selection.getStart())-1,0)
;var V=D.startOfVisualCharacter(c.alltext,B);j=c.alltext.substring(V,(0,l.docCharFromPosition)(this.editor,this.editor.selection.getStart()))||"\n";if(Z.test(j)||j.match(T.REGEX_EMOJI_NATIVE)){
this.editor.core.incorporateUserChanges();c=this.editor.getSelectedRep();(0,R.trackAce)("emoji");e.preventDefault()
;W=a?new v.Position(this.editor.selection.getStart().zone,this.editor.selection.getStart().line,this.editor.selection.getStart().col-1):this.editor.selection.getStart()
;this.editor.contents.performAttributePreservingDocumentReplaceRange(W,this.editor.selection.getEnd(),":");this.editor.autolink.setAutolink(W);return!0}}
!f||!a&&"keypress"!=t&&("keyup"!=t&&"keydown"!=t||r!=U.KeyCode.BACKSPACE&&r!=U.KeyCode.LEFT&&r!=U.KeyCode.RIGHT)||p||(this.editor.callStack.getCurrentCallStack().alwaysHandleAutocompleteAtEnd=!0)
;if(this.handleZoneSpecificKeystrokes(e))return!0;if(h){var K=this.editor.selection.getStart().zone===v.Position.ROOT_ZONE,G=this.editor.getCurrentLineEntry();if(K&&G){
var q=this.editor.managers.lineManagerForLine(G,"timeline");if(q&&q.handleKeyDown(e))return!0}}if(h&&8==o){if(this.editor.core.getIMEStatus())return!1;this.editor.core.incorporateUserChanges()
;this.doBackspaceKey(e)&&e.preventDefault();return!0}if(h&&46==o&&!e.metaKey&&!e.ctrlKey&&!e.altKey){this.editor.core.incorporateUserChanges();if(this.doForwardDeleteKey()){e.preventDefault();return!0
}}var Y=this.editor.mouse.getLatestMouseClickInfo();if(h&&32==o&&this.ignoreNextSpaceFromDate&&Date.now()-this.ignoreNextSpaceFromDate<1e3&&(!Y||Date.now()-Y.date>1e3)){
this.ignoreNextSpaceFromDate=null;e.preventDefault();return!0}if(h&&13==o){this.editor.core.incorporateUserChanges();if(this.doReturnKey(e)){e.preventDefault();return!0}}
if(void 0!==this.keyEvents.handleEvent(e))return!0;if((A.EditingHotkeys.Indent.test(e)||A.EditingHotkeys.Unindent.test(e))&&(h||o!=U.KeyCode.TAB)){this.editor.core.incorporateUserChanges()
;if(this.doTabKey(A.EditingHotkeys.Unindent.test(e))){e.preventDefault();return!0}}if("keydown"==t&&o>=U.KeyCode.LEFT&&o<=U.KeyCode.DOWN&&this.doArrowKey(e,o)){e.preventDefault();return!0}
if(h&&this.doWrapSelection(d,e)){e.preventDefault();return!0}return!1};e.prototype.isSelectionEligibleForAutocomplete=function(){
return this.editor.selection.getStart()&&!this.editor.media.getSelectedGalleryOrNull()};e.prototype.doDocumentShortcut=function(e){if(Y.test(e)){e.preventDefault()
;this.editor.core.incorporateUserChanges();var t=this.editor.selection.getStart(),n=new v.Position(t.zone,t.line,0);this.editor.selection.set(b.focusByDocOrder(n,n));return!0}if(Q.test(e)){
e.preventDefault();this.editor.core.incorporateUserChanges();t=this.editor.selection.getStart(),n=new v.Position(t.zone,t.line,0);this.editor.selection.set(b.focusByDocOrder(t,n));return!0}
if(G.test(e)){e.preventDefault();this.editor.core.incorporateUserChanges();this.doForwardDeleteKey();return!0}if(X.test(e)){e.preventDefault();this.editor.core.incorporateUserChanges()
;var o=v.Position.endOfLine(this.editor,this.editor.selection.getStart());this.editor.selection.set(b.focusByDocOrder(o,o));return!0}if($.test(e)){e.preventDefault()
;this.editor.core.incorporateUserChanges();t=this.editor.selection.getStart();var i=v.Position.endOfLine(this.editor,t);this.editor.selection.set(b.focusByDocOrder(t,i));return!0}if(q.test(e)){
e.preventDefault();this.editor.core.incorporateUserChanges();var r=v.Position.next(this.editor,this.editor.selection.getStart());this.editor.selection.set(b.focusByDocOrder(r,r));return!0}
if(J.test(e)){this.editor.core.incorporateUserChanges();var a=this.editor.selection.get(),s=a.start,l=a.isCollapsed,d=a.hasSelection
;if(l&&v.Position.equals(s,v.Position.endOfZone(this.editor,s.zone))){e.preventDefault();return!0}if(d){var c=this.editor.getLineEntry(s.zone,s)
;s.col==c.lineMarker&&this.editor.contents.performDocumentReplaceRange(s,s,"​​")}}};e.prototype.shouldBypassBackspaceLogic=function(){if(!this.editor.options.skipBackspaceHandling)return!1
;var e=this.editor.selection.getStart(),t=!1;if(e&&e.col>0){var n=e.withCol(e.col-1),o=this.editor.contents.getAttributeValueForPoint(n,"magicObject");t=!(!o||""==o)}var i=!1;if(e&&e.col>0){
var r=this.editor.getCurrentLineEntry().text,a=D.startOfVisualCharacter(r,e.col-1);i=!!r.substring(a,e.col).match(T.REGEX_EMOJI_NATIVE)}return!t&&!i};e.prototype.doArrowKey=function(e,t){
this.editor.core.incorporateUserChanges();if(e.metaKey||e.altKey||e.ctrlKey)return!1;var n=this.editor.getSelectedRep();if(n){var o=this.editor.selection.get(),i=o.focus,r=o.anchor;if((0,
x.isCellId)(i.zone)&&this.doArrowKeyInTableCell(e))return!0;if(this.doArrowKeyAroundInlineMagicObject(e,t))return!0;if(this.doArrowKeyAroundPocket(e,t))return!0
;if(this.doArrowKeyAroundEmoji(e,t))return!0;if(this.doArrowKeyAroundInlineCode(e,t))return!0;if(t==U.KeyCode.LEFT||t==U.KeyCode.RIGHT){if(h=this.leftOrRightOneMention(i,t==U.KeyCode.LEFT)){
e.shiftKey?this.editor.selection.set(b.focusByDocOrder(r,h)):this.editor.selection.set(h);return!0}}
i.line===r.line+1&&0===r.col&&(0===i.col||i.col<=n.lines.atIndex(i.line).lineMarker)&&this.editor.managers.getLineManagerType(r.zone,r.line)&&(i=r.withCol(1))
;if("gallery"==this.editor.managers.getLineManagerType(i.zone,i.line))return!1;var a=this.editor.managers.getLineManager(i.zone,i.line),s=void 0,l=void 0,d=void 0;if(t==U.KeyCode.DOWN){
if((c=_.whichVisualLineOfAceLine(this.editor,i)).index!=c.numLines-1)return!1;s=i.line+1;l=!1;d=!1}else if(t==U.KeyCode.UP){var c;if(0!=(c=_.whichVisualLineOfAceLine(this.editor,i)).index)return!1
;s=i.line-1;l=!0;d=!1}else if(t==U.KeyCode.LEFT){if(!a&&i.col>n.lines.atIndex(i.line).lineMarker)return!1;s=i.line-1;l=!0;d=!0}else{if(!a&&i.col<n.lines.atIndex(i.line).text.length)return!1;s=i.line+1
;l=!1;d=!1}if(s>=0&&s<n.lines.length()){var u=this.editor.managers.getLineManagerType(i.zone,s);if(u&&!this.contentTypeRegistry.isSelectable(u))return!1
;if(!e.shiftKey)return this.normalArrowIntoLine(i.zone,i.line,s,l,d);if(this.editor.managers.getLineManager(i.zone,s)){var h=new v.Position(i.zone,s,r.line<s?1:0)
;this.editor.selection.set(b.focusByDocOrder(r,h));return!0}if(a){var p=new v.Position(i.zone,s,0);this.editor.selection.set(b.focusByDocOrder(this.editor.selection.getAnchor(),p));return!0}}}return!1
};e.prototype.normalArrowIntoLine=function(e,t,n,o,i){var r=this.editor.managers.getLineManager(e,t),a=this.editor.managers.getLineManager(e,n)
;if(a&&"aceTable"==this.editor.managers.getLineManagerType(e,n)){a.focusAndCollapseSelectionOntoCell(o?a.getRowCount()-1:0,i?a.getColCount()-1:0,i,o&&!i);return!0}if(a||r){var s=void 0
;s=o?i?this.editor.getRep(e).lines.atIndex(n).text.length:_.getStartOfBottomVisualLine(this.editor,new v.Position(e,n,0)).col:0;var l=new v.Position(e,n,s);this.editor.selection.set(l);return!0}
return!1};e.prototype.doArrowKeyAroundInlineMagicObject=function(e,t){var n=this.editor.selection.get(),o=n.focus,i=n.anchor,r=this.editor.getSelectedRep();if(t==U.KeyCode.LEFT||t==U.KeyCode.RIGHT){
var a=this.editor.selection.getStart();if((p=this.editor.selection.getEnd()).line==a.line&&p.col==a.col+1&&"latex"==this.editor.contents.getAttributeValueForPoint(a,"magicObject")){
if(e.shiftKey)t==U.KeyCode.LEFT?this.editor.selection.set(b.focusByDocOrder(p,0==a.col?0==a.line?a:new v.Position(a.zone,a.line-1,r.lines.atIndex(a.line-1).text.length):a.withCol(a.col-1))):this.editor.selection.set(b.focusByDocOrder(a,p.col==r.lines.atIndex(p.line).text.length?p.line==r.lines.length()-1?p:new v.Position(p.zone,p.line+1,0):p.withCol(p.col+1)));else{
var s=t==U.KeyCode.LEFT?a:p;this.editor.selection.set(s)}return!0}var l=o.col+(t==U.KeyCode.LEFT?-1:1);if(l>=0&&l<=r.lines.atIndex(o.line).text.length){
var d=this.editor.contents.getAttributeValueForPoint(t==U.KeyCode.LEFT?o.withCol(o.col-1):o,"magicObject"),c="latex"==d||"customEmoji"==d,u=this.contentTypeRegistry.isInline(d);if(c||u){
var h=o.withCol(l)
;e.shiftKey?this.editor.selection.set(b.focusByDocOrder(i,h)):"latex"===d?h.col<o.col?this.editor.selection.set(b.focusByDocOrder(h,o)):this.editor.selection.set(b.focusByDocOrder(o,h)):this.editor.selection.set(b.focusByDocOrder(h,h))
;return!0}}}else{var p;a=this.editor.selection.getStart();if((p=this.editor.selection.getEnd()).line==a.line&&p.col==a.col+1&&"latex"==this.editor.contents.getAttributeValueForPoint(a,"magicObject")){
this.editor.selection.set(a);this.editor.focus();o=this.editor.selection.getFocus();i=this.editor.selection.getAnchor()}}};e.prototype.doArrowKeyAroundInlineCode=function(e,t){if(t==U.KeyCode.LEFT){
var n=this.editor.selection.get(),o=n.focus,i=n.anchor,r=this.editor.getSelectedRep().lines.atIndex(o.line)
;if(o.col>r.lineMarker&&!this.editor.contents.getAttributeValueForPoint(o,"inline-code")&&this.editor.contents.getAttributeValueForPoint(o.withCol(o.col-1),"inline-code")){var a=o.withCol(o.col-1)
;e.shiftKey?this.editor.selection.set(b.focusByDocOrder(i,a)):this.editor.selection.set(b.focusByDocOrder(a,a));return!0}}return!1};e.prototype.doArrowKeyAroundPocket=function(e,t){if(!(0,
h.isPocketEnabled)())return!1;var n=this.editor,o=e.shiftKey;return t==U.KeyCode.LEFT?(0,C.doArrowKeyLeftAroundPocket)({editor:n,shiftKey:o}):t==U.KeyCode.RIGHT&&(0,C.doArrowKeyRightAroundPocket)({
editor:n,shiftKey:o})};e.prototype.doArrowKeyAroundEmoji=function(e,t){var n=this.editor.selection.get(),o=n.focus,i=n.anchor,r=t==U.KeyCode.LEFT,a=t==U.KeyCode.RIGHT;if(r||a){
var s=o.col+(r?-1:1),l=void 0,d=this.editor.getCurrentLineEntry().text;if(s<0||s>=d.length)return;if(r){var c=D.startOfVisualCharacter(d,s);l=d.substring(c,o.col)}else{
var u=D.endOfVisualCharacter(d,s);l=d.substring(o.col,u)}if(!!l.match(T.REGEX_EMOJI_NATIVE)){var h=l.length,p=o.col+(r?-1*h:h),f=o.withCol(p)
;e.shiftKey?this.editor.selection.set(b.focusByDocOrder(i,f)):this.editor.selection.set(b.focusByDocOrder(f,f));return!0}}};e.prototype.leftOrRightOneMention=function(e,t){
for(var n=this,o=this.editor.getRep(e.zone).alines[e.line],i=u.opIterator(o),r=0,a=function(){var o=i.next();if(t&&r<e.col&&e.col<=r+o.chars||!t&&r<=e.col&&e.col<r+o.chars){var a=!1
;u.eachAttribNumber(o.attribs,(function(e){var t=n.editor.getApool().getAttribKey(e);"mentionurl"!=t&&"mentionfolderid"!=t&&"mentionpadid"!=t&&"mentionspecial"!=t||(a=!0)}));return a?{
value:e.withCol(t?r:r+o.chars)}:{value:null}}r+=o.chars};i.hasNext();){var s=a();if("object"==typeof s)return s.value}return null};e.prototype.macroMarkIncorpHappened=function(){
this.didIncorpSinceLastUndo=!0};e.prototype.macroMarkUndoRedoHappened=function(){this.didIncorpSinceLastUndo=!1};e.prototype.handleMacros=function(e){var t=this,n=!1,o=this.editor.getSelectedRep()
;if(e.altKey||e.metaKey||e.ctrlKey)return!1;if(this.editor.code.isCaretInCode()||"keyup"!=e.type||!o||!this.editor.hasSelection())return!1;if(!this.didIncorpSinceLastUndo)return!1
;this.editor.core.incorporateUserChanges();o=this.editor.getSelectedRep();var i=Math.max(0,this.previousKeyPressCharCodes.length-1),r=this.editor.selection.getStart()
;r=new v.Position(r.zone,r.line,r.col-i);for(var a=function(a){var l=E.beginningOfLineMacros[a],d=l.text?l.text.length:l.charRegexp.length,c=s.macroMatches_(e,l,d,r)
;if(c&&-1!=c.indexOf("*"))for(var u=o.lines.atIndex(r.line),h=r.col-1;h>=Math.max(0,r.col-d);--h)if(h!=u.lineMarker-1&&"*"==u.text[h]&&s.editor.contents.getAttributeValueForPoint(r.withCol(h),"magicObject")){
c=null;break}if(c){e.preventDefault();n=!0;s.editor.callStack.makeNewEvent("macro",(function(){r=t.editor.selection.getStart();r=new v.Position(r.zone,r.line,r.col-i);t.performMacro_(e,l,c,d,r)}))
;return"break"}},s=this,l=0;l<E.beginningOfLineMacros.length;++l){if("break"===a(l))break}e.keyCode==U.KeyCode.SPACE&&this.executeAnySlashCommandsAtPosition(r)&&(n=!0);return n}
;e.prototype.executeAnySlashCommandsAtPosition=function(e,t){var n=(0,I.getSlashCommandAtPosition)(this.editor,e,t);if(n){(0,I.executeSlashCommand)(this.editor,n);return!0}return!1}
;e.isSelectionLineEmpty=function(e){var t=e.getSelectedRep().lines.atIndex(e.selection.getStart().line)
;return e.selection.getStart().line==e.selection.getEnd().line&&e.selection.getEnd().col-t.lineMarker==0&&t.text.length-t.lineMarker==0};e.prototype.handleReturnKeyOnFoldedHeader=function(){
var t=this,n=this.editor.getSelectedRep();if(null==n)return!1;if(!this.editor.selection.isCollapsed())return!1
;var o=this.editor.selection.getStart(),i=o.zone,r=o.line,a=this.editor.contents.getLineType(o)
;if(!this.editor.lists.isHeaderListTypeButNotAllBold(this.editor.selection.getZone(),this.editor.selection.getLine()))return!1;if(e.isSelectionLineEmpty(this.editor))return!1
;for(var s=r+1;s<n.alines.length;){var l=this.editor.contents.getLineType(o.withLine(s));if(l===a||"htwo1"===a&&"hone1"===l)break;s++}var d=s-1;if(""===n.lines.atIndex(d).text){
this.editor.selection.set(new v.Position(i,d,0));(0,B.setTimeout)((function(){var e;return null===(e=t.editor.getViewport())||void 0===e?void 0:e.scrollIntoViewIfNeeded(n.lines.atIndex(d).lineNode)}))
;return!0}var c=v.Position.endOfLine(this.editor,new v.Position(i,d,0));this.editor.contents.performDocumentReplaceRange(c,c,"\n",[]);this.editor.selection.set(c.withLine(d+1).withCol(0));return!0}
;e.prototype.scrubTextForCode=function(e,t,n){if(e.zone!==t.zone||e.line!==t.line)throw new Error("scrubTextForCode positions should be on the same line")
;var o=this.editor.getRep(e.zone),i=o.lines.atIndex(e.line).text.substring(e.col,t.col),r=u.builder(o.alltext.length,"Z",e.zone);(0,c.buildKeepToStartOfRange)(this.editor.getReps(),r,e)
;for(var s="",l=0;l<i.length;l++)if(!n||0!==l&&l!==i.length-1){var d=i.charAt(l);if(d in te){var h=this.editor.contents.getAttributesForPoint(e.withCol(e.col+l));h=h.filter((function(e){
return a.isPreserveable(e[0])}));var p=te[d];r.remove(1,0);r.insert(p,h);s+=p}else{r.keep(1,0);s+=d}}else r.remove(1,0);s!==i&&this.editor.contents.performDocumentApplyChangeset(r.toChangeset())
;return s};e.prototype.macroMatches_=function(e,t,n,o){var i,r=this.editor.getSelectedRep().lines.atIndex(o.line),a=r.lineMarker;if(t.allowed&&!t.allowed(this.editor))return null
;if(!this.editor.hasFeature("notitle")&&t.lineLevel&&this.editor.selection.getStart().zone==v.Position.ROOT_ZONE&&(0==this.editor.selection.getStart().line||0==this.editor.selection.getEnd().line))return null
;if(void 0!==t.col&&o.col-a-n!=t.col)return null;if(t.previousCharRegex){var s=o.col-n-1,l=s<0?"":r.text.substr(s,1);if(s>=0&&!l.match(t.previousCharRegex))return null}
return t.inlineRegexReplace?(i=r.text.substr(o.col-n,n)).match(t.regexp)?i:null:t.markdownLeftFlank?this.markdownTest_(e,t,n,o):t.inlineAttribute?this.inlineAttributeTest_(t,n,o):t.inlineReplace||t.inlineMagicObject||t.inlineFuncReplace?(i=r.text.substr(o.col-n,n))==t.text?i:null:t.text||t.regexp?this.regularMacroTest_(t,n,o):null
};e.prototype.markdownTest_=function(e,t,n,o){var i=this.editor.getSelectedRep();e.keyCode==U.KeyCode.ENTER&&0==o.col&&(o=new v.Position(o.zone,o.line-1,i.lines.atIndex(o.line-1).text.length))
;var r=i.lines.atIndex(o.line),a=e.keyCode==U.KeyCode.ENTER?1:0,s=o.col-n+a,l=(r.lineMarker?" "+r.text.slice(1):r.text)+(e.keyCode==U.KeyCode.ENTER?" ":""),d=l.substr(s,n),c=d.match(t.regexp)
;if(!c)return null;var u=c[0][0],h=l[s-1]==u||d[1]==u?"["+u+"]["+u+"]":"["+u+"]",p=l.substring(0,s),f=new RegExp(h+"(?!.*["+u+"].)"),g=p.search(f);if(g<0){f=new RegExp("["+u+"](?!.*["+u+"].)");s--;n=1
;if((g=p.slice(0,-1).search(f))<0)return null}if(g==s-1)return null;if(u!=l[s])return null;for(;;){for(var m=g,y=g,b=s,C=s;m>0&&l[m]==u;)m--;for(;y<l.length&&l[y]==u;)y++
;for(var I=y-g;b>0&&l[b]==u&&s-b<=I;)b--;for(;C<l.length&&l[C]==u&&C-s<=I;)C++;var _=l[m],T=l[y],S=l[b],k=l[C]
;if(!t.markdownLeftFlank(this.editor,_,T)||!t.markdownRightFlank(this.editor,S,k))return null
;if("_"!=u||(!t.markdownRightFlank(this.editor,_,T)||t.markdownRightFlank(this.editor,_,T)&&_.match(E.REGEX_ASCII_PUNCTUATION))&&(!t.markdownLeftFlank(this.editor,S,k)||t.markdownLeftFlank(this.editor,S,k)&&k.match(E.REGEX_ASCII_PUNCTUATION)))break
;if(0==g)return null;g=(p=l.substring(0,g)).search(f)}return l.substring(g,s+n-a)};e.prototype.inlineAttributeTest_=function(e,t,n){
var o=this.editor.getSelectedRep().lines.atIndex(n.line),i=n.col-t,r=o.text.substr(i,t);if(e.text!=r)return null;var a=o.text.substring(0,i).lastIndexOf(e.text);if(-1==a){
var s=o.text.substring(i+t).indexOf(e.text);if(-1==s)return null;i=(a=i)+t+s}return a==i-1?null:o.text.substring(a,i+t)};e.prototype.regularMacroTest_=function(e,t,n){
var o,i=this.editor.getSelectedRep().lines.atIndex(n.line),r=i.text.substring(i.lineMarker);if(e.text)o=e.text;else{var a=r.match(e.regexp);if(!a)return null;o=a[0]}var s=n.col-o.length,l=n.col
;if(o!==i.text.substring(s,l))return null;var d=i.text.substring(i.lineMarker,s);return""!==d.trim()||d.length>3?null:o};e.prototype.performMacro_=function(e,t,n,o,i){
var a=this.editor.contents.getLineType(i);if(t.inlineMagicObject){if(i.col-o-1==0||"$"!=this.editor.getCurrentLineEntry().text.charAt(i.col-o-1)){var s=i.withCol(i.col-o),l=i
;this.editor.contents.performAttributePreservingDocumentReplaceRange(s,l,"*",[["magicObject","latex"]]);this.editor.selection.getInlineMagicObjectAtPosition(s).beginEdit()}}else if(t.magicObject){
var c=t.magicObject,u=i.withCol(i.col-o),h=i;this.editor.contents.performAttributePreservingDocumentReplaceRange(u,h,"");var p=i.line,f=new v.Position(i.zone,p,0)
;if(this.contentTypeRegistry.hasContentType(t.magicObject)){var g=this.contentTypeRegistry.getClassById(t.magicObject);this.contentTypeRegistry.insertContentType(this.editor,new g({}),{start:f,end:f})
}else{this.editor.contents.performAttributePreservingDocumentReplaceRange(f,f,"*",[["magicObject",c],[c,"true"]]);this.editor.selection.set(new v.Position(i.zone,p+1,0))}
}else t.inlineRegexReplace?this.editor.contents.performAttributePreservingDocumentReplaceRange(new v.Position(i.zone,i.line,i.col-o),new v.Position(i.zone,i.line,i.col),n.replace(t.regexp,t.inlineRegexReplace)):t.inlineReplace?this.editor.contents.performAttributePreservingDocumentReplaceRange(new v.Position(i.zone,i.line,i.col-o),new v.Position(i.zone,i.line,i.col),t.inlineReplace):t.markdownLeftFlank?this.performMarkdownMacro_(e,t,n,o,i):t.inlineAttribute?this.performInlineAttributeMacro_(t,n,o,i):t.inlineFuncReplace?this.editor.contents.performAttributePreservingDocumentReplaceRange(new v.Position(i.zone,i.line,i.col-o),new v.Position(i.zone,i.line,i.col),t.inlineFuncReplace()):a.indexOf("code")>-1||"code"==t.listType&&i.zone!=v.Position.ROOT_ZONE||this.performRegularMacro_(t,n,o,i)
;var m=t.text||t.regexp&&t.regexp.source;(0,R.trackAce)("keyboard-macro-3",{macro:m});if(t.track){var y=t.track,b=y.event,C=y.props,E=i.zone==v.Position.ROOT_ZONE?"main editor":(0,
d.getZoneType)(i.zone);b.track(r.__assign(r.__assign({},C),{macro_zone_type:E}))}};e.prototype.performMarkdownMacro_=function(e,t,n,o,i){var r=this.editor.getSelectedRep()
;e.keyCode==U.KeyCode.ENTER&&0==i.col&&(i=new v.Position(i.zone,i.line-1,r.lines.atIndex(i.line-1).text.length));var a=r.lines.atIndex(i.line),s=n[0],l=1;n[0]==n[1]&&(l=2)
;var d=a.text.lastIndexOf(n),c=i.col-n.length,u=c-d!=0?c-d-1:0,h=n.slice(-1*l),p=e.keyCode!=U.KeyCode.ENTER&&h[1]!=s,f=d+n.length-l-(p?1:0)+u,g="~"==s?"strikethrough":1!=l?"bold":"italic"
;this.editor.contents.performDocumentApplyAttributesToRange(new v.Position(i.zone,i.line,d+l),new v.Position(i.zone,i.line,f),[[g,"true"]])
;this.editor.contents.performDocumentReplaceRange(new v.Position(i.zone,i.line,f),new v.Position(i.zone,i.line,f+l),"")
;this.editor.contents.performDocumentReplaceRange(new v.Position(i.zone,i.line,d),new v.Position(i.zone,i.line,d+l),"")};e.prototype.performInlineAttributeMacro_=function(e,t,n,o){
var i=this.editor.getSelectedRep().lines.atIndex(o.line),r=o.col-n,a=i.text.substring(0,r).lastIndexOf(e.text),s=!1;if(-1==a){s=!0;r=(a=r)+n+i.text.substring(r+n).indexOf(e.text)}
var l=t.slice(n,-1*n),d=("inline-code"==e.inlineAttribute?this.scrubTextForCode(o.withCol(a),o.withCol(r+n),!0):l).length-l.length,c=" "!=i.text[r+1]
;this.editor.contents.performDocumentApplyAttributesToRange(o.withCol(a),o.withCol(r+n+d-2),[[e.inlineAttribute,"true"]]);var u=r-n+d
;!e.text||s||c||this.editor.selection.set(new v.Position(o.zone,o.line,u+1))};e.prototype.performRegularMacro_=function(e,t,n,o){
var i=this.editor.getSelectedRep().lines.atIndex(o.line),r=i.lineMarker,a=this.editor.contents.getLineType(o),l=i.text.substring(r).match(j),d=l?l[0].length:0,c=1;if(a){var u=s.parseListType(a)
;c=Math.min(this.editor.lists.MAX_LIST_LEVEL,u.indent+("indent"==u.type?1:0))}var h=n+r+d,p="hthree"!=e.listType?r:0
;this.editor.contents.performDocumentReplaceRange(new v.Position(o.zone,o.line,p),new v.Position(o.zone,o.line,h),"");if("number"==e.listType){var f=Number(t.match(e.regexp)[1])
;this.editor.lists.setLineListTypeWithStart(o.zone,o.line,e.listType+c,f)}else{if("code"==e.listType){var g=this.editor.getRep(o.zone).lines.atIndex(o.line)
;this.scrubTextForCode(o.withCol(0),o.withCol(g.text.length),!1)}if("hthree"==e.listType){
this.editor.contents.performDocumentApplyAttributesToRange(new v.Position(o.zone,o.line,0),new v.Position(o.zone,o.line,this.editor.getRep(o.zone).lines.atIndex(o.line).text.length),[["bold","true"]])
;this.editor.focus();document.execCommand("bold");this.editor.observer.trigger("command-state-change",void 0)}else this.editor.contents.setLineType(o.zone,o.line,e.listType+c)}}
;Object.defineProperty(e.prototype,"hasIndentationOnCurrentLine",{get:function(){var e=this.editor.getSelectedRep();if(this.editor.selection.isCollapsed()&&this.editor.selection.getLine()>0){
var t=this.editor.selection.getLine(),n=e.lines.atIndex(t),o=n.text.substr(n.lineMarker);return/^ /.test(o)}return!1},enumerable:!1,configurable:!0});e.prototype.handleReturnIndentation=function(){
var e=this.editor.getSelectedRep();if(this.editor.selection.isCollapsed()&&this.editor.selection.getLine()>0){var t=this.editor.selection.getLine(),n=e.lines.atIndex(t),o=e.lines.prev(n)
;if(this.editor.selection.getColumn()==o.lineMarker){
var i=o.text.substr(o.lineMarker),r=/^ *(?:)/.exec(i)[0],a=u.builder(e.lines.totalWidth(),"Z",this.editor.selection.getZone()).keep(e.lines.offsetOfIndex(t),t).keep(o.lineMarker,0).insert(r,[["author",this.editor.authors.getThisAuthor()]],this.editor.getApool()).toChangeset()
;this.editor.contents.performDocumentApplyChangeset(a);this.editor.selection.set(new v.Position(this.editor.selection.getStart().zone,t,r.length+n.lineMarker))}}}
;e.prototype.shouldPreserveListType=function(e,t){
return!(!e||0!=e.indexOf("indent"))||(e&&t&&0==e.indexOf("indent")&&0==t.indexOf("indent")||0==e.indexOf("code")&&0==t.indexOf("code")||0==e.indexOf("quote")&&0==t.indexOf("quote")||this.isListyListType(e)&&this.isListyListType(t))
};e.prototype.isListyListType=function(e){return e&&s.isListyListTypeByParsedType(s.parseListType(e).type)};e.prototype.insertLineAbove=function(e){
var t,n=this.editor.selection.getStart(),o=n.zone,i=n.line
;i>1&&this.shouldPreserveListType(e,this.editor.contents.getLineType(new v.Position(o,i-1,0)))&&(t=0==e.indexOf("taskdone")?e.replace("done",""):e);var r=new v.Position(o,i,0)
;this.editor.contents.performDocumentReplaceRange(r,r,"\n");this.editor.selection.set(r);t&&this.editor.contents.setLineType(r.zone,r.line,t)};e.prototype.computeNewListType=function(e){
var t=this.editor.contents.getLineType(new v.Position(this.editor.selection.getZone(),e,0));if(!t)return null;var n=s.parseListType(t),o=n.type,i=n.indent;if("indent"==o)for(var r=e-1;r>=0;r--){
var a=s.parseListType(this.editor.contents.getLineType(new v.Position(this.editor.selection.getZone(),r,0)));if(null==a||a.indent<i)break;if(a.indent==i&&"indent"!=a.type){
s.isListyListTypeByParsedType(a.type)&&(o=a.type);break}}return"taskdone"==o?"task"+i:o+i};e.prototype.handleReturnKeyOnLinesWithMacros=function(){
for(var e=0,t=void 0;t=E.wholeLineMacros[e];e++)if(t.isAllowed(this.editor)){
var n=this.editor.selection.getStart().line,o=this.editor.getRep(this.editor.selection.getZone()).lines.atIndex(n),i=o.text.substring(o.lineMarker).match(t.regex)
;if(i&&i[1]&&t.replace(this.editor,i))return!0}return!1};e.prototype.handleReturnKeyWithAccelKey=function(e){
var t=this.editor.selection.getStart().line,n=this.editor.contents.getLineType(new v.Position(this.editor.selection.getZone(),t,0));if(e.shiftKey){this.insertLineAbove(n);return!0}
if(n&&0==n.indexOf("task")){this.editor.lists.toggleTaskLists(new v.Position(this.editor.selection.getZone(),t,0));return!0}var o=this.editor.comments&&this.editor.comments.getSelectionThreadIds()||[]
;if(o.length>0){this.editor.commentsController.openCommentThread(o[0]);return!0}
var i=this.editor.contents.getUniqueAttributeValuesInRange(this.editor.selection.getStart(),this.editor.selection.getEnd(),"link");if(i.length>0){this.editor.observer.trigger("open-link",[i[0],!1,[]])
;return!0}return!1};e.prototype.doReturnKey=function(t){if(!this.editor.hasSelection())return!0
;var n=this.editor.getSelectedRep(),o=this.editor.selection.getStart().line,i=this.editor.contents.getLineType(new v.Position(this.editor.selection.getZone(),o,0)),r=n.lines.atIndex(this.editor.selection.getStart().line).lineNode.classList.contains("ace-line-heading-collapsed")
;S.expandSectionIfNecessaryOnEnterKey(this.editor);if(this.editor.selection.isCollapsed()){var a=this.handleReturnKeyOnLinesWithMacros();if(a)return a
;if(this.executeAnySlashCommandsAtPosition(this.editor.selection.getStart(),!0))return!0
;if(w.isOnButDoNotLog("paper_collapsed_header_newline_behavior")&&r&&this.handleReturnKeyOnFoldedHeader())return!0}if(F.default.events.testAccelKey(t)){var s=this.handleReturnKeyWithAccelKey(t)
;if(s)return s}if(this.editor.selection.selectedInlineMagicObject){this.editor.selection.selectedInlineMagicObject.beginEdit();return!0}if("textembed"==(0,
d.getZoneType)(this.editor.selection.getZone())&&F.default.events.testAccelKey(t)){
var l=this.editor.selection.getZone(),c=this.editor.managers.getLineManagerForNonRootZoneId(l,"gallery").getPosition();this.editor.selection.set(c)
;this.editor.selection.internalUpdateSelectionFromRep();if(t.target&&t.target.dispatchEvent){t.target.dispatchEvent(new Event("mouseleave"));t.target.dispatchEvent(new Event("blur"))}return!0}
if("caption"==(0,d.getZoneType)(this.editor.selection.getStart().zone)&&"full"==this.editor.editorType&&!t.shiftKey){
var u=this.editor.managers.getLineEntryContainingZone(this.editor.selection.getStart().zone),h=this.editor.getRep(v.Position.ROOT_ZONE).lines.indexOfEntry(u),p=new v.Position(v.Position.ROOT_ZONE,h,1)
;this.editor.contents.performDocumentReplaceRange(p,p,"\n");var f=new v.Position(v.Position.ROOT_ZONE,h+1,0);this.editor.selection.set(f);return!0}
var g=this.editor.lists.isHeaderListType(this.editor.selection.getZone(),o),m=this.editor.selection.getEnd(),y=n.lines.atIndex(o),b=y.lineMarker,C=y&&this.editor.selection.isCollapsed()&&this.editor.selection.getStart().col==y.lineMarker,E=e.isSelectionLineEmpty(this.editor)
;if(i&&!g)return this.doReturnKeyForNonHeaderListType(i,o,n,t);if(i&&g&&E){var I=this.editor.selection.getStart(),_=new v.Position(I.zone,I.line,I.col-b)
;this.editor.contents.performDocumentReplaceRange(_,m,"\n");this.handleReturnIndentation();return!0}if(i&&g&&!E&&C){this.editor.contents.performDocumentReplaceSelection("\n")
;this.editor.contents.removeFormatOnSelection();this.handleReturnIndentation();return!0}if(this.editor.media.getSelectedGalleryElement()){p=new v.Position(this.editor.selection.getStart().zone,o,1)
;this.editor.contents.performDocumentReplaceRange(p,p,"\n");f=new v.Position(this.editor.selection.getStart().zone,o+1,0);this.editor.selection.set(f);return!0}
if(this.shouldReplaceCurrentLineWithHR()){this.replaceCurrentLineWithHR();return!0}if(!this.editor.core.getIMEStatus()&&(!this.defaultEnterBehavior||this.hasIndentationOnCurrentLine)){
this.editor.contents.performDocumentReplaceSelection("\n");this.handleReturnIndentation();return!0}if(w.isOnButDoNotLog("paper_pocket_endofline")){var T=this.editor.selection.getNodeForPosition(m)
;this.appendFakeLineBreakAfterNode(T)}return!1};e.prototype.doReturnKeyForNonHeaderListType=function(e,t,n,o){var i,r=!1,a=!1;if(t>=n.lines.length())return!1
;var l=0==e.indexOf("code"),d=(t>0||!this.editor.dom.isRootZoneId(this.editor.selection.getZone()))&&n.lines.atIndex(t),c=t-1>0&&n.lines.atIndex(t-1),u=c&&c.text.length==c.lineMarker,h=d&&d.text.length==d.lineMarker,p=d&&this.editor.selection.isCollapsed()&&this.editor.selection.getStart().col==d.lineMarker,f=d&&this.editor.selection.isCollapsed()&&this.editor.selection.getStart().col==d.text.length,g=d&&F.default.string.isBlank((0,
m.default)(d.text,n.alines[t],this.editor.getApool()));l&&(r=!(!(i=t-1>0&&this.editor.contents.getLineType(new v.Position(this.editor.selection.getZone(),t-1,0)))||0!=i.indexOf("code")))
;var y=s.parseListType(e);if(o.shiftKey&&"soft"!=y.type){var b="code"!=y.type&&y.indent?"indent"+y.indent:null;this.editor.contents.performDocumentReplaceSelection("\n")
;this.editor.contents.setLineType(this.editor.selection.getStart().zone,t+1,b);a=!0}else if(l?r&&u&&h:h||p&&g){if("indent"==y.type)this.doBackspaceKey();else{
this.editor.lists.doIndentOutdent(!0,!0,!1);l&&this.editor.contents.setLineType(this.editor.selection.getZone(),t-1,null)}a=!0
}else if(p)if(this.defaultEnterBehavior&&"task"!=y.type&&"taskdone"!=y.type);else{var C=this.computeNewListType(t);this.editor.contents.performDocumentReplaceSelection("\n")
;this.editor.contents.setLineType(this.editor.selection.getStart().zone,t,C);a=!0}else if(o.shiftKey||"soft"!=y.type){if("task"==y.type){var E=(0,
x.isCellId)(this.editor.selection.getStart().zone)?R.EditorContext.Table.EnterKeyInsideList:R.EditorContext.EnterKeyInsideList;R.IntentionEvent.CreateTask.track({type:"todo",context:E})}
if(this.defaultEnterBehavior&&"task"!=y.type&&"taskdone"!=y.type){if(f&&w.isOnButDoNotLog("paper_pocket_endofline")){var I=this.editor.selection.getEnd(),_=this.editor.selection.getNodeForPosition(I)
;this.appendFakeLineBreakAfterNode(_)}}else{this.editor.contents.performDocumentReplaceSelection("\n");C=this.computeNewListType(t)
;this.editor.contents.setLineType(this.editor.selection.getStart().zone,t+1,C);a=!0}}else{this.editor.contents.performDocumentReplaceSelection("\n")
;this.editor.contents.setLineType(this.editor.selection.getStart().zone,t,null);this.editor.contents.setLineType(this.editor.selection.getStart().zone,t+1,null);a=!0}if(l){
var T=t-1,S=t,k=t+1,P=this.editor.code.getLangForCodeLine(this.editor.selection.getZone(),T),A=this.editor.code.getLangForCodeLine(this.editor.selection.getZone(),S),O=r?P:A
;O&&(p?this.setLineCodeLanguage(n,S,O):this.setLineCodeLanguage(n,k,O));a&&this.handleReturnIndentation()}return a};e.prototype.setLineCodeLanguage=function(e,t,n){if(!(t>=e.lines.length())){
var o=this.editor.selection.getStart().zone;this.editor.contents.performDocumentApplyAttributesToRange(new v.Position(o,t,0),new v.Position(o,t,1),[["lang",n]])}}
;e.prototype.shouldReplaceCurrentLineWithHR=function(){if(!this.editor.selection.isCollapsed())return!1;var e=this.editor.getCurrentLineEntry();return!(!e||!e.text.match(/^[—-]+$/))}
;e.prototype.appendFakeLineBreakAfterNode=function(e){var t=e.parentElement;if(function(e){var t=e.element,n=e.allowedTagNames,o=e.ignoredTagNames;if(!t)return!1;var i=t.tagName.toLowerCase()||""
;if(n.indexOf(i)>-1)return!0;if(o.indexOf(i)>-1)return!!ae({element:t,allowedTagNames:n});return!1}({element:t,allowedTagNames:["span"],ignoredTagNames:ie})){var n=ae({element:t,allowedTagNames:re})
;if(n){var o=document.createElement("div");o.setAttribute("data-role",g.LINE_BREAK_DIV_TAG_ROLE);o.setAttribute("style","height: 0; visibility: hidden;");n.appendChild(o)}}}
;e.prototype.replaceCurrentLineWithHR=function(){
var e,t=null===(e=this.editor.getCurrentLineEntry())||void 0===e?void 0:e.text,n=this.editor.selection.getStart().withCol(0),o=v.Position.endOfZone(this.editor,n.zone).line===n.line&&!this.editor.hasFeature("emptylastline")
;this.editor.options.contentTypeRegistry.hasContentType("hr")?this.editor.options.contentTypeRegistry.insertContentType(this.editor,new k.default,{start:n,end:v.Position.endOfLine(this.editor,n)
}):this.editor.contents.performDocumentReplaceRange(n,v.Position.endOfLine(this.editor,n),"*",[["magicObject","hr"],["hr","true"]])
;o&&this.editor.contents.performDocumentReplaceRange(n.withCol(1),n.withCol(1),"\n");var i=n.withLine(n.line+1);this.editor.selection.set(i);(0,R.trackAce)("keyboard-macro",{macro:t})}
;e.prototype.selectionHasOnlyLists=function(){for(var e=this.editor.selection.getStart().line,t=this.editor.selection.getEnd().line,n=e;n<=t;n++){
var o=!1,i=this.editor.contents.getLineType(new v.Position(this.editor.selection.getZone(),n,0));if(i){var r=s.parseListType(i);("indent"===r.type||s.isListyListTypeByParsedType(r.type))&&(o=!0)}
if(!o)return!1}return!0};e.prototype.doTabKey=function(e){if(this.editor.canA11yNavigateWithTab())return!1;var t=this.selectionHasOnlyLists()
;if(this.editor.selection.getZone()!=v.Position.ROOT_ZONE&&"aceTable"==this.editor.managers.getLineManagerTypeContainingZone(this.editor.selection.getZone())&&!t){this.doTabKeyInTableCell(e);return!0}
if(this.editor.selection.isCollapsed()&&0===this.editor.selection.getStart().line&&this.editor.selection.getStart().zone===v.Position.ROOT_ZONE){var n=this.editor.getRep(v.Position.ROOT_ZONE)
;if(1===n.lines.length()){var o=new v.Position(v.Position.ROOT_ZONE,0,n.lines.atIndex(0).text.length);this.editor.contents.performDocumentReplaceRange(o,o,"\n")}
this.editor.selection.set(new v.Position(this.editor.selection.getStart().zone,1,0));return!0}var i=this.editor.media.getSelectedGalleryOrNull();if(i){
if(i.focusOnCaptionWhenTabOnImageSelected(this.editor))return!0}if(!(this.editor.hasFeatureForSelectedRep("no-indent")&&!t)){
this.editor.code.isCaretInCodeBlock()?this.indentCodeBlock(!e):this.editor.lists.doIndentOutdent(e,!1,!1);return!0}return!1};e.prototype.indentCodeBlock=function(e){
var t=this.editor.getSelectedRep(),n=this.editor.selection.getStart(),o=this.editor.selection.getEnd(),i=u.builder(t.lines.totalWidth(),"Z",this.editor.selection.getZone()),r=t.lines.offsetOfIndex(n.line)
;i.keep(r,n.line);for(var a=n.line;a<=o.line;a++){var s=t.lines.atIndex(a);s.lineMarker&&i.keep(s.lineMarker);if(e){i.insert(ee,[],this.editor.getApool());i.keep(s.text.length-s.lineMarker+1,1)}else{
var l=Math.min(s.text.length,2+s.lineMarker),d=void 0;for(d=s.lineMarker;d<l&&" "==s.text[d];d++)i.remove(1);i.keep(s.text.length-d+1,1)}}
this.editor.contents.performDocumentApplyChangeset(i.toChangeset())};e.prototype.isShiftKeyPressed=function(){return this.shiftKeyPressed};e.prototype.setIgnoreNextSpaceFromDate=function(e){
this.ignoreNextSpaceFromDate=e};e.prototype.doForwardDeleteKey=function(){if(this.deleteCellsOfTable())return!0;if(this.backspaceOrDeleteAtBoundaryOfSpecialInlineAttribute())return!0
;this.editor.selection.isCollapsed()?this.doForwardDeleteAsCaret():this.doBackspaceNotAsCaret();return!0};e.prototype.doForwardDeleteAsCaret=function(){
var e=this.editor.selection.getStart(),t=this.editor.getRep(e.zone),n=t.lines.atIndex(e.line);n.lineMarker&&0==e.col&&(e=e.withCol(1))
;if(!!s.lineGetLineLevelObject(e.zone,e.line,t,this.editor.getApool(),this.contentTypeRegistry))this.editor.contents.performDocumentReplaceRange(e.withCol(0),e.withCol(1),"");else if(e.col===n.text.length){
if(e.line===t.lines.length()-1)return;var o=t.lines.atIndex(e.line+1),i=s.lineGetLineLevelObject(e.zone,e.line+1,t,this.editor.getApool(),this.contentTypeRegistry)
;if(i)if("hr"===i.key)this.editor.contents.performDocumentReplaceRange(e,new v.Position(e.zone,e.line+1,1),"");else if(0===e.col){
this.editor.contents.performDocumentReplaceRange(e,new v.Position(e.zone,e.line+1,0),"");this.editor.selection.set({start:new v.Position(e.zone,e.line,0),end:new v.Position(e.zone,e.line,1)})
}else this.editor.selection.set({start:new v.Position(e.zone,e.line+1,0),end:new v.Position(e.zone,e.line+1,1)});else if(o.lineMarker)if(0===e.col){
this.editor.contents.performDocumentReplaceRange(e,new v.Position(e.zone,e.line+1,0),"");this.editor.selection.set(new v.Position(e.zone,e.line,1))
}else this.editor.contents.performDocumentReplaceRange(e,new v.Position(e.zone,e.line+1,1),"");else this.editor.contents.performDocumentReplaceRange(e,new v.Position(e.zone,e.line+1,0),"")}else{
var r=D.startOfVisualCharacter(n.text,e.col),a=D.endOfVisualCharacter(n.text,e.col+1);this.editor.contents.performDocumentReplaceRange(e.withCol(r),e.withCol(a),"")}}
;e.prototype.doBackspaceKey=function(e){var t=!0;if(this.editor.hasSelection()){if(this.deleteCellsOfTable())return!0
;t=this.editor.selection.isCollapsed()?this.doBackspaceAsCaret(e):this.doBackspaceNotAsCaret()}var n=this.editor.selection.getLine(),o=this.editor.selection.getZone()
;this.editor.lists.renumberListsInRange(o,n,n+1);return t};e.prototype.doBackspaceAsCaret=function(e){
var t=this.editor.getSelectedRep(),n=this.editor.selection.getLine(),o=this.editor.selection.getColumn(),i=this.editor.selection.getZone(),r=t.lines.atIndex(n),a=r.text,s=r.lineMarker
;if(this.backspaceOrDeleteAtBoundaryOfSpecialInlineAttribute())return!0;if(/^ +$/.exec(a.substring(s,o))){var l=(o-s-1)%2+1
;this.editor.contents.performDocumentReplaceRange(new v.Position(i,n,o-l),new v.Position(i,n,o),"");return!0}
return this.editor.selection.getColumn()<=r.lineMarker?this.doBackspaceAsCaretAtBeginningOfLine(e):this.doBackspaceAsCaretNotAtBeginningOfLine(e)};e.prototype.shouldDeleteFlagsOnBackspace=function(e){
var t=!!e&&!!F.default.events.testAccelKey(e),n=H.default.mac,o=!n&&t,i=n&&t,r=n&&!!e&&!!e.altKey;return{shouldDeleteWord:o||r,shouldDeleteVisualLine:i}}
;e.prototype.backspaceShouldDeletePreviousLineMagicObject=function(e){return!!e&&("hr"===e.key||!("gallery"!==e.key||!N.isAndroid()))};e.prototype.doBackspaceAsCaretAtBeginningOfLine=function(e){
var t=this.editor.getSelectedRep(),n=this.editor.selection.getLine(),o=this.editor.selection.getZone(),i=t.lines.atIndex(n),r=this.editor.contents.getLineType(new v.Position(o,n,0)),a=n>0&&t.lines.atIndex(n-1),l=this.editor.lists.isHeaderListType(o,n),d=t.lines.atIndex(n),c=d&&d.domInfo&&d.domInfo.allBold
;if(l&&!c){var u=(o!=v.Position.ROOT_ZONE||1!==n)&&0!==n&&0==a.text.length&&i.text.length-i.lineMarker>0?0:i.lineMarker
;this.editor.contents.performDocumentReplaceRange(0===n?new v.Position(o,0,0):new v.Position(o,n-1,a.text.length),new v.Position(o,n,u),"");return!0}if(r){
var h=this.shouldDeleteFlagsOnBackspace(e).shouldDeleteVisualLine,p=s.parseListType(r),f=p.type,g=p.indent;if("code"==f&&!h&&n>0){var m=this.editor.contents.getLineType(new v.Position(o,n-1,0))
;if(m&&"code"==s.parseListType(m).type){this.editor.contents.performDocumentReplaceRange(new v.Position(o,n-1,a.text.length),new v.Position(o,n,i.lineMarker),"");return!0}}var y=void 0
;if(h&&"indent"==f)y=null;else{var b=g?g-1:null;y=b?"indent"+b:null}this.editor.contents.setLineType(o,n,y);return!0}if(n<=0)return!0
;if("*"==a.text&&s.lineHasLineLevelObject(o,n-1,this.editor.getRep(o),this.editor.getApool(),this.contentTypeRegistry)){
var C=s.lineGetLineLevelObject(o,n-1,this.editor.getRep(o),this.editor.getApool(),this.contentTypeRegistry)
;if(this.backspaceShouldDeletePreviousLineMagicObject(C))this.editor.contents.performDocumentReplaceRange(new v.Position(o,n-1,0),new v.Position(o,n,0),"");else{
""==i.text&&this.editor.contents.performDocumentReplaceRange(new v.Position(o,n-1,1),new v.Position(o,n,0),"");this.editor.selection.set({start:new v.Position(o,n-1,0),end:new v.Position(o,n-1,1)})}
return!0}if(!this.shouldBypassBackspaceLogic()){this.editor.contents.performDocumentReplaceRange(new v.Position(o,n-1,a.text.length),new v.Position(o,n,0),"");return!0}return!1}
;e.prototype.doBackspaceAsCaretNotAtBeginningOfLine=function(e){var t=this.editor.getSelectedRep(),n=this.editor.selection.getLine(),o=this.editor.selection.getStart().clone(),i=(0,
l.docCharFromPosition)(this.editor,this.editor.selection.getStart());if(i<=0)return!1
;var r,a=t.lines.atIndex(n),s=o.col,d=this.editor.selection.internalGetPointForLineEntryAndCol(a,s),c=this.shouldDeleteFlagsOnBackspace(e),u=c.shouldDeleteWord,h=c.shouldDeleteVisualLine;if(u){r=i-1
;for(;r-1>=0&&f.REGEX_WORDCHAR.exec(t.alltext.charAt(r-1));)r--}else if(h){var p=_.getStartOfVisualLine(this.editor,o);r=(0,l.docCharFromPosition)(this.editor,p)}else{
var g=this.getCharCountToDelete(n,this.editor.selection.getColumn(),t,d);if(g.selectPrevChar){this.editor.selection.set({start:o.withCol(o.col-1),end:o});return!0}r=i-g.deleteCount}
if(null!==r&&!this.shouldBypassBackspaceLogic()){r=D.startOfVisualCharacter(t.alltext,r);this.editor.contents.performDocumentReplaceCharRange(this.editor.selection.getZone(),r,i,"");return!0}return!1}
;e.prototype.doBackspaceNotAsCaret=function(e){
var t=this.editor.getSelectedRep(),n=this.editor.selection.getZone(),o=this.editor.contents.getLineType(this.editor.selection.getStart()),i=/h(one|two|three).*/.test(o),r=this.isListyListType(o),a=this.editor.selection.getStart().clone(),l=this.editor.selection.getEnd().clone(),d=o&&s.parseListType(o).type
;if(("code"===d||"quote"===d)&&a.col<=1){(f=t.lines.atIndex(l.line)).lineMarker&&0==l.col&&(l=l.withCol(1));if(l.line===a.line){this.editor.contents.performDocumentReplaceRange(a.withCol(1),l,"")
;return!0}if(l.col==f.text.length){this.editor.contents.performDocumentReplaceRange(a.withCol(1),l,"");return!0}
var c=(h=this.editor.contents.getLineType(this.editor.selection.getEnd()))&&s.parseListType(h).type,u=-1!==["hone","htwo","code","quote"].indexOf(c)?h:null
;if(u===o)this.editor.contents.performDocumentReplaceRange(a.withCol(1),l,"");else if(u){this.editor.contents.performDocumentReplaceRange(a.withCol(1),l,"")
;this.editor.contents.setLineType(n,a.line,u)}else this.editor.contents.performDocumentReplaceRange(a.withCol(0),l,"");return!0}if(!o&&0===a.col){
(f=t.lines.atIndex(l.line)).lineMarker&&0==l.col&&(l=l.withCol(1));if(l.col<f.text.length&&f.lineMarker){var h
;c=(h=this.editor.contents.getLineType(this.editor.selection.getEnd()))&&s.parseListType(h).type;if(-1!==["hone","htwo","code","quote"].indexOf(c)){
this.editor.contents.performDocumentReplaceRange(l.withCol(1),l,"");this.editor.contents.performDocumentReplaceRange(a,l.withCol(0),"")}}}if(r||i){
var p=t.lines.atIndex(a.line),f=t.lines.atIndex(l.line);if(a.line!=l.line&&0!=a.line&&a.col<=p.lineMarker&&l.col<=f.lineMarker){a=new v.Position(a.zone,a.line,0);l=new v.Position(l.zone,l.line,0)}
a.col>0&&0==l.col&&f.lineMarker&&(l=l.withCol(1));!e&&this.shouldDeletePreceedingCharacterToo(a,l)&&(a=a.withCol(a.col-1));this.editor.contents.performDocumentReplaceRange(a,l,"")
;this.editor.selection.set(a);return!0}if(a.line==l.line&&this.editor.managers.getLineManager(a.zone,a.line,"gallery")){this.editor.media.removeSelectedItems();return!0}
if(!e&&this.shouldDeletePreceedingCharacterToo(a,l)){this.editor.contents.performDocumentReplaceRange(a.withCol(a.col-1),l,"");return!0}this.editor.contents.performDocumentReplaceSelection("",!1)
;return!0};e.prototype.backspaceOrDeleteAtBoundaryOfSpecialInlineAttribute=function(){
var e=this.editor.selection.getStart().clone(),t=this.editor.getSelectedRep(),n=0!=e.col&&this.editor.contents.getAttributeValueForPoint(e.withCol(e.col-1),"inline-code"),o=this.editor.contents.getAttributeValueForPoint(e,"inline-code"),i=this.editor.selection.getLine(),r=t.lines.atIndex(i)
;if(n&&!o){for(var a=e.col-1;a>-1&&this.editor.contents.getAttributeValueForPoint(e.withCol(a),"inline-code");)--a;var s=a+1,l=new v.Position(e.zone,e.line,s),d=new v.Position(e.zone,e.line,e.col)
;this.editor.contents.performDocumentApplyAttributesToRange(l,d,[["inline-code",""]]);this.editor.contents.performDocumentReplaceRange(l,l,"`");return!0}if(!n&&o){
for(var c=e.col+1;c<r.text.length&&this.editor.contents.getAttributeValueForPoint(e.withCol(c),"inline-code");)++c;var u=c;l=new v.Position(e.zone,e.line,e.col),d=new v.Position(e.zone,e.line,u)
;this.editor.contents.performDocumentApplyAttributesToRange(l,d,[["inline-code",""]]);this.editor.contents.performDocumentReplaceRange(d,d,"`");return!0}return!1}
;e.prototype.deleteCellsOfTable=function(){var e=this.editor.selection.getStart();if(e){
var t=this.editor.selection.getEnd(),n=e.zone!=v.Position.ROOT_ZONE?e.zone:t.zone!=v.Position.ROOT_ZONE?t.zone:null;if(n){var o=this.editor.managers.getLineEntryContainingZone(n)
;if(o&&"aceTable"==o.domInfo.lineManagerType){var i=this.editor.managers.lineManagerForLine(o,"aceTable");if(i&&i.getSelectedZonesForSpecialSelection().length){i.deleteSelectedZones();return!0}}}
return!1}};e.prototype.shouldDeletePreceedingCharacterToo=function(e,t){if(e.line!=t.line||0==e.col)return!1;var n=this.editor.getRep(e.zone).lines.atIndex(e.line).text,o=n.substring(e.col,t.col)
;if(/^\w+$/.test(o)){var i=n.substring(0,e.col);if(/ $/.test(i)){var r=n.substring(t.col,n.length);if(/^($|\W)/.test(r))return!0}}return!1};e.prototype.getCharCountToDelete=function(e,t,n,o){
for(var i=u.opIterator(n.alines[e]),r=0;i.hasNext();){var a=i.next(),s=r;if(t==(r+=a.chars)){
if(u.attribsAttributeValue(a.attribs,"mentionurl",this.editor.getApool())||u.attribsAttributeValue(a.attribs,"mentionspecial",this.editor.getApool())||u.attribsAttributeValue(a.attribs,"mentionpadid",this.editor.getApool())||u.attribsAttributeValue(a.attribs,"mentionfolderid",this.editor.getApool()))return{
selectPrevChar:!1,deleteCount:a.chars}}if(s<t&&t<=r){if("latex"==u.attribsAttributeValue(a.attribs,"magicObject",this.editor.getApool()))return{selectPrevChar:!0,deleteCount:0}}}return{
selectPrevChar:!1,deleteCount:1}};e.prototype.wrapKeyEventCallback=function(e){var t=this;return function(n){t.editor.core.incorporateUserChanges();n.preventDefault();e(n);return!0}}
;e.prototype.doMetaArrowKey=function(e){var t,n=this.editor.selection.get(),o=n.hasSelection,i=n.start;if(!o)return!1
;if(e==U.KeyCode.UP)t=new v.Position(v.Position.ROOT_ZONE,0,0);else if(e==U.KeyCode.DOWN)t=v.Position.endOfZone(this.editor,v.Position.ROOT_ZONE);else if(e==U.KeyCode.RIGHT){
t=v.Position.endOfLine(this.editor,i);if(!v.Position.equals(t,_.getEndOfVisualLine(this.editor,i)))return!1}this.editor.selection.set(t);return!0};e.prototype.tableCellGoLeft=function(e,t,n){
var o=this.editor.managers.getLineManagerForNonRootZoneId(this.editor.selection.getStart().zone);if(e)o.moveFocusCell(0,-1);else{
var i=o.getRowAndColIndicesForCellId(this.editor.selection.getStart().zone),r=i.rowIndex,a=i.colIndex;if(--a<0){if(0==r){if(t){o.insertRowAtIndex(0);r=0;a=o.getColCount()-1;o.setState({},(function(){
n?o.focusAndSelectCellContents(r,a):o.focusAndCollapseSelectionOntoCell(r,a,!0)}))}else this.goToLineAdjacentToTable(-1,!0,!1);return}r-=1;a=o.getColCount()-1}
n?o.focusAndSelectCellContents(r,a):o.focusAndCollapseSelectionOntoCell(r,a,!0)}};e.prototype.tableCellGoRight=function(e,t,n){
var o=this.editor.managers.getLineManagerForNonRootZoneId(this.editor.selection.getStart().zone);if(e)o.moveFocusCell(0,1);else{
var i=o.getRowAndColIndicesForCellId(this.editor.selection.getStart().zone),r=i.rowIndex,a=i.colIndex;if(++a>=o.getColCount()){if(r==o.getRowCount()-1){if(t){o.insertRowAtIndex(o.getRowCount());r+=1
;a=0;o.setState({},(function(){n?o.focusAndSelectCellContents(r,a):o.focusAndCollapseSelectionOntoCell(r,a)}))}else this.goToLineAdjacentToTable(1,!1,!1);return}r+=1;a=0}
n?o.focusAndSelectCellContents(r,a):o.focusAndCollapseSelectionOntoCell(r,a)}};e.prototype.tableCellGoUp=function(e){
var t=this.editor.managers.getLineManagerForNonRootZoneId(this.editor.selection.getStart().zone);if(e)t.moveFocusCell(-1,0);else{
var n=t.getRowAndColIndicesForCellId(this.editor.selection.getStart().zone),o=n.rowIndex,i=n.colIndex;--o<0?this.goToLineAdjacentToTable(-1,!1,!0):t.focusAndCollapseSelectionOntoCell(o,i,!1,!0)}}
;e.prototype.tableCellGoDown=function(e){var t=this.editor.managers.getLineManagerForNonRootZoneId(this.editor.selection.getStart().zone);if(e)t.moveFocusCell(1,0);else{
var n=t.getRowAndColIndicesForCellId(this.editor.selection.getStart().zone),o=n.rowIndex,i=n.colIndex
;++o>=t.getRowCount()?this.goToLineAdjacentToTable(1,!1,!1):t.focusAndCollapseSelectionOntoCell(o,i)}};e.prototype.goToLineAdjacentToTable=function(e,t,n){
var o=this.editor.managers.positionOfLineManagerContainingZone(this.editor.selection.getStart().zone),i=o.line+e
;i>=0&&i<this.editor.getRep(o.zone).lines.length()&&this.normalArrowIntoLine(o.zone,o.line,i,t||n,t)};e.prototype.atTopVisualLine=function(e){
return 0==e.line&&0==_.whichVisualLineOfAceLine(this.editor,e).index};e.prototype.atBottomVisualLine=function(e){if(e.line!=this.editor.getSelectedRep().lines.length()-1)return!1
;var t=_.whichVisualLineOfAceLine(this.editor,e);return t.index==t.numLines-1};e.prototype.shouldGoToCellBelow=function(e,t){return t&&this.atEndOfLastVisualLine(e)||!t&&this.atBottomVisualLine(e)}
;e.prototype.atEndOfLastVisualLine=function(e){var t=this.atBottomVisualLine(e),n=e.col==v.Position.endOfLine(this.editor,e).col;return t&&n};e.prototype.doArrowKeyInTableCell=function(e){var t={
38:"up",40:"down",37:"left",39:"right"}[e.keyCode],n=e.shiftKey;if(t){
if(this.editor.managers.getLineManagerForNonRootZoneId(this.editor.selection.getStart().zone).getSelectedZonesForSpecialSelection().length>=1){
"up"==t?this.tableCellGoUp(n):"down"==t?this.tableCellGoDown(n):"left"==t?this.tableCellGoLeft(n,!1):"right"==t&&this.tableCellGoRight(n,!1);return!0}
var o=this.editor.selection.getFocus(),i=this.editor.getSelectedRep().lines.atIndex(o.line);if("up"==t&&this.atTopVisualLine(o)){this.tableCellGoUp(n);return!0}
if("down"==t&&this.shouldGoToCellBelow(o,n)){this.tableCellGoDown(n);return!0}if("left"==t&&0==o.line&&o.col<=i.lineMarker){this.tableCellGoLeft(n,!1);return!0}
if("right"==t&&o.line==this.editor.getSelectedRep().lines.length()-1&&o.col==this.editor.getSelectedRep().lines.atIndex(this.editor.getSelectedRep().lines.length()-1).text.length){
this.tableCellGoRight(n,!1);return!0}}return!1};e.prototype.doTabKeyInTableCell=function(e){e?this.tableCellGoLeft(!1,!0,!0):this.tableCellGoRight(!1,!0,!0)};e.prototype.bindEvents=function(){
this.editor.observer.on("document-keyup",this.onDocKeyUpEvent);this.editor.observer.on("mousedown",this.onMouseEvent);this.editor.observer.on("compositionstart",this.onCompositionEvent)
;this.editor.observer.on("compositionend",this.onCompositionEvent);this.editor.observer.on("mouseup",this.onMouseEvent);this.editor.observer.on("keydown",this.handleKeydown)
;this.editor.observer.on("keyup",this.onKeyEvent);this.editor.observer.on("keypress",this.onKeyEvent)};e.prototype.unbindEvents=function(){
this.editor.observer.off("document-keyup",this.onDocKeyUpEvent);this.editor.observer.off("mousedown",this.onMouseEvent);this.editor.observer.off("compositionstart",this.onCompositionEvent)
;this.editor.observer.off("compositionend",this.onCompositionEvent);this.editor.observer.off("mouseup",this.onMouseEvent);this.editor.observer.off("keydown",this.handleKeydown)
;this.editor.observer.off("keyup",this.onKeyEvent);this.editor.observer.off("keypress",this.onKeyEvent)};e.prototype.doWrapSelection=function(e,t){if(this.editor.core.getIMEStatus())return!1
;if(t.ctrlKey||t.altKey||t.metaKey||!U.KeyCode.isPrintable(t.keyCode))return!1;for(var n,o=0,i=oe;o<i.length;o++){var r=i[o];if(e===r[0]||e===r[1]){n=r;break}}if(!n)return!1
;this.editor.core.incorporateUserChanges();var a=this.editor.selection.get(),s=a.start,l=a.end,d=a.hasSelection,c=a.isCollapsed;if(!d||c||s.zone!=l.zone||l.line>s.line+2)return!1;var u=!1
;if(s.line!=l.line){var h=this.editor.getSelectedRep(),p=h.lines.atIndex(s.line);if(s.col==p.text.length||p.lineMarker==p.text.length){u=!0;var f=h.lines.atIndex(l.line+1)
;s=new v.Position(s.zone,s.line+1,f.lineMarker)}var g=h.lines.atIndex(l.line);if(l.col<=g.lineMarker){u=!0;var m=h.lines.atIndex(l.line-1);l=new v.Position(l.zone,l.line-1,m.text.length)}}
if(s.line!=l.line)return!1;if(('"'===n[0]||"'"===n[0])&&this.editor.hasFeatureForSelectedRep("code")){
-1===this.editor.contents.getLineType(s).indexOf("code")&&("'"===n[0]?n=["‘","’"]:'"'===n[0]&&(n=["“","”"]))}if(this.editor.hasFeature("inline-code")&&"`"==e){this.scrubTextForCode(s,l,!1)
;this.editor.contents.toggleAttributeOnSelection("inline-code");(0,R.trackAce)("wrap-quotes",{ch:e});return!0}var y=n[0],b=n[1];u&&this.editor.selection.set({start:s,end:l})
;this.editor.contents.performDocumentReplaceRange(l,l,b,[],!0);this.editor.contents.performDocumentReplaceRange(s,s,y);(0,R.trackAce)("wrap-quotes",{ch:e});return!0};return e}();t.default=ne
;var oe=[["'","'"],['"','"'],["‘","’"],["“","”"],["‹","›"],["«","»"],["„","”"],["‚","’"],["`","`"],["「","」"],["『","』"],["〈","〉"],["《","》"],["(",")"],["[","]"],["{","}"],["<",">"],["⟨","⟩"],["⟦","⟧"],["〔","〕"],["〘","〙"],["【","】"],["〖","〗"],["⁅","⁆"],["⸢","⸣"],["⸤","⸥"],["（","）"],["［","］"],["｛","｝"],["＜","＞"],["｟","｠"],["¡","!"],["¿","?"],["⸘","‽"]]
;var ie=["u","b","i","s","a"],re=["div","li"];function ae(e){for(var t=e.element,n=e.allowedTagNames;t;){if(n.indexOf(t.tagName.toLowerCase()||"")>-1)return t;t=t.parentElement}return null}},
1385:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.doArrowKeyLeftAroundPocket=t.doArrowKeyRightAroundPocket=void 0;var o=n(146),i=n(20),r=n(242),a=n(31)
;t.doArrowKeyRightAroundPocket=function(e){return a.default.isOnButDoNotLog("paper_pocket_interstitial")?function(e){
var t=e.editor,n=e.shiftKey,a=t.selection.get(),s=a.focus,l=a.anchor,d=t.getSelectedRep();if(!d)return!1;var c=d.lines.atIndex(s.line);if(s.col<c.text.length)return!1
;if(s.line+1>=d.lines.length())return s.zone==i.Position.ROOT_ZONE;var u=d.lines.atIndex(s.line+1);if((0,o.getBackPocket)(c.lineNode)&&(0,o.getPocket)(u.lineNode)){
var h=new i.Position(s.zone,s.line+1,0);n?t.selection.set(r.focusByDocOrder(l,h)):t.selection.set(h);return!0}return!1}(e):a.default.isOnButDoNotLog("paper_pocket_endofline")?function(e){
var t=e.editor,n=e.shiftKey,o=t.selection.get(),a=o.focus,s=o.anchor,l=t.getSelectedRep();if(!l)return!1;var d=l.lines.atIndex(a.line);if(!(a.col>=d.text.length))return!1
;var c=a.line+1,u=l.lines.atIndex(c).lineMarker?1:0,h=new i.Position(a.zone,c,u);n?t.selection.set(r.focusByDocOrder(s,h)):t.selection.set(r.focusByDocOrder(h,h));return!0}(e):function(e){
var t=e.editor,n=e.shiftKey,o=t.selection.get(),a=o.focus,s=o.anchor,l=t.getSelectedRep();if(!l)return!1;var d=l.lines.atIndex(a.line);if(a.col==d.lineMarker){
var c=t.selection.isCollapsed()||n?a.col+1:Math.max(a.col,s.col),u=t.selection.isCollapsed()||n?a.line:Math.max(a.line,s.line),h=new i.Position(a.zone,u,c);if(c>d.text.length){
if(h.line+1>=l.lines.length())return!1;h=h.withLine(h.line+1).withCol(0)}n?t.selection.set(r.focusByDocOrder(s,h)):t.selection.set(r.focusByDocOrder(h,h));return!0}return!1}(e)}
;t.doArrowKeyLeftAroundPocket=function(e){return a.default.isOnButDoNotLog("paper_pocket_interstitial")?function(e){
var t=e.editor,n=e.shiftKey,a=t.selection.get(),s=a.focus,l=a.anchor,d=t.getSelectedRep();if(!d)return!1;if(s.line-1<0)return!1;var c=d.lines.atIndex(s.line);if(s.col!=c.lineMarker)return!1
;var u=d.lines.atIndex(s.line-1);if((0,o.getPocket)(c.lineNode)&&(0,o.getBackPocket)(u.lineNode)){var h=new i.Position(s.zone,s.line-1,u.text.length)
;n?t.selection.set(r.focusByDocOrder(l,h)):t.selection.set(h);return!0}return!1}(e):!a.default.isOnButDoNotLog("paper_pocket_endofline")&&function(e){
var t=e.editor,n=e.shiftKey,o=t.selection.get(),a=o.focus,s=o.anchor,l=t.getSelectedRep();if(!l)return!1;var d=l.lines.atIndex(a.line);if(n&&a.col==d.lineMarker){if(a.line-1<0)return!1
;var c=l.lines.atIndex(a.line-1),u=new i.Position(a.zone,a.line-1,c.text.length);t.selection.set(r.focusByDocOrder(s,u));return!0}return!1}(e)}},1386:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.wholeLineMacros=t.beginningOfLineMacros=t.REGEX_ASCII_PUNCTUATION=void 0;var o=n(4),i=/^(?![\s\S])|\W/
;t.REGEX_ASCII_PUNCTUATION=/[!"“”‘’#$%&'()*+,-.\/:;<=>?@[\\\]\^_`{|}~—–…]/;function r(e){
return e.hasFeature("headers",e.selection.getZone())&&(!e.contents.getLineType(e.selection.getStart())||e.lists.isHeaderListType(e.selection.getZone(),e.selection.getLine()))}
t.beginningOfLineMacros=[{text:"[] ",listType:"task",allowed:function(e){return e.hasFeature("tasks",e.selection.getZone())},lineLevel:!0,track:{event:o.IntentionEvent.CreateTask,props:{type:"todo",
context:o.EditorContext.Markdown}}},{text:"[x] ",listType:"taskdone",allowed:function(e){return e.hasFeature("tasks",e.selection.getZone())},lineLevel:!0,track:{event:o.IntentionEvent.CreateTask,
props:{type:"done",context:o.EditorContext.Markdown}}},{text:"[ ] ",listType:"task",allowed:function(e){return e.hasFeature("tasks",e.selection.getZone())},lineLevel:!0,track:{
event:o.IntentionEvent.CreateTask,props:{type:"todo",context:o.EditorContext.Markdown}}},{text:"- ",listType:"bullet",allowed:function(e){return e.hasFeature("bulleted",e.selection.getZone())},
lineLevel:!0,track:{event:o.IntentionEvent.CreateList,props:{type:"bulleted list",context:o.EditorContext.Markdown}}},{text:"* ",listType:"bullet",allowed:function(e){
return e.hasFeature("bulleted",e.selection.getZone())},lineLevel:!0,track:{event:o.IntentionEvent.CreateList,props:{type:"bulleted list",context:o.EditorContext.Markdown}}},{text:"### ",
listType:"hthree",allowed:r,lineLevel:!0,track:{event:o.IntentionEvent.FormatText,props:{type:"h3",context:o.EditorContext.Markdown}}},{text:"## ",listType:"htwo",allowed:r,lineLevel:!0,track:{
event:o.IntentionEvent.FormatText,props:{type:"h2",context:o.EditorContext.Markdown}}},{text:"# ",listType:"hone",allowed:r,lineLevel:!0,track:{event:o.IntentionEvent.FormatText,props:{type:"h1",
context:o.EditorContext.Markdown}}},{text:"> ",listType:"quote",allowed:function(e){return e.hasFeature("quotes")},lineLevel:!0,track:{event:o.IntentionEvent.FormatText,props:{type:"quote",
context:o.EditorContext.Markdown}}},{text:"| ",listType:"quote",allowed:function(e){return e.hasFeature("quotes")},lineLevel:!0,track:{event:o.IntentionEvent.FormatText,props:{type:"quote",
context:o.EditorContext.Markdown}}},{charRegexp:[/\d/,/[\.\)]/,/ /],regexp:/^(\d)[\.\)] /,listType:"number",allowed:function(e){
return e.hasFeature("numbered",e.selection.getZone())&&!e.lists.isHeaderListTypeButNotAllBold(e.selection.getZone(),e.selection.getLine())},lineLevel:!0,track:{event:o.IntentionEvent.CreateList,
props:{type:"numbered list",context:o.EditorContext.Markdown}}},{charRegexp:[/\d/,/\d/,/[\.\)]/,/ /],regexp:/^(\d\d)[\.\)] /,listType:"number",allowed:function(e){
return e.hasFeature("numbered",e.selection.getZone())&&!e.lists.isHeaderListTypeButNotAllBold(e.selection.getZone(),e.selection.getLine())},lineLevel:!0,track:{event:o.IntentionEvent.CreateList,
props:{type:"numbered list",context:o.EditorContext.Markdown}}},{charRegexp:[/\d/,/\./,/\)/,/ /],regexp:/^(\d)\.\) /,listType:"number",allowed:function(e){
return e.hasFeature("numbered",e.selection.getZone())&&!e.lists.isHeaderListTypeButNotAllBold(e.selection.getZone(),e.selection.getLine())},lineLevel:!0,track:{event:o.IntentionEvent.CreateList,
props:{type:"numbered list",context:o.EditorContext.Markdown}}},{charRegexp:[/\d/,/\d/,/\./,/\)/,/ /],regexp:/^(\d\d)\.\) /,listType:"number",allowed:function(e){
return e.hasFeature("numbered",e.selection.getZone())&&!e.lists.isHeaderListTypeButNotAllBold(e.selection.getZone(),e.selection.getLine())},lineLevel:!0,track:{event:o.IntentionEvent.CreateList,
props:{type:"numbered list",context:o.EditorContext.Markdown}}},{text:"---",magicObject:"hr",col:0,allowed:function(e){var t
;return e.hasFeature("hr")&&!(null===(t=e.getCurrentLineEntry())||void 0===t?void 0:t.text.match(/[^-]/))},lineLevel:!0},{text:"***",magicObject:"hr",col:0,allowed:function(e){var t
;return e.hasFeature("hr")&&!(null===(t=e.getCurrentLineEntry())||void 0===t?void 0:t.text.match(/[^*]/))},lineLevel:!0},{text:"___",magicObject:"hr",col:0,allowed:function(e){var t
;return e.hasFeature("hr")&&!(null===(t=e.getCurrentLineEntry())||void 0===t?void 0:t.text.match(/[^_]/))},lineLevel:!0},{text:"```",listType:"code",allowed:function(e){return e.hasFeature("code")},
lineLevel:!0},{text:"`",allowed:function(e){return e.hasFeature("inline-code")},inlineAttribute:"inline-code"},{charRegexp:[/[*_~]/,/./],regexp:/[*_~]./,markdownLeftFlank:function(e,n,o){n=n||""
;return(o=o||"").match(/\S/)&&(!o.match(t.REGEX_ASCII_PUNCTUATION)||!n||n.match(/\s/)||n.match(t.REGEX_ASCII_PUNCTUATION))},markdownRightFlank:function(e,n,o){o=o||""
;return(n=n||"").match(/\S/)&&o&&(!n.match(t.REGEX_ASCII_PUNCTUATION)||o.match(/\s/)||o.match(t.REGEX_ASCII_PUNCTUATION))}},{text:"<--\x3e",inlineReplace:"↔"},{charRegexp:[/</,/-/,/-/,/./],
regexp:/<--(.)/,inlineRegexReplace:"←$1"},{charRegexp:[/</,/-/,/[^->]/],regexp:/<-([^->])/,inlineRegexReplace:"←$1"},{text:"← ->",inlineReplace:"↔"},{text:"<->",inlineReplace:"↔"},{text:"--\x3e",
inlineReplace:"→"},{text:"->",inlineReplace:"→"},{charRegexp:[/\d/,/-/,/-/,/\d/],regexp:/(\d)--(\d)/,inlineRegexReplace:"$1–$2"},{previousCharRegex:/\w/,charRegexp:[/-/,/-/,/\w/],regexp:/--(\w)/,
inlineRegexReplace:"—$1"},{previousCharRegex:/\w/,charRegexp:[/-/,/-/,/-/,/\w/],regexp:/---(\w)/,inlineRegexReplace:"—$1"},{col:0,text:'--"',inlineReplace:"—“"},{col:0,text:'---"',inlineReplace:"—“"
},{previousCharRegex:/\w/,text:'--"',inlineReplace:"—”"},{previousCharRegex:/\w/,text:'---"',inlineReplace:"—”"},{previousCharRegex:/ /,text:'--"',inlineReplace:"—“"},{previousCharRegex:/ /,
text:'---"',inlineReplace:"—“"},{col:0,text:"--'",inlineReplace:"—‘"},{col:0,text:"---'",inlineReplace:"—‘"},{previousCharRegex:/\w/,text:"--'",inlineReplace:"—’"},{previousCharRegex:/\w/,text:"---'",
inlineReplace:"—’"},{previousCharRegex:/ /,text:"--'",inlineReplace:"—‘"},{previousCharRegex:/ /,text:"---'",inlineReplace:"—‘"},{previousCharRegex:/ /,charRegexp:[/-/,/-/,/[^->]/],regexp:/--([^->])/,
inlineRegexReplace:"—$1"},{previousCharRegex:/ /,charRegexp:[/-/,/-/,/-/,/[^->]/],regexp:/---([^->])/,inlineRegexReplace:"—$1"},{text:"...",inlineReplace:"…"},{charRegexp:[/'/],regexp:/'/,
previousCharRegex:/([\(\[\{\s])/,inlineRegexReplace:"‘"},{charRegexp:[/'/],regexp:/'/,col:0,inlineRegexReplace:"‘"},{charRegexp:[/'/],regexp:/'/,previousCharRegex:/([^:])/,inlineRegexReplace:"’"},{
charRegexp:[/‘/,/\d/],regexp:/‘(\d)/,inlineRegexReplace:"’$1"},{charRegexp:[/"/],regexp:/"/,previousCharRegex:/([\(\[\{\s])/,inlineRegexReplace:"“"},{charRegexp:[/"/],regexp:/"/,col:0,
inlineRegexReplace:"“"},{charRegexp:[/"/],regexp:/"/,inlineRegexReplace:"”"},{text:"<3 ",inlineReplace:"❤ "},{text:"</3 ",inlineReplace:"💔 "},{text:"=] ",inlineReplace:"😃 "},{text:"=[ ",
inlineReplace:"😞 "},{text:":) ",inlineReplace:"🙂 "},{text:":-) ",inlineReplace:"🙂 "},{text:"^_^ ",inlineReplace:"😄 "},{text:":-D ",inlineReplace:"😄 "},{text:":D ",inlineReplace:"😄 "},{
text:"=D ",inlineReplace:"😄 "},{text:"=P ",inlineReplace:"😛 "},{text:"=p ",inlineReplace:"😛 "},{text:":P ",inlineReplace:"😛 "},{text:":-P ",inlineReplace:"😛 "},{text:":p ",inlineReplace:"😛 "},{
text:":-p ",inlineReplace:"😛 "},{text:";P ",inlineReplace:"😜 "},{text:";-P ",inlineReplace:"😜 "},{text:";p ",inlineReplace:"😜 "},{text:";-p ",inlineReplace:"😜 "},{text:">:( ",inlineReplace:"😠 "
},{text:":( ",inlineReplace:"😞 "},{text:":-( ",inlineReplace:"😞 "},{text:":-/ ",inlineReplace:"😕 "},{text:":/ ",previousCharRegex:i,inlineReplace:"😕 "},{text:":-\\ ",inlineReplace:"😕 "},{
text:":\\ ",previousCharRegex:i,inlineReplace:"😕 "},{text:";-) ",inlineReplace:"😉 "},{text:";) ",inlineReplace:"😉 "},{text:":'( ",inlineReplace:"😢 "},{text:":'-( ",inlineReplace:"😢 "},{
text:":') ",inlineReplace:"😂 "},{text:":'-) ",inlineReplace:"😂 "},{text:":-| ",inlineReplace:"😐 "},{text:":| ",inlineReplace:"😐 "},{text:"-_- ",inlineReplace:"😑 "},{text:":o ",inlineReplace:"😮 "
},{text:":O ",inlineReplace:"😮 "},{text:":x ",inlineReplace:"😶 "},{text:":X ",inlineReplace:"😶 "},{text:":* ",inlineReplace:"😘 "},{text:":-* ",inlineReplace:"😘 "},{text:"O_o ",inlineReplace:"😮 "
},{text:"o_O ",inlineReplace:"😮 "},{text:"o_o ",inlineReplace:"😮 "},{text:"O_O ",inlineReplace:"😮 "},{text:":shrug: ",previousCharRegex:i,inlineReplace:"¯\\_(ツ)_/¯ "},{text:"$$",
allowed:function(e){return e.hasFeature("latex")},inlineMagicObject:"latex"}];t.wholeLineMacros=[]},1387:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(22),i=n(180),r=n(155),a=n(18),s=n(58),l=n(243),d=n(20),c=n(24),u=n(31),h=n(51),p=n(17),f=function(){function e(e,t){var n=this;this.handleChange=function(e){
e.touchedZoneIds&&e.touchedZoneIds.length>0&&n.onZonesTouched(e.touchedZoneIds);e.updatedZoneIds&&e.updatedZoneIds.length>0&&n.onZonesContentUpdated(e.updatedZoneIds)};this.editor=e
;this.reps=this.editor.getReps();this.apool=this.editor.getApool();this.contentTypeRegistry=t;this.editor.observer.on("change",this.handleChange);this.zoneToLineEntry={}
;this.currentInlineSelectedLineManager=null;this.currentlySelectedLineManagers=[]}e.prototype.dispose=function(){var e=this;this.editor.observer.off("change",this.handleChange)
;this.getAllLineManagers().forEach((function(t){t&&p.default.error.loggingTryCatch((function(){return e.unmountLineManager(t)}))}))};e.prototype.registerZoneForLine=function(e,t){
this.zoneToLineEntry[e]=t};e.prototype.getCurrentlySelectedLineManagers=function(){return this.currentlySelectedLineManagers.slice(0)};e.prototype.hasCurrentlySelectedLineManagers=function(){
return!!this.currentlySelectedLineManagers.length};e.prototype.unregisterZone=function(e){delete this.zoneToLineEntry[e]};e.prototype.isZoneRegistered=function(e){return e in this.zoneToLineEntry}
;e.prototype.getRegisteredZones=function(e){return Object.keys(this.zoneToLineEntry)};e.prototype.requestZoneId=function(e,t){var n=this;if(this.editor.observer){var o=(0,r.createZoneId)(e)
;if(this.editor.contents.getIsEditable())setTimeout((function(){t(o)}),0);else{var i=function(){if(n.editor.contents.getIsEditable()){n.editor.observer.off("editable-state-changed",i)
;setTimeout((function(){t(o)}),0)}};this.editor.observer.on("editable-state-changed",i)}}};e.prototype.getLineManager=function(e,t,n){if(!e)throw new Error("getLineManager got bad zoneId")
;var o=this.reps[e].lines.atIndex(t),i=o.domInfo;return i&&i.lineManagerType?this.lineManagerForLine(o,n):null};e.prototype.lineManagerForLine=function(e,t){var n=e.domInfo
;return n?t&&n.lineManagerType&&t!=n.lineManagerType?null:n.node.lineManager:null};e.prototype.getAllLineManagersForZone=function(e,t){var n=this
;if(!this.reps.hasOwnProperty(e)||this.reps[e].lines.isDisposed())return[];var o=[],i=0;this.reps[e].lines.forEach((function(e){var r=e.domInfo;if(r&&r.lineManagerType){var a=n.lineManagerForLine(e,t)
;a&&o.push({lineNumber:i,lineManager:a})}i++}));return o};e.prototype.getAllLineManagers=function(e){var t=[];for(var n in this.reps)this.getAllLineManagersForZone(n,e).forEach((function(e){
var n=e.lineManager;t.push(n)}));return t};e.prototype.preloadLineManager=function(e,t){this.getLineManager(e,t)};e.prototype.getLineManagerType=function(e,t){
if(!e)throw new Error("getLineManager got bad zoneId");if(!this.reps[e])throw new Error("getLineManager: reps has no entry for zone");var n=this.reps[e].lines.atIndex(t);if(!n)return null
;var o=n.domInfo;return o&&o.lineManagerType?o.lineManagerType:null};e.prototype.getLineManagerTypeContainingZone=function(e){var t=this.getLineEntryContainingZone(e);if(!t)return null;var n=t.domInfo
;return n&&n.lineManagerType?n.lineManagerType:null};e.prototype.getLineEntryContainingZone=function(e){if(e in this.zoneToLineEntry){var t=this.zoneToLineEntry[e];if(!t)return null
;this.lineManagerForLine(t);return t}return null};e.prototype.getLineManagerWithSpecialSelection=function(e){var t;if(!this.editor.hasSelection())return null
;var n,o=this.editor.selection.get(),i=o.start,r=o.end;i.zone!=d.Position.ROOT_ZONE?t=i.zone:r.zone!=d.Position.ROOT_ZONE&&(t=r.zone);t&&(n=this.getLineManagerForNonRootZoneId(t,e))
;return n&&n.hasSelectedZonesForSpecialSelection()?n:null};e.prototype.getChildZonesOfLineManager=function(e){if("aceTable"==e.domInfo.lineManagerType){
var t=e.domInfo.lineManagerData,n=[t.rowsZoneId,t.colsZoneId],i=this.editor.getVectorsRep(t.rowsZoneId,!0),r=this.editor.getVectorsRep(t.colsZoneId,!1);i.vectorIds.forEach((function(e){
r.vectorIds.forEach((function(t){n.push(h.getCellIdFromRowAndCol(e,t))}))}));return n}if((0,l.lineManagerTypeCanHaveZones)(e.domInfo.lineManagerType,this.contentTypeRegistry)){
var a=o.attribsToDict(e.domInfo.aline,e.domInfo.apool),s=this.editor.contents.exportZatextAndPool(),d=s.zatext,c=s.pool;return(0,l.getZonesReferencedByAttributes)(a,this.contentTypeRegistry,{zatext:d,
apool:c})}return[]};e.prototype.getChildZonesInRange=function(e,t){var n={text:[],rows:[],cols:[]};this._getChildZonesInRange(e,t,n);return n};e.prototype.getChildZonesInRangeRecursive=function(e,t){
var n={text:[],rows:[],cols:[]};this._getChildZonesInRange(e,t,n);for(var o=0;o<n.text.length;){var i=n.text[o];this._getChildZonesInRange(new d.Position(i,0,0),d.Position.endOfZone(this.editor,i),n)
;o++}return n};e.prototype._getChildZonesInRange=function(e,t,n){for(var i=this,r=e.zone,a=this.reps[r].alines,d=0==e.col?e.line:e.line+1,c=0==t.col?t.line:t.line+1,u=function(e){var t=(0,
s.getLineManager)(a[e],p.apool,p.contentTypeRegistry);if(t){var r=t.key;if("aceTable"==r){var d=t.value.split(" "),c=d[0],u=d[1];n.rows.push(c);n.cols.push(u)
;p.editor.getVectorsRep(c,!0).vectorIds.forEach((function(e){i.editor.getVectorsRep(u,!1).vectorIds.forEach((function(t){n.text.push(h.getCellIdFromRowAndCol(e,t))}))}))}else if((0,
l.lineManagerTypeCanHaveZones)(r,p.contentTypeRegistry)){var f=o.attribsToDict(a[e],p.apool),g=p.editor.contents.exportZatextAndPool(),m=g.zatext,v=g.pool;(0,
l.getZonesReferencedByAttributes)(f,p.contentTypeRegistry,{zatext:m,apool:v}).forEach((function(e){i.reps[e]&&n.text.push(e)}))}}},p=this,f=d;f<c;f++)u(f)}
;e.prototype.getChildZonesAtLine=function(e,t){var n=new d.Position(e,t,0),o=new d.Position(e,t+1,0);return this.getChildZonesInRange(n,o)};e.prototype.getLineManagerForNonRootZoneId=function(e,t){
var n=this.getLineEntryContainingZone(e);return this.lineManagerForLine(n,t)};e.prototype.getRowsZoneIdForCellId=function(e){var t=this.getLineEntryContainingZone(e)
;return t?t.domInfo.lineManagerData.rowsZoneId:null};e.prototype.hasSelection=function(e,t){var n=this.getChildZonesAtLine(e,t),o=this.editor.selection.get().zone
;return[].concat(n.text,n.rows,n.cols).some((function(e){return e===o}))};e.prototype.setInlineSelectedLineManager=function(e){
this.currentInlineSelectedLineManager!=e&&this.currentInlineSelectedLineManager&&this.currentInlineSelectedLineManager.unselectAll&&this.currentInlineSelectedLineManager.unselectAll()
;this.currentInlineSelectedLineManager=e};e.prototype.changeSelectionOnLineManagersInRange=function(e,t){this.currentlySelectedLineManagers.forEach((function(n){
n.unselectAll&&p.default.error.loggingTryCatch((function(){u.default.isOnButDoNotLog("paper_fix_collapsed_selection")&&e.zone==t.zone&&-1!=n.getAllChildZones().indexOf(e.zone)||n.unselectAll()}))}))
;this.currentlySelectedLineManagers=[];this.ensureSelectionOnLineManagersInRange(e,t)};e.prototype.ensureSelectionOnLineManagersInRange=function(e,t){var n=this
;this.getLineManagersInRange(e,t).forEach((function(e){if(-1==n.currentlySelectedLineManagers.indexOf(e)){n.currentlySelectedLineManagers.push(e);e.selectAll&&e.selectAll()}}))}
;e.prototype.getLineManagersInRange=function(e,t){var n=this;return this.getLinesInRangeWithLineManager(e,t).map((function(e){return n.lineManagerForLine(e)})).filter(Boolean)}
;e.prototype.getLinesInRangeWithLineManager=function(e,t){var n,o=this,i=e&&e.zone,r=t&&t.zone,a=[];if(i!=d.Position.ROOT_ZONE){n=this.getLineEntryContainingZone(i);a.push(n)}
if(r!=d.Position.ROOT_ZONE){var s=this.getLineEntryContainingZone(r);if(!n||!s||n.key===s.key)return[];a.push(s)}if(i==d.Position.ROOT_ZONE&&r==d.Position.ROOT_ZONE){
if(this.currentInlineSelectedLineManager){this.currentInlineSelectedLineManager.unselectAll&&this.currentInlineSelectedLineManager.unselectAll();this.currentInlineSelectedLineManager=null}
if(u.default.isOnButDoNotLog("paper_fix_collapsed_selection"))for(var l=0==e.col?e.line:e.line+1,c=0==t.col?t.line:t.line+1,h=l;h<c;h++){var p=this.editor.getRep(d.Position.ROOT_ZONE).lines.atIndex(h)
;this.lineManagerForLine(p)&&a.push(p)}else{this.getChildZonesInRange(e,t).rows.forEach((function(e){a.push(o.getLineEntryContainingZone(e))}))}}return a.filter(Boolean)}
;e.prototype.positionOfLineManagerContainingZone=function(e){if(e==d.Position.ROOT_ZONE)throw new Error("Cannot get parent of position in root zone")
;var t=this.getLineEntryContainingZone(e),n=this.editor.dom.zoneOfTopLevelNode(t.domInfo.node),o=this.editor.getRep(n).lines.indexOfKey(t.key);return new d.Position(n,o,0)}
;e.prototype.unmountLineManager=function(e){var t,n=c.findDOMNode(e);if(!n)return!1;var o=(0,a.firstParent)(n,"[".concat(i.CONTENT_TYPE_ID_ATTR,"]"))
;return!!(t=o?o.parentElement:n.parentElement)&&c.unmountComponentAtNode(t)};e.prototype.onZonesTouched=function(e){
var t=this,n=this.getLineEntriesForZones(e),o=this.editor.contents.exportZatextAndPool(),i=o.zatext,r=o.pool;Object.keys(n).forEach((function(e){
var o=n[e],a=o.lineEntry,s=o.touchedZoneIds,l=t.lineManagerForLine(a);if(l.onZonesTouched){l.onZonesTouched(s,i,r).forEach((function(e){t.registerZoneForLine(e,a)}))}}))}
;e.prototype.onZonesContentUpdated=function(e){var t=this,n=this.getLineEntriesForZones(e);Object.keys(n).forEach((function(e){var o=n[e],i=o.lineEntry,r=o.touchedZoneIds,a=t.lineManagerForLine(i)
;a.onZonesContentUpdated&&a.onZonesContentUpdated(r)}))};e.prototype.getLineEntriesForZones=function(e){var t=this,n={};e.forEach((function(e){
if(e==d.Position.ROOT_ZONE)throw new Error("getLineManagerInfoForZones does not monitor the root zone");var o=t.getLineEntryContainingZone(e);if(o){!(o.key in n)&&(n[o.key]={lineEntry:o,
touchedZoneIds:[]});n[o.key].touchedZoneIds.push(e)}}));return n};return e}();t.default=f},1388:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.LineNumbers=void 0
;var o=n(1),i=n(180),r=n(178),a=n(818),s=n(58),l=n(81),d=function(){function e(e,t){this.editor=null;this.trackers={};this.dirtyZones={};this.editor=e;this.pool=t}e.prototype.setEditor=function(e){
this.editor=e};e.prototype.tracker=function(e){this.trackers[e]||(this.trackers[e]=new a.NumberTracker);return this.trackers[e]};e.prototype.splice=function(e,t,n,o){var i=this,r=this.tracker(e)
;r.splice(t,n,o.map((function(e){return i.alineToLineInput(e)})));r.hasAnyDirtyLines()?this.dirtyZones[e]=!0:delete this.dirtyZones[e]};e.prototype.getLineOutput=function(e,t){
return this.tracker(e).get(t)};e.prototype.markClean=function(e,t){var n=this.tracker(e);n.markClean(t);n.hasAnyDirtyLines()||delete this.dirtyZones[e]};e.prototype.doUpdate=function(){var e=this
;if(this.editor){if(!this.editor.callStack.getCurrentCallStack().domClean)throw new Error("LineNumbers: DOM must be clean for doUpdate()");this.editor.core.withoutRecordingMutations((function(){
var t=function(t){e.trackers[t].getAllDirtyLines().forEach((function(n){e.updateLine(t,n.lineNum,n.output);e.trackers[t].markClean(n.lineNum)}))};for(var n in e.dirtyZones)t(n)}));this.dirtyZones={}}}
;e.prototype.alineToLineInput=function(e){var t=s.getLineLevelObjectOrList(e,this.pool,new i.default);if(!t||"list"!=t.key)return{code:!1};var n=s.parseListType(t.value);return n?{code:"code"==n.type
}:{code:!1}};e.prototype.updateLine=function(e,t,n){if(this.editor){if(null!==n.codeNumber){if(a=this.editor.dom.rootNodeOfZone(e)){var o=(s=(0,
r.getChildrenLines)(a)[t]).childNodes[0],i=n.concealCodeNumber?"":n.codeNumber.toString();o.setAttribute("data-code-line-number",i)}}if("0"==e){var a=this.editor.dom.getRoot(),s=(0,
r.getChildrenLines)(a)[t];if(0==n.lineNumCappedAt2){s.setAttribute("data-is-title","true");s.removeAttribute("data-is-subtitle");s.setAttribute("aria-level","1")}else if(1==n.lineNumCappedAt2){
s.removeAttribute("data-is-title");s.setAttribute("data-is-subtitle","true");s.removeAttribute("aria-level");s.removeAttribute("role")}else{s.removeAttribute("data-is-title")
;s.removeAttribute("data-is-subtitle");s.removeAttribute("role");s.removeAttribute("aria-level")}}}};return e=o.__decorate([l.nullifyProperties],e)}();t.LineNumbers=d},1389:function(e,t,n){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0});var o=n(81),i=1,r=[];t.default=function(){var e=!0,t=i++,n=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++){var o=t[n]
;if(o.title==e)return o}return null}("dynamicsyntax");if(!n)throw new Error("Dynamic styles sheet is not available. Possibly missing a call to `addHeadElementsForAceEditor` on initial render.")
;function a(){return n.cssRules||n.rules}function s(e){n.deleteRule&&n.deleteRule(e)}function l(e,n){for(var o=0;o<r.length;o++)if(r[o].dynamicStyleId==t&&r[o].selector==e&&r[o].media==n)return o
;return-1}function d(o,i,s){if(e){var d=l(o,s);if(d<0){!function(e,t,o,i){if(i){r=t+" {"+(i||"")+"}";o&&(r=o+" { "+r+" }");n.insertRule&&n.insertRule(r,e)}else{var r=t+" {}";o&&(r=o+" { "+r+" }")
;n.insertRule&&n.insertRule(r,e)}}(0,o,s,i);r.splice(0,0,{selector:o,media:s,dynamicStyleId:t});d=0}return s?a().item(d).cssRules[0].style:a().item(d).style}c[o]={};return c[o]}var c={};function u(){
for(var n=r.length-1;n>=0;n--)if(r[n].dynamicStyleId==t){c[r[n].selector]=a().item(n).style;s(n);r.splice(n,1)}e=!1}return{selectorStyle:d,removeSelectorStyle:function(t,n){if(e){var o=l(t,n)
;if(o>=0){s(o);r.splice(o,1)}}else delete c[t]},disable:u,dispose:(0,o.wrapCallOnce)((function(){u();c={}})),enable:function(){e=!0;for(var t in c){var n=c[t].cssText;if(n)d(t,String(n));else{
var o=d(t);for(var i in c[t])c[t][i]&&(o[i]=c[t][i])}delete c[t]}},isEnabled:function(){return e},info:function(){return r.length+":"+a().length},dump:function(e,t){
for(var n=0;n<r.length;n++)console.log(a().item(n))}}}},139:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(3),r=n(60),a=n(7),s=n(125),l=n(0),d=["note-small"],c=["note-small-plus"],u=["note-large"],h=function(e){o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.render=function(){var e=this.props.hideEmojiBadge?null:(0,s.getFirstEmojiFromTitle)(this.props.title,!0),t=l.Children.only(this.props.children),n=null,h=a.EmojiSize.Small,p="note-empty"
;if(-1!=d.indexOf(t.props.name)){h=a.EmojiSize.XXSmall;p="note-small-empty"}else if(-1!=c.indexOf(t.props.name)){h=a.EmojiSize.XSmall;p="note-small-plus-empty"}else if(-1!=u.indexOf(t.props.name)){
h=a.EmojiSize.Medium;p="note-large-empty"}if(e){t=l.cloneElement(t,o.__assign(o.__assign({},t.props),{name:p}));n=l.createElement("span",{className:"hp-list-item-icon-badge"
},l.createElement(r.default,{str:e,size:h}))}var f=i("hp-list-item-icon",this.props.className,{"hp-list-item-icon-small":h==a.EmojiSize.XXSmall,"hp-list-item-icon-small-plus":h==a.EmojiSize.XSmall,
"hp-list-item-icon-large":h==a.EmojiSize.Medium});return l.createElement("div",{className:f},t,n)};t.displayName="IconWrapper";return t}(l.PureComponent);t.default=h},1390:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(30),a=n(230),s=n(576),l=n(447),d=n(58),c=n(146),u=n(801),h=n(178),p=n(51),f=n(43),g=n(28),m=n(18),v=n(20),y=n(0),b=n(24),C=n(44),E=n(31),I=n(4),_=n(81),T=function(){
function e(e){var t=this;this.editor=e;this.dispose=(0,_.wrapCallOnce)((function(){t.editor.observer.off("dragstart",t.onDragStart);t.editor=null}));this.onDragStart=function(e){(0,
m.closest)(e.target,".gallery-item-wrapper")?t.onItemDragStart(e):e.preventDefault()};this.handleDocumentKeyup=function(e){"keyup"==e.type&&e.keyCode==f.KeyCode.ESCAPE&&t.finishDragOperation(!0)}
;e.observer.on("dragstart",this.onDragStart)}e.prototype.isValidGallery=function(e){return"gallery"==e.dataset.lineManager};e.prototype.initDragCursor=function(e,t,n){
var o=e.querySelector("img")||e,i=o?o.dataset.titleHint:null,r=this.dragImageInfo;r.item=o.cloneNode(!0);r.item.className="";r.item.classList.add("gallery-item");r.item.setAttribute("style","")
;delete r.item.dataset.reactid;for(var a=r.item.querySelectorAll("[data-reactid]"),s=0;a&&s<a.length;s++)delete a[s].dataset.reactid;var l=r.originGallery.getItemTitleFromUrl(r.originIndex)
;r.dragCursor=document.createElement("div");r.dragCursor.style.top="".concat(n.pageY,"px");r.dragCursor.style.left="".concat(n.pageX,"px");var d=i||l;if(d){r.dragTitle=document.createElement("div")
;r.dragTitle.textContent=d;r.dragTitle.classList.add("drag-cursor-title");r.dragTitle.classList.add("notranslate");r.dragCursor.classList.add("drag-cursor");(0,
m.toggleClass)(r.dragCursor,"is-embed",t);r.dragCursor.appendChild(r.item);r.dragCursor.appendChild(r.dragTitle);document.body.appendChild(r.dragCursor)}var c=r.dragCursor.querySelectorAll("a")
;for(s=0;c&&s<c.length;s++)c[s].setAttribute("href","#")};e.prototype.getOriginalImageAceLine=function(){
if(!this.dragImageInfo||!this.dragImageInfo.originGallery||!this.dragImageInfo.originGallery.doesExist())return null;var e=b.findDOMNode(this.dragImageInfo.originGallery);return e?(0,
m.closest)(e,".ace-line"):null};e.prototype.getOriginGalleryItemData=function(){if(this.dragImageInfo.originGallery&&this.dragImageInfo.originGallery.doesExist()){
var e=this.dragImageInfo.originGallery.getCurrentlyDraggingItemData();if(e){this.dragImageInfo.cachedGalleryItemData=e;return e}}return this.dragImageInfo.cachedGalleryItemData}
;e.prototype.onItemDragStart=function(e){if(document.body.classList.contains("pad-lightbox-open")||this.dragImageInfo&&this.dragImageInfo.committingChange)e.preventDefault();else{var t=(0,
m.closest)(e.target,".gallery-item-wrapper"),n=document.querySelector(".drag-cursor");(0,m.removeElements)([n]);e.preventDefault()
;var o=this.editor.dom.getRoot(),a=!!t&&!!t.querySelector(".inline-embed")||!!(0,m.closest)(t,".inline-embed"),s=t.querySelector(".gallery-item"),l=s,c=(0,m.firstParent)(l,".ace-line")
;if(c&&this.isValidGallery(c)){var u=this.editor.dom.getAceLineForNode(c),p=this.editor.selection.getPositionForNode(u);this.dragImageInfo={};this.dragImageInfo.inGalleryDrag=!1
;this.dragImageInfo.currentGallery=null;this.dragImageInfo.itemWidth=l.naturalWidth||(0,m.width)(l);this.dragImageInfo.itemHeight=l.naturalHeight||(0,m.height)(l);this.dragImageInfo.isEmbed=a
;this.dragImageInfo.itemSrc=s.getAttribute("data-target-src")||s.getAttribute("src")||s.getAttribute("href");var f=this.editor.selection.getPositionForNode(c),g=f.line;this.dragImageInfo.origin=f
;this.dragImageInfo.originGallery=this.editor.managers.getLineManager(f.zone,g,"gallery");var v=this.dragImageInfo.originGallery.getIndexForItem(s);this.dragImageInfo.originIndex=v
;this.dragImageInfo.cachedGalleryItemData=this.dragImageInfo.originGallery.getGalleryData().items[v];if(this.dragImageInfo.originGallery.splitMultirowIfNecessary()){
var y=v%d.MAX_GALLERY_ITEMS_PER_ROW,b=(v-y)/d.MAX_GALLERY_ITEMS_PER_ROW;this.dragImageInfo.originGallery=this.editor.managers.getLineManager(f.zone,g+b,"gallery")
;if(!this.dragImageInfo.originGallery){this.dragImageInfo=null;return}var C=this.dragImageInfo.originGallery.getItemWrapperAtIndex(y);if(!C){this.dragImageInfo=null;return}
l=s=C.querySelector(".gallery-item");c=(0,m.firstParent)(l,".ace-line");e=i.assignIn({},e,{target:l})}this.dragImageInfo.eventOffsetX=this.dragImageInfo.itemWidth/2
;this.dragImageInfo.eventOffsetY=this.dragImageInfo.itemHeight/2;this.initDragCursor(l,a,e);this.dragImageInfo.origItemWidth=(0,m.width)(l);this.dragImageInfo.origItemHeight=(0,m.height)(l)
;this.dragImageInfo.origItemHeightWithMargin=this.dragImageInfo.origItemHeight+2*parseInt(r.default.gallery_vertical_margin,10);this.dragImageInfo.editorPadding=this.editor.dom.getPadding()
;this.dragImageInfo.rootWidth=(0,m.width)(o);this.dragImageInfo.editorMiddleOffset=(0,m.offset)(o).left+this.dragImageInfo.editorPadding+this.dragImageInfo.rootWidth/2
;this.dragImageInfo.wasFullWidth=this.editor.media.isImageFullWidth(p)
;this.dragImageInfo.originalFloatLayout=c.classList.contains("ace-float-left")?"left":c.classList.contains("ace-float-right")?"right":null
;this.dragImageInfo.floatLayout=this.dragImageInfo.originalFloatLayout;var E=!!this.dragImageInfo.floatLayout;if(this.dragImageInfo.originGallery.getItems().length>1||!E){
this.dragImageInfo.inGalleryDrag=!0;this.setCurrentAttachedEl(c);this.dragImageInfo.currentGallery=this.dragImageInfo.originGallery;var I=this.dragImageInfo.currentGallery.getIndexForItem(s)
;this.dragImageInfo.currentGallery.dragBeginsInGallery(I)}else{var _=c;if(!this.dragImageInfo.floatLayout){var T=(0,h.getPreviousLine)(c,this.editor);T&&(_=T.lineNode)}this.setCurrentAttachedEl(_,!0)
;var S=this.getOriginalImageAceLine();S&&S.classList.add("hidden-for-media-drag");this.dragImageInfo.originGallery.dragBeginsInGallery(0);this.dragImageInfo.originGallery.dragExitsGallery()}
document.body.classList.add("media-drag-active");document.addEventListener("keyup",this.handleDocumentKeyup)}}};e.prototype.scrollToTop_=function(e,t){if(0!=(0,m.height)(t))(0,
m.setScrollTop)(t,e);else{(document.scrollingElement||document.documentElement).scrollTop=e}};e.prototype.scrollerWindowHeight_=function(e){var t=(0,m.height)(e);if(0==t){
var n=document.scrollingElement||document.documentElement;t=0!=n.clientHeight?n.clientHeight:window.innerHeight}return t};e.prototype.scrollerTop_=function(e){var t=(0,m.getScrollTop)(e);if(0==t){
t=(document.scrollingElement||document.documentElement).scrollTop}return t};e.prototype.maybeAutoScroll_=function(e,t){var n=this,o=this.editor,i=o.mouse.getPreviousMouseMoveInfo();if(i){
var r,a,s=e,l=i.evt,d=o.dom.getRoot(),c=o.dom.getScrollEl();if(g.isMobile()&&s instanceof TouchEvent){r=s.touches[0].clientY;if(l.originalEvent.touches){a=l.originalEvent.touches[0].clientY}}else{
r=s.clientY;a=l.clientY}var u=this.scrollerWindowHeight_(c),h=this.scrollerTop_(c),p=u/10,f=i&&r<a,v=i&&r>a;t=t||0;clearInterval(this.autoScroll);if(a<u/1.5-p&&f){if(h-5>0){h-=5;this.scrollToTop_(h,c)
;this.autoScroll=(0,C.setInterval)((function(){n.moveDragImage(e,t-5,!0)}),33)}}else if(a>u/1.5+p&&v){if(h+5+u<(0,m.height)(d)+100){h+=5;this.scrollToTop_(h,c);this.autoScroll=(0,
C.setInterval)((function(){n.moveDragImage(e,t+5,!0)}),33)}}}};e.prototype.moveDragImage=function(e,t,n){var o=this,i=this.editor;if(this.dragImageInfo&&!this.dragImageInfo.committingChange){
n||this.maybeAutoScroll_(e,t);var r,s,c,u=e;if(g.isMobile()&&u instanceof TouchEvent){var f=u.touches[0];r=f.pageX;c=(s=f.pageY)-window.pageYOffset}else{r=u.pageX;c=s=u.pageY}
this.dragImageInfo.dragCursor.style.top="".concat(s,"px");this.dragImageInfo.dragCursor.style.left="".concat(r,"px");var y=(0,l.findNearestDropLineFor)(e.target);if(!y){
if(!this.dragImageInfo.currentAttachedEl)return;y=this.dragImageInfo.currentAttachedEl}var b=this.editor.dom.getAceLineForNode(y),C=this.editor.selection.getPositionForNode(b),E=(0,
l.getDisabledMediaTypesForZone)(C.zone,i);if(null==E||E==a.DisabledMediaTypes.ALL_EXCEPT_IMAGES){
var I=this.isValidGallery(y),_=I?i.managers.getLineManager(C.zone,C.line,"gallery"):null,T=i.media.isImageFullWidth(C),S=!1,k=null,x=null;if(I&&!T){var w=(0,m.outerHeight)(y),P=c-(0,
m.offset)(y).top,A=Math.min(.1*w,20);if(P<A){(H=(0,h.getPreviousLine)(y,i))&&function(e){if(e){var t=i.selection.getPositionForNode(i.dom.getAceLineForNode(e)),n=i.media.isImageFullWidth(t)
;if(o.isValidGallery(e)&&!n){S=!0;x=_;k=i.managers.getLineManager(t.zone,t.line,"gallery")}}}(H.lineNode)}if(w-P<A){var O=(0,
h.getNextLine)(y,i),L=C.zone,N=O?i.selection.getPositionForNode(i.dom.getAceLineForNode(O.lineNode)):v.Position.endOfZone(i,L),M=i.media.isImageFullWidth(N);S=!0;k=_
;M||(x=i.managers.getLineManager(N.zone,N.line,"gallery"))}}var R=(0,p.isCellId)(C.zone),D=!!i.managers.getLineManager(C.zone,C.line,"aceTable");if(I||D||R){this.dragImageInfo.floatLayout=null
;if(y.classList.contains("ace-float-left")||y.classList.contains("ace-float-right"))return}else this.maybeFloatItem();if(!(this.dragImageInfo.floatLayout&&C.line<1)){S||this.cancelRowCreation()
;if(!this.dragImageInfo.inGalleryDrag||T||y!=this.dragImageInfo.currentAttachedEl){this.exitGalleryDrag();this.setCurrentAttachedEl(y,!I);var F=this.getOriginGalleryItemData(),z=F&&(0,
d.isFullRowGalleryItem)(F);if(!I||T||_.splitMultirowIfNecessary()||!_.dragCanEnterGallery()||z||S)S||this.exitGalleryDrag();else{this.dragImageInfo.inGalleryDrag=!0;this.setCurrentAttachedEl(b)
;this.dragImageInfo.currentGallery=_;this.dragImageInfo.currentGallery.dragEntersGallery(this.getOriginGalleryItemData(),e)}
}else this.dragImageInfo.inGalleryDrag&&!S&&this.dragImageInfo.currentGallery.dragMoves(e);if(S){this.exitGalleryDrag();var U=y;if(k!=_){var H;(H=(0,h.getPreviousLine)(y,i))&&(U=H.lineNode)}
this.beginRowCreation(U,k,x)}}}}};e.prototype.beginRowCreation=function(e,t,n){var o=this.editor,i=o.selection.getPositionForNode(e).line==v.Position.endOfZone(o,v.Position.ROOT_ZONE).line
;e==this.dragImageInfo.lineToInsertNewRowAfter||t==this.dragImageInfo.galleryAboveNewRow||n==this.dragImageInfo.galleryBelowNewRow||i||this.cancelRowCreation();this.dragImageInfo.isCreatingNewRow=!0
;this.dragImageInfo.lineToInsertNewRowAfter=e;this.dragImageInfo.galleryAboveNewRow=t;this.dragImageInfo.galleryBelowNewRow=n;t&&t.dragEntersAdjacentRowCreationArea(!0)
;n&&!i&&n.dragEntersAdjacentRowCreationArea(!1)};e.prototype.cancelRowCreation=function(){if(this.dragImageInfo.isCreatingNewRow){
this.dragImageInfo.galleryAboveNewRow&&this.dragImageInfo.galleryAboveNewRow.dragExitsAdjacentRowCreationArea()
;this.dragImageInfo.galleryBelowNewRow&&this.dragImageInfo.galleryBelowNewRow.dragExitsAdjacentRowCreationArea();this.dragImageInfo.galleryAboveNewRow=null;this.dragImageInfo.galleryBelowNewRow=null
;this.dragImageInfo.lineToInsertNewRowAfter=null;this.dragImageInfo.isCreatingNewRow=!1}};e.prototype.maybeFloatItem=function(){var e=(0,
m.offset)(this.dragImageInfo.item).left,t=!this.dragImageInfo.isEmbed
;e>this.dragImageInfo.editorMiddleOffset+300&&t?this.dragImageInfo.floatLayout="right":e<this.dragImageInfo.editorMiddleOffset-300&&t?this.dragImageInfo.floatLayout="left":("left"==this.dragImageInfo.floatLayout&&e>this.dragImageInfo.editorMiddleOffset-100||"right"==this.dragImageInfo.floatLayout&&e<this.dragImageInfo.editorMiddleOffset+100)&&(this.dragImageInfo.floatLayout=null)
};e.prototype.setCurrentAttachedEl=function(e,t){void 0===t&&(t=!1);this.removeDropHint();this.dragImageInfo.currentAttachedEl=e;if(t){var n=this.dragImageInfo.floatLayout,o=null
;if(E.default.isOnButDoNotLog("paper_pocket_interstitial")){var i=this.editor.selection.getPositionForNode(this.dragImageInfo.currentAttachedEl),r=this.editor.getLineEntry(i.zone,i);r&&(o=(0,
c.getLazyPocket)(this.editor,r,!0))}else o=(0,c.getPocket)(this.dragImageInfo.currentAttachedEl);o&&(this.dragImageInfo.currentAttachedPocketRef=o.put(y.createElement(s.DropHint,{count:1,
floatLayout:n,floatHeight:n?this.dragImageInfo.origItemHeightWithMargin:0}),n?"":"drop-hint"))}};e.prototype.removeDropHint=function(){
if(this.dragImageInfo.currentAttachedEl&&void 0!==this.dragImageInfo.currentAttachedPocketRef){var e=E.default.isOnButDoNotLog("paper_pocket_interstitial")?(0,
c.getBackPocket)(this.dragImageInfo.currentAttachedEl):(0,c.getPocket)(this.dragImageInfo.currentAttachedEl);if(e){e.remove(this.dragImageInfo.currentAttachedPocketRef)
;this.dragImageInfo.currentAttachedPocketRef=void 0}}};e.prototype.exitGalleryDrag=function(){if(this.dragImageInfo){
this.dragImageInfo.currentGallery&&this.dragImageInfo.currentGallery.dragExitsGallery();this.dragImageInfo.inGalleryDrag=!1;this.dragImageInfo.currentGallery=null}}
;e.prototype.getTrackingData=function(){
var e=this.editor,t=this.dragImageInfo.currentGallery?this.dragImageInfo.currentGallery.getGalleryStyle():this.dragImageInfo.originGallery.getGalleryStyle(),n=this.dragImageInfo.currentGallery&&this.dragImageInfo.currentGallery.getPosition(),o=n&&n.line,i=n&&(0,
u.getContextForZone)(n.zone);return{__pad_id:e.getPadId(),is_collection:!1,old_row:this.dragImageInfo.origin.line,old_alignment:this.dragImageInfo.originGallery.getGalleryStyle(),new_row:o,
new_alignment:t,context:i}};e.prototype.finishDragOperation=function(e){void 0===e&&(e=!1);if(this.dragImageInfo&&!this.dragImageInfo.committingChange){
document.removeEventListener("keyup",this.handleDocumentKeyup);clearInterval(this.autoScroll);this.removeDropHint();if(e){this.cancelDragOperation();(0,I.trackAce)("drag-cancel")
;this.cleanupDragOperationAfterFinishing()}else{this.dragImageInfo.committingChange=!0;this.commitGalleryChangesToEditor()}}};e.prototype.finalizeDragIntoExistingGallery=function(){
var e=this.dragImageInfo.originGallery.getItems().length>1,t=this.dragImageInfo.currentGallery.getCount(),n=this.dragImageInfo.cachedGalleryItemData&&this.dragImageInfo.cachedGalleryItemData.type;(0,
I.trackAce)("drag-finish",o.__assign({isStandalone:!1,wasStandalone:!e,galleryCount:t,galleryItemType:n,withinSameGallery:this.dragImageInfo.originGallery==this.dragImageInfo.currentGallery
},this.getTrackingData()));return this.dragImageInfo.currentGallery.dragFinishesInGallery(this.getOriginGalleryItemData())};e.prototype.finalizeDragCreatingNewGallery=function(){
var e,t=this.editor,n=this.dragImageInfo.originGallery.getItems().length>1;if(this.dragImageInfo.isCreatingNewRow){e=t.selection.getPositionForNode(this.dragImageInfo.lineToInsertNewRowAfter)
;this.cancelRowCreation()}else e=t.selection.getPositionForNode(this.dragImageInfo.currentAttachedEl);var i=Math.max(1,e.line+(this.dragImageInfo.floatLayout?0:1)),r=e.zone,a=t.getRep(r)
;i==a.lines.length()&&(i-=1);var s={items:[this.getOriginGalleryItemData()]},l=[["magicObject","gallery"],["gallery",JSON.stringify(s)]]
;this.dragImageInfo.floatLayout&&l.push(["float",this.dragImageInfo.floatLayout]);this.dragImageInfo.wasFullWidth&&l.push(["fullWidth","true"])
;var d=this.dragImageInfo.cachedGalleryItemData&&this.dragImageInfo.cachedGalleryItemData.type;(0,I.trackAce)("drag-finish",o.__assign({floatLayout:this.dragImageInfo.floatLayout,galleryItemType:d,
isStandalone:!0,wasStandalone:!n,galleryCount:1},this.getTrackingData()));return{callback:function(){var e=new v.Position(r,i,0),n=e;t.contents.performDocumentReplaceRange(e,e,"\n",[])
;t.contents.performDocumentReplaceRange(e,e,"*",l,!1,!0);t.selection.set({start:n.withCol(0),end:n.withCol(1)});t.focus()},delayMs:0}};e.prototype.commitGalleryChangesToEditor=function(){
var e=this.editor,t=this.dragImageInfo.currentAttachedEl;if(t){var n=e.selection.getPositionForNode(t),o=e.dom.getRootSelector(),i=this.getOriginalImageAceLine();if((0,m.hasParents)(i,o)){if((0,
m.hasParents)(t,o)){var r=!!e.managers.getLineManager(n.zone,n.line,"gallery")&&!e.media.isImageFullWidth(n)
;if(this.dragImageInfo.currentGallery||this.dragImageInfo.isCreatingNewRow||!this.dragImageInfo.inGalleryDrag&&!r){var a=e.getRep(n.zone),s=e.dom.isRootZoneId(n.zone)?1:0
;if(n.line>=s&&n.line<=a.lines.length()){var l=[],d=this.dragImageInfo.inGalleryDrag?this.finalizeDragIntoExistingGallery():this.finalizeDragCreatingNewGallery();d&&l.push(d)
;if(this.dragImageInfo.originGallery!=this.dragImageInfo.currentGallery){var c=this.dragImageInfo.originGallery.dragFinishesOutsideGallery();c&&l.push(c)}this.cleanupDragOperationAfterFinishing(l)
}else this.abortGalleryChanges()}else this.abortGalleryChanges()}else this.abortGalleryChanges()}else this.abortGalleryChanges()}else this.abortGalleryChanges()}
;e.prototype.abortGalleryChanges=function(){var e=this;if(1==this.dragImageInfo.originGallery.getItems().length){var t=this.getOriginalImageAceLine(),n=this.editor.selection.getPositionForNode(t)
;(this.editor.media.isImageFloatLeft(n)&&"left"!=this.dragImageInfo.floatLayout||this.editor.media.isImageFloatRight(n)&&"right"!=this.dragImageInfo.floatLayout)&&this.editor.execute("restoreGalleryItemFloatAttrib",(function(){
e.editor.contents.performDocumentApplyAttributesToRange(new v.Position(n.zone,n.line,0),new v.Position(n.zone,n.line,1),[["float",e.dragImageInfo.floatLayout||""]])}))}this.cancelDragOperation()
;this.cleanupDragOperationAfterFinishing()};e.prototype.cleanupDragOperationAfterFinishing=function(e){var t=this;this.exitGalleryDrag();var n=function(){t.removeDropHint();t.dragImageInfo=null
;document.body.classList.remove("media-drag-active")},o=document.querySelector(".drag-cursor");(0,m.removeElements)([o]);if(e&&e.length>0){e.push({callback:n,delayMs:0})
;var r=i.maxBy(e,"delayMs").delayMs;this.editor.execute("handleDropImage",(function(){setTimeout((function(){t.editor.execute("media_drag-postDropActions",(function(){e.forEach((function(e){
e.callback()}))}))}),r)}))}else n()};e.prototype.cancelDragOperation=function(){var e=this.getOriginalImageAceLine();e&&e.classList.remove("hidden-for-media-drag");this.cancelRowCreation()
;this.dragImageInfo.originGallery.dragCanceled();this.dragImageInfo.currentGallery&&this.dragImageInfo.currentGallery.dragCanceled()};e.prototype.isDragging=function(){return!!this.dragImageInfo}
;return e}();t.default=T},1391:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(54),i=n(81),r=n(28),a=n(18),s=n(4),l=n(17),d=n(38),c=n(61),u=function(){function e(e){var t=this
;this.editor=e;this.blockedClicks=[];this.ignoreMouseMoveEvent=!1;this.isMousePressed=!1;this.touchDragged=!1;this.isTouchLongPressed=!1;this.tooltipInfo={};this.dispose=(0,
i.wrapCallOnce)((function(){t.unbindEvents();t.editor=null;t.root=null}));this.handleClick=function(e){t.processClick(e)&&t.onClickMisc(e)};this.unblockClicks=function(){t.blockedClicks.splice(0,2)}
;this.handleTouchStart=function(e){var n=e;t.touchDragged=!1;t.touchStartX=n.touches[0].clientX;t.touchStartY=n.touches[0].clientY;clearTimeout(t.touchStartEventTimeout)
;t.touchStartEventTimeout=setTimeout((function(){t.handleTouchTimeout(n)}),200);if(t.taskEvtNode(n)){e.stopPropagation();e.preventDefault()}};this.handleTouchMove=function(e){
clearTimeout(t.touchStartEventTimeout);var n=e;(Math.abs(n.touches[0].clientX-t.touchStartX)>10||Math.abs(n.touches[0].clientY-t.touchStartY)>10)&&(t.touchDragged=!0);if(t.isSelectableImage(n)){
t.editor.mediaDrag.isDragging()&&n.preventDefault();t.onMouseMove(e)}};this.handleTouchFinish=function(e){var n=e;clearTimeout(t.touchStartEventTimeout);if(t.isTouchLongPressed){
if(t.isSelectableImage(n)&&t.editor.mediaDrag&&t.editor.mediaDrag.isDragging()){t.editor.mediaDrag.finishDragOperation();n.preventDefault()}}else t.touchDragged||t.onClickMisc(e)
;t.isTouchLongPressed=!1};this.captureClick=function(e){for(var n=0;n<t.blockedClicks.length;n+=2){var o=t.blockedClicks[n],i=t.blockedClicks[n+1]
;if(!(Math.abs(e.clientX-o)>25||Math.abs(e.clientY-i)>25)){e.stopPropagation();e.preventDefault();return}}var r=(0,a.closest)(e.target,".inline-latex");if(r&&r.inlineMagicObject){
t.editor.execute("clickBeginEditLatex",(function(){r.inlineMagicObject.beginEdit()}));e.preventDefault();e.stopPropagation()}else;};this.handleMouseOver=function(e){
var n=t.editor,o=n.dom.getParentZoneAceLine(e.target);if(o&&!n.dom.internalIsNodeDirty(o)){var i=n.selection.getPositionForNode(o);n.managers.preloadLineManager(i.zone,i.line)}}
;this.handleMouseOut=function(e){if(t.tooltipInfo.tooltip&&(!e.relatedTarget||!t._isElementChildOf(e.relatedTarget,t.tooltipInfo.target))){t.tooltipInfo.target=null
;t.editor.dynamicCSS.selectorStyle("body #tooltip:before").borderBottomColor="rgba(59, 58, 60, 0.95)";t.tooltipInfo.tooltip.style.display="none"}};this.onMouseDown=function(e){t.isMousePressed=!0
;t.latestMouseDownInfo={evt:e,date:Date.now()};if(t.taskEvtNode(e)){e.stopPropagation();e.preventDefault()}};this.onMouseUp=function(e){t.isMousePressed=!1;t.editor.mediaDrag.finishDragOperation()
;t.editor.textDrag.finishDragOperation();t.latestMouseUpInfo={evt:e,date:Date.now()}};this.onMouseMove=function(e){if(!t.ignoreMouseMoveEvent){t.previousMouseMoveInfo=t.latestMouseMoveInfo
;t.latestMouseMoveInfo={evt:e,date:Date.now()};t.editor.mediaDrag.moveDragImage(e);t.editor.textDrag.handleDragMove(e)}};this.onFocus=function(){t.editor.focus()
;t.editor.dom.getEditorEl().classList.add("ace-focused")};this.onBlur=function(){var e=t.editor;e.callStack.hasCurrentCallStack()||e.execute("onblur",(function(){}))
;e.dom.isNodeInEditor(document.activeElement)||e.dom.getEditorEl().classList.remove("ace-focused")};this.root=e.dom.getRoot();this.bindEvents()}e.prototype.bindEvents=function(){
this.editor.observer.on("click",this.handleClick);this.editor.observer.on("capture-click",this.captureClick);this.editor.observer.on("focus",this.onFocus);this.editor.observer.on("blur",this.onBlur)
;this.editor.observer.on("mousedown",this.onMouseDown);this.editor.observer.on("mouseover",this.handleMouseOver);this.editor.observer.on("mouseout",this.handleMouseOut)
;this.editor.observer.on("mouseup",this.onMouseUp);this.editor.observer.on("mousemove",this.onMouseMove);this.editor.observer.on("touchstart",this.handleTouchStart)
;this.editor.observer.on("touchmove",this.handleTouchMove);this.editor.observer.on("touchend",this.handleTouchFinish);this.editor.observer.on("touchcancel",this.handleTouchFinish)}
;e.prototype.unbindEvents=function(){this.editor.observer.off("click",this.handleClick);this.editor.observer.off("capture-click",this.captureClick);this.editor.observer.off("focus",this.onFocus)
;this.editor.observer.off("blur",this.onBlur);this.editor.observer.off("mousedown",this.onMouseDown);this.editor.observer.off("mouseover",this.handleMouseOver)
;this.editor.observer.off("mouseout",this.handleMouseOut);this.editor.observer.off("mouseup",this.onMouseUp);this.editor.observer.off("mousemove",this.onMouseMove)
;this.editor.observer.off("touchstart",this.handleTouchStart);this.editor.observer.off("touchmove",this.handleTouchMove);this.editor.observer.off("touchend",this.handleTouchFinish)
;this.editor.observer.off("touchcancel",this.handleTouchFinish)};e.prototype.blockClicks=function(e,t){this.blockedClicks.push(e,t);setTimeout(this.unblockClicks,300)}
;e.prototype.getLatestMouseClickInfo=function(){return this.latestMouseClickInfo};e.prototype.processClick=function(e){var t=this;this.latestMouseClickInfo={evt:e,date:Date.now()}
;this.editor.execute("handleClick",(function(){t.editor.callStack.getIdleWorkTimer().atMost(200)}),{shouldIncorp:!1});var n=c.default.mac&&e.ctrlKey&&e.button<1||e.button>1,o="touchend"==e.type;if(o){
if(this.touchDragged){e.preventDefault();return!1}this.blockClicks(this.touchStartX,this.touchStartY)}else if(n)return!1;o&&window.focus();return!0};e.prototype._isElementChildOf=function(e,t){
for(;e&&e!=t;)e=e.parentNode;return e==t};e.prototype.getLatestMouseDownInfo=function(){return this.latestMouseDownInfo};e.prototype.getLatestMouseUpInfo=function(){return this.latestMouseUpInfo}
;e.prototype.getLastTimeMouseMove=function(){return this.latestMouseMoveInfo&&this.latestMouseMoveInfo.date};e.prototype.getPreviousMouseMoveInfo=function(){return this.previousMouseMoveInfo}
;e.prototype.getLatestMouseMoveInfo=function(){return this.latestMouseMoveInfo};e.prototype.ignoreMouseMoveEventTemporarily=function(){var e=this;this.ignoreMouseMoveEvent=!0
;clearTimeout(this.ignoreMouseMoveEventTimeout);this.ignoreMouseMoveEventTimeout=setTimeout((function(){e.ignoreMouseMoveEvent=!1}),250)};e.prototype.getAceLineFromEvent=function(e){
var t=this.editor,n=t.dom.getRoot(),o=(0,a.getScrollTop)(window),i=(0,a.offset)(n).left+t.dom.getPadding(),r=(0,a.offset)(n.firstChild).top,s=(0,a.offset)(n.lastChild).top,l=(0,
d.clamp)(r,e.pageY-o,s),c=document.elementFromPoint(i,l);return t.dom.getAceLineForNode(c)};e.prototype.getIsMousePressed=function(){return this.isMousePressed};e.prototype.isLink=function(e){
return"a"==(e.tagName||"").toLowerCase()&&e.href};e.prototype.onClickMisc=function(e){var t=this.editor,n=e;if(!t.media.onClick(n)){var i=t.autolink.getLastAutolinkPosition();if(i){
t.autolink.findAutolinkStartPosition(i[0])&&t.execute("removeAutolink",(function(){t.autolink.clearAutolink();t.autolink.setLastAutolinkPosition(null)}))}
for(var r=e.target;r&&r.parentNode&&!this.isLink(r);)r=r.parentNode;var a=r&&this.isLink(r)?r:null;if(!a||a.classList.contains("mention-person")||a.classList.contains("ace-ui-link")||!t.comments){
var s=this.taskEvtNode(n);if(s){if(null!=t.padController?t.padController.getEditableState(!0)==o.EditableState.Editable:t.contents.getIsEditable()){this.toggleTaskLists(s);e.preventDefault()
;e.stopPropagation();return}}this.onClickGuessedDueDate(n)}else{
var d=t.selection.getPositionForNode(r),c=t.comments.getActiveThreadIdsAtPoint(d),u=l.default.events.shouldOpenInNewTab(n,!0),h=[a.href,u,c];t.observer.trigger("open-link",h);e.preventDefault()
;e.stopPropagation()}}};e.prototype.handleTouchTimeout=function(e){this.isTouchLongPressed=!0;var t=e.target||e.srcElement
;t&&this.isSelectableImage(e)&&t instanceof HTMLImageElement&&!this.editor.media.isImagePlaceholder(t)&&this.editor.mediaDrag.onDragStart(e)};e.prototype.isSelectableImage=function(e){
var t=(e.target||e.srcElement).className;return t&&r.isNativeMobileApp()&&this.editor.contents.getIsEditable()&&t.indexOf("gallery-item-selectable")>=0};e.prototype.onClickGuessedDueDate=function(e){
var t,n,o=(0,a.closest)(e.target,".suggested-due-date");if(o){var i=(0,a.closest)(o,".line-list-type-task");if(i){var r=i.querySelector("li").dataset.usuallyUniqueId,l=o.dataset.guessedDate;if(r&&l){
var d=new Date(Number(l));s.IntentionEvent.ClickDueDateInText.track({date:d});null===(n=null===(t=this.editor)||void 0===t?void 0:t.observer)||void 0===n||n.trigger("suggested-due-date",{uuid:r,date:d
})}}}};e.prototype.taskEvtNode=function(e){var t=this,n=this.editor,o=r.isTouchDevice();function i(e){return o?!!(0,
a.closest)(e,".line-list-type-task, .line-list-type-taskdone"):"ul"==(e.tagName||"").toLowerCase()&&e.className.indexOf("list-task")>-1}
for(var s=e.target;s&&s.parentElement&&!i(s)&&"li"==s.nodeName.toLowerCase();)s=s.parentElement;if(!s||!i(s))return null;var l=0;if(void 0!==e.clientX){l=e.clientX}else if(e.changedTouches){
l=e.changedTouches[0].clientX}var d,c=(0,a.closest)(s,".ace-editor"),u=(0,a.offset)(c).left,h=l-u,p=this.latestMouseDownInfo&&this.latestMouseDownInfo.evt
;this.touchStartX?d=this.touchStartX-u:p&&p.clientX&&(d=p.clientX-u);var f=((0,a.outerWidth)(c)-(0,a.width)(c))/2,g=function(i,r){var l=s.querySelector("span");l||(l=s.querySelector("li"))
;if(!l)return!1;var d=s.querySelector("ul.listtype-task, ul.listtype-taskdone");if(!d&&!(d=(0,a.closest)(s,"ul.listtype-task, ul.listtype-taskdone")))return!1;if(o){var c=(0,a.closest)(s,".ace-line")
;if(!c||t.touchStartY>(0,a.offset)(c).top+30)return!1}if(function(e){var t=n.dom.getAceLineForNode(e.target);return t&&t.classList.contains("ace-rtl")}(e)){var u=(0,a.outerWidth)(t.root)-f,h=(0,
a.closest)(d,".ace-editor");h||(h=t.root);var p=l.getBoundingClientRect().left-(0,a.offset)(h).left+l.offsetWidth;return i-u<=(o?16:0)&&i>p&&(!o||t.touchStartX<(0,a.offset)(d).left+(0,
a.outerWidth)(d)+32)}var g=l.getBoundingClientRect().left-r;return i-f>=0-(o?16:0)&&(!o||t.touchStartX>(0,a.offset)(d).left-32)&&i<g};return g(h,u)&&(!d||g(d,u))?s:null}
;e.prototype.toggleTaskLists=function(e){var t=this,n=this.editor.selection.getPositionForNode(e);this.editor.execute("toggleTaskViaMouse",(function(){t.editor.lists.toggleTaskLists(n)}))};return e}()
;t.default=u},1392:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(58),r=n(230),a=n(22),s=n(346),l=n(20),d=n(238),c=n(51),u=n(81),h=n(4),p=n(154),f=n(7),g=n(540),m=n(803),v=n(27),y=n(61),b=n(223),C=n(162),E=n(31),I=function(){function e(e,t){
var n=this;this.editor=e;this.contentTypeRegistry=t;this.handlePaste=function(e,t){var o=t||function(e){return(new DOMParser).parseFromString(e,"text/html").body};n.onPaste_(e,o)
;E.default.isOnButDoNotLog("paper_soft_mentions")&&(0,C.refreshSoftMentionsInPad)(n.editor)};this.editor=e;this.bindEvents()}e.prototype.dispose=function(){this.unbindEvents()}
;e.prototype.bindEvents=function(){this.editor.observer.on("paste",this.handlePaste)};e.prototype.unbindEvents=function(){this.editor.observer.off("paste",this.handlePaste)}
;e.prototype.onPaste=function(e,t){this.handlePaste(e,t)};e.prototype.onPaste_=function(e,t){(0,h.trackAce)("paste");var n=e.clipboardData
;n&&(!n.getData||this.maybeImagePaste(e)||this.maybePasteTableData(e,t)||this.maybePasteLink(e)||this.maybePasteMarkdown(e)||this.maybeRichPaste(e,t)||this.maybePlainTextPaste(e)||/text\/plain/.test(JSON.stringify(n.types)))
};e.prototype.maybeImagePaste=function(e){var t,n=e.clipboardData;return!!(this.editor.hasFeature("media")&&n&&(t=n.types,
t&&(1===t.length&&"Files"===t[0]||2===t.length&&/("text\/plain","Files"|"Files","text\/plain")/.test(JSON.stringify(t))||2===t.length&&/"text\/html","Files"/.test(JSON.stringify(t))&&/^<meta[^>]*><img src="[^"]+"\/>$/.test(n.getData("text/html")))))&&this.pasteImages(e)
};e.prototype.pasteImages=function(e){if(y.default.blink||y.default.webkit&&y.default.engineVersion>=604||y.default.gecko&&y.default.engineVersion>=57){
var t=e.clipboardData,n=this.getImages(t.items||[]);if(n.length>0){e.stopPropagation();e.preventDefault();this.insertImagesOnPaste(n);return!0}}return!1};e.prototype.getImages=function(e){
var t=Array.prototype.slice.call(e).filter((function(e){return"file"==e.kind})),n=t.filter((function(e){return 0==e.type.indexOf("image/")}));return n.length<t.length?[]:n.map((function(e){
return e.getAsFile()})).filter((function(e){return!!e}))};e.prototype.insertImagesOnPaste=function(e){var t=this;this.editor.execute("onPasteImageData",(function(){
var n=t.editor.media.isImageType(t.editor.media.getSelectedGalleryEmbedData().embedType),o=n?t.editor.selection.getStart():t.getImagePastePosition()
;t.editor.media.insertFiles(e,o,n?f.MediaInsertionMode.ReplaceWithReflow:f.MediaInsertionMode.InsertAfterSelectionInExistingGallery)}))};e.prototype.getImagePastePosition=function(){
if(this.editor.media.getSelectedGalleryOrNull())return this.editor.selection.getStart();this.editor.contents.performDocumentReplaceSelection("")
;var e=this.editor.selection.getStart(),t=this.editor.getCurrentLineEntry(),n=e.col>0,o=e.col<t.text.length||e.line==this.editor.getSelectedRep().lines.length()-1;if(n){
this.editor.contents.performDocumentReplaceRange(e,e,"\n");e=e.withLine(e.line+1).withCol(0)}o&&this.editor.contents.performDocumentReplaceRange(e,e,"\n");var i=e.withLine(e.line+1)
;this.editor.selection.set(i);return e};e.prototype.maybePasteTableData=function(e,t){var n=this,o=e.clipboardData;if(!/text\/html/.test(JSON.stringify(o.types)))return!1
;var i=this.editor.selection.get(),r=i.hasSelection,a=i.start;if(r&&c.isCellId(a.zone)){var s=o.getData("text/html"),l=this.getPastedTableData(s,t);if(l){var d=!1
;this.editor.execute("pasteCellsOntoTable",(function(){var e=n.editor.selection.getStart();if(e&&c.isCellId(e.zone)){
n.editor.managers.getLineEntryContainingZone(e.zone).domInfo.node.lineManager.pasteCellsOntoTable(l.line,l.attribs,l.additionalZatext);d=!0}}));if(d){h.IntentionEvent.TablePaste.track({})
;e.stopPropagation();e.preventDefault();return!0}}}return!1};e.prototype.getPastedTableData=function(e,t){if("undefined"==typeof DOMParser)return null;var n=t(e);this.replaceDuplicateUniqueIds(n)
;this.addMissingUniqueIds(n);var o=(0,r.makeContentCollectorWithoutWidgets)(this.contentTypeRegistry,this.editor.getApool(),d.className2Author,{disableCode:!0,disableTimelines:!0,
comments:this.editor.hasFeature("comments")?this.editor.comments:null,editorType:this.editor.editorType});o.notifyNode(n);var i=o.finish()
;return 2==i.lines.length&&"*"==i.lines[0]&&""==i.lines[1]&&a.attribsAttributeValue(i.lineAttribs[0],"aceTable",this.editor.getApool())?{line:i.lines[0],attribs:i.lineAttribs[0],
additionalZatext:i.additionalZatext}:null};e.prototype.maybeRichPaste=function(e,t){if("undefined"==typeof DOMParser)return!1;var n=e.clipboardData
;if(!/text\/html/.test(JSON.stringify(n.types)))return!1;var o=t(n.getData("text/html"));if(this.treatAsPlainText(o))return!1;this.pasteHtmlAtCaret(null,o);e.preventDefault();return!0}
;e.prototype.treatAsPlainText=function(e){if(1===e.children.length&&"A"===e.children[0].tagName){var t=v.trim(e.children[0].innerText),n=v.trim(e.innerText),o=e.children[0].getAttribute("href")
;if(t===n&&n===o)return!0}return!1};e.prototype.maybePlainTextPaste=function(e){var t=e.clipboardData;if(!/text\/plain/.test(JSON.stringify(t.types)))return!1
;var n=t.getData("text/plain"),o=document.createElement("span");o.appendChild(document.createTextNode(n));this.pasteHtmlAtCaret(null,o,!0);e.preventDefault();return!0}
;e.prototype.maybePasteLink=function(e){var t,n=this,o=e.clipboardData;/text\/plain/.test(JSON.stringify(o.types))&&(t=o.getData("text/plain"))&&(t=v.trim(t));if(!t)return!1
;var i=s.REGEX_IS_VALID_URL.test(t),r=b.isValid(t);if(i)if((0,m.isPaperDoc)(t)){var a=(0,p.getPaperCanonicalDomain)(),d=(0,m.getPadIdFromPaperLink)(t,a);h.IntentionEvent.MentionPad.track({
source:"paste",__pastedLocalPadId:d,__currentLocalPadId:this.editor&&this.editor.getPadId()})}else{var c=this.editor.selection.getStart()
;c.zone===l.Position.ROOT_ZONE&&0!==c.line&&0===c.col&&h.IntentionEvent.PasteLink.track()}return!(!i&&!r)&&this.editor.execute("insertPastedUrl",(function(){
var o=n.editor.selection.getStart(),i=n.editor.selection.getEnd(),a=n.isPlaceholderInRange(o,i);if(a){n.maybeAdjustSelectionForPlaceholder(o,i);o=n.editor.selection.getStart()
;i=n.editor.selection.getEnd();a=n.isPlaceholderInRange(o.withCol(o.col+1),i.withCol(i.col-1))}if(n.editor.selection.isCollapsed()||!n.editor.selection.isSameLine()||a)return!1;r&&(t="mailto:"+t)
;n.editor.contents.setAttributeOnSelection("link",t);n.editor.selection.internalUpdateSelectionFromRep();(0,h.trackAce)("paste-link-onto-text");e.stopPropagation();e.preventDefault()
;n.editor.observer.trigger("show-link-editor",void 0);return!0}))};e.prototype.maybeAdjustSelectionForPlaceholder=function(e,t){
var n,o,i="true"==this.editor.contents.getAttributeValueForPoint(e,"placeholder"),r="true"==this.editor.contents.getAttributeValueForPoint(t,"placeholder");if(i&&!r){o=t
;n=this.editor.contents.getEndOfAttribute(e,"placeholder","true",!1)}else if(!i&&r){n=e;o=this.editor.contents.getHeadOfAttribute(t,"placeholder","true",!1)}
n&&o&&!l.Position.equals(n,o)&&this.editor.selection.set({start:n,end:o})};e.prototype.isPlaceholderInRange=function(e,t){
return-1!=this.editor.contents.getUniqueAttributeValuesInRange(e,t,"placeholder").indexOf("true")};e.prototype.maybePasteMarkdown=function(e){var t,n=e.clipboardData
;/text\/plain/.test(JSON.stringify(n.types))&&(t=n.getData("text/plain"));if(!t)return!1;var o=t.split(/[\r|\n]+/)
;if(/text\/html/.test(JSON.stringify(n.types))&&!/<meta name="Generator" content="Cocoa HTML Writer">/.test(n.getData("text/html"))||o.length<1||this.editor.code.isCaretInCodeBlock())return!1
;t=t.replace(/^&gt;/gm,">")
;var i=(0,g.convertMarkdownToHtml)(t),r=-1!=i.indexOf("<li"),a=-1!=i.indexOf("<ul"),s=-1!=i.indexOf("<ol"),l=-1!=i.indexOf("<h1")||-1!=i.indexOf("<h2")||-1!=i.indexOf("<h3"),d=-1!=i.indexOf("<blockquote"),c=-1!=i.indexOf('<input type="checkbox"'),u=-1!=i.indexOf("<em")||-1!=i.indexOf("<strong"),p=-1!=i.indexOf("<code"),f=-1!=i.indexOf("<table"),m=-1!=i.indexOf("<a href="),v=-1!=i.indexOf("<img src="),y=1==o.length,b=y&&(m||v),C=r||p||d||c||l||f||m||v
;(0,h.trackAce)("paste-markdown",{wasProbablyMarkdown:C,hasBlockquote:d,hasHeader:l,hasOrderedList:s,hasUnorderedList:a,hasEmphasis:u,hasCode:p,hasCheckbox:c,hasLink:m,hasImage:v,
isSingleLineMarkdown:b});if(y&&!b)return!1;if(!C)return!1;e.stopPropagation();e.preventDefault();return this.pasteMarkdownAtCaret(i)};e.prototype.pasteMarkdownAtCaret=function(e){
var t=e.split("\n"),n=!1,o=(t=t.map((function(e){if(n&&-1==e.indexOf("</p>"))return"<p>"+e+"</p>\n";if(0===e.indexOf("<p>")&&-1==e.indexOf("</p>")){n=!0;return e+"</p>\n"}
if(-1==e.indexOf("<p>")&&-1!=e.indexOf("</p>")){n=!1;return"<p>"+e}n=!1;return e}))).join("\n");this.pasteHtmlAtCaret(o);return!0};e.prototype.pasteHtmlAtCaret=function(e,t,n,o){var i=this
;this.editor.execute("prePasteIncorp",(function(){i.editor.selection.isCollapsed()||i.editor.keystrokes.doBackspaceNotAsCaret(!0);i.editor.focus();var r,a
;if(window.getSelection&&(r=window.getSelection()).getRangeAt&&r.rangeCount){a=r.getRangeAt(0);t||((t=document.createElement("div")).innerHTML=e);i.replaceDuplicateUniqueIds(t)
;i.addMissingUniqueIds(t);var s=a.startContainer,l=a.startOffset;if(i.editor.dom.isRootOfZone(s))if(0==l){s=s.childNodes[0];l=0}else l=(s=s.childNodes[l-1]).childNodes.length
;var d=i.editor.dom.getAceLineForNode(s),c=i.editor.dom.rootNodeOfZoneContaining(d),u=i.editor.dom.zoneOfRootNode(c),h=i.editor.getRep(u).lines.indexOfKey(d.id),p=i.cloneNodes(d,s,t.ownerDocument),f=p.outerClone,g=p.innerClone,m=i.insertNodesAt(Array.prototype.slice.call(t.childNodes),s,g,l,n),v={
disableMediaUrlInPastedEmbed:o,lineNode:f,zoneId:u,lineNum:h,selection:{startPoint:m,endPoint:m}};i.editor.core.incorporateUserChanges(v)}}))};e.prototype.replaceDuplicateUniqueIds=function(e){
var t=e.querySelectorAll("[data-usually-unique-id]");if(0!=t.length){
for(var n=this.editor.dom.getRoot().querySelectorAll("[data-usually-unique-id]"),o={},r=0;r<n.length;r++)o[n[r].getAttribute("data-usually-unique-id")]=!0;r=0;for(var a=void 0;a=t[r];r++){
var s=a.getAttribute("data-usually-unique-id");s in o?a.setAttribute("data-usually-unique-id",i.generateUniqueId()):o[s]=!0}}};e.prototype.addMissingUniqueIds=function(e){
for(var t=e.querySelectorAll(".task-list-item:not([data-usually-unique-id])"),n=0,o=void 0;o=t[n];n++)o.setAttribute("data-usually-unique-id",i.generateUniqueId())}
;e.prototype.insertNodesAt=function(e,t,n,o,i){var r=n,a=o,s=t,l=s.nodeType==Node.ELEMENT_NODE?getComputedStyle(s).display:null;if("list-item"!=l&&"block"!=l)for(;r;){if(!r.parentNode)break
;if("list-item"==(l=getComputedStyle(s.parentNode).display))break;a=Array.prototype.indexOf.call(r.parentNode.childNodes,r);r=r.parentNode;s=s.parentNode;if("block"==l)break}
if(r.nodeType===Node.ELEMENT_NODE){var d=document.createRange();d.setStart(r,a);d.setEnd(n,o);var c=d.extractContents(),u=c.childNodes.length;r.insertBefore(c,r.childNodes[a]);n=r;o=u+a}
var h=document.createElement("div");h.setAttribute("data-ace-pasted","true");h.setAttribute("data-ace-ignore-block-newlines","true");e.forEach((function(e){h.appendChild(e)}))
;i&&(h.style.whiteSpace="pre");var p=document.createRange();p.setStart(n,o);p.setEnd(n,o);p.insertNode(h);var f=this.getNextOrPrevTextNode(h,!1)
;f&&" "==f.nodeValue.charAt(0)&&this.replaceTextNode(f," "+f.nodeValue.substring(1));var g=this.getNextOrPrevTextNode(h,!0)
;g&&" "==g.nodeValue.slice(-1)&&this.replaceTextNode(g,g.nodeValue.substring(0,g.nodeValue.length-1)+" ");return{node:h,index:1,maxIndex:1}};e.prototype.getNextOrPrevTextNode=function(e,t){for(;;){
if(!e)return null;for(;!(t?e.previousSibling:e.nextSibling);)if(!(e=e.parentNode))return null;e=t?e.previousSibling:e.nextSibling;var n=this.getFirstOrLastTextNode(e,t);if(n)return n}}
;e.prototype.getFirstOrLastTextNode=function(e,t){if(e.nodeType==Node.TEXT_NODE)return e;if(e.nodeType==Node.ELEMENT_NODE){var n=e;if("false"===n.getAttribute("contenteditable"))return null
;if(t)for(var o=n.childNodes.length-1;o>=0;o--){if(i=this.getFirstOrLastTextNode(n.childNodes[o],t))return i}else for(o=0;o<n.childNodes.length;o++){var i
;if(i=this.getFirstOrLastTextNode(n.childNodes[o],t))return i}}};e.prototype.replaceTextNode=function(e,t){e.parentNode.insertBefore(document.createTextNode(t),e);e.parentNode.removeChild(e)}
;e.prototype.cloneNodes=function(e,t,n){for(var o=t,i=n.importNode(e,!0),r=[];o&&o!==e;){var a=o.parentNode,s=Array.prototype.indexOf.call(a.childNodes,o);r.push(s);o=a}
if(!o)throw new Error("inner is not descendant of outer");for(var l=i,d=r.length-1;d>=0;d--){s=r[d];l=l.childNodes[s]}return{outerClone:i,innerClone:l}};return e=o.__decorate([u.nullifyProperties],e)
}();t.default=I},1393:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})
;t.HALLOWEEN_SET=t.TEMPLATE_PROSE_SET=t.DESKTOP_PROSE_SET=t.SPANISH_LATAM_PROSE_SET=t.SPANISH_SPAIN_PROSE_SET=t.FRENCH_PROSE_SET=t.ENGLISH_PROSE_SET=t.JAPANESE_PROSE_SET=t.SUPPLEMENTAL_ENGLISH_PROSE_SET=t.UK_ENGLISH_PROSE_SET=t.AUSTRALIAN_PROSE_SET=void 0
;t.AUSTRALIAN_PROSE_SET=[["Have a go","Good onya mate"],["Flat chat?","Get started to make it ridgy didge"],["Here's to Paper","It's true blue"],["A thought is like a boomerang","It will come back to you"],["G’day mate","Cracker of a day, let’s get crackin’"],["Sweet as","Don’t be flat out like a lizard drinking"],["Whatchya thinkin’","Brain chockers full of ideas"]]
;t.UK_ENGLISH_PROSE_SET=[["Please give me a name","Now write something brilliant"],["It begins with a word","Whenever you’re ready"],["Save the environment","One doc at a time"],["The trees thank you","For creating this doc"],["It was the best of times","It was the worst of times"],["Cancel all your meetings","Write until your little hands just can’t take it anymore"],["Music to my eyes","Compose something catchy"],["Simple is sublime","Write as little as you like"],["Unleash those wild ideas","Let your creative beast run free"],["Write here, write now","Time to make your masterpiece"]]
;t.SUPPLEMENTAL_ENGLISH_PROSE_SET=[["Give me a name","Now write something brilliant"],["Untitled composition","Nothing to see just yet"],["It begins with a word","Whenever you’re ready"],["You are a shining star","You are a tiny masterpiece"],["Save the environment","One doc at a time"]]
;t.JAPANESE_PROSE_SET=[["タイトルを付けてください。","ご自由にお書きください。"],["無題","自由に書き込んでください。"],["虎穴に入らずんば","虎子を得ず"],["七転び","八起き"],["小打も積もれば","大木を倒す"],["なまむぎなまごめ","なまたまご"],["東京特許許可局","とうきょうとっきょきょかきょく"],["昔、昔、あるところに","おじいさんとおばあさんがいました"],["いろはにほへと","ちりぬるを わかよたれそ"],["祇園精舎の鐘の声","諸行無常の響きあり"],["布団がふっとんだ","ダジャレをいうのは誰じゃ"],["春過ぎて夏来にけらし白妙の","衣干すてふ天の香具山"],["鵲の渡せる橋に置く霜の","白きを見れば夜ぞ更けにける"],["初春の令月にして","気淑く風和ぎ"],["梅は鏡前の粉を披き","蘭は珮後の香を薫す"]]
;t.ENGLISH_PROSE_SET=[["Give me a name","Now write something brilliant"],["Untitled composition","Nothing to see just yet"],["It begins with a word","Whenever you’re ready"],["You are a shining star","You are a tiny masterpiece"],["Cancel all your meetings","Write until your hands just can’t take it anymore"],["It was the best of times","It was the worst of times"],["Time flies like an arrow","Fruit flies like a banana"],["Save the environment","One doc at a time"],["The trees thank you","For creating this doc"],["Write here","Write now"],["Here we go","Just let the words flow"],["Your next big idea","Is itching to break free"],["Type your heart out","Give those fingers a good workout"],["A doc with no name","Let the words flow from your fingers like rain"],["Simple is sublime","Write as little as you like"],["Unleash those wild ideas","Let your creative beast run free"],["Take a deep breath","Enjoy that new doc smell"],["The secret to writing","Is to just keep doing it"],["This is the beginning","Of something beautiful"],["If at first you don’t succeed","Start a new Paper doc"],["Once upon a time","In a cafe far, far away"],["Everyone is a genius","At least once a year"],["The secret of getting ahead","Is getting started"]]
;t.FRENCH_PROSE_SET=[["Donnez-moi un nom","Rédigez quelque chose d'éblouissant"],["Rien ne sert de courir","Il faut partir à point"],["À cœur vaillant","Rien d'impossible"],["C'est en forgeant","Qu'on devient forgeron"],["Je pense","Donc je suis"],["Composition sans titre","Pour l'instant…"],["Un Paper vaut mieux","Que deux tu l'auras"],["Souriez","Vous êtes sur Paper"],["Tout le talent d'écrire","Ne consiste après tout que dans le choix des mots"]]
;t.SPANISH_SPAIN_PROSE_SET=[["Ponme un nombre","Y ahora escribe algo genial"],["Vísteme despacio","Que tengo prisa"],["Borrón","Y cuenta nueva"],["No concibo el mundo","Sin poder inventármelo"],["Dame un fin","Y te daré los medios"],["Lo más importante es","Comenzar a escribir"]]
;t.SPANISH_LATAM_PROSE_SET=[["Asígname un nombre","Ahora, escribe lo que quieras"],["Vísteme despacio","Que tengo prisa"],["Borrón","Y cuenta nueva"],["No concibo el mundo","Sin poder inventármelo"],["Dame un fin","Y te daré los medios"],["Lo más importante es","Comenzar a escribir"]]
;t.DESKTOP_PROSE_SET=[["Give me a name","Now write something brilliant"],["It was the best of times","It was the worst of times"],["Save the environment","One doc at a time"],["Time flies like an arrow","Fruit flies like a banana"],["It begins with a word","Whenever you’re ready"],["Write here","Write now"],["Ready and waiting","Whenever you are"],["Make your mark","Without further ado"],["Shoot for the stars","The fog has lifted"]]
;t.TEMPLATE_PROSE_SET=[["A framework is always better","with a frame of mind"],["Picture the frame","Frame the picture"],["Keep your skeletons","Make them dance"],["Follow the footprints","and see where they lead"],["Every body","needs a skeleton"]]
;t.HALLOWEEN_SET=[["Give me a name","Now write something 𝙨𝙘𝙖𝙧𝙮 🎃"],["Give me a name","Now write something 𝙨𝒑𝒐𝒐𝒌𝙮 👻"],["Double, double toil and trouble","Fire burn, and cauldron bubble"],["Once upon a midnight dreary","While I pondered, weak and weary"],["𝙰𝚕𝚕 𝚠𝚘𝚛𝚔 𝚊𝚗𝚍 𝚗𝚘 𝚙𝚕𝚊𝚢","𝙼𝚊𝚔𝚎𝚜 𝙹𝚊𝚌𝚔 𝚊 𝚍𝚞𝚕𝚕 𝚋𝚘𝚢"],["ℌ𝔞𝔭𝔭𝔶 ℌ𝔞𝔩𝔩𝔬𝔴𝔢𝔢𝔫!","— 𝔜𝔬𝔲𝔯 𝔣𝔯𝔦𝔢𝔫𝔡𝔰 𝔞𝔱 𝔇𝔯𝔬𝔭𝔟𝔬𝔵 𝔓𝔞𝔭𝔢𝔯"],["𝕙𝕒𝕡𝕡𝕪 𝕙𝕒𝕝𝕝𝕠𝕨𝕖𝕖𝕟!","— 𝕪𝕠𝕦𝕣 𝕗𝕣𝕚𝕖𝕟𝕕𝕤 𝕒𝕥 𝕕𝕣𝕠𝕡𝕓𝕠𝕩 𝕡𝕒𝕡𝕖𝕣"]]
},1394:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(22),r=n(51),a=n(43),s=n(81),l=n(302),d=n(7),c=n(20),u=function(){function e(e){var t=this;this.currentHover=null
;this.isHeadedDown=null;this.isMouseEvent=null;this.isPrintableKey=null;this.isCaretInPlaceholder=null;this.isCustomTemplate=null;this.handleUserChange=function(e){
if(!t.isCustomTemplate&&t.editor.editableState.getIsEditable()){var n=t.editor.selection.getStart()
;if(t.isAtHeadOfPlaceholder(n))t.removePlaceholder(n);else if(t.isAtEndOfPlaceholder(n)&&t.isPrintableKey){var o=t.getPlaceholderType(c.Position.previous(t.editor,n))
;t.editor.contents.performDocumentApplyAttributesToRange(e.origSelStart,n,[[o,""]])}}};this.handleRepChange=function(){
if(!t.isCustomTemplate&&t.editor.editableState.getIsEditable()&&t.editor.selection.isCollapsed()){var e,n=t.editor.selection.getStart();n&&(e=new c.Position(n.zone,n.line,n.col))
;var o=t.editor.selection.getStart(),i=t.isInMiddleOfPlaceholder(o);if(t.isAtHeadOfPlaceholder(o))setTimeout((function(){t.setHoverForPosition(o)
}),0);else if(i)if(t.isHeadedDown)t.moveToEndOfPlaceholder(o);else{t.moveToHeadOfPlaceholder(o);setTimeout((function(){t.setHoverForPosition(o)}),0)}else setTimeout((function(){t.removeHover()}),0)
;t.isHeadedDown=!1;t.lastCaretPosition=e}};this.removeHover=function(){if(t.currentHover){t.changePlaceholderHover(t.currentHover.start,t.currentHover.end,"");t.currentHover=null}}
;this.setHoverForPosition=function(e){var n=t.getHeadOfPlaceholder(e),o=t.getEndOfPlaceholder(e);if(n&&o){if(t.currentHover){
if(c.Position.equals(t.currentHover.start,n)&&c.Position.equals(t.currentHover.end,o))return;t.removeHover()}t.currentHover={start:n,end:o};(0,r.isCellId)(e.zone)||t.changePlaceholderHover(n,o,"true")
}};this.handleShiftKeyUp=function(e){if(e.keyCode==a.KeyCode.SHIFT&&!t.isCustomTemplate){var n=t.editor.selection.getStart(),o=t.editor.selection.getEnd()
;t.isHeadedDown||t.isMouseEvent&&!t.editor.selection.get().isReversed?t.isInMiddleOfPlaceholder(o)?t.makeSelection(n,t.getEndOfPlaceholder(o)):t.isInMiddleOfPlaceholder(n)&&t.makeSelection(t.getEndOfPlaceholder(n),o,!0):t.isInMiddleOfPlaceholder(n)?t.makeSelection(o,t.getHeadOfPlaceholder(n),!0):t.isInMiddleOfPlaceholder(o)&&t.makeSelection(n,t.getHeadOfPlaceholder(o))
}};this.onKeyDown=function(e){t.isHeadedDown=e.keyCode==a.KeyCode.DOWN||e.keyCode==a.KeyCode.RIGHT;t.isMouseEvent=!1;if(!t.isCustomTemplate&&t.editor.selection.isCollapsed()){var n=!1
;t.isPrintableKey=a.KeyCode.isPrintable(e.keyCode)&&!e.ctrlKey&&!e.altKey&&!e.metaKey;var o=t.editor.selection.getStart();if(t.isAtHeadOfPlaceholder(o)){switch(e.keyCode){case a.KeyCode.RIGHT:
if(!e.shiftKey){t.moveToEndOfPlaceholder(o);n=!0}break;case a.KeyCode.DELETE:t.removePlaceholder(o);n=!0}t.isPrintableKey&&t.removePlaceholder(o)}else if(t.isAtEndOfPlaceholder(o))switch(e.keyCode){
case a.KeyCode.LEFT:if(!e.shiftKey){t.moveToHeadOfPlaceholder(o);n=!0}break;case a.KeyCode.BACKSPACE:t.removePlaceholder(c.Position.previous(t.editor,o));n=!0}if(n){e.preventDefault()
;e.stopPropagation()}}};this.handleMouseUp=function(e){if(e.shiftKey||t.isCustomTemplate)t.isMouseEvent=!0;else{var n=t.editor.selection.getStart(),o=t.editor.selection.getEnd()
;t.isInMiddleOfPlaceholder(o)&&t.makeSelection(n,t.getEndOfPlaceholder(o));t.isInMiddleOfPlaceholder(n)&&t.makeSelection(o,t.getHeadOfPlaceholder(n),!0)}};this.editor=e
;this.isCustomTemplate=e.getPadType()==d.PadType.customTemplate;this.bindEvents()}e.prototype.dispose=function(){this.unbindEvents()};e.prototype.bindEvents=function(){
this.editor.observer.on("mouseup",this.handleMouseUp);this.editor.observer.on("rep-change",this.handleRepChange);this.editor.observer.on("keyup",this.handleShiftKeyUp)
;this.editor.observer.on("user-change",this.handleUserChange);this.editor.observer.on("keydown",this.onKeyDown,l.ObserverEventPriority.TemplatePlaceholder)};e.prototype.unbindEvents=function(){
if(this.editor&&this.editor.observer){this.editor.observer.off("mouseup",this.handleMouseUp);this.editor.observer.off("rep-change",this.handleRepChange)
;this.editor.observer.off("keyup",this.handleShiftKeyUp);this.editor.observer.off("user-change",this.handleUserChange);this.editor.observer.off("keydown",this.onKeyDown)}}
;e.prototype.changePlaceholderHover=function(e,t,n){var o=this;this.editor.execute("placeholderHover",(function(){o.editor.callStack.makeNewNonundoableEvent((function(){
o.editor.contents.performDocumentApplyAttributesToRange(e,t,[["clientside-placeholder-hover",n]])}))}))};e.prototype.getEndOfPlaceholder=function(e){
var t=this.getPlaceholderType(e),n=this.editor.contents.getEndOfAttribute(e,t,"true",!1)
;this.isAtHeadOfPlaceholder(e)||(n=this.editor.contents.getEndOfAttribute(c.Position.previous(this.editor,e),t,"true",!1));return n};e.prototype.getHeadOfPlaceholder=function(e){
if(this.isAtEndOfPlaceholder(e)){var t=c.Position.previous(this.editor,e),n=this.getPlaceholderType(t);return this.editor.contents.getHeadOfAttribute(t,n,"true",!1)}
var o=this.editor.contents.getHeadOfAttribute(e,this.getPlaceholderType(e),"true",!1);if(!o)return o;-1!=this.editor.contents.getAttributesForPoint(o).map((function(e){return e[0]
})).indexOf("list")&&(o=c.Position.next(this.editor,o));return o};e.prototype.removePlaceholder=function(e){var t=this.getHeadOfPlaceholder(e),n=this.getEndOfPlaceholder(e);this.currentHover=null
;this.editor.contents.replaceRange(t,n,"",[])};e.prototype.moveCaret=function(e){e&&this.makeSelection(e,e)};e.prototype.makeSelection=function(e,t,n){void 0===n&&(n=!1);var o=this.editor
;o.execute("makeSelection",(function(){o.selection.set({start:e,end:t,isReversed:n});o.focus()}),{shouldIncorp:!1})};e.prototype.isAtHeadOfPlaceholder=function(e){
return!!e&&c.Position.equals(this.getHeadOfPlaceholder(e),e)};e.prototype.isInMiddleOfPlaceholder=function(e){
return e&&this.editor.contents.getAttributeValueForPoint(e,this.getPlaceholderType(e))&&!this.isAtHeadOfPlaceholder(e)&&!this.isAtEndOfPlaceholder(e)};e.prototype.isAtEndOfPlaceholder=function(e){
if(e&&e.col>0){var t=c.Position.previous(this.editor,e),n=this.getPlaceholderType(t)
;if(this.editor.contents.getAttributeValueForPoint(t,n)&&!this.editor.contents.getAttributeValueForPoint(e,n))return!0
;if(this.editor.contents.getAttributeValueForPoint(t,n)&&e.col==c.Position.endOfLine(this.editor,e).col)return!0}return!1};e.prototype.moveToHeadOfPlaceholder=function(e){
var t=this.getHeadOfPlaceholder(e);c.Position.equals(e,t)&&(t=c.Position.previous(this.editor,e));this.moveCaret(t)};e.prototype.moveToEndOfPlaceholder=function(e){var t=this.getEndOfPlaceholder(e)
;c.Position.equals(e,t)&&(t=c.Position.next(this.editor,e));this.moveCaret(t)};e.prototype.getPlaceholderType=function(e){
return this.editor.contents.getAttributeValueForPoint(e,"dynamicPlaceholder")?"dynamicPlaceholder":"placeholder"};e.prototype.focusFirstTemplatePlaceholder=function(e){var t=this;void 0===e&&(e=!1)
;for(var n=c.Position.ROOT_ZONE,o=this.editor.getRep(n).lines,r=this.editor.contents.exportHand(),a=e?1:0;a<o.length();a++)for(var s=o.atIndex(a).domInfo,l=i.opIterator(r.aline(a)),d=0,u=function(){
var e=l.next();if(e.getAttribute("placeholder",s.apool)||e.getAttribute("dynamicPlaceholder",s.apool)){var o=new c.Position(n,a,d);h.editor.execute("select&focus",(function(){t.editor.selection.set(o)
;t.editor.focus()}));return{value:!0}}d+=e.chars},h=this;l.hasNext();){var p=u();if("object"==typeof p)return p.value}return!1};return e=o.__decorate([s.nullifyProperties],e)}();t.default=u},
1395:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(44),i=n(22),r=n(64),a=n(576),s=n(75),l=n(136),d=n(146),c=n(18),u=n(4),h=n(58),p=n(38),f=n(20),g=n(0),m=n(36),v=n(44),y=n(31),b=n(13),C=n(119),E="clientside-textDrag",I=function(){
function e(e){var t=this;this.editor=e;this.cancelDragOperation=function(e){if(t.dragLineInfo&&!t.dragLineInfo.isCommittingChange){(0,u.trackUi)("Text drag cancelled");t.cleanupDrag()
;e.preventDefault()}};this.handleDragMove=(0,o.animationFrameThrottle)((function(e,n){if(t.isDragging()&&!t.isCommitting()){var o=e;t.maybeAutoScroll(e,n);t.updateDragCursorLocation(o);var i=o.pageY
;if(!(Math.abs(i-t.dragLineInfo.lastMouseMovePageY)<=2)){t.dragLineInfo.lastMouseMovePageY=i;var r=t.getHoverAceLineNodeFromEvent(e)
;!r&&t.dragLineInfo.currentHoverTarget&&(r=t.dragLineInfo.currentHoverTarget);var a=t.editor.dom.getAceLineForNode(r);if(a){var s=t.editor.selection.getPositionForNode(a)
;if(s.zone==t.dragLineInfo.zoneId){var l=t.editor.getRep(s.zone).lines.length()-1;s.line>=l&&(r=t.getAceLine(new f.Position(s.zone,l-1,0)));t.setCurrentHoverTarget(r)}}}}}))
;e.observer.on("dragover",this.handleDragMove)}e.prototype.dispose=function(){this.editor.observer.off("dragover",this.handleDragMove)};e.prototype.beginTextDragWithPos=function(e,t){
if(this.editor.contents.getIsEditable()){var n=this.getRangeToDrag(t),o=n.start,i=n.end;this.initializeDragInfo(o.zone);this.initDragCursor(o,i);this.applyClientsideDragAttribute(o,i)
;this.trackDragStart(o,i);C.WindowKeyEvents.define(s.EditingHotkeys.CancelDrag,this.cancelDragOperation);document.body.classList.add("ace-dragging-text");var r=this.getAceLine(o)
;this.setCurrentHoverTarget(r);this.updateDragCursorLocation(e)}};e.prototype.finishDragOperation=function(){if(this.dragLineInfo&&!this.dragLineInfo.isCommittingChange){(0,
u.trackUi)("Text drag finished");this.commitDocumentChange();this.cleanupDrag()}};e.prototype.isDragging=function(){return!!this.dragLineInfo};e.prototype.isCommitting=function(){
return this.isDragging()&&this.dragLineInfo.isCommittingChange};e.prototype.initializeDragInfo=function(e){this.dragLineInfo={zoneId:e,dragId:p.getStandardLengthRandomId(),dragCursorPreview:null,
currentHoverTarget:null,shiftedDropTarget:null,currentAttachedPocketRef:null,editorLeftOffset:this.getEditorLeftOffset(),lastMouseMovePageY:null,isCommittingChange:!1}}
;e.prototype.trackDragStart=function(e,t){var n=t.line-e.line+1,o=this.editor.contents.getLineType(e),i=h.parseListType(o),r=i?i.type:"text";u.IntentionEvent.StartTextDrag.track({numLines:n,listType:r
})};e.prototype.applyClientsideDragAttribute=function(e,t){var n=this;this.editor.execute("textDragStart",(function(){n.editor.callStack.makeNewNonundoableEvent((function(){
var o=e.withCol(0),i=f.Position.endOfLine(n.editor,t);n.editor.contents.performDocumentApplyAttributesToRange(o,i,[[E,n.dragLineInfo.dragId]])}))}))}
;e.prototype.getBoundingBoxOfTextDragAttribute=function(e,t){var n=this.editor.getRep(e),o=this.editor.getApool(),r=[E,t],a=o.attribToNum[String(r)];if(null==a)return null
;for(var s=null,l=null,d=0;d<n.lines.length();d++){var c=n.alines[d];if(i.hasAttribNumber(c,a)){null==s&&(s=d);l=d}}return null==s?null:{originStart:new f.Position(e,s,0),
originEnd:new f.Position(e,l,0)}};e.prototype.clearTextDragAttributes=function(){var e=this;this.editor.execute("textDragClear",(function(){e.editor.callStack.makeNewNonundoableEvent((function(){
var t=e.editor.contents.internalZatext(),n=e.editor.getApool(),o=(0,r.docHand)(t,n).changesetFromEachOp((function(e,t){t.getAttribute(E)?e.keepOverOpWithoutAttribute(t,E):e.keepOverOp(t)}))
;e.editor.contents.performDocumentApplyChangeset(o)}))}))};e.prototype.getRangeToDrag=function(e){if(!this.editor.selection.isCollapsed()){var t=this.editor.selection.get(),n=t.start,o=t.end
;if(n&&o&&e.line>=n.line&&e.line<=o.line)return{start:n,end:this.getOriginRangeEnd(o)}}return{start:e,end:this.getOriginRangeEnd(e)}};e.prototype.getOriginRangeEnd=function(e){
var t=e.zone,n=e.line,o=this.editor.getRep(t);if(this.isHeading(t,e.line))return this.getOriginEndForHeading(o,t,e.line);var i=this.getListIndent(t,e.line);if(!i)return e
;for(var r=e.line,a=n+1;a<o.lines.length();a++){var s=this.getListIndent(t,a);if(!(s&&s>i))break;r=a}return new f.Position(e.zone,r,0)};e.prototype.getListIndent=function(e,t){
var n=this.editor.contents.getLineType(new f.Position(e,t,0)),o=h.parseListType(n);return o?o.indent:null};e.prototype.getHeadingLevel=function(e,t){
var n=this.editor.contents.getLineType(new f.Position(e,t,0)),o=h.parseListType(n);return o?{hone:1,htwo:2}[o.type]:null};e.prototype.isHeading=function(e,t){return!!this.getHeadingLevel(e,t)}
;e.prototype.getOriginEndForHeading=function(e,t,n){var o=this.getHeadingLevel(t,n);if(!o)return new f.Position(t,n,0);for(var i=n,r=n+1;r<e.lines.length();r++){var a=this.getHeadingLevel(t,r)
;if(!!a&&a<=o)break;i=r}return new f.Position(t,i,0)};e.prototype.getAceLine=function(e){return this.dragLineInfo?this.editor.getLineEntry(e.zone,e).lineNode:null};e.prototype.cleanupDrag=function(){
C.WindowKeyEvents.off(s.EditingHotkeys.CancelDrag,this.cancelDragOperation);document.body.classList.remove("ace-dragging-text");this.removeDragCursor();this.clearTextDragAttributes()
;this.removeDropHint();this.dragLineInfo=null};e.prototype.commitDocumentChange=function(){var e=this
;if(this.dragLineInfo&&this.dragLineInfo.currentHoverTarget&&!this.dragLineInfo.isCommittingChange&&this.editor.contents.getIsEditable()){this.dragLineInfo.isCommittingChange=!0
;this.editor.execute("textDrag",(function(){var t=e.editor,n=e.getBoundingBoxOfTextDragAttribute(e.dragLineInfo.zoneId,e.dragLineInfo.dragId);if(n){
var o=n.originStart,r=n.originEnd,a=e.editor.selection.getPositionForNode(e.dragLineInfo.currentHoverTarget);e.clearTextDragAttributes();var s=o.line,l=r.line,d=a.line,c=l-s+1;if(!(s<=d&&d<=l)){
var u=e.editor.getRep(f.Position.ROOT_ZONE),h=i.builder(u.lines.totalWidth(),"Z",o.zone),p=s<d;if(p){e.keepPrefix(h,u,s-1);e.removeLines(h,u,s,l);e.keepLines(h,u,l+1,d);e.insertLinesFromRep(h,u,s,l)
}else{e.keepPrefix(h,u,d);e.insertLinesFromRep(h,u,s,l);e.keepLines(h,u,d+1,s-1);e.removeLines(h,u,s,l)}var g=h.toChangeset();t.contents.performDocumentApplyChangeset(g)
;var m=p?d-c:d,v=new f.Position(o.zone,m,0);t.selection.set(v);var y=Math.min(d,s),b=Math.max(d,l);t.lists.renumberListsInRange(o.zone,y,b)}}}))}};e.prototype.keepPrefix=function(e,t,n){
e.keep(t.lines.offsetOfIndex(n+1),n+1)};e.prototype.keepLines=function(e,t,n,o){for(var i=n;i<=o;i++)e.keep(t.lines.atIndex(i).text.length+1,1)};e.prototype.removeLines=function(e,t,n,o){
for(var i=n;i<=o;i++)e.remove(t.lines.atIndex(i).text.length+1,1)};e.prototype.insertLinesFromRep=function(e,t,n,o){for(var i=n;i<=o;i++)this.insertLineFromRep(e,t,i)}
;e.prototype.insertLineFromRep=function(e,t,n){e.insertAText({text:t.lines.atIndex(n).text+"\n",attribs:t.alines[n]});e.insert("\n",[[]],this.editor.getApool())}
;e.prototype.setCurrentHoverTarget=function(e){if(e!=this.dragLineInfo.currentHoverTarget){this.removeDropHint();this.dragLineInfo.currentHoverTarget=e
;this.dragLineInfo.shiftedDropTarget=this.shiftHoverTargetPastSourceRange(e);this.addDropHint()}};e.prototype.removeDropHint=function(){
if(this.dragLineInfo.shiftedDropTarget&&void 0!==this.dragLineInfo.currentAttachedPocketRef){var e=y.default.isOnButDoNotLog("paper_pocket_interstitial")?(0,
d.getBackPocket)(this.dragLineInfo.shiftedDropTarget):(0,d.getPocket)(this.dragLineInfo.shiftedDropTarget);if(e){e.remove(this.dragLineInfo.currentAttachedPocketRef)
;this.dragLineInfo.currentAttachedPocketRef=void 0}}};e.prototype.addDropHint=function(){if(this.dragLineInfo.shiftedDropTarget){var e=null;if(y.default.isOnButDoNotLog("paper_pocket_interstitial")){
var t=this.editor.selection.getPositionForNode(this.dragLineInfo.shiftedDropTarget),n=this.editor.getLineEntry(t.zone,t);n&&(e=(0,d.getLazyPocket)(this.editor,n,!0))}else e=(0,
d.getPocket)(this.dragLineInfo.shiftedDropTarget);e&&(this.dragLineInfo.currentAttachedPocketRef=e.put(g.createElement(a.DropHint,{count:1}),"drop-hint"))}}
;e.prototype.shiftHoverTargetPastSourceRange=function(e){if(!e.classList.contains("ace-line-text-drag-source"))return e
;for(var t=e,n=this.editor.selection.getPositionForNode(t),o=n.zone,i=n.line,r=this.editor.getRep(o).lines.length();i<r;){var a=new f.Position(o,i,0),s=this.getAceLine(a)
;if(!s||!s.classList.contains("ace-line-text-drag-source"))break;t=s;i++}return t};e.prototype.removeDragCursor=function(){var e=document.querySelectorAll(".text-drag-cursor");(0,c.removeElements)(e)}
;e.prototype.initDragCursor=function(e,t){var n,o=(0,c.width)(this.editor.dom.getRoot());this.dragLineInfo.dragCursorPreview=document.createElement("div")
;this.dragLineInfo.dragCursorPreview.classList.add("text-drag-cursor");this.dragLineInfo.dragCursorPreview.classList.add("ace-editor");this.dragLineInfo.dragCursorPreview.classList.add("notranslate")
;this.dragLineInfo.dragCursorPreview.style.width="".concat(o,"px");document.body.appendChild(this.dragLineInfo.dragCursorPreview);var i=document.createElement("div")
;i.className="text-drag-cursor-handle";this.dragLineInfo.dragCursorPreview.appendChild(i);m.reactDomRender(g.createElement(l.EditorErrorBoundary,null,g.createElement(b.default,{name:"drag-handle"
})),i);var r=this.dragLineInfo.zoneId,a=e.line,s=t.line,d=document.createElement("div");d.className="text-drag-cursor-content";this.dragLineInfo.dragCursorPreview.appendChild(d);for(var u=a;u<=s;u++){
var h=new f.Position(r,u,0),p=null===(n=this.getAceLine(h))||void 0===n?void 0:n.cloneNode(!0);d.appendChild(p)}};e.prototype.updateDragCursorLocation=function(e){
if(this.dragLineInfo.dragCursorPreview){this.dragLineInfo.dragCursorPreview.style.top="".concat(e.pageY-16,"px");this.dragLineInfo.dragCursorPreview.style.left="".concat(e.pageX+4,"px")}}
;e.prototype.getEditorLeftOffset=function(){var e=this.editor.dom.getRoot();return(0,c.offset)(e).left+this.editor.dom.getPadding()};e.prototype.getHoverAceLineNodeFromEvent=function(e){var t=e.pageY
;return(0,c.closest)(document.elementFromPoint(this.dragLineInfo.editorLeftOffset,t),".ace-line")};e.prototype.maybeAutoScroll=function(e,t){
var n=this,o=e,i=this.editor.mouse.getPreviousMouseMoveInfo(),r=this.editor.dom.getRoot(),a=this.editor.dom.getScrollEl(),s=(0,c.getScrollTop)(a),l=(0,c.height)(a)/4,d=(0,c.height)(a),u=!1,h=!1;if(i){
var p=i.evt;u=i&&p.clientY>o.clientY;h=i&&p.clientY<o.clientY}t=t||0;clearInterval(this.autoScrollInterval);if(o.clientY<d/2-l&&u){if(s-5>0){s-=5;(0,c.setScrollTop)(a,s);this.autoScrollInterval=(0,
v.setInterval)((function(){n.handleDragMove(e,t-5)}),33)}}else if(o.clientY>d/2+l&&h){if(s+5+(0,c.height)(a)<(0,c.height)(r)+100){s+=5;(0,c.setScrollTop)(a,s);this.autoScrollInterval=(0,
v.setInterval)((function(){n.handleDragMove(e,t+5)}),33)}}};return e}();t.default=I},1396:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(30),i=n(269),r=n(28),a=n(18),s=n(20),l=function(){function e(e){var t=this;this.editor=e;this.performingScrollRestore=!1;this.savedNode=null;this.savedPosition=null;this.isScrolling=!1
;this.isResizing=!1;this.handleResize=function(){t.setIsResizing(!0)};this.handleResizeFinished=function(){t.setIsResizing(!1)};this.handleScroll=function(){t.setIsScrolling(!0)}
;this.handleScrollFinished=function(){t.setIsScrolling(!1)};this.scrollNodeVerticallyIntoViewDeprecated=function(e,n,o,s,l,d,c){(0,i.ensureLineIsNotCollapsedJustForMe)(t.editor,e)
;var u=t.editor,h=t.editor.dom.getRoot(),p=d?e:(0,a.closest)(e,".ace-line"),f=(0,a.offset)(h),g=f?f.top:0,m=(0,a.offset)(p).top-g,v=(0,a.height)(p),y="full"==t.editor.editorType,b=o||0,C=y?(0,
a.height)(document.getElementById("main-header")):0
;if("number"==typeof n)m-=n-C;else if("bottom"==n)m-=window.innerHeight-C;else if("center"==n)m-=window.innerHeight/3;else if("top"==n)m-=C;else if(null==n&&!r.isMobile()&&y){
var E=t.editor.selection.getBoundingClientRect().y;E>0&&(m=E-g)}y&&m<(0,a.offset)(u.dom.getEditorEl()).top&&(m=0);m=Math.max(0,m);u.mouse.ignoreMouseMoveEventTemporarily()
;var I=m+C+b+(y?0:parseInt(p.style.lineHeight,10)),_=m+v;t.scrollPositionIntoView(I,_,n,s,l,c)};this.scrollSelectionIntoView=function(e,n,o){var i=t.editor,s=i.getSelectedRep();if(s){var l=i.selection
;if(r.isApple()&&window.getSelection().rangeCount>0){var d=void 0;d=r.isMobile()?window:i.dom.getScrollEl();var c=l.getBoundingClientRect().y+(0,a.getScrollTop)(d)
;t.scrollPositionIntoView(c,c,void 0,n,o)}else{var u=i.selection.getFocus().line;t.scrollNodeVerticallyIntoViewDeprecated(s.lines.atIndex(u).lineNode,void 0,e,n,o)}}}
;this.editor.observer.on("resize",this.handleResize);this.editor.observer.on("resize-finished",this.handleResizeFinished);this.editor.observer.on("scroll",this.handleScroll)
;this.editor.observer.on("scroll-finished",this.handleScrollFinished)}e.prototype.dispose=function(){this.editor.observer.off("resize",this.handleResize)
;this.editor.observer.off("resize-finished",this.handleResizeFinished);this.editor.observer.off("scroll",this.handleScroll);this.editor.observer.off("scroll-finished",this.handleScrollFinished)
;this.editor=null};e.prototype.scrollIntoViewIfNeeded=function(e,t){void 0===t&&(t=!1);(0,i.ensureLineIsNotCollapsedJustForMe)(this.editor,e)
;this.isNodeOffscreen(e)&&this.scrollNodeCenteredIntoView(e,t)};e.prototype.getIsScrolling=function(){return this.isScrolling};e.prototype.setIsScrolling=function(e){this.isScrolling=e}
;e.prototype.getIsResizing=function(){return this.isResizing};e.prototype.setIsResizing=function(e){this.isResizing=e};e.prototype.isNodeOffscreen=function(e){var t=this.editor.dom.getScrollEl(),n=(0,
a.height)(t),o=(0,a.offset)(t).top;if(r.isApple()){n=this.viewportHeightForApple();o=-window.document.body.getBoundingClientRect().top}var i=(0,a.height)(e),s=(0,a.offset)(e).top-o
;return!(s>=0&&s+i<=n)};e.prototype.scrollNodeCenteredIntoView=function(e,t){void 0===t&&(t=!1);(0,i.ensureLineIsNotCollapsedJustForMe)(this.editor,e)
;var n=this.editor.dom.getScrollEl(),o=this.editor.dom.getRoot(),s=(0,a.offset)(e).top-(0,a.offset)(o).top,l=window.innerHeight*(1/3);r.isApple()&&(l=this.viewportHeightForApple()*(1/3));var d=l-s
;t?(0,a.animateElementScroll)({element:n,direction:{scrollTop:-d},duration:100}):(0,a.setScrollTop)(n,-d)};e.prototype.viewportHeightForApple=function(){
return window.innerHeight-parseInt(o.default.mobile_ios_toolbar_height,10)};e.prototype.scrollPositionIntoView=function(e,t,n,o,i,s){var l,d;if(r.isMobile()){l=window;d=window.innerHeight}else{
l=this.editor.dom.getScrollEl();d=(0,a.height)(l)}null!=n||"full"!=this.editor.editorType||r.isNativeMobileApp()||(d-=40);r.isApple()&&(d=this.viewportHeightForApple());if(n&&!s||e>(0,
a.getScrollTop)(l)+d||t<(0,a.getScrollTop)(l)){var c=void 0;c=o?function(e){(0,a.animateScroll)({startValue:(0,a.getScrollTop)(l),endValue:e,duration:100,increment:10,onFinished:i,onStep:function(e){
null!=l.document?(0,a.setScrollTop)(window.document.documentElement,e):(0,a.setScrollTop)(l,e)}})}:function(e){null!=l.document?(0,a.setScrollTop)(window.document.documentElement,e):(0,
a.setScrollTop)(l,e);i&&i()};var u=e-((0,a.getScrollTop)(l)+d);n||u<=0?c(e):u>0&&c((0,a.getScrollTop)(l)+u)}else i&&i()};e.prototype.saveScrollPositionFromNode=function(){
var e=this.editor.selection.internalGetSelectionPoints();if(e&&e.startPoint){var t=(0,a.closest)(e.startPoint.node,"div");if(t){this.savedNode=t;this.savedPosition=(0,a.offset)(t).top}else{
this.savedNode=null;this.savedPosition=null}}};e.prototype.saveScrollPositionUsingBottomNode=function(){var e=this.editor;if(this.performingScrollRestore)this.performingScrollRestore=!1;else{
var t=document.elementFromPoint((0,a.offset)(e.dom.getRoot()).left+e.dom.getPadding()+10,window.innerHeight-5);if(t&&e.dom.getAceLineForNode(t)){this.savedNode=t;this.savedPosition=(0,a.offset)(t).top
}else{this.savedNode=null;this.savedPosition=null}}};e.prototype.restoreScrollPosition=function(){var e=this.editor
;if(!r.isNativeMobileApp()&&!this.getIsScrolling()&&!this.getIsResizing()&&this.savedNode&&e.dom.getAceLineForNode(this.savedNode)){this.performingScrollRestore=!0
;this.scrollNodeVerticallyIntoViewDeprecated(this.savedNode,this.savedPosition,void 0,void 0,void 0,!0)}};e.prototype.clearScrollPosition=function(e){if(this.performingScrollRestore){
this.performingScrollRestore=!1;if(!e)return}this.savedNode=null;this.savedPosition=null};e.prototype.scrollToTitle=function(){(0,a.animateElementScroll)({element:this.editor.dom.getScrollEl(),
direction:{scrollTop:0},duration:200})};e.prototype.getFirstEmptyLine=function(){for(var e=this.editor.getRep(s.Position.ROOT_ZONE),t=1;t<e.lines.length();t++){var n=e.lines.atIndex(t)
;if(!n.text||0===n.text.length)return n}return null};e.prototype.appendEmptyLine=function(){var e=this;this.editor.execute("insert-empty-line",(function(){
e.editor.callStack.makeNewNonundoableEvent((function(){var t=s.Position.endOfZone(e.editor,s.Position.ROOT_ZONE);e.editor.contents.performDocumentReplaceRange(t,t,"\n",[])}))}))
;var t=this.editor.getRep(s.Position.ROOT_ZONE);return t.lines.atIndex(t.lines.length()-1)};e.prototype.getFirstVisibleLine=function(e){void 0===e&&(e=!1)
;for(var t=this.editor.getRep(s.Position.ROOT_ZONE),n=e?1:0;n<t.lines.length();n++){var o=t.lines.atIndex(n);if(o.lineNode.offsetTop>=this.editor.dom.getScrollTop())return o}return null}
;e.prototype.focusFirstEmptyLine=function(){var e=this.getFirstEmptyLine();e||(e=this.appendEmptyLine());if(e){var t=this.editor.selection.getPositionForNode(e.lineNode)
;this.editor.selection.focusOn(t)}};e.prototype.focusFirstVisibleLine=function(e){void 0===e&&(e=!1);var t=this.getFirstVisibleLine(e);if(t){var n=this.editor.selection.getPositionForNode(t.lineNode)
;this.editor.selection.focusOn(n)}};return e}();t.default=l},1397:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.makeNodesMatch=void 0;t.makeNodesMatch=function e(t,n){
if(t.nodeType!==n.nodeType)return!1;if(t.nodeType===Node.ELEMENT_NODE){if(t.tagName!==n.tagName)return!1;if(t.attributes.length!==n.attributes.length)return!1
;for(var o=!1,i=0;i<t.attributes.length;i++){var r=t.attributes[i],a=n.attributes[i],s=r.name;if(s!==a.name)return!1;if("data-reactid"!==s&&"data-react-checksum"!==s&&r.value!==a.value)return!1
;"data-ace-inner-zone-content-wrapper-zone-id"===s&&(o=!0)}if(!o){if(t.childNodes.length!==n.childNodes.length)return!1
;for(i=0;i<t.childNodes.length;i++)if(!e(t.childNodes[i],n.childNodes[i]))return!1}t.hasAttribute("data-react-checksum")&&n.setAttribute("data-react-checksum",t.getAttribute("data-react-checksum"))
;t.hasAttribute("data-reactid")&&n.setAttribute("data-reactid",t.getAttribute("data-reactid"));return!0}return t.nodeType===Node.TEXT_NODE&&t.nodeValue===n.nodeValue}},1398:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(1399),i={startSpan:function(){return new o.FakeSpan},currentSpan:function(){return new o.FakeSpan},rootSpan:function(){return new o.FakeSpan},
currentTrace:function(){return null}};t.default=i},1399:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.FakeSpan=t.TooManySpansSpan=t.SpanImpl=t.Span=t.Trace=void 0
;var o=n(1),i=n(6),r=n(118),a=n(85),s=function(){function e(e){this.id=-1;this.spans=[];this.finished=!1;this.tooManySpansSpan=null;this.rootSpan=this.startSpanInternal(new d(this,null,e))}
e.prototype.startSpan=function(t){if(this.spans.length>=e.TOO_MANY_SPANS_LIMIT){if(null==this.tooManySpansSpan){this.tooManySpansSpan=new c(this,this.rootSpan);this.spans.push(this.tooManySpansSpan)}
return new u}return this.startSpanInternal(new d(this,this.activeSpan,t))};e.prototype.startSpanInternal=function(e){a.default.checkArgument(!this.finished);this.spans.push(e);this.activeSpan=e
;return e};e.prototype.finish=function(){a.default.checkArgument(!this.finished);this.finished=!0;null!=this.tooManySpansSpan&&this.tooManySpansSpan.finish();this.rootSpan.finish()}
;e.prototype.alwaysRecordTrace=function(){};e.prototype.occasionallyRecordTrace=function(){};e.prototype.rarelyRecordTrace=function(){};e.prototype.extremelyRarelyRecordTrace=function(){}
;e.prototype.neverRecordTrace=function(){};e.prototype.shouldRecord=function(){return!1};e.prototype.getRootSpan=function(){return this.rootSpan};e.prototype.getActiveSpan=function(){
return this.activeSpan};e.prototype.toJson=function(){return JSON.stringify(this.spans.map((function(e){return e.toJSON()})))};e.prototype.finishSpan=function(e){var t
;a.default.checkArgument(e==this.activeSpan,"active span (".concat(null===(t=this.activeSpan)||void 0===t?void 0:t.name,") is not the same as the span that just finished (").concat(null==e?void 0:e.name,")"))
;this.activeSpan=e.parent;e.hasAnyChildren&&e.duration<=e.minDurationNanos&&(this.spans[this.spans.length-1]==e?this.spans.pop():i.remove(this.spans,(function(t){return t==e})))}
;e.TOO_MANY_SPANS_LIMIT=2e3;return e}();t.Trace=s;var l=function(){function e(t,n,o){this.span_id=++e.nextSpanId;this.service="paper-web-client";this.type="function"
;this.start=r.NsTime.MILLISECOND*Date.now();this.meta={};this.trace_id=t;this.parent=n;this.parent_id=null==n?null:n.span_id;this.name=o;this.resource=o;n&&(n.hasAnyChildren=!0)}
e.prototype.setResource=function(e){this.resource=e;return this};e.prototype.setService=function(e){this.service=e;return this};e.prototype.setType=function(e){this.type=e;return this}
;e.prototype.setTag=function(e,t){this.meta[e]=t;return this};e.prototype.setMinDurationMillis=function(e){this.minDurationNanos=e*r.NsTime.MILLISECOND;return this};e.prototype.startMillis=function(){
return this.start/r.NsTime.MILLISECOND};e.prototype.finish=function(){a.default.checkArgument(!this.finished);this.finished=!0;this.duration=Date.now()*r.NsTime.MILLISECOND-this.start
;if(0==this.duration){this.setTag("durationZero","true");this.duration=1}else if(this.duration<0){this.duration=1;this.setTag("durationNegative","true")}return this};e.prototype.toJSON=function(){
return{trace_id:this.trace_id,span_id:this.span_id,name:this.name,resource:this.resource,service:this.service,type:this.type,start:this.start,duration:this.duration,parent_id:this.parent_id,
error:this.error,meta:this.meta}};e.nextSpanId=0;return e}();t.Span=l;var d=function(e){o.__extends(t,e);function t(t,n,o){var i=e.call(this,t.id,n,o)||this;i.trace=t;return i}
t.prototype.finish=function(){e.prototype.finish.call(this);this.trace.finishSpan(this);return this};return t}(l);t.SpanImpl=d;var c=function(e){o.__extends(t,e);function t(t,n){
var o=e.call(this,t.id,n,"Too many spans")||this
;o.setTag("Description","This trace includes over 2,000 spans in it.  To help protect the server from OOMs, all future spans are merged into this one.  Be careful when instrumenting functions called in a loop!")
;return o}return t}(l);t.TooManySpansSpan=c;var u=function(e){o.__extends(t,e);function t(){return e.call(this,-1,null,null)||this}t.prototype.finish=function(){return this};return t}(l);t.FakeSpan=u
},140:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.getMenuTrackProps=void 0;var o=n(1),i=n(6),r=n(3),a=n(412),s=n(66),l=n(284),d=n(23),c=n(0),u=n(83),h=n(78),p=n(4)
;t.getMenuTrackProps=function(e,t){return(0,a.getTrackProps)({trackContext:(0,p.contextTypeToString)(e.trackContext),disable:!!t["disable-auto-track"],unsafeTitle:function(){return(0,
p.extractTitle)(t.children)},safeTitle:t["track-title"],trackName:t["track-name"]})};var f=function(e,n){var a=c.createElement(l.Menu.ActionItem,o.__assign({},function(e){
return i.omit(e,"tooltip","target","disable-auto-track","track-title","track-name","hasPopup")}(e),(0,t.getMenuTrackProps)(n,e),{dir:"auto",onClick:function(o){(0,p.trackWithDataProperties)((0,
t.getMenuTrackProps)(n,e));if(e.onClick)e.onClick(o);else if((0,s.isApollo)()&&e.href&&"_blank"==e.target){var i=window.App;if(i){i.trigger("hp-navigate-to-link",[e.href,void 0,(0,
u.shouldOpenInNewTab)(o)]);o.preventDefault();o.stopPropagation()}}},onDoubleClick:function(o){var i;(0,p.trackWithDataProperties)((0,t.getMenuTrackProps)(n,e))
;null===(i=e.onDoubleClick)||void 0===i||i.call(e,o)},ref:e.forwardedRef,tagName:"button",target:void 0,role:e.role||"menuitem"}),e.children);if(e.tooltip){var d=e.disabled?c.createElement("span",{
tabIndex:0},a):a;return c.createElement(h.Tooltip,o.__assign({},e.tooltip,{triggerRef:e.forwardedRef,className:(0,r.default)(e.tooltip.className,"notranslate")}),d)}return a}
;f.displayName="ButtonMenuDig";f.displayName="ButtonMenu";f.contextTypes={trackContext:d.oneOfType([d.string,d.object]).isRequired};t.default=f},1402:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(3),r=n(155),a=n(20),s=n(270),l=n(595),d=n(167),c=n(74),u=n(8),h=n(6),p=n(130),f=n(111),g=n(11),m=n(138),v=n(4),y=n(4),b=n(0),C=n(36),E=[["insert_image","insert_embed","insert_dropbox_file"],["insert_table","insert_timeline"],["toggle_to_do_list","toggle_bullet_list","toggle_number_list"],["insert_break","toggle_code"]],I=function(e){
o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={shouldShow:!1,isFocusInRootZone:!1,isFocusInTableZone:!1,isEditable:!1,isFocusInTitleLine:!1,
isFocusInTableHeaderZone:!1,windowHeight:0,isInReadingMode:!1};t.shouldShowPredicate=null;t.isEditablePredicate=(0,f.buildPredicate)({canEdit:(0,f.equals)("true")});t.attachEvents=function(){
if(t.props.editor){var e=t.context.omnibar;e&&t.events.on(e,"contextChange",t.handleContextChanged);if(t.shouldHideOnScroll()){var n=t.props.editor.observer
;t.events.on(n,"resize-finished",t.handleWindowSizeChanged);t.events.on(n,"scroll-throttled",t.handleScroll)}}else t.timers.setTimeout(t.attachEvents,10)};t.handleWindowSizeChanged=function(){
t.setState({windowHeight:window.innerHeight})};t.handleCaretChanged=function(){
var e=t.props.editor.selection.isEditorFocused(),n=t.props.editor.selection.getStart(),o=t.props.editor.selection.getEnd(),i=!(n&&n.zone!=a.Position.ROOT_ZONE||o&&o.zone!=a.Position.ROOT_ZONE),s=Boolean(i&&n&&0===n.line&&o&&0===o.line),l=(0,
r.getZoneType)(n?n.zone:a.Position.ROOT_ZONE),c=(0,d.isCurrentSelectionInTableHeader)(t.props.editor),u="aceTableCell"==l&&!c,h=t.props.editor.selection.isCollapsed()
;if(t.props.hideOnEditorLostFocus){i=i&&e&&h;u=u&&e&&h}var p=(t.state.isFocusInRootZone||t.state.isFocusInTableZone)&&!t.state.isInReadingMode
;if(i==t.state.isFocusInRootZone&&s==t.state.isFocusInTitleLine&&u==t.state.isFocusInTableZone){if(!p&&t.shouldHideOnScroll()){t.setState({isInReadingMode:!1});y.trackAce("bottom-insert-toolbar-show")
}}else{if(i||u){t.setState({isFocusInRootZone:i,isFocusInTableZone:u,isFocusInTableHeaderZone:c,isFocusInTitleLine:s,isInReadingMode:!1});p||y.trackAce("bottom-insert-toolbar-show");return}
t.setState({isFocusInRootZone:i,isFocusInTableZone:u,isFocusInTableHeaderZone:c,isFocusInTitleLine:s,isInReadingMode:!1});y.trackAce("bottom-insert-toolbar-hide")}}
;t.handleEditablityChanged=function(){var e=t.state.isEditable,n=t.props.editor.editableState.getIsEditable();n!=e&&t.setState({isEditable:n})};t.handleContextChanged=function(e){
var n=e.context,o=t.isEditablePredicate(n),i=t.shouldShowPredicate(n),r=t.state.shouldShow&&!t.state.isInReadingMode;if(i!=t.state.shouldShow){t.setState({shouldShow:i,isInReadingMode:!1,isEditable:o
});i&&!r?y.trackAce("bottom-insert-toolbar-show"):i||y.trackAce("bottom-insert-toolbar-hide")}else if(!r&&t.shouldHideOnScroll()){t.setState({isInReadingMode:!1,isEditable:o})
;y.trackAce("bottom-insert-toolbar-show")}};t.handleScroll=function(){0==t.state.windowHeight&&t.setState({windowHeight:window.innerHeight});if(!t.state.isInReadingMode&&!t.isSelectionInView()){
t.setState({isInReadingMode:!0});y.trackAce("bottom-insert-toolbar-hide")}};t.handleToolbarClick=function(){y.trigger("bottom-toolbar-action-clicked")};return t}
t.prototype.componentDidMount=function(){this.shouldShowPredicate=(0,f.buildPredicate)({editorFocused:(0,f.equals)("true"),isTitle:(0,f.notEquals)("true"),
selection:this.props.hideOnEditorLostFocus?(0,f.and)((0,f.hasAnyOf)("isRootZone","isTableCellZone"),(0,f.not)("isTableHeaderZone"),(0,f.contains)("caret")):(0,f.and)((0,
f.hasAnyOf)("isRootZone","isTableCellZone"),(0,f.not)("isTableHeaderZone"))});this.attachEvents()};t.prototype.isSelectionInView=function(){var e=this.props.editor.getSelectedRep();if(!e)return!1
;var t=this.props.editor.selection.getFocus().line,n=e.lines.atIndex(t).lineNode.getBoundingClientRect().top;return n>0&&n<this.state.windowHeight};Object.defineProperty(t.prototype,"hasEditorFocus",{
get:function(){return this.state.shouldShow&&!this.state.isInReadingMode},enumerable:!1,configurable:!0});t.prototype.shouldHideOnScroll=function(){return u.default.numPadCreated>5}
;t.prototype.renderCommandGroups=function(e){var t=e.commands,n=e.runCommandById,o=[];E.forEach((function(e,i){var r=[];e.forEach((function(e){!!t[e]&&r.push(b.createElement(s.default,{key:e,
command:t[e],onClick:function(e){return n(e,"insert_table"===e?{columns:["2"],rows:["3"]}:null)},inverse:!0}))}));r.length>0&&o.push(b.createElement(b.Fragment,{key:"toolbar-group-".concat(i)},r))}))
;return(0,C.joinJSX)(o,b.createElement(_,null))};t.prototype.renderInnerToolbar=function(){return b.createElement("div",{className:"insert-toolbar"},b.createElement(v.TrackContext,{
trackContext:v.EditorContext.BottomInsertToolbar},b.createElement("div",{className:"insert-toolbar-overlay",onClick:this.handleToolbarClick},b.createElement(p.default,{context:[],commands:h.flatten(E)
},this.renderCommandGroups))))};t.prototype.render=function(){if(!this.props.editor||!this.state.isEditable)return null;var e=i("bottom-insert-toolbar-wrapper--springbar",{
"insert-toolbar-wrapper-hidden":!this.hasEditorFocus},"insert-toolbar-wrapper","insert-rich-object-toolbar-wrapper","bottom-insert-toolbar-wrapper")
;return b.createElement(m.LazyRenderForServer,null,b.createElement(l.default,{anchor:"bottom",shown:this.hasEditorFocus,className:e},this.renderInnerToolbar()))};t.displayName="BottomInsertToolbar"
;t.contextTypes=h.pick(c.ReactAppContextTypes,"omnibar");return t=o.__decorate([g.default],t)}(b.PureComponent);t.default=I;var _=function(){return b.createElement("span",{
className:"bottom-insert-toolbar-separator"})}},1404:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.fixedTop=t.fixedBottom=t.toolbar=t.fixedWrapper=void 0;n(1405)
;t.fixedWrapper="_fixedWrapper_rdj87_1";t.toolbar="_toolbar_rdj87_10";t.fixedBottom="_fixedBottom_rdj87_15";t.fixedTop="_fixedTop_rdj87_20";t.default={fixedWrapper:"_fixedWrapper_rdj87_1",
toolbar:"_toolbar_rdj87_10",fixedBottom:"_fixedBottom_rdj87_15",fixedTop:"_fixedTop_rdj87_20"}},1405:function(e,t,n){},1406:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(238),r=n(1407),a=n(1408),s=n(3),l=n(11),d=n(0),c=n(4),u=n(205),h=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.caretsStore=new r.NoopCaretEditorPositionStore;t.update=function(){var e=t.caretsStore.getAllCarets();if(0==Object.keys(e).length||(0,
a.isCurrentUserOnlyCaret)(e))t.state&&t.state.carets&&t.state.carets.length&&t.setState({carets:[]});else{var n=new a.CaretPixelPositionCalculator(t.ace,e,t.container);t.setState({carets:n.calculate()
})}};t.handleMouseOver=function(){(0,c.trackAce)("caret-hover")};return t}t.prototype.componentWillUnmount=function(){var e,t;this.caretsStore.off("change",this.update)
;null===(t=(e=this.caretsStore).dispose)||void 0===t||t.call(e)};t.prototype.initialize=function(e){this.ace=e;this.caretsStore=new r.CaretEditorPositionStoreImpl(this.ace)
;this.caretsStore.on("change",this.update)};t.prototype.render=function(){var e,t,n=this;return d.createElement("div",{className:"user-caret2-container",ref:function(e){return n.container=e}
},null===(t=null===(e=this.state)||void 0===e?void 0:e.carets)||void 0===t?void 0:t.map((function(e){return d.createElement(p,{key:e.secureUserId,ace:n.ace,secureUserId:e.secureUserId,top:e.top,
left:e.left,onMouseOver:n.handleMouseOver,followed:n.caretsStore.isCaretFollowed(e.secureUserId)})})))};t.displayName="Carets";return t=o.__decorate([l.default],t)}(d.PureComponent);t.default=h
;var p=function(e){var t=e.secureUserId,n=e.ace,o=e.top,r=e.left,a=e.onMouseOver,l=e.followed,c="user-caret-".concat(t).replace(".","-"),h=s(c,"user-caret2",i.getAuthorClassName(t),{"show-label":l
}),p=n.authors.getAuthorInfos()[t],f=p.name+(l?" 👀":""),g=(0,u.getBgcolor)(p);return d.createElement("span",{className:h,style:{top:o,left:r}},d.createElement("span",{
className:"user-caret2-indicator",style:{borderBottomColor:g},onMouseOver:a}),d.createElement("span",{className:"user-caret2-lbl notranslate caret-tooltip-style",style:{backgroundColor:g}},f))}
;p.displayName="Caret"},1407:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.CaretEditorPositionStoreImpl=t.NoopCaretEditorPositionStore=void 0
;var o=n(1),i=n(790),r=n(22),a=n(8),s=n(2),l=n(59),d=n(5),c=n(20),u=n(0),h=n(48),p=(0,s.defineMessages)({followingCursor:{id:"Oszzy+",defaultMessage:"Following {username}!"},followingCursorNoName:{
id:"BlqNSh",defaultMessage:"Following your collaborator!"}}),f=(0,d.PaperIntlFactory)().F,g=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.dispose=function(){};t.on=function(){};t.off=function(){};t.once=function(){};t.trigger=function(){};return t}t.prototype.getCurrentCaretPosition=function(){return null}
;t.prototype.onCaretUpdate=function(){return!1};t.prototype.updateUserCaretFromChangeset=function(){};t.prototype.updateUserCaret=function(){};t.prototype.removeUserCaret=function(){}
;t.prototype.updateAllCarets=function(){};t.prototype.gotoCaret=function(){};t.prototype.isCaretFollowed=function(){return!1};t.prototype.getAllCarets=function(){return{}};return t
}(l.EventEmittingClass);t.NoopCaretEditorPositionStore=g;var m=function(e){o.__extends(t,e);function t(t){var n=e.call(this)||this;n.editor=t;n.currentCaretPosition=null;n.caretPositionsByUser={}
;n.caretChangeId=1;n.handleCollaboratorCaret=function(e){n.updateUserCaret(e)};n.handleChangesetReceived=function(e){n.updateUserCaretFromChangeset(e)};n.removeUserCaret=function(e){
delete n.caretPositionsByUser[e.secureUserId];n.unfollowCaret(e.secureUserId);n.updateAllCarets()};n.updateAllCarets=function(){n.trigger("change",void 0);n.caretToFollow&&n.gotoCaret(n.caretToFollow)
};n.gotoCaret=function(e){var t,o=n.caretPositionsByUser[e];if(o){var i=n.editor.getRep(o.zone);if(!(o.line>=i.lines.length())){var r=i.lines.atIndex(o.line)
;r&&r.lineNode&&(null===(t=n.editor.getViewport())||void 0===t||t.scrollIntoViewIfNeeded(r.lineNode,!0))}}};n.followCaret=function(e){if(n.caretToFollow!==e){
var t=u.createElement(f,o.__assign({},p.followingCursorNoName)),i=n.editor.authors.getAuthorInfos();if(i[e]){var r=i[e].name;t=u.createElement(f,o.__assign({},p.followingCursor,{values:{username:r}}))
}h.default.showInfoToast({message:t,autoDismiss:!0,autoDismissDelayMs:2e3})}n.caretToFollow=e};n.unfollowCaret=function(e){e&&n.caretToFollow!==e||(n.caretToFollow=null)}
;n.isCaretFollowed=function(e){return n.caretToFollow===e};n.handleCaret=function(e){n.unfollowCaret();if(n.onCaretUpdate(e)&&n.editor.padController){
n.editor.padController.getChangesetTracker().updateCaretPos(n.getCurrentCaretPosition())}};t.observer.on("scroll-throttled",n.updateAllCarets);t.observer.on("invalidate-cache",n.updateAllCarets)
;t.observer.on("click-user",n.gotoCaret);t.observer.on("follow-user-caret",n.followCaret);t.observer.on("remove-user-caret",n.removeUserCaret);t.observer.on("caret",n.handleCaret)
;t.observer.on("collab-selection-change",n.handleCollaboratorCaret);t.observer.on("changeset",n.handleChangesetReceived);return n}t.prototype.dispose=function(){
this.editor.observer.off("scroll-throttled",this.updateAllCarets);this.editor.observer.off("invalidate-cache",this.updateAllCarets);this.editor.observer.off("click-user",this.gotoCaret)
;this.editor.observer.off("follow-user-caret",this.followCaret);this.editor.observer.off("remove-user-caret",this.removeUserCaret);this.editor.observer.off("caret",this.handleCaret)
;this.editor.observer.off("collab-selection-change",this.handleCollaboratorCaret);this.editor.observer.off("changeset",this.handleChangesetReceived)};t.prototype.getAllCarets=function(){
return this.caretPositionsByUser};t.prototype.getCurrentCaretPosition=function(){return this.currentCaretPosition?(0,i.copyCaret)(this.currentCaretPosition):null}
;t.prototype.onCaretUpdate=function(e){
if(this.editor.hasSelection()&&(!this.currentCaretPosition||this.currentCaretPosition.zone!=this.editor.selection.getStart().zone||this.currentCaretPosition.line!=this.editor.selection.getStart().line||this.currentCaretPosition.col!=this.editor.selection.getStart().col||e)){
var t=this.editor.getSelectedRep(),n=t?t.lines.offsetOfIndex(this.editor.selection.getStart().line):0;this.currentCaretPosition={zone:this.editor.selection.getStart().zone,
line:this.editor.selection.getStart().line,col:this.editor.selection.getStart().col,totalPos:n+this.editor.selection.getStart().col,caretChangeId:this.caretChangeId++}
;this.caretPositionsByUser[a.default.secureUserId]=this.currentCaretPosition;this.updateAllCarets();return!0}return!1};t.prototype.updateUserCaretFromChangeset=function(e){
for(var t=this.editor.getApool(),n=0,o=Object.keys(this.caretPositionsByUser);n<o.length;n++){var i=o[n],a=r.followCaret(e,this.caretPositionsByUser[i],t)
;a&&this.checkCaretConsistent(a)||delete this.caretPositionsByUser[i]}this.currentCaretPosition=r.followCaret(e,this.currentCaretPosition,t)
;this.currentCaretPosition&&(this.currentCaretPosition.caretChangeId=this.caretChangeId++);this.updateAllCarets()};t.prototype.updateUserCaret=function(e){
if(this.editor.hasFeature("carets")&&e.caret&&this.checkCaretConsistent(e.caret)&&this.editor.authors.getAuthorInfos()[e.secureChangedBy]&&0!=e.secureChangedBy.indexOf("g.")){
this.caretPositionsByUser[e.secureChangedBy]=e.caret;this.updateAllCarets()}};t.prototype.checkCaretConsistent=function(e){
if(e.zone!=c.Position.ROOT_ZONE&&!this.editor.managers.isZoneRegistered(e.zone))return!1;var t=this.editor.getRep(e.zone)
;if(!t||e.line>=t.lines.length()||t.lines.offsetOfIndex(e.line)+e.col!=e.totalPos){console.warn("caret is not valid for rep.lines");return!1}return!0};return t}(l.EventEmittingClass)
;t.CaretEditorPositionStoreImpl=m},1408:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.isCurrentUserOnlyCaret=t.CaretPixelPositionCalculator=void 0
;var o=n(8),i=n(18),r=n(568),a=function(){function e(e,t,n){this.editor=e;this.carets=t;this.container=n;this.containerOffset=(0,i.offset)(this.container)}e.prototype.calculate=function(){var e=this
;return s(this.carets)?[]:Object.keys(this.carets).filter((function(e){return e!==o.default.secureUserId})).map((function(t){return e.calculateInitialCaretPosition(e.carets[t],t)})).filter(Boolean)}
;e.prototype.calculateInitialCaretPosition=function(e,t){var n=r.translateRepToPosition(this.editor,e);return n&&n.left?{caret:e,secureUserId:t,top:(n.bottom||0)-this.containerOffset.top,
left:n.left-this.containerOffset.left}:null};return e}();t.CaretPixelPositionCalculator=a;function s(e){var t=Object.keys(e);return 1==t.length&&t[0]==o.default.secureUserId}t.isCurrentUserOnlyCaret=s
},1409:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(3),r=n(827),a=n(1410),s=n(1411),l=n(270),d=n(595),c=n(1412),u=n(1415),h=n(51),p=n(74),f=n(6),g=n(111),m=n(11),v=n(28),y=n(4),b=n(0),C=n(2),E=(0,n(5).PaperIntlFactory)().F,I=(0,
C.defineMessages)({offline:{id:"buP6n1",defaultMessage:"You can't edit while offline"}}),_=function(){return b.createElement("div",{className:"hp-toolbar-offline-hint"
},b.createElement(E,o.__assign({},I.offline)))
},T=["bold","highlight","lineType","lineType","links","selectedImageAttributes","highlight","lineType","selectedTableRows","entireTableSelected","selectedTableCols","selectedTableRows","tableColumnHighlight","tableRowHighlight","strikethrough","lanuageForCodeLine","placeholder"],S=function(e){
o.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.updateLayout=function(){if(n.state.shown){var e=36*n.getNumAvailableCommands(n.state.availableCommands),t=(0,
r.determineToolbarPosition)(n.props.editor,e),o=t.position,i=t.shouldGoAbove;n.setState({position:o,shouldGoAbove:i})}};n.cachedOmnibarCommands=[];n.shouldShowContextual=(0,g.buildPredicate)({
isContextualToolbarVisible:(0,g.equals)("true")});n.handleOmnibarContextChange=function(e){var t,o=e.context,i=e.commands,a=e.availableCommandIds,s=n.shouldShowContextual(o);if(s){
var l=(null===(t=o.contextualToolbarMode)||void 0===t?void 0:t[0])||"normal",d=n.getAvailableCommands({commands:i,availableCommandIds:a},l),c=36*n.getNumAvailableCommands(d),u=(0,
r.determineToolbarPosition)(n.props.editor,c),h=u.position,p=u.shouldGoAbove;n.setState({shown:s,mode:l,omnibarContext:f.pick(o,T),availableCommands:d,position:h,shouldGoAbove:p})
}else n.state.shown&&n.setState({shown:!1})};n.handleOmnibarCommandsChange=function(e){var t=e.commands,o=e.availableCommandIds,i=n.getAvailableCommands({commands:t,availableCommandIds:o
},n.state.mode);n.setState({availableCommands:i})};n.runCommandById=function(e,t){void 0===t&&(t={});return new Promise((function(i,r){n.context.omnibar.runCommandById(e,o.__assign({
trackContext:n.getTrackContext()},t)).then((function(e){i(e);e.preserveFocus||n.focusEditor()})).catch(r)}))};n.setTextHighlight=function(e){return n.runCommandById("highlight_text",{
textHighlightColor:[e]})};n.removeTextHighlight=function(){return n.runCommandById("remove_highlight_text")};n.setTableSelectionHighlight=function(e){
return n.runCommandById("highlight_table_selection",{highlightColor:[e]})};n.removeTableSelectionHighlight=function(){return n.runCommandById("remove_table_selection_highlight")}
;n.setCodeLanguage=function(e){return n.runCommandById("set_code_language",{codeLanguage:[e]})};n.focusEditor=function(){v.isApplePhone()||n.props.editor.focus()};n.handleSpringbarClick=function(e){
if(e){e.stopPropagation();e.preventDefault()}n.focusEditor()};n.state={availableCommands:[[]],shown:!1,mode:"normal",omnibarContext:{},position:{top:0,left:0},shouldGoAbove:!0};return n}
t.prototype.componentDidMount=function(){var e,t;null===(e=this.context.omnibar)||void 0===e||e.on("commandsChange",this.handleOmnibarCommandsChange)
;null===(t=this.context.omnibar)||void 0===t||t.on("contextChange",this.handleOmnibarContextChange);this.events.on(this.props.editor.observer,"resize-finished",this.updateLayout)}
;t.prototype.componentDidUpdate=function(e,t){t.shown&&!this.state.shown&&this.trackToolbarClosed();if(!t.shown&&this.state.shown){this.trackToolbarOpened()
;"gallery"==this.state.mode&&this.triggerGalleryToolbarOpened()}};t.prototype.componentWillUnmount=function(){var e,t
;null===(e=this.context.omnibar)||void 0===e||e.off("commandsChange",this.handleOmnibarCommandsChange)
;null===(t=this.context.omnibar)||void 0===t||t.off("contextChange",this.handleOmnibarContextChange)};t.prototype.trackToolbarOpened=function(){(0,y.trackAce)("toolbar-show",{
toolbarMode:this.state.mode});(0,y.trackUi)("Open Toolbar",{mode:this.state.mode,type:y.EditorContext.ContextualToolbar,context:y.EditorContext.Editor[this.props.editor.editorType]})}
;t.prototype.trackToolbarClosed=function(){(0,y.trackAce)("toolbar-hide",{toolbarMode:this.state.mode});(0,y.trackUi)("Close Toolbar",{mode:this.state.mode,type:y.EditorContext.ContextualToolbar,
context:y.EditorContext.Editor[this.props.editor.editorType]});"gallery"==this.state.mode&&(0,y.trigger)("gallery-toolbar-hidden")};t.prototype.triggerGalleryToolbarOpened=function(){
var e=this.props.editor.media.getSelectedGalleryEmbedData(),t=e.embedType,n=e.embedUrl,o=e.embedComponent;("image"===t?!!o&&o.isBrokenEmbed&&!o.isBrokenEmbed():!!o)&&(0,
y.trigger)("gallery-toolbar-shown",{embedType:t,embedUrl:n})};t.prototype.getNumAvailableCommands=function(e){return e.reduce((function(e,t){return e+t.length}),0)}
;t.prototype.getAvailableCommands=function(e,t){var n=e.availableCommandIds,o=void 0===n?[]:n,i=e.commands,r=new Map;(i||this.cachedOmnibarCommands).forEach((function(e){r.set(e.id,e)}))
;i&&(this.cachedOmnibarCommands=i);var a=new Map;o.map((function(e){a.set(e,r.get(e))}));return this.getCommandGroupsForMode(t).map((function(e){return f.compact(e.map((function(e){return a.get(e)})))
}))};t.prototype.getCommandGroupsForMode=function(e){switch(e){case"gallery-crop-image":return[["zoom_out_image","zoom_in_image"],["fit_image"]];case"gallery":
return[["align_image_left","align_image_center","align_image_right","align_image_full"],["replace_image","replace_dropbox_embed"],["crop_image_preview","page_preview_unroll","crop_single_page_preview"],["resize_compact","resize_gallery","resize_full"],["crop_preview","add_annotation","add_comment"]]
;case"link-only":return[["create_link_text"]];case"offline":return[];case"table":return[["highlight_table_selection","toggle_table_row_header","toggle_table_column_header","delete_table_selection"]]
;case"timeline":return[["delete_timeline"]];default:
return[["toggle_placeholder"],["toggle_bold","toggle_strikethrough","highlight_text","create_link_text"],["toggle_h1","toggle_h2","toggle_bullet_list","toggle_to_do_list"],["suggest_changes","add_comment"],["set_code_language"]]
}};t.prototype.getActiveStateForCommand=function(e,t){var n=function(e,n){return f.includes(t[e],n)};switch(e){case"align_image_center":return n("selectedImageAttributes","imageCenter")
;case"align_image_full":return n("selectedImageAttributes","imageFull");case"align_image_left":return n("selectedImageAttributes","imageLeft");case"align_image_right":
return n("selectedImageAttributes","imageRight");case"create_link_text":return n("links","true")&&this.getValuesFromContext("links",this.state.omnibarContext).length>=2;case"set_code_language":
return n("lanuageForCodeLine","true");case"toggle_bold":return n("bold","true");case"toggle_bullet_list":return n("lineType","bullet");case"toggle_h1":return n("lineType","hone")
;case"toggle_to_do_list":return n("lineType","task");case"toggle_h2":return n("lineType","htwo");case"toggle_italic":return n("italic","true");case"toggle_strikethrough":
return n("strikethrough","true");case"toggle_placeholder":return n("placeholder","true");case"highlight_text":return n("highlight","true")}return!1};t.prototype.getTrackContext=function(){
var e=this.props.editor&&this.props.editor.selection.getStart();return e&&(0,h.isCellId)(e.zone)?y.EditorContext.Table.ContextualToolbar:y.EditorContext.ContextualToolbar}
;t.prototype.getValuesFromContext=function(e,t){var n=t[e];return n&&n.length>1?"false"===n[0]?[]:n.filter((function(e){return!f.includes(["true","false"],e)})):[]}
;t.prototype.renderCommand=function(e){var t=this,n=this.getActiveStateForCommand(e.id,this.state.omnibarContext);switch(e.id){case"highlight_text":return b.createElement(s.HighlightEditorWithButton,{
activeColor:this.getValuesFromContext("highlight",this.state.omnibarContext)[0],command:e,editor:this.props.editor,key:e.id,removeHighlight:this.removeTextHighlight,setHighlight:this.setTextHighlight,
trackContext:this.getTrackContext()});case"highlight_table_selection":return b.createElement(u.TableHighlightWithButton,{command:e,
selectedTableRows:this.getValuesFromContext("selectedTableRows",this.state.omnibarContext),selectedTableCols:this.getValuesFromContext("selectedTableCols",this.state.omnibarContext),
editor:this.props.editor,key:e.id,removeTableSelectionHighlight:this.removeTableSelectionHighlight,setTableSelectionHighlight:this.setTableSelectionHighlight,
tableColumnHighlight:this.getValuesFromContext("tableColumnHighlight",this.state.omnibarContext)[0],tableRowHighlight:this.getValuesFromContext("tableRowHighlight",this.state.omnibarContext)[0],
trackContext:this.getTrackContext()});case"delete_table_selection":return b.createElement(a.default,{key:e.id,active:n,command:e,editor:this.props.editor,onClick:this.runCommandById})
;case"set_code_language":return b.createElement(c.default,{codeLanguage:this.getValuesFromContext("lanuageForCodeLine",this.state.omnibarContext)[0],command:e,key:e.id,
setCodeLanguage:this.setCodeLanguage,trackContext:this.getTrackContext()});case"create_link_text":return b.createElement(l.default,{key:e.id,active:n,command:e,onClick:function(){t.focusEditor()
;t.props.editor.observer.trigger("show-link-editor",void 0)},inverse:!0});default:return b.createElement(l.default,{key:e.id,active:n,command:e,onClick:this.runCommandById,inverse:!0})}}
;t.prototype.renderCommands=function(){var e=this;if("offline"===this.state.mode)return[b.createElement(_,null)];var t=f.filter(this.state.availableCommands,f.size),n=[];t.forEach((function(o,i){
o.map((function(t){return e.renderCommand(t)})).filter(Boolean).forEach((function(e){return n.push(e)}));i!==t.length-1&&n.push(b.createElement(k,{key:"separator-".concat(i)}))}));return n}
;t.prototype.render=function(){var e=this.renderCommands(),t=i("selenium-contextual-toolbar","hp-contextual-toolbar","hp-contextual-toolbar-".concat(this.state.mode),{
"hp-contextual-toolbar-no-actions":!e.length,"mobile-safari-fix":v.isApplePhone()});return b.createElement(y.TrackContext,{trackContext:this.getTrackContext()},b.createElement(d.default,{className:t,
position:this.state.position,direction:this.state.shouldGoAbove?"up":"down",shown:this.state.shown,onClick:this.handleSpringbarClick},e))};t.contextTypes=f.pick(p.ReactAppContextTypes,["omnibar"])
;t.displayName="ContextualToolbar";return t=o.__decorate([m.default],t)}(b.Component);t.default=S;var k=function(){return b.createElement("span",{className:"hp-contextual-toolbar-separator"})}},
1410:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),r=n(270),a=n(0),s=(0,n(5).PaperIntlFactory)()._f,l=(0,i.defineMessages)({trashTableCols:{id:"SDbuFo",
defaultMessage:"{deleteCount, plural, one {Delete column} other {Delete columns}}"},trashTableRows:{id:"U2W7Tb",defaultMessage:"{deleteCount, plural, one {Delete row} other {Delete rows}}"},
trashTable:{id:"9i0pvW",defaultMessage:"Delete table"}}),d=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={toDelete:null};t.handleMouseOver=function(){
var e=t.props.editor.managers.getLineManagerWithSpecialSelection(),n=e&&e.getWhollySelectedRegions();if(n){e.enableDeleteHints();n.entireTable?t.setState({toDelete:"table"}):n.cols.length?t.setState({
toDelete:"cols",deleteCount:n.cols.length}):n.rows.length&&t.setState({toDelete:"rows",deleteCount:n.rows.length})}};t.handleMouseOut=function(){
var e=t.props.editor.managers.getLineManagerWithSpecialSelection();e&&e.disableDeleteHints()};return t}t.prototype.getDeleteTooltipLabel=function(){switch(this.state.toDelete){case"cols":
return s(l.trashTableCols,{deleteCount:this.state.deleteCount});case"rows":return s(l.trashTableRows,{deleteCount:this.state.deleteCount});default:return s(l.trashTable)}}
;t.prototype.render=function(){var e=this.getDeleteTooltipLabel();return a.createElement(r.default,{active:this.props.active,command:this.props.command,key:this.props.command.id,label:e,
onClick:this.props.onClick,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver,inverse:!0})};t.displayName="DeleteTableSelectionButton";return t}(a.Component);t.default=d},
1411:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.HighlightEditorWithButton=void 0;var o=n(1),i=n(197),r=n(429),a=n(86),s=n(4),l=n(270),d=n(0),c=function(e){o.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={showColorPicker:!1};t.handleMouseOver=function(){t.props.activeColor||(0,s.trackAce)("toolbar-button-mouse-over",{
command:"highlight"})};t.handleMouseOut=function(){t.props.activeColor||(0,s.trackAce)("toolbar-button-mouse-out",{command:"highlight"})};t.onColorPickerClickOutside=function(){return t.setState({
showColorPicker:!1})};t.onColorChange=function(e){t.props.setHighlight(e).then((function(){return t.props.editor.focus()}));t.setState({showColorPicker:!1},(function(){
return a.TextHighlightColors.setLastUsedColor(e)}));s.IntentionEvent.ChangeHighlightColor.track({context:t.props.trackContext,new_color:e});s.IntentionEvent.FormatText.track({type:"highlight",
context:t.props.trackContext,color:e})};t.onColorReset=function(){t.props.removeHighlight().then((function(){return t.props.editor.focus()}));t.setState({showColorPicker:!1},(function(){
return a.TextHighlightColors.clearLastUsedColor()}));s.IntentionEvent.FormatText.track({type:"highlight",context:t.props.trackContext,color:null})};t.onButtonClick=function(){var e
;if(!t.props.activeColor){e=a.TextHighlightColors.getLastUsedColor()||a.TextHighlightColors.defaultColor;var n=a.TextHighlightColors.getAttributeForHighlight(e)
;t.props.setHighlight(n).then((function(){return t.props.editor.focus()}));s.IntentionEvent.FormatText.track({type:"highlight",context:t.props.trackContext,selectedColor:e})}t.setState({
showColorPicker:!0})};return t}t.prototype.render=function(){var e=this.props.activeColor;return d.createElement(d.Fragment,null,this.state.showColorPicker&&d.createElement(i.default,{
onClickOutside:this.onColorPickerClickOutside},d.createElement(r.default,{colors:a.TextHighlightColors.colors,highlightSelectedColor:!0,onChange:this.onColorChange,onReset:this.onColorReset,
selectedColor:e})),d.createElement(l.default,{active:!!e,buttonColorHighlight:e,command:this.props.command,onClick:this.onButtonClick,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver,
tooltipAbove:!0,inverse:!0}))};t.displayName="HighlightEditorWithButton";return t}(d.PureComponent);t.HighlightEditorWithButton=c},1412:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(33),a=n(2),s=n(42),l=n(34),d=n(0),c=n(1413),u=(0,n(5).PaperIntlFactory)().F,h=(0,a.defineMessages)({code:{id:"rW3hKA",defaultMessage:"Auto"},syntax:{id:"tVaVkL",
defaultMessage:"Plain text"}}),p=[{name:d.createElement(u,o.__assign({},h.code)),value:"auto",isDefault:!0},{name:d.createElement(u,o.__assign({},h.syntax)),value:"override-txt"},{name:"C / C++",
value:"override-cpp"},{name:"C#",value:"override-csharp"},{name:"Clojure",value:"override-clojure"},{name:"Coffeescript",value:"override-coffeescript"},{name:"CSS / Less / SCSS",value:"override-less"
},{name:"Diff",value:"override-diff"},{name:"Erlang",value:"override-erlang"},{name:"Go",value:"override-go"},{name:"Haskell",value:"override-haskell"},{name:"HTML",value:"override-html"},{
name:"Java",value:"override-java"},{name:"JavaScript",value:"override-javascript"},{name:"Kotlin",value:"override-kotlin"},{name:"Lisp",value:"override-lisp"},{name:"Lua",value:"override-lua"},{
name:"Makefile",value:"override-makefile"},{name:"Markdown",value:"override-markdown"},{name:"Objective-C",value:"override-objectivec"},{name:"OCaml",value:"override-ocaml"},{name:"Perl",
value:"override-perl"},{name:"PHP",value:"override-php"},{name:"Protocol buffer",value:"override-protobuf"},{name:"Python",value:"override-python"},{name:"R",value:"override-r"},{name:"Ruby",
value:"override-ruby"},{name:"Rust",value:"override-rust"},{name:"Scala",value:"override-scala"},{name:"Shell",value:"override-bash"},{name:"SQL",value:"override-sql"},{name:"Swift",
value:"override-swift"},{name:"TeX",value:"override-tex"},{name:"TypeScript",value:"override-typescript"},{name:"XML",value:"override-xml"},{name:"YAML",value:"override-yaml"}];t.default=function(e){
var t,n=p.map((function(e){if("---"==e.name)return e;e.name="string"==typeof e.name?d.createElement("span",{className:"notranslate"},e.name):e.name;return e
})),a=e.codeLanguage&&-1!==e.codeLanguage.indexOf(s.langOverridePrefix)?e.codeLanguage:"auto",u=null===(t=i.find(n,(function(e){return e.value==a})))||void 0===t?void 0:t.name,h=function(e){
return d.createElement(l.Menu.SelectItem,{value:e.value,selected:a==e.value,key:e.value},e.name)};return d.createElement(l.Menu.Wrapper,{onSelection:e.setCodeLanguage,isPortaled:!1,
className:c.default.menu},(function(e){var t=e.getTriggerProps,i=e.getContentProps;return d.createElement(d.Fragment,null,d.createElement(r.Button,o.__assign({className:"omnibar-button-syntax",
inverse:!0,variant:"transparent",hasNoUnderline:!0,withDropdownIcon:!0},t()),u),d.createElement(l.Menu.Content,o.__assign({},i(),{placement:"bottom"
}),d.createElement(l.Menu.Segment,null,n.slice(0,2).map(h)),d.createElement(l.Menu.Segment,null,n.slice(2).map(h))))}))}},1413:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.menu=void 0;n(1414);t.menu="_menu_12wpr_2";t.default={menu:"_menu_12wpr_2"}},1414:function(e,t,n){},1415:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.TableHighlightWithButton=void 0;var o=n(1),i=n(197),r=n(429),a=n(2),s=n(86),l=n(270),d=n(0),c=(0,n(5).PaperIntlFactory)()._f,u=(0,a.defineMessages)({highlightTableCols:{id:"ILcJpP",
defaultMessage:"{highlightCount, plural, one {Highlight column} other {Highlight columns}}"},highlightTableRows:{id:"KMkU7O",
defaultMessage:"{highlightCount, plural, one {Highlight row} other {Highlight rows}}"}}),h=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={
showColorPicker:!1,toHighlight:null,highlightCount:0};t.handleMouseOver=function(){var e=t.props.editor.managers.getLineManagerWithSpecialSelection(),n=e&&e.getWhollySelectedRegions()
;n&&(n.cols.length?t.setState({toHighlight:"cols",highlightCount:n.cols.length}):n.rows.length&&t.setState({toHighlight:"rows",highlightCount:n.rows.length}))};t.onColorPickerClickOutside=function(){
return t.setState({showColorPicker:!1})};t.onColorReset=function(){t.props.removeTableSelectionHighlight();s.TableHighlightColors.clearLastUsedColor()};t.handleClick=function(){
var e=t.getSelectedColor()||t.getDefaultHighlightColor();t.setColor(e);t.setState({showColorPicker:!0})};t.getSelectedColor=function(){
return t.props.selectedTableRows.length>0?t.props.tableRowHighlight:t.props.tableColumnHighlight};return t}t.prototype.getDefaultHighlightColor=function(){
return s.TableHighlightColors.getLastUsedColor()||s.TableHighlightColors.defaultColor};t.prototype.setColor=function(e){this.props.setTableSelectionHighlight(e)};t.prototype.onColorChange=function(e){
this.setColor(e);this.setState({showColorPicker:!1})};t.prototype.getDeleteTooltipLabel=function(){return"cols"===this.state.toHighlight?c(u.highlightTableCols,{
highlightCount:this.state.highlightCount}):c(u.highlightTableRows,{highlightCount:this.state.highlightCount})};t.prototype.render=function(){
var e=this,t=this.getSelectedColor(),n=this.getDeleteTooltipLabel();return d.createElement(d.Fragment,null,this.state.showColorPicker&&d.createElement(i.default,{
onClickOutside:this.onColorPickerClickOutside},d.createElement("div",{className:"table-color-picker-wrapper"},d.createElement(r.default,{highlightSelectedColor:!0,
colors:s.TableHighlightColors.colors.map(s.getDarkerToneForColor),selectedColor:(0,s.getDarkerToneForColor)(t),onChange:function(t){return e.onColorChange((0,s.getLighterToneForColor)(t))},
onReset:this.onColorReset}))),d.createElement(l.default,{command:this.props.command,label:n,tooltipAbove:!0,onClick:this.handleClick,active:!!t,onMouseOver:this.handleMouseOver,buttonColorHighlight:t,
inverse:!0}))};t.displayName="TableHighlightWithButton";return t}(d.PureComponent);t.TableHighlightWithButton=h},1416:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(6),i=n(8),r=n(2),a=n(14),s=n(419),l=(0,a.MsgFactory)("onboarding"),d=l.defineMessages,c=l.IntlMessageFormat,u=d({maggie:{msg:"Maggie W",
description:"Fake user, can be localized to a familiar name in country"},joshua:{msg:"Joshua Z",description:"Fake user, can be localized to a familiar name in country"},kenneth:{msg:"Kenneth S",
description:"Fake user, can be localized to a familiar name in country"},alyssia:{msg:"Alyssia K",description:"Fake user, can be localized to a familiar name in country"},matilda:{msg:"Matilda R",
description:"Fake user, can be localized to a familiar name in country"},taylor:{msg:"Taylor L",description:"Fake user, can be localized to a familiar name in country"}});(0,r.defineMessages)({
maggie:{id:"s9sqTN",defaultMessage:"Maggie W"},joshua:{id:"a+D/SL",defaultMessage:"Joshua Z"},kenneth:{id:"B6ATmO",defaultMessage:"Kenneth S"},alyssia:{id:"a1tLq3",defaultMessage:"Alyssia K"},
matilda:{id:"wIuoxt",defaultMessage:"Matilda R"},taylor:{id:"sAB02P",defaultMessage:"Taylor L"}});t.default=function(){var e=new s.PeopleDataSource(!0,null),t={maggie:{type:"user",
name:new c(u.maggie,i.default.userLocale).format()},joshua:{type:"user",name:new c(u.joshua,i.default.userLocale).format()},kenneth:{type:"user",name:new c(u.kenneth,i.default.userLocale).format()},
alyssia:{type:"user",name:new c(u.alyssia,i.default.userLocale).format()},matilda:{type:"user",name:new c(u.matilda,i.default.userLocale).format()},taylor:{type:"user",
name:new c(u.taylor,i.default.userLocale).format()}};o.assignIn(e.existing,{"/ep/profile/d.16Vtz98QRUunv3RpqfnlamClOns5G15Q3fgImNEXnEzUd5k0":t.maggie,
"/ep/profile/d.YHOxbbl9x9Ev0biUL1HFaE3SzznFxDazx1qDrZQ7jGB":t.maggie,"/ep/profile/d.16Vtz98QRUunv3RpqfnlamClOnjUo2kiMJwzLopylJFbzFE2":t.joshua,
"/ep/profile/d.YHOxbbl9x9Ev0biUL1HFaKTsh1RXQGnDDqMiQmBrFJz":t.joshua,"/ep/profile/d.16Vtz98QRUunv3RpqfnlamTR1RgpmBGTWLBNuyLz04obEAPI":t.kenneth,
"/ep/profile/d.eHy2dQDgQ6HehXTrj8E79xyxg0HHysZ6iA6XfNVcdF":t.kenneth,"/ep/profile/d.16Vtz98QRUunv3RpqfnlamTR1Qz97VqZPE6A5zboU9DtGv6u":t.alyssia,
"/ep/profile/d.eHy2dQDgQ6HehXTrj8E6X8GRZXFNSrgvrHyvCoM4Fj":t.alyssia,"/ep/profile/d.16Vtz98QRUunv3RpqfnlamTR3VWe5t1sqFYp2pEl2zklLvfC":t.matilda,
"/ep/profile/d.eHy2dQDgQ6HehXTrj8E7kP69x9W7VepdOG2PfnMtX3":t.matilda,"/ep/profile/d.16Vtz98QRUunv3RpqfnlamTR3V7Sq1nkse1mXeZWPZM6AvQl":t.taylor,
"/ep/profile/d.eHy2dQDgQ6HehXTrj8E70rshfX0pdVKJzXQAbt3QZV":t.taylor});return e}},1449:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(111),a=n(3),s=n(18),l=n(827),d=n(11),c=n(51),u=n(1450),h=n(28),p=n(0),f=n(74),g=n(595),m=n(4),v=n(12),y=n(823),b=n(44),C=300,E=function(e){o.__extends(t,e);function t(t){
var n=e.call(this,t)||this;n.updateLayout=function(){if(n.state.shown){var e=(0,l.determineToolbarPosition)(n.props.editor,C,n.state.linkAnchorEl||void 0).position;n.setState({position:e})}}
;n.shouldShowLinkToolbar=(0,r.buildPredicate)({isLinkToolbarVisible:(0,r.equals)("true")});n.isLinkToolbarTriggeredByMouse=(0,r.buildPredicate)({linkToolbarTrigger:(0,r.equals)("mouse")})
;n.handleOmnibarContextChange=function(e){var t,o,i=e.context,r=n.shouldShowLinkToolbar(i);if(r){if(!r||!n.state.shown){var a=null;if(n.isLinkToolbarTriggeredByMouse(i)){
var d=null===(o=null===(t=n.props.editor.mouse.getLatestMouseMoveInfo())||void 0===t?void 0:t.evt)||void 0===o?void 0:o.target;a=(0,s.closest)(d,".ace-line .attrlink a")}var c=(0,
l.determineToolbarPosition)(n.props.editor,C,a||void 0).position;n.setState({shown:r,links:n.getValuesFromContext("links",i),linkAnchorEl:a,position:c})}}else n.state.shown&&n.setState({shown:!1})}
;n.closeLinkToolbar=function(){n.props.editor.observer.trigger("hide-link-editor",void 0)};n.handleLinkEditorButtonChange=function(e){var t=e?"show-link-editor":"hide-link-editor"
;n.props.editor.observer.trigger(t,void 0)};n.focusEditor=function(){h.isApplePhone()||n.props.editor.focus()};n.handleSpringbarClick=function(e){if(e){e.stopPropagation();e.preventDefault()}
n.focusEditor()};n.loadPadDataIfLinkedToPad=function(){n.state.linkAnchorEl&&v.get({url:"/pad/load-pad-mention-hover",analyticsTag:"load-linked-text-hover",shardingKey:v.getStatelessShardingKey(),
suppressGlobalErrorHandling:!0,data:{url:n.state.linkAnchorEl.getAttribute("data-target-href")},successHandler:function(e){(0,b.setTimeout)((function(){return n.setState({data:e.data})}),200)}})}
;n.renderDocPreviewTooltip=function(){if(n.state.data){var e=a("hp-mention-tooltip-container","hp-mention-tooltip-visible","hp-mention-preview-tooltip");return p.createElement("div",{className:e,
style:{top:n.state.position.top+Math.floor(75),left:n.state.position.left-Math.floor(150)}},p.createElement(y.DocPreviewTooltip,{data:n.state.data}))}};n.state={shown:!1,linkAnchorEl:null,links:[],
position:{top:0,left:0},data:null};return n}t.prototype.componentDidMount=function(){var e;null===(e=this.context.omnibar)||void 0===e||e.on("contextChange",this.handleOmnibarContextChange)
;this.events.on(this.props.editor.observer,"resize-finished",this.updateLayout)};t.prototype.componentWillUpdate=function(e,t){this.state.shown!=t.shown&&this.updateContextualBodyClass(t.shown)}
;t.prototype.componentDidUpdate=function(e,t){if(t.shown&&!this.state.shown){this.trackToolbarClosed();this.setState({data:null})}if(!t.shown&&this.state.shown){this.trackToolbarOpened()
;this.loadPadDataIfLinkedToPad()}};t.prototype.componentWillUnmount=function(){var e;null===(e=this.context.omnibar)||void 0===e||e.off("contextChange",this.handleOmnibarContextChange)}
;t.prototype.trackToolbarOpened=function(){(0,m.trackAce)("toolbar-show",{toolbarMode:"link-editor"});(0,m.trackUi)("Open Toolbar",{mode:"link-editor",type:m.EditorContext.ContextualToolbar,
context:m.EditorContext.Editor[this.props.editor.editorType]})};t.prototype.trackToolbarClosed=function(){(0,m.trackAce)("toolbar-hide",{toolbarMode:"link-editor"});(0,m.trackUi)("Close Toolbar",{
mode:"link-editor",type:m.EditorContext.ContextualToolbar,context:m.EditorContext.Editor[this.props.editor.editorType]})};t.prototype.updateContextualBodyClass=function(e){
e?document.body.classList.add("show-contextual-toolbar"):document.body.classList.remove("show-contextual-toolbar")};t.prototype.getValuesFromContext=function(e,t){var n=t[e]
;return n&&n.length>1?"false"===n[0]?[]:n.filter((function(e){return!i.includes(["true","false"],e)})):[]};t.prototype.getTrackContext=function(){
var e=this.props.editor&&this.props.editor.selection.getStart();return e&&(0,c.isCellId)(e.zone)?m.EditorContext.Table.ContextualToolbar:m.EditorContext.ContextualToolbar}
;t.prototype.render=function(){var e=a("selenium-contextual-toolbar","hp-contextual-toolbar","hp-contextual-toolbar-with-link",{"mobile-safari-fix":h.isApplePhone()})
;return p.createElement(m.TrackContext,{trackContext:this.getTrackContext()},this.state.shown?this.renderDocPreviewTooltip():null,p.createElement(g.default,{className:e,position:this.state.position,
shown:this.state.shown,onClick:this.handleSpringbarClick},p.createElement(u.LinkEditorWithButton,{anchorEl:this.state.linkAnchorEl,defaultValue:this.state.links[0],editor:this.props.editor,
enabled:this.state.shown,key:"link-editor-with-button-key",onChange:this.handleLinkEditorButtonChange,onEscape:this.closeLinkToolbar,onRemoved:this.closeLinkToolbar,onSave:this.closeLinkToolbar})))}
;t.contextTypes=i.pick(f.ReactAppContextTypes,["omnibar"]);t.displayName="LinkEditorToolbar";return t=o.__decorate([d.default],t)}(p.Component);t.default=E},1450:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.LinkEditorWithButton=void 0;var o=n(1),i=n(6),r=n(3),a=n(18),s=n(47),l=n(2),d=n(11),c=n(10),u=n(43),h=n(270),p=n(0),f=n(74),g=n(13),m=n(4),v=(0,
n(5).PaperIntlFactory)()._f,y=(0,l.defineMessages)({linkPlaceholder:{id:"6jIWo7",defaultMessage:"Enter link URL"}}),b=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.input=null
;n.cancelChanges=!1;n.onFocus_=function(){n.events.on(document,"mousedown",(function(e){var t=e.target;if(!(0,a.closest)(t,".hp-editor-selection-wrapper, .hp-editor-selection-link")){
n.events.removeAll();n.triggerSave_()}}));n.cancelChanges=!1;n.setState({isFocused:!0})};n.onBlur_=function(){n.setState({isFocused:!1});n.events.removeAll()};n.onKeyDown_=function(e){
if(e.keyCode!=u.KeyCode.ESCAPE){n.cancelChanges=!1;e.keyCode!=u.KeyCode.ENTER&&e.keyCode!=u.KeyCode.TAB||n.triggerSave_()}else{n.cancelChanges=!0;n.props.onEscape&&n.props.onEscape()}}
;n.triggerSave_=function(){n.props.onSave&&n.props.onSave(n.state.value,n.state.value!==n.state.defaultValue)};n.onRemoveClick_=function(){n.props.onRemove&&n.props.onRemove()}
;n.handleChange=function(){n.setState({value:n.input.value,defaultValue:void 0})};var o=n.props.defaultValue||"";"/"==o.charAt(0)&&(o=s.default.protocol+"//"+s.default.host+o);n.state={isFocused:!1,
defaultValue:o,value:o};return n}t.prototype.componentDidMount=function(){var e=this;this.state.value||this.timers.setTimeout((function(){e.focus()}),0)};t.prototype.componentWillUnmount=function(){
this.state.isFocused&&!this.cancelChanges&&this.triggerSave_()};t.prototype.componentDidUpdate=function(e){var t=this;this.props.defaultValue!==e.defaultValue&&this.props.defaultValue&&this.setState({
defaultValue:this.props.defaultValue},(function(){t.timers.setTimeout((function(){var e;null===(e=t.input)||void 0===e||e.blur()}),0)}))};t.prototype.focus=function(){this.input&&this.input.focus()}
;t.prototype.handleClick=function(e){e.stopPropagation();e.preventDefault()};t.prototype.render=function(){var e=this,t=this.props.showDeleteButton?p.createElement(c.default,{
className:"hp-editor-selection-link-delete",onClick:this.onRemoveClick_},p.createElement(g.default,{name:"close"})):null,n=this.state.value?this.state.value:this.state.defaultValue
;return p.createElement("span",{onClick:this.handleClick,className:"hp-editor-selection-wrapper"},p.createElement("input",{className:"hp-editor-selection-link-url",ref:function(t){return e.input=t},
placeholder:v(y.linkPlaceholder),value:n,onChange:this.handleChange,onFocus:this.onFocus_,onBlur:this.onBlur_,onKeyDown:this.onKeyDown_}),t)};t.displayName="LinkEditor"
;return t=o.__decorate([d.default],t)}(p.PureComponent),C=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.linkEditor=null;t.state={enabled:t.props.enabled}
;t.onMouseDown_=function(){t.state.enabled&&t.props.editor.focus()};t.onClick_=function(){if(!t.props.anchorEl){t.setState({enabled:!t.state.enabled});(0,m.trackAce)("toolbar-click",{command:"link"})}
};t.onSave_=function(e,n){if(n){var o=t.props.anchorEl;o?t.udpateLink(e,o):t.context.omnibar.runCommandById("create_link_text",{createLinkUrl:[e]})}t.props.onSave&&t.props.onSave(null,null);(0,
m.trackAce)("createLinkDone")};t.onEscape_=function(){t.props.onEscape&&t.props.onEscape();t.timers.setTimeout(t.props.editor.focus.bind(t.props.editor),0)};t.onRemove_=function(){
var e,n=t.props.editor;t.props.anchorEl&&n.dom.getAceLineForNode(t.props.anchorEl)?n.execute("linkHover",(function(){var e=n.selection.getRangeForNode(t.props.anchorEl);n.selection.set(e)
;t.context.omnibar.runCommandById("remove_link_text")})):(null===(e=t.context.omnibar.getContext().links)||void 0===e?void 0:e.length)>=2&&t.context.omnibar.runCommandById("remove_link_text")
;t.props.onRemoved&&t.props.onRemoved();(0,m.trackAce)("linkRemoved")};return t}t.prototype.componentWillReceiveProps=function(e){this.setState({enabled:!!e.enabled})};t.prototype.enable=function(){
this.setState({enabled:!0})};t.prototype.disable=function(){this.setState({enabled:!1})};t.prototype.componentDidMount=function(){this.props.onChange&&this.props.onChange(this.state.enabled)}
;t.prototype.componentDidUpdate=function(){var e=this;if(this.state.enabled){this.timers.setTimeout((function(){!e.props.anchorEl&&e.linkEditor&&e.linkEditor.focus()}),0);(0,
m.trackAce)("createLinkStart")}this.props.onChange&&this.props.onChange(this.state.enabled)};t.prototype.udpateLink=function(e,t){var n=this,o=this.props.editor
;t&&o.dom.getAceLineForNode(t)&&o.execute("linkHover",(function(){var i=o.selection.getRangeForNode(t);o.selection.set(i);n.context.omnibar.runCommandById("create_link_text",{createLinkUrl:[e]})}))}
;t.prototype.render=function(){var e=this,t="";this.props.anchorEl?t=this.props.anchorEl.getAttribute("data-target-href"):this.props.defaultValue&&(t=this.props.defaultValue)
;var n=this.state.enabled?p.createElement(b,{ref:function(t){return e.linkEditor=t},defaultValue:t,showDeleteButton:!!this.props.anchorEl||!!this.props.defaultValue,onSave:this.onSave_,
onEscape:this.onEscape_,onRemove:this.onRemove_}):null;return p.createElement("span",{className:r({"hp-toolbar-link-enabled":this.state.enabled})},this.props.command&&p.createElement(h.default,{
command:this.props.command,onClick:this.onClick_,onMouseDown:this.onMouseDown_,inverse:!0}),n)};t.displayName="LinkEditorWithButton";t.contextTypes=i.pick(f.ReactAppContextTypes,["omnibar"])
;return t=o.__decorate([d.default],t)}(p.PureComponent);t.LinkEditorWithButton=C},1451:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(15),a=n(269),s=n(30),l=n(2),d=n(11),c=n(214),u=n(81),h=n(18),p=n(18),f=n(0),g=n(834),m=n(4),v=n(16),y=(0,n(5).PaperIntlFactory)().F,b=(0,l.defineMessages)({numUnread:{
id:"wwK17/",defaultMessage:"{num, plural, one {1 unread} other {# unread}}"}
}),C=parseInt(s.default.time_notifications_blue_box_fade,10)+parseInt(s.default.time_notifications_blue_box_pre_fade_delay,10),E=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.hasInitialized_=!1;n.hasMounted_=!1;n.hasSetEventHandlers_=!1;n.headerHeight_=0;n.updateNotifCount=function(){if(n.hasInitialized_){var e=null
;n.editor_.padController&&(e=n.editor_.padController.padUnreadNotificationsStore);if(e&&0!==e.getInDocUnreadThreadIds().length||n.editor_.notifications.hasAnyUnreadMentions()){
n.headerHeight_<=0&&(n.headerHeight_=(0,p.outerHeight)(document.getElementById("main-header")));for(var t=(0,h.getScrollTop)(window)+n.headerHeight_,o=(0,
h.getScrollTop)(window)+window.innerHeight,r=0,l=0,d=void 0,c=-1/0,u=void 0,f=1/0,g=i.clone(n.state.mentionsInView),m=n.editor_.dynamicCSS,v=Array.prototype.slice.call(document.querySelectorAll(".ace-line-has-unread-notifications, .comment-thread-unread")),y=function(e,v){
a.ensureLineIsNotCollapsedJustForMe(n.editor_,v);var y=(0,h.offset)(v);if(!y||0==y.top&&0==y.left)return"continue";var b=y.top,E=b+(0,p.outerHeight)(v),I=!1;if(E<t+10){r+=1;if(E>c){d=v;c=E}
}else if(b>o-10){l+=1;if(b<f){u=v;f=b}}else I=!0;if(v.classList.contains("ace-line-has-unread-notifications")){
var _=v.dataset.dashedUnreadNotificationIds,T=".ace-editor div.ace-line[data-dashed-unread-notification-ids='"+_+"'] span";if(_)if(I&&!i.has(g,_)){g[_]=+Date.now()
;m.selectorStyle(T).transition="background-color "+s.default.time_notifications_blue_box_fade+" ease-in "+s.default.time_notifications_blue_box_pre_fade_delay
;m.selectorStyle(T).backgroundColor="white";n.timers.setTimeout((function(){return n.markMentionAsRead_(_,T)}),C)}else if(!I&&i.has(g,_)){delete g[_];m.removeSelectorStyle(T)}}
},b=0,E=void 0;E=v[b];b++)y(0,E);var I={numAbove:r,nextAbove:d,numBelow:l,nextBelow:u};i.isEqual(g,n.state.mentionsInView)||(I.mentionsInView=g);n.setState(I)}else{var _={numAbove:0,nextAbove:void 0,
numBelow:0,nextBelow:void 0};i.isEmpty(n.state.mentionsInView)||(_.mentionsInView={});n.setState(_)}}};n.handlePadUnreadNotificationsChange=function(){n.timers.setTimeout(n.updateNotifCount,200)}
;n.scrollUp_=function(){n.state.nextAbove&&n.scrollTo_(n.state.nextAbove)};n.scrollDown_=function(){n.state.nextBelow&&n.scrollTo_(n.state.nextBelow)};n.markMentionAsRead_=function(e,t){
if(i.has(n.state.mentionsInView,e)&&!(Date.now()-n.state.mentionsInView[e]<C)){n.editor_.dynamicCSS.removeSelectorStyle(t);var o=null
;n.editor_.padController&&(o=n.editor_.padController.padUnreadNotificationsStore);if(o){var r=e.split("-");o.handleMentionLineClick(r)}}};n.state={numAbove:0,nextAbove:void 0,numBelow:0,
nextBelow:void 0,mentionsInView:{}};return n}t.prototype.initialize=function(e){this.editor_=e;this.hasInitialized_=!0;this.setEventHandlers_()};t.prototype.componentDidMount=function(){
this.updateNotifCount();this.hasMounted_=!0;this.setEventHandlers_()};t.prototype.componentWillUnmount=function(){var e,t,n
;this.editor_&&this.editor_.padController&&this.editor_.padController.padUnreadNotificationsStore&&this.editor_.padController.padUnreadNotificationsStore.off("pad-unread-notifications-change",this.handlePadUnreadNotificationsChange)
;null===(e=this.editor_)||void 0===e||e.observer.off("change-debounced",this.updateNotifCount);null===(t=this.editor_)||void 0===t||t.observer.off("invalidate-cache",this.updateNotifCount)
;null===(n=this.editor_)||void 0===n||n.observer.off("scroll-finished",this.updateNotifCount)};t.prototype.setEventHandlers_=function(){
if(this.hasInitialized_&&this.hasMounted_&&!this.hasSetEventHandlers_){this.hasSetEventHandlers_=!0;var e=null;this.editor_.padController&&(e=this.editor_.padController.padUnreadNotificationsStore)
;e&&e.on("pad-unread-notifications-change",this.handlePadUnreadNotificationsChange);this.editor_.observer.on("change-debounced",this.updateNotifCount)
;this.editor_.observer.on("invalidate-cache",this.updateNotifCount);this.editor_.observer.on("scroll-finished",this.updateNotifCount)}};t.prototype.scrollTo_=function(e){
if(e.classList.contains("comment-thread-unread")){var t=e.dataset.threadId;t&&this.editor_.commentsController.openCommentThreadAndFocus(t)}else this.editor_.selection.focusNode(e)
;this.updateNotifCount()};t.prototype.render=function(){var e,t;this.state.numAbove&&(e=f.createElement("div",{className:"notifications-pill hp-notifications-pill-top"},f.createElement(c.FilterChip,{
withIconLeft:f.createElement(v.UIIcon,{src:r.ArrowUpLine}),onClick:this.scrollUp_,className:"notifications-pill-dig"},f.createElement(I,{num:this.state.numAbove}))))
;this.state.numBelow&&(t=f.createElement("div",{className:"notifications-pill hp-notifications-pill-bottom"},f.createElement(c.FilterChip,{withIconLeft:f.createElement(v.UIIcon,{src:r.ArrowDownLine}),
onClick:this.scrollDown_,className:"notifications-pill-dig"},f.createElement(I,{num:this.state.numBelow}))));return f.createElement(m.TrackContext,{trackContext:m.EditorContext.NotificationsPill
},f.createElement(g,{transitionName:"hp-notification-pill-animation",transitionEnterTimeout:200,transitionLeaveTimeout:200},e,t))};t.displayName="NotifPills"
;return t=o.__decorate([d.default,u.nullifyProperties],t)}(f.PureComponent);t.default=E;var I=function(e){var t=e.num;return f.createElement(y,o.__assign({},b.numUnread,{values:{num:t}}))}},
1452:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(128),a=n(8),s=n(2),l=n(7),d=n(54),c=n(11),u=n(18),h=n(10),p=n(68),f=n(69),g=n(4),m=n(66),v=n(1453),y=n(147),b=n(1454),C=n(1457),E=n(1458),I=n(28),_=n(193),T=n(157),S=n(20),k=n(0),x=n(24),w=n(1459),P=n(31),A=n(13),O=n(41),L=n(61),N=n(17),M=n(5),R=n(369),D=(0,
M.PaperIntlFactory)(),F=D._f,z=D.F,U=30*O.Time.SECOND,H=(0,s.defineMessages)({existingEventTitleSuffix:{id:"KmjUWc",
defaultMessage:"+ {otherEventCount} other {otherEventCount, plural, one {event} other {events}}"},linkCalendarEvent:{id:"nWzjil",defaultMessage:"Link calendar event"},changeCalendarEvent:{id:"iLC5WM",
defaultMessage:"Change calendar event"},removePadType:{id:"oZxVR3",defaultMessage:"Remove pad type"},startWithTemplate:{id:"IdZyNL",defaultMessage:"Start with a template"},linkACalendarEvent:{
id:"/ywccN",defaultMessage:"+ Link a calendar event"},startWithATemplate:{id:"PJAQ5A",defaultMessage:"Start with a template"}}),B=function(e){o.__extends(t,e);function t(t){var s=e.call(this,t)||this
;s.progressiveDisclosureVariant=null;s.hasLogged=!1;s.initialize=function(e){s.setState({editor:e,hasTitle:e&&!e.isDisposed()&&!!e.contents.getTitle()},(function(){s.maybeShowPadTypeSelector()}))
;s.setupListeners(e)};s.deleteMeetingNote=function(e){s.addEventMenuButton&&s.addEventMenuButton.close();s.changeEventMenuButton&&s.changeEventMenuButton.close();var t=s.props.padController.getPadId()
;y.deleteMeetingNoteByPadId(e,t,(function(){s.updateExistingEventTitle((function(){g.IntentionEvent.UnlinkMeetingNote.track({calendarType:y.getCalendarType(e),
numExistingEvents:s.state.existingEvents.length+1,__padId:t})}))}))};s.maybeShowPadTypeSelector=function(){
var e=s.state,t=e.editor,n=e.existingEvents,o=e.hasTitle,i=s.wrapperEl&&s.wrapperEl.offsetParent;if(t&&t.getReps()&&!s.state.isCalendarDropdownOpen&&i){
var r=(n||[]).length>0,a=t.selection.getStart(),l=a&&0==a.line&&a.zone==S.Position.ROOT_ZONE,d=t.mouse.getLatestMouseMoveInfo(),c=window.scrollX,u=window.scrollY,h=t.getRep(S.Position.ROOT_ZONE).lines.atIndex(0).lineNode
;if(h){var p,f=h.getBoundingClientRect(),g=f.top+u,m=f.left+c,v=f.right+c,y=f.bottom+u,b=s.wrapperEl.offsetParent.getBoundingClientRect().top+u,C=s.wrapperEl.offsetHeight;if(d&&d.evt){
var E=v,I=d.evt,_=I.clientX,T=I.clientY;p=_>=m-75&&_<=E+75&&(T>=g-75&&T<=y&&T>=b)}
var k=o&&(l||p),x=s.props.forceShow||s.state.forceOpen||s.state.hasTitleMeetingNoteMatch||r||k,w=!!P.isOnButDoNotLog("spaces_paper_pifs_templates")&&(t.contents.hasEmptyContent()&&!o&&null!==s.props.padController)
;(x||w)&&(s.wrapperEl.style.top="".concat(g-b-C-8,"px"));x!==s.state.showSelector&&s.setState({showSelector:x});w!==s.state.showTemplates&&s.setState({showTemplates:w})}else s.setState({
showSelector:!1})}};s.setIsEditable=function(){var e=!1;s.props.padController&&s.props.padController.getEditableState&&s.props.padController.getEditableState()==d.EditableState.Editable&&(e=!0)
;s.state.isEditable!=e&&s.setState({isEditable:e})};s.handleChangeToMeetingNotesStore=function(){s.setState({isCalendarAuthorized:s.props.stores.meetingNotes.isAuthorized})}
;s.getCurrentTitle=function(){var e=s.state.editor;return e&&!e.isDisposed()&&e.contents.getTitle()||""};s.checkForTitle=function(){var e=s.state.hasTitle,t=s.getCurrentTitle();t&&!e?s.setState({
hasTitle:!0},s.maybeShowPadTypeSelector):!t&&e&&s.setState({hasTitle:!1},s.maybeShowPadTypeSelector)};s.checkForMeetingNoteMatch=function(){
var e=s.state,t=e.existingEvents,n=e.hasTitleMeetingNoteMatch,o=e.padType,i=s.getCurrentTitle(),r=v.hasDateMatch(i),l=v.getKeywordMatches(i,a.default.userLocale),d=l.length>0,c=r||d;if(c&&!n){(0,
g.trackUi)("pad-title-has-meeting-notes-matches",{padType:o,hasDateMatch:r,hasKeywordMatch:d,firstKeywordMatch:l[0]||void 0,numExistingEvents:t?t.length:void 0});s.setState({
hasTitleMeetingNoteMatch:!0},s.maybeShowPadTypeSelector)}else!c&&n&&s.setState({hasTitleMeetingNoteMatch:!1},s.maybeShowPadTypeSelector)};s.handleCalendarDropdownClick=function(){s.setState({
isCalendarDropdownOpen:!s.state.isCalendarDropdownOpen,forceShowDayPicker:!1,forceOpen:!1},(function(){
s.state.isCalendarDropdownOpen?g.IntentionEvent.OpenMeetingNoteSelector.track():g.IntentionEvent.CloseMeetingNoteSelector.track()}))};s.handleDayPickerIsLoadingChange=function(e,t){
var n=x.findDOMNode(e);n.style.minHeight=t?"".concat((0,u.height)(n),"px"):"0"};s.handleCalendarLinkedCalloutClose=function(){s.onboardingStore.markCompleted(C.TRACKING_NAME,i.noop,i.noop)
;s.setState({showCalendarLinkedCallout:!1})};s.showMeetingLinkedToast=function(e){var t=s.props.padController;t&&(0,w.showMeetingNoteLinkedToast)(e,t.invitedUserInfos,s.openSharingPanel)}
;s.openSharingPanel=function(e){var t=e.map((function(e){return e.email}));s.props.padController.openSharingPanel({shareTo:t})};s.showMeetingLinkedToastOrCallout=function(e){
if(n.hasSeenLinkCalendarEventCallout)s.showMeetingLinkedToast(e);else{s.onboardingStore=s.onboardingStore||new T.default;s.onboardingStore.getCompleted((function(t){if(-1!=t.indexOf(C.TRACKING_NAME)){
n.hasSeenLinkCalendarEventCallout=!0;s.showMeetingLinkedToast(e)}else s.setState({showCalendarLinkedCallout:!0})}))}};s.onCalendarEventCreate=function(e,t){
s.addEventMenuButton&&s.addEventMenuButton.close();s.changeEventMenuButton&&s.changeEventMenuButton.close();s.showMeetingLinkedToastOrCallout(e);s.updateExistingEventTitle((function(){
var t=s.state.existingEvents;g.IntentionEvent.LinkMeetingNote.track({calendarType:y.getCalendarType(e),eventDate:new Date(e.start_time).toISOString().slice(0,10),
isInFuture:new Date(e.start_time).getTime()>(new Date).getTime(),isRecurring:Boolean(e.recurring_event_id),numExistingEvents:t.length-1,__padId:s.props.padController&&s.props.padController.getPadId()
})}))};s.onLinkAnotherCalendarEvent=function(){s.setState({forceShowDayPicker:!0})};s.updateExistingEventTitle=function(e){
s.props.padController&&s.props.padController.getPadId()&&y.retrieveMeetingNotesByPadId(s.props.padController.getPadId(),(function(t){if(t&&t.nextEvents&&t.nextEvents[0]){
var n=t.nextEvents[0].title||"Untitled",o="";t.nextEvents.length>1&&(o=F(H.existingEventTitleSuffix,{otherEventCount:t.nextEvents.length-1}));s.setState({existingEvents:t.nextEvents,
existingEventTitle:n,existingEventTitleSuffix:o},e)}else s.setState({existingEvents:[],existingEventTitle:null,existingEventTitleSuffix:null},e)}))};s.renderSelector=function(){
if(!s.shouldRenderSelector)return null;if(s.state.existingEventTitle){var e=F(H.changeCalendarEvent),t=void 0;if(s.state.forceShowDayPicker){var n=(s.state.existingEvents||[]).map((function(e){
return y.getEventId(e)}));t=k.createElement(b.default,{disabledEventIds:n,onCalendarEventCreate:s.onCalendarEventCreate,onIsLoadingChange:function(e){
return s.handleDayPickerIsLoadingChange(s.changeEventMenu,e)},padController:s.props.padController,stores:s.props.stores})}else t=k.createElement(E.default,{existingEvents:s.state.existingEvents,
onLinkAnotherCalendarEvent:s.onLinkAnotherCalendarEvent,onRemove:s.deleteMeetingNote});return k.createElement(f.default,{className:"hp-change-calendar-event-menu-button",disableAutoCloseOnScroll:!0,
onClose:s.handleCalendarDropdownClick,onOpen:s.handleCalendarDropdownClick,ref:function(e){return s.changeEventMenuButton=e},"track-title":"Change calendar event"},k.createElement(h.default,{
"aria-label":e,className:r("hp-calendar-event-button",{"hp-calendar-event-button-open":s.state.isCalendarDropdownOpen}),tooltip:k.createElement(z,o.__assign({},H.changeCalendarEvent)),
"track-title":"Change calendar event"},k.createElement("span",{className:"calendar-event-button-text"},k.createElement("span",{className:"current-calendar-event-title notranslate"
},s.state.existingEventTitle),s.state.existingEventTitleSuffix&&k.createElement("span",{className:"current-calendar-event-title-suffix notranslate"
}," ",s.state.existingEventTitleSuffix)),k.createElement("span",{className:"calendar-event-button-caret"},k.createElement(A.default,{name:"caret"}))),k.createElement(p.default,{
className:"notranslate change-calendar-event-menu",noPadding:!0,ref:function(e){return s.changeEventMenu=e}},t))}e=F(H.linkCalendarEvent);return k.createElement(f.default,{
className:"hp-add-calendar-event-menu-button",disableAutoCloseOnScroll:!0,onClose:s.handleCalendarDropdownClick,onOpen:s.handleCalendarDropdownClick,ref:function(e){return s.addEventMenuButton=e},
"track-title":"Link calendar event"},k.createElement(h.default,{"aria-label":e,className:r("hp-calendar-event-button",{"hp-calendar-event-button-open":s.state.isCalendarDropdownOpen}),
"track-title":"Link calendar event"},k.createElement("span",{className:"calendar-event-button-text"},k.createElement(z,o.__assign({},H.linkACalendarEvent)))),k.createElement(p.default,{
className:"hp-add-calendar-event-menu notranslate",noPadding:!0,ref:function(e){return s.addEventMenu=e}},k.createElement(b.default,{onCalendarEventCreate:s.onCalendarEventCreate,
onIsLoadingChange:function(e){return s.handleDayPickerIsLoadingChange(s.addEventMenu,e)},padController:s.props.padController,stores:s.props.stores})))};s.renderCalendarLinkedCallout=function(){
if(s.onboardingStore&&s.state.showCalendarLinkedCallout)return k.createElement(C.default,{onClose:s.handleCalendarLinkedCalloutClose})};s.renderTemplateSelector=function(){
if(!s.state.showTemplates)return null;var e=k.createElement("span",{className:"hp-calendar-event-button calendar-event-button-text"},k.createElement(z,o.__assign({},H.startWithATemplate)))
;return k.createElement(g.TrackContext,{trackContext:g.EditorContext.EditorTemplateMenu},k.createElement(R.TemplateMenuButton,{buttonComponent:e,templateListStore:s.props.stores.templateList,
padPreviewStore:s.props.padController.padPreviewStore,className:"hp-indoc-template-menu",editor:s.state.editor}))};s.state={isCalendarDropdownOpen:!1,isEditable:!1,isCalendarAuthorized:!1,
forceShowDayPicker:!1,hasTitle:!1,hasTitleMeetingNoteMatch:!1,padType:t.padController&&t.padController.getPadType(),showSelector:Boolean(t.forceShow),showCalendarLinkedCallout:!1,forceOpen:!1,
showTemplates:!1};return s}n=t;t.prototype.setupListeners=function(e){var t=this;this.events.on(e.observer,"caret",this.maybeShowPadTypeSelector)
;this.events.on(e.dom.getRoot(),"mousemove",i.throttle(this.maybeShowPadTypeSelector,250));this.events.on(this.props.padController,l.DocEvents.TitleChanged,this.checkForTitle)
;this.events.on(this.props.padController,l.DocEvents.TitleChanged,this.checkForMeetingNoteMatch)
;this.events.on(this.props.padController,"document-changed",i.throttle(this.maybeShowPadTypeSelector,100));var n=this.props.stores.meetingNotes;n.on("change",this.handleChangeToMeetingNotesStore)
;!n.isAuthorized&&(0,m.isApollo)()&&n.checkAuthorization();var o=null;this.events.on(window,"resize",(function(){!o&&t.timers&&(o=t.timers.requestAnimationFrame((function(){o=null
;t.maybeShowPadTypeSelector()})))}));if(L.default.visibilityChange){var r=i.throttle(this.updateExistingEventTitle,U,{trailing:!1});this.events.on(document,L.default.visibilityChange,(function(){
document[L.default.hidden]||r()}))}};t.prototype.componentDidMount=function(){N.default.consumeQueryParam("openLinkEvent")&&this.setState({forceOpen:!0});this.setIsEditable()
;this.updateExistingEventTitle();this.handleChangeToMeetingNotesStore()};t.prototype.componentWillUnmount=function(){
this.props.stores&&this.props.stores.meetingNotes&&this.props.stores.meetingNotes.off("change",this.handleChangeToMeetingNotesStore)};t.prototype.componentWillReceiveProps=function(e){
e.forceOpen&&this.setState({forceOpen:!0})};t.prototype.componentDidUpdate=function(){this.setIsEditable();this.maybeShowPadTypeSelector();if(this.state.forceOpen&&!this.state.isCalendarDropdownOpen){
this.addEventMenuButton&&this.addEventMenuButton.open();this.changeEventMenuButton&&this.changeEventMenuButton.open()}};Object.defineProperty(t.prototype,"shouldRenderSelector",{get:function(){
return this.state.showSelector&&(!(0,
m.isApollo)()||this.state.isCalendarAuthorized)&&!I.isNativeMobileApp()&&this.props.stores&&this.state.isEditable&&-1==_.NOT_PAPER_DOC_PADTYPES.indexOf(this.state.padType)},enumerable:!1,
configurable:!0});t.prototype.render=function(){var e=this,t=r("hp-pad-type-selector-bar",{"hp-toolbar-animation-enable":Boolean(this.state.showSelector||this.state.showTemplates)})
;return k.createElement("div",{className:"hp-pad-type-selector-bar-wrapper",ref:function(t){return e.wrapperEl=t}},k.createElement("div",{className:t
},this.renderCalendarLinkedCallout(),this.renderSelector(),this.renderTemplateSelector()))};var n;t.displayName="PadTypeSelector";t.hasSeenLinkCalendarEventCallout=!1
;return t=n=o.__decorate([c.default],t)}(k.Component);t.default=B},1453:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.hasDateMatch=t.getKeywordMatches=t.TRIGGER_KEYWORDS_LIST=t.TRIGGER_KEYWORDS=void 0;var o=n(14),i=n(142),r=(0,
o.MsgFactory)("meeting_note_panel"),a=r.defineMessages,s=r._f,l='This translation is not shown to the user. We search titles of docs and suggest to the user that they link their calendar if found. Example: We will suggest to the user that they link calendar if the title is "Weekly Sync" but not "Design Review" since the latter does not have any meeting notes trigger words like "weekly" or "sync".'
;t.TRIGGER_KEYWORDS=a({"1on1-1":{description:"A meeting between two people. "+l,msg:"1on1",id:"meeting_note_panel.meeting_note_detection.1on1-1"},"1on1-2":{
description:"A meeting between two people. "+l,msg:"1-on-1",id:"meeting_note_panel.meeting_note_detection.1on1-2"},"1on1-3":{description:"A meeting between two people. "+l,msg:"1:1",
id:"meeting_note_panel.meeting_note_detection.1on1-3"},"1on1-4":{description:"A meeting between two people. "+l,msg:"1 on 1",id:"meeting_note_panel.meeting_note_detection.1on1-4"},agenda:{
description:l,msg:"agenda"},brainstorm:{description:l,msg:"brainstorm"},kickoff:{description:"An initial meeting to start a project, initiative, etc. "+l,msg:"kickoff"},meeting:{description:l,
msg:"meeting"},minute:{description:l,msg:"minute"},monthly:{description:l,msg:"monthly"},mtg:{description:'Abbreviation for "meeting". '+l,msg:"mtg"},notes:{description:l,msg:"notes"},recurring:{
description:l,msg:"recurring"},retro:{description:l,msg:"retro"},statusUpdate:{description:l,msg:"status update"},sync:{description:l,msg:"sync"},weekly:{description:l,msg:"weekly"}})
;t.TRIGGER_KEYWORDS_LIST=Object.keys(t.TRIGGER_KEYWORDS);t.getKeywordMatches=function(e,n){var o=e.toLocaleLowerCase();return t.TRIGGER_KEYWORDS_LIST.filter((function(e){
var n=s(t.TRIGGER_KEYWORDS[e]).toLocaleLowerCase();return-1!=o.indexOf(n)}))};t.hasDateMatch=function(e){return(0,i.parseDates)(e).length>0}},1454:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(835),r=n(11),a=n(147),s=n(1455),l=n(0),d=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.state={isAuthorized:!1,isLoading:!0,selectedDate:new Date};t.handleMeetingNotesStoreChange=function(){t.setState({isAuthorized:t.props.stores.meetingNotes.isAuthorized,isLoading:!1},(function(){
t.props.onIsLoadingChange&&t.props.onIsLoadingChange(!1);t.maybeShowNewMeetingNoteButton()}))};t.maybeShowNewMeetingNoteButton=function(){
var e=document.querySelector(".create-new-meeting-note-button");e&&(t.state.isAuthorized?e.classList.add("hidden"):e.classList.remove("hidden"))};t.updateMeetingNotesStore=function(e,n){
t.props.stores.meetingNotes.update({num:25,timeMin:e.toISOString(),timeMax:n.toISOString()})};t.renderMeetingNotePanel=function(){return t.state.isLoading?l.createElement("div",{
className:"awesome-spinner"}):l.createElement(s.default,{disabledEventIds:t.props.disabledEventIds,includeSubtitleGuestCount:!0,includeSubtitleTime:!0,maxEvents:25,stores:t.props.stores,
onCalendarEventCreate:t.props.onCalendarEventCreate,padId:t.props.padController.getPadId(),preventRedirectToExistingMeetingNote:!0,skipMeetingNotesStoreUpdateOnMount:!0})}
;t.handleDateChanged=function(e){if(t.props.stores&&t.props.stores.meetingNotes){var n=a.getBeginningOfDay(e),o=a.getEndOfDay(e);t.props.onIsLoadingChange&&t.props.onIsLoadingChange(!0);t.setState({
isLoading:!0});t.updateMeetingNotesStore(n,o)}t.setState({selectedDate:e})};return t}t.prototype.componentDidMount=function(){
var e=a.getBeginningOfDay(this.state.selectedDate),t=a.getEndOfDay(this.state.selectedDate);this.props.stores.meetingNotes.on("change",this.handleMeetingNotesStoreChange)
;this.updateMeetingNotesStore(e,t)};t.prototype.componentDidUpdate=function(){this.maybeShowNewMeetingNoteButton()};t.prototype.componentWillUnmount=function(){
this.props.stores.meetingNotes.off("change",this.handleMeetingNotesStoreChange)};t.prototype.render=function(){return this.state.isAuthorized?l.createElement(i.default,{
selectedDate:this.state.selectedDate,onDateChanged:this.handleDateChanged},this.renderMeetingNotePanel()):l.createElement("div",{className:"calendar-picker"},this.renderMeetingNotePanel())}
;t.displayName="MeetingNoteDayPicker";return t=o.__decorate([r.default],t)}(l.Component);t.default=d},1455:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(3),r=n(428),a=n(299),s=n(2),l=n(142),d=n(11),c=n(599),u=n(836),h=n(10),p=n(68),f=n(69),g=n(147),m=n(1456),v=n(0),y=n(13),b=n(41),C=(0,n(5).PaperIntlFactory)(),E=C.F,I=C._f,_=(0,
s.defineMessages)({chooseAnotherDate:{id:"PFk4QH",defaultMessage:"Choose another date"},selecteddatedatemedium:{id:"WjK+4J",defaultMessage:"{selectedDate, date, medium}"},today:{id:"JDRaFD",
defaultMessage:"Today"},tomorrow:{id:"GUi/Lf",defaultMessage:"Tomorrow"},noevents:{id:"4zm6c3",defaultMessage:"No events"}}),T=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.handleChangeToMeetingNotesStore=function(){n.setState({availableEvents:n.props.stores.meetingNotes.availableEvents(n.props.stores.padList),authChecked:n.props.stores.meetingNotes.authChecked,
isAuthorized:n.props.stores.meetingNotes.isAuthorized,isLoading:!1},(function(){n.props.reportImpressionMetrics&&n.props.reportImpressionMetrics({numMeetings:n.state.availableEvents.length,
meetingsAuthorized:n.state.isAuthorized})}))};n.createMeetingNoteAuthHandler=function(e,t){return function(o){o.preventDefault()
;if(!(t=n.props.preventRedirectToExistingMeetingNote||t)&&e&&e.primary_paper_doc_id)return g.redirectToPrimaryDocId(e,App);n.props.padId?g.createMeetingNoteAssociation({event:e,padId:n.props.padId
},(function(t){n.props.onCalendarEventCreate&&n.props.onCalendarEventCreate(e,t)})):g.createMeetingNote({event:e,app:App,onFetchRequestStarted:function(){return n.setState({isLoading:!0})},
onFetchRequestCompleted:function(){return n.setState({isLoading:!1})}})}};n.authorizeCalendarCallback=function(){n.setState({isAuthorized:!0,isLoading:!0},(function(){n.updateMeetingNotesStore()}))}
;n.handleTodayClick=function(){var e=g.getBeginningOfDay(new Date);return n.setSelectedDate(e)};n.handleTomorrowClick=function(){var e=g.getBeginningOfDay(new Date((new Date).getTime()+b.Time.DAY))
;return n.setSelectedDate(e)};n.handleDayClick=function(e){e&&n.setSelectedDate(g.getBeginningOfDay(e));n.dayPickerMenu.close()};n.isDaySelected=function(e){
return l.toDateString(n.state.selectedDate)==l.toDateString(e)};n.state={availableEvents:n.props.stores.meetingNotes.availableEvents(n.props.stores.padList),authChecked:!1,isAuthorized:!1,
isLoading:!1,selectedDate:g.getBeginningOfDay(new Date)};return n}t.prototype.componentDidMount=function(){this.props.stores.meetingNotes.on("change",this.handleChangeToMeetingNotesStore)
;if(this.props.skipMeetingNotesStoreUpdateOnMount)this.handleChangeToMeetingNotesStore();else{this.setState({isLoading:!0});this.updateMeetingNotesStore()}}
;t.prototype.componentDidUpdate=function(e,t){t.selectedDate!=this.state.selectedDate&&this.resetEventListScroll()};t.prototype.componentWillUnmount=function(){
this.props.stores.meetingNotes.off("change",this.handleChangeToMeetingNotesStore)};t.prototype.updateMeetingNotesStore=function(){
var e=g.getBeginningOfDay(this.state.selectedDate),t=g.getEndOfDay(this.state.selectedDate);this.props.stores.meetingNotes.update({timeMin:e.toISOString(),timeMax:t.toISOString(),num:25})}
;t.prototype.resetEventListScroll=function(){this.eventListElement&&(this.eventListElement.scrollTop=0)};t.prototype.setSelectedDate=function(e){var t=this;this.setState({isLoading:!0,selectedDate:e
},(function(){t.updateMeetingNotesStore()}))};t.prototype.renderDailyEventsWithLinkedDocsHeader=function(){
var e,t,n=this,s=this.state.selectedDate,l=g.getBeginningOfDay(new Date),d=g.getBeginningOfDay(new Date(l.getTime()+b.Time.DAY))
;t="customDate"==(e=s.getTime()==l.getTime()?"today":s.getTime()==d.getTime()?"tomorrow":"customDate")?v.createElement("span",{className:"meeting-note-panel-header-date-string"
},v.createElement(E,o.__assign({values:{selectedDate:s}},_.selecteddatedatemedium)),v.createElement(h.default,{linky:!0,onClick:this.handleTodayClick,
className:"meeting-note-panel-header-date-string-close-button","track-title":"Remove date string in meeting notes header"},v.createElement(y.default,{name:"close"
}))):v.createElement("span",null,v.createElement(h.default,{linky:!0,onClick:this.handleTodayClick,className:i("meeting-note-panel-header-button",{"meeting-note-panel-header-button__active":"today"==e
}),"track-title":"Select meeting notes date","track-index":e},v.createElement(E,o.__assign({},_.today))),v.createElement(h.default,{linky:!0,onClick:this.handleTomorrowClick,
className:i("meeting-note-panel-header-button",{"meeting-note-panel-header-button__active":"tomorrow"==e}),"track-title":"Select meeting notes date","track-index":e
},v.createElement(E,o.__assign({},_.tomorrow))));var c=I(_.chooseAnotherDate);return v.createElement("div",{className:"meeting-note-panel-header"},t,v.createElement(f.default,{
className:"meeting-note-panel-header-calendar-picker-button",ref:function(e){return n.dayPickerMenu=e}},v.createElement(h.default,{linky:!0,hasPopup:!0,
className:"meeting-note-panel-header-calendar-picker-button-wrapper",tooltip:v.createElement(E,o.__assign({},_.chooseAnotherDate)),"aria-label":c,"track-title":"Select meeting notes date",
"track-index":e},v.createElement(y.default,{name:"meeting-note-calendar"})),v.createElement(p.default,{className:"notranslate",noPadding:!0},v.createElement(r,o.__assign({enableOutsideDays:!0,
onDayClick:this.handleDayClick,selectedDays:this.isDaySelected},a.default)))))};t.prototype.renderDailyEventsWithLinkedDocs=function(){
var e,t=this,n=!!this.props.padId,r=(this.state.availableEvents||[]).map((function(e,o){if(n){var i=t.state.isLoading
;t.props.disabledEventIds&&(i=i||-1!=t.props.disabledEventIds.indexOf(g.getEventId(e)));return v.createElement(c.EventMeetingNotePanelEntry,{disabled:i,event:e,
includeSubtitleDate:t.props.includeSubtitleDate,includeSubtitleGuestCount:t.props.includeSubtitleGuestCount,includeSubtitleTime:t.props.includeSubtitleTime,key:o,
onClick:t.createMeetingNoteAuthHandler(e)})}return v.createElement(u.EventMeetingNotePanelEntryWithAttachments,{includeSubtitleGuestCount:!0,
onCreateMeetingNoteClick:t.createMeetingNoteAuthHandler(e,!0),event:e,key:o})}));e=0==r.length?v.createElement("div",{className:"meeting-note-panel-empty"
},v.createElement(E,o.__assign({},_.noevents))):v.createElement("div",{className:"meeting-note-panel-entries",ref:function(e){return t.eventListElement=e}},this.state.isLoading?v.createElement("div",{
className:"awesome-spinner"}):r);return v.createElement("div",{className:i("meeting-note-panel","meeting-note-panel-with-attachments")
},n?null:this.renderDailyEventsWithLinkedDocsHeader(),this.state.isLoading?v.createElement("div",{className:"awesome-spinner"}):e)};t.prototype.render=function(){
return this.state.isAuthorized?this.renderDailyEventsWithLinkedDocs():v.createElement(m.default,{waitingForAuthCheck:!this.state.authChecked,authorizeCalendarCallback:this.authorizeCalendarCallback,
inDoc:!!this.props.padId})};t.displayName="MeetingNotePanel";return t=o.__decorate([d.default],t)}(v.Component);t.default=T},1456:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(7),r=n(3),a=n(8),s=n(2),l=n(10),d=n(73),c=n(147),u=n(600),h=n(23),p=n(0),f=n(13),g=n(4),m=(0,n(5).PaperIntlFactory)().F,v="meeting-notes-promotion",y=(0,s.defineMessages)({adHeader:{
id:"oXPmIb",defaultMessage:"Instant meeting notes!"},adBody:{id:"2Eenqg",defaultMessage:"See what’s next on your calendar and get templates with event info added."},connectGoogle:{id:"o/GLk0",
defaultMessage:"Connect Google"},connectOffice:{id:"4gFJMr",defaultMessage:"Connect Office 365"},connectyourcalendar:{id:"n30PqH",defaultMessage:"Connect your calendar"},createmeetingnotes:{
id:"gSrDuk",defaultMessage:"Create meeting notes"}}),b=(0,s.defineMessages)({adHeader:{id:"depm31",defaultMessage:"Jumpstart your meetings"},adBody:{id:"9f0ycA",
defaultMessage:"Quickly find and create meeting notes from your daily schedule right here."}}),C=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.showExtraLinkCalendarButtons=function(){n.setState({extraLinkCalendarButtonsVisible:!0})};n.dismissMeetingNotesPromotion=function(){n.setState({dismissedMeetingNotePromotion:!0})
;n.context.stores.onboarding.markCompleted(v,(function(){}),(function(){}));n.props.onDismiss&&n.props.onDismiss()};n.state={dismissedMeetingNotePromotion:!0,extraLinkCalendarButtonsVisible:!1}
;return n}t.prototype.componentDidMount=function(){var e=this;this.context.stores.onboarding.checkCompleted(v,(function(t){e.setState({dismissedMeetingNotePromotion:t})}))}
;t.prototype.showFullAd=function(){return!!this.props.inDoc||(!!this.props.inHome||!this.state.dismissedMeetingNotePromotion&&a.default.accountAge>=7&&!this.props.waitingForAuthCheck)}
;t.prototype.renderLinkCalendarButtons=function(e){var t=this,n=this.getTrackContext();return p.createElement("div",null,p.createElement(E,{onClick:function(){
return c.authorizeCalendar(i.CalendarType.GoogleCalendar,n,t.props.authorizeCalendarCallback)},iconName:e?null:"g-logo",translatedMessage:p.createElement(m,o.__assign({},y.connectGoogle)),
trackTitle:"Connect with Google meeting notes",small:e}),p.createElement(E,{onClick:function(){return c.authorizeCalendar(i.CalendarType.Office365Calendar,n,t.props.authorizeCalendarCallback)},
iconName:e?null:"office-logo",translatedMessage:p.createElement(m,o.__assign({},y.connectOffice)),trackTitle:"Connect with O365 meeting notes",small:e}))};t.prototype.renderFullAd=function(){
var e,t=this.props,n=t.inDoc,i=t.inHome,a=n||i?b:y,s=p.createElement(m,o.__assign({},a.adHeader)),c=p.createElement(m,o.__assign({},a.adBody));n&&!i||(e=p.createElement("div",{
className:"meeting-note-promotion-title"},p.createElement("div",{className:"meeting-note-promotion-close"},p.createElement(l.default,{onClick:this.dismissMeetingNotesPromotion
},p.createElement(f.default,{name:"close"})))));var u=p.createElement("div",{className:"meeting-note-promotion-illustration-wrapper"},p.createElement(d.InvertibleImage,{
className:"meeting-note-promotion-illustration",src:"/static/img/composer/meeting-notes/calendar-connect-illustration.png"})),h=!n&&!i;return p.createElement("div",{
className:r("meeting-note-promotion",{"meeting-note-promotion meeting-note-promotion__in-home":i,"meeting-note-promotion__in-sidepanel":!n&&!i})},e,u,p.createElement("div",{
className:"meeting-note-promotion-details"},p.createElement("div",{className:"meeting-note-promotion-header"},s),p.createElement("div",{className:"meeting-note-promotion-message"
},c),p.createElement("div",{className:"meeting-note-promotion-link-calendar-buttons"},this.renderLinkCalendarButtons(h))))};t.prototype.renderSidePanelActionAd=function(){
return p.createElement("div",{className:"meeting-note-panel"},p.createElement(u.MeetingNotePanelEntry,{className:"create-new-meeting-note-button",trackTitle:"Connect with calendar meeting notes",
icon:"action-meeting-note",onClick:this.showExtraLinkCalendarButtons,title:p.createElement(m,o.__assign({},y.createmeetingnotes)),
subtitle:this.props.waitingForAuthCheck?"":p.createElement(m,o.__assign({},y.connectyourcalendar)),disabled:this.props.waitingForAuthCheck
}),this.state.extraLinkCalendarButtonsVisible?this.renderLinkCalendarButtons():null)};t.prototype.render=function(){
return this.showFullAd()?this.props.inHome&&this.state.dismissedMeetingNotePromotion?null:this.renderFullAd():this.renderSidePanelActionAd()};t.displayName="MeetingNoteAd";t.contextTypes={
stores:h.object.isRequired};return t=o.__decorate([g.trackContextDecorator],t)}(p.Component);t.default=C;var E=function(e){return p.createElement(l.default,{secondary:!e.small,linky:e.small,active:!0,
className:r("meeting-note-promotion-button",e.className,{"meeting-note-promotion-button__small":e.small}),"track-title":e.trackTitle,onClick:e.onClick},e.iconName?p.createElement(f.default,{
name:e.iconName}):null,e.translatedMessage)};E.displayName="MeetingNoteAdButton"},1457:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.TRACKING_NAME=void 0
;var o=n(1),i=n(65),r=n(2),a=n(11),s=n(0),l=n(4),d=(0,n(5).PaperIntlFactory)().F,c=(0,r.defineMessages)({sharetokeepeveryoneinsync:{id:"mM7fM0",defaultMessage:"Share to keep everyone in sync"},
givemeetingattendeesaccesstothisdocfromtheircalendarsonPaperHome:{id:"ZqscLP",defaultMessage:"Give meeting attendees access to this doc from their calendars on Paper Home."}})
;t.TRACKING_NAME="first-calendar-event-link";var u=function(e){o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.componentDidMount=function(){
var e=this.props.onClose;this.events.on(l.events,"people-panel-opened",(function(){e()}))};t.prototype.render=function(){var e=this.props.onClose;return s.createElement(i.default,{
attachment:"top right",className:"calendar-linked-callout",closeButton:!0,onboarding:!0,onClose:e,overlay:!1,target:".hp-sharing-button",targetAttachment:"bottom center"
},s.createElement("h1",null,s.createElement(d,o.__assign({},c.sharetokeepeveryoneinsync))),s.createElement("p",null,s.createElement(d,o.__assign({},c.givemeetingattendeesaccesstothisdocfromtheircalendarsonPaperHome))))
};t.displayName="MeetingNoteLinkedCallout";return t=o.__decorate([a.default],t)}(s.Component);t.default=u},1458:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(2),r=n(599),a=n(10),s=n(0),l=(0,n(5).PaperIntlFactory)().F,d=(0,i.defineMessages)({linkanothercalendarevent:{id:"wyjhfB",defaultMessage:"+ Link another calendar event"}
}),c=function(e){var t=e.existingEvents.map((function(t){return s.createElement(r.EventMeetingNotePanelEntry,{event:t,includeSubtitleDate:!0,includeSubtitleGuestCount:!0,
key:t.calendar_event_key.event_id,onRemove:function(){return e.onRemove(t)}})}));return s.createElement("div",{className:"meeting-note-list-picker"},s.createElement(a.default,{
className:"hp-link-another-calendar-event-button",onClick:e.onLinkAnotherCalendarEvent,"track-title":"Link another calendar event"},s.createElement("span",{
className:"link-another-calendar-event-button-text"},s.createElement(l,o.__assign({},d.linkanothercalendarevent)))),s.createElement("hr",null),s.createElement("div",{
className:"meeting-note-panel-entries-wrapper"},t))};c.displayName="MeetingNoteListPicker";t.default=c},1459:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.showMeetingNoteLinkedToast=void 0;var o=n(1),i=n(6),r=n(8),a=n(2),s=n(10),l=n(0),d=n(48),c=(0,n(5).PaperIntlFactory)(),u=c.F,h=c._f,p=(0,a.defineMessages)({calendarEventLinkedNotShared:{
id:"TNvKYD",defaultMessage:"Event linked. Share this doc with attendees to give quick access."},calendarEventLinkedNoAttendees:{id:"NqE49c",defaultMessage:"Event linked."},
calendarEventLinkedOneAttendee:{id:"U/fLPv",defaultMessage:"Event linked. Share this doc with {attendeeOne} to give quick access."},calendarEventLinkedTwoAttendees:{id:"H9IorV",
defaultMessage:"Event linked. Share this doc with {attendeeOne} and {attendeeTwo} to give quick access."},calendarEventLinkedManyAttendees:{id:"gJmI0D",
defaultMessage:"Event linked. Share this doc with {attendeeOne} and {numOtherAttendees} {numOtherAttendees, plural, one {other} other {others}} to give quick access."},invite:{id:"sTZgnw",
defaultMessage:"Invite"}});function f(e){return e.dropbox_contact.name.display||e.email}t.showMeetingNoteLinkedToast=function(e,t,n){var a,c,g,m=e.attendees.filter((function(e){
return e.email!=r.default.userEmail&&!e.is_resource})),v=t.filter((function(e){return e.email!=r.default.userEmail})),y=i.keyBy(v,"email"),b=m.filter((function(e){return!y[e.email]}));if(b.length){
a=!0;if(v.length)switch(b.length){case 1:c=h(p.calendarEventLinkedOneAttendee,{attendeeOne:f(b[0])});break;case 2:c=h(p.calendarEventLinkedTwoAttendees,{attendeeOne:f(b[0]),attendeeTwo:f(b[1])});break
;default:c=h(p.calendarEventLinkedManyAttendees,{attendeeOne:f(b[0]),attendeeTwo:f(b[1]),numOtherAttendees:b.length-2})}else c=h(p.calendarEventLinkedNotShared)}else{a=!1
;c=h(p.calendarEventLinkedNoAttendees)}a&&(g=l.createElement(s.default,{secondary:!0,onClick:function(){return n(b)}},l.createElement(u,o.__assign({},p.invite))));return d.default.showInfoToast({
message:c,button:g,alignLeft:!!g,autoDismiss:!0,wide:!1,autoDismissDelayMs:7e3,className:"notranslate"})}},1460:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.SortOptionPicker=t.SortHeader=void 0;var o=n(1),i=n(3),r=n(10),a=n(68),s=n(69),l=n(103),d=n(170),c=n(4),u=n(0),h=n(13),p=n(7);t.SortHeader=function(e){
var t=e.headerTitle,n=e.sortOptions,o=e.onSortSelection,r=e.currentSortSelected;return u.createElement("div",{className:"sort-header"},u.createElement("div",{
className:i("sort-header__title","notranslate")},t),u.createElement("div",{className:"sort-header__sort-option-picker"},u.createElement(f,{onSortSelection:o,sortOptions:n,currentSortSelected:r})))}
;var f=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.handleSortMenuClose=function(){c.IntentionEvent.CloseTemplateSelectorFilter.track({
context:t.getTrackContext()})};t.handleSortMenuOpen=function(){c.IntentionEvent.OpenTemplateSelectorFilter.track({context:t.getTrackContext()})};t.handleSortSelection=function(e){t.sortMenu.close()
;t.props.onSortSelection(e);c.IntentionEvent.TemplateSelectorFilterClick.track({context:t.getTrackContext(),sortBy:e,filter:p.TemplateListFilter[e]})};return t}t.prototype.getTrackContext=function(){}
;t.prototype.render=function(){var e=this,t=this.props.sortOptions.map((function(t){return u.createElement(g,{key:t.key,sortOption:t,isCurrentSortSelected:e.props.currentSortSelected.key==t.key,
onSortSelection:e.handleSortSelection})}));return u.createElement(s.default,{ref:function(t){return e.sortMenu=t},onClose:this.handleSortMenuClose,onOpen:this.handleSortMenuOpen,
disableAutoCloseOnScroll:!0},u.createElement(r.default,{linky:!0,hasPopup:!0,"track-title":"Open Template Menu Filter",className:"sort-header__sort-option-picker__button"},u.createElement("div",{
className:"sort-header__sort-option-picker__button-contents"},u.createElement("div",{className:i("sort-header__sort-option-picker__button-text","notranslate")
},this.props.currentSortSelected.displayName),u.createElement("div",null,u.createElement(h.default,{name:"caret"})))),u.createElement(a.default,null,u.createElement("ul",null,t)))}
;t.displayName="SortOptionPicker";return t=o.__decorate([c.trackContextDecorator],t)}(u.Component);t.SortOptionPicker=f;var g=function(e){o.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.handleSortSelection=function(e){t.props.onSortSelection(t.props.sortOption.key)};return t}t.prototype.render=function(){
var e=this.props,t=e.sortOption,n=e.isCurrentSortSelected;return t.displayName||t.key?u.createElement(l.HpMenuItem,null,u.createElement(r.default,{onClick:this.handleSortSelection,
className:i("notranslate",{"hp-menu-selected":n}),"track-title":"Template Menu Filter by [".concat(this.props.sortOption.displayName,"]")
},this.props.sortOption.displayName)):u.createElement(d.HpMenuSeparator,null)};t.displayName="SortHeaderSortOptionElement";return t}(u.Component)},1461:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(3),r=n(2),a=n(10),s=n(0),l=n(159),d=n(4),c=(0,n(5).PaperIntlFactory)().F,u=(0,r.defineMessages)({createnewtemplate:{id:"+O5NBF",
defaultMessage:"Create new template"}}),h=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.onCreateTemplateSuccess=function(e){e.padId&&App.navigateToPad({
id:e.padId,suffix:"?newTemplate=1"})};t.handleCreateBlankTemplateClick=function(e){l.createTemplate({successHandler:t.onCreateTemplateSuccess,trackContext:t.getTrackContext()})};return t}
t.prototype.getTrackContext=function(){};t.prototype.render=function(){return s.createElement("div",{className:"template-menu-footer"},s.createElement(a.default,{
onClick:this.handleCreateBlankTemplateClick,className:"template-menu-footer-button"},s.createElement("div",{className:"template-menu-footer-button-contents"},s.createElement("div",{
className:i("open-with-panel-entry-title","create-new-template-button-text")},s.createElement(c,o.__assign({},u.createnewtemplate))))))};t.displayName="TemplateMenuFooter"
;return t=o.__decorate([d.trackContextDecorator],t)}(s.Component);t.default=h},1462:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(30),r=n(7),a=n(0),s=n(24),l=n(838),d=n(1463),c=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.templateListElements={};n.didForceUpdate=!1;n.numTilesInRow=3
;n.extraOffsetPerTile=parseInt(i.default.doc_tile_width,10)+2*parseInt(i.default.doc_tile_margin,10)+2;n.marginSpace=2*parseInt(i.default.doc_tile_margin,10);n.baseOffset=n.marginSpace+2
;n.calcOffset=function(e){return-this.baseOffset+(e%this.numTilesInRow-(this.numTilesInRow-1))*this.extraOffsetPerTile};n.attachment="right";if(!n.props.inDoc){n.baseOffset=n.marginSpace
;n.calcOffset=function(e){return this.baseOffset+e%this.numTilesInRow*this.extraOffsetPerTile};n.attachment="left"}return n}t.prototype.componentDidUpdate=function(){
if(this.didForceUpdate)this.didForceUpdate=!1;else{this.didForceUpdate=!0;this.forceUpdate()}};t.prototype.render=function(){var e=this,t=[],n=this.props.templates.map((function(n,o){
if(n.templateType==r.TemplateType.custom&&!n.isTrashed){var i="0 ".concat(e.calcOffset(o),"px");t.push(a.createElement(l.SmartDocPreviewCallout,{attachment:e.attachment,
key:"preview-".concat(n.templateId),localPadId:n.templateId,offset:i,previewLoader:e.props.previewLoader,target:e.templateListElements[n.templateId]}))}
return a.createElement(d.TemplateMenuTemplateListElement,{isArchived:e.props.isArchived,isTrashed:e.props.isTrashed,key:"tile-".concat(n.templateId),onTemplateSelection:e.props.onTemplateSelection,
onTemplateEdit:e.props.onTemplateEdit,onTemplateRestore:e.props.onTemplateRestore,onTemplateUntrash:e.props.onTemplateUntrash,ref:function(t){
return e.templateListElements[n.templateId]=s.findDOMNode(t)},template:n})}));return a.createElement("div",{className:"template-menu__template-list"},n,t)};t.displayName="TemplateMenuList";return t
}(a.Component);t.default=c},1463:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.TemplateMenuTileActionButton=t.TemplateMenuTemplateListElement=void 0
;var o=n(1),i=n(3),r=n(2),a=n(441),s=n(7),l=n(60),d=n(10),c=n(139),u=n(0),h=n(24),p=n(13),f=n(159),g=n(1464),m=(0,n(5).PaperIntlFactory)(),v=m.F,y=m._f,b=(0,r.defineMessages)({view:{id:"YsMBh9",
defaultMessage:"View"},edit:{id:"EBKZwn",defaultMessage:"Edit"},restore:{id:"PL5ta5",defaultMessage:"Restore"},options:{id:"a/XanA",defaultMessage:"Options"},createdoc:{id:"KLVfpZ",
defaultMessage:"Create doc"}}),C=function(e){o.__extends(n,e);function n(){var t=null!==e&&e.apply(this,arguments)||this;t.handleTemplateSelection=function(e){
t.props.isArchived||t.props.isTrashed||t.props.onTemplateSelection(t.props.template.templateId,t.props.template.templateType,e)};t.handleTemplateRestore=function(e){
return t.props.onTemplateRestore(t.props.template)};t.handleTemplateUntrash=function(e){return t.props.onTemplateUntrash(t.props.template)};t.handleMouseEnter=function(){var e=h.findDOMNode(t)
;null==e||e.dispatchEvent(new Event("highlight"))};t.handleMouseLeave=function(){var e=h.findDOMNode(t);null==e||e.dispatchEvent(new Event("dehighlight"))};t.handleTemplateEditClick=function(e){
e.stopPropagation();t.props.onTemplateEdit(t.props.template.templateId)};return t}n.prototype.renderEmoji=function(){var e=this.props.template,t=u.createElement(c.default,{title:e.title||""
},u.createElement(p.default,{name:"note-large"})),n={backgroundColor:f.getTemplateColor(e)};return u.createElement("div",{className:"template-tile__header"},u.createElement("div",{
className:"template-tile__header__color",style:n}),u.createElement("div",{className:i("template-tile__header__emoji","hide-on-template-tile-hover")},t))};n.prototype.renderTitle=function(){
var e=this.props.template;return(0,l.getRawTitleWithConvertedEmoji)({str:e.title,skipFirstEmoji:!0})};n.prototype.renderSubtext=function(){var e=this.props.template;return u.createElement(a,{
clamp:"2",useNativeClamp:!0},f.getTemplateAccessString(e))};n.prototype.renderEditButton=function(){var e,t,n=this.props,r=n.isArchived;if(n.template.templateType==s.TemplateType.prebuilt)return null
;if(r){e=b.view;t="view"}else{e=b.edit;t="edit-template"}return u.createElement("div",{className:i("template-tile__edit-template-button__wrapper")},u.createElement(d.default,{linky:!0,
onClick:this.handleTemplateEditClick,className:i("template-tile__edit-template-button","show-on-template-tile-hover"),tooltip:u.createElement(v,o.__assign({},e)),tooltipAbove:!0,
"track-title":"Edit Template","aria-label":y(e)},u.createElement("div",{className:"template-tile__edit-template-button-text"},u.createElement(p.default,{name:t}))))}
;n.prototype.renderActionButtons=function(){var e,n=this.props,i=n.isArchived,r=n.isTrashed,a=n.template;e=i?u.createElement(t.TemplateMenuTileActionButton,{onClick:this.handleTemplateRestore,style:{
color:f.getTemplateColor(a)}},u.createElement(v,o.__assign({},b.restore))):r?u.createElement(t.TemplateMenuTileActionButton,{onClick:this.handleTemplateUntrash,style:{color:f.getTemplateColor(a)}
},u.createElement(v,o.__assign({},b.options))):u.createElement(t.TemplateMenuTileActionButton,{onClick:this.handleTemplateSelection,style:{color:f.getTemplateColor(a)},
trackTitle:"Create pad from template"},u.createElement(v,o.__assign({},b.createdoc)));var s=null;r||(s=this.renderEditButton());return u.createElement("div",null,s,e)};n.prototype.render=function(){
var e=this.props,t=e.isArchived,n=e.isTrashed;return u.createElement(g.default,{actionButtons:this.renderActionButtons(),handleTileSelection:this.handleTemplateSelection,
onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:i({"template-tile--archived":t,"template-tile--trashed":n})},u.createElement("div",{
className:"template-menu-template-list-element"},this.renderEmoji(),u.createElement("div",{className:i("template-menu-list-element__title","notranslate")},u.createElement(a,{clamp:"2"
},this.renderTitle())),u.createElement("div",{className:i("template-menu-list-element__subtext")},this.renderSubtext())))};n.displayName="TemplateMenuTemplateListElement";return n}(u.Component)
;t.TemplateMenuTemplateListElement=C;t.TemplateMenuTileActionButton=function(e){return u.createElement("div",{className:i("template-tile__main-template-button__wrapper")},u.createElement(d.default,{
primary:!0,onClick:e.onClick,"track-title":e.trackTitle,className:i("template-tile__main-template-button","show-on-template-tile-hover")},u.createElement("div",{
className:"template-tile__main-template-button-text",style:e.style},e.children)))}},1464:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(3),r=n(11),a=n(10),s=n(0),l=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.onMouseEnter=function(){n.setState({hovered:!0})
;n.props.onMouseEnter&&n.props.onMouseEnter()};n.onMouseLeave=function(){n.setState({hovered:!1});n.props.onMouseLeave&&n.props.onMouseLeave()};n.state={hovered:!1};return n}
t.prototype.componentDidMount=function(){var e,t,n,o;null===(e=this.rootEl)||void 0===e||e.addEventListener("mouseenter",this.onMouseEnter)
;null===(t=this.rootEl)||void 0===t||t.addEventListener("mouseleave",this.onMouseLeave);null===(n=this.rootEl)||void 0===n||n.addEventListener("focusin",this.onMouseEnter)
;null===(o=this.rootEl)||void 0===o||o.addEventListener("focusout",this.onMouseLeave)};t.prototype.componentWillUnmount=function(){var e,t,n,o
;null===(e=this.rootEl)||void 0===e||e.removeEventListener("mouseenter",this.onMouseEnter);null===(t=this.rootEl)||void 0===t||t.removeEventListener("mouseleave",this.onMouseLeave)
;null===(n=this.rootEl)||void 0===n||n.removeEventListener("focusin",this.onMouseEnter);null===(o=this.rootEl)||void 0===o||o.removeEventListener("focusout",this.onMouseLeave)}
;t.prototype.render=function(){var e=this,t=i("template-menu-list-element__contents",this.props.className);return s.createElement("div",{className:i("template-menu-list-element__wrapper",{
"template-menu-list-element--hovered":this.state.hovered}),ref:function(t){return e.rootEl=t}},s.createElement(a.default,{onClick:this.props.handleTileSelection,
"track-title":"Create Pad From Template",className:"template-menu-list-element"},s.createElement("div",{className:t},this.props.children)),this.props.actionButtons)};t.displayName="TemplateMenuTile"
;return t=o.__decorate([r.default],t)}(s.Component);t.default=l},1465:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.TemplateMenuTrashedEmptyState=t.TemplateMenuArchivedEmptyState=t.TemplateMenuOwnedByMeEmptyState=void 0
;var o=n(1),i=n(89),r=n(2),a=n(601),s=n(839),l=n(0),d=n(1466),c=n(1467),u=n(159),h=n(4),p=n(1468),f=(0,n(5).PaperIntlFactory)().F,g=(0,r.defineMessages)({createnewtemplate:{id:"+O5NBF",
defaultMessage:"Create new template"},maketemplatesyourown:{id:"q+x6++",defaultMessage:"Make templates your own"},templatizeadocorcreateanewtemplateandyoullseeithere:{id:"sIueb0",
defaultMessage:"Templatize a doc or create a new template and you'll see it here."},archivedandaway:{id:"4OhXRp",defaultMessage:"Archived and away"},
whenyouarchiveatemplateitmoveshereoutofsightRestorethetemplatetouseitagain:{id:"xtHari",defaultMessage:"When you archive a template it moves here, out of sight. Restore the template to use it again."
},whenyouarchiveatemplateitmoveshereoutofsight:{id:"n3NcjS",defaultMessage:"When you archive a template it moves here, out of sight."},deletedtemplates:{id:"0rb3DN",defaultMessage:"Deleted templates"
},deletekeepsthingsneat:{id:"pZlRvT",defaultMessage:"Delete keeps things neat"},whenyoudeleteatemplateitmoveshereoutofsight:{id:"q7J8Pr",
defaultMessage:"When you delete a template it moves here, out of sight."},whenyoudeleteatemplateanydocscreatedfromitremain:{id:"v8W9SF",
defaultMessage:"When you delete a template, any docs created from it remain."}}),m=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.onCreateTemplateSuccess=function(e){e.padId&&App.navigateToPad({id:e.padId,suffix:"?newTemplate=1"})};t.handleCreateBlankTemplateClick=function(e){u.createTemplate({
successHandler:t.onCreateTemplateSuccess,trackContext:t.getTrackContext()})};return t}t.prototype.getTrackContext=function(){};t.prototype.render=function(){
var e=l.createElement(s.HpMenuEmptyStateActionButton,{onClick:this.handleCreateBlankTemplateClick,buttonText:l.createElement(f,o.__assign({},g.createnewtemplate))})
;return l.createElement(a.HpMenuEmptyState,{illustrationClassName:"template-no-docs-null-illustration",header:l.createElement(f,o.__assign({},g.maketemplatesyourown)),
description:l.createElement(f,o.__assign({},g.templatizeadocorcreateanewtemplateandyoullseeithere)),actionButton:(0,i.cloudDocsUxEnabled)()?void 0:e,
newIllustration:l.createElement(d.ShelfEmptySpot,null)})};t.displayName="TemplateMenuOwnedByMeEmptyState";return t=o.__decorate([h.trackContextDecorator],t)}(l.Component)
;t.TemplateMenuOwnedByMeEmptyState=m;t.TemplateMenuArchivedEmptyState=function(){
var e=l.createElement(f,o.__assign({},g.archivedandaway)),t=l.createElement(f,o.__assign({},g.whenyouarchiveatemplateitmoveshereoutofsight));return l.createElement(a.HpMenuEmptyState,{
illustrationClassName:"template-empty-archived-docs-tab-illustration",header:e,description:t,newIllustration:l.createElement(c.StorageEmptySpot,null)})};t.TemplateMenuTrashedEmptyState=function(){
var e=l.createElement(f,o.__assign({},g.deletekeepsthingsneat)),t=l.createElement(f,o.__assign({},g.whenyoudeleteatemplateanydocscreatedfromitremain));return l.createElement(a.HpMenuEmptyState,{
illustrationClassName:"template-empty-trashed-docs-tab-illustration",header:e,description:t,newIllustration:l.createElement(p.TrashEmptySpot,null)})}},1466:function(e,t,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});t.ShelfEmptySpot=void 0;var o=n(1),i=(0,o.__importStar)(n(0));t.ShelfEmptySpot=function(e){var t=e.altText,n=e.inverse,r=(0,
o.__rest)(e,["altText","inverse"]),a="dig-Illustration dig-Illustration-spot".concat(n?" dig-Illustration--inverse":"");return i.createElement("svg",(0,o.__assign)({role:"presentation"},r,{
className:a,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),i.createElement("title",null,t),i.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},i.createElement("path",{
d:"M252.4 69.5c-6.6 1.3-4 2.6-7.2 11.3-2 6.6-3.3 9-4.9 18.1 0 5.8-9.5 24 1.5 20.7.3 2-5.2 4.1-6.7 4.6-.9.5-3.5 10.9-3.8 14.1.4-.5 1.2-1.2 1.8 0 .3.7.3.7.7.2 1.5-1.3 1.9 1.4 1.9 4 .1 2.3-.7 6.8-.9 8.5 0 0 .6.3 1.2.7 5.6 2.7 21.8-.4 25.2 4.9.1.1 2.5.3 5.3.4 5.1.3 5.1.3 6-.2 1.8-1 14.7-3.8 13.8-4.6 1.5-1.8 4.6-4.6 6.9-6.5 2.4-8 10.4-22.3 12.7-28.8 2.8-7.6 9.8-28.4 10.3-28.7 3.4-7.9 3.9-8.1 5.1-12.8 0-2.4-3.9-1.9-5.2-2.8-16.7-3.4-47.9-3.5-63.7-3.1zm-19.7 80.2c-.3.2-.3.3-.1.5.7.8.8-.9.1-.5z",
fill:"#78286E"}),i.createElement("path",{
d:"M97.5 73.9c-6.4 2.7 1.5 8.6 4.9 9 2.9-.8 1.9-1.6 6.6-.6 4.3.8 12.2 1.1 14.6 2.8 2.6 2 7.9-.8 7.4-4.2-.1-2.1-3.4-6.4-5.4-5.9-2.4-.5-5.1-2.6-6.8.5-2.5.6-5.8-2.6-8.3.4-4.1-.5-9.9-2.4-13-2zm138.1 36.4c-.6.4-1.3 1.1-2.2 2.5-1.4 2-8.2 15-7.7 15.5 0 1.6 1.1 3 1.7 3.7.4.8 1.3 2.2 2.6 1.7 2-.3 2-.7 4-2.4 3-2.9 4.8-2.1 7.8-5.2 2-1.6 1.3-4.1-.3-5.4-.3-.7-3.6-.4-4.1-.4 1-2.1 1.1-5.8 1.5-8.3.8-3.3-1.2-2.6-3.3-1.7zm59.2 34.6c-.7.5-1.6 2-1.9 3.3-.3 1.3-.3 1.3-1.1.6-3.7-3.6-7.3 8.7-19.9 8.6-5.1-.5 1 8.3-.3 14.1 0 5.9.1 6.4 1.7 7.2 2.6 2 6.1-3.1 8.9-3.8 6.9-1.4 9.1-6 12.6-11 3.7-3.6 7.8-11.2 4-15.7-.8-1.7-1-5.1-4-3.3z",
fill:"#D19063"}),i.createElement("path",{
d:"M109.7 7C92 9.9 85.3 21.8 79 38.1c-8.8 19.2-6.4 34.8 17.5 39.1 3.1.4 4.3.4 13.6.1 11-.3 12.1-.3 14.1.8 7.9 6.4 16.4 6.6 22.9-1.9 4.6-6.8 1.8-20.9-.5-29.6 7.7-12.3 6.7-30.5-8.1-36.3-8.5-2.9-19.6-3.4-28.8-3.3z",
fill:"#8A6B3E"}),i.createElement("path",{
d:"M369.1 43.9c-59.6 2.1-129.8 2.4-191.3 3.8-9.1.5-26.4-.9-19.9 3.5 61 0 130.7-1.6 193.2-2.4 21.8-.6 13.3-.1 6.2 6.2-.5.3-.5.2.3-.8 2.3-3-2.1 1.2-2.7 1.8-56.6 1.5-141.4-.2-200.8.2-1.5-.1-.8 1.8-.6 2.6.2.5.5.6 2 .9 58.6 2.2 140.8 2 197 1.1-.2.5-.9 4.1-1.3 3.1-2.1-.7-2.6.4-8.4-.4-61.3-1.2-126.7-1.2-187.9.9.1.4.3 2.1 1.1 2 10.7.4 42.1-.9 60.1-.4 43.6-.6 90.6-1.4 134.4.6.4 22.2 2.6 47.4 3.8 69.4-18.4-.1-35.8 0-50.5 1.8-2.5.4-4.7-.4-3.2 2.9 20.3.4 43.8-2.2 61.7-1.8.4.6-.4 5.6 1.3 4.9.7 0 1.5-.8 1.8 0 .2 3.1-4.6 1.2-10.8 1.9-18.6.5-33.4 2-51 3.6-.1.6-.2 1.5.2 1.9.7 1 9.1.2 10.9.2 10.1 0 23.8-1.3 34-1.8 3.7.4 6-1.1 5.5 1.2.4 2.7-18.9.7-20.6 1.5-7.5 1.1-24.3.4-33.2 3.5.6 2 .2 1.3 5 1.4 13.8-.5 32.3-2.7 48.7-2.4.8 6.6.9 41.6.9 61.6-44.8.4-94.4 1.9-135.5 3-6.3 1.1-50.8-1.3-51.5 3.6.2 1.6.4 1.6 3.5 1.3 55.7-1.7 129.7-3.1 187.7-3.1 0 .7 0 2-.4 2.5-.5.2-.3 5.7-.4 7.1-44.4 2.1-99.4 1.4-146.5 3.4-8.5.3-34.4 0-39.3 1.2-.5.5-.2 2.6.4 3.5 45.7.1 47.8-1.7 88.2-1.9 38.3-.8 63.6.1 98.9-1.7.7-.3 2.7-.7 3.3-1.1-.1-.6.3-12.3-1.9-11.2-1.3 0 0-6.2-2.5-6.4.2-16.7-.1-56.6-1.9-67h4.9c.6 21.4 2.3 45.4 1.2 68.6 1 .1 2.1-.4 3-1-.9-21 1.5-44.6-.6-67.9 3.2-1.4.9-9.1 0-13.4-.4-3.3-.4-22.7-.9-26.1-.4-2.9-.5-12.6-.7-15-.1-.3-2.6.6-2.7.4.4-.7 1.3-.7 1.1-2.2-.6-10.3-2.6-26.8-4.1-35.5-.2-.8-.2-.9.3-1.1 1.3-.6 6-4 7.4-5.1 3 26.1 3.9 53.4 7.7 80.3 3.3 49.4 2.2 80.6 3.9 144.2.1 1.9.2 3.6.3 3.7 1.1-.2 5.2-1.5 4.3-4.2-1.4-47.7-1.6-97.6-5.6-145.6-2.5-26.2-4.9-55.3-6.5-81.7.2-.2.3-.8.1-2.4-.3-1.4-.1-2.7-1.1-1.7zm-12.3 25.8c.2 8.3.8 10.7 1 19.8.4 6.4-.3 6 2.8 6-.7 8.1.6 30.7 1.1 38.5.8 1.5-2.1 1.3-3.7 1.6-1.2-17.2-2.3-43.5-3.5-58.3-1.4-13.2-.1-5.1 1.6-16.1.5 2.5.6 4.3.7 8.5zM89.1 74.1C74.5 75.9 66.6 91.4 65 104.7c-1.9 11.7-4 18.3-3.7 32.8.2 16.6-2.3 31-1.2 46.4.2 6.4 2.5 21.2 5.1 26 1.4 4.5-.4 6.9-.4 12.2-.9 19.1 1.7 35.4-2.1 55.8-2.5 13.9 0 31.5 1 45.1 2.2 33.3-2.8 84 4 112.2 1.3 1 9 3.6 8 4.6 0 9.3-1.9 24.8-2.3 34.9-3.4 15.5 24.9 8.1 34.2 10.4 5.3.3 13 2.1 18.1.1 2.6-.7 9.1-.3 11.2-1.8 5.2-1.8 8.6-9.2 2.5-11.3-10.6-3.4-15.7-4.6-25.1-6.5-4.8-1.1-8-3.3-9.7-6.7 4.2.9 11.7 2 14.8.2 6.5-2.2 1.2-7.8-3.4-7.1-.2 0-5.7 1.8-4.5.8.7-1 2.8-4.6 3.6-6.2 7.2-15.4-11.6-8.2-12.5 5.9-1 2.4-2.2-10.3-2.1-12 7.5-1.8 8.4-8 9.4-15.2 2.1-11.7 4.5-29.4 5.2-42.8 1.2-8.6 4.9-35.2 6.2-45.7 3.2 19.9 10.7 38.2 20.1 53.4 6.6 9.3 12.5 31.5 17.4 42.8 1.1 1.1.3 2 .9 2.7.1.2 6.1.6 6.2.8 1.6 5.4 12.8 35.1 18.3 36.4 5.8 1.5 9.5-.3 15.6-2.9 5.7-.9 21.4-14.5 31.9-18.7 7.5-3.8 2.3-15.9-8-10-4.5 2-11.9 3.7-16.3 2.9 1.7-.5 6.2-1.2 8.1-2.2 9.3-5.3 4.8-14.5-6.6-5.6 14.6-13-6.8-14.7-8.6-1.7-1.3 7.9-.1 7.2-2.5 9-1.4-.2-2-.9-2.1-1.8-3.2-.2-6.1-7.6-6.8-9.8 0-.1 1-.9 2.2-1.6 2.6-1.6 4.8-3.8 5-4.9-.2-3.1-2.4-24.8-3.4-31-1.8-11.2-1.6-26.7-3.8-38.5-2.4-19.3-7.9-28.8-14.1-49.9-10.7-32.7-9.7-69.4-26.2-96.2.3-3.3.1-7.8-.8-12.8-1.6-10-1.4-17.7-3.1-28.1-.6-3.2-.9-7.3-.9-9.5.1 0 3.3 2.7 5.4 4.6 10.3 9.3 11.7 10.6 14.1 12.2 17.6 13.5 43.9 10.1 64.7 10.5 13.6-.8 37.3 3.6 45.6-9.7 1.7-9.7.5-22.6-11.5-24-6.7-1.8-8.5-2.8-15.7-2.9-3.2-.4-12.1.1-10.3-3.1 1.6-4.2.1-8.8-2.5-11.5-1.6-1-5.3-7.5-6.9-8-1.4.7-.5-.9-1.9-.8-3.2 0-16.9 4.2-19.4 4.5-1.6.3-5.4 0-6.4 1.6-6.3-2.8-14.8-6.2-18.7-12.3-6-11.7-15.8-21-27.6-25.8-1.9-.6-2.6-2.8-3.6-4.4-3.7-7.1-10.8-6.9-17.2-6.7-.2-.9-11.9-.7-13.2-1.2-7-.9-13.8-1.4-19.3-4.4-.8-.4-4.2-1.5-4.4-3 0-1-.3-1.2-1.3-1.4-.8-.2-.9-.1-.8.3.2.4.1.4-.4 0-.4-.3-1.4-.3-3.4 0zm.7 3.2c9.2 8.1 25.4 9.5 37.7 10 6.8-.1 10.3-.5 13.9 2.2-9.2 3.1-17.6 12.5-19.3 22.8-.1 1.6.2 2.7.8 2.6.7-.3.1-2.5.6-3.3 2.7-8.3 9.8-18.4 18.6-21.1.3-.3.6-.1 3.1 2.4 3.2 3.4 2.9 2.5 5.4 3.6 24.8 11.2 20.9 28.6 42.7 36.5 4.4 1.4 3.2 2 5 2.9 3 1.1 5.6 5.5 8.9 6.4 7.4 3.5 19.2 6.9 25.5 10 5.8.6 16.9 1.1 22.4 2.9 4.1.7 2.7 4.8 4.7 9.7.9 3.1 1.7 9 1 11.8-.5.4-.5 1 0 1.1.7.6-.1 1.2.1 2.4-.1 1.8-.2 2.2-.5 2.2-17.7 1.3-36.8 1.9-55.3 1.9-19.9.3-34.9-6.2-48.6-18.7-3.9-3.2-5.3-4.9-9.9-8-3.9-3.1-4.2-1.3-7.6-6.3-7.4-9.3-6.8-12-11.1-17.7-.7-1.5-1.4 1.9-2.1-1-1.2-3.7-3.7-9.3-5.5-11.5-2.2.9-2.5 1.1-.1 4.8 2.4 6 6.2 13.3 9.9 19.9 2.3 5.6 6.7 9.1 10.3 13.5 1.6 15.7 4.3 36.4 5 52.9-8 1-17.5 5.2-26.9 6.3-13.4 1.9-35.7-1.2-48.2-9.1-7.4-11.9-6.2-28-6-42.6 1.8-17.2.8-41.3 4.3-57.2 2.5-12.5 4.2-30.2 19.2-33.4.6-.6.8.4 2 1.1zm40.5 3.1c-.7.4.8.2.9 0 .1-.3-.4-.3-.9 0zm-2.6.3c.1.3 1.8.4 1.8 0 .2-.3-2-.4-1.8 0zm-46.4 39.6c-1.2 3.9 2.7 4.7 7.5 10.7 11.9 12.8 25.6 24.5 38.8 31.7 1.7-1.9 1.9-1.8-.2-3.1-15.2-10.5-32.8-24.8-43.9-39.6-.4.1-2 0-2.2.3zm143.4 10.2c.2 0-5 2.9-6.6 3.1-.3-.2-.8-1.8-.6-2 1.5-.4 5.8-2.4 7.2-1.1zm-9.9 2.2c-.5 2.9 4.9 7.2 5.4 9.7-.3.8 1.6 1.1 1.8 1.7.7 1.1-1.4-.2-2.9-.3-5.5-1.4-12.6-4.2-16-8.3 2.6-1 8.5-2.1 11.2-3.2.5-.2.6-.1.5.4zm13.2 3.2c.7.9 1.3 1.7 1.2 1.7-.2.2-5 2.5-5.3 2.6-5.9-5.7-5.3-4.3 1.6-7.7.7 1.2 1.4 2.1 2.5 3.4zm4.9 4.4c1.1 0-6 3.8-6.9 4.4-.1.2-.2.1-.1-.2.3-.3-.8-2.2-.8-2.5 1.9-.6 6.3-3.5 7.8-1.7zm.9 3.8c-.1 1.3-.5 2.9-.9 4.1-1.7-.5-3.7-1.2-5.4-1.9 1.3-.5 2.1-1.1 3.9-2.2 2-1 2.7-2.5 2.4 0zm-154 15.4c-2.5 2.7-1.3 1.8 3.3 4.1 3.9.9 14.2 8.7 16.7 6.6 1.3-.8 1.1-.4 2.7.5 4.1 3.4 11.4 5.8 13.2 9.4.3-.4 1.4-1.5 1.4-1.8-3.3-1.9-9.2-5.2-13.7-8.6-3.5-3.3-3.3-4.8-11.6-8.4-3.9-1.2-9.6-4.7-12-1.8zM268 161l1 1.6c-6.4-.2-5.2 4-6.7-3.2 3.5 1.3 3.5-2.5 5.7 1.6zm2 5.8c1.1 2.6-3.3 1.2-5.4 2.2-.3.3-.4-.1-.7-2l-.2-1.2c1.2.1 4.5.3 5.2 0 1.1-.4.9-.3 1.1 1zm.4 4.9c.1.4.2 2.2.2 2.9-1.4-.3-3.5 0-5.6.4-.9.6-.5-2.1-.5-2.7 1.2-.1 4-.3 4.8-.5 1-.5 1-.5 1.1-.1zm0 5.9c-.3 2.8-3.4 3.9-6.1 4.2.1-.9.2-3.9.6-4.1.6-.3 4.3-.7 5-1.1 1.1-.5.7-.2.5 1zm-123.3 37.5c5.4 11.7 9 25.7 11.6 38.5-16.8 1.9-35.6-11.3-39-27.6-.7-3-.6-3.2.5-3.2 2.8-.5 19.2-4 23.6-6.3 1.3-.8 2.6-5.1 3.3-1.4zm-75.5.1c4.3 2.2 9.6 3.9 14.6 5.4 1.5.4 1.5.5 1.4 1.2-1.9 10.3-8.6 18.5-17.7 23.5-.7-6-1.4-29.5-.7-31.3.1 0 1.2.6 2.4 1.2zm27.7 7.8c4.5.6 10.5.6 15.4.6-.1 21.1 25.2 36.1 44.3 32.1 3.3 18 7.5 40.9 13.3 57.7.7 5.4 8.7 19.8 5.3 19.8-20.7 8-30.1 33.3-16 50.9 5.8 7.4 17.6 18.3 27 16.2.8-.1.8-.1.9.9.1 8.4 1.6 18.3 1.6 26.8-5.9 6.7-18.2 4.3-26.1 4.5-1.9 0-2.1-.5-3.6-6.5-5.2-23.6-14.8-36.6-25.4-57.7-2.7-7-6.3-10.1-3.3-10.9 5.1-4.3 22.6-20.1 23.5-30.9.6-4.8 0-11.7-1.3-16.8-.8-1.9 3.1-3.2 3-4.1 1-.4 8.5-13.1 2.7-6.9-1.8 4-2.8 5-7 6.6-1.1-2.7-3-6.8-4.2-8.5-7.9-13.1-29.9-19.2-42.4-10.2-4.5-7.3-14.6-23.8-15.8-31.7-.5-1.6-.6-12.6-1.7-11.8-1.5-1.9-2.3.2-3.5 2-.3 8.1 2.9 18.6 5.7 25.3 3 6.1 8.1 14.1 12 20.8 22 34.3 11.7 50.7 7.3 88.2-1 3 .4 12.2-2.7 13.2-12 7.5-20.9 15.6-24.5 31.2-2.9 12.8 4.7 15.8-6.3 10.5-1-.3-3.5-2-4.5-2.1-.7-.1-.8-.3-1-1.1-3.9-14.9-2.7-34.4-3.7-52.3 8.1.3 17.4-7.2 22.8-13.4 6.5-8 8.3-17.6 7.2-28.5-.3-11.1-6.7-12.9.5-13.4 11.9-2.9 2-4.1-5.2-1.4-5.8-7.2-16.7-12.6-25.4-10.6-4.5-22.9 3.6-41.4 2.2-64 9.9-4.4 21-14.2 22.5-25.2 1.4.1 2.9.3 6.4.7zm257.1 12.9c-1 .2-1.2.4-1.4 1-.6 1.2-3.6 3.7-5.1 3.3-7.7.5-16.7 1.1-24.9 1.5-13.1 0-66 2.1-85.4.9-16.8-1.5-28-2.3-46.9-1.9-13.6.7-25.6-1.7-22.2 3.4 18.3.6 37-1.2 51.7-.3 14.5 1.2 31.5 2 47.1 1.2 17.9-1.2 68 1.8 85.7-2.7 1.1 5.4 1.9 21.3 2.4 28.6.3 5.3 0 19-.5 22.4-.2 1-.1 1 .5 1 1.7 0 5.2-2.1 4.9-2.9-1.1-6.1-.6-16.9-1.6-25.2-1-14.4-1.2-17.4-2.6-25.5 0-1.3 1.4-1.2.7-3.1-.7-2.2-.5-2.2-2.4-1.7zm7.9 2.7-.6.3c-.4 11.2.9 23.8 1.2 34.5v15.9c-.2 1.9 4.3.3 3.7-1.1-1.1-4.3.5-54.7-4.3-49.6zm-241.7 46c10.8 1.8 21.5 11.1 24.8 21.7 1.3 3.6 1.3 3.3-.3 4.5-6.7 5.4-10.6 8.9-15.3 12.3-5.7 4.3-.3 3.6 2.4.9 3.4-2.1 5.9-3.7 8.5-6 3.3-2.1 7-7 6.9-4.4 4.5 19.5-4.2 27.4-16.8 40.4-1 1.1-1.9 2-2 1.9-.2-.2-2-6-3.3-10.6-1.3-4.7-2.1-7-3-9.4-.9-1.9.2-.9.2-2.3 0-.5-.1-.7-.4-.6-.4.2-.3.5-1.3-4.6-1.7-8.8-3-13.6-4.9-19.3-1.7-5.3-7.1-15.9-10-20.9 2.8-3.6 9.8-4.4 14.5-3.6zm261.9 4c-4.7 13.4-8 37.8-9.2 51.5 0 1.7-.3 1.6-1.3-.4-2.1-3.7-6.4-10.5-9.7-12.6-.6-.3-.9-.3-2.8.1-2.4.5-2.5.6-2.4 3 .2 3.4 2.1 12.9 4.7 23.2 2.7 11.2 2.1 7.9-3.4 3.8-1.7-1.2-1.7-1.9-3.1-2.7 1.6-1 1.6-1.6 1.1-3.9-.7-4.2-.9-6.8-1.2-19.3.4-5.2-2.1-12.1 0-14.5 1.6-1.5 2.9-4.3 2.1-6.3 2.1-.9 2 .2 2-6.6-.3-6.4.5-3.6.5-6.8-.5-2.6 0-1.9-3.8-1.9-40.4 0-97.4 1.2-136.7 3.4-9.2 1.3-33-1.4-40.3 2.7.2 2.7.5 4.5 3.5 3.3 5.9-1.4 24.4-.8 31-1.3 45.2-2.3 95.3-4.6 141.3-4.3 0 2.5.1 3.8.3 6.5.1 1.7.1 1.9-.2 1.8-5.4 1.9-21.1 1.2-26.8 2.3-33.4 3.4-47.3 1.8-86.7 1.6-29-.3-19.4 1.2-46.8 1.2-12.7.2-15.1-.3-16.5.7.6 1.2 1.8 3.4 3.6 2.6 30.5-.8 28.4-1.6 61.2-1.9 31.3-.5 27.9 1.4 49.6.8 20.1-1 43.8-3.1 64.1-4.4-.8 1.7-1.5 2.6-3.7 4.2-1.6 1.2-1.7 1.3-1.7 2.1s-.1.9-.7.9c-6.6-.4-15.3-1.5-24.8-.5-33.2.5-66.5-.9-99.7.7-7.6.1-9.5-.1-15-1.6-1.6-.9-13.8-.6-16.2-.3-3.1.8-9.4.8-11.3 2.6.3.9.4 2.8 1.9 2.5 11.3-1.5 23.1-2.9 33.1-.3 40.3-.9 90.6-1.3 131.4-1.1 2.4-3.6 1.8 8.5 2.3 11.2 0 3.3.9 16.6 1.1 22.3-6-1.9-13.3-10.5-15.8-16.9-2.9.5-5-.6-2.8 3.8 2.9 7 4.5 29.6 7.8 37.6 2.2 6.6 9.1 20.4 11 28.1-16 4.3-13.5 19.1-11 31.2 1.5 8.8 5.6 32.3 8.3 44.4 1.1 7.5 1.2 7.9 2.7 8.6 20.6 4 51.2 6.1 71.2-5.9 4-2.9 3.9-18.5 5.7-28 1.8-14.3 4.9-24.1 6.8-37.4.4-3.9 0-3.1-1.7-3.3.3-3.6-2.2-7.6-5.6-11.1.6-5.1 5.3-18.6 2.6-21.7-1.7.4-4.3 1-5 3.2-2.5 5.1-3 7.1-5.8 12.2-1.5 2.2-3.4 7.9-4.1 7.6.8-7 1.6-13.4 2.4-20.6 1.7-14.6 9-32.8 6.9-47.2-8-1.1-11.6 16.3-15.3 22.2-.4-8.3-.2-22.6 1.4-30.3.2-1.4 2.8-15.6 2.7-19.5.7-3.5-3.3-1.9-4.6-1.2-7.3 9.9-15.2 26.1-17.2 37.7-2.2-11.4-4.1-30.2-6.1-41.3-.6-2.4-1.7-12.4-2.7-16.8-.3-.2-2.1.2-2.6.3zm1.2 13.3c6.1 39.5 10.9 94.8 1.2 132.9-.1-16.5.6-64-1.6-77.5-1.1-.5-2.1-71.4.4-55.4zm-309.9 1.5c-9.8 2.4 9.5 3.9 11 2.8 2.6-1.1 1.1-.8-.3-1.7-1.7-1.4-8.4-1.4-10.7-1.1zm11 3.3c-4.1.6 15.1 1.8 13.9 1.4 2.5-1.2-12.6-1.9-13.9-1.4zm276.4 2.5c-3.4 0-1.4 10-1.1 12.1.8 1 4.2-.5 4.2-1.4 0-1.9-.7-4.4-.9-7.1-.6-4.1.3-4.4-2.2-3.6zm-292.1 4.4c5.2 1 13.3 5.3 16.3 9.8.4.3-20.8 2.6-10.3 4 2.5.1 8.9-1.1 12-1.7 0 0 .4.7.7 1.4 2.5 4.2 3.8 19.1 2.4 26.3-2.2 10.3-12.7 24.1-23.9 21.6-.3-.2-.3-4.7-.2-24.2.1-24.1.1-26-.7-37.5 1.2-.1 2.2 0 3.7.3zm310.8 16.5c.5 31 4.4 74.2 2.3 104.2-1.1-.6-.7-2.3-1.1-5-1.1-10.1-1.1-10.8-2.3-16.2-2.9-12-3.6-27.2-7.4-37.4-.7-.6 1.5-17 2.1-17.3.9-.5 2.4-.7 3.5-1.4.4-3-.7-7.1-1.5-9.6.1-.1.3-2 .5-4.2 1.4-13 1.7-18 3.8-28 .1.2.1 6.8.1 14.9zm30.6-10.7c-4 18.1-3.1 36.4-4.8 53-1.2 10.9-4.8 15.8-8 25.9-3.5 9.8-3.4 9.5-3.2 8.3 1.1-6.8.7-32.3 1.1-39.9 1.7-8.9 3.9-24 7.2-32.9 2.1-4.6 5.7-12.6 8.1-16.8 0-.1-.2 1.1-.4 2.4zm-44.9 19.3c7.2 13.6 5.4 16 2.9 30.6-.5-1.1-3.6-5.3-2.5-5.4 1.6-6.9-3.9-24.2-4.3-31.2 1.1 1.7 3.2 4.7 3.9 6zm-187.7-3.1c6.4 21.3 6.5 41.3 9 61.7-8.1-.2-17.9-9.5-22.6-15.4-9.1-11.3-7.9-29.3 2.4-39.8 2.9-3.1 7.2-6.2 10.6-8.3 0 .1.3.8.6 1.8zM423 352.3c-1 6-1.5 9.6-2.9 15.8-1.6 2.4-4.7 8.3-6.5 13-6.7 14.7-9.2 29.8-16.6 43.9-6.1 8.3-2.8 1.8-1.5-2.8 2.1-6.8 7.2-22.6 10.2-30.2 4-11.6 5.4-6.6 7-17.1.7-5.4 9.6-22.7 10.8-26.1.2-.6-.2 1.7-.5 3.5zm-78.3-1.9c16.4 10.8 23.9 20.5 26.1 41.1 2.1 15.5 5.7 26 7.1 42.2.3 1.9-.1 2.3-.4 1.1-6.5-21-14.6-42.8-24.1-63.6-2.6-3.7-4.6-14.6-8-14-2.1.7-1-.8-1.7-3.7-.3-3.3-2-6.3 1-3.1zm2 13.5c4.1 7.5 6.2 14.7 6 22.9.1 1.2.1 1.1-1.4-1.9-3.5-6.7-5.8-16.8-6.9-24.7-.1-1.1-.1-1.2.1-.7.3.2 1.2 2.3 2.2 4.4zm10 21.4c2 6.9 9.3 23.1 10.9 28.6-.2 0-2.8-4.8-3.3-6.1-1.7-9.2-9.6-13.9-9.2-24.3-.3-4.4.6-.7 1.6 1.8zm57.9 1.7c-4.1 17.2-10.1 30.2-17.6 45.5-4.7 7.7-2.6 7.8-7.7 5.5 1.1-4.5 7.9-9.8 10.1-13.4 6.7-11.7 10.4-29.9 16.3-42.5.1 0-.4 2.2-1.1 4.9zm-95.5-2.5c-20.4 0-22.2.9-38.7 1.9-16.1 1.3-59-1.8-75.5.2-3.8.6-4.3.9-4.2 2.4 0 .7.4 2.4 1.3 2.2 7.7-.7 19-2.6 27.1-1.4 34.8 1.7 67.4-2.2 102.2-1.6 6.1-.3 9.9 1.9 8.3-3.5-.6-.4-2.6-.4-20.5-.2zm-209.6 9.6c-.8 10.3-2.4 19.4-4 30.7-1.8 13.4-2.3 15.5-15.2 14.1-4-.9-4.4-1-4-1.2.3-.2.4-1.1.4-4.4-.6-16.1 9.4-33 22.8-39.2zm130.1 3.2c-10.3 1.6-29.2 0-40.1 2.1-.1 1.8.1 3.7 1 5.1 16.5-.5 33.2-.7 49.3.8 21.4.6 78.6 1.1 100-.2.5-.7.3-2.9-.4-4.4-.7-1.3-.3-1.2-4-1.1-35.1 1.1-70-1.9-105.8-2.3zm117.9 1.3c4.1 10.1 11.7 25 14.2 35.2-.9-.1-9.5-2.5-10.2-2.6.1-7.8.5-9.1-1.1-18.8-.6-4-.7-4.9-.5-5.4.7-1.5-.8-.6-.9-2.1-.2-1-1.9-6.2-2.3-7-.5-1-.1-.6.8.7zm70 2.3c-2.9 12.4-6.6 26.7-13.4 37.4-1.8 1.1-15 3.2-11.2 1.3 9.1-9.5 17.8-28.2 25-41 0 .1-.1 1.1-.4 2.3zm-13 .3c-.4 3.7-.3 6.4-1.3 10.3.4 1.6-9.3 23-10.9 23.2-.9.2-1.3 2.2-1.5 3 .1 1-3.7 3.1-3.8 2.2 5.4-13 12.3-24.3 16.9-38.8.8-2.3.8-2.4.6.1zm-58.9 7.3c-.2.3-1.6.9-2.5 1.1-2 .3 3.3-2.1 2.5-1.1zm1.2 5.9c1 5.9 1.7 10.7 1.5 15.6-3.5-1-10-5.7-9.2-9.4.2-3.5.8-9 3.6-10.6 4.5-1.5 2.9-1.2 4.1 4.4zm75.1-.5c2.8 8-4.2 19.8-11.4 22.2-.6.2-.6.1.2-.8 3.7-6 7.3-17.1 9.8-23.7.5.7.9 1.4 1.4 2.3zm-223.5 14.9c3.8 2.4-1.5 5.6-3.3 7.9.1-2.5.6-8.9 3.3-7.9zm223.1 2.5c-1.5 8.4-3.8 22.6-4.6 30.2-1.6 6.3-.6 22.5-5.8 23.6-1.2.3-7.1 2.3-8.1 2.3-.1-.1 0-1.2.2-2.5 1.7-14 3.2-30.5 3.6-44.7 6.6-2.6 10.9-5.5 14.3-9.7.7-1.1.5-.4.4.8zm-80.8 1c2.3 1.4 7.8 3 10.7 3.9.1.1.4 2.2.7 4.8 2.5 15.8 2.3 30.3 5.5 47.3-2.6-.2-7-.1-8.2-2.1-1.3-9.8-3.1-14.3-5-26.2-.7-4.7-4.4-21.5-5.7-28.5 0-.2.3-.1 2 .8zm-166.3 3.3c2.7 2.2 4.1 7.1 7 9.4-1.7 2.5-8.1 9.5-3.8 7.6 1.6 0 5-4.8 6.5-6.1.4 0 2.2.5 2.9.6-9.2 11.4-.7 8 3.7.1.5.1 2.7-.3 1.9.5-8.5 11.8.8 6 3.6-.2 2.9.1 5.9-.2 9.1-1.1 2-.5 2-.5 1.6.5-.7 1.9-.9 4.7.6 6.1-3.9 1.1-19.7 8.2-23.5 10.9-11.2 6.4-6.7 5-13.5-5.6-1-1.8-1.6-3-1.4-3.2 2.1-1.3 7.6-4.3 7.9-6 2.2-4.5-2.8-11.8-7.7-11.6-2.1-.1-5.8 1.6-8.2 2.8-.6-2.8-3.5-4.1 1.6-3.8 3.5-.1 6.1-.1 9.3-1.2 1.5-.4 1.2-.9 2.4.3zm31.7.2c1.1 1.2.1 3-.7 4.1-1.3 1.4-4.8 1.2-6.6 1.5 1.1-1.1 5.9-7.9 7.3-5.6zm156.4 3.9c6.5 2.1 3.5.7 4.5 9.9.2 7.6.9 15 1.5 22.6.3 3.7 1.5 16.4 1.5 17.4-.6 0-5.9-.3-7.4-.7-3.2-17.8-2.7-28.2-6.4-47.1-.4-2.4-.7-4.4-.7-4.4 1.7.4 4.2 1.4 7 2.3zm-195 1c4.3 2.2 6.6 11.2.3 12.5-.5 0-6.4-11.3-6-11.6 1.1-1.2 4.1-1.5 5.7-.9zm-64.8.2c1.5.9-2.8 10.2-6.4 14.3.4-2.2 2.5-15.3 6.4-14.3zm-31.9.2c2.9 1.4 10.1 1.4 12.9 2 2.6 1.1 4.3 5.7 4 8.1-.1.1-6.1 4.1-6.3 4.2.3-6.6-4.4-12.9-11.6-9 .3-1.3-1-6.8 1-5.3zm331.8 1.4c-2.4 10.5-2.8 22.2-4.1 32.5-.5 4.7-.8 10.6-1.7 13.6-.3 0-7.2 1.2-7.6 1.2-1.3.5.5-6.4.1-11.1.4-8.8.4-24.5.2-34.2 2.5-.3 9.5-1.5 11.8-2.4.5-.1 1.6-.7 1.3.4zm-27.7.8c3.8.9 6.5 1 10 1.1-1 12.6-1.5 31.9-1.7 45.7-2 0-5.9-.1-7.9-.2-.9-13.3-2.3-28.4-3.3-41.8.2-4.7-2.5-6.5 2.9-4.8zm-157.4-.1c1.2.6 1.9 2.7 2.2 4.2-2.6 1-5.7 2.2-8 3.4-1-1.3-1.3-4.4-.9-5.8 1.5-.9 4.7-2.8 6.7-1.8zm-144 5.5c3.4 2.4 4.4 9.6 1.3 12.6-1.3.9-4.6.8-6.2 1.2.2-3.6.9-9.1 1-12.5-.3-2.9 2.2-1.6 3.9-1.3zm144.1 2.5s-2.3 1.6-2.2 1c-.2-.4 2.6-1.4 2.2-1zm-2.9 1.7c0 .1-3.3 2.1-3.5 2.1-1.3-1 3.6-2.5 3.5-2.1zm-126.2 1.9c-.1 1.5-3.1 2.7-5.1 4.7-3.6 2.4-4.4 5.1.6 2.2 1-.6 4.4-3.5 5.2-4 .1 0 .3.3.5.8 1.9 1.1-8.9 8.9-4.2 8.4 2-.4 4.4-3 6.2-4.8 2.3 6.1 18.3 6.1 15.1 8.2-2.2 2-2.2 5.9-3 8.1-1.1.4-18.4-.5-22.8-1.2-3-.2-10.4-1.8-13.1-1.1-.4-1.6.2-8.7.8-10.2 4.1-.4 9.3-3.7 11.4-7.1 1.8-2.3 2.4-.8 6.7-4.6 1.4-1 1.3-1 1.7.6zm18.6.5c6.5 4.6-7.2 1.9-8 1.1 1.8-1.1 6.1-2.2 8-1.1zm101.6.5c.6 1-.9 1.5-1.4 1.7-.2 0-1.1-1.3-1.4-1.7 1.1-.1 2.6-1.7 2.8 0zm-4 2.9.7.3c-.8.6-2.3 1.7-3.1 2.2-.3-.7-1.1-3.1-1.3-3.4 1.3-1.6 2.6.3 3.7.9zM210 462l.6.5c-.5.3-1.5 1-2 1.3.4-.9-1.6-3.8-1.2-4.4.6-.2 2 2.4 2.6 2.6zm-5.3.3c.8 2.5 3.9 1.9 1.6 2.9-.7.4-1.3.7-1.4.7-.4-.7-.6-1.8-1.4-2.9-.9-1.4-.9-1.4-.4-1.7 1-.5.8-.1 1.6 1zm-3.5 4.1.9.8c-.4.2-1.9 1-2 1-.2-.7-1.8-3.2-2.1-3.9 1.1-2.2 2 1.4 3.2 2.1zm-6-.4c.3 2 3.3 3.7-.8 4.1-1.2.3-1.4-2.3-2.1-3.3.7-.1 2.9-1.8 2.9-.8zm140.6 1.9c0 .9.3-.1.1-.3 0-.2-.1-.1-.1.3zm-145.5 2.4c0 .2-1.6-.1-2.4-.4-1.3-.2 1.2-1.2 1.6-1.5.2.4.8 1.7.8 1.9zm-64.1 1.5c3.9 1.8 10.4 2.4 11.2 4.1-5.1 1.7-13.1 1.6-19.8 2.5 0-2.3 1.1-7.7 2.6-8.6.1 0 2.8.9 6 2zm-47.3 6.4c1-.1.5 1.6.5 2.3-.9-.7-2.6-3.1-.5-2.3zm5.6 1c-.3.3.2 3.4-.7 2.8-.8.3-.8-3.8.2-3.2.5 0 .6.1.5.4zm5.9 1.5c.7 2.5-.3 1.6-2.3 1.8 0-.8-.1-2.5-.1-3.3.6.1 1.7.2 2.3.3l.1 1.2zm47.7-1.3c-.2 1.2-2.1 3-3.4 2.6-.8-.2 3-3.8 3.4-2.6zm-43.2.6c.7 0 .5 1.8.5 2.5h-1.9c.2-1.2-.5-3.4 1.4-2.5zm6.4.5c1.2-.2.7 1 .8 1.7-.8-.1-4.6.3-4-.5-.4-2.3 1.8-1 3.2-1.2zm30.8.7.4.7c-3.3.6-1.1-2.6-.4-.7zm-26-.1c.2.6.7 1.2-.8 1-1 0-1.1-.1-1.1-.7 0-.7 0-.7.9-.5.6.1 1 .2 1 .2zm21.8.2c.1.4-1.7.7-1.7.3-.3-.6 1.6-.9 1.7-.3zm-15.4.6.3.6c-.8-.1-3.6.1-3.4-.7-.1-.5 0-.5 1.4-.5 1.3-.1 1.4 0 1.7.6zm5.4.2.4.9c-.6-.1-2.9-.3-3-.4-.4-1.5 2.2-2 2.6-.5zm5.4-.3c-.7 1.3-.9 1.3-3.1 1.2-.1 0-.1-.1.2-.3.9-.7-.6-1.6 1.6-1.4 1.4-.1 1.4 0 1.3.5z",
fill:"currentColor"}),i.createElement("path",{
d:"M116.2 7c-23.6 1.8-33.9 26-37 47.5.1 3.7-2.6 15 3.1 15.2-.8-20.2 3.7-42.8 19.4-55.9-14.3 14.7-21.2 38.8-18.3 61.5 2.5.1 6.5-1.2 8.9-1.4-.1-.2-1.6-.9-2.1-1.1.8-19.1 2.4-31.1 9.8-45.7 3.3-6.4 9.9-16.6 16.3-18.1.5.1.4.2-.4.7-13.1 8.9-19.8 29-22.4 44.9-.2 3.9-3.1 20 1.4 19.8.5-5.5.2-12.2 1.2-19.1 1.8-16.5 11.8-43.1 26.4-46.8.3 0 3-.7 2.8-.7-2.3-.2-6.9-1.1-9.1-.8zm13.9 1.8c-.5.6-1.6.3-2.4.8-.9.8-3.5-.2-4.9-.5-10 6.4-15.4 15.1-18.6 28.6-1.9 10.3-7.8 29.7-1.5 37.8.9-20 3.5-53.1 22.7-64.9-13.3 15.2-21 36.5-18.4 57.9.9 6.6.2 8 3.4 7-1.9-21.6.9-38.5 11.2-55.7 1-1.8 1.4-2.2.7-.7-3.7 8.1-6.6 17.8-7.7 28.2-1.8 13.5-.9 17.8 0 28 3 5.9 2.1-3 1.5-8.6-1.4-13.7 1.8-30.8 7-44.3-2.1 11.6-3.1 25.8-1 38.3 2.3 10.5 2.4 23.3 9.3 19.3 2-7.7-5-26.7-3.8-35.6-.2-8.6 1.4-23.3 2.2-26.1-1.1 7.5 6.8 33.3 9.3 41.7.7 6.1 1.5 10 .3 18.1-.1 1.1.1 1.5 1 1.5 4.6-2.7 2.6-7 2.3-14.8-.5-10.9-5.4-18.5-8.1-31.4-2.3-9.3-2.2-15.8-1.2-23.2.6-1.2-1.8-.2-1.4-1.2.7-.9-1.9-.6-1.9-.2zm5.2 1.5c-4.8-.4 3.5 36.6 8.8 37.9 2.7-.6-.9-4.2-1.3-6.3-1-2.2-1-2.5-.7-2.9 1-4.8-1.2-12.4-2.8-17.7-.9-4.1-4.1-8-3.1-9.1 6.6 5.8 7.7 21.6 7.4 30.8 4.7 2.4 2.1-11.6 2.1-14.3-.7-6.4-5.2-19.1-10.4-18.4zm-4.8 6c-.2.5-.2-.7 0-.5v.5zm-3.1 1.9c-1.5 6.1-1.8 17.1-2 25.1-.9 6 3.8 26.3 3.9 34-5.4-16.8-8.5-44.3-1.5-61.3 0 .1-.1 1.1-.4 2.2zm-28.1 3.9c-6.5 12.6-11.5 23.3-10.9 39.8-.5 6.1 1.8 12.5-1.3 11.9-.8-.4-3.4 1.6-2.9.2.8-5.9 2.8-22.5 3.5-25.6 1.4-9.5 7.1-20.5 12.4-27.6 0 0-.3.6-.8 1.3zm39.1 2.5c.6 1.8 2 10.5.9 6.5-.1-1-3.5-15.6-.9-6.5zm176.1 47.6c-1.4.5-1.1.9-1.6 2.7-4.3 12.2-10.8 26-15.2 37.6-5.6 11.6-11 24.6-16.8 36.1.2.7 4.7 1.3 4.9-.8 1.7-2.5 1.3-.4 3.5-6.8 4.5-9.7 9.1-22.8 12.9-31.4 2.5-5.5 4-9.8 6.5-14-2.3 5.7-5.5 12.2-8.2 19.2-3.9 8.7-7.3 19.5-10.2 27.7-1.8 2.9 1.4 3.3 2.2.8 5.3-16.5 12.4-32.2 18.4-47 2.1-5.2 5.3-14.4 8.4-19 .5-1.2 2.5-3.2.5-3.4-4.8.2-2.1 2.3-3.7 3.4-1.6-.7 2.6-6.9-1.6-5.1zm-56.6 8.3c-1.4.1-3.3 4.5-3.9 5.7-.8 1.1-.4 4.5-.2 5.6 4 2.8 5.3 1.4 15.5 1.9 12.7 0 17 .4 27.7 1.4 5-10.2 8.7-14.2-7.2-13.2-11 .2-21.5-2.7-31.9-1.4zm11.5 3.1c9.5.4 23.7.9 29.4 1.6 0 .1-.4.9-.9 1.8-1.5 2.8-.7.7-3.9 1.4-4.9.3-10.1.3-14-1.3-1.2-.5-1.6-.6-4.3-.6-5.7.3-12-1.9-17.2-.5-.3.1 0-3.5 1.1-2.8.4.1 4.8.3 9.8.4zm-8.7 4.2c4 .7 13.6-.2 17.2 1.2 1.3.7 4.6 1.5 7.2 1.8 2.7.2 5.5 1.2 8.2.4 1.3 0 4.3-2.8 2.7-.5-1.8 3-7.4.4-11.8 1-8.3-.3-21.4-.8-27.5-1.3 1.1-3.2.9-3 4-2.6zm-8.6 12.9c-2.7.4-6.4.2-4.7 4.2 2 2.9 8.2 2.5 11.7 2.7.7-.7 2.1-2 2.9-2.6-.1-4.7-6.5-4.6-9.9-4.3zm2.2 3.5c1.9.3 4.8-.3 4.3 1-.8 1.6-7.8-1.2-8.4-1.3.7-.1 2.1.3 4.1.3zm-10.5 5.4c-3 5 4.9 6.1 12.2 7 3.4.1 4.8-5.8 1.5-6.8-2.8 0-11.2-1.2-13.7-.2zm4.1 2.4c.6.5 11.1-.5 9 1.1-.8 1.4-17.6-2.4-9-1.1zm-10.6 2c-1.2.2-3.3 5.4-2.4 5.8 2.8 1.2 6.4-8.5 2.4-5.8zm45.1.2c-4.3 2.7-3.9 5.9-6.7 14.3-1.1 3.5-1.8 6.3-3 10-1 3.1-1.5 4.2 2.3 4.4 3.6.9 6.6-14.4 8.8-16.7 1.8-4.1 4.1-7.9 4-11.2-1.2-.5-4-1.2-5.4-.8zm2.3 2.8c-.4 1.6-3.2 9.2-4.1 9.5.6-1.8 2.2-11.4 4.1-9.5zm-44.8 4.1c-2.2 1.2-2.8 2.1-2.2 4 .2 2.4 7.1.7 3.8-.8-3.1-1.6 1.7-4.4-1.6-3.2zm50.9 25.9c-3.6 1.3-1.5 3.9-3.5 5.4-4.9-2.8-3.1 3.8 3 0-.3 1.5-2.2 5.3-2.4 6.8.3 1.2 2.6.3 2.9-.1 1.5-1.4 4.2-13.1 0-12.1zm5.4.1c-1.8 1.7-1.5 7.6-2.6 10.1-.2 1.7-1.3 2.7.1 2.8 3.6-1 3.3-9.3 3.9-12.1.1-1.5-.6-1.1-1.4-.8z",
fill:"#1E1919"})))}},1467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.StorageEmptySpot=void 0;var o=n(1),i=(0,o.__importStar)(n(0));t.StorageEmptySpot=function(e){
var t=e.altText,n=e.inverse,r=(0,o.__rest)(e,["altText","inverse"]),a="dig-Illustration dig-Illustration-spot".concat(n?" dig-Illustration--inverse":"");return i.createElement("svg",(0,o.__assign)({
role:"presentation"},r,{className:a,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),i.createElement("title",null,t),i.createElement("path",{fillRule:"evenodd",
clipRule:"evenodd",
d:"M414.4 29.3c-20.4 1.4-46.3 2.3-67.2 3.3-33.3 1.3-44 4.2-74.1-.3-25-1.1-41.3 1.3-69.9 1.1-36.6.5-19.5-1.1-54.6-1-29 .5-30.6-2.7-53.6-.1-11.1 1.6-16 1.7-25.9.4-11.6-1.4-31.4-.8-43 2-6.8.7-2.5 2.7-3.6 28 1.2 33.3-1.3 41.5 3.5 45.6 23.9-2.1 62.1 2.5 88.3 3.9 13.5 1.2 57-.6 62.7.8 32.5 2.7 45-3.7 83.2-2.7 46.8.5 77.5-3.6 124.1-4.7 29.9-.5 53.8 1.1 83 .7 4-14.4.4-34.7 1.5-54.1-.3-18.2.6-18.2.5-21.2-8-.3-40.8-2.1-54.9-1.7z",
fill:"#FA551E"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",
d:"M236 143.5c-3.7 1.6-7.6-1.7-11.2 1.5-5.2 2.8-2.3 7.6-7 10-4.9 2.4-4.2 4.6-6.3 7.3-5.7 3.6-10.5 16.6-2.4 18.5 1 .1 1.4.4 1.8 1.1 1.9 3.6 7.5 3.6 11.3 2.7 3.2-1.6 2.9 5.7 9.2 3.5 2.3-1 3-3.2 6.2-2.9 3.5-.1 7.9-2.3 9.6-5.5 1.1-1.4-.3-8.8 2.6-8.2 7.7-1 10.2-14.5 4.1-18.1-4.1-6.8-8.9-12.7-17.9-9.9z",
fill:"#A25E3A"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",
d:"M249.4 170.2c-1.3-.5-5.1 10.4-7.5 10.2-1.7-.2-6 6-7.1 4-2.8-2.5-6 2.9-10.4-.2-2.7-2-3.5 1.7-4.5 3.5-3.2 3.8 10 8.6 11.7 9.4 6.7.1 12.7 11.5 12.9-3 .6-5.6.8-6.3 3.2-9.5 2.5-2.8 8.2-15.4 1.7-14.4zm19.2 81.7c-2.6 2.6-10.6 5.7-13.7 6-1.5 0-2.2.5-2.2 1.7 1.4 5.2 9.1 15.8 16.4 11.9 3.7-1.9 7.2-6.6 5.3-10.8-1.1-3.1-.2-13.6-5.8-8.8z",
fill:"#F4CBAE"}),i.createElement("g",{fill:"#1E1919"},i.createElement("path",{
d:"M222.6 166c4.3-1.4 1.6-8.9 3.3-10.9.9-.7 2-2.6 2-3.4-.7-.9 6.5-6.1 7.8-7.6-9.7-1.9-9.4 7.1-13.3 11.4-4 1.3-6.6.2-6.1 7 1 8.7-9.2 3.2-7.1 13.4.7 6.1 1.9 4.4 1.9-.5.2-5.4.2-5.4 4.6-7.3 5-.4 1.2-11.2 5.8-11.3 1.3-.2 1.1-.5 1.9 3.7.7 5.9-11 7.9-10.2 16.5-.4 2.2.8 6.1 2.9 5.5.7-.3.7-.6-.1-2.6-1.4-5.3 1.6-10.6 6.6-13.9z"
}),i.createElement("path",{
d:"M250.6 165.7c-2.8 4.1 2.8 0 3-1.5.8-3 1.1-12.6-2.5-14-2.4-1.4-2.2-1.4-2.4 3.3-.2 5-.5 5.8-3.7 8.4-9.3 6.3 5.9 13.6-10 18.8 3.6-3.4 1.7-10.4 2.7-14.6 1.3-4.7 7.1-3.4 6.7-8.6-.2-7.6 6.5-9.9 3.2-10.4 1.9-2.4-9.3-1.8-10.2-1.3-5.8 2.6-2.7 6.6-7 10.3-7.1 5.4 0 14.6-9.2 18.8-3.2 2.2-4.1 3.3-4.1 5.4-.2 2.7 2.4 4.2 2.1.6-.8-3.9 6.4-7 8.5-10.1 3.8 13.6-10.5 11.8-4.8 12.8 11.2-.4 3.7-12.7 9.8-17.9 3-3 5.5-7.7 5.7-11.6.6-1.5 2.8-4.1 4.3-5.2 2.3-1.4 4.8-2.6 2.2 0-3.4 2.4-.5 11.2-4.9 12.2-10.4 4.5 1.3 16.3-10.8 22.1-2.3 1.5-2.7 2-1.4 2 1.7.3 5.2-3.3 7.3-3.5 5.8-.5 11.6-6.1 9.1-12.5-2.3-7.2 7.9-4.8 6.7-17.2 1.4 3.5 1.9 10.3-.3 13.7zm-7.3-18.9c-10.4 4.2-5.2 8.5-8.8 13.9-1.8 2.8-4.5 5.1-6.1 7.7-.2-11.6 1.2-7.9 6.1-15.2.2-8.6 12.1-7.7 8.8-6.4zM21.6 39.8c.8 2.3 11.4-1.6 14-1.4 1.4-.2 19.6-.2 23.1.1 12.7-.7 30.9-2.9 41.7-1.3 34.8 1.5 48.6-1.8 91.6-1.3 48.9.4 43.8-2.1 88.9-2.3 54.3-.4 85.1-2.5 141.1-3 22.5.4 24.6-1.6 34.9.4.6.8 6.1 1.8 8.2 1.8l-.2 2.3c-.2 3.1-.2 14.2 0 36 .2 20 .2 19.5 2.1 19.9 1.7.3 3.1-1.6 2.9-3.6-.1-19 .5-30.3.7-45.4-.6-11.2 1.7-12.2-3-11.9-2.5.3-3.6 0-3.3-.9.2-.7-1.7-3.2-2.3-4-48.9-1.4-84.2.3-130.6 1.3-34.5 1.2-52.3-.4-85.8 2.1-22.2 2-17.8 1.3-55.1 1.6-46.9.3-55.3.4-60.4.8-20.3 1.9-49.3-4.4-67.6-.7-.4.1-7 .2-14.6.2-13.7 0-13.9 0-17.8.9-3.5.7-6.7 1.5-9.8 2.4 0 2.5-.1 4 1.3 6z"
}),i.createElement("path",{
d:"M20 46.1c1.9-.2 2 1 2.5 2.4 63.1-.1 128.9.1 190.1-3.9 33.8-.8 88.2 1.7 118.6-.1 47-2.5 86.1-8 131.1-7.2.8-.3 3.6-.5 1.1-1.6-.6-.3-1.1-.8-1.1-1 0-.4-.9-.5-7-.4-49.6.1-74.5 4.4-129.6 7.5C237.5 40.4 100.3 47 20 46.1zM460.8 54c-4.5-.4-18.7 1.6-25.7 2.6-19.7-.2-44.6-.3-64.3-.3-32.2-.2-34.4 1.5-60.4 4-18.1 4.5-92.2 2.1-114.2 3.8-21.6 2.2-51.8 1.3-72.9-2.2-28.1-1.8-57.8 1.8-86.5 4.4-2.6.1-13.5.7-14.7.7-.7 0-.7 0 .2.9 1.8 2.4.5 1.4 7.2 1.5 41.5-3.6 86.4-8.2 120.7-1.8 41.2 1.4 40.1-2.1 93.2-1.5 68.7 1.3 67-6.4 125-7.4 32 .1 63.4 1.7 92.4-1.6V54zM289.4 82.6c8.6-.1 36.6-1.2 44-.6 19.9 1.9 43.1-2.8 61.7-4.6 7-.7 16.2-.8 36.7-.8 18.5-.6 24.4 1.7 23.4-1.9-1.3-4.3-40.4-1.3-50.5-1.9-22.7.5-48 7.8-71.8 5.3-18.7-.9-54.2 0-72 1.1-17.5.4-45.2.8-63.2 1.3-30.6.2-11.8-2.2-46.1-1.9-45.2 1.4-82.8-1.6-121.7.5-.3 1.5.1 3.1 1.1 4.3 42.7.3 75.4 1 119.9-.5 38.7-.7 13 1.4 46.6 1.4 29.7-.4 63.3-.8 91.9-1.7zM25 87.5c-1.9.6-1.9.5-2.1 4.3-.6 9-.6 8.3.1 9.3.6.8.7 1.4.7 3.8-.2 3.7.3 5.5 3.8 3.3.2-4.6.4-9.3.6-14.6.1-7.3.3-7.1-3.1-6.1zm234.9 12.9c1.3-3.5 2.2-5.7-4.5-5.9-6.2-.7-6.5-.7-9.2-.4-4.8 1.1-19.5-1.5-17.9 6.9.6 1.3 2.6 1.5 16.2 1.3 13.2-.3 14.3-.4 15.4-1.9zm-4.5-.8-.4.8c-2.6-.7-19.4.4-20.6-.9.1-3.2 4.9-1.6 7.1-1.2 2.2.6 8.3.9 11.5.5 1.9 0 3.2-.9 2.4.8z"
})),i.createElement("g",{fill:"currentColor"},i.createElement("path",{
d:"M256.6 305.4c1 2 12.9.1 16 1.3 11.5 2 36.5.9 48.6-.5 21.7-.1 55.1-1.1 77-1.3 4.9 7.7 13.7 25 17.9 31.6 15.3 20.1 28.2 39.8 38.9 59.2.3 1.3 1.2 2.4 1.9 2.4 1.3.4-.1-4.2.2-4.8 0-2-2.8-7.2-6.3-11.4-4.7-5.6-8-13-13-19.8-11.1-15.8-21.9-30.2-30.7-48-.8-2.4-5.7-8.2-5.1-9.7.9-.4-.1-2.5-1.2-2-1 .2-1.6-.2-1.6-1.1-.4-.9-1-.7-1.4-2.7-.5-1.7-.8-2.1-1.2-2-8.8-58.7-3.1-118.2-4.4-180.2.1-5.1 0-9.4-.1-9.5-3.5 0-3.6-1.4-3.3 5.9.5 3.3-1.2 21.3.4 21.7.4.1.5 1.7.4 11-.7 39-2.4 68.8-.3 105.9-.3 15.1 4.5 36.9 2.7 45.9-1.2.4-1.5 2-.4 2 .4 0 .6.2.6.5 0 .8 1 1.7 1.6 1.5 6.2 1.4-23.4.6-22.1 1-18.5 2.1-44.3-.2-63.7 2.2-10.4 1-30.4 1-36.6.1-6-.8-14.8-.4-14.8.8z"
}),i.createElement("path",{
d:"M499.6 463.5c-1.4-1.9-7.4.4-12.3-.1-3.1-.3-20.1 1.6-19.7.2 2-5.2-1-6.1-.8-12.3 0-2.3-.1-2.6-.6-2.8-1-.3-.8-1.3.3-1.5 3.7-3 .2-25.3 1.1-43.7-.3-23.4.2-26.4-.8-35.9-2.2-35.5 2.3-110.7-.4-147.8-.4-4.3-.5-14.2-.3-70.5-.5-31 2-43.1-3.5-38-2.2 37.4 2.8 122.3.1 171.5-2.7 60.8 2.3 110.2 1 173.1 0 4.6-.1 8.4-.2 8.5-3.3.2-61.6.2-75.2.2-41.3 4.4-87.1 4.4-128.1 3.8v1c-.9 3 8.9 2 10.9 2.6 7 1.6 8.2.9 16.2.3 11.6-.7 11.1-.6 33.6-.6 29.4-.1 36 0 59.1-1.9 19.1-2.1 98.6-1.1 119.7-2.6.2-1.1.6-2.6-.1-3.5zM249.8 114.1l-.1-2.9c-.7 0-3.1-.4-3.2.2-.2.6-.9 8.6-1.1 13.6-.5 8.2 1.1 12.5 1.3 19.9 0 1.5 2.2 3.2 3.1 2.5.6-.5.6-2.5 0-3.6-.9-1.7-1.6-7.8-1.6-13.1-.4-5.9 1.8-11.5 1.6-16.6zM154 468.9c-8.2-1.3-34 2.6-43.3 1.2-13.6.1-53.1-.9-61-1.8-1.1 0-6.1.1-11.1.1-8.9.1-12.9-.2-12.5-.7.4-.8-1.7-6 .1-5.5 1.1.1-.9-.9-.4-1.3.3-.5 0-6.4.6-6.7.5-18.4-1.6-7.8-1.2-37.8-.6-82-.5-109.5 2.3-172.4-.5-25.2-2.9-55.4-1.7-85.5-.1-4.5 1.2-47.1-.1-46.9-.5 0-1.3-.5-1.7 0-4 44.1.5 99.7-1.1 144.5-1.7 29.8-1.2 28.5-1.3 78.7.1 94.3 0 119.8-.6 123.2-1.1 5.8.7 3.1 1.9 5.5-1.2 2.8-1.5 4.2-1.4 6.2-3.2-.2-9.1-.9-10.7-1.4-4.4-.7-10.8-4.2-10.8.4 1 5.1 1 4 6.7 5.1 20.7 2.9 37.4-4.4 58.5-2.1 3.5.1 106.8 3.5 88.8-2.8z"
}),i.createElement("path",{
d:"M183.2 306.5c-5.4-3.1-22.6.8-29.7.6-14 1.3-27.7-.4-39.5.5-.9-26-2.2-54.3-3.7-80.3-1-32.5.1-47.6.3-80.1.2-28.8.3-26.7-1.9-26.7-3-.3-.9 11.7-1.7 24.7-.8 44.5-1.2 55.9 1.6 104.5 2 17.5.4 45.3 1.6 59.4-4.5 5-5 7.4-11.9 13-3.2 2.6-4.3 3.8-7.4 7.9-4.3 6.2-13.8 13.8-20.9 20.9-13.9 14.7-27.1 24.5-39.4 39.4 3.4 2.9 9.2-6.8 12.4-9.5 10.3-11.8 21-18.4 30-29.4 9.7-8.6 20.5-20.4 27.7-28.2 4.4-3.8 10.4-9.3 12.6-14.2-.2-1 .2-1 1.7-.1 6.2.6 65.8.8 68.2-2.4z"
}),i.createElement("path",{
d:"M258.2 451.4h-3.5c-.5-11.8-4.8-26-4.2-38.6-.2-15.7.9-4.9.8-20.5 0-8.6.1-9.7.7-12.5 1.7-7.3 2-11.1 1.9-22.3-.1-5.7-.3-11.1-.5-11.9-2-7.8.3-20.6-.6-29.7-.4-13.1-1.2-11.3 1.4-14 0-5 0-19.7-.5-22.2-.5-5.7 1-13.6-.9-19.4 4.9-2.2 16.8-3.7 18.5-8.6 0-.7-.5-.9-1-.3-1.1 1.4-7.8 2.4-10.1 3.8-1.9.9-3.2 1.3-4.8 1.5-.6-1.5-1.6-3.5-2.7-4.5-3.8-5.7-1.9-13.9-7.9-20-1.9-2.4-2.4-2.7-3.5-1.8-1 .8-1 .8 1.6 4 1.8 2.2 4 6.2 4 7.2 0 .3-.7-.5-1.6-1.7-3.2-4.3-3.6-1.6-.5 2.5 2.9 3.6 4.4 7.3 4.9 11.4-1.3 1-1.5.8-.4 5.7 1.2 11.5 1.7 29.7 1.5 41.5-9.5 4.2-23.1-3.1-35.4-5.9-11.6-3.5-13.9-8.5-24.3-9.3 1.1-4.1 2.9-12.6 4.2-16.9.8.8 1.1 1.5 2.6 1.2 3.6-.7 1.6-3.6-1.1-8-2.4-3.7-6.5-11-6.4-14.6.4-4.6 1.9-7.5 1.7-13.6-.2-8.3 3.3-15 1.8-22.8-.7-3.4.7-8.7 1.6-12.1-.7-1.6 7.7-9.5 8.9-10.5 3.8 7.2 11.8 11.5 18.7 17.8 4.5 3.9 4.5-.4-3.2-5.4-6.4-5.4-19.6-15.2-4.8-10.2 4.7 2.3 8.8 6.1 12.6 6.9 6.5 3 17.1 7.5 20.5 9.2 1.5 1.3 2.7-.7 4.4 2 5.1 6.3 7.8 14 10.1 21.3.6 5.3 3 9.8 5.4 15.9 1.4 4.1 1.4 5.8 3.9 2.2 1-3-1.5-4.9-3.2-9.3-4.2-8.4-2.3-8.7-5.7-17.7-2.8-11.5-8.3-28.4-9.2-39.2-.9-6.7-.2-6.7-3.1-6.4-.5.1-.6.7-.6 5.3 0 7 .3 8.6 4.5 22.3.7 3.5 3.4 8.2.4 5.1-2.1-2.2-2.8-2.5-5.8-3.4-4.7-1.2-4.8-2.7-7.7-4.8-1.2-.8-5.9-2.5-10.2-3.8-5.4-.7-8.8-6.8-13.3-6.4-1.2.3-1.5.3-2.5-.3-11.9-5.5-23.4-.4-24.4 15.5-.7 7 2 11.8-.6 19.6-1.6 5.2-.5 12.8-2.4 17.6-1.9 5.9-1.4 9.3 2.4 17.2 2.3 4.7 2.3 6 1.4 9.6-.9 2.2-4 15.2-4 16.9-.1.7 1.4.7 1.2 1.4-1.9 7.3-5 17.5-5.3 24.8-1.8 10.8-1.6 27.7-2.4 40.8-.3 13.6-4 22-6.2 35.8-4.8 20.7-6.5 40.4-12.2 55.9-1.6 3.1.3 10.1-1.2 11-1.2.3-.6 2-1.2 2.5-.6.4-1.6 2.8-1.6 3.9-.9 3.3 9.1 5.5 10.3 7.4 6.7 6.5 21.1 2.3 20.6-8.3 6.4 1.5 6.8-4.6 7.9-9.6.4-3.9 2.3-4.3-1.6-4.4.1-.6 3-10.3 3.7-12.6-.1-6.3-.4-13.1.7-18.6 1-10.6 3.3-21.2 6.9-32.1.3-1.4.5-1.9 1.1-2.1 1.3-.1 1.8-5.9 3.2-7.7 3.8-5 1.6-17 4.9-23.4l1.3-3.3c2.6 9.3 3.4 14.6 3.4 27.9.5 14.4-2.9 13.1-1.1 24.9 1.3 8.2-.6 25.1 3.2 36.9.8 3.3.8 3.8.6 10.3-.5 11.6.6 12.5 1.3 18.1 0 3.1.5 4 2.7 5.1 3.2 2 14.1.5 16.2-1.9 6.1-4.8 16.4 1 15.4-10.2.2-4.5-.2-4.2-1.6-7.1zm-5.4 7.7 2.4-2.3c.4 3.4.1 5.7-4.2 6.1-7.9 2.3-.6-1 1.8-3.8zm-67.1-141.7c.3-2.4 2-15.2 2.5-15.6 11.9-5.2 11.7-8 1-3.9-.2-.2 2.6-10.8 2.8-10.8.1 0 1 .2 2 .3.6.1 7.1 2.1 5.3 2.8-2-1.1-.5 17.9-2.7 18.2-2.1 3.3-1.8 7.4-6.8 8.5-4.1 1.7-4.4 1.7-4.1.5zm-1.3 152-1.8 1.4c-4.7.3-7.9-.1-11-3-2.5-1.8-6.5-3-8.6-5.1-.2-.6 1.4.1 4.4 1.8 7.7 6 23.2 1.3 17 4.9zm2.5-7.3c-.8 1.1.3 4.1-1.3 3.8-2.2.2-9.2-.2-11-1.3 1.5.8 13.8-3.9 12.3-2.5zm41.4-1.4c0-5.9.3-21.9-.8-23.8-1.7-6.9-2.5-13.4-2.7-22.5.3-10.2-2.2-12.8-1.6-20.3 3.4-13.1 2.6-37.8-2.4-49.9-1.8-5.8-.2-9.7-4.1-16.3-2.6-5.5-3.1-7.1-3.9-13.8-1.5-7.2.6-9.9-4.4-9.6-.7 23.7 5.7 19.5 7.5 34.7l.3 4.3c-3.4 7.9-5.5 12.9-5.1 20.3 0 4.8-.4 6.4-2.3 10.1-1.4 2.7-2.6 7.8-2 8 .4.5-6.5 20.1-6.3 20.9-.8 6.3-3.7 17-3.1 24.5.2 5.1.2 5.5-.6 8.4-2.5 9.9-6 14-6.9 21.6 0 2 0 2.1-.9 2.3-7 2.8-14.7 3.2-21.2-1.5-.6-.9-2.4 1.7-2.4 2.2 0 .5 0 .5-.3.1-1.3-3.4 1.7-4.7-.1-8.5-1.5-7.8 5.9-18.9 6.6-28 4-22.7 2.2-13.4 6.2-29.2 4-13.9 2.7-15.9 4.1-27 3.1-19.1 2.6-29.8 3.3-47.6 2.6-.3 8.8-3 10.7-4.3.5-.4 2.1-4.9 2.1-5.8 3.3-3.1 2.5-13.5 3.9-18.9.9 1.7 19.2 7 15.6 7.1-3.5 1.2-.8 18.4 3.2 19.2 2.4 1.7 4.6 3.4 6.8 4.9 2.5 2.3 10.2.4 12-2.3 1.7-1.8 2-2.8 2.6-7.5.1-2.9 1.4-5.1.9-6.8-1.6-1.3-4.1 3.7-3.6 6.2-1.7-1.1-3.1-1.8-6-3.1-5-2-9.5-6.5-14.2-6.6-.4-5.7-.7-3.5 4.4-3.5 1.8 0 2.4.2 5.5 1.8 4.8 3.1 18.3 4.9 20.5 3.6.4-.3 1-.5 1.3-.5 1.2 3.7-.4 24.7-.5 28.6-.6 12.2 2.2 27.9.1 39.5-1.3 7.7-4.1 24.8-2.2 31.4.4.7.4 1.2 0 4.5-1.5 12.1-1.4 14.3.5 24 1 8.3 3.4 16.7 3.1 24.5-.9 2-4.5 3.9-6.6 6.6-4.4-.1-9.7 0-14.3.3-.8-.6-2.1-1.7-2.7-2.3zm-9.1-156.3c6 3.3 13.3 8.6 20 9-.5 3.5-2.3 8.8-7 8.4-1.4.9-6.5-3.3-9.4-5.5-2.6-1-3.2-6.1-3.6-11.9zm23.2 161c-.1.1-.4.1-.6 0-.7-.2.9-.3.6 0zm12.7-.5c-4.2.8-10.3 1.1-12.8 3.4-3.6 2.4-12.8 2.1-13.3-2.9 2.3-.3 6.9 2.2 10.4 1.8 2.9.7 22.6-7.9 15.7-2.3z"
}),i.createElement("path",{
d:"M205.2 192c-2.7-.7 1.6 10.2 3.8 11.1 5.9.8.2-5.3-1.7-9.4-1-1.4-1.3-1.7-2.1-1.7zm4.8 28.3c-2.3.1.8 5.4 1.6 9.3 3.3 7.8 3.5 12.6 7.7 13.4.3-2.4-5.5-13.5-6.7-17.8-1.7-4.8-1.7-4.9-2.6-4.9zm-11.3 32c-1.2 4.9 22.9 16.4 29.2 23.4 3.5 4.1 6.5 2.8 3.9-.7-.6-2.8-23.6-15.3-33.1-22.7zm44.3 25c1.3-2.7-16-13-19-12.3 1 2.9 14.3 8.9 15.5 11.4 1.9 2 3.1 2.3 3.5.9zm-44.5 96.1c-3.8-5.5-4-5.4-6.5-12.7-2.2-6.2-2.3-7.5-3.9-5.7-.2.9.6 7.3 1.3 10.3.5 2.3.7 2.5 5.5 10.2 1.6 2.6 2.9 4.8 2.9 5 0 .3-.9 1.4-1.2 1.8-2.5-1.3-5.2-2.1-6.9-3.9-3.7 7.8 21.9 9.5 8.8-5zm33.6 7.5c1.1-1.1 7.3-7.5 6.8-9.6-4.4-2-6.6 4.1-9.3 6.5-4.3 3.8.2 3.8 2.5 3.1z"
}),i.createElement("path",{
d:"M190.8 373.1c-.8-1.3-4.5-2.3-5.1-1.4-.8.8 6.7 5.6 5.1 1.4zm39 18.5c0 1.9 18.1-8.4 14-8.1-1.3-.2-1.5-.4-3 .8-1.7 1.4-11.5 6-11 7.3zm7.9 3.9c-2.9 2 3.6.9 3.2-.4 0-.5-2.1-.3-3.2.4zm4.7 69.9c-.1.1-.4.1-.6 0-.7-.2.9-.3.6 0zm-28.8 3.5c-2.1-.9-18.8-2.6-21.3 1.1.1 1.2-1.6 1.2.1 2.1.9.2 1.4.2 14.4.2h9.3c-.3-1.8-.3-2.8-2.5-3.4z"
})))}},1468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TrashEmptySpot=void 0;var o=n(1),i=(0,o.__importStar)(n(0));t.TrashEmptySpot=function(e){
var t=e.altText,n=e.inverse,r=(0,o.__rest)(e,["altText","inverse"]),a="dig-Illustration dig-Illustration-spot".concat(n?" dig-Illustration--inverse":"");return i.createElement("svg",(0,o.__assign)({
role:"presentation"},r,{className:a,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),i.createElement("title",null,t),i.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"
},i.createElement("path",{
d:"M276.5 351.5c-11.2.8-37.8.1-49 1.4-14.8-.3-39.9 8.2-46.8 9.7-11.3 2.9-18.1 1.1-30.8 8.5-23 8.3-43.1 32.2-44.5 56.9-.9 11.8 7.1 28.9 14.6 37.6 7.5 9.1 24.4 16.7 36.4 20.5 32.9 11.2 43.1 13.8 83.9 13.9 48.1 0 98.6 3 128.6-38.2 9.1-11.8 11.7-40.5 9.6-54.1-4.7-12.4-19.3-33.9-32.7-40.4-8.1-3.8-19-7.3-26.8-8.1-9.8-.2-10.2-5.2-19.5-6.7-7.3-1.5-13.5-1.8-23-1z",
fill:"#14C8EB"}),i.createElement("path",{
d:"M228.1 42.8c-13.8 1.3-30.3 1.6-42.2 3.3-27.7 4.5-82.2 15.4-98.9 24.5-12.5 6.8-26.3 19.1-30.5 32.7-1.2 8.2 3.6 15.2 10.5 22.2 5.8 6.6 16.3 11.4 19.5 13.4-.1.7-4 14.1-4 14.7-1.4-3.4-5.8-7.4-5.4-11 .6-3-1.2-2.8-3.3-3.1-2.5-4.4-5.2-11.7-8.4-9.8.5 2.2 3.4 9.4 4.7 10.5 1.2 1 1.8 1.8.7 4-2.8 4.8 2.3 9.9 4.8 4.5 2 3.3 3.9 6.6 5.7 10.1-8.7 34-4.9 44.6 2.9 5.1 2.1 3.4 6 9 8.8 13.1-1.3 6.3-3.4 15.8-4.6 22-1.8-2.9-4.2-6.1-7.1-4.3 1.7 1.7 5.4 7.8 5.5 9.6-2 8.6-5.6 24.5-7.1 33.2 0 1.2-.5.4-.8-1.3-1.6-7.6-4.1-18.4-4.9-23.7-2.8-20.9-7.1-37.9-10.2-58.5-2.4-14.1-2.1-27.4-7-39.5-1 0-1.3 1.1-.8 3 .7 3.8.3 8 1.5 11.8 1.4 13 2.9 28.5 5.3 41.6 4.8 25.4 6.3 50 13.2 76.5 5.4 23.2 7.1 50.3 10.6 74 6.2 35.8 7.3 63.2 14.3 99.5 1 4.7 2.2 14.2 2.2 16.9-.3 3.4 2.9 1.3 4.3 0-6.3-39.1-11.2-79.8-16.6-119.8-3.3-22.4-5.4-59.1-10.5-76.3 6.4-4.9 7-20 10-30.7 1.6.8 5.2 9.5 7.2 12.5 3.1 5.6 2.9 4.1 1.9 11.6-.6 4.7-3.1 25.5-4.5 27.2-.7-.1-1.8-2.9-2.5-3.5-.6-.9-.9-1-1.2-.7-2.3.5 1.6 6.9 2.4 9.2-2.6 9.1-6.4 24.2-4.9 26.1 3-1.7 4.6-7.7 7.9-19.4 2.4 4.8 7.3 14.4 9.7 19.2-1 .9-5.6 21-6.4 16.7-.2-.7-4.8-7.6-4.7-8.4.2-.7-1-.6-1.5.1-2.2 0 6.4 13.5 5.5 15.3.2 2.2.2 2.2 1 2.2 4.1 4 8.2 16 13 22.7 1.2 2 2.2 3.9 2.2 4.1.1.8-3.1 18-4.9 23.4-2.9-3.8-5-8.4-5.6-11-2.4 3.1.7 8.4 3 12.9 2.5 1.2-1.5 9.1-1.7 11.5.2 5.3 3.6-2.4 5.1-5.6.4 0 9.2 14.8 9.2 15.4-1.7 7.8-3.9 17.8-6.5 25.2-1 2.9-1.8 5.7-1.8 6.4-.1 2.9 5 .7 5.4-1.7 2.8-6.3 5.4-16.7 6.9-23.5 16.1 26.8 14.3 13.2 5.5 44.3.1.9-7.1-9.6-8.9-10.8-.9.2-3 1.8-2.4 3.1 2.2 8.6 22.3 28.9 30 36.9 4.8.8 5.8-1.4 1.4-6.6-1.2 1.4 5.3-22.8 5-22.7 2.7 2.6 12.9 14.7 17.8 19.8-3.9 8.9-1.2 14.3 2.8 3.3 6.4 7.1 12.1 16.3 16 15.8 3.2-.7-1.6-5.3-1.4-7.1 8-16 0-24.7 15.9-3.1-1.2 4.4-.6 15.4 2.2 6.3.4-1.2.8-2 .9-1.9.5.6 4 5.4 4.9 5.7 1 .5 1 .5 1.9-.5 2.8-2.1-2.8-7.6-4.7-11.4 7.7-22 1.3-17.9 19.3 2.8-.4 1.3-1.4 4.6-1.4 5.4.5 4 3.7.7 4.5-1.4 6.5 8.6 8.6 1.1 2.3-6 3.2-9 8-27.5 9.2-31.9 2.6 2.5 14 14.9 16.4 17.7-1.9 6.4-5 14.2-7.4 19.5-1 3.1-9.4 16.3-.7 12 4.8-5.4 7.7-20.9 10.5-28.1 3.2 2.7 7.9 9.7 11.2 13.4-2 4.8-3 11.9-5.3 15.6-.9 1.3-.8 1.8.4 1.8 4.8.1 5.4-10.4 7.3-14.5 1-.3 4.3 2.7 5.2.9 1.7-1.3-2.4-4.8-3.2-6.5 14.2-34.5.8-37.8 25.7-7.5-1 3.8-4.2 10.2-5.2 13.5 3.9 1.6 3.4-1.6 5.7-7.6.6-2.1 1.3-3.6 1.4-3.5 1.5.7 12.6 20.6 15.4 15.2 1.8-.7-3.3-6.4-2.2-7 3.3-4.5 7.1-18.6 9.3-23.9.3-.7.5-.5 3.5 2.8 2.1 2.4 3.1 3.7 3 4.1-.9 2.6-3 8.6-4.6 11.9-2.8 4.9-2.2 8.5-.3 5.4 1.3-3 6.5-12.2 7.7-15.2.8-.1 1.5.9 2.5-.1 2.4-1.2.9-3.7-.1-5.6 2-3.5 9.1-18 10.4-19.2.3 0 1.4 1.5 5.1 7 3.7 5.4 6.2 6.9 7.6 4.7 2.5-.5-6.7-13.1-9.8-18.3 6-14.3 9.1-25.5 14.8-38.9 3.4 5.2 10.6 15.3 12 14.6.7.2.9.5.8 1-.7 11-.1 12.5-3.5 29.6-.7 3.8-1.9 11.8-2.8 14-1.1 2.2.8 1.9 2.9 1 10.4-34.6 8-77.9 11.6-119.8 5-44.4 8.7-89.2 12.8-134.9 1-11.8 1-42.5 4-53 2.4-13.8 6-40.5 5.6-49.8.1-8.5-3.5-9.4-3.4-2.4-2.1 23.7-7.8 49.2-9.7 72.7-.9 36.2-5.9 79.1-8.1 116.8-5.9 41.7-6.9 77-8.9 120-.2 1.1-.3 2.2-.3 2.3-1.6-2.8-9.1-15.9-10.5-17.3 1.3-5 4.9-16.2 3-15.5-2.1.9-4.8 4.1-5.5 6.9-.6 1.6-1.2 2.8-1.3 2.7-1.6-2.5-6.5-8.9-8.1-11.3.2-1.8 1.1-3.4 1.8-6.5 1.2-4.7 3.9-11.4 5.4-15.4 7.7 8.5 5-1.6 2.2-6.8 2.8-8.9 5.6-13.8 7.8-23 .2-1.7 2.7 0 2.6-2.1.4-2.3-1.3-4.6-.2-7.1.3-1.1.8-3.6 1.1-5.5.5-3.2.5-3.4 0-4.8-1.7-4.8-3.8 3-4.4 5.8-2.1-4.8-7.9-14.5-10.1-18.8.4-3.8 6.3-27.3 6.7-26 1.9 3.6 5.4 15.6 9.2 9.7.3-1.8-5.7-15.7-6.6-21.1 1.6-10 6.1-24.9 9.3-34.9 1 2.1 1.8 4 3.6 8.5 2.5 4.9 1.7 8 5.8 7.2 2-5.5-5.1-16.7-7.3-22.1 3.3-12.6 6.3-26.8 9.9-38.2.7-2.8 2.2-3.1-.4-4.1-3.3-1.2-3.6 2.7-5.4 6-1.6 3.6-5.4 20.2-7.8 28.7-2.4-4.1-7.8-15.4-10.5-19.8 9.1-22.8 20.9-48.2 29.8-72.9-1.7-1.7-3.8.1-1.3-3.7 3.5-4.9.4-9.8-.9-15-1.3-6.8-13.1-12.2-19.5-16.3-9.7-7.2-24.4-12.2-36.8-15.4-20.4-7.7-32.9-7.4-57-7.8-25.4-.1-35.8-3.2-59.1-1.9zm36.2 4.6c9.6 2 37.6.9 48.9 2.6 18.7.7 28.7 7 45.4 11.7-.1 2.2-2.4 9.4-3.2 10.9-.7.3-4.2-5.6-5-5.9-1.1-1.5-2.6-.6-3.3.2 1.5 2.6 4.5 7.5 6.3 10.8-2.2 5.8-5.7 14.6-7.7 20.4C341 92.2 334 83.8 330 79.3c1.3-4.7 3.1-13.3 3.1-16.6.3-3.5-3.5-5.4-3.7-.8-3.7 13.8-.5 17.4-10.3 3.5 0-2.6 2.2-11.9-1.2-12.1-.8 0-.8-.1-1.5 5.6-.4 3.1-.6 3.6-1.3 4.1-.7.5-.8.6-.3 1.5.4.8.4 1.2-.8 5.5-6.3 21.9-2.5 20.3-15.2 2.2-1.8-3.7-3.9-4.4-3.3-6.7-.4 0-3.3 2.1-3.3 2.3 3.2 8.4 9.7 17.6 15.3 25.3-2 6.1-5.3 19.3-7.7 27-4.4-6-13.5-16.5-19.7-24 .5-5.8 12.9-39.1 8.1-38-3.5-.7-4.5 11.6-7.7 17.9-6.8 21.1-1.5 15.7-15.3-.3-3.3-4.2-3.8-5.1-3.7-5.9.5-2.7 2.1-14.9 1.3-16.1-3-3.5-4.2 11.3-5.1 12.5-1.6-2.1-8.4-9.6-7.3-9.9.1-.2.1-.3-.1-.3-6-.1 5.7 11.3 6.3 14-2.8 11.6-6.5 24.5-7.7 31.3-4-4.5-9.6-11.8-13.2-17.2 2-11.4 4.6-25 5.5-36.2-1.6.1-2.2-.5-2.9 1.8-2.5 7-4.6 18.7-6.8 28.4-.7-.8-7.4-9.4-7.5-12.2 0-1.2-.3-1.3-1.4-.2-3.6.8 4.1 12.7 7.8 17.8-1.5 7.2-4.6 20.7-5.3 25.6-3-3.7-7.6-9.2-9.9-12.2.7-10.9 5.3-38.4 6.1-39.9.5-1.6.3-1.8-1.3-1.6-3.3-1.1-8.7 28.5-9.7 35.1-1.2-1-2.6-3.4-5.9-7.2-3.9-4.8-5.9-7.3-8.3-10.8.6-2.8.5-12 .1-13.1-.3-.3-1.6-.1-2.1-.1-.1 1.2-.2 11.4-1 7.9-.1-.8-.7-1.4-.1-1.8.1-.5-1.5.1-1.9.6-2 2.1.9 5.9 1.8 8.3-1.6 10.7-2.9 25.6-4.2 35.6-2.4-1.9-16.2-18.2-18-20-1.9-4.1.7-8.8 2.5-18.3.7-5.4 4.6-11.4 0-11-1.4-.1-1.4 0-1.8 1.2-8.4 21.1-.9 30.2-16.3 9.8.2-.8.7-3.2.6-3.7-.2-.4-.2-.4-.8 1.4-.2.5-.4.8-.6.7-.5-.3-3.5-4.9-3.3-5.1-.1-1.3-2-.3-1.8 1.1 2.8 7.6 5.8 6 1.9 16-4.7 13.9-3.9 17.6-6.5 28.8-2.9-3-14.6-14.6-15.1-15.8.4-4.2 1.9-23.1 1.2-21.8-6.1-1.5-4.1 2.1-5.7 10.9-.4 3.2-.7 5.9-.8 6-.3.3-11.3-12.6-11.3-13.3-.4-1.7-3 1.7-1.1 3.9 1.3 4.1 9.7 11.7 11.7 17.1-.6 5.9-.9 7.8-1.7 11.9-1 3-.3 6-1.9 4.4-3-2.4-8.9-8.4-12.7-12 .5-5.8 2-17.5 2.6-23.4 0-1.1-.1-1.2-.9-1.2-1.2 0-1.5.3-2.4 3.6-1.3 3.7-2.7 12.8-3.4 16.9-2.5-2.1-14.9-12.9-14.4-14.5-.3-1.9-1.8 0-2.4 1 .3.8 1 2.4 1.4 3.2-1.9-1-4.6 9.8-6.3 15.6-.1-2.2-8-6.6-8-8.9-.4-1.6-1.1-1.8-1.4-.2-.8 4.8 5.9 8.1 7.5 13.2 1.3 2.8-.7 10.3.3 12.9.4 1.8 1.1 1.1 2.3-2.4.6-1.8 1.3-3.6 1.3-3.9 5.2 2.6 19 26.5 24.9 19.9-.5-1.2-7.6-5.6-5.8-7 .7-1.2 3-14.3 3.8-19.8 19.3 19.3 11.5 5.5 12.4 28.7.7 2.1.5 2.7 1.9 1.1 1.1-.3 3.2-10.4 4-13 1.1 1.5 12.9 11.4 12.1 13.1-.3 1-.5 3.1-.6 4.3 1.7-.4 2.8-1.5 3.6-3.1 3.4 2.6 13.1 11.1 12.9 11.6-15.3-3.7-36.5-8.3-51.2-11.2-10.4-1.3-19.9-7.2-28.5-12.4-2-1.3-13-10.2-11-12.5.2-1.4-.6-3.2-1.6-3.5-2.6-7.6 10.7-19.6 17.4-26 16.2-14.2 42.8-18.3 64.7-23.6 40.8-9.4 80.7-14.5 121.9-13.2zm99.1 16.2c8.8 3.2 18.4 10.3 26.6 14.9 10.3 7.8 5.9 3.8 10.5 13.2-4.1 9.1-8.6 13.1-14.5 18.1-5-4.7-10.1-10.1-13.4-15.5 1.5-3.4 2.7-9.1 3.8-12.5 1.3-2.8-.4-3-2.6-3.7-6.5 15.6 0 15.8-15.3-.7 1.5-4.2 3.7-12.9 3-13.9-.2-.5.7-.5 1.9.1zm-41.7 11.5c1.6 2.1 2.3 3.1 3.3 4.2-1.9 7.1-4.3 15.7-5.8 21.6-1.4-2.1-4.2-6.1-6-8.8 1.7-6.8 4.1-16.2 5.2-21.7.9 1.5 1.7 2.5 3.3 4.7zm-51.3 13c2.5 3.8 4.3 6.7 4.3 7.1-.4 2.9-4.8 18.7-5.5 24.6-.4 2.3-.8 4.2-.8 4.4-4.1-4-10.8-11.8-14.6-16.9.8-6.6 4.9-23.8 6.8-33 3.2 4.3 6.1 8.3 9.8 13.8zm-114-9.5c1.9 2.6 5.8 7.4 7.5 9.3.9 1 .9 1.4.1 6.7-1.4 10.1-2.5 16.5-5.6 29.9-2.7-2.7-8.2-8-10.9-10.7 2.4-11.4 4-26.8 6.9-37.9-.1-.1.9 1.2 2 2.7zm41.1 2.4c2.2 3 9.1 12 12.2 16.2.3 1.7-2.7 24-3.5 29.5.7 5.3-8.9-7.8-14.8-13.4 1.9-9.9 2.8-23.9 3.6-34.7 0-1.6 1.1.8 2.5 2.4zm163.9 6.5c2.4 2.8 4.5 5.4 6.4 8-1.7 4.9-4.9 12.3-6.9 17.5-.8 2.2-1.6 4.2-1.7 4.6-2.5-1.9-7.1-11.7-10.1-15.2 2.2-5.7 5.2-13.7 7.6-20.2 1.5 1.5 2.5 2.7 4.7 5.3zm-26.5 3.9c4.3 5.2 6.3 7.6 9 11-4.2 10.9-5.6 15.3-8.2 22.1-5.2-7.3-10.2-14.3-12.7-17.9 1.7-5 4.3-18.4 6.3-22.1.1.2 2.7 3.3 5.6 6.9zM96.5 97.5l5.4 5.3c-1.4 6-3.1 15.6-4 20.6-.3.1-9.7-10.6-13.3-15.1 1.4-6 3.2-14 4-19.1 2 2.5 3.7 4.2 7.9 8.3zm140.4-4.4c2 3 8.1 10.8 11.1 14.7-.5 5-3.7 14.6-4.6 19.6-.3 1.7-.6 3.1-.7 3-2.7-2.7-9-11.6-12.5-15.6.7-6.6 3.1-18.1 4.2-24 .2-1.8 1.2.6 2.5 2.3zm-64.8 4.5c3.1 3.8 11.8 14 15.6 18.4-1.9 8-5.5 21.2-6 27.7 1.1.9 6.3-17.7 8.6-24.7.1 0 1.7 1.8 3.6 3.9 2.2 2.8 9.8 9.9 10.8 12.2-1.9 6.4-5.2 35.7 1.8 6.8.6-2.3 1.2-4.2 1.3-4.1 6.4 6.4 25 25 26.9 19-1.1-.3-10-9-12.3-11.1 11.1-25.3-.6-32.4 18.9-9.4-1.1 3.3-4.4 12.7-4.6 14.7-.3 2.9.3 4 2 3.2.9.9 5.5-10.5 6.7-13.6 4.3 4.5 19.8 19.9 17.8 19.2-14.7 2.6-55-1.4-70.4-2.9-7.5-6.8-20-18.9-29.8-28 2-9.5 4.1-18.3 5.3-28.5 1.3-6.1-.2-7.7 3.8-2.8zm142.7 6.3 2.4 3.8c-1.1 5.2-5.5 22-6.8 25-1.1-.7-5.5-6.2-6.2-7.4-.5.6 6.4-24.2 7-26.5 1.1 1.1 1.8 2.3 3.6 5.1zm57.8-1.1c3 3.9 6.7 7.3 10.3 9.1-11 11.2-24.3 19.2-37.7 26.8-2-3-4.9-7.2-6.4-9.7 2.1-4.3 6.7-17.9 8.5-22.2 1.8 2.3 8.6 12.9 10.5 15.3 3.5 3.7 4.7 3.8 2.6-.6 3.5-4.9 6.4-13.9 9-19.5 1.6-4.2 1.3-1.1 3.2.8zm-89.4 2.4c5.5 6.4 10.3 12.8 15.6 20.1-1.6 5.9-7 17.5-8.4 22.6-.1.2-.8-.5-1.7-1.5-2.7-4.1-15.4-14.2-16.1-18.5 1.7-6.9 4.1-20.9 6.7-27.3 0 0 1.8 2.2 3.9 4.6zm-150.5 1.1c12.7 13.7 10.9 7.1 5.2 24.4-.7-.5-10.3-10-12.6-12.3 1.4-6.7 3-14.3 3.2-16.6 1.3 1.3 2.2 2.4 4.2 4.5zm86.6 3.2 4.6 5.6c-1 8.5-4.1 18.5-6.1 25.9-2.2-2.2-6.6-6.8-8.8-9 1.3-4.7 4.2-21 5.1-26.6.2-3.9 2 1 5.2 4.1zm173.6 3.1c-6.3 15.4-14.1 41.1-22 58.9-1.5-1.6-8.2-15.1-9.3-16.8 1.5-4.7 5.1-15.9 6.1-19 1.4-4.4 1.6-3.6 5.6-6.9 6.4-5.4 14.5-12.9 20.3-18.3.1-.1-.2.9-.7 2.1zm-131.2 11.8c2.7 3 5 5.7 5 5.9.2.7-4.5 20.3-4.9 20.8-4-3.9-9.9-10.9-14.8-15.5 1.6-6.7 3-13.6 5.6-21.9 2.8 3.4 5 6.1 9.1 10.7zm65.7-2.4 5.7 7.9c-7.1 11.8-5.1 22.2 3.2 4.4 2 2 4.6 4.7 7 5.4-5.9 2.9-14.7 5.9-20.6 8-.6.3-7-8.6-8.4-10.5 2.4-6.7 5.4-18 7.2-23.4.1.2 2.7 3.8 5.9 8.2zm-170.9 10.8c-1.6 8.8 1.2 13.1 5.2 2.3 2.3 2.9 26 23.1 22 21.2-6.2-.7-15.6-1.9-21.7-3.4-6.5-7-13.8-13.4-20.6-19.4 1-2.8 3.2-10.9 4.3-13.8 2.8 2.8 8.5 8.4 11.3 11.2l-.5 1.9zm151.8 4.1c1 .2-2.1 7.7-1.9 8.4 1 5.7 4.7-1 5.9-3.7 1.5 1.9 4.6 5.6 6.1 7.5-15.1 4.3-37.6 10.5-50.9 10-.2-.4-2.5-3.7-3.2-4.6 2.3-3 3.8-8.7 6.6-19.5 5.8 5 20 23.3 22.2 15.9 2.1-2.9 8.5-16.3 9.4-19.9-.2-2.3 5.8 6 5.8 5.9zm55.7-1.2c-.1-.1-4.9 14.5-5.1 14.3-1.6-1.3-3.6-6.5-6-3.1.7 1.7 3.7 6.1 4.5 7.9-2.9 9.1-5.9 21.7-9.2 30.5-.5 2.1-4.3-10.1-5.6-12.4-1.6-4.5-6.1-11.1-7.5-14.9 0-3-2.1 1.5-3.1.5-4 .7-9.1 22.5-11.6 27.8-.8 2.1-1.5 4.1-1.6 4.4-1.7-1.8-6.1-11.3-8.1-14.1-2.2-3.7-2.6-4.5-2.3-5 1.1-1.6-2.1.9-2.4.4-.3-.5-2.5-1.3-2.7-1-1.8 1.4-10.3 27.2-12.6 33.5l-3.2-6c-6-11.2-9.3-17.9-9-18.1.5-.3.3-.8-.3-.8-6.8 2.4 6.2 21.6 10.2 31.6-4.2 12.6-8.4 29.1-12.6 41-.2.6-1.9-1.8-12-17.2l-3.1-4.7c6-20.9 13-50 12.4-52.8-1.8-12.6-7.1 18.4-8.1 19.5-.9 3.3-7.5 26.3-7.9 27.7-2.6-2.9-11.4-15.6-13.9-18.8 1.8-12.1 8.3-31.1 7.4-37.5-4.3-1.9-3.4-1.9-5.1 4.4-3.5 14.5-6.5 26-6.8 26.3-1.2-1-9.4-15.4-11.6-19.8-.5-.7-4.3-8.1-6-8.4-.5 0-2 1.3-2 1.7 0 .5 8 17 10 20.7 1.6 3 6 10 7.3 12.4-1.7 7-5.5 21.8-7 27.8-1.2 4.1-3.3 11.1-3.6 11.5-.3.4-14.6-20.4-18.3-26.7 2.5-12.1 7.9-27.9 10.2-40.6 2-9.5 1.9-9 .9-9-2.8 1.4-2.8 5.9-4.6 11-2.4 8.8-6.7 22.7-9.9 33.2-16.8-26.1-10.8-15.3-7.7-44.8.5-2.7-.6-3.9-2.1-3.3-1.3 5.2-3.8 17.8-5.1 23.1-1.4-3.1-7.5-11.4-8.7-14.3-.4-1.4-2.8.2-2.7 1.4-.9.3 7.3 15.9 9.5 20.6-3.3 10.9-7.9 27.8-10.1 37.1-.2.9-.3.9-2.3-1.7-4.8-5.9-6.9-8.3-11.4-14.2 2.7-13.7 15.2-52.1 7.9-46.4-2.1 6.4-8.8 32.7-11.3 41.7-1.4-1.9-7-9.8-9.4-13.1 1.9-7.3 3.1-11.8 6.2-22.5 2-9.2 4.6-12.2.4-12.6-1.4-.2-1.5-.2-1.5.6-.6 4.3-7.6 24.2-8.7 29.4-4.4-6-11.1-16.3-14.4-21.7.9-3.3 2.9-12.5 1.6-12.7-.9-.9-1.4-.7-1.4.6 0 1.1-1.2 6.7-1.8 8.3-.2.7-.5.4-2.8-3-1.9-3.1-6.5-8.5-7.4-11.1 0-1-.3-1-1.2-.1-3.2 3.3 6.4 13.6 7.9 17.9 1.4 2.4 1.5 2.7 1.2 3.6-3.4 11-6.1 21-8.7 36.1-2.4-3.2-7.5-9.8-9.2-12.1-1.9-2.7-1.9-1.9.2-11.5 2.3-10.7 4.4-25.3 5.4-36.3-3.6 2-3 8.9-5.1 16.8-1.8 9.6-3.2 16-5.1 23.4-2.8-5-6.5-11.5-9.3-15.5 1.7-9.2 3.5-22.3 4.3-29.3-3.7-5.1-6.5 21.9-7.7 24.6-2.7-4.2-6.3-9.7-8.4-13.4.6-1.7 3-16.7 4-18.3 22.6 8.1 47.6 9.9 71.4 17.7 11.6 3.7 24.5 3.7 36 5.7 2.4.7 3 .6 2.3-.2-.4-.5-.3-.5 1-.3 4.4.5 16.1 1.9 20.8 2.3 47.4 4.9 104.2-4.5 143.3-29.7zm.4 33.3 4.3 8.7c-3.8 9.9-5.6 22.8-9.8 32 0 2.6-6.5-13.4-9-18.7 4.6-11.5 8.1-22.6 10.1-30.7.1 0 2 3.9 4.4 8.7zm-27.3 3c2.9 7.6 5.3 14.9 8 21.6-2.8 8.1-7.3 23.3-8.8 29.9-.5 1.7-.4 2.6-1.3 1-3.4-5.7-11.5-21.6-13-26.1.2-.9 10.4-32.7 11.5-35.1 1.1 2 1.8 4 3.6 8.7zm-30.5 4.6c2.1 4.7 9.4 20.1 9.4 20.9-3.6 10.6-8.3 22.1-12 33.3-3.7-6.7-6.4-13.1-10-20.3 1.8-5.5 6-18.1 7.1-21.8 1-3.7 4.5-14.2 4.6-14.1 0 .1.4 1 .9 2zm-165.9 16.6c4.5 6.8 4.9 7.5 4.7 8.4-1.6 7.2-6 23.6-7.8 31.4-3.4-4.2-10.1-11.8-13.5-16.3 1.9-14.3 3.8-24.3 7.3-38.4 2.8 4.9 5.2 8.7 9.3 14.9zm235.8-.6c3.2 6.6 5.2 11 5.1 11.3-2.8 9.5-8.1 27.3-8.9 35.1-5.6-10.9-9.9-19.1-12.6-25.2 3.3-6.8 7.8-26.5 10.8-32 .2.1 2.7 4.9 5.6 10.8zm-278.7-8.1c2.4 4.1 5.1 9.1 7.7 13.5-.5 5-2.4 16.2-3.4 21.3-.5 2.4-.6 2.6-1 1.9-.2-.4-1.8-3.2-3.5-6.3-4.3-7.7-4.8-8.7-5.2-9.3-.2-.4-.1-1.6.5-4.3 1-4.5 2.8-16.4 3.6-18.8.1 0 .7.9 1.3 2zm251.6 19.4c1.3 3.2 5.1 11.2 5.9 13.8.4-.1-8.7 21.3-10.3 26.4-1.7-2.7-5.3-10.2-7.3-14.2 4-15.1 6-22.2 9-30.4.7-2.2 1.5 2.2 2.7 4.4zm-156.3 2.2c1.5 2.9 7.7 12.6 8.6 15.1-2.4 9.2-6.4 22.1-8.1 30.7-.3 1.4-.7 2.5-.8 2.4-.7-.1-6.4-8.8-11.6-15.6 1.5-8.2 7.4-31.3 9.1-36.8.1-.6-.1-.9 2.8 4.2zm-78.8 3.9c2.8 3.6 5.1 6.7 5.1 7-.9 6-3.6 21.2-4.6 25.8-3.5-4.1-6.6-10.6-10-15.2 1.2-6.1 3.9-21.5 3.8-23.1.2-3.1 2.6 2 5.7 5.5zm206.1-2.7c0 1 8.5 17.8 12.8 25.9-2.3 6.4-8.4 22.9-10.7 29.3-.4.5-5.1-8.4-8.4-14.2-1.3-2.5-5-8.5-6-11.1 0-.9 4.1-12.4 7.1-20.3 1.9-3.3 3.9-14.9 5.2-9.6zM154 212.7l4.4 6.3c-2 7-5.7 22.9-7.4 29.6-2.1-3-7.5-8.5-9.3-11.3-.6.9 6.6-27 7.3-30.5.4-1.7 2.4 2.6 5 5.9zm90.3 4c4.7 6.5 8 11.4 10.8 15.7-3.3 11.5-7.8 27.5-12 39.2-.2-.2-4.6-7-6.9-10.6-1.1-1.8-6.1-8.8-6.4-10.5 1.7-5.1 5.6-18.2 7.4-25.3 4.6-16 1.6-15.5 7.1-8.5zm52.1 11.7c1 2.1 4.6 8.3 5.3 10.1-.7 2.8-9.6 26-11.9 32.1-1.8-2.7-8-9.6-10.3-13.3 0-.2 1.1-3.4 2.4-7.2 2.8-7.7 9.2-29.6 9.7-31.9.7 1.4 3.8 8.3 4.8 10.2zM127 225.9c3.6 4.4 7 7.9 9.6 11.7-.7 5.2-5.4 23.2-6.8 30.3-1.9-2.9-8.9-14.4-11.9-19.3 2-8.7 4-21.1 5.3-26.7.2-.1 1.9 1.8 3.8 4zm232.7.6c3.5 7 8 15.5 10.8 22.6-1.8 7.8-4.6 15.9-6 23.7-1 8.8-2.3 1.5-8.9-10.2-3.2-6.5-5.8-11-7.9-14.7 0-1.3 9.1-26.1 9.5-26.1.1.1 1.3 2.2 2.5 4.7zm-195.5 0c1.7 2.1 9.7 12 11.1 13.9.7 1.9-4.5 21.7-4.9 25.5-.7 3.5-1.3 6.4-1.4 6.3.5 1-10.7-13.7-14-18.1 1.1-6.3 6.5-29.6 6.9-30.3.1-.1 1.1 1.2 2.3 2.7zm44 4.2c1.8 3 9.6 14.4 15.3 22.8-10.8 37.3 1.5 41-26.3 6.5-.9.8 5-25.4 8-33.7.1 0 1.5 2 3 4.4zm-98.8 12.6 4.4 7.4c-2.4 10.7-3.3 27.2-6.1 36.3-1.8-3.1-7.1-13.2-9.7-18.1 3.2-9.8 4.6-21.1 5.8-33.3.6-1.9 2.8 3.7 5.6 7.7zm232.1 6.2 1.2 1.8c-3.3 9.4-6.3 21.4-8.7 30.8-1.7-2.3-7.1-11.1-9.2-15 2.8-8.3 7-20 10.4-29.4 1.5 3 5 9.9 6.3 11.8zm-78.9-5.6c12.6 20.6 12.9 8.5 4.8 36.7-6.8 18.9-2 23.1-12.6 7.9-.3-.4-7.9-10.9-8-11.4 0-.2 1.4-4.7 3.2-10.1 3.9-11.3 6.4-22 8.9-28.7.1.1 1.8 2.6 3.7 5.6zM144 245.2c4 5.7 7.1 6.8 5.3 12.2-1.6 8.1-3.4 18.2-4.7 27-.5 3.5-1 6.4-1.1 6.4-.5-.1-7.9-12.2-10.1-16.3 1.8-9.8 5.4-23.7 7.4-32.9 1 1.1 2.4 2.7 3.2 3.6zm164.4 4.7c3.7 7.1 7.2 13 11.5 20.2-1.9 5.1-6.9 22.3-8.8 27.1-5.4-6.7-12-14.9-18-22.3 3.8-9.1 8.4-21.6 12.4-29.9.2.1 1.4 2.3 2.9 4.9zm-122.2 5.2c2.5 3.4 4.8 6.3 4.9 6.5 1-1.6-4.7 22-5.9 27.6-.4 1.9-.8 3.4-.9 3.4-2.9-3.6-8-11.1-11.2-15.3 1.9-10.2 5.8-28.7 6.3-30.5 1.6.1 3.4 4.6 6.8 8.3zm-67.9 2.8c2.8 4.6 7.5 12.3 10.1 17.2-2.4 10.1-5.1 24.7-6.6 34.7-3.7-3.2-8.5-13.6-11.9-18.7 2.8-9.9 4.1-20.1 5.9-31.1 1.2-3.6 0-6.2 2.5-2.1zm230.1 3.8c3.7 8.2 8.5 16.9 13.1 24.3-1.7 7-5.1 18.5-7.6 26.2-5.5-4.9-12.7-18-17.3-25.9 2.9-9.4 6.3-23.8 8.6-30.6 1.1 1.7 1.7 3 3.2 6zm-190.9 1.6c8.5 11.3 8.2 10.7 10.7 14.8-1.9 10-5.8 26.9-7.6 36.1-.4 2.3-.8.7-2.2-1.1-2.6-4.7-9.1-11.8-10.3-16.2.8-7.2 4-29.5 6.2-37.7 0-.1 1.5 1.8 3.2 4.1zm73.6 1.7c2.4 4 7.6 11.3 9.7 15.3 0 .7-6.5 26.3-6.7 26.3-.7-.4-10.4-12.5-13.6-16.8 2-10.7 4.6-22.3 6.7-30.9 1.2 1.9 2.7 4.2 3.9 6.1zm49.5 3.1c3.3 4.2 4.3 5.5 6.9 9-4.6 10-8.1 30.8-11.7 41.2-2.6-3.3-8.1-11.6-10.8-15.3 2.3-5.9 8.7-28.9 12.4-38.8.1.2 1.5 1.9 3.2 3.9zm-81.3 3.9c4.5 6.4 12.5 15.3 16.1 21.3 0 3.5-5.7 31.6-6.6 32.5-5.7-6.5-16.4-21.7-20.4-26.9 1.7-9 5-23.7 6.9-31.2.2-.7.3-.5 4 4.3zm124.1 4.2c2.3 4 9.2 13.1 8.3 13.1-1.4 5.2-6.9 24.8-7.2 25.1-.1.1-2.5-2.8-8.4-10.5-1.1-1.4-2-2.7-2-2.9.8-3.5 4-13.5 6.1-20.1 1.8-4.3 1.4-8.8 3.2-4.7zm-20 20.3c1.3 1.8 5.4 6.5 5.8 8.2-2.1 9.6-11.6 44.9-12.3 43.5-1.7-2.1-12.3-17.8-17.4-24.4 2.7-14 7.5-33.9 11.1-42.6 3.3 3.8 10.8 12.7 12.8 15.3zm-166.5-6.9c1.4 2.1 4.1 6.3 5.8 8.8-1.7 12-3.6 19-6.5 33.2-.2.5-2.2-2.3-7.4-10-2.8-4.2-3-4.5-2.8-5.7 1.5-10.3 3.7-24.8 5.9-34.3.8 1.1 4 6.5 5 8zm38.4-1.7c2 2.8 5.6 7.9 7.9 11.2-.7 4.2-7.1 34.7-9 36.7-.7-.4-8.2-11.2-10.8-15.1 2.3-9.4 6.1-26.5 8.5-36.9.1-.6.2-.5 3.4 4.1zm74.6 4.8c4.2 5.9 6.7 9.4 9.7 13.9-1.6 5-7.1 20.9-7.7 21-3.8-4.6-11.1-13-14-17 .3-1.7 5.3-19.7 5.7-21.5 1.3-7.2 1.7-1.4 6.3 3.6zm115.6.2c1.2 2.1 6.7 12.7 8.7 16.6-1.5 8.1-4.9 15.5-7.2 23-2.9-5-6.7-10.6-10.2-15.4 2.3-7.5 5.5-19.8 7.5-26 0 0 .6.8 1.2 1.8zm-28.8 4.5c4.1 6.5 10.7 16 15.1 22.1-2.3 7.5-5.1 16.4-7.4 23.1-2.4-3.6-4.5-6.7-7.8-11.2-8.2-11-9.8-13.3-9.5-14.1.8-1.6 5.8-20.1 7.5-23.3 0 0 1 1.6 2.1 3.4zm-222.1 9.8c3.3 5.5 5.9 10.2 5.9 10.6-.7 2.4-3.2 22.4-4.3 21-2.1-3-9.9-16.8-13.1-23.2.9-2.4 4.9-19.4 5.4-18.6 0 .1 2.8 4.7 6.1 10.2zm108.3-5.1c3.1 3.8 6.6 7.8 9.7 11.2-2 8.6-5.4 21.6-7.5 29.7-1.5 7.3-1.6 2.5-7.9-5.2-3-5.3-7.4-5.6-4.1-14 1.2-4.2 1.8-6.7 4.3-17.5.7-2.4 1.1-6.9 1.8-8.5.1 0 1.8 2 3.7 4.3zm-71.9 8.6c3.3 4.9 5.3 8 7.6 11.7-2.6 9.4-5.4 23.5-7.5 32.2-2.9-4.6-7.6-11.7-11.1-17.1.9-5.5 4.5-20.6 6.3-29.8.6-6.3 1.1-1.2 4.7 3zm41.4 1c7.7 10.2 14.7 19.8 14.7 20-.4 7.2-7.9 33.5-9.2 36.5.4 1.5-12.2-16.2-14.5-19.8-3.7-5.2-5.2-7.4-5.2-7.6 1.9-7.3 6.6-24.9 8-31.3 1.5-8 .9-3.5 6.2 2.2zm122.5-.7c2.3 2.8 5.5 6.9 7.8 9.9-2.7 8.6-12.6 45.8-13.3 45.4-.5 0-10.5-14.6-10.5-15.3 4.3-13.4 9.1-27.4 12.7-41.8.6-2.8 1.2-.2 3.3 1.8zm-50.4 2.5c2.7 3.9 6.7 9.4 9.6 13.5-9 28.2-.6 27.6-19.5 4.3 2.4-5.4 6.2-15.7 7.9-20.6.1 0 1 1.3 2 2.8zm-25.1 7.4c3.8 4.5 9.9 12.3 9.9 12.6-3 8.4-7.4 18.5-9.7 27.2-.8 2.9-1.4 5.3-1.4 5.5-2.6-3.2-8.2-11-11.6-15.4 2.7-8.9 6.5-22.1 8-28.1 2.2-7.8.9-5.8 4.8-1.8zm-111.6 7.4c2.3 3.8 5.9 8 7 11 0 1-4.5 21.3-4.8 21.3-.4 0-10-15.6-9.9-16 .3-.7 3.1-16.3 4.5-20.8.1-.1 1.5 2 3.2 4.5zm229.5-1c1.5 2.7 7.5 10.6 7.1 12.9-1.2 4.4-6 18-6.6 22.7-2.5-2.9-7.7-11.1-10.6-16.1 1.4-4.1 7.3-22.1 7.7-23 0-.1 1.1 1.5 2.4 3.5zm-31-1.3c4.5 5.8 12.4 16.2 16.1 22.5-4.5 13.6-9.2 30.4-13.5 44.8-2.1-3.3-14.4-20.1-16.7-23.4-.5-2.8 4.7-17.4 5.6-22.1 2.3-8.7 6.8-23.5 7.1-23.5.1.1.7.8 1.4 1.7zm-156.5 12.5c3.4 4.8 3.2 2.9 2.1 9-1.1 5.7-5.1 26.2-5.8 29-2-2.2-10.2-14.4-11.7-17.2 1.8-7.4 4.8-23.6 7.2-31.7 1.8 1.3 6.3 8.6 8.2 10.9zm111-2.5c5.4 7.3 8.8 12.2 13.8 19.6-1.4 4.3-6.7 20.8-7.2 22.1-3.2-2.3-16-23-16.3-23.3 1.7-5.2 5.2-18.4 6.1-22.4.1-.5 1.1.5 3.6 4zm-64 8.8c2.3 3.1 4.4 6.2 4.8 6.7.8 1.1.9.4-1.8 9.3-2.1 6.8-3.5 11.7-5.6 20-1 3.9-1.8 7.2-1.9 7.2-2.9-3.8-8.4-11.7-12.3-16.4 2.3-8.7 8.2-27.5 10-36.2 2.1 2.9 3.6 4.9 6.8 9.4zm38.1-4.5c2.5 3.3 10.1 14.6 10.7 15.9 1.4-.1-6.7 24.6-10 33.8-4.3-5.2-10.7-13.9-14.5-19.5 2.7-10.5 6.7-22.6 10.8-32.7.5-1.9 1.2.6 3 2.5zm-111 12.3c2.3 3.6 3.7 5.8 5.4 8.5-.9 3.6-1.5 6.3-2.7 12-2.7 9.9-.8 11.8-4.2 6.4-2.5-4.7-8.9-12.1-8.7-14.1 1.3-5.3 3.3-15 4.8-21.1 1.9 2.6 3.2 4.7 5.4 8.3zm35.5-.7c5.1 7.3 10.9 15.5 16.6 23.3-2.2 8.5-4.9 23.1-6.6 31.7-3.2-1.9-18.4-22.7-19.4-24.8 1.1-5.3 5.3-29.7 6.8-33.8.1 0 1.3 1.6 2.6 3.6zM120 353c2.4 4.1 5.5 9.1 8.5 13.7-.7 2.4-5.6 17.3-6.4 19.4 0 1.4-7.9-11.3-9.3-13.2 2.2-5.1 4.5-17.5 5.9-21.8.1-.1.7.8 1.3 1.9zm226.5 2.2c2.5 4.2 6 9.1 9 13-4.2 11.7-10.1 29.5-14.6 40.9-.1 1.1-5.4-6.4-9.3-12.2 2.6-9.8 6.1-19.3 9-29.2 2.1-7.4 4.4-14.8 4.6-14.8-.1 0 .5 1.1 1.3 2.3zm-117.6 5.9c3.2 4.3 5.2 7.1 7.5 10.6-2.9 9.6-8.2 27.4-10.3 34.9-3.6-4.8-8.4-11.1-11.4-15.1 2.3-8.8 7.5-28.4 10.4-35.3.1-.1 1.8 2.2 3.8 4.9zm70.8 1.8c1.6 2.5 6.4 8.3 7.5 10.4-.5 2.1-5.8 17.3-6.6 19.7-.6 1.9-1.2 3.4-1.3 3.4-.6-.6-8.2-12.3-10.1-15.1.9-1.9 6.2-23.4 7.8-22.3.2.4 1.5 2.2 2.7 3.9zm-25.4 6.9c6.6 9.8 9.8 14.6 10.3 15.5.1 4.6-9.4 29.2-9.6 30.4-1.8-1.7-13.5-18-16.3-21.8 2.2-7.4 8.1-24.3 10.5-31.7 0 0 2.3 3.5 5.1 7.6zm-115.4 5.6 5.8 8.6c-.8 5.1-3.1 14.7-4.2 19.3-1.9-2.3-4.5-5.9-7.9-9.9-7.1-8.8-4.2-3.3-2-17.3 2.8-11.2.2-12.7 8.3-.7zm202 .4c6.3 9.5 6.9 5.8 1.3 18.9-2 5.1-6.6 19.5-10.5 28.5-1.7-2.1-8-9.6-8.3-10.5-.1-.3.3-1.5.7-2.5 4.2-11 10-27.4 13.9-38.5.8 1 2.3 3.2 2.9 4.1zm-225.3 1.5c2.3 3.6 5.3 8.4 7.6 12-1.3 7.4-2.9 16.9-4.5 23.1l-.7-.9c-.7-.8-2.9-4.2-9.7-14.7l-2.5-3.8c1.2-5.3 4.9-18.7 6-20.7.3-.5.9.3 3.8 5zm106.9 3c2.8 4 8.1 10.8 11.5 15.1-3.8 11.1-7.3 23.2-10.3 32.6-.2.4-2.7-2.3-7.2-8-5.3-6.7-6.1-7.7-6.7-8.6l-.7-1c3-10.7 10.3-35.2 10.2-34.4.1.1 1.5 2 3.2 4.3zm70.7.6c5.1 6.8 8.7 11.8 13.5 19.2-1.9 7.4-5.6 16.8-8.1 24-4.7-6.7-13.6-18.8-17.1-24l3.8-11.1c4.4-13.1 4.2-12.6 4.4-12.6.2 0 1.7 2.1 3.5 4.5zM206 388.5c2 2.9 3 4.3 4.4 6-2.3 5.8-7.1 22.1-9.3 27.5-.3-.1-7.9-9.4-8.7-10.6-.4-.6-.4-1 .2-3.8 1.2-5.8 5-26.8 5.9-29 .1-.3 3.8 4.4 7.5 9.9zm87.7 10.7 3.2 4.9c-11.6 32.2-1.9 35.5-19.5 14.7 2.8-8.8 6.9-21.2 9.5-30.1 2.1 3.4 4 6.3 6.8 10.5zm-121.9-5.3c3.2 4 11.7 15.3 15.9 20.8-1.1 4.7-4.3 19.1-4.7 18.9-2.1-1.8-7.1-9.1-9.5-11.8-4.9-6.8-8.3-8.5-9.2-13.6.6-2.4 4.2-17.6 4.1-18.4 0-.2-.3-.5 3.4 4.1zm-20.3 5.9c3.5 5.9 9 8.1 5.6 16-1.2 3.8-3 10.8-4.1 15.2-15.9-20.3-9.8-9.7-6.1-36.9 1.4 1.6 2.4 2.9 4.6 5.7zm64.7 2.4c3 3.9 5.5 7.3 8 10.8-11.9 35.6-2.8 38-20.4 12.6 1.9-6.2 8.9-28.5 8.9-27.9 0 0 1.6 2 3.5 4.5zm43.8 1.4c7.9 11.1 8.6 12 13.1 17.8-3.4 9.7-6.5 19.9-9.4 29.3-4.2-5-12.3-12.8-16.9-18.2 1.8-7 9.4-32.3 10-33.3.1.1 1.5 2 3.2 4.4zm70.6 2.1c7.9 12.8 9.8 4.5 2.8 23.7-1.3 3.1-2.3 7.5-3.5 9.3-2.4-2.8-6.9-8.6-9.8-12.5 3-8 6.1-14.9 8.7-22.2.3-.5.4-.4 1.8 1.7zm-26.9 8.2c5 7 7.4 10.5 12.2 17.3-2.4 7.1-6.2 19.5-8.4 25.6-1.9-1-14.3-17.6-16.3-20.9 1.6-7.9 5.6-20.4 7.9-27.8.2-.5 0-.7 4.6 5.8zm-134.3 11.3c3.4 4.1 8.6 11.2 11.6 15-1.7 5.6-3.9 12.6-5.8 17.3-10.1-10.7-12.8-12.9-18.3-21.3.3-1.6 3.8-15.6 5.2-20.3 2.2 2.8 4.9 6.4 7.3 9.3zm62.3-2.8c3.3 4.1 7 8.6 10.3 12.4-2.2 8.6-6.6 25.2-9.1 31.4-.8-.5-11.2-13.9-14.3-18.7 1.7-6.6 6.7-23.8 8.5-30 .2-.6-.1-.9 4.6 4.9zm-32.7 7c-2 6.3-3.6 12.4-5.1 18.1-12.3-14.1-7.6-8.7-4.4-26.5.3-1.2.6-2.4.6-2.6.1-.7 9.9 11.2 8.9 11zm145.5-5.8c5.2 6.5 4.9 5.3 2.4 10.4-2 4.2-5.5 11.5-7.8 16.2-7.3-9.7-7.7-5.1-1.3-23 2.7-7.5 2.9-7.9 3-7.9.1 0 1.8 1.9 3.7 4.3zm-200 4.6c5.4 6.9 6.9 9.1 6.8 9.7-.3 1.4-4.5 18.3-5.6 22.6-3.6-3.9-13.5-13.8-12-13.2.7.6 6.1-22.1 6.9-24 .1.1 1.8 2.3 3.9 4.9zm136.5 3c2.9 3.6 4.2 5.4 5.9 7.8-3 8.7-6.1 21.2-9.3 28.3-.2.5-.6.1-2-2-1.2-1.8-8.3-10.5-9.1-12.2.3-1.5 6.6-21.7 9-28.8 1.6 2 2.8 3.4 5.5 6.9zm-75.5 7.1c3 4.9 5.7 8.4 8.3 12.6-7.7 21.8-2.6 16-15.9 1.3-1.5-2.6.7-6.3 2.3-13.6 1.9-6.9 1.2-6.9 5.3-.3zm113.2-3.4c.3.6 9.3 11.4 8.9 12-2.5 6.1-6.4 19.6-9.3 24.6-1.3-2.7-8.5-10.1-8.9-12.8 4.4-12.1 7.4-28.9 9.3-23.8zm-131.2 13.2c2.1 2.6 4.2 5 4.5 5.4 1.6 1.8-4.4 17.8-4.7 18.4-1.9-2.3-6.6-8.1-9.3-11.3 1.8-5 4.4-13.2 5.5-17.2.1 0 1.8 2.1 4 4.7z",
fill:"currentColor"})))}},1469:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(111),a=n(1470),s=n(11),l=n(1471),d=n(812),c=n(1472),u=n(51),h=n(20),p=n(0),f=n(74),g=n(1475),m=n(1476),v=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this
;n.maybeInsertTaskToolbarOnFocus=function(){var e=n.state.editor;if(e){var t=e&&e.getCurrentLineEntry();t&&(0,d.insertTaskToolbarIntoPocket)(e,t,!0)}};n.shouldShowGallery=(0,r.buildPredicate)({
isGalleryToolbarVisible:(0,r.equals)("true")});n.maybeShowOrHideUsingOmnibar=function(e){var t=e.context,i=n.shouldShowGallery(t),r=o.__assign({},n.state),a=t.commentToolbarPosition
;r.commentToolbarPosition=a&&a.length?h.Position.fromJSON(JSON.parse(a[0])):null;r.isGalleryToolbarVisible=i;n.setState(r)};n.handleMousemove=function(e){var t,o
;if(!(null===(o=null===(t=n.state.editor)||void 0===t?void 0:t.mediaDrag)||void 0===o?void 0:o.isDragging())){n.maybeInsertTaskToolbarOnHover(e);n.maybeInsertTextDragToolbarOnHover(e)}};n.state={
editor:null,isGalleryToolbarVisible:!1,commentToolbarPosition:null};return n}t.prototype.initialize=function(e){var t=this;this.setState({editor:e},(function(){t.bindEvents()}))}
;t.prototype.bindEvents=function(){var e=this.state.editor.observer;this.context.omnibar&&this.events.on(this.context.omnibar,"contextChange",this.maybeShowOrHideUsingOmnibar)
;this.events.on(e,"caret",this.maybeInsertTaskToolbarOnFocus);this.events.on(e,"mousemove",this.handleMousemove)};t.prototype.maybeInsertTextDragToolbarOnHover=function(e){var t=this.state.editor
;if(t&&t.hasFeature("text-drag")){var n=t.dom.getAceLineForNode(e.target);if(n&&!t.dom.internalIsNodeDirty(n)){var o=t.selection.getPositionForNode(n);if(!(0,u.isCellId)(o.zone)){
var i="hr"==n.getAttribute("data-line-manager");if(t.lists.isReorderableListLine(o.zone,o.line)||i){var r=o&&t.getLineEntry(o.zone,o);r&&(0,c.insertTextDragToolbarIntoPocket)(t,r,o,i)}}}}}
;t.prototype.maybeInsertTaskToolbarOnHover=function(e){var t=this.state.editor;if(t){var n=t.dom.getAceLineForNode(e.target);if(n&&!t.dom.internalIsNodeDirty(n)){
var o=t.selection.getPositionForNode(n),i=o&&t.getLineEntry(o.zone,o);i&&(0,d.insertTaskToolbarIntoPocket)(t,i,!0)}}};t.prototype.render=function(){
if(!this.state.editor||this.state.editor.isDisposed()||!this.state.editor.contents.getIsCommentable())return p.createElement("div",null)
;var e=this.state.editor.selection.get(),t=[p.createElement(g.default,{ref:"commentToolbar",className:"editor-toolbar-comment",key:"commentToolbar",editor:this.state.editor,
shown:!!this.state.commentToolbarPosition,currentSelection:e,targetPosition:this.state.commentToolbarPosition},p.createElement(a.default,{targetPosition:this.state.commentToolbarPosition,
editor:this.state.editor})),p.createElement(g.default,{ref:"galleryToolbar",editor:this.state.editor,key:"galleryToolbar",shown:this.state.isGalleryToolbarVisible,currentSelection:e
},p.createElement(m.default,{editor:this.state.editor}))];return p.createElement("div",null,p.createElement(l.default,null)," ",t)};t.displayName="ToolbarUI"
;t.contextTypes=i.pick(f.ReactAppContextTypes,"omnibar");return t=o.__decorate([s.default],t)}(p.Component);t.default=v},1470:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(30),a=n(2),s=n(11),l=n(270),d=n(20),c=n(0),u=n(74),h=(0,n(5).PaperIntlFactory)(),p=h._f,f=h.F,g=(0,a.defineMessages)({comment:{id:"FT16WL",defaultMessage:"Comment"}
}),m="add_line_comment",v=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={command:null};t.currentlyHovering=!1;t.yellowBgPaints={}
;t.handleClick=function(){t.context.omnibar.runCommandById(m,{linePosition:["".concat(t.props.targetPosition.line)]})};t.handleOmnibarEvent=function(e){
var n=e.commands,o=e.availableCommandIds,i=!t.state.command&&o.indexOf(m)>-1,r=t.state.command&&-1===o.indexOf(m);if(i){var a=n.filter((function(e){return e.id===m}))[0];a&&t.setState({command:a})
}else r&&t.setState({command:null})};t.updateHighlight=function(){t.currentlyHovering=!0;var e=t.props.editor,n=t.getHighlightSelectors();clearTimeout(t.yellowBgPaints[n])
;t.yellowBgPaints[n]=t.timers.setTimeout((function(){var t="var(--hp-color-comment-bg, ".concat(r.default.color_banana_forty,")");e.dynamicCSS.selectorStyle(n).backgroundColor=t}),99)}
;t.handleMouseLeave=function(){t.currentlyHovering=!1;t.removeHighlight()};return t}t.prototype.getId=function(){var e=this.props.editor,t=this.props.targetPosition
;if((null==t?void 0:t.zone)==d.Position.ROOT_ZONE){var n=e.getRep(d.Position.ROOT_ZONE);if(t.line<n.lines.length()){var o=n.lines.atIndex(t.line);return o&&o.lineNode.id}}return null}
;t.prototype.componentDidMount=function(){this.context.omnibar&&this.context.omnibar.on("commandsChange",this.handleOmnibarEvent)};t.prototype.componentWillUpdate=function(){
this.props.targetPosition&&this.removeHighlight()};t.prototype.componentDidUpdate=function(){this.props.targetPosition&&this.currentlyHovering&&this.updateHighlight()}
;t.prototype.componentWillUnmount=function(){this.context.omnibar&&this.context.omnibar.off("commandsChange",this.handleOmnibarEvent)};t.prototype.getHighlightSelectors=function(){var e=this.getId()
;if(!e)return"";var t=this.props.editor.dom.getSelectorWithId(e);return[" > span"," li > span"," code > span"," h1 > span"," h2 > span"," td"].map((function(e){return t+e})).join(",")}
;t.prototype.removeHighlight=function(){var e=this.props.editor,t=this.getHighlightSelectors();clearTimeout(this.yellowBgPaints[t]);e.dynamicCSS.removeSelectorStyle(t)};t.prototype.render=function(){
return this.state.command?c.createElement(l.default,{className:"commentblockbutton",onClick:this.handleClick,"track-title":"block-comment",command:this.state.command,
tooltip:c.createElement(f,o.__assign({},g.comment)),onTouchStart:this.updateHighlight,onTouchEnd:this.handleMouseLeave,onMouseEnter:this.updateHighlight,onMouseLeave:this.handleMouseLeave,
"aria-label":p(g.comment)}):null};t.displayName="CommentToolbar";t.contextTypes=i.pick(u.ReactAppContextTypes,"omnibar");return t=o.__decorate([s.default],t)}(c.Component);t.default=v},
1471:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(123);t.default=o.memo((function(){return o.createElement("form",{key:"image-form",name:"insert-image-form",
className:"insert-image-form"},o.createElement(i.default,null),o.createElement("input",{multiple:!0,type:"file",className:"web-image-upload",name:"photo[]",accept:"image/*"}))}))},
1472:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.insertTextDragToolbarIntoPocket=void 0
;var o=n(1),i=n(10),r=n(3),a=n(146),s=n(799),l=n(20),d=n(0),c=n(31),u=n(13),h=n(1473),p=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.handleDragStart=function(e){0==e.button&&t.props.editor.textDrag.beginTextDragWithPos(e,t.props.targetPosition)};return t}t.prototype.render=function(){
var e,t=this.props.editor,n=t.lists,o=t.contents,a=n.getLineListIndex(this.props.targetPosition),l=(0,s.getListIndentLevel)(o.getLineType(this.props.targetPosition)),p=a?String(a).length:0,f=r({
"toolbar-text-drag":!c.default.isOnButDoNotLog("paper_pocket_interstitial")
}),g=c.default.isOnButDoNotLog("paper_pocket_interstitial")?r(h.default.button,"pocket-item-revealable"):r("toolbar-text-drag-button","toolbar-text-drag-button--indent-".concat(l),{
"toolbar-text-drag-button--2-digits":2==p,"toolbar-text-drag-button--many-digits":p>2,"toolbar-text-drag-button-hr":this.props.isHrLine});c.default.isOnButDoNotLog("paper_pocket_interstitial")&&(e={
transform:"translateY(-".concat(this.props.lineEntry.lineNode.clientHeight,"px)")});return d.createElement("div",{className:f,onMouseDown:this.handleDragStart,style:e},d.createElement(i.default,{
className:g,"track-title":"drag handle"},d.createElement(u.default,{name:"drag-handle"})))};t.displayName="TextDragToolbar";return t}(d.PureComponent);t.default=p
;t.insertTextDragToolbarIntoPocket=function(e,t,n,o){var i=c.default.isOnButDoNotLog("paper_pocket_interstitial")?(0,a.getLazyBackPocket)(e,t):(0,a.getPocket)(t.lineNode);if(i){
var r=null!=t.textDragToolbarRef?i.get(t.textDragToolbarRef):null;if(r){if(c.default.isOnButDoNotLog("paper_pocket_interstitial"))return;var s=r.component.props.targetPosition
;if(l.Position.equals(s,n))return;void 0!==t.textDragToolbarRef&&i.remove(t.textDragToolbarRef)}t.textDragToolbarRef=i.put(d.createElement(p,{targetPosition:n,editor:e,lineEntry:t,isHrLine:o
}),"text-drag-toolbar")}}},1473:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.button=void 0;n(1474);t.button="_button_vemol_6";t.default={button:"_button_vemol_6"}},
1474:function(e,t,n){},1475:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(3),r=n(30),a=n(11),s=n(20),l=n(0),d=n(24),c=n(18),u=n(4),h=function(e){o.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.animationTimeout=null;t.isHoveredValue=!1;t.handleMouseEnter=function(){t.isHoveredValue=!0};t.handleMouseLeave=function(){
t.isHoveredValue=!1};return t}t.prototype.shouldComponentUpdate=function(e,t){
return this.props.shown!=e.shown||(this.props.targetPosition&&e.targetPosition?!s.Position.equals(this.props.targetPosition,e.targetPosition):this.props.targetPosition!=e.targetPosition)}
;t.prototype.getSideToolbarPositionTop=function(e){var t=this.props.editor,n=t.getRep(s.Position.ROOT_ZONE);if(e&&(e.zone!=s.Position.ROOT_ZONE||e.line>=n.lines.length()))return 0
;var o=e?n.lines.atIndex(e.line):t.getCurrentLineEntry();if(!o)return 0;var i=o.lineNode,r=0;r+=this.getLineHeight(i)/2;var a=this.props.toolbarHeight||20,l=(0,
c.offset)(t.dom.getViewportNode()).top,d=(0,c.offset)(i).top;return Math.max(0,d-l+r-a/2)};t.prototype.getLineHeight=function(e){
var t=Array.prototype.slice.call(e.querySelectorAll("ul.listtype-task, ul.listtype-taskdone"));if(t.length){var n=t[0].style.lineHeight
;if(n)return parseInt(n,10)+2*parseInt(r.default.extra_task_line_padding,10)}var o=Array.prototype.slice.call(e.querySelectorAll("h1, h2"));if(o.length){var i=o[0].style.lineHeight
;if(i)return parseInt(i,10)}var a=e.style.lineHeight;return a?parseInt(a,10):this.props.editor.dom.getLineHeight()};t.prototype.isHovered=function(){return this.isHoveredValue}
;t.prototype.updatePosition=function(){this.forceUpdate()};t.prototype.componentDidUpdate=function(){var e=this;clearTimeout(this.animationTimeout)
;this.animationTimeout=this.timers.setTimeout((function(){(0,c.toggleClass)(d.findDOMNode(e),"hp-toolbar-shown",e.props.shown)}),0)};t.prototype.componentWillUnmount=function(){
clearTimeout(this.animationTimeout)};t.prototype.render=function(){var e=i("editor-toolbar-sidebar","hp-toolbar",this.props.className,{"hp-toolbar-animation-enable":this.props.shown}),t={
top:this.getSideToolbarPositionTop(this.props.targetPosition)};return l.createElement(u.TrackContext,{trackContext:u.EditorContext.SideToolbar},l.createElement("div",{"aria-hidden":!this.props.shown,
className:e,style:t,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.props.children))};t.displayName="SideToolbar";return t=o.__decorate([a.default],t)}(l.Component)
;t.default=h},1476:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(39),r=n(18),a=n(4),s=n(11),l=n(841),d=n(536),c=n(7),u=n(42),h=n(20),p=n(0),f=function(e){
o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.mouseEnterTimeout=null;t.handleMouseEnter=function(){
var e=t.props.editor,n=e.selection.getStart(),o=e.managers.getLineManager(h.Position.ROOT_ZONE,n.line,"gallery");if(o&&-1==o.getTempIndex()&&!t.mouseEnterTimeout){clearTimeout(t.mouseEnterTimeout)
;t.mouseEnterTimeout=t.timers.setTimeout((function(){o.insertTempItemAt({type:"gallery-toolbar-hint",url:(0,i.addPathPrefix)(u.PIXEL_SRC)},0,!0)}),0)}};t.handleMouseMove=function(e){var n=!!(0,
r.closest)(e.target,".insert-dropbox"),o=t.props.editor,i=o.selection.getStart(),a=o.managers.getLineManager(h.Position.ROOT_ZONE,i.line,"gallery");a&&a.setHintType(n?"dropbox":"image")}
;t.handleMouseLeave=function(){clearTimeout(t.mouseEnterTimeout);t.mouseEnterTimeout=null
;var e=t.props.editor,n=e.selection.getStart(),o=e.managers.getLineManager(h.Position.ROOT_ZONE,n.line,"gallery");o&&o.removeGalleryToolbarHint()};t.handleClick=function(){t.handleMouseLeave()}
;return t}t.prototype.render=function(){return p.createElement("div",{className:"toolbar-gallery-options hp-readonly-hide",onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,
onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},p.createElement(l.default,{editor:this.props.editor,customIcon:this.props.customDropboxIcon
}),this.props.hideImageButton?null:p.createElement(d.default,{editor:this.props.editor,mode:c.MediaInsertionMode.PrependToExistingGallery}))};t.displayName="GalleryToolbar"
;return t=o.__decorate([s.default,(0,a.withTrackContext)(a.EditorContext.GalleryToolbar)],t)}(p.Component);t.default=f},1477:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.FileMoverPopup=void 0;var o=n(1),i=n(8),r=n(40),a=n(0),s=n(602),l=n(116),d=n(2),c=n(5),u=n(88),h=n(50),p=n(209),f=n(455),g=n(407),m=n(4),v=(0,d.defineMessages)({loadingSdk:{id:"ZWcaZ5",
defaultMessage:"Loading folder selector..."},movingToFolder:{id:"6MFtTY",defaultMessage:"Moving {title} to {destFolder}..."},moving:{id:"7ewhJ9",defaultMessage:"Moving {title}..."},successWithFolder:{
id:"Uat9tK",defaultMessage:"{title} successfully moved to {destFolder}"},success:{id:"lEm51Q",defaultMessage:"{title} successfully moved"},error:{id:"HwBIQh",defaultMessage:"Error moving Paper doc"},
move:{id:"Y0Wzst",defaultMessage:"Move here"}}),y=(0,c.PaperIntlFactory)(),b=y._f,C=y.F,E=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={
dropinSdkReady:!1};t.init=function(){m.IntentionEvent.DocMoverOpened.track();Promise.all([(0,g.getDropboxInternalSdkWithCDMHeader)(),t.initDropinSdkAsync()]).then((function(e){var n=e[0]
;t.dropbox=n.dropbox;t.auth=n.auth;t.setState({dropinSdkReady:!0})})).catch((function(){(0,
h.logError)("[FileMoverPopup] Error initializing popup. One or more dependencies (Dropbox SDK / Dropin SDK) failed to load.");m.IntentionEvent.DocMoverFailedLoading.track()}))}
;t.initDropinSdkAsync=function(){return s.DropinSdkLoadableLib.isLoaded()?Promise.resolve():s.DropinSdkLoadableLib.load()};t.move=function(e){m.IntentionEvent.DocMoverNewFolderSelected.track()
;var n=t.props.padController.padClientVars.cloudDocId,o=t.props.padController.isPadTemplate()?".papert":".paper",i="".concat(t.props.padController.title).concat(o),r=t.replaceInvalidFilenameChars(i)
;t.showMovingToast(i,e.path);t.dropbox.cloudDocsAlphaDropinMove({cloud_doc_id:n,to_path:"".concat(e.path,"/").concat(r)}).then((function(n){var o,r
;if("COMPLETE"!=n.result.status)return Promise.reject(n);t.showSuccessToast(i,e.path);m.IntentionEvent.DocMoverMoveSuccess.track();t.props.padController.refetchFilesystemInfo()
;null===(r=(o=t.props).onSuccess)||void 0===r||r.call(o)})).catch((function(e){var n,o;t.showErrorToast();m.IntentionEvent.DocMoverMoveError.track();(0,
h.logError)("[FileMoverPopup] Error moving doc using DropboxSDK.cloudDocsAlphaDropinMove",void 0,void 0,void 0,void 0,void 0,e);null===(o=(n=t.props).onError)||void 0===o||o.call(n)}))}
;t.handleModalClose=function(){m.IntentionEvent.DocMoverClosed.track()};t.showMovingToast=function(e,t){var n=t?a.createElement(C,o.__assign({},v.movingToFolder,{values:{title:e,destFolder:t}
})):a.createElement(C,o.__assign({},v.moving,{values:{title:e}}));u.Snackbar.sync(n)};t.showSuccessToast=function(e,t){var n=t?a.createElement(C,o.__assign({},v.successWithFolder,{values:{title:e,
destFolder:t}})):a.createElement(C,o.__assign({},v.success,{values:{title:e}}));u.Snackbar.complete(n)};t.showErrorToast=function(){u.Snackbar.fail(a.createElement(C,o.__assign({},v.error)))}
;t.getDropboxParentPath=function(){var e,n=null===(e=t.props.filesystemInfo)||void 0===e?void 0:e.path,o="";n&&(o=n.map((function(e){return e.displayName})).join("/"))
;return o.length&&"/"!=o[0]?"/".concat(o):o};return t}t.prototype.replaceInvalidFilenameChars=function(e){return e.replace(/[/?<>:*\\]/g,"_")};t.prototype.render=function(){
var e,t=this,n=s.DropinSdkLoadableLib.get();return a.createElement(p.DigModalWrapper,{ref:function(e){return t.panel=e},panelId:"filemover",isCentered:!0,onOpen:this.init,onClose:this.handleModalClose
},n?a.createElement(n.DefaultChooser,{className:"notranslate",auth:this.auth,fileSelect:!1,folderSelect:!0,multiSelect:!1,hideUnselectableFiles:!0,
onCancel:null===(e=this.panel)||void 0===e?void 0:e.closePanel,locale:i.default.userLocale,onSubmit:function(e){var n;t.move(e[0]);null===(n=t.panel)||void 0===n||n.closePanel()},
initialNavigationPath:this.getDropboxParentPath()}):a.createElement(l.Spinner,{"aria-valuetext":b(v.loadingSdk)}))};t.displayName="FileMoverPopupInner";return t=o.__decorate([r.default],t)
}(a.Component);t.FileMoverPopup=(0,f.withFilesystemInfo)(E)},1478:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.DropboxInternalSdkLoadableLib=void 0;var o=n(165)
;t.DropboxInternalSdkLoadableLib=(0,o.default)({importPath:"client/lazy/dropbox_internal_sdk_wrapper",chunkName:"dropbox_internal_sdk",requireAsync:function(){return new Promise((function(e){
Promise.all([n.e("vendors~dropbox_internal_sdk~dropins_sdk~paper_binder~paper_bundle~paper_cloud_docs~paper_influencer~9e498cf2"),n.e("vendors~dropbox_internal_sdk~dropins_sdk~share_panel"),n.e("dropbox_internal_sdk")]).then(function(t){
e(n(701))}.bind(null,n)).catch(void 0)}))},resolveWeak:function(){return 701}})},159:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.getTemplateColor=t.getTemplateMetaFromPadMetaOrSearchResult=t.getTemplateByline=t.getTemplateAccessString=t.isTemplate=t.restoreTemplate=t.createDocFromTemplate=t.getTemplateSchema=t.createTemplate=void 0
;var o=n(1),i=n(30),r=n(8),a=n(2),s=n(7),l=n(12),d=n(4),c=n(115),u=n(0),h=n(84),p=(0,n(5).PaperIntlFactory)().F,f=(0,a.defineMessages)({byDropbox:{id:"GhY4Qu",defaultMessage:"By Dropbox"},
sharedwithinvitedUserName:{id:"WkhSMT",defaultMessage:"Shared with {invitedUserName}"},sharedwithinvitedUserCountpluraloneotherotherinvitedUserCountothers:{id:"AeLfuo",
defaultMessage:"Shared with {invitedUserCount, plural,\n              one {1 other}\n              other {{invitedUserCount} others}}"},ownedbyyou:{id:"OulH8d",defaultMessage:"Owned by you"},
lastviewedlastActivityDate:{id:"JdRJSB",defaultMessage:"Last viewed {lastActivityDate}"},templateusedByYou:{id:"lkmhEi",defaultMessage:"Template used by you {lastUsedDate}"},templateEditedByYou:{
id:"ff3u0A",defaultMessage:"Template last edited by you {lastEditedDate}"},tempalteEditedByOther:{id:"BsXQew",defaultMessage:"Template last edited by {lastEditorName} {lastEditedDate}"},
templateCreatedByYou:{id:"u0Hgvq",defaultMessage:"Template created by you {createdDate}"},templateCreatedByOther:{id:"H3Ok6H",defaultMessage:"Template created by {creator} {createdDate}"}})
;t.createTemplate=function(e){void 0===e&&(e={});var t=e.localPadId,n=e.successHandler,o=e.errorHandler,i=e.trackContext;d.IntentionEvent.CreatePad.track({context:i,templateType:"custom",
padType:s.PadType.customTemplate,__templateSourcePadId:t});l.post({url:"/templates/create-template",data:{padId:t},analyticsTag:"create-template",
shardingKey:t?l.getShardingKeyForPad(t):l.getShardingKeyForCreatingNewPad(),successHandler:function(e){n&&n({success:e.success,padId:e.padId,cloudDocId:e.cloudDocId})},errorHandler:o})}
;t.getTemplateSchema=function(e){var t=e.templateId,n=e.templateType,o=e.usingTemplate,i=void 0===o||o,r=e.successHandler,a=e.errorHandler,s=e.trackContext;l.get({url:"/templates/get-template-schema",
data:{templateId:t,templateType:n,usingTemplate:i},analyticsTag:"get-template-schema",shardingKey:l.getShardingKeyForCreatingNewPad(),successHandler:r,errorHandler:a})
;!0===i&&d.IntentionEvent.CreatePadFromTemplate.track({context:s,templateType:n,__templateId:t})};t.createDocFromTemplate=function(e){
var t=e.folderId,n=e.templateId,o=e.templateType,i=e.successHandler,r=e.errorHandler,a=e.trackContext,c=-(new Date).getTimezoneOffset();d.IntentionEvent.CreatePadFromTemplate.track({context:a,
templateType:o,__templateId:n});var u=o==s.TemplateType.custom?l.getShardingKeyForPad(n):l.getShardingKeyForCreatingNewPad();l.post({url:"/templates/create-pad-from-template",data:{folderId:t,
templateId:n,templateType:o,tzOffset:c},analyticsTag:"create-pad-from-template",shardingKey:u,successHandler:function(e){i&&i({success:e.success,padId:e.padId,cloudDocId:e.cloudDocId})},errorHandler:r
})};t.restoreTemplate=function(e,t){d.IntentionEvent.UnarchivePad.track({padType:s.PadType.customTemplate,__padId:e.templateId});c.unarchiveTemplate(e,t)};t.isTemplate=function(e){
return e==s.PadType.customTemplate};t.getTemplateAccessString=function(e){
return e.templateType==s.TemplateType.prebuilt?u.createElement(p,o.__assign({},f.byDropbox)):1==e.invitedUserCount&&e.invitedUserName?u.createElement(p,o.__assign({values:{
invitedUserName:e.invitedUserName}},f.sharedwithinvitedUserName)):e.invitedUserCount?u.createElement(p,o.__assign({values:{invitedUserCount:e.invitedUserCount}
},f.sharedwithinvitedUserCountpluraloneotherotherinvitedUserCountothers)):e.currentUserIsOwner?u.createElement(p,o.__assign({},f.ownedbyyou)):void 0};t.getTemplateByline=function(e){
return e.templateLastUsedDate?u.createElement(p,o.__assign({key:"last-used-date"},f.templateusedByYou,{values:{lastUsedDate:u.createElement(h.TimeAgo,{date:e.templateLastUsedDate})}
})):e.secureLastEditorId&&e.lastEditorName?e.secureLastEditorId==r.default.secureUserId?u.createElement(p,o.__assign({key:"last-used-date"},f.templateEditedByYou,{values:{
lastEditedDate:u.createElement(h.TimeAgo,{date:e.lastEditedDate})}})):u.createElement(p,o.__assign({key:"last-used-date"},f.tempalteEditedByOther,{values:{lastEditedDate:u.createElement(h.TimeAgo,{
date:e.lastEditedDate}),lastEditorName:e.lastEditorName}})):e.currentUserIsCreator?u.createElement(p,o.__assign({key:"last-used-date"},f.templateCreatedByYou,{values:{
createdDate:u.createElement(h.TimeAgo,{date:e.createdDate})}})):u.createElement(p,o.__assign({key:"last-used-date"},f.templateCreatedByOther,{values:{createdDate:u.createElement(h.TimeAgo,{
date:e.createdDate}),creator:e.creator}}))};t.getTemplateMetaFromPadMetaOrSearchResult=function(e){return{currentUserIsOwner:e.currentUserIsOwner,invitedUserCount:e.invitedUserCount,
invitedUserName:e.invitedUserName,isArchived:e.isArchived,lastActivityDate:e.lastActivityDate?String(e.lastActivityDate):void 0,
lastUsedDate:e.templateLastUsedDate?String(e.templateLastUsedDate):void 0,templateColor:e.templateColor,templateId:e.localPadId,templateType:s.TemplateType.custom,title:e.title}}
;t.getTemplateColor=function(e){var t=e.isArchived,n=e.isTrashed;return t||n?i.default.color_stone:e.templateColor}},170:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.HpMenuSeparator=void 0;var o=n(1),i=n(0),r=function(e){o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){return i.createElement("li",{
className:"hp-menu-divider","aria-hidden":"true"},i.createElement("hr",null))};t.displayName="HpMenuSeparator";return t}(i.Component);t.HpMenuSeparator=r},178:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.getNextLine=t.getPreviousLine=t.getChildrenLines=t.isValidBrowserForSpellcheck=t.makeIdleAction=t.doLongLineWarning=t.newTimeLimit=void 0
;var o=n(1),i=n(110),r=n(2),a=n(0),s=n(31),l=n(48),d=n(61),c=(0,n(5).PaperIntlFactory)().F,u=(0,r.defineMessages)({longLineToast:{id:"daFZvl",
defaultMessage:"{linesWrapped, plural, one {1 line was hard-wrapped} other {# lines were hard-wrapped}} into multiple lines because it was too long."}});t.newTimeLimit=function(e){
var t=i.default.now(),n=!1,o=!1,r=function(){if(n){o||(o=!0);return!0}var r=i.default.now()-t;if(r>e){n=!0;return!0}r;return!1};r.elapsed=function(){return i.default.now()-t};return r}
;t.doLongLineWarning=function(e,t){l.default.show(a.createElement(l.default,{autoDismiss:!0},a.createElement(c,o.__assign({},u.longLineToast,{values:{linesWrapped:e,numLinesAfter:t}}))))}
;t.makeIdleAction=function(e){var t=null,n=0;function o(){if(t){window.clearTimeout(t);t=null}}function r(e){o();n=e;var r=e-i.default.now();r<0&&(r=0);t=window.setTimeout(a,r)}function a(){t=null;e()
}return{atMost:function(e){var o=i.default.now()+e;(!t||n>o)&&r(o)},atLeast:function(e){var o=i.default.now()+e;(!t||n<o)&&r(o)},never:function(){o()}}};t.isValidBrowserForSpellcheck=function(){
return(!d.default.blink||96!==d.default.engineVersion)&&(!(d.default.webkit&&d.default.engineVersion<601)&&(d.default.blink||d.default.gecko||d.default.webkit))};t.getChildrenLines=function(e){
return s.default.isOnButDoNotLog("paper_pocket_interstitial")?Array.prototype.slice.call(e.childNodes).filter((function(e){return!e.classList.contains("ace-line-pocket")})):e.childNodes}
;t.getPreviousLine=function(e,t){var n=t.selection.getPositionForNode(e);return n.line>0?t.getLineEntry(n.zone,n.withLine(n.line-1)):null};t.getNextLine=function(e,t){
var n=t.selection.getPositionForNode(e);return n.line<t.getRep(n.zone).lines.length()-1?t.getLineEntry(n.zone,n.withLine(n.line+1)):null}},209:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});t.DigModalWrapper=void 0;var o=n(1),i=n(11),r=n(108),a=n(23),s=n(0),l=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.state={isOpen:!1};n.panelId=n.props.panelId
;n.closePanel=function(){n.state.isOpen&&n.setState({isOpen:!1})};r.Modal.setAppElement(document.body);return n}t.prototype.componentDidMount=function(){
this.context.panels&&this.context.panels.registerPanel(this)};t.prototype.componentWillUnmount=function(){this.context.panels&&this.context.panels.unregisterPanel(this)}
;t.prototype.openPanel=function(e){this.state.isOpen||this.setState({isOpen:!0,callback:e})};t.prototype.render=function(){var e=this,t=this.props,n=t.onClose,i=t.onOpen,a=t.children,l=(t.panelId,
o.__rest(t,["onClose","onOpen","children","panelId"]));return s.createElement(r.Modal,o.__assign({open:this.state.isOpen,onRequestClose:this.closePanel,onAfterClose:n,onAfterOpen:function(){
return null==i?void 0:i(e.state.callback)}},l),a)};t.displayName="DigModalWrapper";t.contextTypes={panels:a.object};return t=o.__decorate([i.default],t)}(s.Component);t.DigModalWrapper=l},
230:function(e,t,n){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0})
;t.doesThisBrowserUseIESpaceRules=t.StandardIDGen=t.nodeToRedactedString=t.makeContentCollectorWithoutWidgets=t.NodeType=t.DisabledMediaTypes=t.EmbedPastingRule=void 0
;var o,i,r,a,s,l,d,c=n(1),u=n(6),h=n(72),p=n(220),f=n(22),g=n(26),m=n(42),v=n(156),y=n(129),b=n(432),C=n(296),E=n(38),I=n(577),_=n(27),T=n(42),S=n(20),k=n(32),x=n(31),w=n(51),P=n(86),A=n(133),O=n(803),L=n(39),N=n(42)
;i=n(578).suggestInvitesFromDropboxSharingLink;o=n(50);r=n(4).track;a=n(4).IntentionEvent;!function(e){e[e.AllEmbeds=1]="AllEmbeds";e[e.OnlyConfiguredEmbeds=2]="OnlyConfiguredEmbeds"
;e[e.None=3]="None"}(s=t.EmbedPastingRule||(t.EmbedPastingRule={}));!function(e){e[e.ALL=1]="ALL";e[e.ALL_EXCEPT_IMAGES=2]="ALL_EXCEPT_IMAGES"}(l=t.DisabledMediaTypes||(t.DisabledMediaTypes={}))
;!function(e){e.MentionFolderId="mentionFolderId";e.MentionPadId="mentionPadId";e.MentionCloudDocScl="mentionCloudDocScl"}(d||(d={}));var M,R,D="";!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE"
;e[e.TEXT_NODE=3]="TEXT_NODE";e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE";e[e.COMMENT_NODE=8]="COMMENT_NODE";e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE"
;e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE";e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(R=t.NodeType||(t.NodeType={}));function F(e){return e.nodeType==R.TEXT_NODE}function z(e){
return e.nodeType==R.COMMENT_NODE}function U(e){var t=(e.nodeName||"").toLowerCase();if("br"==t)return!0;if(x.isOnButDoNotLog("paper_pocket_endofline")){
if("span"==t&&H(e,"data-role")==b.LINE_BREAK_SPAN_TAG_ROLE)return function(e){if(!e.parentNode)return!1;for(var t=e.parentNode.childNodes||[],n=0;n<t.length;n++)if(t[n].textContent)return!1;return!0
}(e);if("div"==t&&H(e,"data-role")==b.LINE_BREAK_DIV_TAG_ROLE)return!function(e){if(!e.parentNode)return!1;for(var t=e.parentNode.childNodes||[],n=0;n<t.length;n++){
if("br"===(t[n].nodeName||"").toLowerCase())return!0}return!1}(e)}return!1}function H(e,t){return e.getAttribute&&e.getAttribute(t)}function B(e){if(e.textContent)return e.textContent
;if(e.nodeType==R.TEXT_NODE)return e.nodeValue||"";for(var t="",n=0;n<e.childNodes.length;n++)t+=B(e.childNodes[n]);return t}function Z(e){return function(e){
return j(e.replace(/\u200b/g,"").replace(/\u200d/g,"").replace(/[\n\r\xa0]/g," ").replace(/\t/g,"        "))}(e).replace(/-/g," ")}function j(e){
e=(e=e.replace(A.DENIED_UNICODE_CHARS_1,"�")).replace(A.DENIED_UNICODE_CHARS_2,"��");return e=A.fixBadUnicodeSequence(e)}var W=function(){function e(){this.textArray_=[];this.attribsArray_=[]
;this.attribsBuilder_=null;this.op_=f.newOp("+");this.listObjectByLine_=[];this.isMarked=!1;this.isTentativeNewline=!1;this.isTentativeNewlineUncancelable=!1;this.startNew()}
e.prototype.length=function(){return this.textArray_.length};e.prototype.atColumnZero=function(){return""===this.textArray_[this.textArray_.length-1]};e.prototype.startNew=function(){this.isMarked=!1
;this.isTentativeNewline=!1;this.textArray_.push("");this.flush(!0);this.attribsBuilder_=f.smartOpAssembler()};e.prototype.textOfLine=function(e){return this.textArray_[e]}
;e.prototype.appendText=function(e,t){if(e.length>0){this.isMarked=!1;this.isTentativeNewline&&this.startNew();this.isTentativeNewline=!1;this.textArray_[this.textArray_.length-1]+=e
;this.op_.attribs=t;this.op_.chars=e.length;this.attribsBuilder_.append(this.op_)}};e.prototype.textLines=function(){return this.textArray_.slice()};e.prototype.attribLines=function(){
return this.attribsArray_};e.prototype.flush=function(e){if(this.attribsBuilder_){this.attribsArray_.push(this.attribsBuilder_.toString());this.attribsBuilder_=null}}
;e.prototype.getPreviousNumberListObject=function(e){for(var t=""==this.textArray_[this.textArray_.length-1]?this.textArray_.length-2:this.textArray_.length-1;t>=0;){var n=this.listObjectByLine_[t]
;if(!n)return null;var o=n.type.match(/^(\w+)(\d+)$/);if(!o)return null;var i=o[1],r=Number(o[2]);if(r==e&&"number"==i)return n;if(r<e)return null;t--}return null}
;e.prototype.notifyListObject=function(e){this.listObjectByLine_[this.textArray_.length-1]=e};e.prototype.markThisPositionToIgnoreBlockNewlines=function(){this.isMarked=!0}
;e.prototype.getIsPositionMarkedToIgnoreBlockNewlines=function(){return this.isMarked};e.prototype.setTentativeNewline=function(e){this.isTentativeNewline=!0
;e&&(this.isTentativeNewlineUncancelable=!0)};e.prototype.hasTentativeNewline=function(){return this.isTentativeNewline};e.prototype.cancelTentativeNewline=function(){
this.isTentativeNewlineUncancelable||(this.isTentativeNewline=!1)};return e}(),V=new RegExp("thread-([0-9a-zA-Z]+)","g");function K(e,t){var n=function(e){return{composerLinkUnifiedRe:new RegExp((0,
O.unifiedPadLinkRegexStringForHostName)(e),"g")}}(e);return c.__assign(c.__assign(c.__assign({},{dropboxCloudDocSclLinkRe:m.DROPBOX_SCL_CLOUD_DOCS_LINKS_REGEX}),n),function(e){return{
composerFolderLinkRe:new RegExp("((?:http|https)://"+e+"/(?:folder|project)/show/([^\\s#]+)-(e\\.[a-zA-Z0-9]+))","g"),
composerImageRedirectRe:new RegExp("((?:http|https)://"+e+"(?:".concat(g.default.urlPrefix,")?")+m.IMAGE_REDIRECT_ROUTE+"\\?.*url=([a-zA-Z0-9%_\\.\\+\\-]+)\\&[^\\s]+)","g")}}(e))}
t.makeContentCollectorWithoutWidgets=function(e,t,n,o){return new G(e,t,n,o)};var G=function(){function e(e,t,n,o){void 0===o&&(o={});this.contentTypeRegistry=e;this.apool_=t;this.className2Author_=n
;this.options_=o;this.allCollectedNodes_=[];this.lines_=new W;this.startPoint_=void 0;this.endPoint_=void 0;this.selStart_={line:-1,col:-1};this.selEnd_={line:-1,col:-1};this.nestedGutters_=0
;this.newAuthors_=[];this.additionalZatext_={text:{},attribs:{},rows:{},cols:{}};this.lastLineWithTable_=-1;this.uploadsToMake_=[];this.unfurlsToTry_=[];this.pastedGalleryItems_=[]
;this.linesStack_=[this.lines_];this.comments_=null;this.hasUnfurledDocMentions=!1;this.composerLinkUnifiedRe_=void 0;this.composerFolderLinkRe_=void 0;this.composerImageRedirectRe_=void 0
;this.dropboxCloudDocSclLinkRe_=void 0;this.idgen_=this.options_.deterministicIds?new J:new $;this.comments_=this.options_.comments
;this.allowedEmbedsForPasting_=this.options_.allowedEmbedsForPasting||s.None;this.initRegexes()}Object.defineProperty(e.prototype,"idgen",{get:function(){return this.idgen_},enumerable:!1,
configurable:!0});Object.defineProperty(e.prototype,"additionalZatext",{get:function(){return this.additionalZatext_},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"apool",{
get:function(){return this.apool_},enumerable:!1,configurable:!0});e.prototype.initRegexes=function(){if(this.options_.hostname){var e=K(this.options_.hostname,this.options_.editorType)
;this.populateRegexes(e)}else{D="undefined"!=typeof location?location.host:g.default.paperCanonicalDomain;this.options_.hostname=D;e=function(e,t){return M||(M=K(e))}(D,this.options_.editorType)
;this.populateRegexes(e)}};e.prototype.populateRegexes=function(e){this.composerLinkUnifiedRe_=e.composerLinkUnifiedRe;this.composerFolderLinkRe_=e.composerFolderLinkRe
;this.composerImageRedirectRe_=e.composerImageRedirectRe;this.dropboxCloudDocSclLinkRe_=e.dropboxCloudDocSclLinkRe};Object.defineProperty(e.prototype,"isAllowedToInsertMedia",{get:function(){
return!this.options_.disabledMediaTypes},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"isAllowedToInsertImage",{get:function(){
return this.isAllowedToInsertMedia||this.options_.disabledMediaTypes===l.ALL_EXCEPT_IMAGES},enumerable:!1,configurable:!0});e.prototype.isAllowedToPasteEmbed=function(e){
switch(this.allowedEmbedsForPasting_){case s.AllEmbeds:return!0;case s.None:return!1;case s.OnlyConfiguredEmbeds:0;return!(e.experiment&&!x.isOnButDoNotLog(e.experiment));default:
throw new Error("invalid allowedEmbedForPasting")}};e.prototype._ensureColumnZero=function(e){this.lines_.atColumnZero()||this.startNewLine(e)};e.prototype._pushNewLines=function(){var e=new W
;this.lines_=e;this.linesStack_.push(e);return e};e.prototype._popLines=function(){var e=this.linesStack_.pop();this.lines_=this.linesStack_[this.linesStack_.length-1];return e}
;e.prototype._isEmpty=function(e){return 0==e.childNodes.length};e.prototype._pointHere=function(e,t){var n=this.lines_.length()-1,o=this.lines_.textOfLine(n).length
;0==o&&t.list&&"none"!=t.list.type&&(o+=1);return{line:n,col:o+=e}};e.prototype._reachBlockPoint=function(e,t,n){this.linesStack_.length>1||F(e)||this._reachPoint(e,t,n)}
;e.prototype._reachPoint=function(e,t,n){if(!(this.linesStack_.length>1)){this.startPoint_&&e==this.startPoint_.node&&this.startPoint_.index==t&&(this.selStart_=this._pointHere(0,n))
;this.endPoint_&&e==this.endPoint_.node&&this.endPoint_.index==t&&(this.selEnd_=this._pointHere(0,n))}};e.prototype._reachAllPoints=function(e,t){if(!(this.linesStack_.length>1)){
this.startPoint_&&this.startPoint_.node==t&&(this.selStart_=this._pointHere(0,e));this.endPoint_&&this.endPoint_.node==t&&(this.selEnd_=this._pointHere(0,e))
;if(!F(t))for(var n=0;n<t.childNodes.length;n++)this._reachAllPoints(e,t.childNodes[n])}};e.prototype._reachInlineMagicObject=function(e,t){var n=this;if(!(this.linesStack_.length>1)){
var o=-1,i=function(t){n.startPoint_&&n.startPoint_.node==t&&(n.selStart_=n._pointHere(o,e));if(F(t))-1==o&&(o=0);else for(var r=0;r<t.childNodes.length;r++)i(t.childNodes[r])
;n.endPoint_&&n.endPoint_.node==t&&(n.selEnd_=n._pointHere(o,e))};i(t)}};e.prototype._enterList=function(e,t,n,o,i){e.pasted&&!p.isValidKeyValuePair("list",t,this.contentTypeRegistry)&&(t="bullet1")
;var r=null;if(0==t.indexOf("number")){var a=parseInt(t.substring(6),10);r=this.lines_.getPreviousNumberListObject(a)}var s=!!(0==t.indexOf("code")||e.list&&e.list.isOrIsInsideCode)
;s&&(e.dontRegex=!0);if(r)e.list=r;else{var l=e.list?e.list.nesting:0;"none"!=t&&(l+=1);e.list=new X(t,o,i,l,s)}e.list&&n&&(e.list.usuallyUniqueId=n);this._recalcAttribString(e)}
;e.prototype._recalcAttribString=function(e){var t=[];for(var n in e.booleanAttribs)e.booleanAttribs[n]&&t.push([n,"true"])
;null!==e.contentTypeAttributes&&(t=t.concat(u.toPairs(e.contentTypeAttributes)));var o=e.mentionPadId||e.mentionFolderId||e.mentionCloudDocScl||e.mentionUrl||e.mentionSpecial;if(e.link&&!o){
var i=["link",e.link];t.push(i)}e.mentionCloudDocScl&&t.push(["mentionCloudDocScl",e.mentionCloudDocScl])
;e.highlightColor&&t.push(["highlight",P.TextHighlightColors.getAttributeForHighlight(e.highlightColor)]);o&&"*"==e.mentionFakeText&&t.push(["magicObject","mention"])
;e.mentionUrl&&t.push(["mentionurl",e.mentionUrl]);e.mentionSignature&&t.push(["mentionsig",e.mentionSignature]);e.mentionText&&t.push(["mentiontext",e.mentionText])
;e.mentionCreated&&t.push(["mentioncreated",e.mentionCreated]);e.mentionPadId&&t.push(["mentionpadid",e.mentionPadId])
;e.unreadNotificationIds&&t.push(["clientside-unreadNotificationIds",e.unreadNotificationIds]);o&&e.usuallyUniqueId&&t.push(["usuallyUniqueId",e.usuallyUniqueId])
;e.mentionFolderId&&t.push(["mentionfolderid",e.mentionFolderId]);e.mentionSpecial&&t.push(["mentionspecial",e.mentionSpecial]);e.mentionSoft&&t.push(["mentionsoft",e.mentionSoft])
;e.potentialUnfurlEmbedId&&t.push(["clientside-potential-unfurl-embed-id",e.potentialUnfurlEmbedId]);if(e.gallery){t.push(["magicObject","gallery"],["gallery",JSON.stringify(e.gallery)])
;e.fullWidth&&t.push(["fullWidth","true"]);e.floatValue&&t.push(["float",e.floatValue])}e.hr&&t.push(["magicObject","hr"],["hr","true"]);if(null!==e.latex){t.push(["magicObject","latex"])
;e.latex&&t.push(["latex",e.latex])}if(e.customEmoji){t.push(["magicObject","customEmoji"]);t.push(["customEmoji",e.customEmoji])}if(e.table&&e.table.getAttrib()){
e.fullWidth&&t.push(["fullWidth","true"]);e.hasTopHeader&&t.push(["table-top-header","1"]);e.hasSideHeader&&t.push(["table-side-header","1"]);e.table.getAttrib().forEach((function(e){t.push(e)}))}
if(e.threads)for(var r in e.threads){var a=["thread-"+r,e.threads[r]];t.push(a)}e.author&&t.push(["author",e.author]);e.unknownObject&&t.push(["magicObject",e.unknownObject])
;if(this.options_.includeMagicObjectIds&&e.magicObjectId){for(var s=!1,l=0,d=t;l<d.length;l++){if("magicObject"===d[l][0]){s=!0;break}}s&&t.push(["clientside-magicObjectId",e.magicObjectId])}
e.attribString=f.makeAttribsString("+",t,this.apool_)};e.prototype._produceListMarkerIfNecessary=function(e){
(0==this.lines_.textOfLine(this.lines_.length()-1).length||this.lines_.hasTentativeNewline())&&e.list&&"none"!=e.list.type&&this._produceListMarker(e)};e.prototype._produceListMarker=function(e){
if(!e.list)throw new Error("state.list be exist");if(e.list.isOrIsInsideCode&&0!=e.list.type.indexOf("code"))this._produceListMarkerInsideCode(e);else{
var t=[["list",e.list.type],["insertorder","first"]];e.list.originalStart&&e.list.originalStart>1&&t.push(["originalstart",String(e.list.originalStart)]);if(e.list.start){
t.push(["start",String(e.list.start)]);e.list.start++}e.list.taskCreated&&t.push(["taskcreated",e.list.taskCreated]);e.list.taskCompleted&&t.push(["taskcompleted",e.list.taskCompleted])
;e.list.dueDate&&t.push(["dueDate",e.list.dueDate]);e.list.dueDateAssigner&&t.push(["dueDateAssigner",e.list.dueDateAssigner]);e.list.collapse.length&&t.push.apply(t,e.list.collapse)
;e.lang&&t.push(["lang",e.lang]);e.list.usuallyUniqueId&&t.push(["usuallyUniqueId",e.list.usuallyUniqueId]);e.author&&t.push(["author",e.author])
;this.lines_.appendText("*",f.makeAttribsString("+",t,this.apool_));this.lines_.notifyListObject(e.list)}};e.prototype._produceListMarkerInsideCode=function(e){
if(!e.list)throw new Error("state.list be exist");var t=[["list","code1"],["insertorder","first"]];e.lang&&t.push(["lang",e.lang]);e.author&&t.push(["author",e.author])
;e.usuallyUniqueId&&t.push(["usuallyUniqueId",e.usuallyUniqueId]);this.lines_.appendText("*",f.makeAttribsString("+",t,this.apool_));var n=(0,C.listTypeToTextRepresentation)(e.list.type,e.list.start)
;e.list.start&&e.list.start++;t=[];e.author&&t.push(["author",e.author]);this.lines_.appendText(n,f.makeAttribsString("+",t,this.apool_));this.lines_.notifyListObject(e.list)}
;e.prototype._renderPrettyLink=function(e,t,n,o,i,r){r&&(e.link=r);this._recalcAttribString(e);this.setSelectionFromTextNode_(e,t,n,n+o.length,i.length);this.lines_.appendText(i,e.attribString)
;e.link=null;this._recalcAttribString(e);this.setSelectionFromTextNode_(e,t,n+o.length,n+o.length,0);return""};e.prototype._renderNotesMention=function(e,t,n,o,i,r,a){var s=Z(i||"Untitled");e[r]=a
;e.mentionText=s;e.mentionFakeText="*";this._recalcAttribString(e);this.setSelectionFromTextNode_(e,t,n,n+o.length,1);this.lines_.appendText("*",e.attribString);e[r]=null;e.mentionText=null
;this._recalcAttribString(e);this.lines_.appendText(" ","");this.setSelectionFromTextNode_(e,t,n+o.length,n+o.length,0);return""};e.prototype._renderPadMention=function(e,t,n,o,i,r,a){
this.hasUnfurledDocMentions=!0;return this._renderNotesMention(e,t,n,o,r,d.MentionPadId,a)};e.prototype._renderCloudDocMention=function(e,t,n,o,i,r){this.hasUnfurledDocMentions=!0
;return this._renderNotesMention(e,t,n,o,r,d.MentionCloudDocScl,i)};e.prototype._renderFolderMention=function(e,t,n,o,i,r,a){return this._renderNotesMention(e,t,n,o,r,d.MentionFolderId,a)}
;e.prototype.startNewLine=function(e){this.nestedGutters_=0;if(e){0==this.lines_.textOfLine(this.lines_.length()-1).length&&e.list&&"none"!=e.list.type&&this._produceListMarker(e)}
this.lines_.startNew()};e.prototype.notifySelection=function(e){if(e){this.startPoint_=e.startPoint;this.endPoint_=e.endPoint}};e.prototype.doBooleanAttrib=function(e,t){e.booleanAttribs[t]=!0
;this._recalcAttribString(e)};e.prototype.notifyNode=function(e){this.allCollectedNodes_.push(e)};e.prototype.collectContent=function(e,t){var n;n=t?{link:t.link,
mentionCloudDocScl:t.mentionCloudDocScl,processedLink:t.processedLink,threads:u.clone(t.threads),booleanAttribs:u.clone(t.booleanAttribs),attribString:t.attribString,table:t.table,
hasTopHeader:t.hasTopHeader,hasSideHeader:t.hasSideHeader,author:t.author,lang:t.lang,list:t.list,highlightColor:t.highlightColor,mentionUrl:t.mentionUrl,mentionSignature:t.mentionSignature,
mentionText:t.mentionText,mentionCreated:t.mentionCreated,mentionPadId:t.mentionPadId,mentionSpecial:t.mentionSpecial,mentionSoft:t.mentionSoft,unreadNotificationIds:t.unreadNotificationIds,
usuallyUniqueId:t.usuallyUniqueId,mentionFolderId:t.mentionFolderId,mentionFakeText:t.mentionFakeText,floatValue:t.floatValue,fullWidth:t.fullWidth,naturalWidth:t.naturalWidth,
naturalHeight:t.naturalHeight,gallery:t.gallery,hr:t.hr,latex:t.latex,customEmoji:t.customEmoji,potentialUnfurlEmbedId:t.potentialUnfurlEmbedId,unknownObject:t.unknownObject,
magicObjectId:t.magicObjectId,dontRegex:t.dontRegex,pasted:t.pasted,contentTypeAttributes:t.contentTypeAttributes}:{link:null,processedLink:null,threads:null,booleanAttribs:{},attribString:"",
highlightColor:null,table:null,hasTopHeader:null,hasSideHeader:null,author:null,lang:null,list:null,mentionUrl:null,mentionSignature:null,mentionText:null,mentionCreated:null,mentionPadId:null,
mentionSpecial:null,mentionSoft:null,mentionFolderId:null,mentionFakeText:null,mentionCloudDocScl:null,unreadNotificationIds:null,usuallyUniqueId:null,floatValue:null,fullWidth:null,naturalWidth:null,
naturalHeight:null,gallery:null,hr:!1,latex:null,customEmoji:null,potentialUnfurlEmbedId:null,unknownObject:null,magicObjectId:null,dontRegex:!1,pasted:!1,contentTypeAttributes:null};var o={
isEmpty:!1,collectChildren:!1,styl:""};o.isEmpty=this._isEmpty(e);var i=!1
;e._contentcollector_isblock&&((i="LI"==e.nodeName)?this._ensureColumnZero(n):"true"==H(e,"data-ace-ignore-block-newlines")?this.lines_.markThisPositionToIgnoreBlockNewlines():this.lines_.getIsPositionMarkedToIgnoreBlockNewlines()||this._ensureColumnZero(n))
;o.collectChildren=!0;this._reachBlockPoint(e,0,n);F(e)?this.collectContentFromTextNode_(n,e):e.nodeType===R.ELEMENT_NODE&&this.collectContentFromDomNode_(n,o,e);this._reachBlockPoint(e,1,n)
;e._contentcollector_isblock&&("true"==H(e,"data-ace-ignore-block-newlines")?this.lines_.cancelTentativeNewline():this.lines_.atColumnZero()||this.lines_.setTentativeNewline(i))}
;e.prototype.collectContentFromTextNode_=function(e,t){if(!e.table||e.table.isInCell()){var n=t.nodeValue;if(0!=n.length){
for(var o=0,i=(n=this.collapseWhitespaceInTextNode_(e,t)).split("\n"),r=0;r<i.length;r++){var a=i[r];if(r==i.length-1&&""==a)break;0==a.length&&this.setSelectionFromTextNode_(e,t,o,o,0)
;this._produceListMarkerIfNecessary(e);this.collectRegexContentFromTextNode_(e,t,o,a);o+=a.length+1;r<i.length-1&&this.startNewLine(e)}this.setSelectionFromTextNode_(e,t,o,o,0)
}else this.setSelectionFromTextNode_(e,t,0,0,0)}else this._reachAllPoints(e,t)};e.prototype.collapseWhitespaceInTextNode_=function(e,t){
var n=t.nodeValue,o=this.startPoint_&&this.startPoint_.node==t?this.startPoint_.index:null,i=this.endPoint_&&this.endPoint_.node==t?this.endPoint_.index:null;if(t._contentcollector_whitespace_pre){
for(var r="",a=0;a<n.length;a++){r+=9==(d=n.charCodeAt(a))?"        ":13==d||8203==d?"":160==d?" ":n.charAt(a);null!==o&&o==a+1&&(this.startPoint_={node:t,index:r.length})
;null!==i&&i==a+1&&(this.endPoint_={node:t,index:r.length})}return j(r)}null!==o&&o<=t._contentcollector_start_index&&(this.startPoint_={node:t,index:0})
;null!==i&&i<=t._contentcollector_start_index&&(this.endPoint_={node:t,index:0});var s="",l=!1;for(a=t._contentcollector_start_index;a<t._contentcollector_end_index;a++){var d
;if(ne(d=n.charCodeAt(a))){l||(s+=" ");l=!0}else if(160==d){s+=" ";l=!1}else if(8203==d)l=!1;else{s+=n.charAt(a);l=!1}null!==o&&o==a+1&&(this.startPoint_={node:t,index:s.length})
;null!==i&&i==a+1&&(this.endPoint_={node:t,index:s.length})}null!==o&&o>t._contentcollector_end_index&&(this.startPoint_={node:t,index:s.length})
;null!==i&&i>t._contentcollector_end_index&&(this.endPoint_={node:t,index:s.length});return j(s)};e.prototype.setSelectionFromTextNode_=function(e,t,n,o,i){!e.table||(i=0)
;i>0&&this.lines_.hasTentativeNewline()&&this.lines_.startNew();if(this.startPoint_&&t==this.startPoint_.node&&this.startPoint_.index>=n&&this.startPoint_.index<=o){
var r=Math.min(i,this.startPoint_.index-n);this.selStart_=this._pointHere(r,e)}if(this.endPoint_&&t==this.endPoint_.node&&this.endPoint_.index>=n&&this.endPoint_.index<=o){
r=Math.min(i,this.endPoint_.index-n);this.selEnd_=this._pointHere(r,e)}};e.prototype.collectRegexContentFromTextNode_=function(e,t,n,o){var i=this.findContentInTextNode_(e,o)
;i=this.flattenAndSortMatches_(i,o);for(var r=0;r<i.length;r++){var a=i[r];a.render.call(this,e,t,n,o.substr(a.index,a.length),a.match,a.embed||null);n+=a.length}}
;e.prototype.findContentInTextNode_=function(e,t){if(!e.pasted||e.dontRegex)return[];var n=[],o=[]
;this.dropboxCloudDocSclLinkRe_&&this.findAllMatches_(n,t,this.dropboxCloudDocSclLinkRe_,this.renderDropboxCloudDocSclLink_,(function(e){var t=e[1],n=e[3];return!!t&&n in m.DROPBOX_SCL_ALL_EXTENSIONS
}));if(t.indexOf(this.options_.hostname)>-1){this.composerFolderLinkRe_&&this.findAllMatches_(n,t,this.composerFolderLinkRe_,this.renderComposerFolderLink_,(function(){return!0}))
;this.composerLinkUnifiedRe_&&this.findAllMatches_(n,t,this.composerLinkUnifiedRe_,this.renderComposerLinkUnifiedRe_,(function(e){return!!e[4]}))
;this.composerImageRedirectRe_&&this.findAllMatches_(n,t,this.composerImageRedirectRe_,this.renderComposerImageRedirectLinkAsImage_,(function(e){return!!e[2]}))}
if(this.isAllowedToInsertMedia&&!e.processedLink){var i=this.lines_.atColumnZero(),r=e.list&&-1!=e.list.type.indexOf("indent")&&"*"==this.lines_.textOfLine(0);if(i||r){
this.findAllMatches_(o,t,m.REGEX_EMBED,null);n=n.concat(this.filterEmbedMatches_(o))}}return n};e.prototype.findAllMatches_=function(e,t,n,o,i){n.lastIndex=0;for(var r;r=n.exec(t);)i&&!i(r)||e.push({
index:r.index,length:r[0].length,match:r,render:o})};e.prototype.filterEmbedMatches_=function(e){var t=this;e.forEach((function(n,o){var i=n.match[1]||n.match[2],r=v.getInfoForUrl(i,!1);if(r){
e[o].render=t.renderEmbed_;e[o].match=r.matches;e[o].embed=r.embed}}));return e.filter((function(e){return!!e.render}))};e.prototype.flattenAndSortMatches_=function(e,t){
for(var n=0;n<e.length;n++)for(var o=n+1;o<e.length;o++){var i=e[n].index,r=e[n].index+e[n].length,a=e[o].index,s=e[o].index+e[o].length;if(!(r<=a)&&!(s<=i)){e.splice(o,1);o--}}e.sort((function(e,t){
return e.index-t.index}));var l=[],d=0;for(n=0;n<e.length;n++){var c=e[n];d<c.index&&l.push({index:d,length:c.index-d,render:this.renderText_});d=c.index+c.length;l.push(c)}d<t.length&&l.push({
index:d,length:t.length-d,render:this.renderText_});return l};e.prototype.renderText_=function(e,t,n,o){this.setSelectionFromTextNode_(e,t,n,n+o.length,o.length)
;this.lines_.appendText(o,e.attribString)};e.prototype.createMedia_=function(e,t,n,o,i,r,a,s){var l=e.trim();if(!t.link){this._ensureColumnZero(t);var d={type:s,url:l};this.pastedGalleryItems_.push(d)
;t.gallery={items:[d]};this._recalcAttribString(t);this.lines_.appendText("*",t.attribString);t.gallery=null;this._recalcAttribString(t)
;this.options_.disableMediaUrlInPastedEmbed||this.startNewLine(t);t.list&&"none"!=t.list.type&&this._produceListMarker(t)}r&&this._renderPrettyLink(t,n,o,i,r,a)}
;e.prototype.renderEmbed_=function(e,t,n,o,s,l){var d=null,c=null;try{d=l.linkUrlFn(s);c=(0,L.parseURIOrThrow)(d)}catch(e){}if(c){
var u=l.srcUrlFn(s),h=this.options_.disableMediaUrlInPastedEmbed?"":l.prettyTextFn(s);if(this.isAllowedToPasteEmbed(l)){if("unfurl"===l.slug){
e.potentialUnfurlEmbedId=this.idgen_.potentialUnfurlEmbedId();this._recalcAttribString(e);this.unfurlsToTry_.push({url:d,id:e.potentialUnfurlEmbedId});this.renderText_(e,t,n,o)
;e.potentialUnfurlEmbedId=null;this._recalcAttribString(e)}else this.createMedia_(u,e,t,n,o,h,d,l.slug);if(r){var p={__domain:c.authority,slug:l.slug};if("dropbox"===l.slug)try{var f=(0,
L.parseURIOrThrow)(d).getPath().split("/").pop()||"",g=(0,_.parseFileExtension)(f).extension;g&&(p.file_type=g)}catch(e){}a.PasteEmbed.track(p)
;"image"!=l.slug&&"dropbox-image"!=l.slug&&a.PasteNonImageEmbed.track(p);!i||"dropbox-image"!=l.slug&&"dropbox"!=l.slug||i(d)}}else this.renderText_(e,t,n,o)}else this.renderText_(e,t,n,o)}
;e.prototype.renderComposerImageRedirectLinkAsImage_=function(e,t,n,o,i){var r;if(i[2])try{r=decodeURIComponent(i[2])}catch(e){}if(r&&this.isAllowedToInsertImage){this._ensureColumnZero(e);e.gallery={
items:[{url:r,type:"image"}]};this._recalcAttribString(e);this.setSelectionFromTextNode_(e,t,n,n+o.length,1);this.lines_.appendText("*",e.attribString);e.gallery=null;this._recalcAttribString(e)
;this.startNewLine(e);this.setSelectionFromTextNode_(e,t,n+o.length,n+o.length,0)}else this.renderText_(e,t,n,o)};e.prototype.getHeadingTitle=function(e){var t=e||"";if(t.indexOf("#:")>=0){
var n=t.split("#:"),o=k.parsePadFocusOptionsFromUrlSuffix("#:"+n[1]);t=o.headingLine||o.headingLine2?n[0]+": "+(o.headingLine||o.headingLine2):""}return t};e.prototype.buildTitle=function(e,t){t=t||""
;return 0==(e=e||"").length?t.length>0&&0!=t.indexOf("#:")?t.substr(1):e:e+this.getHeadingTitle(t)};e.prototype.buildPadId=function(e,t,n){n=n||""
;return 0==(e=e||"").length||n.length>0&&0!=n.indexOf("#:")?t:t+n};e.prototype.renderComposerLinkUnifiedRe_=function(e,t,n,o,i){
this._renderPadMention(e,t,n,o,i[1],this.buildTitle(i[2],i[5]),this.buildPadId(i[2],i[4],i[5]))};e.prototype.renderComposerFolderLink_=function(e,t,n,o,i){
this._renderFolderMention(e,t,n,o,i[1],i[2],i[3])};e.prototype.renderDropboxCloudDocSclLink_=function(e,t,n,o,i){var r=decodeURIComponent(i[3]),a=decodeURIComponent(i[2])
;if(!(r in m.DROPBOX_SCL_ALL_EXTENSIONS)){var s="".concat(a,".").concat(r);return this._renderPrettyLink(e,t,n,o,s,o)}var l=i[5];this._renderCloudDocMention(e,t,n,o,o,this.buildTitle(a,l))}
;e.prototype.collectContentFromDomNode_=function(e,t,n){var o=(n.nodeName||"").toLowerCase(),i=(H(n,"class")||"").split(" ")
;if(i.indexOf("ace-line-pocket")>=0)this._reachAllPoints(e,n);else if(i.indexOf("ace-copy-paste-hide")>=0)this._reachAllPoints(e,n);else if(i.indexOf("ace-cc-ignore")>=0)this._reachAllPoints(e,n);else{
H(n,"data-clientside-magic-object-id")?e.magicObjectId=H(n,"data-clientside-magic-object-id"):H(n,"data-preservation-id")&&(e.magicObjectId=H(n,"data-preservation-id"))
;var r=this.contentTypeRegistry.isContentTypeElementAllowed(n,this.options_)
;if(U(n))this.startNewLine(e);else if("script"==o||"style"==o);else if(r)this.collectContentType(e,n);else if(H(n,"data-emoji-ch")){this._produceListMarkerIfNecessary(e)
;this.lines_.appendText(H(n,"data-emoji-ch"),e.attribString)}else if("true"===H(n,"data-custom-emoji-magic-object")){this._produceListMarkerIfNecessary(e);e.customEmoji=JSON.stringify({
url:H(n,"data-custom-emoji-magic-object-url")||"",tags:H(n,"data-custom-emoji-magic-object-tags")||""});this._recalcAttribString(e);this.lines_.appendText("*",e.attribString)
}else if(this.isAllowedToInsertImage&&"img"==o)H(n,"data-unknown-magic-object-type")?this.collectUnknownObjectFromDomNode_(e,n):this.collectImagesFromDomNode_(e,n);else if(this.isAllowedToInsertMedia&&!x.isOnButDoNotLog("paper_content_type_gallery")&&"span"==o&&i.indexOf("gallery-wrapper")>=0){
this.collectGalleryFromDomNode_(e,n);t.collectChildren=!1}else if("span"==o&&"latex"==H(n,"data-inline-magic"))this.collectLatexFromNode_(e,n);else if(!t.isEmpty||"td"==o||"th"==o||"tr"==o){
"span"==o&&this.ignoreSpaceIfNecessary_(n);t.styl=H(n,"style");this.options_.allowMagicInPasted&&"true"==H(n,"data-ace-pasted")&&(e.pasted=!0);this.collectStylesFromDomNode_(e,t,n,o,i)
;if(e.mentionFakeText){0==this.lines_.textOfLine(this.lines_.length()-1).length&&e.list&&"none"!=e.list.type&&this._produceListMarker(e);this.lines_.appendText(e.mentionFakeText,e.attribString)
;this._reachAllPoints(e,n);return}t.collectChildren&&this.collectContentFromChildren_(e,t,n,o)}}};e.prototype.collectContentType=function(e,t){var n=this.contentTypeRegistry.getZatextFromElement(t)
;if(n&&(!e.pasted||(n=this.contentTypeRegistry.cloneZatextFromCopyPaste(n)))){var o=n.zatext,i=n.pool,r=f.attribsToDict(o.attribs[S.Position.ROOT_ZONE],i)
;if(null!==r)if(this.contentTypeRegistry.isInline(r.magicObject)){this._produceListMarkerIfNecessary(e);e.contentTypeAttributes=r;this._recalcAttribString(e);this.lines_.appendText("*",e.attribString)
}else{this._ensureColumnZero(e);this._reachAllPoints(e,t);e.contentTypeAttributes=r;this._recalcAttribString(e);this.lines_.appendText("*",e.attribString);this._ensureColumnZero(e)}
var a=f.moveOpsToNewPoolForZatext(o,i,this.apool_);for(var s in o.text)if(s!==S.Position.ROOT_ZONE){this.additionalZatext_.text[s]=a.text[s];this.additionalZatext_.attribs[s]=a.attribs[s]}}}
;e.prototype.collectUnknownObjectFromDomNode_=function(e,t){e.unknownObject=H(t,"data-unknown-magic-object-type");this._recalcAttribString(e);this.lines_.appendText("*",e.attribString)}
;e.prototype.collectImagesFromDomNode_=function(e,t){var n=H(t,"src");if(n){n=n.replace(/ /g,"%20");this._ensureColumnZero(e);if(n.match(/^data:/)){var o=this.idgen_.attachmentId(),i=T.PIXEL_SRC
;this.uploadsToMake_.push({type:"data-url",dataUrl:n,attachmentId:o});e.gallery={items:[{type:"image",url:i,attachmentId:o}]}}else if(n.match(/^blob:/)){o=this.idgen_.attachmentId(),i=T.PIXEL_SRC
;this.uploadsToMake_.push({type:"blob-url",blobUrl:n,attachmentId:o});e.gallery={items:[{type:"image",url:i,attachmentId:o}]}}else{var r=H(t,"data-target-src");r&&(n=r);u.forEach((0,
N.getActiveImageS3ToCDNHostMap)(),(function(e,t){n=n.replace(e,t)}));var a={type:"image",url:n},s=H(t,"alt");if(s){var l=this.idgen_.zoneId("caption");a.innerZones={captionZone:l}
;var d=f.textToZatext(s);this.additionalZatext_.text[l]=d.text[S.Position.ROOT_ZONE];this.additionalZatext_.attribs[l]=d.attribs[S.Position.ROOT_ZONE]}e.gallery={items:[a]}}
e.naturalWidth=t.naturalWidth||null;e.naturalHeight=t.naturalHeight||null;e.link=null;this._recalcAttribString(e);this.lines_.appendText("*",e.attribString);e.gallery=null;e.naturalWidth=null
;e.naturalHeight=null;this._recalcAttribString(e);this.startNewLine(e)}};e.prototype.collectGalleryFromDomNode_=function(e,t){var n=this;this._ensureColumnZero(e);r&&r("ace-create-gallery")
;var o=JSON.parse(H(t,"data-ace-gallery-clipboard-json"));if(o){e.gallery={items:[]};o.items.forEach((function(t){var o=c.__assign({},t);if(n.comments_)for(var i in t)if(0==i.indexOf("thread-")){
var r=n.comments_.getThread(i.substring(7,i.length));r&&(o[i]=String(r.isComposing?r.secureAuthorId:!r.isDeleted))}var a=t.serializedZonesForClipboard;if(a){o.innerZones={};u.forEach(a,(function(e,t){
var i=n.idgen_.zoneId(t.match(/^[a-z]+/)[0]);o.innerZones[t]=i;n.additionalZatext_.text[i]=e.atext.text
;n.additionalZatext_.attribs[i]=f.moveOpsToNewPoolForZatext(f.makeZatext(e.atext.text,e.atext.attribs),(new h.default).fromJsonable(e.pool),n.apool_).attribs[S.Position.ROOT_ZONE]}))}
e.gallery.items.push(o);e.pasted&&n.pastedGalleryItems_.push(o)}))}else{var i=(H(t,"data-ace-gallery-urls")||"").split(" ");e.gallery={items:[]};i.forEach((function(t){var n=v.getInfoForUrl(t,!1)
;n&&e.gallery.items.push({type:n.embed.slug,url:t})}))}
this.doesAncestorHaveClass(t,"ace-float-left")?e.floatValue="left":this.doesAncestorHaveClass(t,"ace-float-right")?e.floatValue="right":this.doesAncestorHaveClass(t,"img-full-width")&&(e.fullWidth=!0)
;this._recalcAttribString(e);this.lines_.appendText("*",e.attribString);e.gallery=null;this._recalcAttribString(e);this.startNewLine(e)
;for(var a=0;a<t.childNodes.length;a++)this._reachAllPoints(e,t.childNodes[a])};e.prototype.collectLatexFromNode_=function(e,t){this._produceListMarkerIfNecessary(e)
;e.latex=H(t,"data-current-latex-value");this._recalcAttribString(e);this.lines_.appendText("*",e.attribString);this._reachInlineMagicObject(e,t)}
;e.prototype.collectStylesFromDomNode_=function(e,t,n,o,i){var r=t.styl&&/\bfont-weight:\s*normal\b/i.exec(t.styl),a=t.styl&&/(?:[^-]|^)(font-weight:\s*bold\b)/i.exec(t.styl);if(r){e.booleanAttribs={}
;this._recalcAttribString(e)}var s=H(n,"data-usually-unique-id");if(s){"li"==o||"h1"==o||"h2"==o?e.list&&(e.list.usuallyUniqueId=s):e.usuallyUniqueId=s;this._recalcAttribString(e)}
if(("b"==o||"strong"==o)&&!r||a)this.doBooleanAttrib(e,"bold");else if(t.styl){var l=t.styl.match(/(?:[^-]|^)(font-weight:\s*(\d+)\b)/i);if(l){Number(l[2])>=600&&this.doBooleanAttrib(e,"bold")}}
("i"==o||t.styl&&/\bfont-style:\s*italic\b/i.exec(t.styl)||"em"==o)&&-1==i.indexOf("listtype-quote")&&this.doBooleanAttrib(e,"italic");if(-1!=i.indexOf("highlight")){var d=H(n,"data-highlight-color")
;e.highlightColor=P.TextHighlightColors.isAllowedColor(d)?d:P.TextHighlightColors.defaultColor;this._recalcAttribString(e)}
if(!(-1==i.indexOf("inline-code")&&("code"!=o||-1!=i.indexOf("listtype-code"))||e.list&&e.list.isOrIsInsideCode)){this.doBooleanAttrib(e,"inline-code");e.dontRegex=!0}
!e.list&&t.styl&&this.collectMsoListFromNode_(e,t.styl,n);var c=["mention-content"].some((function(e){return-1!=i.indexOf(e)})),u=H(n,"class");if(u&&c){e.mentionText=H(n,"data-mentiontext")
;if(!e.mentionText){var h=B(n);"@"!=h.charAt(0)&&"+"!=h.charAt(0)||(h=h.slice(1));e.mentionText=h}e.mentionCloudDocScl=H(n,"data-mentionclouddocscl");e.mentionCreated=H(n,"data-mentioncreated")
;e.mentionPadId=H(n,"data-mentionpadid");e.mentionSpecial=H(n,"data-mentionspecial");e.mentionSoft=H(n,"data-mentionsoft");e.mentionFolderId=H(n,"data-mentionfolderid")
;e.mentionSignature=H(n,"data-mentionsig");var f=H(n,"data-mentionurl");e.mentionUrl=f?f.match(m.REGEX_PROTOCOL_OR_RELATIVE_URL)?f:"#":null;e.mentionFakeText=H(n,"data-mention-text-for-cc")||"*"
;e.unreadNotificationIds=H(n,"data-unread-notification-ids");e.dontRegex=!0;this._recalcAttribString(e)}
if(this.comments_&&u&&u.indexOf("thread-")>-1&&-1==i.indexOf("ace-line"))for(var g=void 0;g=V.exec(u);){var v=g[1],y=this.comments_.getThread(v);if(y){e.threads||(e.threads={})
;e.threads[v]=String(y.isComposing?y.secureAuthorId:!y.isDeleted);this._recalcAttribString(e)}}
("u"==o||t.styl&&/\btext-decoration:\s*underline\b/i.exec(t.styl)||"ins"==o)&&this.doBooleanAttrib(e,"underline")
;("s"==o||t.styl&&/\btext-decoration:\s*line-through\b/i.exec(t.styl)||"del"==o||"strike"==o)&&this.doBooleanAttrib(e,"strikethrough");"sup"==o&&this.doBooleanAttrib(e,"superscript")
;"sub"==o&&this.doBooleanAttrib(e,"subscript");if("a"==o&&H(n,"href"))if(-1!=i.indexOf("mention-content")||-1!=i.indexOf("dynamiclink"))e.dontRegex=!0;else{var b=H(n,"href"),C=H(n,"data-target-href")
;C&&(b=C);b.match(m.REGEX_PROTOCOL_OR_RELATIVE_URL)||(b="#");e.link=b;e.processedLink=-1!==i.indexOf("attrlink");this._recalcAttribString(e)}
i.indexOf("template-placeholder")>=0&&this.doBooleanAttrib(e,"placeholder");i.indexOf("dynamic-placeholder")>=0&&this.doBooleanAttrib(e,"dynamicPlaceholder")
;("ul"==o||"ol"==o||"code"==o||"pre"==o||"blockquote"==o||u&&u.indexOf("listtype-")>=0||-1!=i.indexOf("line-list-type-code"))&&this.collectListsFromDomNode_(e,t,n,i)
;"li"==o&&(i.indexOf("task-list-item")>=0?this.collectShowdownTaskListFromNode_(e,n):e.list&&this.collectExtraListAttributes(e,n))
;("div"==o||"p"==o)&&u&&/gutter/.exec(u)&&(this.nestedGutters_=this.nestedGutters_+1);("div"==o||"p"==o)&&i.indexOf("ace-line")
;if(!this.options_.disableHeaders&&("h1"==o||"h2"==o)&&-1==i.indexOf("ace-copy-paste-skip-this-tag")){this._enterList(e,{h1:"hone1",h2:"htwo1"}[o],s);this.collectExtraListAttributes(e,n)}if("h3"==o){
this.doBooleanAttrib(e,"bold");this._recalcAttribString(e)}if(this.className2Author_&&i.length)for(var E=0;E<i.length;E++){var I=i[E],_=this.className2Author_(I)
;if(_&&p.isValidKeyValuePair("author",_,this.contentTypeRegistry)&&(this.options_.acceptHackpadIdForAuthor&&p.quickCheckIsHackpadUserId(_)||p.quickCheckIsPaperSecureUserId(_))){e.author=_
;this._recalcAttribString(e);break}}var T=H(n,"data-potential-unfurl-embed-id");if(T){e.potentialUnfurlEmbedId=T;this._recalcAttribString(e)}}
;e.prototype.collectShowdownTaskListFromNode_=function(e,t){
for(var n="task",o=0;o<t.childNodes.length;++o)if("input"==(t.childNodes[o].nodeName||"").toLowerCase()&&null!==H(t.childNodes[o],"checked")){n="taskdone";break}var i=((e.list&&e.list.nesting||1)+1)/2
;n+=String(Math.min(8,i));this._enterList(e,n,H(t,"data-usually-unique-id"))};e.prototype.collectMsoListFromNode_=function(e,t,n){var o=t.match(/([^-\w]|^)mso-list:([^;]+)(;|$)/);if(o){
var i=o[2].match(/([^\w]|^)level(\d+)/);if(i){var r=Number(i[2]);r<=0&&(r=1);r>8&&(r=8);var a=this.listTypeForMsoList_(n),s=a.listType+String(r)
;"number"==a.listType?this._enterList(e,s,null,a.start,a.start):this._enterList(e,s,null)}}};e.prototype.listTypeForMsoList_=function(e){var t,n=function(e){if(F(e)){var t=e.nodeValue
;return/\S/.exec(t)?t:null}for(var o=e.childNodes.length,i=0;i<o;i++){var r=n(e.childNodes[i]);if(r)return r}return null},o=n(e);if(!o)return{listType:"bullet",start:void 0};if(t=o.match(/^(\d+)./)){
return{listType:"number",start:Number(t[1])}}return(t=o.match(/^(\w+)./))?{listType:"number",start:1}:{listType:"bullet",start:void 0}};e.prototype.skipChildNodesIfNecessary_=function(e,t,n){
if(!n.list)return t;var o=e.childNodes[t];if(z(o)){if("[if !supportLists]"==o.nodeValue){for(var i=t+1;i<e.childNodes.length;i++){var r=e.childNodes[i];if(z(r)&&"[endif]"==r.nodeValue){
for(var a=t;a<=i;a++)this._reachAllPoints(n,r);return i+1}}return t}return t}return t};e.prototype.getListType_=function(e){return"ol"==e?"number":"blockquote"==e?"quote":"bullet"}
;e.prototype.collectListsFromDomNode_=function(e,t,n,o){var i=(n.nodeName||"").toLowerCase(),r=H(n,"class"),a=r&&/(?:^| )list-(([a-z]+)[12345678]?)\b/.exec(r),s=a&&a[1]||this.getListType_(i),l=a&&a[1]
;if(!l){s=this.getListType_(i);t.styl&&t.styl.indexOf("list-style-type")>-1&&/\blist-style-type:\s*(decimal|lower|upper)/.exec(t.styl)&&(s="number")
;l=s+String(Math.min(8,(e.list&&e.list.nesting||0)+1))}if("code"==i||"pre"==i||0==l.indexOf("code")||-1!=o.indexOf("line-list-type-code")){0!==l.indexOf("code")&&(l="code1");if(e.pasted&&"code"==i){
var d=this.getParent_(n);if(d&&"pre"!=(d.nodeName||"").toLowerCase()&&!r)return}if(this.options_.disableCode)return}
if(!(this.options_.disableBulleted&&0==l.indexOf("bullet")||this.options_.disableNumbered&&0==l.indexOf("number")||this.options_.disableQuotes&&0==l.indexOf("quote")||this.options_.disableTasks&&0==l.indexOf("task"))){
var c=r&&/(?:^| )lang-((?:override-)?([a-zA-Z0-9_]+))\b/.exec(r);c&&c[1]&&(e.pasted&&!p.isValidKeyValuePair("lang",c[1],this.contentTypeRegistry)||(e.lang=c[1]))
;var u=parseInt(H(n,"start"),10)||("ol"==i?1:void 0);!u&&/^number/.exec(l)&&(u=1);var h=Number(H(n,"data-original-start"));h<=1&&(h=0)
;this.nestedGutters_>1&&l.indexOf("indent")>-1&&e.list&&-1==e.list.type.indexOf("indent")||this._enterList(e,l,H(n,"data-usually-unique-id"),u,h)}}
;e.prototype.collectExtraListAttributes=function(e,t){if(0==e.list.type.indexOf("h")&&e.list.type.match(/hone|htwo|hthree/)){H(t,"data-collapse-all")&&e.list.collapse.push(["collapse-all","true"])
;var n=H(t,"data-collapse-onlyme");n&&e.list.collapse.push(["clientside-collapse",n]);var o=H(t,"data-collapse-users");o&&o.split(",").forEach((function(t){
return e.list.collapse.push(["collapse-"+t,"true"])}))}if(0==e.list.type.indexOf("task")){
e.list.setTaskAttributes(H(t,"data-task-created"),H(t,"data-task-completed"),H(t,"data-due-date"),H(t,"data-due-date-assigner"));this._recalcAttribString(e)}}
;e.prototype.collectContentFromChildren_=function(e,t,n,o){var i=!1,r=!1,a=!1;if(!this.options_.disableTables)if("table"!=o||this.options_.disableTables){if(e.table&&!e.table.isInCell())if("tr"==o){
e.table.enterRow();i=!0}else if("td"==o||"th"==o){e.table.enterCell();r=!0}}else if(!e.table){e.table=new Y(this,n);e.list=null;e.fullWidth=this.doesAncestorHaveClass(n,(0,y.getFullWidthClassname)())
;e.hasTopHeader=this.doesAncestorHaveClass(n,"table-top-header");e.hasSideHeader=this.doesAncestorHaveClass(n,"table-side-header");a=!0}for(var s=n.childNodes.length,l=0;l<s;){
var d=this.skipChildNodesIfNecessary_(n,l,e);if(d>l)l=d;else{var c=n.childNodes[l];e.table&&e.table.isInCell()?e.table.collect(c,e):this.collectContent(c,e);l++}}if(a){e.table.exit()
;this._recalcAttribString(e);if(e.table.nonEmpty()){this.lastLineWithTable_=this.lines_.length()-1;this.lines_.appendText("*",e.attribString);this.lines_.startNew()}e.table=null
;this._recalcAttribString(e);this._reachAllPoints(e,n)}else i?e.table.exitRow():r&&e.table.exitCell()};e.prototype.collectHr_=function(e,t){this._ensureColumnZero(e);this._reachAllPoints(e,t);e.hr=!0
;this._recalcAttribString(e);this.lines_.appendText("*",e.attribString);this._ensureColumnZero(e)};e.prototype.ignoreSpaceIfNecessary_=function(e){
if(H(e,"data-contentcollector-ignore-space-at")&&e.childNodes.length>=1){var t="start"==H(e,"data-contentcollector-ignore-space-at"),n=e.childNodes[t?0:e.childNodes.length-1];if(F(n)){
var o=n.nodeValue,i=[" "," ","​","‍"]
;t?-1!=i.indexOf(o.charAt(0))&&(n._contentcollector_start_index=Math.max(n._contentcollector_start_index,1)):-1!=i.indexOf(o.slice(-1))&&(n._contentcollector_end_index=Math.min(n._contentcollector_end_index,o.length-1))
}}};e.prototype.getParent_=function(e){return e===this.currentRootNode?null:e.parentNode};e.prototype.doesAncestorHaveClass=function(e,t){for(var n=e;n;){
if(-1!=(H(n,"class")||"").split(" ").indexOf(t))return!0;n=this.getParent_(n)}return!1};e.prototype.finish=function(){var e=this
;new te(this.allCollectedNodes_,this.options_.useIESpaceRules).doAnalysis();this.allCollectedNodes_.forEach((function(t){e.currentRootNode=t;e.collectContent(t)}));this._ensureColumnZero(null)
;this.lines_.flush();var t=this.lines_.attribLines(),n=this.lines_.textLines();n.length--;t.length--;if(0==n.length){n.push("");t.push("")}
if(-1!=this.lastLineWithTable_&&this.lastLineWithTable_==n.length-1){n.push("");t.push("")}function i(e){if(1==e.col){if(e.line==n.length)return{line:e.line,col:0}
;if(0<=e.line&&e.line<n.length&&0==n[e.line].length)return{line:e.line,col:0}}return e}for(var r=i(this.selStart_),a=i(this.selEnd_),s=1e4,l=0,d=0,c=function(e){var o=n[e],i=t[e];if(o.length>10010){
for(var c=[],u=[];o.length>s;){var h=s;c.push(o.substring(0,h));o=o.substring(h);u.push(f.subattribution(i,0,h));i=f.subattribution(i,h)}if(o.length>0){c.push(o);u.push(i)}var p=function(t){
if(!(t.line<0)){var n=t.line,o=t.col;if(n>e)n+=c.length-1;else if(n==e){for(var i=0;o>c[i].length;){o-=c[i].length;i++}n+=i}t.line=n;t.col=o}};p(r);p(a);l++;d+=c.length;c.unshift(e,1)
;n.splice.apply(n,c);u.unshift(e,1);t.splice.apply(t,u)}},u=n.length-1;u>=0;u--)c(u);!function(){try{e.assertValidPosition(r,n);e.assertValidPosition(a,n)}catch(e){if(void 0===o)throw e
;o.logException(e);r={line:-1,col:-1};a={line:-1,col:-1}}}();0==Object.keys(this.additionalZatext_.rows).length&&delete this.additionalZatext_.rows
;0==Object.keys(this.additionalZatext_.cols).length&&delete this.additionalZatext_.cols;return{selStart:r,selEnd:a,linesWrapped:l,numLinesAfter:d,lines:n,lineAttribs:t,newAuthors:this.newAuthors_,
additionalZatext:this.additionalZatext_,uploadsToMake:this.uploadsToMake_,unfurlsToTry:this.unfurlsToTry_,pastedGalleryItems:this.pastedGalleryItems_,hasUnfurledDocMentions:this.hasUnfurledDocMentions
}};e.prototype.assertValidPosition=function(e,t){if((-1!=e.line||-1!=e.col)&&!(e.line==t.length&&0==e.col||e.line>=0&&e.line<t.length&&e.col>=0&&e.col<=t[e.line].length)){
var n="ContentCollector computed invalid position! line="+e.line+", col="+e.col+", number of lines="+t.length+(0<=e.line&&e.line<t.length?", line length="+t[e.line].length:"")+", nodes="
;this.allCollectedNodes_.forEach((function(e){n+=q(e)}));throw new Error(n)}};return e}();function q(e){if(!e)return"nullnode";if(F(e))return"TEXT("+e.nodeValue.length+")";var t=""
;if(e.attributes)for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n].nodeName;0==o.indexOf("data-")&&(t+=" "+o)}
var i="<"+e.nodeName+t+(H(e,"class")?' class="'+H(e,"class")+'"':"")+">",r=e.childNodes.length;for(n=0;n<r;n++){i+=q(e.childNodes[n])}return i+="</"+e.nodeName+">"}t.nodeToRedactedString=q
;var Y=function(){function e(e,t){this.collector=e;this.rowIndex=0;this.colIndex=0;this.inRow=!1;this.inCell=!1;this.cellData=[];this.attrib=null;this.colWidths=[];this.colHighlightColors=[]
;this.rowHighlightColors=[];var n=H(t,"data-ace-table-col-widths");n&&(this.colWidths=n.split(";"));var o=H(t,"data-ace-table-col-highlight-colors")
;o&&(this.colHighlightColors=o.split(";").map((function(e){return P.TableHighlightColors.isAllowedColor(e)?e:null})));var i=H(t,"data-ace-table-row-highlight-colors")
;i&&(this.rowHighlightColors=i.split(";").map((function(e){return P.TableHighlightColors.isAllowedColor(e)?e:null})))}e.prototype.enterRow=function(){this.inRow=!0};e.prototype.exitRow=function(){
this.inRow=!1;this.rowIndex++;this.colIndex=0};e.prototype.enterCell=function(){this.collector._pushNewLines();this.inCell=!0};e.prototype.exitCell=function(){var e=this.collector._popLines()
;this.rowIndex in this.cellData||(this.cellData[this.rowIndex]=[]);this.cellData[this.rowIndex][this.colIndex]=e;this.inCell=!1;this.colIndex++};e.prototype.isInRow=function(){return this.inRow}
;e.prototype.isInCell=function(){return this.inCell};e.prototype.collect=function(e,t){this.collector.collectContent(e,t)};e.prototype.exit=function(){var e=this,t=-1,n=-1
;this.cellData.forEach((function(e,o){e.forEach((function(e,i){t=Math.max(t,o);n=Math.max(n,i)}))}));if(!(t<0||n<0)){
for(var o=t+1,i=n+1,r=this.collector.idgen.rowsZoneId(),a=this.collector.idgen.colsZoneId(),s=[],l=[],d=0;d<o;d++)s.push(this.collector.idgen.rowId())
;for(d=0;d<i;d++)l.push(this.collector.idgen.colId());this.collector.additionalZatext.rows[r]=s;this.collector.additionalZatext.cols[a]=l
;this.collector.additionalZatext.attribs[r]=this.rowAttribs(s.length);this.collector.additionalZatext.attribs[a]=this.colAttribs(l.length);s.forEach((function(t,n){l.forEach((function(o,i){
if(e.cellData[n]&&e.cellData[n][i]){var r=w.getCellIdFromRowAndCol(t,o),a=e.cellData[n][i];a.flush();var s=a.attribLines(),l=a.textLines();if(""==l[l.length-1]){s=s.slice(0,s.length-1)
;l=l.slice(0,l.length-1)}if(0==l.length){e.collector.additionalZatext.text[r]="\n";e.collector.additionalZatext.attribs[r]="|1+1"}else{e.collector.additionalZatext.text[r]=l.join("\n")+"\n"
;e.collector.additionalZatext.attribs[r]=f.joinAttributionLinesAddingNewlines(s)}}}))}));this.attrib=[["magicObject","aceTable"],["aceTable",r+" "+a]]}};e.prototype.rowAttribs=function(e){
for(var t=f.smartOpAssembler(),n=0;n<e;n++){var o=void 0;o=this.rowHighlightColors[n]?f.makeAttribsString("+",[["table-highlight",this.rowHighlightColors[n]]],this.collector.apool):"";t.append({
opcode:"+",chars:1,lines:0,attribs:o})}return t.toString()};e.prototype.colAttribs=function(e){for(var t=f.smartOpAssembler(),n=0;n<e;n++){var o=[]
;this.colWidths[n]&&o.push(["colWidth",this.colWidths[n]]);this.colHighlightColors[n]&&o.push(["table-highlight",this.colHighlightColors[n]])
;var i=o.length?f.makeAttribsString("+",c.__spreadArray([],o,!0),this.collector.apool):"";t.append({opcode:"+",chars:1,lines:0,attribs:i})}return t.toString()};e.prototype.nonEmpty=function(){
return!!this.attrib};e.prototype.getAttrib=function(){return this.attrib};return e}(),X=function(){function e(e,t,n,o,i){this._type=e;this.start=t;this._originalStart=n;this._nesting=o
;this._isOrIsInsideCode=i;this._taskCreated=void 0;this._taskCompleted=void 0;this._dueDate=void 0;this._dueDateAssigner=void 0;this.usuallyUniqueId=void 0;this.collapse=[]}
e.prototype.setTaskAttributes=function(e,t,n,o){this._taskCreated=e;this._taskCompleted=t;this._dueDate=n;this._dueDateAssigner=o};Object.defineProperty(e.prototype,"type",{get:function(){
return this._type},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"originalStart",{get:function(){return this._originalStart},enumerable:!1,configurable:!0})
;Object.defineProperty(e.prototype,"nesting",{get:function(){return this._nesting},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"taskCreated",{get:function(){
return this._taskCreated},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"taskCompleted",{get:function(){return this._taskCompleted},enumerable:!1,configurable:!0})
;Object.defineProperty(e.prototype,"dueDate",{get:function(){return this._dueDate},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"dueDateAssigner",{get:function(){
return this._dueDateAssigner},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"isOrIsInsideCode",{get:function(){return this._isOrIsInsideCode},enumerable:!1,configurable:!0})
;return e}(),J=function(){function e(){this.n=1}e.prototype.rowsZoneId=function(){return""+this.n++};e.prototype.colsZoneId=function(){return""+this.n++};e.prototype.rowId=function(){return""+this.n++
};e.prototype.colId=function(){return""+this.n++};e.prototype.zoneId=function(e){return e+this.n++};e.prototype.attachmentId=function(){return"attachment-"+this.n++}
;e.prototype.potentialUnfurlEmbedId=function(){return""+this.n++};return e}(),Q=1,$=function(){function e(){}e.prototype.rowsZoneId=function(){return w.newUniqueRowsZoneId()}
;e.prototype.colsZoneId=function(){return w.newUniqueColsZoneId()};e.prototype.rowId=function(){return w.newUniqueRowId()};e.prototype.colId=function(){return w.newUniqueColId()}
;e.prototype.zoneId=function(e){return e+E.getStandardLengthRandomId()};e.prototype.attachmentId=function(){return(0,I.newAttachmentId)()};e.prototype.potentialUnfurlEmbedId=function(){
return String(Q++)+E.getStandardLengthRandomId()};return e}();t.StandardIDGen=$;var ee={div:1,p:1,pre:1,li:1,table:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},te=function(){function e(e,t){this.nodes=e
;this.lineTextNodes=[];this.useIERules=t}e.prototype.doAnalysis=function(){var e=this;this.startNewBlock();this.nodes.forEach((function(t){e.recurse(t,!1)}));this.startNewBlock()}
;e.prototype.startNewBlock=function(){this.useIERules||this.dropSpaceAtEnd();this.lineTextNodes=[];this.wasLastSpace=!0};e.prototype.doBr=function(){this.lineTextNodes=[];this.wasLastSpace=!0}
;e.prototype.doInlineImg=function(){this.wasLastSpace=!1;this.lineTextNodes.push({nodeValue:"fake-text-node-inline-img"})};e.prototype.dropSpaceAtEnd=function(){
for(var e=this.lineTextNodes.length-1;e>=0&&!this.lineTextNodes[e]._contentcollector_whitespace_pre;e--){var t=this.lineTextNodes[e].nodeValue,n=void 0;for(n=t.length;n>0&&ne(t.charCodeAt(n-1));n--);
this.lineTextNodes[e]._contentcollector_end_index=n;if(n>0)break}};e.prototype.recurse=function(e,t){if(F(e)){if(t){e._contentcollector_start_index=0;e._contentcollector_end_index=e.nodeValue.length
;e._contentcollector_whitespace_pre=!0;this.wasLastSpace=!1}else{if(this.wasLastSpace){var n=void 0;for(n=0;n<e.nodeValue.length;n++)if(!ne(e.nodeValue.charCodeAt(n))){
this.wasLastSpace=ne(e.nodeValue.charCodeAt(e.nodeValue.length-1));break}e._contentcollector_start_index=n}else{e._contentcollector_start_index=0
;e.nodeValue.length>0&&(this.wasLastSpace=ne(e.nodeValue.charCodeAt(e.nodeValue.length-1)))}e._contentcollector_end_index=e.nodeValue.length;e._contentcollector_whitespace_pre=!1}
this.lineTextNodes.push(e)}else{var o=(e.nodeName||"").toLowerCase(),i=H(e,"style")||"",r="pre"==o||/\bwhite-space:\s*pre\b/i.exec(i);e._contentcollector_isblock=this.getIsBlock(e)
;e._contentcollector_isblock?this.startNewBlock():U(e)?this.doBr():"img"==o&&this.doInlineImg();var a=e.childNodes.length;for(n=0;n<a;n++)this.recurse(e.childNodes[n],t||Boolean(r))
;e._contentcollector_isblock&&this.startNewBlock()}};e.prototype.getIsBlock=function(e){var t=(e.nodeName||"").toLowerCase();if("code"==t){
if((H(e,"class")||"").split(" ").indexOf("listtype-code")>-1)return!0}var n=!!ee[t],o=H(e,"style")||"";return n?!/display:\s*inline/.exec(o):!!/display:\s*block/.exec(o)};return e}();function ne(e){
return 9==e||13==e||32==e||10==e}var oe=null;t.doesThisBrowserUseIESpaceRules=function(){if(null===oe){var e=window.document.createElement("div")
;e.setAttribute("style","position: absolute; top: -10000px; left: -10000px");e.innerHTML="a ";window.document.body.appendChild(e);oe="a "===e.innerText;window.document.body.removeChild(e)}return oe}},
246:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.freakoutOnExceptionWrapper=t.freakoutOnException=void 0;var o=n(100),i=n(17);t.freakoutOnException=function(e,t,n){var r=n.value
;n.value=function(){for(var e=this,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];i.default.error.loggingTryCatch((function(){r.apply(e,n)}),(function(e){(0,o.freakout)(t+" failed",e)}))};return n}
;t.freakoutOnExceptionWrapper=function(e){var t=e.name;return function(){for(var n=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];i.default.error.loggingTryCatch((function(){e.apply(n,r)
}),(function(e){(0,o.freakout)(t+" failed",e)}))}}},269:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.ensureLineIsNotCollapsedJustForMe=t.expandSectionIfNecessaryOnEnterKey=t.toggleCollapsedLine=t.isNodeCollapsed=t.findFirstNonCollapsedLine=t.CollapsedLines=void 0
;var o=n(1),i=n(22),r=n(54),a=n(178),s=n(146),l=n(18),d=n(1361),c=n(58),u=n(81),h=n(20),p=n(31),f=n(4),g=function(){function e(e,t){this.editor=null;this.trackers={};this.dirtyZones={};this.editor=e
;this.pool=t}e.prototype.setEditor=function(e){this.editor=e};e.prototype.tracker=function(e){this.trackers[e]||(this.trackers[e]=new d.CollapseTracker);return this.trackers[e]}
;e.prototype.splice=function(e,t,n,o){var i=this,r=this.tracker(e);r.splice(t,n,o.map((function(e){return i.alineToLineInput(e)})));r.hasAnyDirtyLines()?this.dirtyZones[e]=!0:delete this.dirtyZones[e]
};e.prototype.getLineOutput=function(e,t){return this.tracker(e).get(t)};e.prototype.markClean=function(e,t){var n=this.tracker(e);n.markClean(t);n.hasAnyDirtyLines()||delete this.dirtyZones[e]}
;e.prototype.doUpdate=function(){var e=this;if(!this.editor.callStack.getCurrentCallStack().domClean)throw new Error("CollapsedLines: DOM must be clean for doUpdate()")
;this.editor.core.withoutRecordingMutations((function(){
var t=e.trackers[h.Position.ROOT_ZONE].getAllDirtyLines(),n=e.dirtyZones[h.Position.ROOT_ZONE],o=e.editor.dom.rootNodeOfZone(h.Position.ROOT_ZONE);n&&t&&t.length>0&&o&&t.forEach((function(t){
var n,i,r=(0,a.getChildrenLines)(o)[t.lineNum],l=t.output.renderCollapsed&&!t.output.startOfCollapseSection;r.classList.toggle("ace-line-collapsed",l)
;if(p.default.isOnButDoNotLog("paper_pocket_interstitial")){null===(n=(0,s.getPocketNode)(r))||void 0===n||n.classList.toggle("ace-line-collapsed",l);null===(i=(0,
s.getPocketNode)(r,!0))||void 0===i||i.classList.toggle("ace-line-collapsed",l)}var d=e.editor.managers.getLineManager(h.Position.ROOT_ZONE,t.lineNum)
;d&&d.handleSectionToggled&&d.handleSectionToggled(l);e.trackers[h.Position.ROOT_ZONE].markClean(t.lineNum)}))}));this.dirtyZones={}};e.prototype.alineToLineInput=function(e){
var t=c.getListMagicObject(e,this.pool);if(!t)return{headingLevel:d.NOT_A_HEADING_LEVEL,hasCollapsedAttrForMe:!1};var n=c.parseListType(t.value);if(!n)return{headingLevel:d.NOT_A_HEADING_LEVEL,
hasCollapsedAttrForMe:!1};var o=d.NOT_A_HEADING_LEVEL;"hone"==n.type?o=1:"htwo"==n.type?o=2:n.type;return{headingLevel:o,hasCollapsedAttrForMe:m(e,this.pool)}}
;return e=o.__decorate([u.nullifyProperties],e)}();t.CollapsedLines=g;function m(e,t){var n=i.attribsAttributeValue(e,"clientside-collapse",t)
;return"true"===n||"false"!==n&&"true"==i.attribsAttributeValue(e,"collapse-all",t)}function v(e){var t=e=function(e,t){var n=e;for(;n;){if(n.classList.contains(t))return n;n=n.parentElement}
return null}(e,"ace-line"),n=function(e,t){var n=[],o=e&&e.parentElement;for(;o;){o.classList.contains(t)&&n.unshift(o);o=o.parentElement}return n}(t,"ace-line-collapsed");n.length>0&&(t=n[0])
;for(;t&&t.classList.contains("ace-line-collapsed");)t=t.previousElementSibling;return t||e}t.findFirstNonCollapsedLine=v;t.isNodeCollapsed=function(e){return(0,l.hasParents)(e,".ace-line-collapsed")}
;function y(e,t,n){b(e,t,n,e.editableState.getIsEditable(),!1)}t.toggleCollapsedLine=y;function b(e,t,n,o,i){var a=e.selection.getPositionForNode(t);e.execute("set-collapse",(function(){
var t=o?[["collapse-all",n?"":"true"],["clientside-collapse",""]]:[["clientside-collapse",n?"false":"true"]]
;e.contents.performDocumentApplyAttributesToRange(a.withCol(0),a.withCol(1),t,r.EditableState.Readonly)}));f.IntentionEvent.ToggleSection.track({isNowOpen:n,onlyForMe:!o,isAutoExpand:i})}
t.expandSectionIfNecessaryOnEnterKey=function(e){if(e.selection.isCollapsed()){var t=e.selection.getStart();if(0!=t.line){var n=e.getRep(t.zone),o=n.lines.atIndex(t.line),i=o.domInfo.node
;if(t.col==o.lineMarker){i=v(n.lines.atIndex(t.line-1).domInfo.node)}var r=e.dom.getAceLineForNode(i),a=n.lines.indexOfKey(r.getAttribute("id"));m(e.getRep(t.zone).alines[a],e.getApool())&&y(e,r,!0)}}
};t.ensureLineIsNotCollapsedJustForMe=function(e,t){if(t){var n=v(t);n&&n.classList.contains("ace-line-heading-collapsed")&&function(e,t,n){b(e,t,n,!1,!0)}(e,n,!0)}}},270:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(535),r=n(21),a=n(4),s=n(16),l=n(15),d=n(0),c=function(e){var t=e.label,n=e.hotkey
;return d.createElement("div",null,d.createElement("strong",null,d.createElement("b",{className:"notranslate"
},t),n?d.createElement(d.Fragment,null,d.createElement("br",null),d.createElement(i.HotkeyComboLabel,{orientation:"center",inheritStyling:!0,hotkey:n})):null))},u=function(e){
var t,n,i=e.active,u=e.buttonColorHighlight,h=e.onMouseOver,p=e.command,f=e.onMouseOut,g=e.onMouseDown,m=e.onMouseEnter,v=e.onMouseLeave,y=e.onTouchEnd,b=e.onTouchStart,C=o("selenium-toolbar-action-".concat(p.id," omnibar-button"),{
selected:i},e.className);if("dig"===(null===(t=p.icon)||void 0===t?void 0:t.type))n=d.createElement(s.UIIcon,{src:l[p.icon.icon]});else n=d.createElement(s.UIIcon,{src:l.WarningLine})
;return d.createElement(r.default,{className:C,style:{borderBottomColor:u||""},"aria-label":p.label,onClick:function(t){t.stopPropagation();t.preventDefault();e.onClick&&e.onClick(p.id);(0,
a.trackAce)("toolbar-click",{command:p.id})},tooltip:{title:d.createElement(c,{label:e.label||p.label,hotkey:p.hotkey})},onMouseDown:g,onMouseEnter:m,onMouseLeave:v,onMouseOut:f,
variant:i?"opacity":"transparent",isIcon:!0,onMouseOver:h,onTouchEnd:y,onTouchStart:b,inverse:e.inverse},n)};u.displayName="OmnibarButton";t.default=u},309:function(e,t,n){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(6),r=n(72),a=n(220),s=n(22),l=n(54),d=n(50),c=n(246),u=n(81),h=n(17),p=!1,f=function(){function e(e,t){this.markingUnsaved=!1
;this.toSetMarkingUnsaved_=null;if(e){this.apool=e.getApool();this.editor=e}else this.apool=t||new r.default;this.baseZatext=s.makeZatext("\n");this.submittedChangeset=null
;this.userChangeset=s.identity();this.tracking=!1;this.applyingNonUserChanges=!1;this.changeCallback=null;this.submittedCaretPos=null;this.userCaretPos=null;this.changeCallbackTimeout=null}t=e
;e.prototype.dispose=function(){this.changeCallback=null};e.prototype.setChangeCallbackTimeout=function(){var e=this
;this.changeCallback&&null===this.changeCallbackTimeout&&(this.changeCallbackTimeout=setTimeout((function(){h.default.error.loggingTryCatch(e.changeCallback,void 0,(function(){
e.changeCallbackTimeout=null}))}),0))};e.prototype.isTracking=function(){return this.tracking};e.prototype.initializeBaseAttributedText=function(e){this.tracking=!0;this.baseZatext=e
;this.submittedChangeset=null;this.submittedCaretPos=null;this.userChangeset=s.identity();this.userCaretPos=null};e.prototype.initializeUserChangeset=function(e){this.userChangeset=e}
;e.prototype.getApool=function(){return this.apool};e.prototype.baseAttributedTextForWire=function(){return s.prepareZatextForWire(this.baseZatext,this.apool)}
;e.prototype.composeUserChangeset=function(e){if(this.tracking&&!this.applyingNonUserChanges&&!s.isIdentity(e)){this.userChangeset=s.compose(this.userChangeset,e,this.apool);this.userCaretPos=null
;this.setChangeCallbackTimeout()}};e.prototype.applyChangesToBase=function(e,n){var o=this;if(this.tracking){var i=function(){o.userCaretPos=null;o.submittedCaretPos=null;if(n){
var i=(new r.default).fromJsonableNoCloning(n);t.validateWireApool(i);e=e.map((function(e){return s.moveOpsToNewPool(e,i,o.apool)}))}o.baseZatext=s.applyChangesetsToZatext(e,o.baseZatext,o.apool)
;var a=[];e.forEach((function(e){var t=e;if(o.submittedChangeset){var n=o.submittedChangeset;o.submittedChangeset=s.follow(e,n,!1,o.apool);t=s.follow(n,e,!0,o.apool)}var i=o.userChangeset
;o.userChangeset=s.follow(t,i,true,o.apool);if(o.editor){var r=s.follow(i,t,!1,o.apool);a.push(r)}}));o.editor&&o.applyChangesetToEditor(s.composeChangesets(a,o.apool))}
;this.editor?this.editor.execute("applyChangesToBase",(function(){i()})):i()}};e.prototype.applyChangesetToEditor=function(e){var t=this;if(this.editor){this.applyingNonUserChanges=!0
;h.default.error.loggingTryCatch((function(){t.editor.callStack.makeNewNonundoableEvent((function(){t.editor.contents.performDocumentApplyChangeset(e,!0,l.EditableState.Readonly)}))
}),void 0,(function(){t.applyingNonUserChanges=!1}))}};e.prototype.prepareUserChangeset=function(){var e
;if(this.submittedChangeset)throw new Error("cannot call prepareUserChangeset when one is already prepared!");var t=null;if(e=s.isIdentity(this.userChangeset)?null:this.userChangeset){
this.submittedChangeset=e;this.userChangeset=s.identity();t=e}var n=null;if(t){var o=s.prepareForWire(t,this.apool);n=o.pool.toJsonableNoCloning();t=o.translated}
this.submittedCaretPos=this.userCaretPos;return{changeset:t,apool:n,caret:this.submittedCaretPos}};e.prototype.unprepare=function(){
if(!this.submittedChangeset)throw new Error("cannot unprepare if there is no prepared changeset! wat u doin");this.userChangeset=s.compose(this.submittedChangeset,this.userChangeset,this.apool)
;this.submittedChangeset=null};e.prototype.userChangesetForWire=function(){var e=s.prepareForWire(this.userChangeset,this.apool),t=e.pool.toJsonableNoCloning();return{changeset:e.translated,apool:t}}
;e.prototype.submittedChangesetForWire=function(){if(this.submittedChangeset){var e=s.prepareForWire(this.submittedChangeset,this.apool),t=e.pool.toJsonableNoCloning();return{changeset:e.translated,
apool:t}}return{changeset:null,apool:null}};e.prototype.applyPreparedChangesetToBase=function(e,t){var n=this
;if(!this.submittedChangeset)throw new Error("applySubmittedChangesToBase: no submitted changes to apply");var o,i=this.submittedChangeset,a=!1;if(e){var l=(new r.default).fromJsonableNoCloning(t)
;(o=s.moveOpsToNewPool(e,l,this.apool))!=i&&(a=!0)}var d=function(){var e=null,t=null,r=null;if(a){
var l=i,d=n.userChangeset,c=o,u=s.computeChangesetFromOneToAnother(n.baseZatext,l,c,n.apool),h=s.follow(d,u,!1,n.apool);e=s.follow(u,d,!0,n.apool);r=u;t=h}
n.baseZatext=s.applyToZatext(n.submittedChangeset,n.baseZatext,n.apool);n.submittedChangeset=null;n.submittedCaretPos=null;n.editor&&n.markingUnsaved&&n.markPreparedChangesetAsSaved(i);if(a){
n.userChangeset=e;n.baseZatext=s.applyToZatext(r,n.baseZatext,n.apool);n.editor&&n.applyChangesetToEditor(t)}}
;this.editor&&(a||this.markingUnsaved)?this.editor.execute("applyChangesToBase",(function(){d()})):d()};e.prototype.setUserChangeNotificationCallback=function(e){this.changeCallback=e}
;e.prototype.updateOtherUserCaretPos=function(e){if(this.editor){var t=e.caret;this.submittedChangeset&&(t=s.followCaret(this.submittedChangeset,t,this.apool))
;t=s.followCaret(this.userChangeset,t,this.apool);(e=i.clone(e)).caret=t;this.editor.observer.trigger("collab-selection-change",e)}};e.prototype.hasSubmittedChangeset=function(){
return!!this.submittedChangeset};e.prototype.hasUncommittedChanges=function(){return!(!this.submittedChangeset&&s.isIdentity(this.userChangeset))};e.prototype.updateCaretPos=function(e){
this.userCaretPos=e;this.setChangeCallbackTimeout()};e.prototype.isMarkingUnsaved=function(){return this.markingUnsaved};e.prototype.getUnsavedChanges=function(){
return this.submittedChangeset?s.compose(this.submittedChangeset,this.userChangeset,this.apool):this.userChangeset};e.prototype.setMarkingUnsaved=function(e,t){var n=this;this.toSetMarkingUnsaved_=!!e
;var o=function(){if(n.markingUnsaved!==n.toSetMarkingUnsaved_){n.markingUnsaved=n.toSetMarkingUnsaved_;n.editor&&n.editor.execute("setMarkingUnsaved",(function(){
var e=n.getUnsavedChanges(),t=s.addAttributeToEachChange(e,n.markingUnsaved?["clientside-unsaved","true"]:["clientside-unsaved",""],n.apool);n.applyChangesetToEditor(t)}))}};t?o():setTimeout(o,0)}
;e.prototype.markPreparedChangesetAsSaved=function(e){var t=s.addAttributeToEachChangeByFirstButNotSecond(e,this.userChangeset,["clientside-unsaved",""],this.apool);this.applyChangesetToEditor(t)}
;e.prototype.isApplyingNonUserChanges=function(){return this.applyingNonUserChanges};e.validateWireApool=function(e){p||e.eachAttrib((function(e,t){if(!a.isSaveable(e))try{
throw new Error("Found unsaveable attribute `"+e+"` in apool from server!")}catch(e){p=!0;d.logException(e)}}))};var t;o.__decorate([c.freakoutOnException],e.prototype,"applyChangesetToEditor",null)
;return e=t=o.__decorate([u.nullifyProperties],e)}();t.default=f},310:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(21),r=n(3),a=n(8),s=n(2),l=n(7),d=n(11),c=n(241),u=n(4),h=n(352),p=n(0),f=n(297),g=n(17),m=(0,n(5).PaperIntlFactory)(),v=m._f,y=m.F,b=(0,s.defineMessages)({copyLink:{id:"lhfoOt",
defaultMessage:"Copy Paper doc link"},linkcopied:{id:"q8nX2Z",defaultMessage:"Link copied."}}),C=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={}
;t.handlePadMetadataChanged=function(){t.updateToken()};t.handleGetLinkTrackingToken=function(e){e&&e.success&&t.updateStateWithToken(e.token)};t.updateStateWithToken=function(e){
var n=t.props.padController.getPadId(),o=(0,c.getSharableLinkFromLocalPadId)(n,t.props.padController.getTitle(),!1,e);t.setState({token:e,urlWithToken:o});t.props.padController.updateShareUrl(o)}
;return t}t.prototype.componentDidMount=function(){this.bindEvents();this.updateToken()};t.prototype.componentDidUpdate=function(e){
e.disableTrackingToken&&!this.props.disableTrackingToken&&this.updateToken()};t.prototype.bindEvents=function(){
this.events.on(this.props.padController,l.DocEvents.TitleChanged,this.handlePadMetadataChanged);this.events.on(this.props.padController,"pad-id-changed",this.handlePadMetadataChanged)
;this.events.on(this.props.padController,"pad-meta-changed",this.handlePadMetadataChanged)};t.prototype.updateToken=function(){
if(!this.props.disableTrackingToken&&!a.default.userIsGuest)if(this.state.token)this.updateStateWithToken(this.state.token);else{var e=this.props.padController.getPadId()
;e&&h.getLinkTrackingToken(e,f.TrafficSources.ShareCopiedLink,this.handleGetLinkTrackingToken)}};t.prototype.getUrl=function(){
return!this.state.token||this.props.disableTrackingToken?"url"in this.props?this.props.url:this.props.getUrl():this.state.urlWithToken};t.prototype.getHref=function(){
if(!("getUrl"in this.props))return this.getUrl()};t.prototype.copyLink=function(e){e.preventDefault();var t=p.createElement(y,o.__assign({},b.linkcopied));g.default.clipboard.copy(this.getUrl()||"",t)
;u.IntentionEvent.CopyPadLink.track();this.props.onCopyLink&&this.props.onCopyLink()};t.prototype.render=function(){var e=this;if(!g.default.clipboard.canCopy())return null
;var t=r("hp-copy-link-button",this.props.className,{"hp-icon-button":!this.props.styleless&&!this.props.primary}),n=this.props.trackTitle||"copy link button";return p.createElement(i.default,{
className:t,variant:"transparent",hasNoUnderline:!0,href:this.getHref(),onClick:function(t){return e.copyLink(t)},tooltip:{title:this.props.tooltip},isIcon:this.props.isIcon,"track-title":n,
"aria-label":v(b.copyLink),disabled:this.props.disabled},this.props.children)};t.defaultProps={primary:!1,styleless:!0};t.displayName="CopyLinkButton";return t=o.__decorate([d.default],t)
}(p.PureComponent);t.default=C},364:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(6),r=n(1349),a=n(1350),s=n(8),l=n(54),d=n(59),c=n(63),u=function(e){o.__extends(t,e)
;function t(t,n,o,i){var r=e.call(this)||this;r.editor=null;r.padController=null;r.commentAttrSyncer=null;r.padUnreadNotificationsStore=null;r.readonlyObjectStore=null
;r.handleOperationCompleted=function(){r.trigger("comment-request-saved",void 0)};r.handleUpdatedObject=function(e){
"comment"==e.type?r.trigger("updated-comment",e):"thread"==e.type&&r.trigger("updated-thread",e)};r.handleNewObject=function(e){
"comment"==e.type?r.trigger("new-comment",e):"thread"==e.type&&r.trigger("new-thread",e)};r.editor=t;r.commentAttrSyncer=(0,a.createCommentAttrSyncer)(t);r.padController=n;r.readonlyObjectStore=o
;r.padUnreadNotificationsStore=i;return r}t.prototype.setAce=function(e){this.editor=e;this.commentAttrSyncer=(0,a.createCommentAttrSyncer)(e)};t.prototype.getObjectStore=function(){
return(this.padController?this.padController.getObjectStore():null)||this.readonlyObjectStore};t.prototype.getAllThreads=function(e,t){var n={type:"thread"};e&&(n.isDeleted=!1);t&&(n.isDetached=!1)
;return this.getObjectStore().getObjectsMatchingQuery(n)};t.prototype.createThreadForSelection=function(e,t,n,o,i){var r=this;if(!this.padController||!this.editor)return null;var a=this.newThread(e)
;a.secureAuthorId=this.padController.getSecureUserId();a.commentIds=[];var s={id:a.id,isDocLevel:a.isDocLevel,isComposing:a.isComposing,isSuggestChanges:a.isSuggestChanges}
;c.isOnButDoNotLog("paper_note_to_self")&&(s.isPrivate=a.isPrivate);var l=this.getObjectStore().queueOperation({path:"/ep/comments/create-thread",args:s});this.getObjectStore().addLocalObject(l,a)
;this.editor.execute("createThreadForSelection",(function(){r.editor.callStack.makeNewNonundoableEvent((function(){var e={opt_posLine:t,opt_galleryIndex:n,opt_boardItemId:o,opt_zone:i}
;r.commentAttrSyncer.addDraftThread(a.id,a.secureAuthorId,e)}))}));return a.id};t.prototype.getSelectionThreadIds=function(){
return this.editor?this.getThreadIdsAtPoint(this.editor.selection.getStart()):[]};t.prototype.getThreadIdsAtPoint=function(e){var t=this;if(!this.padController||!this.editor)return[];var n=[]
;this.editor.execute("get-attributes",(function(){n=t.editor.contents.getAttributesForPoint(e)}),{shouldIncorp:!1});return n.map((function(e){var t;return(t=/^thread\-(.*)/.exec(e[0]))?t[1]:null
})).filter((function(e){return null!=e}))};t.prototype.getActiveThreadIdsAtPoint=function(e){var t=this;return this.getThreadIdsAtPoint(e).filter((function(e){var n=t.getThread(e)
;return n&&!n.isDeleted}))};t.prototype.getSelectionComments=function(){var e=this;return this.getSelectionThreadIds().map((function(t){return e.getComments(t)}))}
;t.prototype.applyCommentsChangeset=function(e){var t=this;this.editor.execute("applyCommentsChangeset",(function(){t.editor.callStack.makeNewNonundoableEvent((function(){
t.editor.contents.performDocumentApplyChangeset(e,!1,l.EditableState.CommentOnly)}))}),{shouldIncorp:!1})};t.prototype.addCommentToThread=function(e,t){0;var n=this.newComment(t)
;n.secureAuthorId=this.padController.getSecureUserId();n.threadId=e;c.isOnButDoNotLog("paper_note_to_self")&&(n.isPrivate=t.isPrivate);var o={apool:n.apool,atext:n.atext,id:n.id,
createdTime:n.createdTime,threadId:n.threadId};c.isOnButDoNotLog("paper_note_to_self")&&(o.isPrivate=n.isPrivate);var i=this.getObjectStore().queueOperation({path:"/ep/comments/add-comment-to-thread",
args:o}),r=this.getObjectStore().getObject(e),a={commentIds:r.commentIds.concat([n.id])};r.isComposing&&(a.isComposing=!1)
;c.isOnButDoNotLog("paper_note_to_self")&&t.isPrivate&&!r.isPrivate&&(a.isPrivate=!0);this.getObjectStore().addObjectEdit(i,e,a);this.getObjectStore().addLocalObject(i,n);return n.id}
;t.prototype.setAnnotationIds=function(e,t){0;var n={threadId:e,annotationIds:t},o=this.getObjectStore().queueOperation({path:"/ep/comments/set-thread-annotation-ids",args:n})
;this.getObjectStore().addObjectEdit(o,n.threadId,n)};t.prototype.clearAnnotationIds=function(e){0;var t={threadId:e,annotationIds:null},n=this.getObjectStore().queueOperation({
path:"/ep/comments/clear-thread-annotation-ids",args:t});this.getObjectStore().addObjectEdit(n,t.threadId,t)};t.prototype.addEmojiReaction=function(e){0;var t=this.getObjectStore().queueOperation({
path:"/ep/comments/add-emoji-reaction",args:e}),n=this.getObjectStore().getObject(e.commentId).reactions||{},o=e.reaction.emoji;n[o]||(n[o]={});n[o][s.default.secureUserId]={
authorName:s.default.userName};this.getObjectStore().addObjectEdit(t,e.commentId,{commentId:e.commentId,reactions:n})};t.prototype.removeEmojiReaction=function(e){0
;var t=this.getObjectStore().queueOperation({path:"/ep/comments/remove-emoji-reaction",args:e}),n=this.getObjectStore().getObject(e.commentId).reactions||{},o=e.reaction.emoji
;if(n[o]&&n[o][s.default.secureUserId]){delete n[o][s.default.secureUserId];0==Object.keys(n[o]).length&&delete n[o]}this.getObjectStore().addObjectEdit(t,e.commentId,{commentId:e.commentId,
reactions:n})};t.prototype.editComment=function(e,t){0;var n=this.getObjectStore().getObject(e),i=o.__assign({lastModifiedTime:(new Date).toString(),rev:n&&n.rev+1,commentId:e
},t||{}),r=this.getObjectStore().queueOperation({path:"/ep/comments/update-comment",args:i});this.getObjectStore().addObjectEdit(r,e,i);if(n){var a=!n.isDeleted&&i.isDeleted;return{commentExists:!0,
wasDeleted:a,threadIsEmpty:a&&this.isThreadEmpty(n.threadId),threadId:n.threadId}}return{commentExists:!1,wasDeleted:!1,threadIsEmpty:!1,threadId:null}};t.prototype.deleteThread=function(e,t){0;var n
;n=t?{isHardDeleted:!0}:{isDeleted:!0};var o=this.getObjectStore().queueOperation({path:"/ep/comments/delete-thread",args:{threadId:e,hardDelete:t}});this.getObjectStore().addObjectEdit(o,e,n)}
;t.prototype.isThreadEmpty=function(e){var t=this.getComments(e);return Boolean(t)&&t.every((function(e){return e.isDeleted}))};t.prototype.undeleteThread=function(e){0
;var t=this.getObjectStore().queueOperation({path:"/ep/comments/undelete-thread",args:{threadId:e}});this.getObjectStore().addObjectEdit(t,e,{isDeleted:!1,resolvedDateTime:null,secureResolverId:null,
deletedRevision:null})};t.prototype.getInDocUnreadThreadIds=function(){return this.padUnreadNotificationsStore?this.padUnreadNotificationsStore.getInDocUnreadThreadIds():[]}
;t.prototype.handleCommentThreadInteraction=function(e){this.padUnreadNotificationsStore&&this.padUnreadNotificationsStore.handleCommentThreadOpened(e)};t.prototype.markThreadUnread=function(e){
this.padUnreadNotificationsStore&&this.padUnreadNotificationsStore.markThreadUnread(e)};t.prototype.getThread=function(e){return this.getObjectStore()?this.getObjectStore().getObject(e):null}
;t.prototype.getThreadByAnnotationId=function(e){var t=this.getObjectStore().getObjectsMatchingQuery({type:"thread"}).filter((function(t){
return t.annotationIds&&i.includes(t.annotationIds,e)&&!t.isDeleted}));return t.length>0?t[0]:null};t.prototype.getComments=function(e){var t=this.getThread(e)
;return t?this.getObjectStore().getObjects(t.commentIds):null};t.prototype.getComment=function(e){return this.getObjectStore().getObject(e)};t.prototype.getActiveComments=function(e){
return this.getComments(e).filter((function(e){return e&&!e.isDeleted}))};t.prototype.registerWithObjectStore=function(e){0;this.registerEvents(e);this.trigger("init",null)}
;t.prototype.registerEvents=function(e){e.events.on("operation-completed",this.handleOperationCompleted);e.events.on("updated-object",this.handleUpdatedObject)
;e.events.on("new-object",this.handleNewObject)};t.prototype.newComment=function(e){0;return o.__assign({type:"comment",id:r.newRandomCommentId()},e||{})};t.prototype.newThread=function(e){0
;return o.__assign({type:"thread",id:r.newRandomThreadId()},e||{})};return t}(d.EventEmittingClass);t.default=u},369:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.TemplateMenuButton=void 0;var o=n(1),i=n(21),r=n(53),a=n(347),s=n(11),l=n(83),d=n(4),c=n(34),u=n(0),h=n(159),p=n(837),f=n(29),g=n(17),m=n(3),v=function(e){o.__extends(t,e);function t(t){
var n=e.call(this,t)||this;n.afterPageLoad=function(){n.shouldOpenTemplateDropdown()&&n.templateMenuButton&&n.templateMenuButton.open()};n.onTemplateSelection=function(e,t,o){o.preventDefault()
;n.templateMenuButton&&n.templateMenuButton.close();if(n.props.editor){var i=n.props.editor;h.getTemplateSchema({templateId:e,templateType:t,successHandler:function(e){
i.contents.importZatext(e.zatext,e.apool,!0)},trackContext:n.getTrackContext()})}else if(e){var a;l.shouldOpenInNewTab(o)&&(a=(0,f.unsafeWindowOpen)("about:blank"));h.createDocFromTemplate({
folderId:n.props.folderId,templateId:e,templateType:t,successHandler:function(e){a?a.location.replace(App.constructUrl(r.default.PAD,{id:e.padId,suffix:"?createFromTemplate=1"})):App.navigateToPad({
id:e.padId,suffix:"?createFromTemplate=1"})},trackContext:n.getTrackContext()})}};n.onTemplateRestore=function(e){d.IntentionEvent.RestoreTemplate.track({context:n.getTrackContext(),
actionName:"unarchive"});h.restoreTemplate(e,(function(){n.templateMenu&&n.templateMenu.fetchFreshTemplates()}))};n.onTemplateUntrash=function(e){d.IntentionEvent.InitiateUntrashTemplate.track({
context:n.getTrackContext()});App.navigateToPad({id:e.templateId})};n.onTemplateEdit=function(e){n.templateMenuButton&&n.templateMenuButton.close();d.IntentionEvent.VisitTemplatePad.track({
context:n.getTrackContext()});App.navigateToPad({id:e})};n.previewLoader=new a.default(n.props.padPreviewStore);return n}t.prototype.componentDidMount=function(){
this.props.app&&this.events.on(this.props.app,"hp-after-page-load",this.afterPageLoad)};t.prototype.shouldOpenTemplateDropdown=function(){return!!g.default.consumeQueryParam("openTemplateDropdown")}
;t.prototype.getTrackContext=function(){};t.prototype.render=function(){var e=this;return u.createElement(c.Menu.Wrapper,{onToggle:function(t){if(t.isOpen){
e.templateMenu&&e.templateMenu.fetchFreshTemplates();d.IntentionEvent.OpenTemplateSelector.track({context:e.getTrackContext()})}else d.IntentionEvent.CloseTemplateSelector.track({
context:e.getTrackContext()})}},(function(t){var n=t.getContentProps,r=t.getTriggerProps,a=t.triggerRef;return u.createElement(u.Fragment,null,u.createElement(i.default,o.__assign({forwardedRef:a
},r(),{variant:e.props.buttonVariant||"transparent",withDropdownIcon:!0,className:m(e.props.className,"create-from-template-button"),hasNoUnderline:!0
}),e.props.buttonComponent),u.createElement(c.Menu.Content,o.__assign({},n()),u.createElement(c.Menu.Segment,null,u.createElement(p.default,{onTemplateSelection:e.onTemplateSelection,
onTemplateEdit:e.onTemplateEdit,onTemplateRestore:e.onTemplateRestore,onTemplateUntrash:e.onTemplateUntrash,previewLoader:e.previewLoader,templateListStore:e.props.templateListStore,ref:function(t){
return e.templateMenu=t},inDoc:!!e.props.editor,app:e.props.app}))))}))};t.displayName="TemplateMenuButton";return t=o.__decorate([s.default,d.trackContextDecorator],t)}(u.Component)
;t.TemplateMenuButton=v},407:function(e,t,n){var o=this;Object.defineProperty(t,"__esModule",{value:!0});t.getDropboxInternalSdkWithCDMHeader=t.getDropboxInternalSdk=void 0
;var i,r,a,s,l=n(1),d=n(287),c=n(26),u=n(8),h=n(1478),p=/^www\.dropbox\.com$/,f=/^meta-.*\.dev\.corp\.dropbox\.com$/,g=function(e,t){var n=function(){return window.location.hostname},o=function(e,o){
var i=new Headers((null==o?void 0:o.headers)||[]),r=n();(p.test(r)||f.test(r))&&i.append("X-CSRF-Token",d.getItem(c.default.dropboxJSCSRFCookieName)||"")
;i.append("X-Dropbox-Uid",u.default.dropboxUserId);var a=u.default.cdmTeamRootNamespaceId;t.initDropboxApiPathRootHeaderForCdm&&a&&i.append("Dropbox-API-Path-Root",JSON.stringify({
".tag":"namespace_id",namespace_id:a}));var s=l.__assign(l.__assign({},o||{}),{headers:i});return fetch(e,s)},i=n()
;if(!p.test(i)&&!f.test(i))throw new Error("Cannot initialize Dropbox SDK on an unsupported domain.");var r=new e.DropboxAuth({domain:n(),domainDelimiter:"",fetch:o});return{dropbox:new e.Dropbox({
auth:r,fetch:o}),auth:r}},m=function(e){void 0===e&&(e={initDropboxApiPathRootHeaderForCdm:!1});if(h.DropboxInternalSdkLoadableLib.isLoaded()){var t=h.DropboxInternalSdkLoadableLib.get()
;return Promise.resolve(g(t,e))}return h.DropboxInternalSdkLoadableLib.load().then((function(){var t=h.DropboxInternalSdkLoadableLib.get();return g(t,e)}))};t.getDropboxInternalSdk=function(){
return l.__awaiter(o,void 0,Promise,(function(){return l.__generator(this,(function(e){if(i)return[2,Promise.resolve(i)];r||(r=m().then((function(e){return i=e})));return[2,r]}))}))}
;t.getDropboxInternalSdkWithCDMHeader=function(){return l.__awaiter(o,void 0,Promise,(function(){return l.__generator(this,(function(e){if(a)return[2,Promise.resolve(a)];s||(s=m({
initDropboxApiPathRootHeaderForCdm:!0}).then((function(e){return a=e})));return[2,s]}))}))}},446:function(e,t,n){var o;Object.defineProperty(t,"__esModule",{value:!0})
;t.getSubtitle=t.getPromptMessage=t.messages=t._f=t.F=void 0;var i=n(162),r=n(14),a=n(7),s=(0,r.MsgFactory)("composer"),l=s.F,d=s.defineMessages,c=s._f;t.F=(o={F:l,_f:c}).F,t._f=o._f;t.messages=d({
mentionCopy:{msg:"@mention someone to share this doc",description:"Prompt to explain how to mention a person in a document"},mentionSwsCopy:{msg:"@mention someone to notify them",
description:"Prompt to explain how to mention a person in a space"},newTaskMentionCopy:{msg:"Assign by name or email",
description:"Prompt to explain how to mention a person in a document and assign them a task"},dynamicPlaceholderCopy:{msg:"Insert a dynamic placeholder type",
description:"Prompt to explain how to add a dynamic placeholder in a template"},mentionPadCopy:{msg:"Mention docs by name or paste the link",
description:"Prompt to explain how to mention a document in another document"},offlinePadsNotAvailableCopy:{msg:"You can only link docs while online",
description:"Prompt to explain that doc mentions can't be made while offline"},offlineMentionsNotAvailableCopy:{msg:"You can only mention people while online",
description:"Prompt to explain that mentions can't be made while offline"},inviteEmail:{msg:"Invite {email}",description:"Button to invite a person to a document via an autocomplete menu"},
cantInviteEmailCopy:{msg:"{email} isn’t in {teamName}",description:"Warning text that the given email address is not part of the given team"},cantInviteEmailNoTeamCopy:{
msg:"{email} isn’t in your team",description:"Warning text that the given email address is not part of your team"},noMatchContactCopy:{msg:"No match or invalid email address",
description:"Error message shown in an autocomplete menu when there was no match"},searchingContactsCopy:{msg:"Searching contacts",
description:"Message shown in an autocomplete menu to indicate the search hasn’t completed yet"},slashCommandsCopy:{msg:"Insert a slash command"},paperMessageCopy:{msg:"Not in doc",
description:"Indicates that a user has not yet been invited to a document"},createNewDocument:{msg:"Create new document"}});t.getPromptMessage=function(e,n){var o=t.messages.mentionCopy;(0,
i.isTask)(e)?o=t.messages.newTaskMentionCopy:n?o=t.messages.offlineMentionsNotAvailableCopy:(0,i.isInSmartWorkspace)(e)&&(o=t.messages.mentionSwsCopy);return o};t.getSubtitle=function(e,n,o){
var i,r=[],s=o&&o.isCloudDoc(),l=!!o&&!!(null===(i=o.peopleList)||void 0===i?void 0:i.isUserWithEmailInDoc(e)),d=o&&o.getPadType()===a.PadType.space
;!o||l||s||d||r.push(t.messages.paperMessageCopy.msg);if(e){r.length&&r.push(" · ");r.push(e)}return r.join("")}},447:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.getDisabledMediaTypesForZone=t.findNearestDropLineFor=t.showFailedUploadToast=t.getUploadableFiles=t.eventHasFiles=void 0
;var o=n(1),i=n(21),r=n(18),a=n(2),s=n(230),l=n(20),d=n(0),c=n(31),u=n(51),h=n(48),p=(0,n(5).PaperIntlFactory)().F,f=(0,a.defineMessages)({errorDropbox:{id:"Vkn5ow",
defaultMessage:"Couldn't upload {filename}."},errorPencilKitDrawing:{id:"Fs9h+q",defaultMessage:"Couldn't upload drawing data."},retry:{id:"n1zYou",defaultMessage:"Retry"},cancel:{id:"d9/SE1",
defaultMessage:"Cancel"}});t.eventHasFiles=function(e){for(var t=0;t<e.dataTransfer.types.length;t++)if("files"==e.dataTransfer.types[t].toLowerCase())return!0;return!1}
;t.getUploadableFiles=function(e,t){var n=this;return new Promise((function(o){if(!e.files||!e.files.length)return o([]);var i=Array.apply(n,e.files);if(t)return o(i.filter((function(e){
return 0===e.type.indexOf("image/")})));if(e.items&&e.items[0].webkitGetAsEntry){var r=Array.apply(n,e.items).map((function(e){var t=e.webkitGetAsEntry();return t&&t.isDirectory}))
;return o(i.filter((function(e,t){return!r[t]})))}var a=i.map((function(e){return function(e){return new Promise((function(t){var n=new FileReader,o=e.webkitSlice?e.webkitSlice(0,5):e.slice(0,5)
;n.onerror=function(){return t(!1)};n.onload=function(){t(!0)};n.readAsArrayBuffer(o)}))}(e)}));Promise.all(a).then((function(e){o(i.filter((function(t,n){return e[n]})))}))}))}
;t.showFailedUploadToast=function(e,t,n){var r,a=e.type,s=e.originalFile;switch(a){case"s3-image":case"s3-audio":case"dropbox":var l=s&&s.name;r=d.createElement(p,o.__assign({},f.errorDropbox,{
values:{filename:l}}));break;case"s3-pencilkitdrawing":r=d.createElement(p,o.__assign({},f.errorPencilKitDrawing));break;default:throw new Error("unknown AttachmentType!")}
c.isOnButDoNotLog("paper_enhance_embed_experience")?h.default.show(d.createElement(h.default,{autoDismiss:!1,actions:d.createElement(d.Fragment,null,d.createElement(i.default,{variant:"transparent",
inverse:!0,onClick:function(){null==t||t()}},d.createElement(p,o.__assign({},f.retry))),d.createElement(i.default,{variant:"transparent",inverse:!0,onClick:function(){null==n||n()}
},d.createElement(p,o.__assign({},f.cancel))))},r)):h.default.showInfoToast({message:r,autoDismiss:!0,autoDismissDelayMs:5e3})};t.findNearestDropLineFor=function(e){
if(e&&e.classList.contains("ace-type-cell")){var t=e.querySelectorAll(".ace-line");return t[t.length-1]}return(0,r.closest)(e,".ace-line")};t.getDisabledMediaTypesForZone=function(e,t){
return t.hasFeature("media",e)?u.isCellId(e)?s.DisabledMediaTypes.ALL_EXCEPT_IMAGES:e!=l.Position.ROOT_ZONE?s.DisabledMediaTypes.ALL:null:s.DisabledMediaTypes.ALL}},448:function(e,t,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});n(1).__exportStar(n(579),t)},449:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.focusAndRestoreParentScroll=t.handleSelectAllCommand=void 0;var o=n(290),i=n(230),r=n(18),a=n(146),s=n(58),l=n(28),d=n(230),c=n(18),u=n(20),h=n(242),p=n(355),f=n(61),g=n(17),m=n(81),v=function(){
function e(e,t){var n=this;this.editor=e;this.contentTypeRegistry=t;this.currentSelection=new p.default(null);this.focusedLineNodes=[];this.selectedLineNodes=[];this.selectedInlineMagicObject=null
;this.dispose=(0,m.wrapCallOnce)((function(){n.editor=null;n.root=null;n.focusedLineNodes=null;n.selectedLineNodes=null}));this.reps=e.getReps();this.root=this.editor.dom.getRoot()}
e.prototype.get=function(){return this.currentSelection};Object.defineProperty(e.prototype,"hasSelection",{get:function(){return this.currentSelection.hasSelection},enumerable:!1,configurable:!0})
;e.prototype.getStart=function(){return this.currentSelection.start};e.prototype.getEnd=function(){return this.currentSelection.end};e.prototype.getFocus=function(){return this.currentSelection.focus}
;e.prototype.getAnchor=function(){return this.currentSelection.anchor};e.prototype.getZone=function(){return this.currentSelection.start.zone};e.prototype.getLine=function(){
return this.currentSelection.start.line};e.prototype.getColumn=function(){return this.currentSelection.start.col};e.prototype.getBoundingClientRect=function(){var e=this.editor,t=window.getSelection()
;if(0==t.rangeCount)return{x:0,y:0,width:0,height:0};var n,o,i=t.getRangeAt(0),r=i.getBoundingClientRect();if(r.top==r.bottom&&(l.isApple()||f.default.webkit)){var a=i.getClientRects();if(a.length>0){
return{x:(s=a[0]).left,y:s.top,width:s.right-s.left,height:s.bottom-s.top}}if(i.startContainer instanceof Element){var s;return{x:(s=i.startContainer.getBoundingClientRect()).left,y:s.top,
width:s.right-s.left,height:s.bottom-s.top}}}var d=(0,h.getSelectionRangeRects)(i);n=d.start;o=d.end;if(n&&o)r={top:Math.min(r.top,Math.min(n.top,o.top)),
bottom:Math.max(r.bottom,Math.max(n.bottom,o.bottom)),left:r.left,right:r.right};else{var u=e.dom.getAceLineForNode(i.startContainer),p=e.dom.getAceLineForNode(i.endContainer);if(u&&p){
n=u.getBoundingClientRect();o=o||!p.previousSibling?p.getBoundingClientRect():p.previousSibling.getBoundingClientRect();r={top:Math.min(n.top,o.top),bottom:Math.max(n.bottom,o.bottom),left:r.left,
right:r.right};var g=e.dom.getElementWithSelector(".ace-line:last-child");(!!g&&g==u||!!g&&g==p)&&(r.bottom-=(0,c.outerHeight)(g,!0)-(0,c.height)(g))}}return{x:r.left,y:r.top,width:r.right-r.left,
height:r.bottom-r.top}};e.prototype.getNodeForPosition=function(e){return this.getPointForLineAndChar(e).node};e.prototype.getPositionForNode=function(e){return this.positionForDomPoint({node:e,
index:0,maxIndex:0})};e.prototype.getRangeForNode=function(e){var t=this.getPositionForNode(e),n=(null==e?void 0:e.textContent.length)||0,i=t.translate({col:n});return new o.default({start:t,end:i})}
;e.prototype.set=function(e){var t=p.default.from(e);this.updateCurrentSelection(t)&&(this.editor.callStack.getCurrentCallStack().selectionAffected=!0)};e.prototype.focusEditor=function(){
(!this.currentSelection||!this.currentSelection.hasSelection)&&y(this.editor.dom.getRoot());this.internalUpdateSelectionFromRep(!0)};e.prototype.focusNode=function(e){var t=this,n=this.editor
;window.focus();this.root.focus();n.execute("gotonode",(function(){var o=e.nodeType===Node.ELEMENT_NODE?1:e.nodeValue.length,i=t.positionForDomPoint({node:e,index:0,maxIndex:o});if(i){
n.selection.set(i);var r=n.getRep(i.zone);t.editor.getViewport().scrollNodeVerticallyIntoViewDeprecated(r.lines.atIndex(i.line).lineNode,"center")}}))};e.prototype.focusOn=function(e){var t=this
;this.editor.execute("focusOn",(function(){t.editor.selection.set(e);t.editor.focus()}),{shouldIncorp:!1})};e.prototype.isEditorFocused=function(){
var e=this.root,t=e.ownerDocument.activeElement&&(this.editor.dom.isRootOfZone(e.ownerDocument.activeElement)||"A"==e.ownerDocument.activeElement.tagName||"TEXTAREA"==e.ownerDocument.activeElement.tagName)
;return e.ownerDocument.activeElement&&t&&this.editor.dom.isNodeInEditor(e.ownerDocument.activeElement)};e.prototype.isCollapsed=function(){return this.currentSelection.isCollapsed}
;e.prototype.isSameLine=function(){
return this.currentSelection.start.line==this.currentSelection.end.line||this.currentSelection.start.line==this.currentSelection.end.line-1&&(this.currentSelection.start.col==this.editor.getCurrentLineEntry().text.length||this.currentSelection.end.col<=this.editor.getLineEntry(this.currentSelection.end.zone,this.currentSelection.end).lineMarker)
};e.prototype.selectAll=function(){var e=this;this.editor.execute("select-all",(function(){var t=p.default.from((0,h.rangeForZone)(e.editor,u.Position.ROOT_ZONE),{isReversed:!0})
;e.editor.selection.set(t);e.internalUpdateSelectionFromRep(!0)}),{shouldIncorp:!1})};e.prototype.getPositionForMouseEvent=function(e){var t=e,n=this.editor.dom.getRoot(),o=(0,
c.offset)(n).left,i=document.elementFromPoint(o+this.editor.dom.getPadding(),t.pageY),a=(0,r.closest)(i,".ace-line-task-controls");if(a){var s=this.editor.getLineEntry(a.getAttribute("data-line-id"))
;if(s)return this.getPositionForNode(s)}var l=this.editor.dom.getAceLineForNode(i);return!l||this.editor.dom.internalIsNodeDirty(l)?null:this.getPositionForNode(l)}
;e.prototype.getInlineMagicObjectAtPosition=function(e){var t=this.reps[e.zone].lines.atIndex(e.line),n=t.domInfo.columnToInlineMagicObjectId[e.col];if(!n)return null
;for(var o=t.domInfo.node.querySelectorAll('span[data-preservation-id="inline-magic-object-'+n+'"]'),i=0;i<o.length;i++){var r=o[i];if(r.inlineMagicObject)return r.inlineMagicObject}return null}
;e.prototype.internalPositionAncestry=function(e){for(var t=[e],n=e;n.zone!=u.Position.ROOT_ZONE;){n=this.editor.managers.positionOfLineManagerContainingZone(n.zone);t.push(n)}return t}
;e.prototype.internalUpdateRepFromSelection=function(e,t,n){var o,i=e&&(!t||!n);if(e&&!t){t=this.positionForDomPoint(e.startPoint)
;this.assertValidPosition(t,"internalUpdateRepFromSelection, selStart, (from positionForDomPoint)",e.startPoint.node)}if(e&&!n){n=this.positionForDomPoint(e.endPoint)
;this.assertValidPosition(n,"internalUpdateRepFromSelection, selEnd, (from positionForDomPoint)",e.endPoint.node)}i&&!u.Position.greaterOrEqual(n,t)&&(n=(o=[t,n])[0],t=o[1]);if(t){
var r=this.reps[t.zone].lines.length();if(t.line>=r){var a=r-1;t=new u.Position(t.zone,a,this.reps[t.zone].lines.atIndex(a).text.length)}r=this.reps[n.zone].lines.length();if(n.line>=r){a=r-1
;n=new u.Position(n.zone,a,this.reps[n.zone].lines.atIndex(a).text.length)}}var s=!1,l=this.editor.selection.isCollapsed();if(e){var d=Boolean(e&&e.isReversed);s=this.updateCurrentSelection({start:t,
end:n,isReversed:d})}return{wasAffected:s,wasCaret:l}};e.prototype.updateCurrentSelection=function(e){
var t=this,n=e.start,o=e.end,i=e.isReversed&&(!n||!o||!u.Position.equals(n,o)),r=this.fixInvalidSelections(n,o);n=r.selectStart;o=r.selectEnd;if(n.zone!=o.zone){
for(var a=this.internalPositionAncestry(n),s=this.internalPositionAncestry(o),l=0;l<a.length&&l<s.length&&a[a.length-1-l].zone==s[s.length-1-l].zone;)l++;l--;var d=a[a.length-1-l],c=s[s.length-1-l]
;if(u.Position.greaterOrEqual(c,d)){n=d;o=l==s.length-1?c:c.withCol(1)}else{n=c;o=l==a.length-1?d:d.withCol(1)}}if(!(0,h.isSelectionEqual)(this.currentSelection,{start:n,end:o,isReversed:i})){
if(n.zone!=o.zone)throw new Error("zone mismatch");if(!u.Position.greaterOrEqual(o,n))throw new Error("(end < start) in "+n+", "+o);this.editor.managers.changeSelectionOnLineManagersInRange(n,o)
;var f=!1;g.default.error.loggingTryCatch((function(){t.assertValidPosition(n,"updateCurrentSelection, selectStart");t.assertValidPosition(o,"updateCurrentSelection, selectEnd")}),(function(e){f=!0}))
;if(f)return;var m=!this.currentSelection.start||this.currentSelection.start.zone!=n.zone;if(m&&this.currentSelection.start){
(v=this.editor.innerZoneEditorNodes[this.currentSelection.start.zone])&&v.updateIsFocusedInRep(!1)}this.currentSelection=new p.default({start:n,end:o,isReversed:i})
;this.editor.callStack.getCurrentCallStack().repChanged=!0;if(m){var v;(v=this.editor.innerZoneEditorNodes[this.currentSelection.start.zone])&&v.updateIsFocusedInRep(!0)}
var y=this.currentSelection.start.line==this.currentSelection.end.line&&this.currentSelection.start.col+1==this.currentSelection.end.col?this.getInlineMagicObjectAtPosition(this.currentSelection.start):null
;if(this.selectedInlineMagicObject!=y){this.selectedInlineMagicObject&&this.selectedInlineMagicObject.loseEditorFocus();this.selectedInlineMagicObject=y
;this.selectedInlineMagicObject&&this.selectedInlineMagicObject.receiveEditorFocus()}this.editor.observer.broadcastRepChange();return!0}this.editor.managers.ensureSelectionOnLineManagersInRange(n,o)
;return!1};e.prototype.fixInvalidSelections=function(e,t){var n=this.editor.managers.getLineManagerType(e.zone,e.line)
;if(e.line==t.line&&(0==e.col&&0==t.col||1==e.col&&1==t.col)&&n&&(!l.isNativeMobileApp()||"timeline"!=n)){e=e.withCol(0);t=t.withCol(1)}return{selectStart:e,selectEnd:t}}
;e.prototype.assertValidPosition=function(e,t,n){if(e.line<0||e.line>=this.reps[e.zone].lines.length())throw new Error(t+": position "+e+" is invalid, line does not exist.")
;var o=this.reps[e.zone].lines.atIndex(e.line);if(!(e.col>=0&&e.col<=o.text.length)){
for(var r=this.reps[e.zone].alines[e.line],a=this.editor.contents.getAttributesForLine(new u.Position(e.zone,e.line,0)),s=0;s<a.length;s++)a[s]={num:a[s].num,key:a[s].key}
;for(;n&&n.parentNode&&!n.parentNode.zoneId;)n=n.parentNode;throw new Error(t+": position "+e+" is invalid. relevant-apool: "+JSON.stringify(a)+"; attribs: "+r+", node: "+i.nodeToRedactedString(n))}}
;e.prototype.internalGetSelectionPoints=function(){var e=window.getSelection();if(e&&"None"!=e.type&&0!==e.rangeCount){var t=this.getUnifiedSelectionRange(e)
;return g.default.dom.hasParent(t.startContainer,this.root)&&g.default.dom.hasParent(t.endContainer,this.root)?(0,r.closest)(t.startContainer,".ace-line-pocket")||(0,
r.closest)(t.endContainer,".ace-line-pocket")?null:{startPoint:this.pointFromRangeBound(t.startContainer,t.startOffset),endPoint:this.pointFromRangeBound(t.endContainer,t.endOffset),
isReversed:this.isFocusAtStart(e)}:null}return null};e.prototype.getPositionOfPoint=function(e,t){if(document.caretRangeFromPoint){
var n=document.caretRangeFromPoint(e,t),o=n.startContainer,i=n.startOffset,r=this.pointFromRangeBound(o,i);return this.positionForDomPoint(r)}return null}
;e.prototype.pointFromRangeBound=function(e,t){var n=e,o=n.childNodes.length;if(g.default.dom.isNodeText(n))return{node:n,index:t,maxIndex:n.nodeValue.length};if(0==o&&(0,
c.hasParents)(n,".ace-type-cell")&&this.editor.getCurrentLineEntry()){return{node:r=this.editor.getCurrentLineEntry().lineNode,index:0,maxIndex:i=g.default.dom.nodeMaxIndex(r)}}if(0==o)return{node:n,
index:0,maxIndex:1};if(t==o){var i,r=n.childNodes.item(o-1);"TBODY"==n.tagName&&r.querySelector(".ace-line")&&this.editor.getCurrentLineEntry()&&(r=this.editor.getCurrentLineEntry().lineNode);return{
node:r,index:i=g.default.dom.nodeMaxIndex(r),maxIndex:i}}"TR"!=(r=n.childNodes.item(t)).tagName&&"TD"!=r.tagName||!r.querySelector(".ace-line")||(r=r.querySelector(".ace-line"));return{node:r,index:0,
maxIndex:i=g.default.dom.nodeMaxIndex(r)}};e.prototype.getUnifiedSelectionRange=function(e){if(!e.rangeCount)return null;var t=e.getRangeAt(0);if(1===e.rangeCount)return t
;var n=e.getRangeAt(e.rangeCount-1);t.setEnd(n.endContainer,n.endOffset);return t};e.prototype.isFocusAtStart=function(e){var t=e.getRangeAt(0)
;return(t.startContainer!=t.endContainer||t.startOffset!=t.endOffset)&&e.anchorNode&&e.anchorNode==t.endContainer&&e.anchorOffset==t.endOffset};e.prototype.pointToRangeBound=function(e,t){
var n=this.editor,o=function(e){return{node:e.node,index:e.index,maxIndex:e.maxIndex}}(e);if(t){var i=function(){for(;o.node.childNodes.length>0;)if(0==o.index){o.node=o.node.firstChild
;o.maxIndex=g.default.dom.nodeMaxIndex(o.node)}else{if(o.index!=o.maxIndex)break;o.node=o.node.lastChild;o.maxIndex=g.default.dom.nodeMaxIndex(o.node);o.index=o.maxIndex}}
;if(g.default.dom.isNodeText(o.node)&&o.index==o.maxIndex){for(var r=o.node;!r.nextSibling&&!n.dom.isRootOfZone(r)&&!n.dom.isRootOfZone(r.parentNode)&&null!=r.parentNode;)r=r.parentNode
;var a=r.classList
;if(!(l.isApple()&&a&&a.contains("gallery-extraneous-space"))&&r.nextSibling&&("string"!=typeof r.nextSibling.tagName||"br"!=r.nextSibling.tagName.toLowerCase())&&r!=o.node&&!n.dom.isRootOfZone(r)&&!n.dom.isRootOfZone(r.parentNode)){
o.node=r.nextSibling;o.maxIndex=g.default.dom.nodeMaxIndex(o.node);o.index=0;i()}}g.default.dom.isNodeText(o.node)||i()}return g.default.dom.isNodeText(o.node)?{container:o.node,offset:o.index}:{
container:o.node.parentNode,offset:g.default.dom.childIndex(o.node)+o.index}};e.prototype.setSelection=function(e){var t;this.internalUpdateLineHighlights(!!e);var n=window.getSelection();if(n&&e){
t=e.startPoint.node===e.endPoint.node&&e.startPoint.index===e.endPoint.index;var o=this.pointToRangeBound(e.startPoint,t),i=this.pointToRangeBound(e.endPoint,t)
;if(e&&n.rangeCount&&n.getRangeAt(0).startContainer===o.container&&n.getRangeAt(0).endContainer===i.container&&n.getRangeAt(0).startOffset===o.offset&&n.getRangeAt(0).endOffset===i.offset&&this.isFocusAtStart(n)===e.isReversed)return
;if(n.collapse&&n.extend)if(t)n.collapse(o.container,o.offset);else if(e.isReversed){n.collapse(i.container,i.offset);n.extend(o.container,o.offset)}else{n.collapse(o.container,o.offset)
;n.extend(i.container,i.offset)}else{var r=document.createRange();r.setStart(o.container,o.offset);r.setEnd(i.container,i.offset);n.removeAllRanges();n.addRange(r)}}}
;e.prototype.internalUpdateSelectionFromRep=function(e){var t=this.editor,n=this.currentSelection,o=n.start,i=n.end;if(!n.hasSelection){this.setSelection(null);return!1}
if(!e&&!this.isEditorFocused())return!1;t.dom.zoneOfRootNode(document.activeElement)!=o.zone&&this.focusNodeWithoutScrolling(t.dom.rootNodeOfZone(o.zone));var r={
startPoint:this.getPointForLineAndChar(o),endPoint:this.getPointForLineAndChar(i),isReversed:!!this.currentSelection.isReversed};if(o.zone===i.zone&&o.line===i.line){
var a=t.getRep(o.zone).lines.atIndex(o.line).domInfo.lineManagerType;if("gallery"==a){
if(!(l=t.getRep(o.zone).lines.atIndex(o.line).domInfo.node.querySelector(".gallery-extraneous-space").childNodes[0]))throw new Error("getting magic space node didn't work");r={startPoint:{node:l,
index:0,maxIndex:0},endPoint:{node:l,index:0,maxIndex:0},isReversed:!1}}else if("timeline"===a){var s=t.getRep(o.zone).lines.atIndex(o.line)
;if(!(l=t.managers.lineManagerForLine(s,"timeline").getSelectionNode()))throw new Error("getting magic space node didn't work");r={startPoint:{node:l,index:0,maxIndex:0},endPoint:{node:l,index:0,
maxIndex:0},isReversed:!1}}else if(o.col+1===i.col&&this.getInlineMagicObjectAtPosition(o)){var l
;if(!(l=this.getInlineMagicObjectAtPosition(o).getWrapperNode().querySelector(".extraneous-space").childNodes[0]))throw new Error("getting magic extraneous space node (inline magic object) didn't work")
;r={startPoint:{node:l,index:0,maxIndex:1},endPoint:{node:l,index:1,maxIndex:1},isReversed:!1}}}else r={startPoint:this.getPointForLineAndChar(o),endPoint:this.getPointForLineAndChar(i),
isReversed:!!this.currentSelection.isReversed};this.setSelection(r);t.observer.trigger("selection-change",void 0);t.observer.trigger("caret",!1);return!0}
;e.prototype.focusNodeWithoutScrolling=function(e){var t=this.editor.dom.getScrollEl(),n=(0,r.getScrollLeft)(t),o=(0,r.getScrollTop)(t);e.focus();(0,r.setScrollLeft)(t,n);(0,r.setScrollTop)(t,o)}
;e.prototype.internalUpdateLineHighlights=function(e){this.internalRemoveAllLineHighlights();e&&this.internalAddLineHighlights()};e.prototype.internalAddLineHighlights=function(){
var e=this,t=this.editor,n=t.selection.get(),o=n.start,i=n.end;if(n.hasSelection){var r=t.getSelectedRep();if(t.hasFeature("lightbox")){var a=r.lines.atIndex(o.line)
;o.line==i.line&&a&&t.core.withoutRecordingMutations((function(){a.lineNode.classList.add("focused-line");e.focusedLineNodes.push(a.lineNode)}));for(var l=this.currentSelection.zone,d=function(n){
var d=s.lineHasLineLevelObject(l,n,r,t.getApool(),c.contentTypeRegistry);if(l!=u.Position.ROOT_ZONE){a=t.managers.getLineEntryContainingZone(l);d=!0}d&&t.core.withoutRecordingMutations((function(){
e.selectedLineNodes.push(a.lineNode);a.lineNode.classList.add("selected-line");var r=t.managers.getLineManager(l,n,"gallery");r&&!r.currentIndexStillFocused()&&r.selectItem(r.getCurrentIndex())
;l==u.Position.ROOT_ZONE&&o.line!=i.line&&a.lineNode.classList.add("selected-whole-line")}));if(l!=u.Position.ROOT_ZONE)return"break";a=r.lines.next(a)},c=this,h=o.line;h<=i.line;h++){
if("break"===d(h))break}}}};e.prototype.blurGalleriesInTable=function(e){for(var t=this.editor.selection.get(),n=t.zone,o=t.focusLine,i=function(e){
r.editor.managers.getAllLineManagersForZone(e,"gallery").forEach((function(t){var i=t.lineManager,r=t.lineNumber;e===n&&r===o||i.blur()}))},r=this,a=0,s=e.getAllChildZones();a<s.length;a++){i(s[a])}}
;e.prototype.blurGalleryInLine=function(e,t,n){e.currentIndexStillFocused()&&!this.editor.managers.hasSelection(t,n)&&e.blur()};e.prototype.blurGalleryIfDeselected=function(){var e=this
;this.selectedLineNodes.forEach((function(t){if(e.editor.dom.rootNodeOfZoneContaining(t)){var n=e.getPositionForNode(t),o=n.zone,i=n.line,r=e.editor.managers.getLineManagerType(o,i);if("gallery"==r){
var a=e.editor.managers.getLineManager(o,i,"gallery");a&&e.blurGalleryInLine(a,o,i)}if("aceTable"==r){var s=e.editor.managers.getLineManager(o,i,"aceTable");s&&e.blurGalleriesInTable(s)}}}))}
;e.prototype.internalRemoveAllLineHighlights=function(){var e=this;this.editor.core.withoutRecordingMutations((function(){e.focusedLineNodes.forEach((function(e){
return e.classList.remove("focused-line")}));e.selectedLineNodes.forEach((function(e){e.classList.remove("selected-line");e.classList.remove("selected-whole-line")}));e.blurGalleryIfDeselected()}))
;this.focusedLineNodes=[];this.selectedLineNodes=[]};e.prototype.positionForDomPoint=function(e){var t=this.editor;if(!e)throw new Error("positionForDomPoint got falsy point")
;var n=t.dom.rootNodeOfZoneContaining(e.node);if(!n){for(var o=e.node;o&&o.parentNode;)o=o.parentNode
;throw new Error("positionForDomPoint got falsy root node; is the node not in ace-editor? node is "+(0,d.nodeToRedactedString)(e.node)+" of "+(0,d.nodeToRedactedString)(o))}
var i=t.dom.zoneOfRootNode(n);if(!i)throw new Error("positionForDomPoint got falsy zone node; is something wrong with the ace-editor node?");var r=t.getRep(i);if(e.node==n){
if(0==e.index)return new u.Position(i,0,0);var s=r.lines.length(),l=r.lines.atIndex(s-1);return new u.Position(i,s-1,l.text.length)}var c=e.node,h=0
;g.default.dom.isNodeText(c)?h=e.index:e.index>0&&(h=g.default.dom.nodeText(c).length);for(var p=void 0,f=void 0;(p=c.parentNode)!=n;)if(f=c.previousSibling){c=f;h+=g.default.dom.nodeText(c).length
}else{c=p;"string"==typeof p.getAttribute("data-faketext")&&(h=h>0?p.getAttribute("data-faketext").length:0)}""==c.id&&console.log("BAD");var m=r.lines.atKey(c.id)
;c.firstChild&&(g.default.dom.isBlockElement(c.firstChild)||(0,a.isPocketEnabled)()&&m.lineMarker)&&(h+=1);var v=r.lines.indexOfEntry(m)
;return m.domInfo.lineManagerType&&h>1?new u.Position(i,v,1):new u.Position(i,v,h)};e.prototype.internalIMEHackOnIOS=function(){
return this.pointToRangeBound(this.getPointForLineAndChar(this.getStart()),!1)};e.prototype.getPointForLineAndChar=function(e){var t=this.editor.getRep(e.zone).lines.atIndex(e.line)
;return this.internalGetPointForLineEntryAndCol(t,e.col)};e.prototype.internalGetPointForLineEntryAndCol=function(e,t){if(e.domInfo.lineManagerType)return{node:e.lineNode,index:t,maxIndex:1};var n=t
;(n-=e.lineMarker)<0&&(n=0);var o=e.lineNode,i=o,r=!1;if(0==n)return{node:o,index:0,maxIndex:1};for(;i!=o||!r;)if(r)if(i.nextSibling){i=i.nextSibling;r=!1
}else i=i.parentNode;else if(i&&g.default.dom.isNodeText(i)||"string"==typeof i.getAttribute("data-faketext")){var a=(i.nodeValue||i.getAttribute("data-faketext")).length;if(n<=a){var s=i.nextSibling
;if(n==a&&s&&s.getAttribute&&"start"===s.getAttribute("data-contentcollector-ignore-space-at")){return(c=i.nextSibling).nextSibling?{node:c,index:1,maxIndex:1}:{node:c.parentNode,index:1,maxIndex:1}}
if(n==a&&!i.nextSibling){for(var l=i;l.parentNode&&l.parentNode.lastChild===l;)l=l.parentNode;var d=l.nextSibling
;if(l&&d&&d.getAttribute&&"start"===d.getAttribute("data-contentcollector-ignore-space-at")){var c;return(c=l.nextSibling).nextSibling?{node:c,index:1,maxIndex:1}:{node:c.parentNode,index:1,maxIndex:1
}}}return g.default.dom.isNodeText(i)?{node:i,index:n,maxIndex:a}:{node:i,index:n>0?1:0,maxIndex:1}}n-=a;r=!0}else i.firstChild?i=i.firstChild:r=!0;return{node:o,index:1,maxIndex:1}};return e}()
;t.default=v;t.handleSelectAllCommand=function(e,t){if(!(0,r.isInput)(t.target)){t.preventDefault();t.stopPropagation();e.selection.selectAll()}};function y(e){for(var t=e,n=[{elm:t,top:t.scrollTop
}];t.offsetParent;){t=t.offsetParent;n.push({elm:t,top:t.scrollTop})}e.focus({preventScroll:!0});for(var o=0,i=n;o<i.length;o++){var r=i[o],a=r.elm,s=r.top;a.scrollTop!==s&&(a.scrollTop=s)}}
t.focusAndRestoreParentScroll=y},450:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.formatDateAriaLabel=t.formatDate=t.getLineState=void 0;var o=n(6),i=n(546),r=n(142),a=n(0)
;t.getLineState=function(e,t,n){var i,a=e.lineNode,l=a.querySelector("li").getAttribute("data-due-date"),d=l?new Date(l):null,c=a.classList.contains("ace-rtl")?"ace-rtl":"ace-ltr";return{
usuallyUniqueId:e.domInfo.usuallyUniqueId,domId:a.getAttribute("id"),isComplete:"taskdone"===e.domInfo.listType,dueDate:d,mentions:s(e,n),textDir:c,guessedDueDates:(i=e.text,o.uniqBy((0,
r.parseDates)(i),(function(e){return e.date.getTime()}))),lineZone:t.zone,indentLevel:e.domInfo.indentLevel}};function s(e,t){
for(var n=e.lineNode.querySelectorAll(".mention-person"),o=[],i=[],r=0,a=Array.prototype.slice.call(n);r<a.length;r++){
var s=a[r],l=(s.getAttribute("href")||"").substring(12),d=s.getAttribute("data-mentiontext")||"",c=t?t.getUser("d."+l):null;if(d&&l&&!(l in i)){o.push({encryptedAccountId:l,mentionText:d,userInfo:c})
;i[l]=!0}}return o}t.formatDate=function(e,t){var n=(new Date).getTimezoneOffset();return a.createElement(i.DueDateTimeAgo,{date:e,timezoneOffsetMinutes:n,useFancyWeekdayFormatting:t})}
;t.formatDateAriaLabel=function(e,t){if(!e)return null;var n=(new Date).getTimezoneOffset();return(0,i.getDueDateTimeAgoAriaLabel)({date:e,timezoneOffsetMinutes:n,useFancyWeekdayFormatting:t})}},
451:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.getPositionForFocusOptions=t.getInitializationZatext=void 0
;var o=n(804),i=n(72),r=n(22),a=n(64),s=n(58),l=n(196),d=n(593),c=n(20),u=n(192),h=n(51),p=n(592),f=n(17);t.getInitializationZatext=(0,p.trace)("getInitializationZatext",(function(e){
var t=e.collab_client_vars,n=e.initialUnreadNotifications||[],a=r.cloneZatext(t.collabBaseState.zatext),s=(new i.default).fromJsonable(t.collabBaseState.apool),l=a,c=null
;if(t.missedChanges&&t.missedChanges.committedChangeset){var u=t.missedChanges.committedChangeset,h=(new i.default).fromJsonableNoCloning(t.missedChanges.committedChangesetAPool)
;c=u=r.moveOpsToNewPool(u,h,s)}var p=null;if(t.missedChanges&&t.missedChanges.furtherChangeset){u=t.missedChanges.furtherChangeset,
h=(new i.default).fromJsonableNoCloning(t.missedChanges.furtherChangesetAPool);p=u=r.moveOpsToNewPool(u,h,s)}var f=a;c&&(f=r.applyToZatext(c,f,s));p&&(f=r.applyToZatext(p,f,s));var g={}
;if(n.length>0){g=d.default.computeInDocUnreadMentionNotificationsMap(n,[]);var m=o.default.buildInitialChangeset(f,s,g);f=r.applyToZatext(m,f,s)}return{pool:s,aceZatext:f,baseZatext:l,
userChangeset:p,submittedChangeset:c,initialIdMapToHighlight:g}}));t.getPositionForFocusOptions=function(e,t,n){if(n.usuallyUniqueIds&&n.usuallyUniqueIds.length){
if((o=m(e,t,n.usuallyUniqueIds.map((function(e){return t.putAttrib(["usuallyUniqueId",e],!0)})).filter((function(e){return-1!==e})))).success)return o}if(n.threadId){var o,i=n.threadId,d=[]
;t.eachAttrib((function(e,n){(e==="thread-"+i||"gallery"===e&&function(e,t){try{for(var n=JSON.parse(e),o=0;o<n.items.length;o++)if("thread-"+t in n.items[o])return!0;return!1}catch(e){return!1}
}(n,i))&&d.push(t.putAttrib([e,n]))}));if((o=m(e,t,d)).success)return o}if(n.aceHash||n.headingLine||n.headingLine2||n.aceHash2||n.timelineItemId)for(var u=(0,
a.docHand)(e,t),p=u.textlines(),f=u.alines(),v=function(o){var i=!1,d=null,m=null,v=(0,s.getTableMagicObject)(f[o],t);if(v){var y=v.value.split(" ");if(2==y.length){i=!0;d=y[0];m=y[1]}}
if(n.timelineItemId){var b=f[o],C=r.attribsAttributeValue(b,"timeline",t);if(C){var E=JSON.parse(C).timelineId;if(-1!==(E?(0,
l.getTimelineZoneIdsFromZatext)(E,e,t):[]).indexOf(n.timelineItemId))return{value:{success:!0,zone:c.Position.ROOT_ZONE,line:o,topLevelLine:o}}}}if(i&&(n.aceHash||n.aceHash2)){
var I=u.root().getRowsText(d).ids(),_=u.root().getColsText(m).ids(),T=null;h.crossProduct(I,_).forEach((function(i){for(var r=(0,
a.zoneHand)(e,t,i),s=r.textlines(),l=r.alines(),d=0;d<s.length;d++)g(s[d],l[d],t,n)&&(T={success:!0,zone:i,line:d,topLevelLine:o})}));if(T&&T.success)return{value:T}}if(g(p[o],f[o],t,n)){
if(!(!!n.headingLine||!!n.headingLine2)||0==o||(0,s.isHeader)(p[o],f[o],t))return{value:{success:!0,zone:"0",line:o,topLevelLine:o}}}},y=0;y<p.length;y++){var b=v(y)
;if("object"==typeof b)return b.value}return{success:!1}};function g(e,t,n,o){var i=null;if(o.aceHash||o.headingLine){var a=r.opIterator(t),s=a.hasNext()&&a.next().getAttribute("list",n)?1:0
;i=f.default.string.trim(e.substring(s))}var l=null;(o.headingLine2||o.aceHash2)&&(l=(0,u.default)(e+"\n",t,n))
;return o.aceHash&&f.default.string.hashCode(i)===o.aceHash||o.aceHash2&&f.default.string.hashCode(l)===o.aceHash2||o.headingLine2&&o.headingLine2==l.substring(0,o.headingLine2.length).replace(/ /g,"-")||o.headingLine&&o.headingLine==i.substring(0,o.headingLine.length).replace(/ /g,"-")
}function m(e,t,n){var o=null;(0,a.docHand)(e,t).someAtextZone((function(i){for(var a=i.attribs(),s=0,l=r.opIterator(a);l.hasNext();){
for(var d=l.next(),c=r.getAttribNumbers(d.attribs),u=0;u<c.length;u++)if(-1!==n.indexOf(c[u])){var h=i.absolutePath(),p="0"==h?s:v(e,t,h);o=null===p?{success:!1}:{success:!0,zone:h,line:s,
topLevelLine:p};return!0}s+=d.lines}return!1}));o||(o={success:!1});return o}function v(e,t,n){for(var o=h.getRowAndColIdFromCellId(n).rowId,i=(0,
a.docHand)(e,t).attribs(),s=r.opIterator(i),l=0;s.hasNext();){var d=s.next();if("aceTable"==d.getAttribute("magicObject",t)){var c=d.getAttribute("aceTable",t).split(" ")[0];if(-1!==(0,
a.docHand)(e,t).getRowsText(c).ids().indexOf(o))return l}l+=d.lines}return null}},453:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})
;t.getEmbedsCount=t.getTableCellsCount=t.getLineCount=t.getNodeCount=void 0;t.getNodeCount=function(e){return e.getElementsByTagName("*").length};t.getLineCount=function(e){return e.children.length}
;t.getTableCellsCount=function(e){return e.getElementsByTagName("td").length};t.getEmbedsCount=function(e){return e.getElementsByClassName("gallery-item-wrapper").length}},454:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.shortDateAndTime=void 0;var o=n(110),i=n(0),r=n(41),a=n(84);t.shortDateAndTime=function(e){var t=new Date,n=new Date(e),s=n.getDate().toString()
;return{date:n.getTime()-t.getTime()<=2*r.Time.DAY?i.createElement("span",{className:"meeting-note-panel-entry-date"},i.createElement(a.TimeAgo,{date:n.getTime()})):o.default.fullDateNoYear(n),day:s,
time:o.default.shortTime(n)}}},455:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.withFilesystemInfo=void 0;var o=n(1),i=n(11),r=n(0),a=function(e){o.__extends(t,e);function t(t){
var n=e.call(this,t)||this;n.handleFilesystemInfoUpdate=function(){var e=n.props.padController.filesystemInfoStore;null==e||e.getFilesystemInfo().then((function(e){n.setState({filesystemInfo:e})}))}
;n.state={filesystemInfo:null};return n}t.prototype.componentWillReceiveProps=function(e){this.props.isOffline&&!e.isOffline&&this.handleFilesystemInfoUpdate()}
;t.prototype.componentDidMount=function(){var e=this;if(this.props.padController.isCloudDoc()){var t=this.props.padController.filesystemInfoStore
;null==t||t.on("change",this.handleFilesystemInfoUpdate);this.props.padController.getPadId()?t.loadFilesystemInfo():this.events.on(this.props.padController,"pad-id-changed",(function(){
e.props.padController.getPadId()&&e.props.padController.filesystemInfoStore.loadFilesystemInfo()}))}};t.prototype.componentWillUnmount=function(){var e,t
;null===(t=null===(e=this.props.padController)||void 0===e?void 0:e.filesystemInfoStore)||void 0===t||t.off("change",this.handleFilesystemInfoUpdate)};t.prototype.render=function(){
return this.props.render(this.state.filesystemInfo)};t.displayName="FileSystemInfoProvider";return t=o.__decorate([i.default],t)}(r.PureComponent);t.withFilesystemInfo=function(e){var t,n=e
;return t=function(e){o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this;return r.createElement(a,{
padController:this.props.padController,isOffline:this.props.isOffline,render:function(t){return r.createElement(n,o.__assign({filesystemInfo:t},e.props))}})};return t}(r.PureComponent),
t.displayName="withFilesystemInfo(".concat(e.displayName,")"),t}},528:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.getRootStyleDetails=t.setRootStyling=t.getWholeDocLang=void 0
;var o=n(1),i=n(6),r=n(178),a=n(81),s=n(22),l=n(26),d=n(30),c=n(50),u=n(42),h=n(20),p=n(17),f=function(){function e(e){var t,n,o=this;this.editor=e;this.defaultLang=((t={})[h.Position.ROOT_ZONE]=null,
t);this.currentLang=((n={})[h.Position.ROOT_ZONE]=null,n);this.tokenizerTimeout=null;this.dirtyZoneNodeIdsMap={};this.updateWholeDocLanguage=function(){
o.editor.hasFeature("whole-doc-lang-from-title")&&o.updateWholeZoneLanguage(h.Position.ROOT_ZONE)};this.updateWholeZoneLanguage=function(e){
var t=o.editor.getRep(e).lines,n=m(t.length()>=1?t.atIndex(0).text:"");n!==o.currentLang[e]&&o.setWholeZoneLanguage(e,n);o.currentLang[e]=n}
;this.worker=new g(this.calculateDirtyCodeBlocks.bind(this),this.handleGuessResult.bind(this));e.observer.on("change",this.updateWholeDocLanguage)}e.prototype.dispose=function(){
this.editor.observer.off("change",this.updateWholeDocLanguage);this.worker.dispose();this.worker=this.editor=null};e.prototype.isMonospace=function(e){return!!this.defaultLang[e]}
;e.prototype.updateSyntaxHighlightingOnChange=function(e){var t,n=this.editor;if(n.contents.getIsEditable()&&n.isSetupComplete&&n.core.getHasAnyUserChangeYet()){
for(var o=0,r=void 0;r=e[o];o++)if(r instanceof HTMLElement){var a=n.dom.zoneOfTopLevelNode(r),s=null!==(t=this.dirtyZoneNodeIdsMap[a])&&void 0!==t?t:{};this.isCode(r)&&(s[r.id]=r)
;var l=r.previousSibling;this.isCode(l)&&l instanceof HTMLElement&&n.dom.zoneOfTopLevelNode(l)==a&&(s[l.id]=l);var d=r.nextSibling
;this.isCode(d)&&d instanceof HTMLElement&&n.dom.zoneOfTopLevelNode(d)==a&&(s[d.id]=d);i.isEmpty(s)||(this.dirtyZoneNodeIdsMap[a]=s)}
!i.isEmpty(this.dirtyZoneNodeIdsMap)&&this.isCaretInCodeBlock()&&this.worker.requestUpdate()}};e.prototype.isCode=function(e){var t;if(e&&e.nodeType===Node.ELEMENT_NODE){var n=e
;return!!n.id&&!!(null===(t=n.classList)||void 0===t?void 0:t.contains("line-list-type-code"))}return!1};e.prototype.isCaretInCode=function(){
return this.isCaretInCodeBlock()||this.isCaretInInlineCode()};e.prototype.isCaretInInlineCode=function(){var e=this.editor;if(e.hasSelection()){
var t=e.selection.getStart(),n=0!=t.col?t.withCol(t.col-1):t;if(e.contents.getAttributeValueForPoint(n,"inline-code"))return!0}return!1};e.prototype.isCaretInCodeBlock=function(){
var e=this.editor,t=this.editor.selection.getZone();return!!this.isMonospace(t)||0==e.contents.getLineType(e.selection.getStart()).indexOf("code")};e.prototype.calculateDirtyCodeBlocks=function(){
var e=this.findCodeBlocksTouchingDomLines(this.dirtyZoneNodeIdsMap);this.dirtyZoneNodeIdsMap={};return e};e.prototype.findCodeBlocksTouchingDomLines=function(e){
for(var t={},n=[],o=0,r=Object.keys(e);o<r.length;o++)for(var a=r[o],s=i.values(e[a]),l=0,d=void 0;d=s[l];l++)if(d.parentNode){var c=d.id;if(!(c in t)){t[c]=!0;for(var u={zoneId:a,
currentLanguage:this.getLangForCodeLine(a,this.editor.getRep(a).lines.indexOfKey(c)),lineIds:[c],text:"",result:null
},h=[d.textContent],p=d.previousSibling;this.isCode(p)&&p instanceof HTMLElement&&this.editor.dom.zoneOfTopLevelNode(p)==a;){t[p.id]=!0;u.lineIds.unshift(p.id);h.unshift(p.textContent)
;p=p.previousSibling}p=d.nextSibling;for(;this.isCode(p);){t[p.id]=!0;u.lineIds.push(p.id);h.push(p.textContent);p=p.nextSibling}u.text=h.join("\n");n.push(u)}}return n}
;e.prototype.handleGuessResult=function(e){var t=this,n=this.editor;n.core.getIMEStatus()||n.execute("handleGuessResult",(function(){n.callStack.makeNewNonundoableEvent((function(){
e.forEach((function(e){var o,i,r=e.result
;if(r&&r.language!=e.currentLanguage&&(!e.currentLanguage||0!=e.currentLanguage.indexOf(u.langOverridePrefix)))if(e.currentLanguage&&r.second_best&&r.language!=e.currentLanguage&&r.second_best.language==e.currentLanguage&&r.relevance-r.second_best.relevance<.1*r.relevance)console.log("Skipping language change do to match: ",r.language,r.relevance,r.second_best.language,r.second_best.relevance);else{
for(var a=null,s=0;s<e.lineIds.length;s++){var l=n.dom.getAceLineById(e.lineIds[s]);t.isCode(l)&&(a=t.findCodeBlocksTouchingDomLines((o={},o[e.zoneId]=(i={},i[l.id]=l,i),o))[0])}if(a){
var d="Changing language from "+e.currentLanguage+" to "+r.language;r.second_best&&(d+=". Second best was: "+r.second_best.language+" "+r.relevance+" vs "+r.second_best.relevance);console.log(d)
;var c=n.getRep(a.zoneId).lines,h=c.indexOfKey(a.lineIds[0]),p=c.indexOfKey(a.lineIds[a.lineIds.length-1]);t.setLanguage(r.language,a.zoneId,h,p)
}else console.log("Failed to update the guessed syntax for a code block because none of the original lines are in the dom anymore.")}}))}))}))};e.prototype.setLanguage=function(e,t,n,o){
var i=this.editor;if(i.contents.getIsEditable()){var r=i.getRep(t),a=s.builder(r.lines.totalWidth(),"Z",t);a.keep(r.lines.offsetOfIndex(n),n);i.contents.eachLineInRange(t,n,o+1,(function(t){
if(!t.lineMarker)throw Error("Line entry has no line marker!");a.keep(t.lineMarker,0,[["lang",e]],i.getApool());a.keep(t.text.length-t.lineMarker+1,1)}))
;i.contents.performDocumentApplyChangeset(a.toChangeset())}};e.prototype.setLanguageOnSelection=function(e){var t=this,n=this.editor;n.execute("setLanguageOnSelection",(function(){
n.callStack.makeNewNonundoableEvent((function(){var o=n.selection.getZone(),i=n.getRep(o),r=n.selection.getStart(),a=n.selection.getEnd();if(r&&a){
for(var l=r.line,d=a.line,c=l;c>=0&&t.lineIsCodeLine(c);c--)l--;var u=i.lines.length();for(c=d;c<u&&t.lineIsCodeLine(c);c++)d++;var h=s.builder(i.lines.totalWidth(),"Z",o)
;h.keep(i.lines.offsetOfIndex(l),l);n.contents.eachLineInRange(o,l,d,(function(o,i){if(t.lineIsCodeLine(i)){h.keep(o.lineMarker,0,[["lang",e]],n.getApool());h.keep(o.text.length-o.lineMarker+1,1)
}else h.keep(o.text.length+1,1)}));n.contents.performDocumentApplyChangeset(h.toChangeset())}}))}))};e.prototype.setWholeZoneLanguage=function(e,t){var n=this;this.defaultLang[e]=t
;v(this.editor.dom.getRootForZone(e),t);this.tokenizerTimeout&&window.clearTimeout(this.tokenizerTimeout);this.tokenizerTimeout=window.setTimeout((function(){
n.editor.execute("setWholeZoneLanguage",(function(){var t=n.editor.getRep(e);n.recolorLinesInRange(e,0,t.alltext.length)}))}),0)};e.prototype.lineIsCodeLine=function(e){
var t=this.editor.contents.getLineType(new h.Position(this.editor.selection.getZone(),e,0));return Boolean(0==(null==t?void 0:t.indexOf("code")))};e.prototype.getLangForCodeLine=function(e,t){
var n=this.editor.getRep(e).alines[t];if(n){var o=s.opIterator(n);if(o.hasNext())return s.opAttributeValue(o.next(),"lang",this.editor.getApool())||this.defaultLang[e]}return this.defaultLang[e]}
;e.prototype.getDefaultLang=function(e){return this.defaultLang[e]};e.prototype.recolorLinesInRange=function(e,t,n){var o=this.editor,i=o.getRep(e);if(!(n<=t||t<0||t>=i.lines.totalWidth())){
for(var r=i.lines.atOffset(t),a=i.lines.offsetOfEntry(r),s=i.lines.indexOfEntry(r),l=!1,d=null;r&&a<n;){var c=a+(r&&r.width||0);o.core.withoutRecordingMutations((function(){o.core.rerenderDomLine(e,r)
}));(o.hasSelection()&&o.selection.getStart().line==s||o.selection.getEnd()&&o.selection.getEnd().line==s)&&o.selection.getZone()==e&&(l=!0);null===d&&(d=s);a=c;r=i.lines.next(r);s++}
l&&(o.callStack.getCurrentCallStack().selectionAffected=!0)}};return e}();t.default=f;var g=function(){function e(e,t){this.buildPostMessageCallback_=e;this.onMessagePostedCallback_=t
;this.worker_=null;this.needsUpdate_=!1;this.isRunning_=!1;this.canCreateWorkerAfter_=Date.now()+3e3;this.runTimeout_=setTimeout(this.scheduleRun_.bind(this),3e3);this.firstRunRequested_=0}
e.prototype.dispose=function(){clearTimeout(this.runTimeout_);this.worker_&&this.worker_.terminate();this.worker_=null;this.buildPostMessageCallback_=null;this.onMessagePostedCallback_=null}
;e.prototype.requestUpdate=function(){this.needsUpdate_=!0;this.scheduleRun_()};e.prototype.scheduleRun_=function(){var e=this;if(this.needsUpdate_&&!this.isRunning_){if(!this.worker_){
if(!(Date.now()>=this.canCreateWorkerAfter_))return;if(!p.default.error.loggingTryCatch((function(){e.worker_=new Worker(l.default.syntaxHighlightingWebWorkerUrl)
;e.worker_.onmessage=e.onMessagePosted_.bind(e);e.worker_.onerror=c.logWebWorkerException;return!0})))return}if(this.firstRunRequested_){
if(this.runTimeout_&&Date.now()-this.firstRunRequested_>1500)return}else this.firstRunRequested_=Date.now();this.runTimeout_&&clearTimeout(this.runTimeout_)
;this.runTimeout_=setTimeout(this.run_.bind(this),250)}};e.prototype.run_=function(){this.runTimeout_=0;this.firstRunRequested_=0;this.isRunning_=!0
;this.worker_.postMessage(this.buildPostMessageCallback_())};e.prototype.onMessagePosted_=function(e){this.isRunning_=!1;this.needsUpdate_=!1;this.onMessagePostedCallback_(e.data)}
;o.__decorate([a.callOnce],e.prototype,"dispose",null);return e=o.__decorate([a.nullifyProperties],e)}();function m(e){var t;if(e.indexOf(".")>-1){t=e.trim().split(".").pop().toLowerCase()
;-1==["js","c","cc","cpp","cxx","h","hpp","cs","vb","m","java","py","rb","css","html","htm","php","coffee","lua","pl","pm","r","sh","tcl","xml","sql","go","scala","textile","md","markdown","tex","json","ts","txt","hs","kt"].indexOf(t)&&(t=null)
}else t=null;return t}t.getWholeDocLang=m;function v(e,t){var n=y(t);n.spellcheck?e.setAttribute("spellcheck",n.spellcheck):e.removeAttribute("spellcheck");e.style.fontFamily=n.fontFamily}
t.setRootStyling=v;function y(e){return e?{spellcheck:"false",fontFamily:d.default.font_monospace}:{spellcheck:r.isValidBrowserForSpellcheck()?null:"false",fontFamily:""}}t.getRootStyleDetails=y},
532:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0});t.AC_TRACK_TITLES=t.AC_TYPE=void 0;t.AC_TYPE={AT:"at-linking",PLUS:"plus-linking",EMOJI:"emoji",PLACEHOLDER:"placeholder",
SLASH:"slash"};t.AC_TRACK_TITLES=((n={})[t.AC_TYPE.AT]="People Mentions",n[t.AC_TYPE.PLUS]="Pad Mentions",n[t.AC_TYPE.PLACEHOLDER]="Dynamic Placeholders",n[t.AC_TYPE.SLASH]="Slash Command",
n["@"]="People Mentions",n["+"]="Pad Mentions",n["{"]="Dynamic Placeholders",n["/"]="Slash Command",n)},573:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.InnerZoneEditorNode=t.makeRootNodeAsString=t.makeRootNode=void 0;var o=n(1),i=n(81),r=n(17);function a(e){var t=document.createElement("div")
;t.setAttribute("class","ace-editor selenium-inner-zone-ace-editor syntax notranslate zoneId-"+e);t.setAttribute("data-zone-id",e);return t}t.makeRootNode=a;t.makeRootNodeAsString=function(e,t){
return'<div class="ace-editor selenium-inner-zone-ace-editor syntax notranslate zoneId-'.concat(r.default.html.escapeHtml(e),'" ')+'data-zone-id="'.concat(r.default.html.escapeHtml(e),'">').concat(t,"</div>")
};var s=function(){function e(e,t,n,o){var i=this;this.zoneId=e;this.editor=t;this.isEditorContentEditable=n;this.isMouseOver=!1;this.isFocused=!1;this.isFocusedInRep=!1
;this.overallContentEditable=null;this.handleFocus=function(){i.isFocused=!0;i.updateContentEditableness();i.editor.observer.handleFocus()};this.handleBlur=function(){i.isFocused=!1
;i.updateContentEditableness();i.editor.observer.handleBlur()};this.handleMouseEnter=function(){if(!i.editor.mouse.getIsMousePressed()){i.isMouseOver=!0;i.updateContentEditableness()}}
;this.handleMouseLeave=function(){i.isMouseOver=!1;i.updateContentEditableness()};if(/[^a-z0-9]/.test(e))throw new Error("bad zone id (regex): "+e);o||(o=a(e));this.node=o
;this.node.addEventListener("focus",this.handleFocus);this.node.addEventListener("blur",this.handleBlur);this.node.addEventListener("mouseenter",this.handleMouseEnter)
;this.node.addEventListener("mouseleave",this.handleMouseLeave);this.node.zoneId={value:e};this.editor.core.dirtyRangeObservationSystem.observeNode(this.node);this.updateContentEditableness()}
e.prototype.dispose=function(){this.node.removeEventListener("focus",this.handleFocus);this.node.removeEventListener("blur",this.handleBlur)
;this.node.removeEventListener("mouseenter",this.handleMouseEnter);this.node.removeEventListener("mouseleave",this.handleMouseLeave)};e.prototype.updateEditorContentEditable=function(e){
this.isEditorContentEditable=e;this.updateContentEditableness()};e.prototype.updateIsFocusedInRep=function(e){this.isFocusedInRep=e;this.updateContentEditableness()};e.prototype.getNode=function(){
return this.node};e.prototype.updateContentEditableness=function(){var e=!(!this.isEditorContentEditable||!(this.isMouseOver||this.isFocused||this.isFocusedInRep));if(e!==this.overallContentEditable){
this.node.setAttribute("contentEditable",e?"true":"false");this.overallContentEditable=e}};o.__decorate([i.callOnce],e.prototype,"dispose",null);return e=o.__decorate([i.nullifyProperties],e)}()
;t.InnerZoneEditorNode=s},576:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.DropHint=void 0;var o=n(3),i=n(0),r=n(31),a=n(1339);t.DropHint=function(e){
for(var t=e.count,n=e.floatHeight,s=e.floatLayout,l=Math.min(3,t),d=[],c=r.default.isOnButDoNotLog("paper_pocket_interstitial")?a.default.item:"gallery-line-drop-hint-item",u=0;u<l;++u)d.push(i.createElement("div",{
className:c,key:u}));var h=r.default.isOnButDoNotLog("paper_pocket_interstitial")?a.default.hint:o({"gallery-line-drop-hint":!s,"gallery-line-drop-hint-float-left":"left"==s,
"gallery-line-drop-hint-float-right":"right"==s}),p={};s&&n&&(p.height=n);return i.createElement("div",{className:h,style:p},d)};t.DropHint.displayName="DropHint"},577:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.newAttachmentId=void 0;var o=n(38);t.newAttachmentId=function(){return"attachment-"+o.getStandardLengthRandomId()}},578:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.suggestInvitesFromDropboxSharingLink=t.sendInvites=t.sendOneClickInvite=t.InviteError=void 0
;var o,i=n(1),r=n(5),a=n(6),s=n(90),l=n(26),d=n(8),c=n(2),u=n(7),h=n(12),p=n(0),f=n(88),g=n(222),m=n(48),v=n(4),y=(0,r.PaperIntlFactory)().F,b=(0,c.defineMessages)({
numinvitespluraloneInviteotherInvitessent:{id:"udP51W",defaultMessage:"{numInvites, plural, one {Invite} other {Invites}} sent."},error:{id:"fy9qFc",defaultMessage:"Error"},
youcanonlyinvitemaxInviteesnumbercollaboratorstoadocatatime:{id:"Pl0wPW",defaultMessage:"You can only invite {maxInvitees, number} collaborators to a doc at a time."},toomanyinvitees:{id:"38cJNG",
defaultMessage:"Too many invitees"},adjustinvitees:{id:"VC4KUC",defaultMessage:"Adjust invitees"},thefollowingpeopleareonothersiteNameteamsandalascantbeinvitedemailList:{id:"QwduL/",
defaultMessage:"The following people are on other {siteName} teams and, alas,\n              can't be invited:{emailList}"},arethefollowingmembersofyourteamTheyllbeinvitedtositeNameifso:{id:"HxMxd9",
defaultMessage:"Are the following members of your team? They'll be invited to\n              {siteName} if so."},pleaseconfirm:{id:"OnmcwD",defaultMessage:"Please confirm"},invite:{id:"C4diaB",
defaultMessage:"Invite"},somethingwentwrongpleasetryagainlater:{id:"4bV7pl",defaultMessage:"Something went wrong, please try again later."},youvehitthelimitofinvitesyoucansendperdayTryagaininhours:{
id:"RGPiHh",defaultMessage:"You've hit the limit of invites you can send per day. Try again in 24 hours."},yoursharingactivityhasbeensuspended:{id:"9Myp5a",
defaultMessage:"Your sharing activity has been suspended."},youaretryingtosharewithtoomanypeopleatonce:{id:"zN8bIj",defaultMessage:"You are trying to share with too many people at once."},
wecouldnotcompleteyourrequestatthistimePleasetryagainlater:{id:"kosIWE",defaultMessage:"We could not complete your request at this time. Please try again later"},unabletoinvite:{id:"nF4ATG",
defaultMessage:"Unable to invite"},onlytheownercansharethis:{id:"8RyCTw",defaultMessage:"Only the owner can share this."},failedtosendoneormoreinvites:{id:"s+2Ofx",
defaultMessage:"Failed to send one or more invites."},cantshare:{id:"QYalVE",defaultMessage:"Can't share"},invitepeoplewhocanaccesstheinsertedDropboxfile:{id:"NDdJjX",
defaultMessage:"Invite people who can access the inserted Dropbox file?"},invitepeoplewhohavetheDropboxfile:{id:"fR17Xa",defaultMessage:"Invite people who have the Dropbox file?"},
invitepeoplewiththisfiletothedoc:{id:"l5WKp9",defaultMessage:"Invite people with this file to the doc?"},sharedfileaddedNowsharethisdoc:{id:"RgtiE2",
defaultMessage:"Shared file added. Now share this doc?"},close:{id:"u/p3Pl",defaultMessage:"Close"},showinvites:{id:"+/KmHh",defaultMessage:"Show invites"}});!function(e){
e[e.ExceedsMaxInvites=0]="ExceedsMaxInvites";e[e.AccountsOnOtherDomains=1]="AccountsOnOtherDomains";e[e.EmailsNeedingInvite=2]="EmailsNeedingInvite";e[e.BadRequest=3]="BadRequest"
;e[e.TooManyRequests=4]="TooManyRequests";e[e.ExceedsInviteRateLimit=5]="ExceedsInviteRateLimit";e[e.TooManyInvitees=6]="TooManyInvitees";e[e.ServiceDown=7]="ServiceDown"
;e[e.SharingDeniedOwnerOnly=8]="SharingDeniedOwnerOnly";e[e.Other=9]="Other";e[e.BannedUser=10]="BannedUser"}(o=t.InviteError||(t.InviteError={}));t.sendOneClickInvite=function(e,t,n,o,i,r,a){C(e,t,{
emails:[n],slackChannels:[],slackUsers:[],specialTargets:[]},"edit",{account_age:d.default.accountAge,isOneClickShare:!0,hideAllToast:r,completeCallback:o,onInviteFailed:i,commentsController:a})}
;function C(e,t,n,r,c){void 0===c&&(c={});var f=n.emails||[],E=n.slackUsers||[],I=n.slackChannels||[],_=n.specialTargets||[],T=!!c.personalMessage&&!!c.postAsComment,S={num_emails:f.length,
num_slack_channels:I.length,num_slack_users:E.length,num_special_targets:_.length,pad_type:u.PadType[t],__padId:e,has_message:!!c.personalMessage,
message_length:c.personalMessage?c.personalMessage.length:0,posted_as_comment:T,usesAtDoc:a.includes(_,g.SpecialMentionTarget.Doc),usesAtTeam:a.includes(_,g.SpecialMentionTarget.Team),
oneClickShare:!!c.isOneClickShare,has_subject:!!c.subjectLine};v.IntentionEvent.SharePad.track(S);h.post({url:"/ep/pad/invite/emailinvite",data:{padId:e,toAddress:f.join(","),
slackChannels:I.join(","),slackUsers:E.join(","),specialTargets:_.join(","),message:c.personalMessage||null,permission:r,postAsComment:T,includeNonTeamMembers:!0,subject:c.subjectLine},
analyticsTag:"people-panel-invite",shardingKey:h.getShardingKeyForPad(e),successHandler:function(e){(0,v.trackEng)("Share Pad Success",i.__assign(i.__assign({},S),{
num_invitees:e&&e.invited?e.invited.length:0}));var t=E.length+I.length;if(T)e.threadId&&c.commentsController&&c.commentsController.openNewlyCreatedCommentThreadAndFocus(e.threadId);else{
var n=f.length>0?f.length:t;c.hideAllToast||c.hideToastOnSuccess||m.default.show(p.createElement(m.default,{autoDismiss:!0},p.createElement(y,i.__assign({values:{numInvites:n}
},b.numinvitespluraloneInviteotherInvitessent))))}var o=d.default.numInviteSent?d.default.numInviteSent:0;d.default.updateInPlace({numInviteSent:o+f.length})
;c.completeCallback&&c.completeCallback(!0,null)},errorHandler:function(a,d){var u=JSON.safeParse(a),h=p.createElement(y,i.__assign({},b.error)),f={oneClickShare:!!c.isOneClickShare},g=o.Other
;u&&u.exceedsMaxInvites?g=o.ExceedsMaxInvites:u&&u.accountsOnOtherDomains?g=o.AccountsOnOtherDomains:u&&u.emailsNeedingInvite?g=o.EmailsNeedingInvite:400===d.status?g=o.BadRequest:429===d.status&&u&&u.message?g=o.TooManyRequests:u&&u.exceedsInviteRateLimit?g=o.ExceedsInviteRateLimit:u&&u.tooManyInvitees?g=o.TooManyInvitees:u&&u.serviceDown?g=o.ServiceDown:u&&u.sharingDeniedOwnerOnly?g=o.SharingDeniedOwnerOnly:u&&u.bannedUser&&(g=o.BannedUser)
;if(!c.hideAllToast)if(g===o.ExceedsMaxInvites){var m=p.createElement("span",null,p.createElement(y,i.__assign({values:{maxInvitees:u.maxInvitees}
},b.youcanonlyinvitemaxInviteesnumbercollaboratorstoadocatatime)));s.alert(p.createElement(y,i.__assign({},b.toomanyinvitees)),m,c.onInviteFailed,{
confirmText:p.createElement(y,i.__assign({},b.adjustinvitees))});(0,v.trackEng)("Share Pad Failed",i.__assign(i.__assign({},f),{reason:"too many invitees"}))}else if(g===o.AccountsOnOtherDomains){
var E="\n\n"+u.accountsOnOtherDomains.map((function(e){return e.email+" ("+e.teamName+")"})).join("\n"),I=p.createElement(y,i.__assign({values:{siteName:l.default.siteName,emailList:E}
},b.thefollowingpeopleareonothersiteNameteamsandalascantbeinvitedemailList));s.alert(h,I,c.onInviteFailed);(0,v.trackEng)("Share Pad Failed",i.__assign(i.__assign({},f),{reason:"on other teams"}))
}else if(g===o.EmailsNeedingInvite){E="\n\n"+u.emailsNeedingInvite.join("\n"),I=p.createElement(y,i.__assign({values:{siteName:l.default.siteName,emailList:E}
},b.arethefollowingmembersofyourteamTheyllbeinvitedtositeNameifso));s.confirm(p.createElement(y,i.__assign({},b.pleaseconfirm)),I,(function(){var o=i.__assign(i.__assign({},c),{
includeNonTeamMembers:!0});C(e,t,n,r,o)}),{confirmText:p.createElement(y,i.__assign({},b.invite)),cancelCallback:function(){c.onInviteFailed&&c.onInviteFailed();(0,
v.trackEng)("Share Pad Failed",i.__assign(i.__assign({},f),{reason:"denied cross-share confirmation"}))}})}else if(g===o.BadRequest){
var _=p.createElement(y,i.__assign({},b.somethingwentwrongpleasetryagainlater));s.alert(h,_,c.onInviteFailed);(0,v.trackEng)("Share Pad Failed",i.__assign(i.__assign({},f),{reason:"closed beta"}))
}else if(g===o.TooManyRequests){s.alert(h,u.message,c.onInviteFailed);(0,v.trackEng)("Share Pad Failed",i.__assign(i.__assign({},f),{reason:"rate limit"}))}else if(g===o.ExceedsInviteRateLimit){
m=p.createElement("span",null,p.createElement(y,i.__assign({},b.youvehitthelimitofinvitesyoucansendperdayTryagaininhours)))
;s.alert(p.createElement(y,i.__assign({},b.toomanyinvitees)),m,c.onInviteFailed)}else if(g===o.TooManyInvitees){
m=p.createElement("span",null,p.createElement(y,i.__assign({},b.youaretryingtosharewithtoomanypeopleatonce)));s.alert(p.createElement(y,i.__assign({},b.toomanyinvitees)),m,c.onInviteFailed)
}else if(g===o.BannedUser){m=p.createElement("span",null,p.createElement(y,i.__assign({},b.yoursharingactivityhasbeensuspended)))
;s.alert(p.createElement(y,i.__assign({},b.unabletoinvite)),m,c.onInviteFailed)}else if(g===o.ServiceDown){
m=p.createElement("span",null,p.createElement(y,i.__assign({},b.wecouldnotcompleteyourrequestatthistimePleasetryagainlater)))
;s.alert(p.createElement(y,i.__assign({},b.unabletoinvite)),m,c.onInviteFailed)}else if(g===o.SharingDeniedOwnerOnly){
m=p.createElement("span",null,p.createElement(y,i.__assign({},b.onlytheownercansharethis)));s.alert(p.createElement(y,null),m,c.onInviteFailed)}else{
var T=p.createElement(y,i.__assign({},b.failedtosendoneormoreinvites));s.alert(h,T,c.onInviteFailed);(0,v.trackEng)("Share Pad Failed",i.__assign(i.__assign({},f),{reason:"server error"}))}
c.completeCallback&&c.completeCallback(!1,g);return!0}})}t.sendInvites=C;t.suggestInvitesFromDropboxSharingLink=function(e){(0,v.trackEng)("invite-suggestions-embed-dropbox-file-request")
;(function(e){return new Promise((function(t,n){var o=h.getShardingKeyForCreatingNewPad();h.get({url:"/pad/dropbox-share-link-file-members",data:{link:e},
analyticsTag:"dropbox-share-link-file-members",successHandler:function(e){t((null==e?void 0:e.suggestions)||[])},errorHandler:function(){n();return!0},shardingKey:o,hpAppLevel:!1})}))
})(e).then((function(e){window.App&&App.getCurrentPadController()?function(e,t,n){void 0===n&&(n="(none)");var o=new Set(t.invitedUserInfos.map((function(e){return e.email}))),r=e.filter((function(e){
return e.email&&!o.has(e.email)}));if(r.length){(0,v.trackEng)("invite-suggestions-showing-snackbar",{num_unusable_suggestions:r.length,num_suggestions_received:e.length,suggestions_source:n})
;f.Snackbar.show(p.createElement(f.Snackbar,{title:p.createElement(y,i.__assign({},b.sharedfileaddedNowsharethisdoc)),variant:"generic",timeoutDelayMs:1e4,
closeButtonText:p.createElement(y,i.__assign({},b.close)),actionButtonText:p.createElement(y,i.__assign({},b.showinvites)),onActionClick:function(e){t.trigger("open-sharing-panel",{
shareTo:r.map((function(e){return e.email})),headerMessage:p.createElement(y,i.__assign({},b.invitepeoplewhohavetheDropboxfile))});f.Snackbar.close()}}))}else(0,
v.trackEng)("invite-suggestions-all-suggestions-already-invited",{num_unusable_suggestions:r.length,num_suggestions_received:e.length,suggestions_source:n})
}(e,App.getCurrentPadController(),"invite-collab-embed"):(0,v.trackEng)("invite-suggestions-embed-dropbox-file-no-pad-controller",{num_suggestions_received:e.length})}),(function(){(0,
v.trackEng)("invite-suggestions-embed-dropbox-file-no-suggestions")}))}},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1).__exportStar(n(580),t)},
580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(128),r=n(0),a=n(581),s=n(583);t.SnackbarAction=function(e){
var t=e.className,n=o.__rest(e,["className"]);t=i("mc-snackbar-actions",t);return r.createElement(a.Button,o.__assign({variant:"styleless",className:t},n))}
;t.SnackbarAction.displayName="SnackbarAction";t.Snackbar=function(e){
var t,n,o,a,l=e.className,d=e.children,c=e.disablePositioningAndBackdrop,u=void 0!==c&&c,h=e.progress,p=void 0===h?0:h,f=e.title,g=e.variant,m=void 0===g?"generic":g;if("sync"===m){n=!0
;t=r.createElement("div",{className:"mc-progress-bar-bg"},r.createElement("div",{className:"mc-progress-bar-fg",style:{width:p+"%"}}))}if("generic"!==m){o=!0;a=r.createElement("div",{
className:"mc-snackbar-icon"},r.createElement(s.IconStatus,{name:m,rotating:n}))}var v=i("mc-snackbar",l),y=i("mc-snackbar-container",{"mc-snackbar-container--snackbar-icon":o
}),b=r.createElement("div",{className:v},r.createElement("div",{className:y},a,r.createElement("p",{className:"mc-snackbar-title"},f),d),t);return u?b:r.createElement("div",{
className:"mc-snackbar-holder-backdrop"},b)};t.Snackbar.displayName="Snackbar"},581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1).__exportStar(n(582),t)},
582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(128),r=n(0);t.Button=function(e){
var t,n=e.children,a=e.className,s=void 0===a?"":a,l=e.disabled,d=e.href,c=e.size,u=void 0===c?"default":c,h=e.variant,p=void 0===h?"primary":h,f=e.fullWidth,g=void 0!==f&&f,m=e.onClick,v=e.shouldWrapContent,y=void 0!==v&&v,b=o.__rest(e,["children","className","disabled","href","size","variant","fullWidth","onClick","shouldWrapContent"]),C=b.tagName,E=void 0===C?"button":C,I=o.__rest(b,["tagName"]),_=i(s,{
"mc-button":"styleless"!==p,"mc-button-styleless":"styleless"===p,"mc-button-primary":"primary"===p,"mc-button-secondary":"secondary"===p||"borderless"===p,"mc-button-circular":"circular"===p,
"mc-button-invisible":"invisible"===p,"mc-button-borderless":"borderless"===p,"mc-button-large":"large"===u,"mc-button-small":"small"===u,"mc-button-disabled":l,"mc-button-full-width":g,
"mc-button-wrap-content":y});var T=o.__assign({},I,{href:d,className:_,disabled:l,onClick:function(){t&&t.focus();m&&m.apply(void 0,arguments)}}),S=r.createElement("span",{
className:"mc-button-content"},n);if(d){E="a";l&&(T=o.__assign({},T,{tabIndex:-1}))}return r.createElement(E,o.__assign({},T,{ref:function(e){return t=e}}),S)};t.Button.displayName="Button"},
583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),r=n(584),a=n(585);t.ICONS=a.ICONS;t.IconStatus=function(e){
var t=e.name,n=a.ICONS[t],s=n.attrs,l=n.innerHtml,d=i.createElement("svg",o.__assign({},s,{dangerouslySetInnerHTML:{__html:l}}));return i.createElement(r.Component,o.__assign({icon:d},e,{key:t}))}
;t.IconStatus.displayName="IconStatus"},584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(128),r=n(0);t.Component=function(e){e.name
;var t=e.icon,n=e.className,a=e.rotating,s=o.__rest(e,["name","icon","className","rotating"]),l=i("mc-icon-template-status",{"mc-icon-template-status-rotating":a},n)
;return r.cloneElement(t,o.__assign({className:l},s))};t.Component.displayName="IconTemplateStatus"},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ICONS={
"complete-small":{attrs:{width:"16",height:"16",viewBox:"0 0 16 16"},
innerHtml:'<path d="M6.996 9.17L5.48 7.653l-.91.909 1.97 1.97.455.454 4.849-4.848-.91-.91-3.94 3.94zM8 14A6 6 0 1 1 8 2a6 6 0 0 1 0 12z" fill="#3DCC5E" fill-rule="nonzero"></path>'},complete:{attrs:{
width:"24",height:"24",viewBox:"0 0 24 24"},
innerHtml:'<g fill="none" fill-rule="evenodd"><path d="M10.828 13.364l-1.767-1.768L8 12.656l2.298 2.299.53.53 5.657-5.657-1.06-1.06-4.597 4.596zM12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14z" fill="#3DCC5E" fill-rule="nonzero"></path></g>'
},fail:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},
innerHtml:'<path d="M13.06 12l2.298-2.298-1.061-1.06-2.298 2.297L9.7 8.641 8.64 9.701 10.938 12 8.64 14.298l1.06 1.06L12 13.062l2.298 2.298 1.06-1.06L13.06 12zM12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14z" fill="#DB2E16" fill-rule="nonzero"></path>'
},sync:{attrs:{width:"32",height:"32",viewBox:"0 0 32 32"},
innerHtml:'<path d="M16 24a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-3a5 5 0 0 0 3.467-8.602l-.57.844A4 4 0 0 1 16 20l.001-1.5-2.5 2 2.5 2V21zm0-10a5 5 0 0 0-3.667 8.399l.578-.858A4 4 0 0 1 16 12v1.5l2.5-2-2.5-2V11z" fill="#0070E0" fill-rule="nonzero"></path>'
},warn:{attrs:{width:"24",height:"24",viewBox:"0 0 24 24"},
innerHtml:'<path d="M17.503 18.15H7.49c-2.204 0-3.117-1.56-2.034-3.485l5.195-9.228c1.087-1.931 2.825-1.91 3.89.03l5.03 9.168c1.067 1.947.138 3.515-2.068 3.515zM11.5 16.006h2V14h-2v2.006zm0-3.006h2V8h-2v5z" fill="#FFC726" fill-rule="nonzero"></path>'
}}},587:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.extractCommentChangeset=t.getAttachedThreadIds=t.getGalleryIndexWithThread=t.doesAlineContainThreadId=t.changesetSetAnnotationEnabledValue=t.changesetSetThreadValueForZatext=t.changesetSetThreadValue=void 0
;var o=n(6),i=n(22),r=n(64),a=n(588),s=n(58);t.changesetSetThreadValue=function(e,t,n,o){return l(e.contents.internalZatext(),e.getApool(),t,n,o)};function l(e,t,n,o,a){
if(0!=n.indexOf("thread-"))throw new Error("invalid threadid");return(0,r.docHand)(e,t).changesetFromEachOp((function(e,r){var s=[];i.attribsAttributeValue(r.attribs,n,t)==o&&s.push([n,a||""])
;var l=i.attribsAttributeValue(r.attribs,"gallery",t);if(l){var d=null;try{d=JSON.parse(l)}catch(e){}if(d){var c=!1;d.items.forEach((function(e){if(e[n]==o){a?e[n]=a:delete e[n];c=!0}}))
;c&&s.push(["gallery",JSON.stringify(d)])}}e.keepOverOpWithNewAttributes(r,s)}))}t.changesetSetThreadValueForZatext=l;t.changesetSetAnnotationEnabledValue=function(e,t,n,o){return function(e,t,n,o,a){
return(0,r.docHand)(e,t).changesetFromEachOp((function(e,r){var s=[],l=i.attribsAttributeValue(r.attribs,"gallery",t);if(l){var d=null;try{d=JSON.parse(l)}catch(e){return}if(d){var c=!1
;d.items.forEach((function(e){(e.annotations||[]).forEach((function(e){if(e.id==n&&e.enabled==o){e.enabled=a;c=!0}}))}));c&&s.push(["gallery",JSON.stringify(d)])}}e.keepOverOpWithNewAttributes(r,s)}))
}(e.contents.internalZatext(),e.getApool(),t,n,o)};t.doesAlineContainThreadId=function(e,t,n){return!!i.attributeNameTester("thread-"+n,t)(e)||void 0!==d(e,t,n)};function d(e,t,n){
var o=i.opIterator(e);if(o.hasNext()){var r=o.next(),a=s.getGalleryMagicObject(r.attribs,t);if(a)try{for(var l=JSON.parse(a.value),d=0;d<l.items.length;d++)if(l.items[d]["thread-"+n])return d
}catch(e){}}}t.getGalleryIndexWithThread=d;t.getAttachedThreadIds=function(e){var t=e.filter((function(e){return 0==e[0].indexOf("thread-")})).map((function(e){return e[0].substr(7)})),n=[]
;e.filter((function(e){return"gallery"==e[0]})).forEach((function(e){var t=JSON.parse(e[1]);t&&t.items&&t.items.forEach((function(e){for(var t in e)if(0===t.indexOf("thread-")){var o=t.substr(7)
;n.push(o)}}))}));return t.concat(n)};t.extractCommentChangeset=function(e,t,n,r){var s=r.threadIdBlacklist;o.some(s,(function(e){return 0===e.indexOf("thread-")
}))&&throwException("the threadIdBlacklist keys should NOT be prefixed with thread-");var l=s.map((function(e){return"thread-".concat(e)})),d=function(e,t,o){var r=i.attribsToDict(t,n),a=[]
;for(var s in r){(0===s.indexOf("thread-")&&-1===l.indexOf(s))===o&&a.push([s,r[s]])}return i.makeAttribsString(e,a,n)},c=i.csMap(t,(function(e,t){
for(var n=i.opIterator(t.ops),o=i.smartOpAssembler();n.hasNext();){var r=n.next();"-"!=r.opcode&&"="!=r.opcode||o.append({opcode:"=",chars:r.chars,lines:r.lines,
attribs:"="==r.opcode?d(r.opcode,r.attribs,!0):""})}o.endDocument();return{itemType:t.itemType,oldLen:t.oldLen,newLen:t.oldLen,itemBank:"Z"==t.itemType?"":[],ops:o.toString()}
})),u=i.csMap(t,(function(e,t){for(var n=i.opIterator(t.ops),o=i.smartOpAssembler();n.hasNext();){var r=n.next();o.append({opcode:r.opcode,chars:r.chars,lines:r.lines,
attribs:"="==r.opcode?d(r.opcode,r.attribs,!1):r.attribs})}o.endDocument();t.ops=o.toString();return t}));i.checkRep(c);i.checkRep(u)
;i.isIdentity(a.filterCommentChangesetsWithBlacklist(e,c,n,r))||throwException("extractCommentsChangeset failed to created comment-only-changeset")
;i.compose(c,u,n)!=t&&throwException("extractCommentsChangeset failed to create changes that compose correctly");return{commentCs:c,otherCs:u}}},588:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0})
;t.diffAnnotations=t.doesOnlyTouchCommentOrCollapseAttributes=t.filterCommentChangesetsWithBlacklist=t.isCommentOrTrivialChange=t.filterCommentAndTrivialChanges=void 0
;var o=n(6),i=n(220),r=n(22),a=n(92),s=["innerZones"];function l(e,t,n){return d(e,t,n,{threadIdBlacklist:[],annotationIdBlacklist:[]},(function(e){return i.isTrivial(e)||o.includes(s,e)}))}
t.filterCommentAndTrivialChanges=l;t.isCommentOrTrivialChange=function(e,t,n){return r.isIdentity(l(e,t,n))};t.filterCommentChangesetsWithBlacklist=function(e,t,n,o){return d(e,t,n,o,(function(){
return!0}))};t.doesOnlyTouchCommentOrCollapseAttributes=function(e,t,n,o,i){return r.isIdentity(d(e,t,n,o,(function(e){return-1!=i.indexOf(e)})))};function d(e,t,n,i,a){var s,l
;s="function"==typeof e?function(){l||(l=e());return l}:function(){return e};var d=i.threadIdBlacklist||[],u=i.annotationIdBlacklist||[],h=d.map((function(e){return"thread-"+e})),p=u.map((function(e){
return"annotation-"+e})),f=function(e){return a(e)||0==e.indexOf("thread-")&&-1==h.indexOf(e)||0==e.indexOf("annotation-")&&-1==p.indexOf(e)},g=function(e,t,i){if(t){o.every(t,(function(e){
return f(e.key)}))&&(e.attribs=r.filterAttribNumbers(e.attribs,(function(e){return n.getAttribKey(e)!==i})))}};return r.csMap(t,(function(e,t){if("Z"!=t.itemType)return t
;for(var o=null,i=r.opIterator(t.ops),a=r.smartOpAssembler(),l=0;i.hasNext();){var d=i.next();if("="==d.opcode){d.attribs=r.filterAttribNumbers(d.attribs,(function(e){var t=n.getAttribKey(e)
;return!f(t)}));var u=r.attribsAttributeValue(d.attribs,"gallery",n);if(u){o||(o=r.getAttributesPerCharacter(s().attribs[e],n));var h=c(o,l,d.chars,u);g(d,h,"gallery")}}"+"!=d.opcode&&(l+=d.chars)
;a.append(d)}a.endDocument();t.ops=a.toString();return t}))}function c(e,t,n,i){for(var r=e.slice(t,t+n),s=[],l=0;l<r.length;l++){var d=void 0,c=void 0;try{d=JSON.parse(r[l].gallery);c=JSON.parse(i)
}catch(e){return null}if(d.items.length!=c.items.length)return null;for(var h=0;h<d.items.length;h++){for(var p=o.union(Object.keys(d.items[h]),Object.keys(c.items[h])),f=0;f<p.length;f++){var g=p[f]
;if("annotations"!=g){var m=d.items[h][g],v=c.items[h][g];if(null==m||null==v||!(0,a.jsonableTrueCompare)(m,v)){s.push({key:g,newValue:c.items[h][g]})
;void 0===c.items[h][g]?delete d.items[h][g]:d.items[h][g]=c.items[h][g]}}}var y=d.items[h].annotations||[],b=c.items[h].annotations||[];if(y.length||b.length){var C=u(y,b)
;null==C||C.forEach((function(e){return s.push(e)}))}delete d.items[h].annotations;delete c.items[h].annotations}if(!(0,a.jsonableTrueCompare)(d,c))return null}return s}function u(e,t){
var n=[],i=o.keyBy(e,"id"),r=o.keyBy(t,"id");o.union(Object.keys(i),Object.keys(r)).forEach((function(e){var t=i[e],o=r[e];(0,a.jsonableTrueCompare)(t,o)||n.push({key:"annotation-"+e,
newValue:JSON.stringify(o)})}));return n}t.diffAnnotations=u},589:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.CopyCutHtmlRenderer=void 0
;var o=n(166),i=n(94),r=n(58),a=n(182),s=n(93),l=n(550),d=n(64),c=function(){function e(e){this.params=e;this.hand=(0,d.zoneHand)(e.zatext,e.apool,e.zoneId)
;null==e.relativeUrlPrefix?this.relativeUrlPrefix=window.location.protocol+"//"+window.location.host:this.relativeUrlPrefix=e.relativeUrlPrefix;this.pieces=[];this.isMultiline=e.startLine!=e.endLine
;this.previousTags=[];this.hasSkippedLine=!1}e.prototype.render=function(){this.params.alines.every(this.renderLine,this);this.clearClosingTags();return this.pieces.join("")}
;e.prototype.renderLine=function(e,t){if(t<this.params.startLine)return!0;if(t>this.params.endLine)return!1
;var n=this.params.textlines[t],o="\n"==n.charAt(n.length-1),a=r.getLineMarker(e,this.params.apool),l=!!a.match(/^(hone|htwo|hthree)/),d=!!a.match(/^(bullet|number|task)/)
;if(this.shouldSkipLine(n,t,a)){this.hasSkippedLine=!0;return!0}if(t===this.params.startLine&&this.params.endLine>this.params.startLine&&(this.params.startCharacter===n.length-1||a&&2===n.length)){
this.pieces.push(this.params.isForDocxExport?"<div><br /></div>":"<div><br></div>");return!0}
var c=this.isFullOrMultiLine(n,a,l,o,t),u=!d&&c,h=this.renderLineHtml(n,e,d,t),p=this.doBulletedListMagic(h,a,c,d)
;0==t&&this.params.isFirstLineTitle&&(p='<h1 class="ace-copy-paste-skip-this-tag">'+p+"</h1>");if(u){var f="";if(h.galleryStyle==i.GalleryStyle.FloatLeft||h.galleryStyle==i.GalleryStyle.FloatRight){
f+=" ace-float-"+(h.galleryStyle==i.GalleryStyle.FloatLeft?"left":"right")+" "}f&&(f=' class="'+s.escapeHtml(f)+'" ');p="<div"+f+">"+p+"</div>"}this.pieces.push(p);return!0}
;e.prototype.isFullOrMultiLine=function(e,t,n,o,i){
var r=t?1:0,a=t&&!n&&o?e.length-2:e.length-1,s=this.params.startLine==i&&this.params.startCharacter>r,l=this.params.endLine==i&&this.params.endCharacter<=a
;return this.params.startLine!=this.params.endLine||!s&&!l};e.prototype.renderLineHtml=function(e,t,n,i){return a.renderLine({startIndex:this.params.startLine==i?this.params.startCharacter:0,
endIndex:this.params.endLine==i?this.params.endCharacter:e.length,galleryIndex:this.params.galleryIndex,hand:this.hand,lineNumberInHand:i,lineNumberInEditor:i,locale:this.params.locale,
renderContext:this.params.isForDocxExport?(0,o.docxRenderContext)():(0,o.clipboardRenderContext)(),linksOpenNewWindow:!0,relativeUrlPrefix:this.relativeUrlPrefix,skipLineMarkers:n,
htmlTags:this.params.isForDocxExport?l.xhtmlTags:void 0,skipAttrComment:this.params.isForDocxExport},this.params.contentTypeRegistry,this.params.prefetchData)}
;e.prototype.doBulletedListMagic=function(e,t,n,o){var i=e.node.innerHTML;if(!n)return i;var r=this.getPreviousListType();if(r&&!o){this.clearClosingTags();return i}if(o){
this.params.isForDocxExport||(0==t.indexOf("taskdone")?i='<span class="ace-copy-paste-hide"><input type="checkbox" checked disabled style="margin-right: 2px" />&nbsp;</span>'+i:0==t.indexOf("task")&&(i='<span class="ace-copy-paste-hide"><input type="checkbox" disabled style="margin-right: 2px" />&nbsp;</span>'+i))
;var a=e.createLiTags();i=a.openLiTag+i+a.closeLiTag;if(r){if(r!=t){for(var s=this.getIndentLevel(t);this.previousTags.length>0;){
var l=this.previousTags[this.previousTags.length-1],d=this.getIndentLevel(l.listTypeAndIndent);if(!(l.listTypeAndIndent!=t&&d>=s))break;this.popOneUlTagEntry()}
t!=(r=this.getPreviousListType())&&this.pushNewUlTagEntry(e,t,r?this.getIndentLevel(r):0)}}else this.pushNewUlTagEntry(e,t,0)}return i};e.prototype.pushNewUlTagEntry=function(e,t,n){
this.previousTags.push({domInfo:e,previousIndentLevel:n,listTypeAndIndent:t,piecesOfPreviousLevel:this.pieces});this.pieces=[]};e.prototype.clearClosingTags=function(){
for(;this.previousTags.length>0;)this.popOneUlTagEntry()};e.prototype.popOneUlTagEntry=function(){
for(var e=this.previousTags.pop(),t=this.pieces.join(""),n=this.getIndentLevel(e.listTypeAndIndent),o=e.previousIndentLevel,i=n;i>o;i--){e.domInfo.indentLevel=i;var r=e.domInfo.createListTags(!1)
;t=r[0]+t+r[1]}this.pieces=e.piecesOfPreviousLevel;this.pieces.push(t)};e.prototype.getPreviousListType=function(){
return 0==this.previousTags.length?null:this.previousTags[this.previousTags.length-1].listTypeAndIndent};e.prototype.shouldSkipLine=function(e,t,n){if(!this.isMultiline)return!1
;if(this.hasSkippedLine&&this.params.endLine-this.params.startLine<=1)return!1;if(t==this.params.startLine)return!1;if(t==this.params.endLine){var o=n?1:0;return this.params.endCharacter<=o}return!1}
;e.prototype.getListType=function(e){return/(\D+)(\d+)/.exec(e)[1]};e.prototype.getIndentLevel=function(e){return Number(/(\D+)(\d+)/.exec(e)[2])};return e}();t.CopyCutHtmlRenderer=c},
590:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.BookmarkLink=t.CollapsingHandle=void 0
;var o=n(1),i=n(192),r=n(269),a=n(21),s=n(310),l=n(241),d=n(16),c=n(15),u=n(0),h=n(2),p=n(300),f=(0,n(5).PaperIntlFactory)(),g=f._f,m=f.F,v=(0,h.defineMessages)({collapseSection:{id:"NVGn3A",
defaultMessage:"Collapse"},expandSection:{id:"/BNKAc",defaultMessage:"Expand"},copyLink:{id:"L4Tupd",defaultMessage:"Copy link"},bookmark:{id:"RB2hvw",defaultMessage:"Bookmark"}})
;t.CollapsingHandle=function(e){var t=e.editor,n=e.line,i=e.isSectionCollapsed,s=i?v.expandSection:v.collapseSection;return u.createElement(a.default,{variant:"transparent",hasNoUnderline:!0,tooltip:{
title:u.createElement("b",null,u.createElement(m,o.__assign({},s)))},onClick:function(){(0,r.toggleCollapsedLine)(t,n.lineNode,i)},"track-title":"collapse-section","aria-label":g(s)
},u.createElement(d.UIIcon,{className:"collapse-icon",src:c.PlayLine,size:"small"}))};t.CollapsingHandle.displayName="CollapsingHandle";t.BookmarkLink=function(e){var t=e.editor,n=e.line
;return u.createElement(s.default,{className:"toolbar-bookmark-button",styleless:!1,tooltip:u.createElement("b",null,u.createElement(m,o.__assign({},v.copyLink))),padController:t.padController,
getUrl:function(){var e,o=t.padController;e=o&&o.isCloudDoc()?o.cloudDocsUrlStore.getMaxAccessUrl():window.top.location.href.split("#")[0].split("?")[0]
;var r,a,s,d=p.addQueryParamsAndFragmentToUrl(e,{padFocusOptions:(r=n,a=(0,i.default)(r.text+"\n",r.domInfo.aline,r.domInfo.apool),s=n.domInfo.usuallyUniqueId,s?{usuallyUniqueIds:[s],headingLine2:a}:{
headingLine2:a})});return(0,l.standardizeLinkUrl)(d)},trackTitle:"bookmark",disableTrackingToken:!0,"aria-label":g(v.copyLink)},u.createElement(d.UIIcon,{src:c.LinkLine,size:"small"}))}
;t.BookmarkLink.displayName="BookmarkLink"},591:function(e,t,n){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0});var o=n(38),i=n(81);t.default=function(){var e={key:null,levels:1,upPtrs:[null],downPtrs:[null],downSkips:[1],downSkipWidths:[0]},t={key:null,levels:1,
upPtrs:[null],downPtrs:[null],downSkips:[null],downSkipWidths:[null]},n=0,r=0,a={};e.downPtrs[0]=t;t.upPtrs[0]=e;function s(t){
var n=e.levels,o=n-1,i=-1,r=0,a=new Array(n),s=new Array(n),l=new Array(n);a[o]=e;s[o]=-1;l[o]=0;for(;o>=0;){for(var d=a[o];d.downPtrs[o]&&i+d.downSkips[o]<t;){i+=d.downSkips[o];r+=d.downSkipWidths[o]
;d=d.downPtrs[o]}a[o]=d;s[o]=i;l[o]=r;--o>=0&&(a[o]=d)}return{nodes:a,idxs:s,loc:t,widthSkips:l,toString:function(){return"getPoint("+t+")"}}}function l(e){return e&&e.width||0}function d(i,s,d){
for(var c={key:s,levels:0,upPtrs:[],downPtrs:[],downSkips:[],downSkipWidths:[]},u=i.nodes,h=i.idxs,p=i.loc,f=i.widthSkips[0]+i.nodes[0].downSkipWidths[0],g=l(d);0==c.levels||o.smartRandom()<.01;){
var m=c.levels;c.levels++;if(m==u.length){u[m]=e;h[m]=-1;e.levels++;t.levels++;e.downPtrs[m]=t;t.upPtrs[m]=e;e.downSkips[m]=n+1;e.downSkipWidths[m]=r;i.widthSkips[m]=0}
var v=c,y=(_=u[m]).downPtrs[m],b=p-h[m],C=_.downSkips[m]+1-b;_.downSkips[m]=b;_.downPtrs[m]=v;v.downSkips[m]=C;v.upPtrs[m]=_;v.downPtrs[m]=y;y.upPtrs[m]=v
;var E=f-i.widthSkips[m],I=_.downSkipWidths[m]+g-E;_.downSkipWidths[m]=E;v.downSkipWidths[m]=I}for(m=c.levels;m<u.length;m++){var _;(_=u[m]).downSkips[m]++;_.downSkipWidths[m]+=g}a["$KEY$"+s]=c;n++
;r+=g}function c(e){for(var t=e.nodes[0].downPtrs[0],o=l(t.entry),i=0;i<e.nodes.length;i++)if(i<t.levels){var s=t.upPtrs[i],d=t.downPtrs[i],c=s.downSkips[i]+t.downSkips[i]-1;s.downPtrs[i]=d
;d.upPtrs[i]=s;s.downSkips[i]=c;var u=s.downSkipWidths[i]+t.downSkipWidths[i]-o;s.downSkipWidths[i]=u}else{(s=e.nodes[i]).downSkips[i]--;s.downSkipWidths[i]-=o}delete a["$KEY$"+t.key];n--;r-=o}
function u(t,n){for(var o=n?0:-1,i=t;i!==e;){var r=i.levels-1;i=i.upPtrs[r];o+=n?i.downSkipWidths[r]:i.downSkips[r]}return o}function h(e){return a["$KEY$"+e]}var p={length:function(){return n},
atIndex:function(e){e<0&&console.warn("atIndex("+e+")");e>=n&&console.warn("atIndex("+e+">="+n+")");return(t=s(e),t.nodes[0].downPtrs[0]).entry;var t},splice:function(o,i,l){
o<0&&console.warn("splice("+o+", ...)");if(o+i>n){console.warn("splice("+o+", "+i+", ...), N="+n);console.warn("%s %s %s",typeof o,typeof i,typeof n);console.trace()}if(0==o&&i==n){
for(var u=100,p=0,f=l.length+1;f>0;){f=Math.floor(f/u);p++}t.levels=p;t.upPtrs=new Array(p);t.downPtrs=new Array(p);t.downSkips=new Array(p);t.downSkipWidths=new Array(p)
;for(var g=new Array(p),m=new Array(p+1),v=0;v<p;v++){g[v]=t;m[v]=0;t.downPtrs[v]=null;t.downSkips[v]=null;t.downSkipWidths[v]=null}m[p]=0;a={};for(v=l.length-1;v>=0;v--){for(var y=1,b=v+1;b%u==0;){
b/=u;y++}var C={key:l[v].key,levels:y,upPtrs:new Array(y),downPtrs:new Array(y),downSkips:new Array(y),downSkipWidths:new Array(y),entry:l[v]};m[0]=l[v].width;for(var E=1,I=0;I<y;I++){
C.downPtrs[I]=g[I];g[I].upPtrs[I]=C;g[I]=C;m[I+1]+=m[I];C.downSkipWidths[I]=m[I];m[I]=0;C.downSkips[I]=E;E*=u}a["$KEY$"+C.key]=C}e.levels=p;e.upPtrs=new Array(p);e.downPtrs=new Array(p)
;e.downSkips=new Array(p);e.downSkipWidths=new Array(p);f=l.length+1;var _=1;for(v=0;v<p;v++){g[v].upPtrs[v]=e;e.upPtrs[v]=null;e.downPtrs[v]=g[v];e.downSkips[v]=_
;0==e.downSkips[v]&&(e.downSkips[v]=_);_*=u;e.downSkipWidths[v]=m[v];m[v+1]+=m[v]}n=l.length;r=m[p]}else{l||(l=[]);var T=s(o);for(v=0;v<i;v++)c(T);for(v=l.length-1;v>=0;v--){var S=l[v];d(T,S.key,S)
;h(S.key).entry=S}}},next:function(e){return h(e.key).downPtrs[0].entry||null},prev:function(e){return h(e.key).upPtrs[0].entry||null},push:function(e){p.splice(n,0,[e])},slice:function(e,t){
void 0===e?e=0:e<0&&(e+=n);void 0===t?t=n:t<0&&(t+=n);e<0&&(e=0);e>n&&(e=n);t<0&&(t=0);t>n&&(t=n);if(t<=e)return[];for(var o=p.atIndex(e),i=[o],r=1;r<t-e;r++){o=p.next(o);i.push(o)}return i},
atKey:function(e){return h(e).entry},indexOfKey:function(e){return u(h(e),!1)},indexOfEntry:function(e){return p.indexOfKey(e.key)},containsKey:function(e){return!!h(e)},atOffset:function(n){
return function(n){for(var o=0,i=e,a=e.levels-1;a>=0&&i.downPtrs[a];){for(;i.downPtrs[a]&&o+i.downSkipWidths[a]<=n;){o+=i.downSkipWidths[a];i=i.downPtrs[a]}a--}
return i===e?e.downPtrs[0]||null:i===t?n==r&&t.upPtrs[0]||null:i}(n).entry},keyAtOffset:function(e){return p.atOffset(e).key},offsetOfKey:function(e){return u(h(e),!0)},offsetOfEntry:function(e){
return p.offsetOfKey(e.key)},setEntryWidth:function(e,t){e.width=t;!function(e){for(var t=e.downSkipWidths[0],n=l(e.entry)-t,o=e,i=0;i<o.levels;){o.downSkipWidths[i]+=n;i++
;for(;i>=o.levels&&o.upPtrs[i-1];)o=o.upPtrs[i-1]}r+=n}(h(e.key))},totalWidth:function(){return r},offsetOfIndex:function(e){return e<0?0:e>=n?r:p.offsetOfEntry(p.atIndex(e))},
indexOfOffset:function(e){return e<=0?0:e>=r?n:p.indexOfEntry(p.atOffset(e))},search:function(n){return function(n){for(var o,i=e,r=e.levels-1,a=-1;r>=0;){for(var s=i.downPtrs[r];!(o=s,
o!==e&&(o===t||n(o.entry)));){a+=i.downSkips[r];s=(i=s).downPtrs[r]}r--}return a+1}(n)},debugGetPoint:s,debugDepth:function(){return e.levels},dispose:(0,i.wrapCallOnce)((function(){e=null;t=null
;a=null})),forEach:function(n){for(var o=e.downPtrs[0];o!==t;){n(o.entry);o=o.downPtrs[0]}},isDisposed:function(){return null==e&&null==t&&null==a}};return p}},592:function(e,t,n){var o
;Object.defineProperty(t,"__esModule",{value:!0});t.propagateSamplingRate=t.traceFunction=t.trace=t.currentTrace=t.rootSpan=t.currentSpan=t.startSpan=void 0;var i,r=n(1398);!function(e){
e[e.SAMPLE_DEFAULT=0]="SAMPLE_DEFAULT";e[e.NEVER=1]="NEVER";e[e.EXTREMELY_RARE=2]="EXTREMELY_RARE";e[e.RARE=3]="RARE";e[e.NORMAL=4]="NORMAL";e[e.ALWAYS=5]="ALWAYS";e[e.OCCASIONAL=6]="OCCASIONAL"
}(i||(i={}));var a=r.default;t.startSpan=function(e){return a.startSpan(e)};t.currentSpan=function(){return a.currentSpan()};t.rootSpan=function(){return a.rootSpan()};t.currentTrace=function(){
return a.currentTrace()};t.trace=function(e,t){if(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return s(e,t,this,n)}}return function(t,n,o){var i=o.value
;e=e||"".concat(t.constructor.name,".").concat(n);o.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(e,i,this,t)}}};function s(e,t,n,o){void 0===o&&(o=[])
;var i=a.startSpan(e);try{return null!=n?t.apply(n,o):t.apply(void 0,o)}finally{i.finish()}}t.traceFunction=s;(o={})[i.NEVER]=function(e){return e.neverRecordTrace()},o[i.EXTREMELY_RARE]=function(e){
return e.extremelyRarelyRecordTrace()},o[i.RARE]=function(e){return e.rarelyRecordTrace()},o[i.OCCASIONAL]=function(e){return e.occasionallyRecordTrace()},o[i.NORMAL]=function(){},
o[i.ALWAYS]=function(e){return e.alwaysRecordTrace()};t.propagateSamplingRate=function(e){}},593:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(8),a=n(7),s=n(59),l=n(11),d=n(12),c=n(4),u=n(821),h=n(137),p=n(824),f=n(85),g=[a.NotificationType.NewMention,a.NotificationType.NewTask,a.NotificationType.CompleteTask,a.NotificationType.IncompleteTask,a.NotificationType.TimelineItemAssignment,a.NotificationType.TimelineItemComplete,a.NotificationType.TimelineItemIncomplete],m=function(e){
o.__extends(t,e);function t(t,n,o,i){var r=e.call(this)||this;r.notificationListStore=t;r.padUnreadNotifications=[];r.notificationIdsClickedInDoc=[];r.threadIdsLocallyMarkedRead=[]
;r.threadIdsLocallyMarkedUnread=[];r.notificationRevisionHandler=function(e){var t=e.lastUpdatedTime.getTime();r.loadPadNotificationUpdates(t)};r.localPadId=n;r.padUnreadNotifications=o||[]
;r.lastBoltRevisionLoadedTime=i;r.events=new l.EventHandler;r.notificationListStore&&r.notificationListStore.on("new-notification-revision",r.notificationRevisionHandler);return r}
t.prototype.getPadUnreadNotifications=function(){return this.padUnreadNotifications||[]};t.prototype.dispose=function(){this.events.removeAll()};t.prototype.initializeForNewPad=function(e,t,n){
f.default.checkArgument(!this.localPadId);this.localPadId=e;this.padUnreadNotifications=t||[];this.lastBoltRevisionLoadedTime=n};t.prototype.loadPadNotificationUpdates=function(e){var t=this
;!this.localPadId||e<=this.lastBoltRevisionLoadedTime||d.get({url:"/api/2/notifications/list-pad-incremental",data:{currentLocalPadId:this.localPadId,
notificationsLastUpdatedTime:this.lastBoltRevisionLoadedTime},analyticsTag:"doc-notifications-fetch",shardingKey:d.getStatelessShardingKey(),hpAppLevel:!0,showOfflineToast:!0,
successHandler:function(n){t.lastBoltRevisionLoadedTime=e;var o=n&&n.notifications||[];t.mergeRecentlyUpdatedNotifications(o);t.threadIdsLocallyMarkedRead=[];t.emitPadUnreadNotificationsChange()}})}
;t.prototype.mergeRecentlyUpdatedNotifications=function(e){var t=i.keyBy(e,"encryptedNotificationId"),n=this.getThreadIds(e)
;this.threadIdsLocallyMarkedRead=i.difference(this.threadIdsLocallyMarkedRead,n);this.threadIdsLocallyMarkedUnread=i.difference(this.threadIdsLocallyMarkedUnread,n)
;var o=this.padUnreadNotifications.filter((function(e){return!t[e.encryptedNotificationId]}));o=(o=o.concat(e)).filter((function(e){
return i.includes(a.NOTIFICATION_IN_DOC_ITEM_UNREAD_STATES,e.state)&&i.includes(a.DELIVERY_MODES_FOR_UI,e.deliveryMode)&&u.NotificationTypesKnownOnClient[e.type]}));this.padUnreadNotifications=o}
;t.prototype.emitPadUnreadNotificationsChange=function(){this.trigger("pad-unread-notifications-change",void 0)};t.prototype.getThreadIds=function(e){if(!e)return[];var t=e.filter((function(e){
return e.type==a.NotificationType.Comment||e.type==a.NotificationType.CommentReminder||e.type==a.NotificationType.Reacji||e.type==a.NotificationType.CollectionComment||e.type==a.NotificationType.CollectionReacji
}));return i.uniq(t.map((function(e){return e.payload.threadId})))};t.prototype.getInDocUnreadThreadIds=function(){var e=this.getThreadIds(this.padUnreadNotifications)
;e=i.difference(e,this.threadIdsLocallyMarkedRead);return e=i.uniq(e.concat(this.threadIdsLocallyMarkedUnread))};t.prototype.getInDocUnreadMentionNotificationsMap=function(){
return t.computeInDocUnreadMentionNotificationsMap(this.padUnreadNotifications,this.notificationIdsClickedInDoc)};t.computeInDocUnreadMentionNotificationsMap=function(e,t){var n=e.filter((function(e){
return i.includes(g,e.type)}));n=(n=n.filter(h.isUnreadForInDocNotificationItem)).filter((function(e){return!i.includes(t,e.encryptedNotificationId)}));var o={};n.forEach((function(e){
(e.payload.usuallyUniqueIds||[]).forEach((function(t){if(t){o[t]||(o[t]=[]);o[t].push(e.encryptedNotificationId)}}))}));return o};t.prototype.handleCommentThreadOpened=function(e){
if(r.default&&r.default.isSignedIn()){var t=this.getInDocUnreadThreadIds();if(i.includes(t,e)){this.threadIdsLocallyMarkedUnread=i.without(this.threadIdsLocallyMarkedUnread,e)
;this.threadIdsLocallyMarkedRead.push(e);this.emitPadUnreadNotificationsChange();this.notificationListStore.handleCommentThreadOpened(this.localPadId,e)}}}
;t.prototype.handleMentionLineClick=function(e){c.IntentionEvent.ReadMentionNotification.track();this.notificationIdsClickedInDoc=this.notificationIdsClickedInDoc.concat(e)
;this.emitPadUnreadNotificationsChange();this.notificationListStore.handleMentionLineClick(e)};t.prototype.markThreadUnread=function(e){var t=this;if(r.default&&r.default.isSignedIn()){
this.threadIdsLocallyMarkedRead=i.without(this.threadIdsLocallyMarkedRead,e);this.threadIdsLocallyMarkedUnread.push(e);this.emitPadUnreadNotificationsChange();d.post({
url:"/api/2/notifications/mark-thread-unread",data:{localPadId:this.localPadId,threadId:e,boltVersion:p.defaultVersion},analyticsTag:"mark-thread-unread",
shardingKey:d.getShardingKeyForPad(this.localPadId),hpAppLevel:!0,successHandler:function(e){e.newBoltChannelState&&t.notificationListStore.replaceChannelState(e.newBoltChannelState)}})}};return t
}(s.EventEmittingClass);t.default=m},595:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(3),r=n(0),a=n(1403),s=n(1404),l=function(e){
var t,n=r.useState(!1),l=n[0],c=n[1];r.useEffect((function(){c(!0)}),[]);var u=i(e.className);if(!a.useSpring||!a.animated)return r.createElement(d,o.__assign({},e,{className:u}));var h=(0,
a.useSpring)({immediate:!l,from:{opacity:0,y:0},opacity:1,y:"down"===e.direction?10:-10,reverse:!e.shown,config:{tension:600,friction:20}}),p=h.opacity,f=h.y;p.start({config:{clamp:!0}})
;var g=r.createElement(a.animated.div,{style:o.__assign(o.__assign({opacity:p,transform:f.to((function(e){return"translateX(-50%) translateY(".concat(e,"px)")}))},e.anchor?void 0:e.position),{
display:p.to((function(e){return 0===e?"none":void 0})),pointerEvents:p.to((function(e){return 1!==e?"none":void 0}))}),onClick:e.onClick,className:u,"aria-hidden":!e.shown},e.children);if(e.anchor){
var m=i(s.default.fixedWrapper,((t={})[s.default.fixedBottom]="bottom"===e.anchor,t[s.default.fixedTop]="top"===e.anchor,t));return r.createElement("div",{className:m},g)}return g}
;l.displayName="Springbar";function d(e){var t=e.shown?1:0,n="down"===e.direction?10:-10;return r.createElement("div",{style:o.__assign({opacity:t,
transform:"translateX(-50%) translateY(".concat(n,"px)")},e.anchor?void 0:e.position),onClick:e.onClick,className:e.className,"aria-hidden":!e.shown},e.children)}t.default=l},599:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.EventMeetingNotePanelEntry=void 0;var o=n(1),i=n(2),r=n(36),a=n(600),s=n(0),l=n(454),d=(0,n(5).PaperIntlFactory)().F,c=(0,i.defineMessages)({
onlyyou:{id:"ZP6Ear",defaultMessage:"Only you"},numguestspluralonepersonotherpeople:{id:"iFRjs2",defaultMessage:"{numGuests, plural, one {1 person} other {# people}}"},untitled:{id:"YhUh+a",
defaultMessage:"Untitled"}});t.EventMeetingNotePanelEntry=function(e){var t=e.event,n=e.includeSubtitleDate,i=e.includeSubtitleTime,u=e.includeSubtitleGuestCount,h=(0,
l.shortDateAndTime)(t.start_time),p=h.date,f=h.day,g=h.time,m=n?s.createElement("span",{className:"notranslate",key:"date-element"},p):null,v=i?s.createElement("span",{className:"notranslate",
key:"key-element"},g):null,y=null;if(u){var b=t.attendees.filter((function(e){return!e.is_resource})).length;y=b<0?s.createElement("span",{key:"guest-count-element"
},s.createElement(d,o.__assign({},c.onlyyou))):s.createElement("span",{key:"guest-count-element"},s.createElement(d,o.__assign({values:{numGuests:b}},c.numguestspluralonepersonotherpeople)))}
var C=[m,v,y].filter(Boolean),E=s.createElement("span",{className:"notranslate meeting-note-panel-entry-subtitle-value-divider"},"•"),I=s.createElement("span",{
className:"meeting-note-panel-entry-subtitle-elements"},(0,r.joinJSX)(C,E));return s.createElement(a.MeetingNotePanelEntry,{day:f,onClick:e.onClick,onRemove:e.onRemove,trackTitle:"New meeting note",
title:t.title?s.createElement("span",{className:"notranslate"},t.title):s.createElement(d,o.__assign({},c.untitled)),subtitle:I,disabled:e.disabled,highlightable:!0})}
;t.EventMeetingNotePanelEntry.displayName="EventMeetingNotePanelEntry"},600:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.MeetingNotePanelEntry=void 0
;var o=n(1),i=n(3),r=n(2),a=n(10),s=n(0),l=n(13),d=(0,n(5).PaperIntlFactory)().F,c=(0,r.defineMessages)({remove:{id:"6WOQfa",defaultMessage:"Remove"}});t.MeetingNotePanelEntry=function(e){
var t,n,r=i("meeting-note-panel-entry",e.className,{"meeting-note-panel-entry-loading":e.disabled,"meeting-note-panel-entry-highlightable":e.highlightable}),u=e.disabled?null:e.onClick
;e.onRemove&&(t=s.createElement("div",{className:"meeting-note-panel-entry-remove"},s.createElement(a.default,{className:"remove-calendar-event-button",onClick:e.onRemove,
"track-title":"Remove calendar event"},s.createElement(d,o.__assign({},c.remove)))));e.noIcon||(n=s.createElement("div",{className:"meeting-note-panel-entry-icon"},s.createElement(l.default,{
name:e.icon||"action-meeting-note-blank"}),e.day?s.createElement("div",{className:"meeting-note-panel-entry-day notranslate"},e.day):null));return s.createElement(a.default,{styleless:!0,
href:"#new-meeting-note","track-title":e.trackTitle,"track-index":e.index,onClick:u,className:r},n,s.createElement("div",{className:"meeting-note-panel-entry-content"},s.createElement("div",{
className:"meeting-note-panel-entry-title"},e.title),s.createElement("div",{className:"meeting-note-panel-entry-subtitle"},e.subtitle)),t)};t.MeetingNotePanelEntry.displayName="MeetingNotePanelEntry"
},601:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.HpMenuEmptyState=void 0;var o=n(3),i=n(0);t.HpMenuEmptyState=function(e){var t;e.actionButton&&(t=i.createElement("div",{
className:"hp-menu-empty-state__action-button"},e.actionButton));return i.createElement("div",{className:"hp-menu-empty-state"},i.createElement("div",{className:"hp-menu-illustration-wrapper"
},i.createElement("div",{className:o("hp-menu-illustration",e.illustrationClassName||"")},e.newIllustration)),i.createElement("div",{className:"hp-menu-empty-state__heading-text"
},e.header),e.description?i.createElement("div",{className:"hp-menu-empty-state__description-text"},e.description):null,t)}},602:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.DropinSdkLoadableLib=void 0;var o=n(165);t.DropinSdkLoadableLib=(0,o.default)({importPath:"client/lazy/dropins_sdk_wrapper",chunkName:"dropins_sdk",requireAsync:function(){
return new Promise((function(e){
Promise.all([n.e("vendors~dropbox_internal_sdk~dropins_sdk~paper_binder~paper_bundle~paper_cloud_docs~paper_influencer~9e498cf2"),n.e("vendors~dropbox_internal_sdk~dropins_sdk~share_panel"),n.e("vendors~dropins_sdk~react_virtualized"),n.e("vendors~dropins_sdk~share_panel"),n.e("vendors~dropins_sdk"),n.e("dropins_sdk")]).then(function(t){
e(n(700))}.bind(null,n)).catch(void 0)}))},resolveWeak:function(){return 700}})},742:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.showAtDocWarningIfNeeded=void 0
;var o=n(90),i=n(2),r=n(222),a=n(63),s=(0,n(5).PaperIntlFactory)()._f,l=(0,i.defineMessages)({alertTitle:{id:"YW2GLG",defaultMessage:"Notify everyone?"},alertBody:{id:"ZcAQAo",
defaultMessage:"By using @doc, you’re about to notify {userCount} people. Are you sure you want to continue?"},confirmText:{id:"bAPuVK",defaultMessage:"Notify"},cancelText:{id:"d9/SE1",
defaultMessage:"Cancel"}});t.showAtDocWarningIfNeeded=function(e){var t=e.userCount
;return e.target!==r.SpecialMentionTarget.Doc||"OFF"===a.getVariantButDoNotLog("paper_doc_mention_alert")||t<10?Promise.resolve():new Promise((function(e,n){o.confirm(s(l.alertTitle),s(l.alertBody,{
userCount:t}),e,{confirmText:s(l.confirmText),cancelText:s(l.cancelText),cancelByDefault:!1,cancelCallback:n})}))}},799:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.getListIndentLevel=t.getListTypeWithoutIndentLevel=void 0;var o=n(6),i=n(245),r=n(22),a=n(2),s=n(54),l=n(4),d=n(51),c=n(42),u=n(58),h=n(20),p=n(1333),f=n(572),g=n(17),m=n(81),v=(0,
n(5).PaperIntlFactory)()._f,y=(0,a.defineMessages)({checkboxesChecked:{id:"fDlK6/",defaultMessage:"{checkboxCount, plural, one {1 item is} other {# items are}} now checked."},checkboxesUnchecked:{
id:"0ED0j1",defaultMessage:"{checkboxCount, plural, one {1 item is} other {# items are}} now unchecked."}}),b=function(){function e(e,t){var n=this;this.editor=e;this.contentTypeRegistry=t
;this.dispose=(0,m.wrapCallOnce)((function(){n.editor=null}))}Object.defineProperty(e.prototype,"MAX_LIST_LEVEL",{get:function(){return 8},enumerable:!1,configurable:!0})
;e.prototype.getUsuallyUniqueId=function(e,t){var n=this.editor.getRep(e).alines[t];if(n){var o=r.opIterator(n)
;if(o.hasNext())return r.opAttributeValue(o.next(),"usuallyUniqueId",this.editor.getApool())||""}return""};e.prototype.getDueDateForTaskLine=function(e,t){
var n=r.opIterator(this.editor.getRep(e).alines[t]);return r.opAttributeValue(n.next(),"dueDate",this.editor.getApool())||""};e.prototype.getFirstSelectedNonEmptyLineNumber=function(){
var e=this.editor.selection.getStart().line,t=this.editor.selection.getEnd().line,n=this.editor.selection.getStart().col,o=this.editor.getSelectedRep().lines.atIndex(e).width-1;return e==t||n!=o?e:e+1
};e.prototype.getLastSelectedNonEmptyLineNumber=function(){
var e=this.getFirstSelectedNonEmptyLineNumber(),t=this.editor.selection.getEnd().line,n=this.editor.selection.getEnd().col,o=this.editor.getSelectedRep().lines.atIndex(t).lineMarker
;return e==t||n!=o?t:t-1};e.prototype.getLineListIndex=function(e){var t=this.editor.getRep(e.zone).alines[e.line];if(t){var n=r.opIterator(t)
;if(n.hasNext())return r.opAttributeValue(n.next(),"start",this.editor.getApool())||""}return""};e.prototype.doIndentOutdent=function(e,t,n){if(!this.editor.hasSelection())return!1
;for(var o=this.editor.selection.getStart().line,i=Math.max(o,this.editor.selection.getEnd().line-(0==this.editor.selection.getEnd().col?1:0)),r=[],a=!1,s=o;s<=i;s++){
var l=this._shouldSwitchIndent(s,n)?!e:e,d=this.editor.contents.getLineType(new h.Position(this.editor.selection.getZone(),s,0));if(d){var c=u.parseListType(d);if(c){a=!0;var p=c.type,f=c.indent
;if(("indent"==p||t)&&1==f&&l)r.push({line:s,type:null});else{var g=Math.max(1,Math.min(8,f+(l?-1:1)));f!=g&&r.push({line:s,type:p+g})}}}else if(!l){r.push({line:s,type:"indent1"});a=!0}}
r.length>0&&this.setLineListTypes(this.editor.selection.getStart().zone,r);return a};e.prototype._shouldSwitchIndent=function(e,t){if(!t)return!1;var n=this.editor.getSelectedRep().lines.atIndex(e)
;return!(!n||!n.text)&&"ace-rtl"==(0,f.textDir)(n.text)};e.prototype._shouldBreakListOn=function(e,t,n){var o=this.editor.contents.getLineType(new h.Position(e,t,0)),i=u.parseListType(o)
;return!o||(!!this.isHeaderListTypeByClassname_(o)||("number"!=i.type&&"indent"!=i.type&&i.indent<=n||"indent"==i.type&&i.indent<=n-1))};e.prototype._isInList=function(e,t){
var n=this.editor.contents.getLineType(new h.Position(e,t,0)),o=u.parseListType(n);return!(!n||this.isHeaderListType(e,t)||!o)};e.prototype._isInNumberList=function(e,t){
var n=this.editor.contents.getLineType(new h.Position(e,t,0));if(!n)return!1;var o=u.parseListType(n);return!(!o||"number"!=o.type)};e.prototype.renumberListsInRange=function(e,t,n){
var o=this.editor.getRep(e);t=Math.max(0,t);n=Math.min(n,o.alines.length-1);for(var i=t;i<=n||this._isInList(e,i);i++)this._isInNumberList(e,i)&&this.renumberListIfApplicable(e,i)}
;e.prototype.renumberListIfApplicable=function(e,t){var n=this,o=this.editor.getRep(e);if(!this._isInNumberList(e,t))return null
;for(var a=this.editor.contents.getLineType(new h.Position(e,t,0)),s=u.parseListType(a).indent;t-1>=0&&!this._shouldBreakListOn(e,t-1,s);){t--
;var l=this.editor.contents.getLineType(new h.Position(e,t,0)),d=u.parseListType(l).indent;s=Math.min(d,s)}var c=[],p=!1,f=new h.Position(e,0,0),g=function(t,i){
for(var a=1,s=!0,l=i,d="";d=n.editor.contents.getLineType(new h.Position(e,t,0));)if(n._shouldBreakListOn(e,t,i)){a=1;t++}else{var m=u.parseListType(d);if((l=m.indent)<i)return t
;if(l>i)t=g(t,i+1);else if("number"==m.type){var v=Number(r.attribsAttributeValue(o.alines[t],"originalstart",n.editor.getApool())),y=v>1;y&&s&&(a=v)
;var b=Number(n.getLineListIndex(new h.Position(e,t,0)));c.push({start:f,end:f=new h.Position(e,t,0)});if((!s||i>1)&&y){p=!0;c.push({start:f,end:f=new h.Position(e,t,1),
attributes:[["start",a],["originalstart",0]]})}else if(b!=a){p=!0;c.push({start:f,end:f=new h.Position(e,t,1),attributes:[["start",a]]})}else c.push({start:f,end:f=new h.Position(e,t,1)});a++;t++
;s&&l==i&&(s=!1)}else t++}return t};g(t,s);if(p){var m=r.builder(o.lines.totalWidth(),"Z",e);c.forEach((function(e){(0,
i.buildKeepRange)(n.editor.getReps(),m,e.start,e.end,e.attributes,n.editor.getApool())}));this.editor.contents.performDocumentApplyChangeset(m.toChangeset())}return!0}
;e.prototype.setLineListType=function(e,t,n){this.setLineListTypes(e,[{line:t,type:n}])};e.prototype.setLineListTypeWithStart=function(e,t,n,o){this.setLineListTypes(e,[{line:t,type:n,start:o}])}
;e.prototype.isHeaderViaAllBold=function(e,t){if(e!==h.Position.ROOT_ZONE)return!1;var n=this.editor.getRep(e).lines.atIndex(t);return n&&n.domInfo&&n.domInfo.allBold}
;e.prototype.isHeaderListType=function(e,t){var n=this.editor.contents.getLineType(new h.Position(e,t,0));return n?this.isHeaderListTypeByClassname_(n):this.isHeaderViaAllBold(e,t)}
;e.prototype.isHeaderListTypeByClassname_=function(e){return!!e&&u.isHeaderListTypeByParsedType(u.parseListType(e).type)};e.prototype.isHeaderListTypeButNotAllBold=function(e,t){
var n=this.editor.contents.getLineType(new h.Position(e,t,0));return this.isHeaderListTypeByClassname_(n)};e.prototype.isTaskListTypeByClassname_=function(e){
return!!e&&u.isTaskListTypeByParsedType(u.parseListType(e).type)};e.prototype.setLineListTypes=function(e,t){
for(var n,o=this.editor.getRep(e),a=new h.Position(e,0,0),c=r.builder(o.lines.totalWidth(),"Z",e),p=!1,f=!1,g=0;g<t.length;g++){var m=t[g];n=m.line;var v=m.type;if(v){
if(!u.parseListType(v))throw new Error("bad list type: "+v)}var y=m.start&&m.start>1?m.start:null;(0,i.buildKeepRange)(this.editor.getReps(),c,a,a=new h.Position(e,n,0))
;var b=this.isHeaderListTypeByClassname_(v),E=this.isTaskListTypeByClassname_(v),I=this.isHeaderListType(e,n);(b||I)&&(p=!0);E&&(f=!0)
;if((0!=n||this.editor.hasFeature("notitle")||e!=h.Position.ROOT_ZONE||!v)&&!u.lineHasLineLevelObject(e,n,o,this.editor.getApool(),this.contentTypeRegistry)){
var _=this.editor.contents.getLineType(new h.Position(e,n,0));if(_)if(v){var T=[["author",this.editor.authors.getThisAuthor()],["list",v]]
;null!==y?T.push(["originalstart",String(y)]):T.push(["originalstart",""]);!b&&!E||this.getUsuallyUniqueId(e,n)||T.push(["usuallyUniqueId",u.generateUniqueId()]);this.addTaskListAttributes(T,v,e,n)
;(0,i.buildKeepRange)(this.editor.getReps(),c,a,a=new h.Position(e,n,1),T,this.editor.getApool());var S=C(_),k=C(v),x=function(e){return-1!=["task","taskdone"].indexOf(e)};if(x(S)&&x(k)&&S!=k){
var w=(0,d.isCellId)(e)?l.EditorContext.Table.Cell:l.EditorContext.Editor[this.editor.editorType];l.IntentionEvent.ToggleTask.track({wasCompleted:"taskdone"==S,
hasDueDate:!!this.getDueDateForTaskLine(e,n),context:w})}}else(0,i.buildRemoveRange)(this.editor.getReps(),c,a,a=new h.Position(e,n,1));else if(v){
T=[["author",this.editor.authors.getThisAuthor()],["insertorder","first"],["list",v]];null!==y&&T.push(["originalstart",String(y)]);(b||E)&&T.push(["usuallyUniqueId",u.generateUniqueId()])
;this.addTaskListAttributes(T,v,e,n);c.insert("*",T,this.editor.getApool())}b&&(0,
i.buildKeepRange)(this.editor.getReps(),c,a,a=new h.Position(e,n,this.editor.getRep(e).lines.atIndex(n).text.length),[["bold",""]],this.editor.getApool())}}var P=c.toChangeset()
;r.isIdentity(P)||this.editor.contents.performDocumentApplyChangeset(P,!1,f?s.EditableState.CommentOnly:void 0);this.renumberListsInRange(e,n,n+1)
;this.editor.observer.trigger("list-type-change",[o,p])};e.prototype.addTaskListAttributes=function(e,t,n,o){
0==t.indexOf("taskdone")?e.push(["taskcompleted",(new Date).toString()]):0!=t.indexOf("task")||this.hasTaskCreatedAttribute(n,o)||e.push(["taskcreated",(new Date).toString()])}
;e.prototype.hasTaskCreatedAttribute=function(e,t){var n=this.editor.getRep(e).alines[t];if(!n)return!1;var o=r.opIterator(n)
;return!!o.hasNext()&&!!r.opAttributeValue(o.next(),"taskcreated",this.editor.getApool())};e.prototype.doInsertUnorderedList=function(){this.doInsertList("bullet")}
;e.prototype.doInsertOrderedList=function(){this.doInsertList("number")};e.prototype.doInsertCodeList=function(){this.doInsertList("code")};e.prototype.doInsertQuote=function(){
this.doInsertList("quote")};e.prototype.doInsertTaskList=function(){this.doInsertList("task")};e.prototype.doInsertList=function(e){
var t=this,n=[],i=this.editor.managers.getLineManagerWithSpecialSelection();if(i){i.getSelectedZonesForSpecialSelection().forEach((function(e){n.push({zone:e,firstLine:0,
lastLine:t.editor.getRep(e).lines.length()-1})}))}else{var r=this.editor.getSelectedRep();if(r){
var a=this.editor.selection.getZone(),s=this.editor.selection.getStart().line,l=Math.max(s,this.editor.selection.getEnd().line-(this.editor.selection.getEnd().col<=r.lines.atIndex(this.editor.selection.getEnd().line).lineMarker?1:0))
;n.push({zone:a,firstLine:s,lastLine:l})}}var d=o.every(n,(function(n){for(var o=n.zone,i=t.editor.getRep(o),r=n.firstLine,a=n.lastLine,s=r==a,l=i.lines.atIndex(r),d=r;d<=a;d++){
if(t.editor.contents.getLineType(new h.Position(o,d,0)).indexOf(e)<0&&(s||0!=l.text.length))return!1;l=i.lines.next(l)}return!0}));n.forEach((function(n){
for(var o=n.zone,i=n.firstLine,r=n.lastLine,a=[],s=i;s<=r;s++){var l=e,c=void 0,p=u.parseListType(t.editor.contents.getLineType(new h.Position(o,s,0)));if(p){
l="task"==e&&p.type.indexOf("task")>-1?p.type:l;c="indent"==p.type?p.indent+1:p.indent}else c=1;c=Math.min(c,8);d?a.push({line:s,type:c>1?"indent"+(c-1):""}):a.push({line:s,type:l+c})}
t.setLineListTypes(o,a)}))};e.prototype.toggleTaskLists=function(e,t){var n=this,o=this.editor.contents.getLineType(new h.Position(e.zone,e.line,0));void 0===t&&(t=-1==o.indexOf("taskdone"));var i=[{
zone:e.zone,lineNum:e.line,listType:o,checked:0==o.indexOf("taskdone")}],r=this.editor.getSelectedRep()
;if(r&&this.editor.selection.isEditorFocused()&&this.editor.hasSelection()&&!this.editor.selection.isCollapsed()){var a=this.editor.selection.getStart().line,s=this.editor.selection.getEnd().line
;this.editor.selection.getEnd().col<=r.lines.atIndex(s).lineMarker&&a!=s&&s--
;if(e.zone==this.editor.selection.getZone()&&a<=e.line&&e.line<=s)for(var l=a;l<=s;l++)if(!(this.editor.contents.getLineType(new h.Position(this.editor.selection.getZone(),l,0)).indexOf("task")<0)){
o=this.editor.contents.getLineType(new h.Position(this.editor.selection.getZone(),l,0));l!=e.line&&i.push({zone:this.editor.selection.getZone(),lineNum:l,listType:o,checked:0==o.indexOf("taskdone")})}
}for(var d=0,c=i;d<c.length;d++){var u=c[d],p=u.listType.match(/task(?:done)?([1-9]+)/);if(p){var f=p[1],m=u.checked
;!t&&m?this.setLineListType(u.zone,u.lineNum,"task"+f):t&&!m&&this.setLineListType(u.zone,u.lineNum,"taskdone"+f)}}var v=window.App;v&&v.trigger("task-changed",t)
;g.default.error.loggingTryCatch((function(){n.ariaCheckboxToggleMessage(t,i.length)}))};e.prototype.isReorderableListLine=function(e,t){
var n=this.editor.contents.getLineType(new h.Position(e,t,0)),i=u.parseListType(n);return i&&o.includes(["number","task","taskdone","bullet"],i.type)}
;e.prototype.ariaCheckboxToggleMessage=function(e,t){var n=v(e?y.checkboxesChecked:y.checkboxesUnchecked,{checkboxCount:t});App.ariaStatusUpdate(n)};e.prototype.doSetHeadingLevel=function(e){
var t=this;this.editor.execute("headingChange",(function(){var n=[],o=t.editor.managers.getLineManagerWithSpecialSelection();if(o){o.getSelectedZonesForSpecialSelection().forEach((function(e){n.push({
zone:e,firstLine:0,lastLine:t.editor.getRep(e).lines.length()-1})}))}else{var i=t.editor.getSelectedRep()
;if(i)if(3==e&&t.editor.selection.isCollapsed()&&p.lineIsBlank(i.lines.atIndex(t.editor.selection.getStart().line))){document.execCommand("bold")
;t.editor.observer.trigger("command-state-change",void 0)}else{var r=t.editor.selection.getZone(),a=t.getFirstSelectedNonEmptyLineNumber(),s=t.getLastSelectedNonEmptyLineNumber();n.push({zone:r,
firstLine:a,lastLine:s})}}n.forEach((function(n){var o=n.zone,i=n.firstLine,r=n.lastLine,a=u.parseListType(t.editor.contents.getLineType(new h.Position(o,i,0))),s=a?a.indent:1,l={1:"hone",2:"htwo",
3:"indent",0:"indent"}[e];l="indent"==l?"":l+s;for(var d=[],c=i;c<=r;c++){d.push({line:c,type:l})
;3==e&&t.editor.contents.performDocumentApplyAttributesToRange(new h.Position(o,c,0),new h.Position(o,c,t.editor.getRep(o).lines.atIndex(c).text.length),[["bold","true"]])}t.setLineListTypes(o,d)}))
}),{shouldIncorp:!1});(0,l.trackAce)("heading-menu-action",{"change-heading":e})};e.prototype.getOrAssignUsuallyUniqueId=function(e){var t=this;if(!e)return null
;var n=this.editor.getRep(e.zone).alines[e.line];if(!n)return null;var o=r.opIterator(n);if(!o.hasNext())return null;var i=o.next();if(!r.opAttributeValue(i,"list",this.editor.getApool()))return null
;var a=r.opAttributeValue(i,"usuallyUniqueId",this.editor.getApool());if(!a&&this.editor.contents.getIsEditable()){a=u.generateUniqueId();this.editor.execute("assignUsuallyUniqueId",(function(){
t.editor.contents.performDocumentApplyAttributesToRange(new h.Position(e.zone,e.line,0),new h.Position(e.zone,e.line,1),[["usuallyUniqueId",a]])}))}return a};return e}();t.default=b;function C(e){
var t=e.match(c.LIST_TYPE_REGEX);return t?t[1]:null}t.getListTypeWithoutIndentLevel=C;t.getListIndentLevel=function(e){var t=e&&e.match(c.LIST_TYPE_REGEX);return parseInt(t?t[2]:"1",10)}},
801:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.getContextForZone=void 0;var o=n(144),i=n(51);t.getContextForZone=function(e){return e&&(0,
i.isCellId)(e)?o.EditorContext.Table.Cell:o.EditorContext.Editor}},802:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.getGalleryForGalleryClientsideId=void 0;var o=n(22),i=n(20)
;t.getGalleryForGalleryClientsideId=function(e,t){for(var n=null,r=e.getApool(),a=e.getRep(i.Position.ROOT_ZONE),s=0,l=a.lines.atIndex(s);l;){var d=a.alines[s],c=o.opIterator(d);if(c.hasNext()){
if(c.next().getAttribute("clientside-galleryId",r)===t){n=e.managers.lineManagerForLine(l,"gallery");break}}l=a.lines.next(l);s++}return n}},803:function(e,t,n){Object.defineProperty(t,"__esModule",{
value:!0});t.unifiedPadLinkRegexStringForHostName=t.PadLinkCaptureGroup=t.isPaperDoc=t.getPadIdFromPaperLink=t.getPaperLinkRegex=void 0;var o=n(6),i=n(154);function r(e){return new RegExp(m(e))}
t.getPaperLinkRegex=r;t.getPadIdFromPaperLink=function(e,t){var n=r(t),i=e.match(n);return i&&i.splice(a.PadID).find(o.identity)};t.isPaperDoc=function(e){var t=i.getPaperCanonicalDomain()
;return e.match(r(t))||e.match(r(g))}
;var a,s="https?",l="([^\\s\\?#/]+?)",d="([a-zA-Z0-9_~]{26})",c="([a-zA-Z0-9]{11}(?:[a-zA-Z0-9]{10})?)",u="(?:\\?[^\\s#]*)?",h="(#[^\\s]*)?",p="[^-_~a-zA-Z0-9\\.]",f="(?=$|"+p+"|\\.$|\\."+p+")",g="paper.dropbox.com"
;!function(e){e[e.EntireMatch=0]="EntireMatch";e[e.URLWithoutQueryOrFragment=1]="URLWithoutQueryOrFragment";e[e.Title=2]="Title";e[e.TrackingToken=3]="TrackingToken";e[e.PadID=4]="PadID"
;e[e.Fragment=5]="Fragment"}(a=t.PadLinkCaptureGroup||(t.PadLinkCaptureGroup={}));function m(e){return"("+s+"://"+o.escapeRegExp(e)+"/(?:doc/)?(?:(?:"+l+")??(?:--"+d+")?-)?"+c+")"+u+h+f}
t.unifiedPadLinkRegexStringForHostName=m},804:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(6),r=n(22),a=n(64),s=n(54),l=n(81),d=function(){function e(e,t){
this.editor=e;this.notificationIdMapToHighlight=t}t=e;e.prototype.dispose=function(){};e.prototype.updateHighlightedNotifications=function(e){var n=this;this.notificationIdMapToHighlight=e
;this.editor.execute("unread-notifications",(function(){var o=n.editor.contents.internalZatext(),i=n.editor.getApool(),a=t.buildChangeset(o,i,e)
;r.isIdentity(a)||n.editor.contents.performDocumentApplyChangeset(a,!1,s.EditableState.Readonly)}))};e.prototype.hasAnyUnreadMentions=function(){return!i.isEmpty(this.notificationIdMapToHighlight)}
;e.buildInitialChangeset=function(e,t,n){return!i.isEmpty(n)?this.buildChangeset(e,t,n):r.identity()};e.buildChangeset=function(e,t,n){return(0,a.docHand)(e,t).changesetFromEachOp((function(e,t){
var o=t.getAttribute("clientside-unreadNotificationIds"),i=o?o.split(","):null,r=t.getAttribute("usuallyUniqueId");if(r){var a=(n[r]||[]).sort().join(",")
;a?a==o?e.keepOverOp(t):e.keepOverOpWithNewAttributes(t,[["clientside-unreadNotificationIds",a]]):o?e.keepOverOpWithoutAttribute(t,"clientside-unreadNotificationIds"):e.keepOverOp(t)
}else i?e.keepOverOpWithoutAttribute(t,"clientside-unreadNotificationIds"):e.keepOverOp(t)}))};var t;return e=t=o.__decorate([l.nullifyProperties],e)}();t.default=d},805:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.AutocompleteDataStore=void 0;var o=n(6),i=function(e){var t=e.editor,n=e.padController,i=this;this.getData=function(){return i.data}
;this.load=o.throttle((function(e,t,n){i.cachedQueries[e]&&t(i.cachedQueries[e]);i.loading=!0;i.loadData(e).then((function(n){Object.keys(i.cachedQueries).length>8&&(i.cachedQueries={})
;i.cachedQueries[e]=n;i.loading=!1;i.data=n;t(n)})).catch(n)}),500);this.editor=t;this.padController=n;this.loading=!1;this.cachedQueries={};this.data=[]};t.AutocompleteDataStore=i},
806:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.normalizePeopleDataForUI=t.normalizeSpecialTargetDataForUI=void 0;var o=n(1),i=n(8),r=n(446),a=n(222),s=n(27)
;t.normalizeSpecialTargetDataForUI=function(e){return e.map((function(e){var t=e.avatarUsers,n=e.description,o=e.name;e.specialTargetName===a.SpecialMentionTarget.Team&&(o=i.default.teamName);return{
icons:t.map((function(e){return{colorId:e.colorId,name:e.name,userPic:e.userPic}})),item:e,key:o,subtitle:n,title:o}}))};t.normalizePeopleDataForUI=function(e,t){return e.map((function(e){
var n=e.email,i=e.inPad,a=e.name,l=(0,r.getSubtitle)(n,i,t),d=(0,s.trim)(a);return{icon:e,item:o.__assign(o.__assign({},e),{name:d}),key:n,subtitle:l||null,title:d}}))}},807:function(e,t){
Object.defineProperty(t,"__esModule",{value:!0});t.BoundedHashMap=void 0;var n=function(){function e(e){this.map_={};this.head_=this.tail_=null;this.length=0;this.maxLength_=e}
e.prototype.get=function(e){var t=this.map_[e];if(t)return t.value};e.prototype.set=function(e,t){if(e in this.map_){(n=this.map_[e]).value=t;this.remove_(n);this.add_(n)}else{var n=new o(e,t)
;this.map_[e]=n;this.length++;this.length>this.maxLength_&&this.remove(this.head_.key);this.add_(n)}};e.prototype.remove=function(e){if(e in this.map_){this.remove_(this.map_[e]);this.length--
;delete this.map_[e]}};e.prototype.add_=function(e){if(this.head_){this.tail_.next=e;e.prev=this.tail_;this.tail_=e}else this.head_=this.tail_=e};e.prototype.remove_=function(e){
this.head_==e&&(this.head_=e.next);this.tail_==e&&(this.tail_=e.prev);e.prev&&(e.prev.next=e.next);e.next&&(e.next.prev=e.prev);e.dispose()};e.prototype.dispose=function(){
for(var e=[],t=this.head_;t;){e.push(t);t=t.next}e.forEach((function(e){return e.dispose()}));this.map_=null;this.head_=null;this.tail_=null};return e}();t.BoundedHashMap=n;var o=function(){
function e(e,t){this.key=e;this.value=t;this.next=this.prev=null}e.prototype.dispose=function(){this.next=null;this.prev=null;this.key=null;this.value=null};return e}()},808:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),r=n(18),a=n(30),s=n(8),l=n(92),d=n(587),c=n(64),u=n(809),h=n(802),p=n(58),f=n(28),g=n(85),m=n(32),v=n(63),y=n(4),b=n(17);!function(e){
e[e.active=1]="active";e[e.hover=2]="hover"}(o||(o={}));var C=function(){function e(e,t,n){var o=this;this.comments=t;this.editor=null;this.root=null;this.notifyOnly=!1;this.commentsUI=null
;this.currentThreadId=null;this.lastHoveredThreadId=null;this.touchMoved=!1;this.targetedMouseenter=function(e){var t=e.target;(0,r.closest)(t,".attrcomment")||(0,
r.closest)(t,".gallery-annotation-point")?o.handleMouseenter(e):o.handleMouseleave()};this.targetedClickOrTouch=function(e){var t=e.target;(0,r.closest)(t,".attrcomment")&&o.handleClickOrTouch(e)}
;this.handleMouseenter=function(e){var t=o._getCommentThreadIdForEvent(e);t&&o._setHoverThreadIdCSS(t)};this.handleMouseleave=function(){o._setHoverThreadIdCSS(null)}
;this.handleClickOrTouch=function(e){if("touchstart"!=e.type)if("touchmove"!=e.type){if("touchend"!=e.type||!o.touchMoved){var t=window.App,n=null==t?void 0:t.getNativeFeatureDetectionService()
;if(!(o.editor.media.getGalleryItemElFromEvent(e)&&n&&n.isOpenLightboxCommentThreadEnabled())){if(!(o.editor.mouse.isLink(e.target)&&n&&n.isOpenNativeLinkEnabled())){
var i=o._getCommentThreadIdForEvent(e);if(i){var a=Math.floor((0,r.offset)(o.root).left+(0,r.outerWidth)(o.root)-o.editor.dom.getPadding()),s=(0,u.getClientAndPage)(e).clientX<a
;if(o.currentThreadId==i){if(s||f.isPhone())return;(0,y.track)("comments-hide",{source:"bubble"});o.commentsUI&&o.commentsUI.hideComments()}else{if(!s&&f.isPhone())return;(0,y.track)("comments-show",{
source:s?"text":"bubble"});o._setHoverThreadIdCSS(null);o.openCommentThread(i,{node:e.target,hideCommentContextForNative:!0,scrollOnlyIfOffscreen:!0})}}}}}}else o.touchMoved=!0;else o.touchMoved=!1}
;this.setHoveredThreadId=function(e){o._setHoverThreadIdCSS(e,!0)};this.editor=e;this.root=e.dom.getRoot();this.comments=t;this.notifyOnly=n;this.yellowBgPaints={};this.annotationHighlightPaints={}
;this.bindEvents()}e.prototype.dispose=function(){var e,t=this.editor.observer;null==t||t.off("mousemove",this.targetedMouseenter);null==t||t.off("click",this.targetedClickOrTouch)
;null==t||t.off("touchstart",this.targetedClickOrTouch);null==t||t.off("touchmove",this.targetedClickOrTouch);null==t||t.off("touchend",this.targetedClickOrTouch)
;for(var n in this.yellowBgPaints)clearTimeout(this.yellowBgPaints[n]);for(var n in this.annotationHighlightPaints)clearTimeout(this.annotationHighlightPaints[n])
;clearTimeout(this.scrollIntoViewTimeout);null===(e=this.commentsUI)||void 0===e||e.hideComments()};e.prototype.bindEvents=function(){var e=this.editor.observer
;e.on("mousemove",this.targetedMouseenter);e.on("click",this.targetedClickOrTouch);e.on("touchstart",this.targetedClickOrTouch);e.on("touchmove",this.targetedClickOrTouch)
;e.on("touchend",this.targetedClickOrTouch)};e.prototype.linkCommentsUI=function(e){this.commentsUI=e};e.prototype.unlinkCommentsUI=function(){this.commentsUI=null}
;e.prototype.getCommentsUI=function(){return this.commentsUI};e.prototype.getContentNodesForThreadId=function(e){var t=this.editor.dom.getRoot()
;return Array.prototype.slice.call(t.querySelectorAll(".ace-line .thread-"+e))};e.prototype._getCommentThreadIdForEvent=function(e){var t;if((0,
r.closest)(e.target,".gallery-image-prompting-annotations"))return null;var n=this._getCommentThreadIdForGalleryEvent(e);if(n)return n;var o=(0,r.closest)(e.target,"span.attrcommentfirst");o||(o=(0,
r.closest)(e.target,"span.attrcomment"));if(!o)return null;for(var i,a=/thread-([0-9a-zA-Z]+)/g,s=o.className,l=null;i=a.exec(s);){var d=i[1],c=this.comments.getThread(d);if(c&&!c.isDeleted){l=d
;var u=null==o?void 0:o.previousElementSibling;if(!((null===(t=null==u?void 0:u.classList)||void 0===t?void 0:t.contains("thread-"+d))||!1))return l}}return l}
;e.prototype._getCommentThreadIdForGalleryEvent=function(e){var t=(0,r.closest)(e.target,".gallery-item-wrapper");if(!t)return null;var n=this._getCommentThreadFromAnnotationPoint(e);if(n)return n
;for(var o=t.className,i=/thread-([0-9a-zA-Z]+)/g,a=[],s=null;s=i.exec(o);){if((d=s[1])==this.currentThreadId)return this.currentThreadId;a.push(d)}for(var l=0;l<a.length;l++){
var d=a[l],c=this.comments.getThread(d);if(c&&!c.isDeleted)return d}return null};e.prototype._getCommentThreadFromAnnotationPoint=function(e){var t=(0,r.closest)(e.target,".gallery-annotation-point")
;if(!t)return null;var n=t.className,o=/\annotation-([0-9]+)/g.exec(n);if(o){var i=o[1],a=this.comments.getThreadByAnnotationId(i);if(a&&!a.isDeleted)return a.id}return null}
;e.prototype.spanOrNotForHighlightSelector=function(e){return e==o.active?"span":""};e.prototype.nonGalleryThreadSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line ".concat(n,".thread-").concat(e,":not(.gallery-item-wrapper)")};e.prototype.h1NonGalleryThreadSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line h1 ".concat(n,".thread-").concat(e)};e.prototype.h2NonGalleryThreadSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line h2 ".concat(n,".thread-").concat(e)};e.prototype.galleryItemSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line ".concat(n,".thread-").concat(e," .gallery-item-selectable")};e.prototype.inlineCodeSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line ".concat(n,".inline-code.thread-").concat(e)};e.prototype.h1InlineCodeSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line h1 ".concat(n,".inline-code.thread-").concat(e)};e.prototype.h2InlineCodeSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line h2 ".concat(n,".inline-code.thread-").concat(e)};e.prototype.annotationContainerSelector=function(e,t){var n=this.spanOrNotForHighlightSelector(t)
;return".ace-line ".concat(n,".thread-").concat(e," .gallery-image-annotations-container")};e.prototype.addDynamicStylesForThread=function(e,t,n){var o=this;void 0===n&&(n=!1)
;this.yellowBgPaints[e]=setTimeout((function(){var n=o.editor.dynamicCSS,i="var(--hp-color-comment-bg, ".concat(a.default.color_banana_forty,")")
;n.selectorStyle(o.nonGalleryThreadSelector(e,t),"background-color: ".concat(i," !important;")+"padding-top: 2px;")
;n.selectorStyle(o.h1NonGalleryThreadSelector(e,t),"background-color: ".concat(i," !important;")+"padding-top: 4px;")
;n.selectorStyle(o.h2NonGalleryThreadSelector(e,t),"background-color: ".concat(i," !important;")+"padding-top: 3px;");n.selectorStyle(o.galleryItemSelector(e,t),"outline: 4px solid ".concat(i,";"))
;n.selectorStyle(o.inlineCodeSelector(e,t),"box-shadow: 0 -3px 0 ".concat(i,", 0 2px 0 ").concat(i," !important;"))
;n.selectorStyle(o.h1InlineCodeSelector(e,t),"box-shadow: 0 -5px 0 ".concat(i,", 0 2px 0 ").concat(i," !important;"))
;n.selectorStyle(o.h2InlineCodeSelector(e,t),"box-shadow: 0 -4px 0 ".concat(i,", 0 2px 0 ").concat(i," !important;"));n.selectorStyle(o.annotationContainerSelector(e,t),"opacity: 1;")}),99)
;n&&this.highlightAnnotationsForThread(e,t)};e.prototype.clearDynamicStylesForThread=function(e,t){var n=this.editor.dynamicCSS;this.clearAnnotationHighlightsForThread(e,t)
;clearTimeout(this.yellowBgPaints[e]);n.removeSelectorStyle(this.nonGalleryThreadSelector(e,t));n.removeSelectorStyle(this.h1NonGalleryThreadSelector(e,t))
;n.removeSelectorStyle(this.h2NonGalleryThreadSelector(e,t));n.removeSelectorStyle(this.galleryItemSelector(e,t));n.removeSelectorStyle(this.inlineCodeSelector(e,t))
;n.removeSelectorStyle(this.h1InlineCodeSelector(e,t));n.removeSelectorStyle(this.h2InlineCodeSelector(e,t));n.removeSelectorStyle(this.annotationContainerSelector(e,t))}
;e.prototype.highlightAnnotationsForThread=function(e,t){var n=this,o=this.comments.getThread(e);if(o){(o.annotationIds||[]).forEach((function(e){n.highlightAnnotation(e,t)}))}}
;e.prototype.highlightAnnotation=function(e,t){var n=this;this.annotationHighlightPaints[e]=setTimeout((function(){var o=n.editor.dynamicCSS,i=n.spanOrNotForHighlightSelector(t)
;o.selectorStyle(".ace-line ".concat(i,".annotation-").concat(e),"box-shadow: 0px 0px 0px 12px rgba(255, 199, 38, 0.4) !important;transition: box-shadow 0.1s cubic-bezier(0.19, 0.76, 0.3, 0.1) !important;")
}),99)};e.prototype.clearAnnotationHighlightsForThread=function(e,t){var n=this,o=this.comments.getThread(e);if(o){(o.annotationIds||[]).forEach((function(e){n.clearAnnotationHighlight(e,t)}))}}
;e.prototype.clearAnnotationHighlight=function(e,t){clearTimeout(this.annotationHighlightPaints[e]);var n=this.editor.dynamicCSS,o=this.spanOrNotForHighlightSelector(t)
;n.removeSelectorStyle(".ace-line ".concat(o,".annotation-").concat(e))};e.prototype.cancelAnnotationPrompt=function(e){var t=this.editor.commentsController.getGalleryForThread(e)
;t&&t.cancelAnnotationCreation(e)};e.prototype.highlightNativeCommentForThread=function(e){var t=this.editor.dynamicCSS,n=a.default.color_banana
;t.selectorStyle(".ace-line .thread-".concat(e),"background-color: ".concat(n," !important;"))};e.prototype.clearNativeCommentHighlightForThread=function(e){
this.editor.dynamicCSS.removeSelectorStyle(".ace-line .thread-".concat(e))};e.prototype._setActiveThreadIdCSS=function(e){var t=o.active;if(this.currentThreadId!=e){if(this.currentThreadId){
this.clearDynamicStylesForThread(this.currentThreadId,t);this.cancelAnnotationPrompt(this.currentThreadId)}e&&this.addDynamicStylesForThread(e,t,!0)}};e.prototype._setHoverThreadIdCSS=function(e,t){
void 0===t&&(t=!1);if(this.lastHoveredThreadId!=e){var n=o.hover;if(this.lastHoveredThreadId&&this.lastHoveredThreadId!=this.currentThreadId){
this.clearDynamicStylesForThread(this.lastHoveredThreadId,n);this.commentsUI&&this.commentsUI.unhoverThread(this.lastHoveredThreadId);this.lastHoveredThreadId=null}if(e&&e!=this.currentThreadId){
this.addDynamicStylesForThread(e,n,t);this.commentsUI&&this.commentsUI.hoverThread(e);this.lastHoveredThreadId=e}}};e.prototype.postComment=function(e,t,n,o){var i=this
;if(!e||!t||!t.atext.text.trim().length)return!1;this.cancelAnnotationPrompt(e);var r=this.comments.getThread(e);if(r&&r.isComposing){r.isComposing=!1;this.editor.execute("postComment",(function(){
i.editor.callStack.makeNewNonundoableEvent((function(){
v.isOnButDoNotLog("paper_note_to_self")&&n?i.comments.commentAttrSyncer.markThreadAsPublished(e,!1,n):i.comments.commentAttrSyncer.markThreadAsPublished(e)
;r.annotationIds&&r.annotationIds.forEach((function(t){i.comments.commentAttrSyncer.markAnnotationAsPublished(e,t)}))}))}))}var a={type:"comment",threadId:e,atext:t.atext,
apool:t.apool.toJsonableNoCloning(),createdTime:new Date,lastModifiedTime:new Date,secureAuthorId:s.default.secureUserId,authorName:s.default.userName,authorPic:s.default.userPic,isDeleted:!1,rev:0}
;v.isOnButDoNotLog("paper_note_to_self")&&(a.isPrivate=n);this.comments.addCommentToThread(e,a)};e.prototype.attachAnnotation=function(e,t){var n=[t];this.comments.getThread(e).annotationIds=n
;this.comments.setAnnotationIds(e,n)};e.prototype.detachAnnotation=function(e){var t=this,n=this.comments.getThread(e);n.annotationIds&&this.editor.execute("detachAnnotation",(function(){
t.editor.callStack.makeNewNonundoableEvent((function(){n.annotationIds.forEach((function(n){t.comments.commentAttrSyncer.markAnnotationAsDeleted(e,n)}))}))}));n.annotationIds=void 0
;this.comments.clearAnnotationIds(e)};e.prototype.newCommentThreadForSelection=function(e,t,n){var o=this;void 0===e&&(e=!1);void 0===t&&(t=!1);void 0===n&&(n=!1);if(this.editor.hasSelection()){
var i=this.comments.createThreadForSelection({isComposing:!0,isSuggestChanges:n});setTimeout((function(){var n=o.getContentNodesForThreadId(i)[0];o.openCommentThread(i,{node:n,
hideCommentContextForNative:t,scrollOnlyIfOffscreen:!0});o.commentsUI&&e&&o.commentsUI.startAnnotationPromptForThread(i)}),0)}};e.prototype.openCommentThreadForNativeLightbox=function(e,t,n){
var o=window.App;if(o){var i=o.getNativeFeatureDetectionService();if(i&&i.isOpenLightboxCommentThreadEnabled()){var r=(0,h.getGalleryForGalleryClientsideId)(this.editor,e),a=!1
;if(r&&t<r.getItems().length){var s=this.getActiveCommentThreadIdsForNativeLightbox(e,t),l=null;if(f.isApple()&&f.getIOSAppVersion()>=120.2)if(n){l=this.comments.createThreadForSelection({
isComposing:!0},r.getPosition().line,t);a=!0}else s&&s.length>0&&(l=s[0]);else if(!n&&s&&s.length>0)l=s[0];else{l=this.comments.createThreadForSelection({isComposing:!0},r.getPosition().line,t);a=!0}
l?this.openNativeLightboxCommentThread(e,t,l,a):this.openNativeLightboxWithoutCommentThread()}}}};e.prototype.openNativeLightboxWithoutCommentThread=function(){
this.editor.observer.trigger("open-lightbox-without-comment-thread",void 0)};e.prototype.openNativeLightboxCommentThread=function(e,t,n,o){void 0===o&&(o=!1);var i=this.comments.getThread(n);if(i){
this.handleCommentThreadInteraction(n);this.editor.observer.trigger("open-lightbox-comment-thread",[n,i,!0,e,t,o])}};e.prototype.getActiveCommentThreadIdsForNativeLightbox=function(e,t){
var n=this,o=(0,h.getGalleryForGalleryClientsideId)(this.editor,e);return!o||t>=o.getItems().length?[]:Object.keys(o.getThreadIdsForItemIndex(t)).filter((function(e){
return n.comments.getThread(e)&&!n.comments.getThread(e).isDeleted}))};e.prototype.getGalleryAnnotationDataForGalleryItem=function(e,t){var n=(0,h.getGalleryForGalleryClientsideId)(this.editor,e)
;if(n&&t>=0&&t<n.galleryData.items.length){var o=n.galleryData.items[t];if(o&&o.annotations)return o.annotations}return null};e.prototype.newCommentThreadForLine=function(e){
var t=this.comments.createThreadForSelection({isComposing:!0},e.line),n=this.getContentNodesForThreadId(t)[0];this.openCommentThread(t,{node:n,scrollOnlyIfOffscreen:!0})}
;e.prototype.openCommentThread=function(e,t){var n,o,i=this;void 0===t&&(t={});f.isNativeMobileApp()&&this.handleCommentThreadInteraction(e);if(!t.node){t.node=this.getContentNodesForThreadId(e)[0]
;if(!t.node){this.handleCommentThreadInteraction(e);console.log("No content nodes found for thread id: "+e);return}}var r=this.comments.getThread(e);if(r)if(!this.notifyOnly||t.forceShow){
t.scrollOnlyIfOffscreen?this.scrollIntoViewTimeout=setTimeout((function(){i.editor.getViewport().scrollIntoViewIfNeeded(t.node)
}),0):this.editor.getViewport().scrollNodeVerticallyIntoViewDeprecated(t.node,"center",void 0,void 0,void 0,void 0,!1);this._setHoverThreadIdCSS(null);this._setActiveThreadIdCSS(e)
;this.currentThreadId=e;this.commentsUI?this.commentsUI.highlightThreadAtNode(e,t.node,t.callback):t.callback&&t.callback()
}else null===(o=null===(n=this.editor)||void 0===n?void 0:n.observer)||void 0===o||o.trigger("open-comment-thread",[t.node,e,r,t.hideCommentContextForNative]);else console.log("No data for comment thread id: "+e)
};e.prototype.openCommentThreadAndFocus=function(e,t){var n=this;void 0===t&&(t={});b.default.consumeQueryParam("t",!0)
;this.isCommentThreadResolved(e)||this.isCommentThreadActive(e)?this.openCommentThread(e,i.__assign({node:void 0,callback:function(){n.commentsUI&&n.commentsUI.focusCommentEntry(e)}
},t)):this.handleCommentThreadInteraction(e)};e.prototype.openNewlyCreatedCommentThreadAndFocus=function(e,t){var n=this;this.comments.getThread(e)?window.setTimeout((function(){
return n.openCommentThreadAndFocus(e,{forceShow:t,scrollOnlyIfOffscreen:!0})}),0):window.setTimeout((function(){return n.openNewlyCreatedCommentThreadAndFocus(e,t)}),250)}
;e.prototype.isCommentThreadActive=function(e){var t=this.comments.getThread(e);return t&&!t.isDeleted&&!t.isHardDeleted&&!t.isDetached};e.prototype.isCommentThreadDetached=function(e){
var t=this.comments.getThread(e);return!(!t||!t.isDetached)};e.prototype.isCommentThreadDeleted=function(e){var t=this.comments.getThread(e);return!(!t||!t.isHardDeleted)}
;e.prototype.isCommentThreadResolved=function(e){var t=this.comments.getThread(e);return!(!t||!t.isDeleted)};e.prototype.hideCurrentCommentThread=function(){if(this.currentThreadId){
var e=this.comments.getThread(this.currentThreadId)
;e&&e.isComposing&&e.secureAuthorId==s.default.secureUserId&&!this.commentsUI.highlightNewThreadHasEdits()&&this.deleteCommentThread(this.currentThreadId)}this._setActiveThreadIdCSS(null)
;this.currentThreadId=null;this._setHoverThreadIdCSS(null);this.commentsUI&&this.commentsUI.clearHighlightThread()};e.prototype.hideCurrentCommentThreadAndFocusEditor=function(){
this.commentsUI&&this.commentsUI.hideComments();this.editor.focus()};e.prototype.editComment=function(e,t){var n=this.comments.editComment(e,(0,l.deepCopy)(t))
;n.threadIsEmpty&&this.deleteCommentThread(n.threadId);return n};e.prototype.deleteCommentThread=function(e){this._deleteThreadHelper(e,!1)};e.prototype.hardDeleteCommentThread=function(e){
this._deleteThreadHelper(e,!0)};e.prototype._deleteThreadHelper=function(e,t){var n=this;g.default.checkNotNull(e);b.default.consumeQueryParam("t",!0);var o=this.comments.getThread(e)
;this.cancelAnnotationPrompt(e);this.editor.execute("deleteThread",(function(){n.editor.callStack.makeNewNonundoableEvent((function(){n.comments.commentAttrSyncer.markThreadAsDeleted(e)
;o.annotationIds&&o.annotationIds.forEach((function(t){n.comments.commentAttrSyncer.markAnnotationAsDeleted(e,t)}));n.comments.deleteThread(e,t);n._setActiveThreadIdCSS(null);n.currentThreadId=null
;n._setHoverThreadIdCSS(null)}))}));this.commentsUI&&this.commentsUI.clearHighlightThread()};e.prototype.undeleteCommentThread=function(e,t){var n=this,o=this.comments.getThread(e)
;this.editor.execute("undeleteCommentThread",(function(){n.comments.undeleteThread(e);n.editor.callStack.makeNewNonundoableEvent((function(){n.comments.commentAttrSyncer.markThreadAsPublished(e,!0)
;o.annotationIds&&o.annotationIds.forEach((function(t){n.comments.commentAttrSyncer.markAnnotationAsPublished(e,t,!0)}))}))}));t&&this.openCommentThread(e,{scrollOnlyIfOffscreen:!0})}
;e.prototype.getContextAceHash2ForThreadId=function(e){var t=this.editor.contents.exportHand(),n=null;t.forEachAtextZone((function(o){if(!n)for(var i=o.alines(),r=0;r<i.length;r++)if((0,
d.doesAlineContainThreadId)(i[r],t.pool(),e)){n=m.calculateAceHash2(o.textline(r),i[r],t.pool());return}}));return n};e.prototype.handleCommentThreadInteraction=function(e){
this.comments&&this.comments.handleCommentThreadInteraction(e)};e.prototype.getCommentThreadAuthorId=function(e){var t=this.editor.dom.getAceLineForNode(this.getContentNodesForThreadId(e)[0])
;return t?this.editor.authors.getAuthorIdForLine(t.className):null};e.prototype.getGalleryForThread=function(e){var t=this.editor.dom.getRoot().querySelector(".thread-"+e);if(!t)return null
;var n=this.editor.selection.getPositionForNode(t),o=n.line;return this.editor.managers.getLineManager(n.zone,o,"gallery")};e.createCommentForSticker=function(e,t){var n=(0,
c.emptyDocHand)(),o=n.builder(),i=-1!=t.indexOf("/live-stickers/".concat(e,"/"));o.insert("*",p.getGalleryAttributesForSticker(i,t));return{atext:{
text:(n=n.withAppliedChangeset(o.toChangeset()).asAtext()).text(),attribs:n.attribs()},apool:n.pool()}};return e}();t.default=C},809:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})
;t.getClientAndPage=void 0;t.getClientAndPage=function(e){if(e.touches&&e.touches[0]){var t=e.touches[0];return{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}}return{pageX:e.pageX,
pageY:e.pageY,clientX:e.clientX,clientY:e.clientY}}},810:function(e,t,n){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0});t.PASTE_EVENT=void 0;var o=n(22),i=n(17);t.PASTE_EVENT="prePasteIncorp";var r=function(){function e(e){this.apool=e;this.undoPtr=0;this.stack=new l(e)}
e.prototype.clearHistory=function(){this.stack.clearStack();this.undoPtr=0};e.prototype.mergeChangesets=function(e,t){if(!e)return t;if(!t)return e
;var n=o.opcodeOccurrences(e,"+"),i=o.opcodeOccurrences(t,"+"),r=o.opcodeOccurrences(e,"-"),a=o.opcodeOccurrences(t,"-");if(1==n&&1==i&&0==r&&0==a){
var s=o.compose(e,t,this.apool),l=o.opcodeOccurrences(s,"+"),d=o.opcodeOccurrences(s,"-");if(1==l&&0==d)return s}else if(0==n&&0==i&&1==r&&1==a){s=o.compose(e,t,this.apool),
l=o.opcodeOccurrences(s,"+"),d=o.opcodeOccurrences(s,"-");if(0==l&&1==d)return s}return null};e.prototype.canMergeChangesets=function(e,n){return e.eventType==n.eventType&&e.eventType!=t.PASTE_EVENT}
;e.prototype.reportEvent=function(e){var t=this,n=this.stack.getNthFromTop(0);function r(){if("number"==typeof e.selStart){n.selZone=e.selZone;n.selStart=e.selStart;n.selEnd=e.selEnd
;n.selIsReversed=e.selIsReversed}}if(!e.backset||o.isIdentity(e.backset))r();else{var a=!1;if(this.canMergeChangesets(n,e)){var s;i.default.error.loggingTryCatch((function(){
s=t.mergeChangesets(e.backset,n.backset)}));if(s){n.backset=s;r();a=!0}}for(var l=this.stack.numEvents()-this.undoPtr,d=void 0;this.stack.numEvents()>l;){var c=this.stack.popEvent();d||(d=c)}
if(d&&"number"==typeof d.selStart){(n=this.stack.getNthFromTop(0)).selZone=d.selZone;n.selStart=d.selStart;n.selEnd=d.selEnd;n.selIsReversed=d.selIsReversed}a||this.stack.pushEvent(e);this.undoPtr=0}}
;e.prototype.reportExternalChange=function(e){e&&!o.isIdentity(e)&&this.stack.pushExternalChange(e)};e.prototype.getSelectionInfo=function(e){return"number"==typeof e.selStart&&e.selZone?{
selZone:e.selZone,selStart:e.selStart,selEnd:e.selEnd,selIsReversed:e.selIsReversed}:null};e.prototype.canPerformUndo=function(){return this.undoPtr<this.stack.numEvents()-1}
;e.prototype.undo=function(e){if(this.canPerformUndo()){var t=this.stack.getNthFromTop(this.undoPtr),n=this.stack.getNthFromTop(this.undoPtr+1),o=e(t.backset,this.getSelectionInfo(n))
;this.stack.pushEvent(o);this.undoPtr+=2}else e()};e.prototype.canPerformRedo=function(){return this.undoPtr>=2};e.prototype.redo=function(e){if(this.canPerformRedo()){
var t=this.stack.getNthFromTop(0),n=this.stack.getNthFromTop(1);e(t.backset,this.getSelectionInfo(n));this.stack.popEvent();this.undoPtr-=2}else e()};e.prototype.dump=function(){this.stack.dump()}
;return e}();t.default=r;var a="undoableEvent",s="externalChange",l=function(){function e(e){this.apool=e;this.stackElements=[];this.numUndoableEvents=0;this.clearStack()}
e.prototype.clearStack=function(){this.stackElements.length=0;this.stackElements.push({kind:a,eventType:"bottom",backset:"",selZone:"",selStart:0,selEnd:0,selIsReversed:!0});this.numUndoableEvents=1}
;e.prototype.pushEvent=function(e){var t=i.default.extend({},e);t.kind=a;this.stackElements.push(t);this.numUndoableEvents++};e.prototype.pushExternalChange=function(e){
var t=this.stackElements.length-1;this.stackElements[t].kind==s?this.stackElements[t].changeset=o.compose(this.stackElements[t].changeset,e,this.apool):this.stackElements.push({kind:s,changeset:e})}
;e.prototype.exposeEvent=function(e){for(var t=this.stackElements.length-1-e,n=this.stackElements.length-1;n>t||this.stackElements[n].kind==s;)if(this.stackElements[n].kind==s){
var i=this.stackElements[n],r=this.stackElements[n-1],a=i.changeset,l=r.backset;if(r.backset){r.backset=o.follow(a,r.backset,!0,this.apool);i.changeset=o.follow(l,i.changeset,!1,this.apool)}
if("number"==typeof r.selStart){var d=o.characterRangeFollow(a,r.selZone,r.selStart,r.selEnd,!1);r.selStart=d[0];r.selEnd=d[1];r.selStart==r.selEnd&&(r.selIsReversed=!1)}this.stackElements[n-1]=i
;this.stackElements[n]=r;if(n>=2&&this.stackElements[n-2].kind==s){i.changeset=o.compose(this.stackElements[n-2].changeset,i.changeset,this.apool);this.stackElements.splice(n-2,1);n--}}else n--}
;e.prototype.getNthFromTop=function(e){this.exposeEvent(e);return this.stackElements[this.stackElements.length-1-e]};e.prototype.numEvents=function(){return this.numUndoableEvents}
;e.prototype.popEvent=function(){this.exposeEvent(0);this.numUndoableEvents--;return this.stackElements.pop()};e.prototype.dump=function(){console.log(JSON.stringify(this.stackElements,null,2))}
;return e}()},811:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.entries=[{input:this.defaultLine1Input(),
output:this.transition(this.emptyLineOutput(),this.defaultLine1Input(),null),dirty:!1}];this.dirtyRangeStarts=[]}e.prototype.splice=function(e,t,n){var o=n.map((function(e){return{input:e,output:null,
dirty:!0}}));Array.prototype.splice.apply(this.entries,[e,t].concat(o));var i,r=Math.max(e-1,0),a=r>=1?this.entries[r-1].output:this.emptyLineOutput();for(i=r;i<this.entries.length;i++){
var s=i+1<this.entries.length?this.entries[i+1].input:null;a=this.transition(a,this.entries[i].input,s);if(this.outputsEqual(a,this.entries[i].output)){if(!(i<e))break;r++}else{
this.entries[i].output=a;this.entries[i].dirty=!0}}var l=i-r,d=n.length-t,c=i-d,u=[],h=[]
;for(i=0;i<this.dirtyRangeStarts.length;i++)this.dirtyRangeStarts[i]<r?u.push(this.dirtyRangeStarts[i]):(this.dirtyRangeStarts[i]>c||this.dirtyRangeStarts[i]==c&&0==l&&(0==r||!this.entries[r-1].dirty))&&h.push(this.dirtyRangeStarts[i]+d)
;0==l||u.length>0&&this.entries[r-1].dirty?this.dirtyRangeStarts=u.concat(h):this.dirtyRangeStarts=u.concat([r]).concat(h)};e.prototype.markClean=function(e){if(this.entries[e].dirty){
this.entries[e].dirty=!1;var t=e>0&&this.entries[e-1].dirty,n=e<this.entries.length-1&&this.entries[e+1].dirty;if(t){if(n){
for(var o=0;o+1<this.dirtyRangeStarts.length&&this.dirtyRangeStarts[o+1]<e;)o++;this.dirtyRangeStarts.splice(o+1,0,e+1)}}else{o=this.dirtyRangeStarts.indexOf(e)
;n?this.dirtyRangeStarts[o]++:this.dirtyRangeStarts.splice(o,1)}}};e.prototype.getAllDirtyLines=function(){var e=this,t=[];this.dirtyRangeStarts.forEach((function(n){
for(var o=n;o<e.entries.length&&e.entries[o].dirty;o++)t.push({lineNum:o,output:e.entries[o].output})}));return t};e.prototype.get=function(e){return this.entries[e].output}
;e.prototype.hasAnyDirtyLines=function(){return this.dirtyRangeStarts.length>0};return e}();t.default=n},812:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.insertTaskToolbarIntoPocket=void 0
;var o=n(1),i=n(6),r=n(1369),a=n(22),s=n(3),l=n(8),d=n(814),c=n(54),u=n(11),h=n(146),p=n(450),f=n(14),g=n(51),m=n(28),v=n(0),y=n(31),b=n(815),C=n(4),E=n(1377),I=function(e){o.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={};t.updateEditableStateDebounced=i.debounce((function(){return t.updateCanEdit()}),33);t.setSuggestedDueDate=function(e){
if(t.dueDateButtonRef&&e.uuid===t.state.lineState.usuallyUniqueId){t.dueDateButtonRef.setDueDate(null,e.date);t.dueDateButtonRef.open()}};t.deferredSaveDueDate=function(e){
t.timers.setTimeout((function(){t.saveDueDate(e);t.handleDueDateMenuClose()}),100)};t.saveDueDate=function(e){if(t.props.editor.contents.getIsEditable()){var n=t.props.editor
;n.execute("set-due-date",(function(){var o=t.props.line.lineNode.getAttribute("id"),i=document.getElementById(o);if(i){var r=t.props.editor.selection.getPositionForNode(i)
;n.contents.performDocumentApplyAttributesToRange(r.withCol(0),r.withCol(1),e)}}))}};t.saveAssignees=function(e,n,o){var i=t.props.editor;i.execute("assign-task",(function(){
var r=t.props.line.lineNode.getAttribute("id"),s=document.getElementById(r);if(s){
var l=i.selection.getPositionForNode(s),d=i.getRep(l.zone),c=i.getApool(),u=a.builder(d.lines.totalWidth(),"Z",l.zone),h=d.alines[l.line],p=d.lines.atIndex(l.line).text
;u.keep(d.lines.offsetOfIndex(l.line),l.line);b.buildChangesetUpdatingLineMentions(e,n,o,u,p,a.opIterator(h),c);i.selection.set(l);i.contents.performDocumentApplyChangeset(u.toChangeset())}}))}
;t.handleAssignmentMenuOpen=function(){t.setState({isAssignmentMenuOpen:!0})};t.handleAssignmentMenuClose=function(){t.setState({isAssignmentMenuOpen:!1})};t.handleDueDateMenuOpen=function(){
t.setState({isDueDateMenuOpen:!0})};t.handleDueDateMenuClose=function(){t.setState({isDueDateMenuOpen:!1})};return t}t.prototype.componentDidMount=function(){
var e=this.props,t=e.editor,n=e.line,o=t.selection.getPositionForNode(n.lineNode),i=t.padController?t.padController.peopleList:null;this.setState({lineState:(0,p.getLineState)(this.props.line,o,i),
canEdit:this.isTaskEditable()});this.events.on(t.observer,"editable-state-changed",this.updateEditableStateDebounced);this.events.on(t.observer,"suggested-due-date",this.setSuggestedDueDate)}
;t.prototype.componentWillUnmount=function(){this.updateEditableStateDebounced.cancel()};t.prototype.updateCanEdit=function(){this.setState({canEdit:this.isTaskEditable()})}
;t.prototype.isTaskEditable=function(){return!m.isNativeMobileApp()&&this.props.editor.contents&&this.props.editor.contents.getEditableState()==c.EditableState.Editable}
;t.prototype.getClassNames=function(){var e,t=this.state,n=t.lineState,o=t.isAssignmentMenuOpen,i=t.isDueDateMenuOpen,r=(null==n?void 0:n.textDir)||"ace-ltr"
;return y.default.isOnButDoNotLog("paper_pocket_interstitial")?s(E.default.controls,((e={})[E.default.inTable]=!!(null==n?void 0:n.lineZone)&&(0,g.isCellId)(n.lineZone),
e[E.default.hasContent]=_(this.props.line),e[E.default.ltr]="ace-rtl"!=(null==n?void 0:n.textDir),e[E.default.rtl]="ace-rtl"==(null==n?void 0:n.textDir),
e[E.default["indent".concat(null==n?void 0:n.indentLevel)]]=!!(null==n?void 0:n.indentLevel),e)):s("ace-line-task-controls",r,{"ace-line-task-controls-menu-open":o||i,
"ace-line-task-controls-no-mentions-duedate":!(null==n?void 0:n.dueDate)&&0==(null==n?void 0:n.mentions.length)})};t.prototype.toolbarIsInTable=function(){var e
;return!!(null===(e=this.state.lineState)||void 0===e?void 0:e.lineZone)&&(0,g.isCellId)(this.state.lineState.lineZone)};t.prototype.toolbarGoesOnTop=function(){
return!this.toolbarIsInTable()||!_(this.props.line)};t.prototype.render=function(){var e=this,t=this.state.lineState;if(!t)return null;var n,o=this.getClassNames()
;y.default.isOnButDoNotLog("paper_pocket_interstitial")&&this.toolbarGoesOnTop()&&(n={transform:"translateY(-".concat(this.props.line.lineNode.clientHeight,"px)")});var i=[v.createElement(d.default,{
ref:function(t){return e.dueDateButtonRef=t},line:t,save:this.deferredSaveDueDate,canEdit:!!this.state.canEdit,onOpened:this.handleDueDateMenuOpen,onClosed:this.handleDueDateMenuClose
}),v.createElement(r.default,{editor:this.props.editor,line:t,onSave:this.saveAssignees,localPadId:this.props.editor.getPadId(),readOnly:!this.state.canEdit,onOpen:this.handleAssignmentMenuOpen,
onClose:this.handleAssignmentMenuClose})],a=this.toolbarIsInTable()?C.EditorContext.Table.TaskToolbar:C.EditorContext.TaskToolbar;return v.createElement(C.TrackContext,{trackContext:a
},v.createElement(f.IntlProvider,{locale:l.default.userLocale},v.createElement("div",{className:o,style:n,"data-line-uuid":this.props.line.domInfo.usuallyUniqueId},i[0],i[1])))}
;t.displayName="TaskToolbarPocket";return t=o.__decorate([u.default],t)}(v.PureComponent);t.default=I;t.insertTaskToolbarIntoPocket=function(e,t,n){if(e&&t){var o=t.domInfo
;if((o.isTask()||o.isDoneTask())&&(n||o.isAssignedToUser||o.dueDateAssigned())){var i=y.default.isOnButDoNotLog("paper_pocket_interstitial")?(0,h.getLazyBackPocket)(e,t):(0,h.getPocket)(t.lineNode)
;i&&null==t.taskToolbarRef&&(t.taskToolbarRef=i.put(v.createElement(I,{key:t.key,line:t,editor:e}),"task-toolbar"))}}};function _(e){return e.domInfo.dueDateAssigned()||e.domInfo.isAssignedToUser}},
813:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.visible=t.alwaysVisible=t.floatAbove=t.active=t.completed=t.button=t.spaceOut=t.control=void 0;n(1370)
;t.control="_control_dcmmz_1";t.spaceOut="_spaceOut_dcmmz_6";t.button="_button_dcmmz_28";t.completed="_completed_dcmmz_34";t.active="_active_dcmmz_38";t.floatAbove="_floatAbove_dcmmz_42"
;t.alwaysVisible="_alwaysVisible_dcmmz_48";t.visible="_visible_dcmmz_55";t.default={control:"_control_dcmmz_1",spaceOut:"_spaceOut_dcmmz_6",button:"_button_dcmmz_28",completed:"_completed_dcmmz_34",
active:"_active_dcmmz_38",floatAbove:"_floatAbove_dcmmz_42",alwaysVisible:"_alwaysVisible_dcmmz_48",visible:"_visible_dcmmz_55"}},814:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o,i=n(1),r=n(10),a=n(15),s=n(3),l=n(8),d=n(2),c=n(142),u=n(1371),h=n(11),p=n(450),f=n(4),g=n(68),m=n(69),v=n(28),y=n(20),b=n(0),C=n(41),E=n(16),I=n(5),_=n(1375),T=(0,
I.PaperIntlFactory)(),S=T.F,k=T._f,x=(0,d.defineMessages)({changeDueDate:{id:"A5S9e3",defaultMessage:"Change due date"},setDueDate:{id:"qFXzyE",defaultMessage:"Set due date"}}),w=function(e){
i.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.onDatePickerOpened=function(){f.IntentionEvent.OpenDueDatePicker.track({context:n.getTrackContext()})
;n.props.onOpened&&n.props.onOpened(n.props.line);n.setState({isDatepickerOpen:!0})};n.onDatePickerClose=function(){if(n.state.removeDueDate||n.state.newDueDate){
n.state.removeDueDate?f.IntentionEvent.RemoveDueDate.track({isAutoAssignedDueDate:!!n.state.isAutoAssignedDueDate,isOverdue:n.isOverdue(),context:n.getTrackContext()
}):f.IntentionEvent.ChangeDueDate.track({isAutoAssignedDueDate:!!n.state.isAutoAssignedDueDate,isOverdue:n.isOverdue(),isToday:n.isDueToday(),context:n.getTrackContext()})
;n.props.save([["dueDate",n.state.removeDueDate||!n.state.newDueDate?"":c.toDateObject(n.state.newDueDate,0).toUTCString()],["dueDateAssigner",n.state.removeDueDate?"":l.default.secureUserId]])}else{
n.props.onClosed&&n.props.onClosed();n.setState({isDatepickerOpen:!1})}};n.setDueDate=function(e,t){o=c.toDateString(t);n.setState({removeDueDate:!1,newDueDate:o,isAutoAssignedDueDate:!1},(function(){
var e;null===(e=n.dueDateMenu)||void 0===e||e.close()}))};n.removeDueDate=function(){n.setState({removeDueDate:!0,newDueDate:null})};n.state={};return n}t.prototype.getTrackContext=function(){}
;t.prototype.componentWillReceiveProps=function(e){var t;this.state.newDueDate&&(null===(t=null==e?void 0:e.line)||void 0===t?void 0:t.dueDate)!==new Date(this.state.newDueDate)&&this.setState({
newDueDate:null})};t.prototype.getDueDate=function(){return this.state.removeDueDate?null:this.state.newDueDate||(this.props.line.dueDate?c.toDateStringFromUtc(this.props.line.dueDate):null)}
;t.prototype.isOverdue=function(){var e=this.getDueDate();return!!e&&e<c.today()};t.prototype.isDueToday=function(){var e=this.getDueDate();return!!e&&e==c.today()};t.prototype.open=function(){var e
;null===(e=this.dueDateMenu)||void 0===e||e.open()};t.prototype.isVisible=function(){return!!this.getDueDate()||!v.isNativeMobileApp()&&!!this.state.isDatepickerOpen}
;t.prototype.isRevealable=function(){return!this.isVisible()&&!v.isNativeMobileApp()};t.prototype.render=function(){var e,t,n,o=this,l=this.getDueDate(),d=s(_.default.control,((e={
notranslate:this.props.canEdit})[_.default.floatAbove]=!!this.state.isDatepickerOpen,e[_.default.alwaysVisible]=!!this.getDueDate(),e[_.default.visible]=this.isVisible(),
e[_.default.spaceOut]=!!l||(null===(n=this.props.line)||void 0===n?void 0:n.lineZone)==y.Position.ROOT_ZONE,e["pocket-item-revealable"]=this.isRevealable(),
e)),c=s("selenium-due-date-button",_.default.button,((t={})[_.default.today]=this.isDueToday(),t[_.default.overdue]=this.isOverdue(),t[_.default.completed]=this.props.line.isComplete,
t[_.default.active]=!!this.state.isDatepickerOpen,t["ace-line-task-controls-new-due-date-button"]=!l,t));if(!this.props.canEdit||v.isNativeMobileApp())return b.createElement("div",{className:s(d,c)
},l?(0,p.formatDate)(l,!0):null);var h=l?x.changeDueDate:x.setDueDate,f=this.props.line&&!!this.props.line.lineZone&&this.props.line.lineZone!=y.Position.ROOT_ZONE,C=(0,
p.formatDateAriaLabel)(l,!0),I=k(h);C&&(I="".concat(C," - ").concat(I));return b.createElement(m.default,{ref:function(e){return o.dueDateMenu=e},disableAutoCloseOnScroll:!f,className:d,
onOpen:this.onDatePickerOpened,onClose:this.onDatePickerClose,portalize:f,portalClassName:"portalized-due-date-menu"},b.createElement(r.default,{className:c,"track-title":"set-task-due-date",
tooltip:b.createElement(S,i.__assign({},h)),"aria-label":I,disabled:this.props.isOffline},l?(0,p.formatDate)(l,!0):b.createElement(E.UIIcon,{src:a.CalendarLine})),b.createElement(g.default,{
noPadding:!0,className:"notranslate",left:!!this.props.inSidebar},b.createElement(u.DueDateCalendar,{dueDate:l,line:this.props.line,removeDueDate:this.removeDueDate,setDueDate:this.setDueDate})))}
;t.prototype.componentDidMount=function(){var e=this;this.timers.setInterval((function(){return e.forceUpdate()}),C.Time.HOUR)};t.displayName="DueDateButton"
;return t=i.__decorate([h.default,f.trackContextDecorator],t)}(b.PureComponent);t.default=w},815:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.isEmpty=t.isWontFix=t.buildChangesetUpdatingLineMentions=void 0;var o=n(22);t.buildChangesetUpdatingLineMentions=function(e,t,n,i,r,a,s){for(var l="";a.hasNext();){
var d=a.next(),c=r.substring(0,d.chars);r=r.substring(d.chars);var u=o.attribsAttributeValue(d.attribs,"mentionurl",s);if(u){var h=u.substring(12);if(h&&t.indexOf(h)>=0)i.remove(d.chars);else{l+=c
;i.keepOverOp(d)}}else if(a.hasNext()){l+=c;i.keepOverOp(d)}else{l+=c.slice(0,d.chars-1);i.keep(d.chars-1)}}if(e&&n){" "!=l.charAt(l.length-1)&&i.insert(" ",[],s);i.insert("*",n,s)}i.keep(1,1)}
;t.isWontFix=function(e,t,n,i){for(var r=o.opIterator(n),a=0;r.hasNext();){var s=r.next();"true"===o.attribsAttributeValue(s.attribs,"strikethrough",i)&&(a+=s.chars)}return.75*(t.length-1-(e?1:0))<a}
;t.isEmpty=function(e){return e.length<2}},816:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.renderLine=void 0
;var o=n(58),i=n(22),r=n(1380),a=n(182),s=n(166),l=n(20),d=n(8),c=n(268),u=n(28);t.renderLine=function(e,t,n,h,p,f,g,m,v,y,b,C,E,I,_,T,S,k,x){var w,P=h[e],A=P.alines[n],O=i.opIterator(A),L="",N=""
;if(O.hasNext()){var M=O.next();L=M.getAttribute("list",f);N=M.getAttribute("lang",f)}var R=L,D=R&&o.parseListType(R),F=e==l.Position.ROOT_ZONE&&D&&"code"==D.type||m?N||m:null,z=null;if(F||m){
z="start";if(n>0){(H=T?T[n-1]:P.lines.prev(t)).domInfo&&H.domInfo.lexerStateId&&(z=H.domInfo.lexerStateId)}}var U="ace-ltr";if(n>0){var H
;(H=T?T[n-1]:P.lines.prev(t)).domInfo&&H.domInfo.lineClass&&H.domInfo.lineClass.indexOf("ace-rtl")>-1&&(U="ace-rtl")}
var B=!m&&!F&&-1==R.indexOf("code"),Z=!u.isNativeMobileApp(),j=e===l.Position.ROOT_ZONE&&!1,W=a.renderLine({hand:(0,r.editorRenderingOneLineHand)(h,p,f,t.text,P.alines[n],e),lineNumberInHand:0,
lineNumberInEditor:n,lineKey:t.key,renderContext:(0,s.thisBrowserRenderContext)(),document:document,outputOuterHTML:!1,autoLinkify:B,disableHashtag:x,lineNumberInfo:v.lineNumbers.getLineOutput(e,n),
collapsedLineInfo:v.collapsedLines&&v.collapsedLines.getLineOutput(e,n),previousLexerStateId:z,lexerStateCache:g,codeLanguage:0==n?"":F,enableSlideThings:e==l.Position.ROOT_ZONE&&E,contentEditable:y,
attachmentStore:b,padId:C,includeTitleAttrs:e==l.Position.ROOT_ZONE&&(!_||-1===(null!==(w=c.GATED_FEATURES[_])&&void 0!==w?w:[]).indexOf("notitle")),skipRenderingInnerZones:!j,
showDraftCommentsForUser:d.default.secureUserId,innerZoneHtmlMap:S,textDirHint:U,showResolvedComments:!0,locale:d.default.userLocale,editorType:_,stores:k,detectDueDates:Z},I);t.domInfo=W
;t.lineNode=W.node;W.node.id=t.key;t.lineMarker=t.domInfo.lineMarker;0}},817:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.LineTrackers=void 0
;var o=n(1),i=n(269),r=n(1388),a=n(81),s=function(){function e(e,t,n){this.lineNumbers=new r.LineNumbers(e,t);this.collapsedLines=n?new i.CollapsedLines(e,t):null}e.prototype.dispose=function(){}
;e.prototype.setEditor=function(e){this.lineNumbers.setEditor(e);this.collapsedLines&&this.collapsedLines.setEditor(e)};e.prototype.splice=function(e,t,n,o){this.lineNumbers.splice(e,t,n,o)
;this.collapsedLines&&this.collapsedLines.splice(e,t,n,o)};e.prototype.markClean=function(e,t){this.lineNumbers.markClean(e,t);this.collapsedLines&&this.collapsedLines.markClean(e,t)}
;e.prototype.doUpdate=function(){this.lineNumbers.doUpdate();this.collapsedLines&&this.collapsedLines.doUpdate()};return e=o.__decorate([a.nullifyProperties],e)}();t.LineTrackers=s},
818:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.NumberTracker=void 0;var o=n(1),i=function(e){o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.defaultLine1Input=function(){return{code:!1}};t.prototype.transition=function(e,t,n){return{codeNumber:t.code?(e.codeNumber||0)+1:null,concealCodeNumber:t.code&&!(e.codeNumber||n&&n.code),
lineNumCappedAt2:Math.min(2,e.lineNumCappedAt2+1)}};t.prototype.outputsEqual=function(e,t){
return e&&t&&e.codeNumber===t.codeNumber&&e.concealCodeNumber===t.concealCodeNumber&&e.lineNumCappedAt2===t.lineNumCappedAt2};t.prototype.emptyLineOutput=function(){return{codeNumber:null,
concealCodeNumber:!1,lineNumCappedAt2:-1}};return t}(n(811).default);t.NumberTracker=i},819:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(155),i=n(243),r=n(178),a=n(20),s=n(1393),l=n(51),d=n(8),c=n(6),u=n(28),h=n(195),p=n(18),f=n(2),g=n(43),m=n(7),v=n(38),y=n(27),b=n(61),C=(0,n(5).PaperIntlFactory)()._f,E=(0,f.defineMessages)({
placeholderTitle:{id:"k/k/+1",defaultMessage:"Give me a name"},placeholderSubtitle:{id:"xasFQM",defaultMessage:"Now write something brilliant"},oneLinePlaceholderSubtitle:{id:"RQjdF+",
defaultMessage:"Write your heart out"}});function I(e){var t,n=d.default.userLocale
;if(y.startsWith(n,"en")&&"AU"===d.default.geolocatedCountryCode)t=s.AUSTRALIAN_PROSE_SET.concat(s.SUPPLEMENTAL_ENGLISH_PROSE_SET)
;return"en"===n?b.default.paperDesktop?s.DESKTOP_PROSE_SET:e==m.PadType.customTemplate?s.TEMPLATE_PROSE_SET:t||(function(){var e=d.default.userLocale;if(!y.startsWith(e,"en"))return!1;var t=new Date
;return 9==t.getMonth()&&t.getDate()>=30||10==t.getMonth()&&1==t.getDate()
}()?s.HALLOWEEN_SET:s.ENGLISH_PROSE_SET):"en-GB"===n?t||s.UK_ENGLISH_PROSE_SET:t||("fr"===n?s.FRENCH_PROSE_SET:"es-ES"===n?s.SPANISH_SPAIN_PROSE_SET:"es"===n?s.SPANISH_LATAM_PROSE_SET:"ja"===n?s.JAPANESE_PROSE_SET:[[C(E.placeholderTitle),C(E.placeholderSubtitle)]])
}var _=function(){function e(e,t,n,o){var i=this;this.editor=e;this.stores=t;this.contentTypeRegistry=n;this.placeholderText=o;this.selectedSet_=void 0;this.onInitialText=function(){(0,
h.delayUntilPageLoad)((function(){i.editor&&!i.editor.isDisposed()&&i.setPlaceholderIfNeeded()}))};this.onKeyDown=function(e){
if(i.editor.getRep(a.Position.ROOT_ZONE)&&g.KeyCode.isPrintable(e.keyCode)&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&i.editor.hasSelection()&&i.editor.selection.isCollapsed()){
var t=i.editor.dom.getRootForZone(i.editor.selection.getStart().zone);if(0==i.editor.selection.getStart().line&&t){t.classList.remove("editor-blank-title")
;i.editor.selection.getStart().zone!=a.Position.ROOT_ZONE&&t.classList.remove("editor-blank")}else 1==i.editor.selection.getStart().line&&t&&t.classList.remove("editor-blank-text")}}
;this.onKeyUp=function(e){
!g.KeyCode.isPrintable(e.keyCode)||e.ctrlKey||e.altKey||e.metaKey||!i.editor.hasSelection()||!i.editor.selection.isCollapsed()?i.setPlaceholderIfNeeded():i.setPlaceholderIfNeeded([i.editor.selection.getStart().zone])
};this.onInvalidateCache=function(){i.setPlaceholderIfNeeded()};this.onChange=function(e){i.setPlaceholderIfNeeded((e.touchedZoneIds||[]).concat(e.updatedZoneIds||[]))}
;this.updateCompositionState=function(){var e="hp-ime-composition-enabled";i.editor.core.getIMEStatus()?document.body.classList.add(e):document.body.classList.remove(e)}
;e.padController&&e.padController.isCloudDoc()&&!this.domHasBlankTitle(a.Position.ROOT_ZONE)?this.proseSet=[["",C(E.oneLinePlaceholderSubtitle)]]:this.proseSet=I(e.getPadType())
;this.editor.observer.on("initial-text",this.onInitialText);this.editor.observer.on("invalidate-cache",this.onInvalidateCache);this.editor.observer.on("change-debounced",this.onChange)
;this.editor.observer.on("compositionstart",this.updateCompositionState);this.editor.observer.on("compositionend",this.updateCompositionState);this.editor.observer.on("keydown",this.onKeyDown)
;this.editor.observer.on("keyup",this.onKeyUp)}e.prototype.dispose=function(){this.editor.observer.off("initial-text",this.onInitialText)
;this.editor.observer.off("invalidate-cache",this.onInvalidateCache);this.editor.observer.off("change-debounced",this.onChange);this.editor.observer.off("compositionstart",this.updateCompositionState)
;this.editor.observer.off("compositionend",this.updateCompositionState);this.editor.observer.off("keydown",this.onKeyDown);this.editor.observer.off("keyup",this.onKeyUp);this.editor=null
;this.stores=null;this.selectedSet_=null;this.proseSet=null};e.prototype.isInInternationalCompositionOnLine=function(e,t){if(!this.editor.hasSelection()||this.editor.selection.isCollapsed())return!1
;if(!this.editor.core.getIMEStatus())return!1;var n=this.editor.selection.getStart();return n&&n.zone==e&&n.line==t};e.prototype.isDomLineBlank=function(e){return e.nodeType==Node.ELEMENT_NODE&&!(0,
c.toArray)(e.childNodes).some((function(e){var t=e.textContent;if(e.nodeType===Node.ELEMENT_NODE){var n=e;if(n.classList.contains("ace-line-pocket"))return!1
;if(n.hasAttribute("data-faketext")&&/[\u200b\u200d]/.test(t))return t.length>1}return t.length>0}))};e.prototype.domHasBlankTitle=function(e){var t=this.editor.dom.getRootForZone(e);if(!t)return!0
;var n=(0,r.getChildrenLines)(t);return 0==n.length||this.isDomLineBlank(n[0])};e.prototype.domHasBlankText=function(e){var t=this.editor.dom.getRootForZone(e);if(!t)return!0;var n=(0,
r.getChildrenLines)(t);return n.length<2||2==n.length&&this.isDomLineBlank(n[1])||3==n.length&&this.isDomLineBlank(n[1])&&this.isDomLineBlank(n[2])};e.prototype.setPlaceholderIfNeeded=function(e){
var t=this,n=this.placeholderText,o=void 0!==n;if(void 0===this.selectedSet_){
o?this.selectedSet_=[n,""]:this.stores&&this.stores.settings.getSettings().prose&&!u.isMobile()?this.selectedSet_=this.proseSet[v.getRandomInt(this.proseSet.length)]:this.selectedSet_=this.proseSet[0]
;var r=this.editor.dom.getRoot().parentNode.getAttribute("id")
;this.editor.dynamicCSS.selectorStyle("#".concat(r," .editor-blank-title > div:first-of-type:before")).content=JSON.stringify(this.selectedSet_[0])
;this.editor.dynamicCSS.selectorStyle("#".concat(r," .editor-blank-text > div:nth-of-type(2):before")).content=JSON.stringify(this.selectedSet_[1]);(0,
i.getAllZoneTypes)(this.contentTypeRegistry).filter((function(e){return t.editor.hasFeature("placeholder",e,{shouldMatchRootZone:!1})})).forEach((function(e){
t.editor.dynamicCSS.selectorStyle("#".concat(r," [data-zone-type='").concat(e,"'] > .ace-editor > div:first-of-type:before")).content=JSON.stringify((0,i.getZonePlaceholder)(e,t.contentTypeRegistry))
}))}this.setPlaceholderHelperForZone(a.Position.ROOT_ZONE,o);Object.keys(this.editor.getReps()).filter((function(n){return n!=a.Position.ROOT_ZONE&&(!e||-1!==e.indexOf(n))&&!(0,
l.isCellId)(n)&&t.editor.hasFeature("placeholder",n,{shouldMatchRootZone:!1})})).forEach((function(e){t.setPlaceholderHelperForZone(e,o)}))};e.prototype.setPlaceholderHelperForZone=function(e,t){
var n=this.editor.dom.getRootForZone(e);if(n){
var i=this.editor.getRep(e),r=this.editor.getRep(e).alltext,s=r.length,l=r.trim().length-(r.match(/\*/g)||[]).length,d=t?l<=1:0==i.lines.length()||""==i.lines.atIndex(0).text,c=t?s<=1:i.lines.length()<2||3==i.lines.length()&&""==i.lines.atIndex(1).text&&""==i.lines.atIndex(2).text||2==i.lines.length()&&""==i.lines.atIndex(1).text
;if(e!=a.Position.ROOT_ZONE){d=d&&c;c=!1}this.isInInternationalCompositionOnLine(e,0)?d=!1:(this.isInInternationalCompositionOnLine(e,1)||this.isInInternationalCompositionOnLine(e,2))&&(c=!1)
;d&&!this.domHasBlankTitle(e)&&(d=!1);c&&!this.domHasBlankText(e)&&(c=!1);if("textembed"===(0,o.getZoneType)(e)){var u=function(e,t){var n=e.getRep(t).alltext;return{isBlankText:n.length<=1,
isBlankTitle:0==n.replace(/\*/g,"").trim().length}}(this.editor,e);d=u.isBlankTitle;c=u.isBlankText}(0,p.toggleClass)(n,"editor-blank",d||c);(0,p.toggleClass)(n,"editor-blank-title",d);(0,
p.toggleClass)(n,"editor-blank-text",c)}};return e}();t.default=_},820:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.getServersidePrerenderHtmlWithoutClientVars=t.getServersidePrerenderInfo=t.AcePrerender=void 0
;var o=n(1),i=n(6),r=n(807),a=n(22),s=n(141),l=n(64),d=n(7),c=n(100),u=n(246),h=n(268),p=n(58),f=n(528),g=n(243),m=n(18),v=n(817),y=n(1397),b=n(573),C=n(591),E=n(81),I=n(20),_=n(816),T=n(51),S=n(592),k=n(17),x=n(451),w=function(){
function e(e,t,n,o,i,a,s,l,d,c,u,h,p){this.root=e;this.zatext=t;this.pool=n;this.serverRenderInfo=o;this.attachmentStore=i;this.contentTypeRegistry=a;this.padId=s;this.features=l;this.lineIdPrefix=d
;this.focusLineResult=c;this.editorType=u;this.stores=h;this.disableHashtags=p;this.vectorReps={};this.reps={};this.currentMagicObjectId=1;this.rootNodes={};this.aceLineId=1;this.lineTrackers=null
;this.lexings=new r.BoundedHashMap(5e3);this.defaultLang=null;this.entriesPerZone={};this.timeout=null;this.prerenderTimeout=null;this.doneRenderingTopCb=null;this.doneRenderingCb=null}
e.prototype.dispose=function(){clearTimeout(this.timeout);this.timeout=null;clearTimeout(this.prerenderTimeout);this.prerenderTimeout=null};e.prototype.doPrerender=function(e,t){this.doneRenderingCb=t
;this.doneRenderingTopCb=e;this.batch1()};e.prototype.batch1=function(){var e=this;if(!this.serverRenderInfo)for(;this.root.childNodes.length>0;)this.root.removeChild(this.root.lastChild)
;this.setupRepExceptAlinesForRootZone();var t,n,o=this.getFirstRange(),i=o.start,r=o.end;this.setupAlines("0",0,r);this.setupLang();this.renderNonRootZones();if(this.serverRenderInfo){t=0
;n=this.root.childNodes.length}else{t=i;n=i}this.insertDomLines("0",i,r,t,n);this.doneRenderingTopCb&&this.doneRenderingTopCb();var a=this.getNodeToCenterOn();a&&this.centerNode(a);if(i>0){
this.root.insertBefore(document.createElement("div"),this.root.firstChild);this.setTimeout((function(){return e.batchPrefix(i,r)}),1)}else r<this.entriesPerZone[0].length?this.setTimeout((function(){
return e.batch2(r)}),1):this.finish()};e.prototype.getNodeToCenterOn=function(){if(!this.serverRenderInfo&&this.focusLineResult&&this.focusLineResult.success){
var e=this.focusLineResult.zone,t=this.focusLineResult.line;return this.entriesPerZone[e][t].lineNode}return null};e.prototype.getFirstRange=function(){var e=this.entriesPerZone[0].length
;if(!this.serverRenderInfo&&this.focusLineResult&&this.focusLineResult.success){var t=this.focusLineResult.topLevelLine,n=t-25,o=t+25;if(n<0){n=0;o=Math.min(50,e)}else if(o>e){n=Math.max(0,e-50);o=e}
return{start:n,end:o}}return{start:0,end:Math.min(50,e)}};e.prototype.batchPrefix=function(e,t){var n,o=this,i=this.getNodeToCenterOn(),r=document.getElementById("padpage-container")
;i&&r&&(n=i.offsetTop-r.offsetTop);this.root.removeChild(this.root.firstChild);this.insertDomLines("0",0,e,e,t);if(i&&r){var a=i.offsetTop-r.offsetTop-n;(0,m.setScrollTop)(r,(0,m.getScrollTop)(r)+a)}
t<this.entriesPerZone[0].length?this.setTimeout((function(){return o.batch2(t)}),1):this.finish()};e.prototype.batch2=function(e){var t=this,n=Math.min(e+50,this.entriesPerZone[0].length)
;this.setupAlines("0",e,this.entriesPerZone[0].length);this.insertDomLines("0",e,n,0,e);n<this.entriesPerZone[0].length?this.setTimeout((function(){return t.batchN(n)}),1):this.finish()}
;e.prototype.batchN=function(e){var t=this,n=Math.min(2*e,this.entriesPerZone[0].length);this.insertDomLines("0",e,n,0,e);n<this.entriesPerZone[0].length?this.setTimeout((function(){return t.batchN(n)
}),1):this.finish()};e.prototype.finish=function(){this.makeSkipLists();this.doneRenderingCb&&this.doneRenderingCb()};e.prototype.makeSkipLists=function(){for(var e in this.entriesPerZone){var t=(0,
C.default)();t.splice(0,t.length(),this.entriesPerZone[e]);this.reps[e].lines=t}};e.prototype.setupRepExceptAlinesForRootZone=function(){var e=this,t=this.zatext,n=t.rows||{}
;for(var o in n)this.vectorReps[o]={vectorIds:i.clone(n[o]),forRow:!0,alines:[t.attribs[o]]};var r=t.cols||{};for(var o in r)this.vectorReps[o]={vectorIds:i.clone(r[o]),forRow:!1,alines:[t.attribs[o]]
};this.lineTrackers=new v.LineTrackers(null,this.pool,this.features.indexOf("collapsed-sections")>=0)
;this.serverRenderInfo&&this.serverRenderInfo.didRenderAnyInnerZone&&this.findAndSaveRootNodesFromServerRender();Object.keys(t.text).sort().forEach((function(t){e.setupRepForInnerZone(t)}))
;if(this.serverRenderInfo&&this.serverRenderInfo.didRenderAnyInnerZone)for(var o in this.rootNodes)o in this.entriesPerZone||this.setupRepForInnerZone(o)}
;e.prototype.findAndSaveRootNodesFromServerRender=function(){for(var e=this,t=function(n){if(n.nodeType===Node.ELEMENT_NODE){if(n.hasAttribute("data-zone-id")){var o=n.getAttribute("data-zone-id")
;e.rootNodes[o]=n}for(var i=0;i<n.childNodes.length;i++)t(n.childNodes[i])}},n=0;n<this.root.childNodes.length;n++)t(this.root.childNodes[n])};e.prototype.setupRepForInnerZone=function(e){
var t=this.zatext.text[e]||"\n",n=t.split("\n");this.reps[e]={lines:null,alltext:t,alines:new Array(n.length-1)};"0"==e||this.rootNodes[e]||(this.rootNodes[e]=(0,b.makeRootNode)(e))
;for(var o=new Array(n.length-1),i=0;i<n.length-1;i++){var r={key:this.lineIdPrefix+"-ace-line-"+this.aceLineId++,text:n[i],lineNode:null,domInfo:null,lineMarker:0,width:n[i].length+1};o[i]=r}
this.entriesPerZone[e]=o;"0"!=e&&this.setupAlines(e,0,o.length)};e.prototype.setupLang=function(){-1!==this.features.indexOf("whole-doc-lang-from-title")&&(this.defaultLang=(0,
f.getWholeDocLang)(this.entriesPerZone[0][0].text));(0,f.setRootStyling)(this.root,this.defaultLang)};e.prototype.renderNonRootZones=function(){
for(var e in this.entriesPerZone)if(e!=I.Position.ROOT_ZONE){var t=this.entriesPerZone[e],n=this.rootNodes[e];this.insertDomLines(e,0,t.length,0,n.childNodes.length)}}
;e.prototype.insertDomLines=function(e,t,n,o,i){var r="0"==e?this.root:this.rootNodes[e],a=this.entriesPerZone[e]
;if(r.childNodes.length!==i-o||!(0===t&&n===o||t>=o&&t<=i))throw new Error("cannot handle this case: "+[r.childNodes.length,t,n,o,i]);for(var s=0===t&&n===o?r.firstChild:null,l=t;l<n;l++){var d=a[l]
;this.renderLine(e,d,l,a);if(s){this.addInnerZones(d);r.insertBefore(d.domInfo.node,s)}else if(l>=i){this.addInnerZones(d);r.appendChild(d.domInfo.node)}else{
var c=l-o,u=d.lineNode.id,h=r.childNodes[c];h.id=u;if((0,y.makeNodesMatch)(d.lineNode,h)){d.lineNode=h;d.domInfo.node=h;this.addInnerZones(d)}else{this.addInnerZones(d);r.insertBefore(d.lineNode,h)
;r.removeChild(h)}}this.lineTrackers.markClean(e,l)}};e.prototype.renderLine=function(e,t,n,o,i){return(0,
_.renderLine)(e,t,n,this.reps,this.vectorReps,this.pool,this.lexings,this.defaultLang,this.lineTrackers,!1,this.attachmentStore,this.padId,-1!==this.features.indexOf("slidethings"),this.contentTypeRegistry,this.editorType,o,i,this.stores,this.disableHashtags)
};e.prototype.addInnerZones=function(e){var t=this;"aceTable"===e.domInfo.lineManagerType&&[].slice.call(e.domInfo.node.querySelectorAll(".inner-zone-ace-editor-wrapper")).forEach((function(e){
var n=e.getAttribute("data-ace-inner-zone-content-wrapper-zone-id");if(n in t.rootNodes&&(1!==e.childNodes.length||e.childNodes[0]!==t.rootNodes[n])){
for(;e.childNodes.length;)e.removeChild(e.lastChild);e.appendChild(t.rootNodes[n])}}))};e.prototype.setupAlines=function(e,t,n){if(!(t>=n)){var o=this.reps[e].alines
;if(t>0&&e!=this.savedAlineParsingStateZone)throw new Error("you cannot interweave calls to setupAlines between different zones")
;var i=this.splitAttributionLinesAndMagicObjectIds(this.zatext.attribs[e]||"|1+1",this.zatext.text[e]||"\n",o,n+1,0!=t?this.savedAlineParsingState:void 0);this.savedAlineParsingState=i
;this.savedAlineParsingStateZone=e;this.lineTrackers.splice(e,t,1,o.slice(t,Math.min(n+1,o.length)))}};e.prototype.splitAttributionLinesAndMagicObjectIds=function(e,t,n,o,i){
for(var r=i?i.iter:a.opIterator(e),s=i?i.assem:a.mergingOpAssembler(),l=i?i.pos:0,d=i?i.lineNum:0,c=function(e){s.append(e);if(e.lines>0){n[d]=s.toString();d++;s.clear()}l+=e.chars
};r.hasNext()&&d<o;){var u=r.next(),h=a.getAttribNumbers(u.attribs);0;for(var p=!1,f=0;f<h.length;f++){var g=this.pool.getAttribKey(h[f])
;if("magicObject"==g)p=!0;else if("clientside-magicObjectId"==g){h.splice(f,1);f--;u.attribs=a.makeAttribsStringFromNums(h)}}if(p){
if(u.lines>0)throw new Error("magic object on newline!!! call the paramedics!!!");var m=u.chars;u.chars=1;h.push(null);for(f=0;f<m;f++){var v=""+this.currentMagicObjectId++
;h[h.length-1]=this.pool.putAttrib(["clientside-magicObjectId",v]);u.attribs=a.makeAttribsStringFromNums(h);c(u)}}else{for(var y=u.chars,b=u.lines;b>1;){var C=t.indexOf("\n",l)+1;u.chars=C-l;u.lines=1
;c(u);y-=u.chars;b-=u.lines}if(1==b){u.chars=y;u.lines=1}c(u)}}return{lineNum:d,pos:l,iter:r,assem:s}};e.prototype.centerNode=function(e){var t=this.root,n=(0,m.offset)(e).top-(0,
m.offset)(t).top,o=(0,m.height)(document.getElementById("padpage-container"))*(1/3)-n;(0,m.setScrollTop)(document.getElementById("padpage-container"),-o)};e.prototype.setTimeout=function(e,t){
this.timeout=setTimeout((function(){k.default.error.loggingTryCatch((function(){e()}),(function(e){(0,c.freakout)("got exception in prerender timeout",e)}))}),t)}
;o.__decorate([u.freakoutOnException],e.prototype,"doPrerender",null);o.__decorate([(0,S.trace)()],e.prototype,"setupRepExceptAlinesForRootZone",null);o.__decorate([(0,
S.trace)()],e.prototype,"setupAlines",null);return e=o.__decorate([E.nullifyProperties],e)}();t.AcePrerender=w;var P=function(){function e(e,t,n,o){this.padClientVars=e;this.zatext=t;this.pool=n
;this.stores=o}e.prototype.render=function(){var e=this.setup(),t=e.start,n=e.end,o=e.prerender,i=this.renderInnerZones(t,n,o),r=i.newStart,a=i.newEnd,s=i.didRenderAnyInnerZone,l=i.innerZoneHtmlMap
;return{html:this.renderLinesInRoot(r,a,o,l),didRenderAnyInnerZone:s}};e.prototype.setup=function(){var e=O(this.padClientVars.padType),t=new w(null,this.zatext,this.pool,null,null,(0,
s.default)(e),this.padClientVars.padId,h.GATED_FEATURES.full,"editor-server-rendered",null,e,this.stores);t.setupRepExceptAlinesForRootZone();var n=Math.min(50,t.entriesPerZone[0].length)
;t.setupAlines("0",0,n);t.setupLang();return{start:0,end:n,prerender:t}};e.prototype.renderInnerZones=function(e,t,n){for(var o=this.zatext,i=this.pool,r=O(this.padClientVars.padType),d=(0,
s.default)(r),c=!1,u={},h=0,f=e;f<t;f++){var m=n.reps[0].alines[f],v=void 0,y=void 0,C=void 0,E=(0,p.getLineManager)(m,i,d);if(E)if("aceTable"===E.key){var I=E.value.split(" ");v=I[0];y=I[1]
}else if((0,g.lineManagerTypeCanHaveZones)(E.key,d)){var _=a.attribsToDict(m,i);C=(0,p.getDynamicObjectData)(E.key,_,d)}if(v&&y)for(var S=(0,
l.docHand)(o,i),k=S.getRowsText(v).ids(),x=S.getColsText(y).ids(),w=0;w<k.length&&h<50;w++){for(var P=50-h,A=0,L=0;L<x.length&&L<20;L++){var N=T.getCellIdFromRowAndCol(k[w],x[L])
;n.entriesPerZone[N]||n.setupRepForInnerZone(N);var M=Math.min(P,n.entriesPerZone[N].length);A=Math.max(A,M);for(var R="",D=0;D<M;D++)R+=n.renderLine(N,n.entriesPerZone[N][D],D,n.entriesPerZone[N])
;u[N]=(0,b.makeRootNodeAsString)(N,R);c=!0}h+=A}else if(C){(0,g.getZonesReferencedByLineManagerData)(C,E.key,d,{zatext:this.zatext,apool:this.pool}).forEach((function(e){
n.entriesPerZone[e]||n.setupRepForInnerZone(e);for(var t=n.entriesPerZone[e].length,o="",i=0;i<t;i++)o+=n.renderLine(e,n.entriesPerZone[e][i],i,n.entriesPerZone[e]);u[e]=(0,
b.makeRootNodeAsString)(e,o);c=!0}));h+=1}else h+=1;if(h>=50){t=f+1;break}}return{newStart:e,newEnd:t,didRenderAnyInnerZone:c,innerZoneHtmlMap:u}};e.prototype.renderLinesInRoot=function(e,t,n,o){
for(var i=n.entriesPerZone[0],r="",a=e;a<t;a++)r+=n.renderLine("0",i[a],a,i,o);return r};o.__decorate([(0,S.trace)()],e.prototype,"render",null);o.__decorate([(0,
S.trace)()],e.prototype,"renderInnerZones",null);o.__decorate([(0,S.trace)()],e.prototype,"renderLinesInRoot",null);return e}();t.getServersidePrerenderInfo=function(e,t){if(e.deletedPadId)return{
html:null,info:{docLang:null,didRenderAnyInnerZone:!1}};var n=x.getInitializationZatext(e),o=A(n.aceZatext,n.pool),i=new P(e,n.aceZatext,n.pool,t).render();return{html:i.html,info:{docLang:o,
didRenderAnyInnerZone:i.didRenderAnyInnerZone}}};t.getServersidePrerenderHtmlWithoutClientVars=function(e,t,n,o,i){var r=new P({padId:n,padType:o},e,t,i).render(),a=r.html,s=r.didRenderAnyInnerZone
;return{appHtml:a,docLang:A(e,t),didRenderAnyInnerZone:s}};var A=(0,S.trace)("prerender.getWholeDocLang",(function(e,t){var n=(0,l.docHand)(e,t).text();return(0,
f.getWholeDocLang)(n.substring(0,n.indexOf("\n")))}));function O(e){return e===d.PadType.space?"space":"full"}},827:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.determineToolbarPosition=void 0;var o=n(809),i=n(286),r=n(18),a=n(28),s=n(17),l=25,d=40;t.determineToolbarPosition=function(e,t,n){if(a.isApplePhone())return{position:{top:(0,
r.getScrollTop)(window),left:0},shouldGoAbove:!0};if(a.isPhone())return{position:{top:a.isMobile()?0:4,left:0},shouldGoAbove:!0};var i=function(e){var t=a.isMobile()?0:4,n=10,o=(0,
r.offset)(e.dom.getViewportNode()),i=e.selection.getBoundingClientRect();return i.y+i.height-o.top-n+(0,r.getScrollTop)(window)+t}(e),u=function(e,t,n){var i=a.isPhone()?0:10,d=(0,
r.offset)(t.dom.getViewportNode()),c=t.dom.getScrollEl();if(e+d.top+i+l>(0,r.getScrollTop)(window)+(0,r.height)(c))return!0;var u=t.dom.getLineHeight(),h=!0,p=!1,f=t.mouse.getLatestMouseUpInfo()
;f&&s.default.error.silentTryCatch((function(){var e=f.evt.target;e.style.lineHeight&&(u=parseInt(e.style.lineHeight,10))}),(function(e){
s.default.error.logException(e,[/undefined is not an object \(evaluating '\w+\.ownerDocument\.defaultView'\)/]);p=!0}));if(p)return!0;var g=t.mouse.getLatestMouseDownInfo();if(g&&f){
var m=t.selection.getBoundingClientRect();m.height>u&&(h=(0,o.getClientAndPage)(g.evt).pageY>=(0,o.getClientAndPage)(f.evt).pageY);var v=10
;e-((n?n.offsetHeight:t.media.getSelectedGalleryElement()?20:m.height)+2*i+v)-l<=(0,r.getScrollTop)(c)&&(h=!1)}return h}(i,e,n);if(n){var h=function(e,t,n){var o=(0,
r.offset)(t.dom.getViewportNode()),i=10,a=1,s=parseInt(e.style.lineHeight,10)||t.dom.getLineHeight(),d=(0,r.offset)(e).top+s-a-i-o.top,c=(0,r.offset)(e).left+Math.round(e.offsetWidth/2)-o.left-4
;if(n){var u=10,h=10,p=d-(e.offsetHeight+2*u+h),f=t.dom.getScrollTop();d=Math.max(f+l,p)}return{top:d,left:c}}(n,e,u);return{position:h=c(h,e,t),shouldGoAbove:u}}
var p=e.managers.getLineManagerWithSpecialSelection("aceTable");if(p){var f=function(e,t){var n=16,o=8,i=32,a=0,s=0,l=(0,
r.offset)(t.dom.getViewportNode()),c=e.getWhollySelectedRegions(),u=e.getTableWrapper();if(c.entireTable||c.cols.length)a=(0,r.offset)(u).top-(l.top+d+n);else if(c.rows.length){
var h=(u?Array.prototype.slice.call(u.querySelectorAll("tr")):[])[c.rows[0]];h&&(a=(0,r.offset)(h).top-(l.top+d+o))}if(c.entireTable||c.rows.length){var p=u?u.querySelector("tr:first-child td"):null
;s=(0,r.offset)(p).left-l.left+i}else if(c.cols.length){var f=u?Array.prototype.slice.call(u.querySelectorAll("tr:first-child td")):[],g=(p=f[c.cols[0]],f[c.cols[c.cols.length-1]]);if(p&&g){var m=(0,
r.offset)(g).left-(0,r.offset)(p).left+(0,r.width)(g);s=(0,r.offset)(p).left+Math.round(m/2)-l.left}}return{top:a,left:s}}(p,e);return{position:f=c(f,e,t),shouldGoAbove:u}}
var g=e.getCurrentLineEntry(),m=g?e.managers.lineManagerForLine(g,"timeline"):null;if(m&&m.getTimelineWrapper()){var v=function(e,t){var n=(0,
r.offset)(t.dom.getViewportNode()),o=e.getTimelineWrapper(),i=(0,r.offset)(o),a=i.top-(n.top+d),s=i.left-n.left+Math.round((0,r.outerWidth)(o)/2);return{top:a,left:s}}(m,e);return{position:v=c(v,e,t),
shouldGoAbove:u}}var y=e.media.getSelectedGalleryElement();if(y){var b=function(e,t,n,o){var i=(0,r.offset)(n.dom.getViewportNode()),a={top:t,left:0};if(o){
var s=n.dom.getScrollTop(),c=i.top+s,u=10,h=s+(0,r.offset)(e).top-(c+d+u);a.top=Math.max(s+l,h)}a.left=(0,r.offset)(e).left-i.left+Math.round((0,r.outerWidth)(e,!0)/2);return a}(y,i,e,u);return{
position:b=c(b,e,t),shouldGoAbove:u}}var C=function(e,t,n){var o=e,i=(0,r.offset)(t.dom.getViewportNode()),a=t.selection.getBoundingClientRect();if(n){
var s=10,d=10,c=o-(a.height+2*s+d),u=t.dom.getScrollTop();o=Math.max(u+l,c)}return{top:o,left:a.x+Math.round(a.width/2)-i.left-4}}(i,e,u);return{position:C=c(C,e,t),shouldGoAbove:u}}
;function c(e,t,n){var o=t.dom.getPadding(),a=t.getEditorSizeState(),s=Math.round(n/2),l=0;a&&a.containerWidth&&(l=o-(0,i.getLeftOffsetForWidth)(a.containerWidth)+20+s);var d=(0,
r.width)(document.body)-s,c=Math.min(Math.max(l,e.left),d);return{top:Math.round(e.top),left:Math.round(c)}}},834:function(e,t,n){const o=n(0);e.exports=o.addons.CSSTransitionGroup},
835:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(428),r=n(299),a=n(142),s=n(5),l=n(0),d=(0,s.PaperIntlFactory)().FormattedDate,c=function(e){o.__extends(t,e)
;function t(t){var n=e.call(this,t)||this;n.handleCaptionClick=function(e,t){var o={canHideCalendarElements:t.getMonth()==n.props.selectedDate.getMonth()}
;o.canHideCalendarElements&&(o.displayFullMonth=!n.state.displayFullMonth);n.setState(o,(function(){if(n.state.displayFullMonth){n.showExtraWeeks();n.showMonthNavBar()}else{n.hideExtraWeeks()
;n.hideMonthNavBar()}}))};n.handleDayClick=function(e,t){t&&n.props.onDateChanged(t);n.state.displayFullMonth&&n.setState({displayFullMonth:!n.state.displayFullMonth},(function(){n.hideExtraWeeks()}))
;n.hideMonthNavBar()};n.handleMonthChange=function(e,t){n.showExtraWeeks()};n.hideExtraWeeks=function(){n.state.canHideCalendarElements&&n.getExtraCalendarWeeks().forEach((function(e){
return e.classList.add("hidden-week")}))};n.showExtraWeeks=function(){n.getExtraCalendarWeeks().forEach((function(e){return e.classList.remove("hidden-week")}))};n.hideMonthNavBar=function(){
if(n.state.canHideCalendarElements){var e=document.querySelector(".calendar-picker .DayPicker-NavBar");e&&e.classList.add("hidden")}};n.showMonthNavBar=function(){
var e=document.querySelector(".calendar-picker .DayPicker-NavBar");e&&e.classList.remove("hidden")};n.getExtraCalendarWeeks=function(){
for(var e=document.querySelectorAll(".calendar-picker .DayPicker-Week"),t=[],n=0;n<e.length;n++)e[n].querySelector(".DayPicker-Day--selected")||t.push(e[n]);return t};n.isDaySelected=function(e){
return a.toDateString(n.props.selectedDate)==a.toDateString(e)};n.state={canHideCalendarElements:!0,displayFullMonth:t.displayFullMonthInitial};return n}t.prototype.componentDidUpdate=function(){
if(this.state.displayFullMonth){this.showExtraWeeks();this.showMonthNavBar()}else{this.hideExtraWeeks();this.hideMonthNavBar()}};t.prototype.render=function(){var e
;this.props.children&&(e=l.createElement("div",{className:"calendar-picker-content"},l.createElement("div",{className:"calendar-picker-current-day"},l.createElement(d,{value:this.props.selectedDate,
weekday:"long",month:"long",day:"numeric"})),l.createElement("div",null,this.props.children)));return l.createElement("div",{className:"calendar-picker"},l.createElement(i,o.__assign({ref:"dayPicker"
},r.default,{enableOutsideDays:!0,onCaptionClick:this.handleCaptionClick,onDayClick:this.handleDayClick,onMonthChange:this.handleMonthChange,selectedDays:this.isDaySelected,
initialMonth:this.props.selectedDate})),e?l.createElement("hr",null):null,e)};t.displayName="CalendarPicker";return t}(l.Component);t.default=c},836:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.EventMeetingNotePanelEntryWithAttachments=void 0
;var o=n(1),i=n(4),r=n(3),a=n(2),s=n(60),l=n(10),d=n(139),c=n(36),u=n(147),h=n(600),p=n(0),f=n(454),g=n(13),m=n(17),v=(0,n(5).PaperIntlFactory)().F,y=(0,a.defineMessages)({
numguestspluralonepersonotherpeople:{id:"iFRjs2",defaultMessage:"{numGuests, plural, one {1 person} other {# people}}"},untitled:{id:"YhUh+a",defaultMessage:"Untitled"},createnewdoc:{id:"aUYGpi",
defaultMessage:"Create new doc"}});t.EventMeetingNotePanelEntryWithAttachments=function(e){var t,n,a=e.event,b=e.includeSubtitleDate,C=e.includeSubtitleGuestCount,E=(0,
f.shortDateAndTime)(a.start_time),I=E.date,_=E.day,T=E.time,S=p.createElement("span",{className:"notranslate",key:"key-element"},T);b&&(t=p.createElement("span",{className:"notranslate",
key:"date-element"},I));if(C){var k=a.attendees.filter((function(e){return!e.is_resource})).length;n=p.createElement("span",{key:"guest-count-element"},p.createElement(v,o.__assign({values:{
numGuests:k}},y.numguestspluralonepersonotherpeople)))}var x,w=[t,S,n].filter((function(e){return e})),P=p.createElement("span",{
className:"notranslate meeting-note-panel-entry-subtitle-value-divider",key:"separator"},"•"),A=p.createElement("span",{className:"meeting-note-panel-entry-subtitle-elements"},(0,
c.joinJSX)(w,P)),O=(a.attachments||[]).filter((function(e){return"paper_pad"==e.attachment_type})).map((function(e,t){var n;if(e.name)n=p.createElement(s.default,{str:e.name,skipFirstEmoji:!0});else{
m.default.error.logException(new Error("Unnamed Meeting Note Attachment"),null,{localPadId:e.id});n=p.createElement(v,o.__assign({},y.untitled))}return p.createElement(l.default,{key:e.id,
className:"meeting-notes-panel-attachment-button",linky:!0,"track-title":"Open meeting note attachment","track-index":t,onClick:function(){
u.redirectToMeetingNoteAttachment(a,App,t,i.AppContext.MeetingNotes.OverflowMenu)}},p.createElement("div",{className:"meeting-notes-panel-attachment-button"},p.createElement(d.default,{title:e.name,
className:"meeting-notes-panel-attachment-icon"},p.createElement(g.default,{name:"note-small"})),p.createElement("div",{className:"meeting-note-panel-attachment-title notranslate"},n)))}))
;e.excludeAttachments||(x=p.createElement("div",null,O,p.createElement(l.default,{linky:!0,onClick:e.onCreateMeetingNoteClick,className:"meeting-notes-panel-attachment-button"},p.createElement("div",{
className:"meeting-notes-panel-attachment-button"},p.createElement("span",{className:"meeting-notes-panel-attachment-icon"},p.createElement(g.default,{name:"create-new-doc"
})),p.createElement(v,o.__assign({},y.createnewdoc))))));var L=r({meeting_note_panel_entry__unclickable:!e.onEventClick});return p.createElement("div",{
className:"meeting-note-panel-entry-with-attachments"},p.createElement(h.MeetingNotePanelEntry,{className:L,day:_,onRemove:e.onRemove,onClick:e.onEventClick,trackTitle:"New meeting note",
title:a.title?p.createElement("span",{className:"notranslate"},a.title):p.createElement(v,o.__assign({},y.untitled)),subtitle:A,disabled:e.disabled,noIcon:!0}),x)}
;t.EventMeetingNotePanelEntryWithAttachments.displayName="EventMeetingNotePanelEntryWithAttachments"},837:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(1),i=n(6),r=n(89),a=n(2),s=n(11),l=n(0),d=n(1460),c=n(7),u=n(1461),h=n(1462),p=n(1465),f=(0,n(5).PaperIntlFactory)(),g=f.F,m=f._f,v=(0,a.defineMessages)({allFilterDisplayName:{id:"XSqokt",
defaultMessage:"All"},ownedByYouFilterDisplayName:{id:"Rl+fs9",defaultMessage:"Owned by you"},sharedWithYouFilterDisplayName:{id:"AcOgvY",defaultMessage:"Shared with you"},archivedFilterDisplayName:{
id:"6twe3K",defaultMessage:"Archived"},trashedFilterDisplayName:{id:"1iqsnx",defaultMessage:"Deleted"},dropboxFilterDisplayName:{id:"UcfSs8",defaultMessage:"Dropbox templates"},templates:{id:"8ltwDt",
defaultMessage:"Templates"}}),y=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.updateTemplateList=function(){n.props.templateListStore.getTemplateList({
filter:n.state.currentFilter.key},(function(e){n.setState({templates:e})}))};n.handleSortSelection=function(e){var t=i.find(n.filters,(function(t){return t.key==e}));n.setState({currentFilter:t
},n.fetchFreshTemplates)};n.filters=[{displayName:m(v.allFilterDisplayName),key:c.TemplateListFilter.All},{displayName:m(v.ownedByYouFilterDisplayName),key:c.TemplateListFilter.OwnedByMe},{
displayName:m(v.sharedWithYouFilterDisplayName),key:c.TemplateListFilter.SharedWithMe}];(0,r.cloudDocsUxEnabled)()?n.filters=n.filters.concat([{displayName:m(v.dropboxFilterDisplayName),
key:c.TemplateListFilter.DropboxTemplates}]):n.filters=n.filters.concat([{displayName:null,key:null},{displayName:m(v.archivedFilterDisplayName),key:c.TemplateListFilter.Archived},{
displayName:m(v.trashedFilterDisplayName),key:c.TemplateListFilter.Trashed}]);n.state={templates:[],currentFilter:n.filters[0]};return n}t.prototype.componentDidMount=function(){
this.props.templateListStore.on("template-list-change",this.updateTemplateList);this.updateTemplateList();this.fetchFreshTemplates()};t.prototype.componentWillUnmount=function(){
this.props.templateListStore.off("template-list-change",this.updateTemplateList)};t.prototype.fetchFreshTemplates=function(){this.props.templateListStore.loadTemplateList({
filter:this.state.currentFilter.key})};t.prototype.setFilter=function(e){this.handleSortSelection(e)};t.prototype.hasLoaded=function(){return this.props.templateListStore.hasLoaded({
filter:this.state.currentFilter.key})};t.prototype.renderContents=function(){if(!this.hasLoaded())return l.createElement("div",{className:"awesome-spinner"})
;if(0==this.state.templates.length)switch(this.state.currentFilter.key){case c.TemplateListFilter.Archived:return l.createElement(p.TemplateMenuArchivedEmptyState,null)
;case c.TemplateListFilter.Trashed:return l.createElement(p.TemplateMenuTrashedEmptyState,null);case c.TemplateListFilter.OwnedByMe:return l.createElement(p.TemplateMenuOwnedByMeEmptyState,null)}
return l.createElement(h.default,{isArchived:this.state.currentFilter.key==c.TemplateListFilter.Archived,isTrashed:this.state.currentFilter.key==c.TemplateListFilter.Trashed,
templates:this.state.templates,onTemplateSelection:this.props.onTemplateSelection,onTemplateEdit:this.props.onTemplateEdit,onTemplateRestore:this.props.onTemplateRestore,
onTemplateUntrash:this.props.onTemplateUntrash,previewLoader:this.props.previewLoader,inDoc:this.props.inDoc})};t.prototype.render=function(){return l.createElement("div",{
className:"template-menu selenium-template-menu"},l.createElement("div",{className:"template-menu-header"},l.createElement(d.SortHeader,{sortOptions:this.filters,
onSortSelection:this.handleSortSelection,currentSortSelected:this.state.currentFilter,headerTitle:l.createElement(g,o.__assign({},v.templates))})),l.createElement("div",{
className:"template-menu__template-list-wrapper"},this.renderContents()),(0,r.cloudDocsUxEnabled)()?null:l.createElement(u.default,null))};t.displayName="TemplateMenu"
;return t=o.__decorate([s.default],t)}(l.Component);t.default=y},838:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.SmartDocPreviewCallout=t.DocPreviewCallout=void 0
;var o=n(1),i=n(65),r=n(30),a=n(542),s=n(11),l=n(18),d=n(23),c=n(0),u=n(161),h=function(e){o.__extends(t,e);function t(t,n){var o=e.call(this,t,n)||this;o.showPreviewDelayed=function(){o.cancelTimer()
;o.state.visible||(o.timer=o.timers.setTimeout(o.showPreview,300))};o.cancelPreview=function(e){void 0===e&&(e=200);o.cancelTimer();o.state.visible&&(o.timer=o.timers.setTimeout((function(){
o.setState({visible:!1})}),e))};o.showPreview=function(){o.setState({visible:!0})};o.cancelTimer=function(){o.timer&&clearTimeout(o.timer)};o.onMouseEnter=function(){o.cancelTimer()}
;o.onMouseLeave=function(){o.cancelPreview(800)};o.onMouseDown=function(e){o.props.onMouseDown&&o.props.onMouseDown(e.nativeEvent)};o.state={visible:!1};return o}
t.prototype.componentDidMount=function(){this.bindEventHandlers()};t.prototype.componentDidUpdate=function(e,t){e.target!=this.props.target&&this.bindEventHandlers()}
;t.prototype.bindEventHandlers=function(){var e=this;this.events.removeAll();this.events.on(this.props.target,"mouseenter",this.showPreviewDelayed)
;this.events.on(this.props.target,"highlight",this.showPreviewDelayed);this.events.on(this.props.target,"dehighlight",(function(){e.cancelPreview()}))};t.prototype.render=function(){
var e=document.getElementById("hp-doc-preview-container"),t=this.props,n=t.target,o=t.attachment,r=t.targetAttachment,s=t.localPadId,l=t.offset,d=t.previewLoader,u=this.state.visible
;return u?c.createElement(i.default,{overlay:!1,target:n,attachment:o,targetAttachment:r,offset:l,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,
springOffsetMagnitude:2,springTension:100,springFriction:12,container:e,close:!u},c.createElement(a.DocPreviewBox,{localPadId:s,previewLoader:d,targetId:n.id})):null};t.contextTypes={
stores:d.object.isRequired};t.displayName="DocPreviewCallout";return t=o.__decorate([s.default],t)}(c.PureComponent);t.DocPreviewCallout=h;var p=function(e){o.__extends(t,e);function t(t){
var n=e.call(this,t)||this;n.state={vertical:"middle",targetAttachment:n.getOppositeSide(t.attachment)};return n}t.prototype.getOppositeSide=function(e){
return"left"==e?"right":"center"==e?"center":"left"};t.prototype.componentWillUpdate=function(e){var t=parseInt(r.default.doc_preview_height,10);if(e.target){var n=(0,l.offset)(e.target).top
;n<t/2?this.setState({vertical:"top"}):n+t/2>document.documentElement.clientHeight&&this.setState({vertical:"bottom"})}};t.prototype.render=function(){
return c.createElement(u.SilentlyUnmountErrorBoundary,null,c.createElement(h,o.__assign({},this.props,{attachment:this.state.vertical+" "+this.props.attachment,
targetAttachment:this.state.vertical+" "+this.state.targetAttachment})))};t.displayName="SmartDocPreviewCallout";return t}(c.PureComponent);t.SmartDocPreviewCallout=p},839:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.HpMenuEmptyStateActionButton=void 0;var o=n(10),i=n(0);t.HpMenuEmptyStateActionButton=function(e){return i.createElement(o.default,{primary:!0,
onClick:e.onClick,className:"hp-menu-empty-state__button"},e.buttonText)}},840:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.ScrollMarksContainer=t.setScrollMarks=t.computeScrollMarks=void 0;var o=n(1),i=n(11),r=n(0),a=n(17);t.computeScrollMarks=function(e){
for(var t=[],n=e.dom.getRoot(),o=n.scrollHeight,i=n.getBoundingClientRect().top,r=0,a=[{selector:".search-match",className:"scroll-mark-search-match"
}];r<a.length;r++)for(var s=a[r],l=e.dom.getRoot().querySelectorAll(s.selector),d=0;d<l.length;d++){var c={height:100*(l[d].getBoundingClientRect().top-i)/o,className:s.className};t.push(c)}return t}
;t.setScrollMarks=function(e,t){e.observer.trigger("scroll-marks-change",t)};var s=function(e){o.__extends(t,e);function t(t){var n=e.call(this,t)||this;n.setMarks=function(e){n.setState({
scrollMarks:e})};n.state={scrollMarks:[]};return n}t.prototype.render=function(){return r.createElement(l,{scrollMarks:this.state.scrollMarks})};t.prototype.componentDidMount=function(){
this.registerHandlers()};t.prototype.componentDidUpdate=function(e){this.props.editor!==e.editor&&this.registerHandlers()};t.prototype.registerHandlers=function(){var e=this.props.editor
;e&&this.events.on(e.observer,"scroll-marks-change",this.setMarks)};t.displayName="ScrollMarksContainer";return t=o.__decorate([i.default],t)}(r.Component);t.ScrollMarksContainer=s;var l=function(e){
o.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e="undefined"!=typeof window&&window.document?a.default.scrollbarWidth():0
;return r.createElement("div",{style:{marginRight:e+"px"},className:"scroll-marks-container"},this.props.scrollMarks.map((function(e,t){return r.createElement("div",{key:t,style:{top:e.height+"%"},
className:"scroll-mark "+e.className})})))};t.displayName="ScrollMarkList";return t}(r.PureComponent)},841:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.applyFileTypeLogging=t.groupFileTypeUsingMatchers=void 0;var o=n(1),i=n(2),r=n(421),a=n(553),s=n(726),l=n(4),d=n(27),c=n(0),u=n(13),h=n(4),p=(0,n(5).PaperIntlFactory)(),f=p._f,g=p.F,m=(0,
i.defineMessages)({addDropboxFiles:{id:"1mTlDr",defaultMessage:"Add Dropbox files"},insertDropboxFiles:{id:"xJQnot",defaultMessage:"Insert Dropbox files"}});function v(e,t){
var n=Object.keys(t).reduce((function(e,t){var n;return o.__assign(o.__assign({},e),((n={})[t]=[],n))}),{});e.forEach((function(e){Object.keys(n).forEach((function(o){t[o].indexOf(e)>-1&&n[o].push(e)
}))}));return n}t.groupFileTypeUsingMatchers=v;t.applyFileTypeLogging=function(e,t){var n=v(e.map((function(e){return e.name?(0,d.parseFileExtension)(e.name).extension:null})).filter(Boolean),{
FetchPagePreviews:(0,a.getMatteSupportedExtensions)()}).FetchPagePreviews;n.length&&function(e,t,n){l.IntentionEvent.InsertFetch.track({count:e.length,context:n,type:t,
file_ext:1==e.length?e[0]:JSON.stringify(e)})}(n,"Page Preview",t)};var y=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.insertDropbox=function(){
var e=t.props.editor;(0,h.trackUi)("fetch-pocket-inserted",{});e.media.insertMedia([{type:"media-insert",url:(0,r.getInsertEmbedUrlFromEmbedName)("Dropbox")}]);(0,
l.trackAce)("dropbox-insert-embed-added")};return t}t.prototype.getTrackContext=function(){};t.prototype.executeAction=function(){this.insertDropbox()};t.prototype.render=function(){
var e=c.createElement(g,o.__assign({},m.insertDropboxFiles));return c.createElement(s.default,{type:"dropbox",tooltipAbove:!this.props.tooltipBelow,
className:"insert-dropbox-embedd-toolbar-callout-holder",tooltip:c.createElement("b",null,e),"aria-label":f(m.addDropboxFiles),"track-title":"insert dropbox",
onMouseOver:this.props.onMouseOver||function(){},onMouseOut:this.props.onMouseOut||function(){},onClick:this.insertDropbox,active:this.props.selected},c.createElement(u.default,{
name:this.props.customIcon||"insert-dropbox"}))};t.displayName="InsertDropbox";return t=o.__decorate([h.trackContextDecorator],t)}(c.Component);t.default=y},842:function(e,t,n){
Object.defineProperty(t,"__esModule",{value:!0});t.FileChooserPopup=void 0
;var o=n(1),i=n(6),r=n(8),a=n(40),s=n(0),l=n(602),d=n(116),c=n(2),u=n(5),h=n(50),p=n(209),f=n(407),g=n(4),m=n(88),v=n(17),y=(0,c.defineMessages)({loadingSdk:{id:"7Yx9yA",
defaultMessage:"Loading file selector..."},error:{id:"9dvdq3",defaultMessage:"Error accessing files from Dropbox"}}),b=(0,u.PaperIntlFactory)(),C=b.F,E=b._f,I=function(e){o.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={dropinSdkReady:!1};t.init=function(e){g.IntentionEvent.FileChooserOpened.track({context:t.getTrackContext()});t.chooseCallback=e
;Promise.all([(0,f.getDropboxInternalSdk)(),t.initDropinSdkAsync()]).then((function(e){var n=e[0];t.auth=n.auth;t.dropbox=n.dropbox;t.setState({dropinSdkReady:!0})})).catch((function(){(0,
h.logError)("[FileChooserPopup] Error initializing popup. One or more dependencies (Dropbox SDK / Dropin SDK) failed to load.");g.IntentionEvent.FileChooserFailedLoading.track({
context:t.getTrackContext()})}))};t.initDropinSdkAsync=function(){return l.DropinSdkLoadableLib.isLoaded()?Promise.resolve():l.DropinSdkLoadableLib.load()}
;t.getPreferredRighteousLinkForFileId=function(e){return o.__awaiter(t,void 0,Promise,(function(){var t,n,r,a,s;return o.__generator(this,(function(o){switch(o.label){case 0:
return[4,this.dropbox.sharingListSharedLinks({path:e})];case 1:t=o.sent();n=null===(s=t.result)||void 0===s?void 0:s.links;r=n.filter((function(e){return e.url.indexOf("rlkey=")>-1}))
;a=i.keyBy(r,(function(e){var t;return null===(t=e.link_permissions.link_access_level)||void 0===t?void 0:t[".tag"]}));return a.viewer?[2,a.viewer]:a.editor?[2,a.editor]:[2,null]}}))}))}
;t.getPreviewLinkForFileId=function(e){return o.__awaiter(t,void 0,Promise,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:
return[4,this.dropbox.sharingAlphaGetFileMetadataBatch({files:[e]}).then((function(e){return e.result[0].result}))];case 1:return[2,t.sent()]}}))}))};t.getFolderMetadataForFolderId=function(e){
return o.__awaiter(t,void 0,Promise,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.dropbox.sharingCreateSharedLinkWithSettings({path:e}).then((function(t){
return{id:e,preview_url:t.result.url}}),(function(t){var n,o;if(409===t.status&&(null===(o=null===(n=t.error)||void 0===n?void 0:n.error)||void 0===o?void 0:o.shared_link_already_exists))return{id:e,
preview_url:t.error.error.shared_link_already_exists.metadata.url};throw t}))];case 1:return[2,t.sent()]}}))}))};t.choose=function(e){return o.__awaiter(t,void 0,void 0,(function(){
var t,n,r,a,l,d,c,u,p,f=this;return o.__generator(this,(function(b){switch(b.label){case 0:t=this.props.preferRighteousLinks;g.IntentionEvent.FileChooserFilesSelected.track({numFiles:e.length})
;b.label=1;case 1:b.trys.push([1,3,,4]);return[4,Promise.all([t?Promise.all(e.map((function(e){return f.getPreferredRighteousLinkForFileId(e.id)}))):[],Promise.all(e.map((function(e){
return e.isDir?f.getFolderMetadataForFolderId(e.id):f.getPreviewLinkForFileId(e.id)})))])];case 2:n=b.sent(),r=n[0],a=n[1];l=i.keyBy((null!=r?r:[]).filter(v.default.notEmpty),(function(e){return e.id
}));d=i.keyBy(a.filter(v.default.notEmpty),(function(e){return e.id}));c=e.map((function(e){var t,n,i;return o.__assign(o.__assign({},e),{
link:null!==(n=null===(t=l[e.id])||void 0===t?void 0:t.url)&&void 0!==n?n:null===(i=d[e.id])||void 0===i?void 0:i.preview_url})}));g.IntentionEvent.FileChooserActionSuccess.track({
context:this.getTrackContext()});null===(p=this.chooseCallback)||void 0===p||p.call(this,c);return[3,4];case 3:u=b.sent();m.Snackbar.fail(s.createElement(C,o.__assign({},y.error)))
;g.IntentionEvent.FileChooserActionError.track({context:this.getTrackContext()});(0,h.logError)("[FileChooserPopup] Error fetching files metadata",void 0,void 0,void 0,void 0,void 0,u);return[3,4]
;case 4:return[2]}}))}))};t.handleModalClose=function(){g.IntentionEvent.FileChooserClosed.track({context:t.getTrackContext()})};return t}t.prototype.getTrackContext=function(){}
;t.prototype.render=function(){var e,t=this,n=l.DropinSdkLoadableLib.get();return s.createElement(p.DigModalWrapper,{ref:function(e){return t.panel=e},panelId:this.props.altPanelId||"filechooser",
isCentered:!0,onOpen:this.init,onClose:this.handleModalClose},n?s.createElement(n.DefaultChooser,o.__assign({className:"notranslate",auth:this.auth,fileSelect:!0,folderSelect:!1,multiSelect:!0,
showCreateFolder:!1,onCancel:null===(e=this.panel)||void 0===e?void 0:e.closePanel,locale:r.default.userLocale,onSubmit:function(e){return o.__awaiter(t,void 0,void 0,(function(){var t
;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.choose(e)];case 1:n.sent();null===(t=this.panel)||void 0===t||t.closePanel();return[2]}}))}))}
},this.props)):s.createElement(d.Spinner,{"aria-valuetext":E(y.loadingSdk)}))};t.displayName="FileChooserPopup";return t=o.__decorate([a.default,g.trackContextDecorator],t)}(s.Component)
;t.FileChooserPopup=I},843:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.PaperMoveIntoBinderModal=void 0
;var o=n(1),i=n(140),r=n(2),a=n(4),s=n(0),l=n(23),d=n(11),c=n(4),u=n(108),h=n(21),p=n(5),f=n(88),g=n(7),m=n(206),v=n(209),y=(0,p.PaperIntlFactory)(),b=y.F,C=y._f,E=(0,r.defineMessages)({
moveIntoBinderButton:{id:"VadaD6",defaultMessage:"Move into Binder"},moveIntoBinderTitle:{id:"LDZ1Y3",defaultMessage:"Move doc into binder?"},moveIntoBinderMessage:{id:"FunReX",
defaultMessage:"Moving this doc into a binder will remove it from the filesystem. Links to the old file will redirect to the doc within the binder. Any user who has access to the binder will have access to the doc. Users who only have access to the old file, but no access to the binder will need to request access to the binder."
},cancel:{id:"Fzr4Pc",defaultMessage:"Cancel"},moveDoc:{id:"IyFOrb",defaultMessage:"Move Doc"},moveFailed:{id:"DsJSQw",defaultMessage:"Failed to move doc."},closeSnackbar:{id:"ut54Wp",
defaultMessage:"Close"}}),I=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.modal=s.createRef();t.state={isWaiting:!1,fileId:null,filename:null}
;t.onOpen=function(e){var n=e(),o=n.fileId,i=n.filename;t.setState({isWaiting:!1,fileId:o,filename:i})};t.onClose=function(){t.setState({fileId:null,filename:null})};t.move=function(){
return o.__awaiter(t,void 0,void 0,(function(){var e,t,n,i,r=this;return o.__generator(this,(function(o){switch(o.label){case 0:this.setState({isWaiting:!0});e=this.state.fileId
;t=this.props.padController.getPadId();n=function(){var e;null===(e=r.modal.current)||void 0===e||e.closePanel();f.Snackbar.show(s.createElement(f.Snackbar,{className:"notranslate",
title:C(E.moveFailed),variant:"fail",closeButtonText:C(E.closeSnackbar),timeoutDelayMs:5e3}))};if(!e)return[3,4];o.label=1;case 1:o.trys.push([1,3,,4]);return[4,(0,
m.moveDocIntoBinder)(g.FileIdType.DropboxFileId,e,g.FileIdType.LocalPadId,t)];case 2:(i=o.sent()).error?n():window.location.replace(i.redirectUrl);return[3,4];case 3:o.sent();n();return[3,4];case 4:
return[2]}}))}))};return t}t.prototype.render=function(){var e,t=this.state.isWaiting;return s.createElement(c.TrackContext,{trackContext:c.AppContext.ConfirmMoveDialog
},s.createElement(v.DigModalWrapper,{ref:this.modal,panelId:"papermoveintobinder",onOpen:this.onOpen,onClose:this.onClose,withCloseButton:t?void 0:C(E.cancel),shouldCloseOnOverlayClick:!t
},s.createElement(u.Modal.Content,null,s.createElement(u.Modal.Header,{hasBottomSpacing:"title-standard"},s.createElement(u.Modal.Title,{size:"small"
},s.createElement(b,o.__assign({},E.moveIntoBinderTitle)))),s.createElement(u.Modal.Body,null,s.createElement(b,o.__assign({},E.moveIntoBinderMessage))),s.createElement(u.Modal.Footer,null,s.createElement(h.default,{
variant:"opacity",onClick:null===(e=this.modal.current)||void 0===e?void 0:e.closePanel,key:"move-doc-into-binder-cancel-button",disabled:t
},s.createElement(b,o.__assign({},E.cancel))),s.createElement(h.default,{isLoading:t,variant:"primary",onClick:this.move,key:"move-doc-into-binder-confirm-button"
},s.createElement(b,o.__assign({},E.moveDoc)))))))};t.contextTypes={panels:l.object};t.displayName="PaperMoveIntoBinderModal";return t=o.__decorate([d.default],t)}(s.Component)
;t.PaperMoveIntoBinderModal=I;var _=function(e){o.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.chooserSuccessHandler=function(e){
if(1!=e.length)throw new Error("incorrect number of files");var n=e[0],o=n.id,i=n.name;if(!o)throw new Error("invalid fileId");t.context.panels.open("papermoveintobinder",(function(){return{fileId:o,
filename:i}}))};return t}t.prototype.render=function(){var e=this;return s.createElement(s.Fragment,null,s.createElement(i.default,{onClick:function(){
e.context.panels.open("binderchooser",e.chooserSuccessHandler)},disabled:this.props.disabled},s.createElement(b,o.__assign({},E.moveIntoBinderButton))))};t.contextTypes={panels:l.object}
;t.displayName="MovePadIntoBinderButton";return t=o.__decorate([a.trackContextDecorator],t)}(s.Component);t.default=_},88:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})
;t.Snackbar=t.SNACKBAR_MESSAGES=t.SnackbarAction=void 0;var o=n(1),i=n(24),r=n(33),a=n(15),s=n(8),l=n(14),d=n(44),c=n(4),u=n(116),h=n(0),p=n(36),f=n(448);Object.defineProperty(t,"SnackbarAction",{
enumerable:!0,get:function(){return f.SnackbarAction}});var g=n(188),m=n(16),v=(0,l.MsgFactory)("snackbar"),y=v.defineMessages,b=v.F;t.SNACKBAR_MESSAGES=y({close:{msg:"Close"}});var C=function(e){
o.__extends(n,e);function n(t){var o=e.call(this,t)||this;o.handleActionClick=function(e){(0,c.trackUi)("Click Snackbar",{context:c.AppContext.App,title:o.props["track-title"]||(0,
c.findTrackContextInChildren)(o.props.children)});var t=o.props.onActionClick;t&&t(e)};o.handleCloseClick=function(){(0,c.trackUi)("Close Snackbar",{context:c.AppContext.App,
title:o.props["track-title"]||(0,c.findTrackContextInChildren)(o.props.children)});var e=o.props.onCloseClick;n.close();e&&e()};o.handleTimeout=function(){var e=o.props.onTimeout;n.close();e&&e()}
;o.state={progress:0};return o}n.show=function(e){(0,c.trackUi)("Show Snackbar",{context:c.AppContext.App,title:e.props["track-title"]||(0,c.findTrackContextInChildren)(e.props.children)})
;var t=n.getOrCreateContainer();n.close();return p.reactDomRender(e,t)};n.update=function(e){var t=n.getOrCreateContainer();return p.reactDomRender(e,t)};n.prototype.componentDidMount=function(){
var e=this,t=this.props,o=t.syncProgressLoop,i=t.timeoutDelayMs;i&&(this.timer=(0,d.realSetTimeout)((function(){e.handleTimeout()}),i))
;o&&(this.progressLoop=null===d.realSetInterval||void 0===d.realSetInterval?void 0:(0,d.realSetInterval)((function(){e.setState({progress:(e.state.progress+n.LOOP_UPDATE_STEP)%(n.MAX_PROGRESS+1)})
}),n.LOOP_UPDATE_RATE));this.props.onShown&&this.props.onShown()};n.prototype.componentDidUpdate=function(e,t){e.onClosed&&e.onClosed();this.props.onShown&&this.props.onShown()}
;n.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer);this.progressLoop&&clearInterval(this.progressLoop);this.props.onClosed&&this.props.onClosed()};n.close=function(){
var e=n.getOrCreateContainer();i.unmountComponentAtNode(e)};n.generic=function(e){return n.show(h.createElement(t.Snackbar,{closeButtonText:h.createElement(b,o.__assign({},t.SNACKBAR_MESSAGES.close)),
timeoutDelayMs:5e3,title:e,variant:"generic"}))};n.sync=function(e,o){return n.show(h.createElement(t.Snackbar,{syncProgressLoop:o,title:e,variant:"sync"}))};n.complete=function(e){
return n.show(h.createElement(t.Snackbar,{closeButtonText:h.createElement(b,o.__assign({},t.SNACKBAR_MESSAGES.close)),timeoutDelayMs:5e3,title:e,variant:"complete"}))};n.warn=function(e){
return n.show(h.createElement(t.Snackbar,{closeButtonText:h.createElement(b,o.__assign({},t.SNACKBAR_MESSAGES.close)),timeoutDelayMs:5e3,title:e,variant:"warn"}))};n.fail=function(e){
return n.show(h.createElement(t.Snackbar,{closeButtonText:h.createElement(b,o.__assign({},t.SNACKBAR_MESSAGES.close)),timeoutDelayMs:5e3,title:e,variant:"fail"}))};n.getOrCreateContainer=function(){
var e=document.getElementById(n.SNACKBAR_ROOT_ID);if(!e){(e=document.createElement("div")).id=n.SNACKBAR_ROOT_ID;document.body.insertBefore(e,document.body.firstChild)}return e}
;n.prototype.render=function(){var e=this.props,t=e.className,n=e.title,o=e.variant,i=e.actionButtonText,d=e.closeButtonText,c=e.externalProgress||this.state.progress,p=null;switch(o){case"sync":
p=h.createElement(u.Spinner,{"aria-valuetext":"Loading",size:"small",inverse:!0});break;case"complete":p=h.createElement(m.UIIcon,{src:a.CheckmarkCircleLine});break;case"warn":
p=h.createElement(m.UIIcon,{src:a.WarningLine});break;case"fail":p=h.createElement(m.UIIcon,{src:a.FailLine})}return h.createElement(l.IntlProvider,{locale:s.default.userLocale
},h.createElement(g.Snackbar,{open:!0,className:t},p,h.createElement(g.Snackbar.Message,null,n),c>0&&h.createElement(g.Snackbar.ProgressBar,null,h.createElement(u.ProgressBar,{inverse:!0,value:c
})),(i||d)&&h.createElement(g.Snackbar.Actions,null,i&&h.createElement(r.Button,{variant:"transparent",inverse:!0,onClick:this.handleActionClick},i),d&&h.createElement(r.Button,{variant:"transparent",
inverse:!0,onClick:this.handleCloseClick},d)),this.props.children))};n.LOOP_UPDATE_RATE=16;n.LOOP_UPDATE_STEP=.2;n.MAX_PROGRESS=100;n.SNACKBAR_ROOT_ID="react-snackbar-root"
;n.snackbarTypes=["generic","sync","complete","warn","fail"];n.defaultProps={syncProgressLoop:!1};n.displayName="SnackbarComponent";return n}(h.Component);t.Snackbar=C}}]);

//# sourceMappingURL=https://paper.dropbox.com/static/sourcemap/32874be7b01a1b3c3508.LMJs-q8gg28WgSVtUBvnxesmqlvnZkRhNiUVaoRnW5A.js.map