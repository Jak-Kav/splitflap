(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["paper_binder~paper_bundle~paper_cloud_docs~paper_native_desktop~paper_native_mobile~paper_pifs~paper~41d0f110"],{
1726:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(1),r=i(1727),a=i(8),s=i(288),l=i(11),d=i(14),u=i(43),c=i(0),h=i(24),m=i(1728),g=i(1729),p=i(150);!function(e){
e[e.LocalRequests=0]="LocalRequests";e[e.GlobalRequests=1]="GlobalRequests"}(n||(n={}));var f=function(e){o.__extends(t,e);function t(t){var i=e.call(this,t)||this;i.closePopup=function(){
var e=h.findDOMNode(i).parentElement;h.unmountComponentAtNode(e);s.remove(e)};i.onTabSelected=function(e){e==n.GlobalRequests&&i.props.debugInfoStore.fetchRecentProfiles();i.setState({tab:e})}
;i.openRequestProfile=function(e){i.props.debugInfoStore.getFullProfile(e,(function(e){i.setState({currentProfile:e})}))};i.state={tab:n.LocalRequests};return i}
t.prototype.componentDidMount=function(){var e=this,t=this.props.debugInfoStore.getRequestProfiles()[0];t&&this.openRequestProfile(t);this.props.debugInfoStore.fetchRecentProfiles()
;this.events.on(document,"keydown",(function(t){t.which==u.KeyCode.ESCAPE&&e.closePopup()}))};t.prototype.render=function(){return c.createElement(d.IntlProvider,{locale:a.default.userLocale
},c.createElement("div",{className:"hp-perf-popup notranslate"},c.createElement("div",{className:"hp-perf-popup-left"},c.createElement("h2",null,"CSI"),c.createElement(r.default,{
csiData:this.props.csiData}),c.createElement("div",{className:"hp-perf-popup-tabs"},c.createElement(p.default,{onChange:this.onTabSelected,selected:this.state.tab,value:n.LocalRequests,isDefault:!0
},c.createElement("h2",null,"Local requests")),c.createElement(p.default,{onChange:this.onTabSelected,selected:this.state.tab,value:n.GlobalRequests
},c.createElement("h2",null,"Global requests"))),this.state.tab==n.LocalRequests&&c.createElement(g.default,{profiles:this.props.debugInfoStore.getRequestProfiles(),
openRequestProfile:this.openRequestProfile}),this.state.tab==n.GlobalRequests&&c.createElement(g.default,{profiles:this.props.debugInfoStore.getRecentRequestProfiles(),
openRequestProfile:this.openRequestProfile}),c.createElement("div",{onClick:this.closePopup},this.props.perfCloseButton)),c.createElement("div",{className:"hp-perf-popup-right"
},this.state.currentProfile?c.createElement(m.default,{profile:this.state.currentProfile}):null)))};t.displayName="PerfPopup";return t=o.__decorate([l.default],t)}(c.PureComponent);t.default=f},
1727:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(6),r=i(0),a=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={
isExpanded:!1};return t}t.prototype.render=function(){var e=this,t=this.props.csiData,i=[],n=0;for(var a in t){var l=t[a],d=Math.round(l-0);n=Math.max(d,n);i.push({name:a,value:d})}
i=o.sortBy(i,(function(e){return e.value}));this.state.isExpanded||(i=i.filter((function(e){return!e.name.match(/^(before|after)-/)})));var u=(i=i.filter((function(e,t){
return"timeToView"==e.name||"timeToInteractive"==e.name||0==t&&e.value>1||t>0&&Math.abs(e.value-i[t-1].value)>1}))).map((function(t,o){return r.createElement(s,{key:t.name,prevTick:i[o-1],tick:t,
maxTick:n,isExpanded:e.state.isExpanded})}));return r.createElement("div",null,r.createElement("a",{className:"hp-perf-csi-expanded",onClick:function(){return e.setState({
isExpanded:!e.state.isExpanded})}},"Expand"),r.createElement("ul",{className:"hp-perf-csi-ticks"},u))};t.displayName="CsiTickList";return t}(r.PureComponent);t.default=a;var s=function(e){
n.__extends(t,e);function t(t){return e.call(this,t)||this}t.prototype.render=function(){
var e=this.props.tick,t=this.props.prevTick?this.props.prevTick.value:0,i=Math.floor(100*(e.value-t)/this.props.maxTick),n={marginLeft:Math.floor(100*t/this.props.maxTick)+"%",width:i<1?"1px":i+"%"}
;return r.createElement("li",null,r.createElement("span",{className:"hp-editor-csi-cell"
},"timeToView"==e.name||"timeToInteractive"==e.name?r.createElement("strong",null,e.name):e.name),r.createElement("span",{className:"hp-editor-csi-cell"
},e.value,"ms"),this.props.isExpanded?r.createElement("span",{className:"hp-editor-csi-cell"},e.value-t,"ms"):null,r.createElement("span",{className:"hp-editor-csi-cell"},r.createElement("span",{
className:"hp-editor-csi-graph-container"},r.createElement("span",{style:n,className:"hp-editor-csi-graph"},"Â "))))};t.displayName="TickRow";return t}(r.PureComponent)},1728:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(118),r=i(0),a=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
var e=this.props.profile,t=e.fullProfile,i=e.partialProfile;if(!t)return null;var n=t[0];if(!n)return null;var a=0,l=0;t.forEach((function(e){
e.type.indexOf("mysql")>=0?a++:e.type.indexOf("redis")>=0&&l++}))
;var d=n.meta||{},u=n.meta.redirectLocation?r.createElement("h3",null,this.props.profile.url," ","->"," ",d.redirectLocation," (",d.statusCode,")"):r.createElement("h3",null,this.props.profile.url," (",d.statusCode,")"),c=n.start?Math.floor(n.start/o.NsTime.MILLISECOND):this.props.profile.clientStartTimeMs
;return r.createElement("div",null,u,r.createElement("div",null,r.createElement("strong",null,"Rtt: "),r.createElement("span",null,this.props.profile.rtt,"ms")),r.createElement("div",null,r.createElement("strong",null,"Total Server Time: "),r.createElement("span",null,i.totalTimeMs,"ms")),r.createElement("div",null,r.createElement("strong",null,"Total Server CPU Time: "),r.createElement("span",null,i.totalCpuTimeMs,"ms")),r.createElement("div",null,r.createElement("strong",null,"Num Sql Queries: "),r.createElement("span",null,a)),r.createElement("div",null,r.createElement("strong",null,"Num Redis Queries: "),r.createElement("span",null,l)),r.createElement("div",null,r.createElement("strong",null,"Num Stormcrow RPCs: "),r.createElement("span",null,d.numStormcrowCalls||0)),r.createElement("div",null,r.createElement("strong",null,"Start Time: "),r.createElement("span",null,new Date(c).toLocaleString())),r.createElement("h3",null,"All spans"),r.createElement(s,{
spans:t,startTime:c,totalMs:i.totalTimeMs,key:"sorted"}))};t.displayName="RequestProfile";return t}(r.PureComponent);t.default=a;var s=function(e){n.__extends(t,e);function t(){
return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this,t=[];return r.createElement("table",{className:"hp-debug-profiling-table"
},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Type"),r.createElement("th",null,"Time"),r.createElement("th",null,"Duration"),r.createElement("th",null,"Label"))),r.createElement("tbody",null,this.props.spans.map((function(i,n){
for(;t.length>0;){if(t[t.length-1]==i.parent_id)break;t.pop()}var o=t.length;t.push(i.span_id);return r.createElement(l,{startTime:e.props.startTime,totalMs:e.props.totalMs,span:i,depth:o,
key:"tick-row-"+n})}))))};t.displayName="ProfileTickTable";return t}(r.Component),l=function(e){n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}
t.prototype.render=function(){
var e=this.props.span,t=Math.floor(e.duration/o.NsTime.MILLISECOND),i=Math.floor(e.start/o.NsTime.MILLISECOND)-this.props.startTime,n=Math.ceil(t/this.props.totalMs*100),a={
paddingLeft:"".concat(20*this.props.depth,"px")};if(e.type.indexOf("mysql")>=0)return r.createElement("tr",null,r.createElement("td",{className:"hp-debug-popup-row-sql"
},e.type),r.createElement("td",null,"@",i,"ms"),r.createElement("td",null,r.createElement("div",{style:{width:n+"%",backgroundColor:"#abd9e9"}},t,"ms ",e.meta.numRows,"rows")),r.createElement("td",{
style:a,className:"hp-debug-sql"},e.meta["mysql.query"].replace(/(\?,){4,}/g,"?,?,?,...")));if(e.type.indexOf("redis")>=0){var s=Math.ceil(t/this.props.totalMs*100)
;return r.createElement("tr",null,r.createElement("td",{className:"hp-debug-popup-row-redis"},"Redis"),r.createElement("td",null,"@",i,"ms"),r.createElement("td",null,r.createElement("div",{style:{
width:s+"%",backgroundColor:"#abd9e9"}},t,"ms")),r.createElement("td",{style:a},e.meta["redis.command"]," (",e.meta.keyPrefix,")"))}return r.createElement("tr",null,r.createElement("td",{
className:"hp-debug-popup-row-tick"},e.type),r.createElement("td",null,"@",i,"ms"),r.createElement("td",null,r.createElement("div",{style:{width:n+"%",backgroundColor:this.colorForPercent(n)}
},t,"ms")),r.createElement("td",{style:a},e.resource))};t.prototype.colorForPercent=function(e){return e>=50?"#d7191c":e>=20?"#fdae61":"#a6d96a"};t.displayName="ProfileTickRow";return t
}(r.PureComponent)},1729:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(6),r=i(47),a=i(0),s=i(84),l=function(e){n.__extends(t,e);function t(){
return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this,t=o.max(this.props.profiles.map((function(e){return e.rtt})).concat(this.props.profiles.map((function(e){
return e.partialProfile.totalTimeMs})))),i=[];this.props.profiles.forEach((function(n){var o=n.url||r.default.pathname,l=o.indexOf("/log/")>=0?"hp-perf-unimportant":"",u=n.partialProfile.id
;i.push(a.createElement("tr",{key:u+"-heading",onClick:function(){return e.props.openRequestProfile(n)}},a.createElement("td",{colSpan:3},a.createElement("h4",{className:l
},o," - ",a.createElement(s.TimeAgo,{date:n.partialProfile.serverStartTimeMs})))));i.push(a.createElement(d,{key:u+"-profile-bars",profileInfo:n,maxRtt:t,openRequestProfile:e.props.openRequestProfile
}))}));return a.createElement("table",{className:"hp-debug-profile"},a.createElement("tbody",null,i))};t.displayName="RequestProfileList";return t}(a.PureComponent);t.default=l;var d=function(e){
n.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this,t=this.props.profileInfo.url||r.default.pathname,i=function(t){
return t/e.props.maxRtt*100+"%"},n=this.props.profileInfo.rtt,o=this.props.profileInfo.partialProfile.totalTimeMs,s={width:i(o)},l={width:n?i(n-o):0};return a.createElement("tr",{
key:String(this.props.profileInfo.partialProfile.id)+"-bars",onClick:function(){return e.props.openRequestProfile(e.props.profileInfo)},className:t.indexOf("/log/")>=0?"hp-perf-unimportant":""
},a.createElement("td",{className:"hp-debug-profile-bars",colSpan:3},a.createElement("div",{className:"hp-debug-profiling-bar hp-debug-server-bar",title:"time spent on server side",style:s
},o,"ms"),a.createElement("div",{className:"hp-debug-profiling-bar hp-debug-client-bar",title:"time spent on network and client side",style:l},n?n-o+"ms":"")))};t.displayName="RequestProfileBarsRow"
;return t}(a.PureComponent)},1801:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.async=t.wait=void 0;function i(e){return new Promise((function(t,i){setTimeout(t,e)}))}t.wait=i
;t.async=function(){return i(0)}},1806:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;t.HighlightTableSelectionCommand=t.SetCodeLanguage=t.TogglePlaceholderCommand=t.RemoveTableSelectionHighlightCommand=t.ToggleTableRowHeaderCommand=t.ToggleTableColumnHeaderCommand=t.DeleteTableSelectionCommand=t.DeleteTimelineCommand=t.RemoveLinkTextCommand=t.CreateLinkTextCommand=t.RemoveFormattingCommand=t.RemoveTextHighlightCommand=t.HighlightTextCommand=t.ToggleNumberListCommand=t.ToggleBulletListCommand=t.ToggleToDoListCommand=t.ToggleQuoteCommand=t.ToggleCodeCommand=t.ToggleH3Command=t.ToggleH2Command=t.ToggleH1Command=t.ToggleStrikethroughCommand=t.ToggleUnderlineCommand=t.ToggleItalicCommand=t.ToggleBoldCommand=void 0
;var n=i(1),o=i(42),r=i(20),a=i(47),s=i(5),l=i(111),d=i(232),u=i(75),c=i(4),h=i(2),m=i(86),g=i(223),p=(0,s.PaperIntlFactory)()._f,f=(0,h.defineMessages)({toggleBold:{id:"ua25hi",
defaultMessage:"Toggle bold"},toggleItalic:{id:"P/THpz",defaultMessage:"Toggle italic"},toggleUnderline:{id:"5gLs3c",defaultMessage:"Toggle underline"},toggleStrikethrough:{id:"MHoQW7",
defaultMessage:"Toggle strikethrough"},toggleH1:{id:"fQBrCg",defaultMessage:"Toggle large header"},toggleH2:{id:"ijqyPa",defaultMessage:"Toggle medium header"},toggleH3:{id:"opPM5K",
defaultMessage:"Toggle small header"},toggleQuote:{id:"lnI/ng",defaultMessage:"Toggle blockquote"},toggleCode:{id:"SB+Zxi",defaultMessage:"Toggle code block"},toggleTodo:{id:"lqHc/V",
defaultMessage:"Toggle to-do list"},toggleBulletList:{id:"BxzIfo",defaultMessage:"Toggle bulleted list"},toggleNumberList:{id:"4aZKIL",defaultMessage:"Toggle numbered list"},highlightText:{
id:"QyplIi",defaultMessage:"Set highlight color"},selectColor:{id:"KWrWQQ",defaultMessage:"Select colorâ¦"},removeHighlightText:{id:"IZFKks",defaultMessage:"Remove highlight"},removeFormatting:{
id:"7M6lTW",defaultMessage:"Remove formatting"},createLinkText:{id:"fCuKS6",defaultMessage:"Create link"},removeLinkText:{id:"5LK7kK",defaultMessage:"Remove link"},deleteTableSection:{id:"757TJ3",
defaultMessage:"Delete table section"},deleteTimeline:{id:"SgHWow",defaultMessage:"Delete timeline"},tableHighlightColor:{id:"0qam3d",defaultMessage:"Set table highlight color"},
highlightTableSelection:{id:"qr9E2w",defaultMessage:"Change table selection color"},toggleTableRowHeader:{id:"E1yTwX",defaultMessage:"Toggle table row header"},toggleTableColumnHeader:{id:"xdhw/p",
defaultMessage:"Toggle table column header"},removeTableSelectionHighlight:{id:"6dGNAP",defaultMessage:"Remove table selection highlight"},togglePlaceholder:{id:"R3GO9P",
defaultMessage:"Toggle placeholder"},setCodeLanguage:{id:"R9p6jk",defaultMessage:"Set code syntax"}}),v=(0,h.defineMessages)({format:{id:"870Tel",defaultMessage:"Format"},h1:{id:"iR17+W",
defaultMessage:"Toggle H1"},h2:{id:"l6llZi",defaultMessage:"Toggle H2"},h3:{id:"rX72oD",defaultMessage:"Toggle H3"},insert:{id:"suF791",defaultMessage:"Insert"},task:{id:"tjl+vL",defaultMessage:"Task"
},checklist:{id:"3mLyim",defaultMessage:"Checklist"},orderedList:{id:"ctDioR",defaultMessage:"Toggle ordered list"},unhighlightText:{id:"XEs3e9",defaultMessage:"Unhighlight"},floatImage:{id:"ZpCUFQ",
defaultMessage:"Float image"}}),b=(0,h.defineMessages)({noColorError:{id:"oLAC5e",defaultMessage:"Please provide a color"},invalidColorError:{id:"ACsqvE",defaultMessage:"Please provide a valid color"
},noHighlightColor:{id:"MSKkCC",defaultMessage:"Please provide a table highlight color"},invalidHighlightColor:{id:"BzBTMV",defaultMessage:"Please provide a valid table highlight color"},noLinkError:{
id:"drU5Qv",defaultMessage:"Please provide a link"},invalidLinkError:{id:"mzW0u6",defaultMessage:"Please provide a valid link"},invalidHighlightIndex:{id:"9XWwUB",
defaultMessage:"Please provide a valid selection index"},noHighlightIndex:{id:"3ZnZZP",defaultMessage:"Please provide a selection index"},noCodeLanguageError:{id:"QT1Qux",
defaultMessage:"Please provide a code language"}}),y=function(){function e(e){this.editor=e;this.id="toggle_bold";this.label=p(f.toggleBold);this.icon={type:"dig",icon:"BoldLine"}
;this.hotkey=u.FormattingHotkeys.Bold;this.keywords=[p(v.format)];this.track={event:c.IntentionEvent.FormatText,type:"bold"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),
canEdit:(0,l.equals)("true"),selection:(0,l.or)((0,l.contains)("range"),(0,l.contains)("caret")),isTitle:(0,l.not)("true")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_bold",(function(){
e.editor.contents.toggleAttributeOnSelection("bold")}));return[2,{success:!0}]}))}))};return e}();t.ToggleBoldCommand=y;var C=function(){function e(e){this.editor=e;this.id="toggle_italic"
;this.label=p(f.toggleItalic);this.icon={type:"dig",icon:"ItalicLine"};this.hotkey=u.FormattingHotkeys.Italics;this.keywords=[p(v.format)];this.track={event:c.IntentionEvent.FormatText,type:"italic"}
;this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.or)((0,l.contains)("range"),(0,l.contains)("caret")),isTitle:(0,l.not)("true")})}
e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_italic",(function(){
e.editor.contents.toggleAttributeOnSelection("italic")}));return[2,{success:!0}]}))}))};return e}();t.ToggleItalicCommand=C;var _=function(){function e(e){this.editor=e;this.id="toggle_underline"
;this.label=p(f.toggleUnderline);this.icon={type:"dig",icon:"UnderlineLine"};this.hotkey=u.FormattingHotkeys.Underline;this.keywords=[p(v.format)];this.track={event:c.IntentionEvent.FormatText,
type:"underline"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.or)((0,l.contains)("range"),(0,l.contains)("caret")),isTitle:(0,
l.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_toggle_underline",(function(){e.editor.contents.toggleAttributeOnSelection("underline")}));return[2,{success:!0}]}))}))};return e}();t.ToggleUnderlineCommand=_
;var T=function(){function e(e){this.editor=e;this.id="toggle_strikethrough";this.label=p(f.toggleStrikethrough);this.icon={type:"dig",icon:"StrikethroughLine"}
;this.hotkey=u.FormattingHotkeys.Strikethrough;this.keywords=[p(v.format)];this.track={event:c.IntentionEvent.FormatText,type:"strikethrough"};this.available=(0,l.buildPredicate)({editorFocused:(0,
l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.or)((0,l.contains)("range"),(0,l.contains)("caret")),isTitle:(0,l.not)("true")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_strikethrough",(function(){
e.editor.contents.toggleAttributeOnSelection("strikethrough")}));return[2,{success:!0}]}))}))};return e}();t.ToggleStrikethroughCommand=T;var P=function(){function e(e){this.editor=e
;this.id="toggle_h1";this.label=p(f.toggleH1);this.icon={type:"dig",icon:"H1Line"};this.keywords=[p(v.format),p(v.h1),"/h1"];this.track={event:c.IntentionEvent.FormatText,type:"h1"};this.available=(0,
l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),isTitle:(0,l.not)("true"),selectedRepFeatures:(0,l.contains)("headers")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_h1",(function(){
var t=e.editor.contents.getLineType(new r.Position(e.editor.selection.getZone(),e.editor.lists.getFirstSelectedNonEmptyLineNumber(),0));e.editor.lists.doSetHeadingLevel(0==t.indexOf("hone")?0:1)}))
;return[2,{success:!0}]}))}))};return e}();t.ToggleH1Command=P;var w=function(){function e(e){this.editor=e;this.id="toggle_h2";this.label=p(f.toggleH2);this.icon={type:"dig",icon:"H2Line"}
;this.keywords=[p(v.format),p(v.h2),"/h2"];this.track={event:c.IntentionEvent.FormatText,type:"h2"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,
l.equals)("true"),isTitle:(0,l.not)("true"),selectedRepFeatures:(0,l.contains)("headers")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this
;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_h2",(function(){
var t=e.editor.contents.getLineType(new r.Position(e.editor.selection.getZone(),e.editor.lists.getFirstSelectedNonEmptyLineNumber(),0));e.editor.lists.doSetHeadingLevel(0==t.indexOf("htwo")?0:2)}))
;return[2,{success:!0}]}))}))};return e}();t.ToggleH2Command=w;var E=function(){function e(e){this.editor=e;this.id="toggle_h3";this.label=p(f.toggleH3);this.icon={type:"dig",icon:"H3Line"}
;this.keywords=[p(v.format),p(v.h3),"/h3"];this.track={event:c.IntentionEvent.FormatText,type:"h3"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,
l.equals)("true"),isTitle:(0,l.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_toggle_h3",(function(){
var t=e.editor.getRep(e.editor.selection.getZone()).lines.atIndex(e.editor.lists.getFirstSelectedNonEmptyLineNumber()),i=t&&t.domInfo&&t.domInfo.allBold;e.editor.lists.doSetHeadingLevel(i?0:3)}))
;return[2,{success:!0}]}))}))};return e}();t.ToggleH3Command=E;var k=function(){function e(e){this.editor=e;this.id="toggle_code";this.label=p(f.toggleCode)
;this.keywords=[p(v.format),p(v.insert),"/code"];this.track={event:c.IntentionEvent.FormatText,type:"code"};this.icon={type:"dig",icon:"CodeLine"};this.available=(0,l.buildPredicate)({
editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),isTitle:(0,l.not)("true"),selection:(0,l.not)("isTableCellZone")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_code",(function(){e.editor.lists.doInsertCodeList()}))
;return[2,{success:!0}]}))}))};return e}();t.ToggleCodeCommand=k;var I=function(){function e(e){this.editor=e;this.id="toggle_quote";this.label=p(f.toggleQuote);this.keywords=[p(v.format),p(v.insert)]
;this.track={event:c.IntentionEvent.FormatText,type:"quote"};this.icon={type:"dig",icon:"BlockQuoteLine"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,
l.equals)("true"),isTitle:(0,l.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_toggle_quote",(function(){e.editor.lists.doInsertQuote()}));return[2,{success:!0}]}))}))};return e}();t.ToggleQuoteCommand=I;var S=function(){function e(e){this.editor=e
;this.id="toggle_to_do_list";this.label=p(f.toggleTodo);this.icon={type:"dig",icon:"ToDoLine"};this.keywords=[p(v.insert),p(v.checklist),p(v.task),"/todo","/to-do","/task"];this.track={
event:c.IntentionEvent.CreateTask,type:"todo"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),isTitle:(0,l.not)("true"),selectedRepFeatures:(0,
l.contains)("tasks")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_toggle_to_do_list",(function(){e.editor.lists.doInsertTaskList();e.editor.focus()}));return[2,{success:!0}]}))}))};return e}();t.ToggleToDoListCommand=S;var M=function(){
function e(e){this.editor=e;this.id="toggle_bullet_list";this.label=p(f.toggleBulletList);this.icon={type:"dig",icon:"UnorderedListLine"};this.keywords=[p(v.insert),"/bulletlist","/ul"];this.track={
event:c.IntentionEvent.CreateList,type:"bulleted list"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),isTitle:(0,l.not)("true"),
selectedRepFeatures:(0,l.contains)("bulleted")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_toggle_bullet_list",(function(){e.editor.lists.doInsertUnorderedList();e.editor.focus()}));return[2,{success:!0}]}))}))};return e}();t.ToggleBulletListCommand=M
;var x=function(){function e(e){this.editor=e;this.id="toggle_number_list";this.label=p(f.toggleNumberList);this.icon={type:"dig",icon:"OrderedListLine"}
;this.keywords=[p(v.insert),p(v.orderedList),"/numberedlist","/ol"];this.track={event:c.IntentionEvent.CreateList,type:"numbered list"};this.available=(0,l.buildPredicate)({editorFocused:(0,
l.equals)("true"),canEdit:(0,l.equals)("true"),isTitle:(0,l.not)("true"),selectedRepFeatures:(0,l.contains)("numbered")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_number_list",(function(){e.editor.lists.doInsertOrderedList();e.editor.focus()}));return[2,{success:!0}]}))}))}
;return e}();t.ToggleNumberListCommand=x;var L=function(){function e(e){this.editor=e;this.id="highlight_text";this.label=p(f.highlightText);this.icon={type:"dig",icon:"HighlightLine"};this.track={
event:c.IntentionEvent.ChangeHighlightColor};this.hotkey=u.FormattingHotkeys.Highlight;this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),
selection:(0,l.contains)("range"),isTitle:(0,l.not)("true")})}Object.defineProperty(e.prototype,"parameters",{get:function(){return[{label:p(f.selectColor),key:"textHighlightColor",type:"select",
provider:"textHighlightColors",mode:d.SelectParameterMode.Single,validator:function(e){return e&&1==e.length?m.TextHighlightColors.isAllowedColor(e[0])?{status:"ok"}:{status:"error",
error:p(b.invalidColorError)}:{status:"error",error:p(b.noColorError)}}}]},enumerable:!1,configurable:!0});e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t=this
;return n.__generator(this,(function(i){return[2,new Promise((function(i){t.editor.execute("omnibar_highlight_text",(function(){
var n=e.parameterData.textHighlightColor[0],o=m.TextHighlightColors.getAttributeForHighlight(n);t.editor.contents.setAttributeOnSelection("highlight",o);i({success:!0})}))}))]}))}))};return e}()
;t.HighlightTextCommand=L;var F=function(){function e(e){this.editor=e;this.id="remove_highlight_text";this.label=p(f.removeHighlightText);this.icon={type:"dig",icon:"FailLine"}
;this.keywords=[p(v.unhighlightText)];this.track={event:c.IntentionEvent.ChangeHighlightColor};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),
selection:(0,l.contains)("range")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_remove_highlight_text",(function(){e.editor.contents.setAttributeOnSelection("highlight","")}));return[2,{success:!0}]}))}))};return e}();t.RemoveTextHighlightCommand=F
;var D=function(){function e(e){this.editor=e;this.id="remove_formatting";this.label=p(f.removeFormatting);this.icon={type:"dig",icon:"RemoveTextFormattingLine"}
;this.hotkey=u.FormattingHotkeys.RemoveFormatting;this.track={event:c.IntentionEvent.FormatText,type:"remove formatting"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),
canEdit:(0,l.equals)("true"),selection:(0,l.contains)("range")})}e.prototype.run=function(){var e=this;return new Promise((function(t){setTimeout((function(){
e.editor.execute("omnibar_remove_formatting",(function(){e.editor.contents.removeFormatOnSelection()}));t({success:!0})}),0)}))};return e}();t.RemoveFormattingCommand=D;var A=function(){function e(e){
this.editor=e;this.id="create_link_text";this.label=p(f.createLinkText);this.icon={type:"dig",icon:"LinkLine"};this.hotkey=u.FormattingHotkeys.Link;this.available=(0,l.buildPredicate)({
editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.contains)("range"),isTitle:(0,l.not)("true")})}Object.defineProperty(e.prototype,"parameters",{get:function(){return[{
label:p(f.createLinkText),key:"createLinkUrl",type:"string",validator:function(e){return e&&1==e.length?{status:"ok"}:{status:"error",error:p(b.noLinkError)}}}]},enumerable:!1,configurable:!0})
;e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t=this;return n.__generator(this,(function(i){this.editor.execute("linkinsert",(function(){
var i=e.parameterData.createLinkUrl[0],n=t.editor.selection.getStart(),r=t.editor.selection.getEnd();i=i.trim();if((0,g.isValid)(i))i="mailto:"+i;else{
o.REGEX_PROTOCOL_OR_RELATIVE_URL.test(i)||(i="http://"+i);var s=a.default.protocol+"//"+a.default.host;0==i.indexOf(s)&&"/"!=(i=i.substring(s.length))[0]&&(i="/"+i)}
t.editor.contents.performDocumentApplyAttributesToRange(n,r,[["link",i]]);t.editor.selection.set(r)}));return[2,{success:!0,preserveFocus:!0}]}))}))};return e}();t.CreateLinkTextCommand=A
;var O=function(){function e(e){this.editor=e;this.id="remove_link_text";this.label=p(f.removeLinkText);this.icon={type:"dig",icon:"UnlinkLine"};this.available=(0,l.buildPredicate)({editorFocused:(0,
l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.contains)("range"),links:(0,l.contains)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this
;return n.__generator(this,(function(t){this.editor.execute("removeLink",(function(){var t=e.editor.selection.getStart(),i=e.editor.selection.getEnd()
;e.editor.contents.performDocumentApplyAttributesToRange(t,i,[["link",""]])}));return[2,{success:!0,preserveFocus:!0}]}))}))};return e}();t.RemoveLinkTextCommand=O;var R=function(){function e(e){
this.editor=e;this.id="delete_timeline";this.label=p(f.deleteTimeline);this.icon={type:"dig",icon:"DeleteLine"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,
l.equals)("true"),lineManagers:(0,l.contains)("timeline")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t;return n.__generator(this,(function(i){
if(!(e=this.editor.getCurrentLineEntry()))return[2,{success:!1}];(t=this.editor.managers.lineManagerForLine(e,"timeline"))&&t.destroy();return[2,{success:!0}]}))}))};return e}()
;t.DeleteTimelineCommand=R;var N=function(){function e(e){this.editor=e;this.id="delete_table_selection";this.label=p(f.deleteTableSection);this.icon={type:"dig",icon:"DeleteLine"};this.available=(0,
l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.contains)("isTableCellZone")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_delete_table",(function(){
e.editor.managers.getLineManagerWithSpecialSelection().deleteSelection()}));return[2,{success:!0}]}))}))};return e}();t.DeleteTableSelectionCommand=N;var q=(0,l.buildPredicate)({editorFocused:(0,
l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.contains)("isTableCellZone")}),H=(0,l.buildPredicate)({entireTableSelected:(0,l.equals)("true")}),U=(0,l.buildPredicate)({
selectedTableRows:(0,l.equals)("0")}),B=(0,l.buildPredicate)({selectedTableCols:(0,l.equals)("0")}),V=(0,l.buildPredicate)({isTableRowHeaderOn:(0,l.equals)("true")}),j=(0,l.buildPredicate)({
isTableColumnHeaderOn:(0,l.equals)("true")}),W=function(){function e(e){this.editor=e;this.id="toggle_table_column_header";this.label=p(f.toggleTableColumnHeader);this.icon={type:"dig",
icon:"TableHeaderColumnLine"};this.available=function(e){return!(!q(e)||!B(e))&&(!!j(e)||!H(e))}}e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var e,t
;return n.__generator(this,(function(i){e=this.editor.managers.getLineManagerWithSpecialSelection();if(!(e&&e.getWhollySelectedRegions()))return[2,{success:!1}]
;!(t=e.hasSideHeader())&&e.getHighlightForSelection(!1,[0])&&e.setHighlightColor(!1,[0],void 0);e.setTableHeader(!1,t?0:1);return[2,{success:!0}]}))}))};return e}();t.ToggleTableColumnHeaderCommand=W
;var G=function(){function e(e){this.editor=e;this.id="toggle_table_row_header";this.label=p(f.toggleTableRowHeader);this.icon={type:"dig",icon:"TableHeaderRowLine"};this.available=function(e){
return!(!q(e)||!U(e))&&(!!V(e)||!H(e))}}e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var e,t;return n.__generator(this,(function(i){
e=this.editor.managers.getLineManagerWithSpecialSelection();if(!(e&&e.getWhollySelectedRegions()))return[2,{success:!1}]
;!(t=e.hasTopHeader())&&e.getHighlightForSelection(!0,[0])&&e.setHighlightColor(!0,[0],void 0);e.setTableHeader(!0,t?0:1);return[2,{success:!0}]}))}))};return e}();t.ToggleTableRowHeaderCommand=G
;var z=function(){function e(e){this.editor=e;this.id="remove_table_selection_highlight";this.label=p(f.removeTableSelectionHighlight);this.icon={type:"dig",icon:"FailLine"};this.available=(0,
l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),selection:(0,l.contains)("isTableCellZone")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e,t;return n.__generator(this,(function(i){e=this.editor.managers.getLineManagerWithSpecialSelection()
;if(!(t=e&&e.getWhollySelectedRegions()))return[2,{success:!1}];if(t.entireTable){e.setHighlightColor(!1,t.cols,void 0);e.setHighlightColor(!0,t.rows,void 0)
}else t.cols.length?e.setHighlightColor(!1,t.cols,void 0):t.rows.length&&e.setHighlightColor(!0,t.rows,void 0);return[2,{success:!0}]}))}))};return e}();t.RemoveTableSelectionHighlightCommand=z
;var Z=function(){function e(e){this.editor=e;this.id="toggle_placeholder";this.label=p(f.togglePlaceholder);this.icon={type:"dig",icon:"PlaceholderTextLine"};this.available=(0,l.buildPredicate)({
editorFocused:(0,l.equals)("true"),canEdit:(0,l.equals)("true"),docIsTemplate:(0,l.equals)("true"),selection:(0,l.and)((0,l.contains)("range"),(0,l.noneOf)("whitespaceOnly"))})}
e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_toggle_placeholder",(function(){
e.editor.contents.toggleAttributeOnSelection("placeholder")}));return[2,{success:!0}]}))}))};return e}();t.TogglePlaceholderCommand=Z;var K=function(){function e(e){this.editor=e
;this.id="set_code_language";this.label=p(f.setCodeLanguage);this.icon={type:"dig",icon:"CodeLine"};this.available=(0,l.buildPredicate)({editorFocused:(0,l.equals)("true"),canEdit:(0,
l.equals)("true"),lineType:(0,l.equals)("code")})}Object.defineProperty(e.prototype,"parameters",{get:function(){return[{label:p(f.setCodeLanguage),key:"codeLanguage",type:"string",
validator:function(e){return e&&1==e.length?{status:"ok"}:{status:"error",error:p(b.noCodeLanguageError)}}}]},enumerable:!1,configurable:!0});e.prototype.run=function(e){
return n.__awaiter(this,void 0,Promise,(function(){var t=this;return n.__generator(this,(function(i){this.editor.execute("omnibar_set_code_language",(function(){
t.editor.code.setLanguageOnSelection(e.parameterData.codeLanguage[0])}));return[2,{success:!0}]}))}))};return e}();t.SetCodeLanguage=K;var Q=function(){function e(e){this.editor=e
;this.id="highlight_table_selection";this.label=p(f.highlightTableSelection);this.icon={type:"dig",icon:"CustomizeLine"};this.available=function(e){var t=B(e)&&j(e),i=U(e)&&V(e);return q(e)&&!t&&!i}}
Object.defineProperty(e.prototype,"parameters",{get:function(){return[{label:p(f.tableHighlightColor),key:"highlightColor",type:"select",provider:"tableHighlightColors",
mode:d.SelectParameterMode.Single,validator:function(e){return e&&1==e.length?m.TableHighlightColors.isAllowedColor(e[0])?{status:"ok"}:{status:"error",error:p(b.invalidHighlightColor)}:{
status:"error",error:p(b.noHighlightColor)}}}]},enumerable:!1,configurable:!0});e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,i
;return n.__generator(this,(function(n){t=this.editor.managers.getLineManagerWithSpecialSelection();i=t&&t.getWhollySelectedRegions()
;m.TableHighlightColors.setLastUsedColor(e.parameterData.highlightColor[0]);if(i.entireTable){t.setHighlightColor(!1,i.cols,e.parameterData.highlightColor[0])
;t.setHighlightColor(!0,i.rows,e.parameterData.highlightColor[0])
}else i.cols.length?t.setHighlightColor(!1,i.cols,e.parameterData.highlightColor[0]):i.rows.length&&t.setHighlightColor(!0,i.rows,e.parameterData.highlightColor[0]);return[2,{success:!0}]}))}))}
;return e}();t.HighlightTableSelectionCommand=Q},1807:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.OutdentLineCommand=t.IndentLineCommand=void 0
;var n=i(1),o=i(5),r=i(111),a=i(4),s=i(2),l=(0,o.PaperIntlFactory)()._f,d=(0,s.defineMessages)({indent:{id:"EvGX9h",defaultMessage:"Indent"},outdent:{id:"bhjyGw",defaultMessage:"Outdent"}}),u=(0,
r.buildPredicate)({editorFocused:(0,r.equals)("true"),canEdit:(0,r.equals)("true"),isTitle:(0,r.not)("true")}),c=(0,r.buildPredicate)({lineType:(0,r.contains)("code")}),h=(0,r.buildPredicate)({
lineType:(0,r.contains)("indent")}),m=(0,r.buildPredicate)({indent:(0,r.and)((0,r.some)(),(0,r.notEquals)("1"))}),g=(0,r.buildPredicate)({indent:(0,r.and)((0,r.some)(),(0,r.notEquals)("8"))
}),p=function(){function e(e){this.editor=e;this.id="indent_line";this.label=l(d.indent);this.icon={type:"dig",icon:"IndentLine"};this.available=function(e){return u(e)&&(c(e)||g(e))};this.track={
event:a.IntentionEvent.FormatText,type:"indent"}}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_indent_line",(function(){e.editor.lists.doIndentOutdent(!1,!1,!1)}));return[2,{success:!0}]}))}))};return e}();t.IndentLineCommand=p;var f=function(){function e(e){
this.editor=e;this.id="outdent_line";this.label=l(d.outdent);this.icon={type:"dig",icon:"OutdentLine"};this.available=function(e){return u(e)&&(c(e)||h(e)||m(e))};this.track={
event:a.IntentionEvent.FormatText,type:"outdent"}}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_outdent_line",(function(){e.editor.lists.doIndentOutdent(!0,!1,!1)}));return[2,{success:!0}]}))}))};return e}();t.OutdentLineCommand=f},1808:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0})
;t.InsertEmojiCommand=t.InsertAuditboxCommand=t.InsertNoteboxCommand=t.InsertTimelineCommand=t.InsertTableCommand=t.InsertDropboxFileCommand=t.InsertBreakCommand=t.InsertEmbedPanelCommand=t.InsertImageCommand=void 0
;var n=i(1),o=i(20),r=i(841),a=i(536),s=i(263),l=i(732),d=i(350),u=i(537),c=i(424),h=i(181),m=i(425),g=i(196),p=i(5),f=i(6),v=i(472),b=i(111),y=i(232),C=i(422),_=i(4),T=i(2),P=i(86),w=i(7),E=(0,
p.PaperIntlFactory)()._f,k=(0,T.defineMessages)({insertImage:{id:"0kOqkN",defaultMessage:"Insert image"},insertEmbed:{id:"Ssjitj",defaultMessage:"Insert media"},insertDropboxFile:{id:"tQnrVG",
defaultMessage:"Insert Dropbox files"},insertTable:{id:"x/Q9TJ",defaultMessage:"Insert table"},columns:{id:"/jN3wt",defaultMessage:"Columns"},rows:{id:"VwEEdq",defaultMessage:"Rows"},insertTimeline:{
id:"h7F7XR",defaultMessage:"Insert timeline"},insertNotebox:{id:"oY6PUa",defaultMessage:"Insert note box"},selectColor:{id:"UvVK6R",defaultMessage:"Select colorâ¦"},break:{id:"u9J7HE",
defaultMessage:"Section break"},insertAuditbox:{id:"BXqwGK",defaultMessage:"Insert audit box"},insertEmoji:{id:"QFkoFF",defaultMessage:"Insert emoji"},selectEmoji:{id:"apO6iT",
defaultMessage:"Select emoji"},noEmojiError:{id:"F8AHkR",defaultMessage:"Please select an emoji to insert"}}),I=(0,T.defineMessages)({rowAndColumnValidationError:{id:"pKlr/h",
defaultMessage:"The parameter must be a whole number between 1 and 100."},noColorError:{id:"Y6lFqP",defaultMessage:"Please provide a color"},invalidColorError:{id:"4vjRrO",
defaultMessage:"Please provide a valid color"}}),S=function(){function e(e){this.editor=e;this.id="insert_image";this.label=E(k.insertImage);this.icon={type:"dig",icon:"ImageLine"}
;this.keywords=["/image","/img"];this.available=(0,b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,b.contains)("media"),selection:(0,b.or)((0,
b.contains)("isRootZone"),(0,b.contains)("isTableCellZone")),isOffline:(0,b.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
return n.__generator(this,(function(e){(0,a.triggerInsertImage)(this.editor,null,void 0,w.MediaInsertionMode.CreateNewGallery);return[2,{success:!0,preserveFocus:!0}]}))}))};return e}()
;t.InsertImageCommand=S;var M=function(e){n.__extends(t,e);function t(t){var i=e.call(this,t,"insert_embed",E(k.insertEmbed),"quickembeds")||this;i.icon={type:"dig",icon:"AddMediaLine"};i.track={
event:_.IntentionEvent.OpenEmbedSearchModal};i.available=(0,b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,b.contains)("media"),selection:(0,
b.and)((0,b.contains)("isRootZone"),(0,b.not)("isTableCellZone")),isOffline:(0,b.not)("true")});return i}return t}(v.default);t.InsertEmbedPanelCommand=M;var x=(0,b.buildPredicate)({editorFocused:(0,
b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,b.contains)("hr"),selection:(0,b.contains)("isRootZone")}),L=(0,b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,
b.equals)("true"),selection:(0,b.contains)("isTableCellZone")}),F=function(){function e(e){this.editor=e;this.id="insert_break";this.label=E(k.break);this.icon={type:"dig",icon:"AddHorizontalLineLine"
};this.keywords=["/hr","/divider","/sectionbreak"];this.available=function(e){return x(e)||L(e)}}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this
;return n.__generator(this,(function(t){this.editor.execute("insert-break-from-omnibar",(function(){var t=e.editor.getSelectedRep(),i=e.editor.options.contentTypeRegistry
;if(t)if(i.hasContentType("hr"))i.insertContentTypeAtCursor(e.editor,new d.default);else{var n=U(e.editor);e.editor.contents.performDocumentReplaceRange(n,n,"*",[["magicObject","hr"],["hr","true"]])
;var r=n.withLine(n.line+1).withCol(0);if(r.line>=t.lines.length()){var a=o.Position.endOfZone(e.editor,r.zone);e.editor.contents.performDocumentReplaceRange(a,a,"\n",[])}e.editor.selection.set(r)}}))
;return[2,{success:!0}]}))}))};return e}();t.InsertBreakCommand=F;var D=function(){function e(e,t){this.editor=e;this.panels=t;this.id="insert_dropbox_file";this.label=E(k.insertDropboxFile)
;this.icon={type:"dig",icon:"DropboxLine"};this.available=(0,b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,b.contains)("media"),selection:(0,
b.and)((0,b.contains)("isRootZone"),(0,b.not)("isTableCellZone")),isOffline:(0,b.not)("true")})}e.prototype.run=function(){var e;return n.__awaiter(this,void 0,Promise,(function(){var t=this
;return n.__generator(this,(function(i){if(null===(e=this.editor.padController)||void 0===e?void 0:e.isCloudDoc()){if(!this.panels.has("filechooser"))return[2,{success:!1}]
;this.panels.open("filechooser",(function(e){(0,s.insertDropboxInAce)(t.editor,e,w.MediaInsertionMode.CreateNewGallery);(0,r.applyFileTypeLogging)(e,_.AppContext.Omnibar)}));return[2,{success:!0}]}(0,
C.renderDropboxChooserPortal)(this.editor,{folderselect:!0},(function(e){return e((function(e){(0,s.insertDropboxInAce)(t.editor,e,w.MediaInsertionMode.CreateNewGallery);(0,
r.applyFileTypeLogging)(e,_.AppContext.Omnibar)}))}));return[2,{success:!0}]}))}))};return e}();t.InsertDropboxFileCommand=D;var A=function(){function e(e){this.editor=e;this.id="insert_table"
;this.label=E(k.insertTable);this.icon={type:"dig",icon:"TableLine"};this.keywords=["/table"];this.track={event:_.IntentionEvent.CreateTable};this.available=(0,b.buildPredicate)({editorFocused:(0,
b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,b.contains)("tables"),selection:(0,b.and)((0,b.contains)("isRootZone"),(0,b.not)("isTableCellZone"))})}
e.prototype.validateIntParam=function(e){if(1==e.length){var t=Number(e[0]);if(!isNaN(t)&&f.isInteger(t)&&t>0&&t<100)return{status:"ok"}}return{status:"error",error:E(I.rowAndColumnValidationError)}}
;Object.defineProperty(e.prototype,"parameters",{get:function(){var e=this;return[{defaultValue:["3"],label:E(k.columns),key:"columns",type:"select",provider:"positiveIntegers",
mode:y.SelectParameterMode.Single,validator:function(t){return e.validateIntParam(t)}},{defaultValue:["3"],label:E(k.rows),key:"rows",type:"select",provider:"positiveIntegers",
mode:y.SelectParameterMode.Single,validator:function(t){return e.validateIntParam(t)}}]},enumerable:!1,configurable:!0});e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){
var t,i,o=this;return n.__generator(this,(function(n){t=Number(e.parameterData.columns[0]);i=Number(e.parameterData.rows[0]);this.editor.execute("create-table-from-omnibar",(function(){
var e=U(o.editor);(0,c.createTable)(o.editor,e,i,t);var n=e.zone,r=e.line,a=o.editor.managers.getLineManager(n,r);a&&a.focusAndCollapseSelectionOntoCell(0,0)}));return[2,{success:!0,preserveFocus:!0}]
}))}))};return e}();t.InsertTableCommand=A;var O=function(){function e(e){this.editor=e;this.id="insert_timeline";this.label=E(k.insertTimeline);this.icon={type:"dig",icon:"CalendarLine"}
;this.keywords=["/timeline"];this.track={event:_.IntentionEvent.CreateTimeline};this.available=(0,b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,
b.contains)("timelines"),selection:(0,b.and)((0,b.contains)("isRootZone"),(0,b.not)("isTableCellZone"))})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this
;return n.__generator(this,(function(t){this.editor.execute("omnibar-insert-timeline",(function(){var t=(0,g.createTimeline)(e.editor),i=e.editor.options.contentTypeRegistry,n=U(e.editor)
;i.insertContentType(e.editor,new m.default({timelineId:t}),{start:n,end:n})}));return[2,{success:!0}]}))}))};return e}();t.InsertTimelineCommand=O;var R=(0,
h.getBackgroundColorForHeaderCell)(),N=function(){function e(e){this.editor=e;this.id="insert_notebox";this.label=E(k.insertNotebox);this.icon={type:"dig",icon:"HighlightLine"}
;this.keywords=["/note","/notes"];this.available=(0,b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,b.contains)("tables"),selection:(0,
b.contains)("isRootZone")})}Object.defineProperty(e.prototype,"parameters",{get:function(){return[{label:E(k.selectColor),key:"color",type:"select",provider:"noteboxHighlightColors",
mode:y.SelectParameterMode.Single,validator:function(e){if(!e||1!=e.length)return{status:"error",error:E(I.noColorError)};var t=e[0]
;return"#FFFFFF"==t||t==R||P.TableHighlightColors.isAllowedColor(t)?{status:"ok"}:{status:"error",error:E(I.invalidColorError)}}}]},enumerable:!1,configurable:!0});e.prototype.run=function(e){
return n.__awaiter(this,void 0,Promise,(function(){var t,i,o=this;return n.__generator(this,(function(n){t=e.parameterData.color[0];_.IntentionEvent.CreateNoteBox.track({color:t})
;i=P.NOTEBOX_COLOR_TO_SHORT_NAME[t];this.editor.execute("omnibar-insert-note-box",(function(){var e=U(o.editor);(0,u.createNoteBox)(o.editor,i,e)}));return[2,{success:!0,preserveFocus:!0}]}))}))}
;return e}();t.InsertNoteboxCommand=N;var q=function(){function e(e){this.editor=e;this.id="insert_auditbox";this.label=E(k.insertAuditbox);this.icon={type:"dig",icon:"HighlightLine"}
;this.keywords=["/audit","/auditbox"];this.available=(0,b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,b.equals)("true"),editorFeatures:(0,b.contains)("tables"),selection:(0,
b.contains)("isRootZone")})}e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){_.IntentionEvent.CreateAuditBox.track()
;this.editor.execute("omnibar-insert-audit-box",(function(){var t=U(e.editor);(0,l.createAuditBox)(e.editor,t)}));return[2,{success:!0,preserveFocus:!0}]}))}))};return e}();t.InsertAuditboxCommand=q
;var H=function(){function e(e){this.editor=e;this.id="insert_emoji";this.label=E(k.insertEmoji);this.icon={type:"dig",icon:"EmojiSmileLine"};this.keywords=["/emoji"];this.available=(0,
b.buildPredicate)({editorFocused:(0,b.equals)("true"),canEdit:(0,b.equals)("true")})}Object.defineProperty(e.prototype,"parameters",{get:function(){return[{label:E(k.selectEmoji),key:"emoji",
type:"select",provider:"emojis",mode:y.SelectParameterMode.Single,validator:function(e){return e&&1==e.length?{status:"ok"}:{status:"error",error:E(k.noEmojiError)}}}]},enumerable:!1,configurable:!0})
;e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,i,o=this;return n.__generator(this,(function(n){t=e.parameterData.emoji[0];i=JSON.parse(t)
;this.editor.execute("omnibar-insert-emoji",(function(){var e=o.editor.selection.getStart(),n=o.editor.selection.getEnd()
;"ch"in i?o.editor.contents.performAttributePreservingDocumentReplaceRange(e,n,i.ch):o.editor.contents.performAttributePreservingDocumentReplaceRange(e,n,"*",[["magicObject","customEmoji"],["customEmoji",t]])
}));return[2,{success:!0}]}))}))};return e}();t.InsertEmojiCommand=H;function U(e){var t,i=null!==(t=e.selection.getStart())&&void 0!==t?t:o.Position.endOfZone(e,o.Position.ROOT_ZONE)
;return i.zone==o.Position.ROOT_ZONE&&0==i.line&&e.hasFeature("bigtitle")?new o.Position(o.Position.ROOT_ZONE,1,0):i.withCol(0)}},1809:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;t.ResizeGalleryCommand=t.ResizeCompactCommand=t.ResizeFullCommand=t.PagePreviewUnrollCommand=t.ZoomOutImageCommand=t.ZoomInImageCommand=t.FitImageCommand=t.DeleteImageCommand=t.ReplaceDropboxEmbed=t.ReplaceImageCommand=t.AlignImageOverlayCommand=t.AlignImageFullCommand=t.AlignImageCenterCommand=t.AlignImageRightCommand=t.AlignImageLeftCommand=t.CropImageShowcaseCommand=t.CropPreviewCommand=t.CropSinglePagePreview=t.CropImagePreviewCommand=void 0
;var n=i(1),o=i(94),r=i(263),a=i(227),s=i(1810),l=i(6),d=i(111),u=i(2),c=i(7),h=i(27),m=(0,i(5).PaperIntlFactory)()._f,g=(0,u.defineMessages)({imageReplace:{id:"eA7vKF",defaultMessage:"Replace image"
},dropboxEmbedReplace:{id:"ZoB5oK",defaultMessage:"Replace from dropbox"},imageFit:{id:"4C9csd",defaultMessage:"Fit image"},imageAlignLeft:{id:"F1LRbl",defaultMessage:"Align image left"},
imageAlignRight:{id:"ixkiEt",defaultMessage:"Align image right"},imageAlignCenter:{id:"bDfmZV",defaultMessage:"Align image center"},imageAlignFull:{id:"BsmSl5",defaultMessage:"Make image full width"},
imageAlignOverlay:{id:"hNhknQ",defaultMessage:"Text overlay"},imageCropPreview:{id:"CCVyuY",defaultMessage:"Adjust image"},singlePagePreviewCrop:{id:"/IxXbH",defaultMessage:"Select display area"},
imageDelete:{id:"r2m7Hp",defaultMessage:"Remove image"},zoomIn:{id:"Q4KwKm",defaultMessage:"Zoom into image"},zoomOut:{id:"vOh9WT",defaultMessage:"Zoom out of image"},unroll:{id:"L51p9m",
defaultMessage:"Select page to display"},resizeFull:{id:"SgX3z6",defaultMessage:"Full"},resizeCompact:{id:"6aL1N0",defaultMessage:"Compact"}}),p=function(){function e(e){this.editor=e
;this.id="crop_image_preview";this.label=m(g.imageCropPreview);this.icon={type:"dig",icon:"CropLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,
d.equals)("true"),isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.some)(),selectedGalleryEmbedType:(0,d.or)((0,d.equals)("image"),(0,d.equals)("dropbox-image")),featureIsOn:(0,d.equals)("true")
})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e;return n.__generator(this,(function(t){
(e=this.editor.media.getSelectedGalleryEmbedData().embedComponent)&&e.startCropping&&e.startCropping();return[2,{success:!0}]}))}))};return e}();t.CropImagePreviewCommand=p;var f=function(){
function e(e){this.editor=e;this.id="crop_single_page_preview";this.label=m(g.singlePagePreviewCrop);this.icon={type:"dig",icon:"CropLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,
d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.some)(),selectedGalleryCroppingSupport:(0,d.equals)("true"),selectedGalleryEmbedPageCount:(0,
d.equals)("1")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,i,o,r=this;return n.__generator(this,(function(n){
e=this.editor.media.getSelectedGalleryEmbedData(),t=e.embedUrl,i=e.index;o=[{type:"page-preview",url:"/fetch/page-preview?sharedLinkUrl="+encodeURIComponent(t)+"&page=0",pageIndex:0,
sourceFileSharedLink:t}];this.editor.execute("insertPagePreviewInAce",(function(){r.editor.media.insertMedia(o,void 0,c.MediaInsertionMode.ReplaceExistingItem);r.editor.focus()
;var e=r.editor.media.getSelectedGalleryOrNull();if(e){var t=e.getEmbedComponentByIndex(i);t&&t.startCroppingOnLoad&&t.startCroppingOnLoad()}}));return[2,{success:!0}]}))}))};return e}()
;t.CropSinglePagePreview=f;var v=function(){function e(e){this.editor=e;this.id="crop_preview";this.label=m(g.singlePagePreviewCrop);this.icon={type:"dig",icon:"CropLine"};this.available=(0,
d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,d.not)("true"),selectedGalleryEmbedType:(0,d.equals)("page-preview"),selectedImageAttributes:(0,d.some)()
})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t;return n.__generator(this,(function(i){e=this.editor
;(t=e.media.getSelectedGalleryEmbedData().embedComponent)&&t.startCropping&&t.startCropping();return[2,{success:!0}]}))}))};return e}();t.CropPreviewCommand=v;var b=function(){function e(e){
this.editor=e;this.id="crop_image_showcase";this.label=m(g.imageCropPreview);this.icon={type:"dig",icon:"CropLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,
d.equals)("true"),selectedImageAttributes:(0,d.some)()})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){
this.editor.media.startCroppingGalleryImage();return[2,{success:!0}]}))}))};return e}();t.CropImageShowcaseCommand=b;var y=function(){function e(e){this.editor=e;this.id="align_image_left"
;this.label=m(g.imageAlignLeft);this.icon={type:"dig",icon:"MediaAlignLeftLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,
d.not)("true"),selectedGalleryCount:(0,d.equals)("1"),selectedImageAttributes:(0,d.contains)("imageGalleryItem")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_align_image_left",(function(){e.editor.contents.setImageSelectionAttribute("imageLeft")}));return[2,{success:!0}]}))}))}
;return e}();t.AlignImageLeftCommand=y;var C=function(){function e(e){this.editor=e;this.id="align_image_right";this.label=m(g.imageAlignRight);this.icon={type:"dig",icon:"MediaAlignRightLine"}
;this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,d.not)("true"),selectedGalleryCount:(0,d.equals)("1"),selectedImageAttributes:(0,
d.contains)("imageGalleryItem")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_align_image_right",(function(){e.editor.contents.setImageSelectionAttribute("imageRight")}));return[2,{success:!0}]}))}))};return e}();t.AlignImageRightCommand=C
;var _=function(){function e(e){this.editor=e;this.id="align_image_center";this.label=m(g.imageAlignCenter);this.icon={type:"dig",icon:"MediaAlignCenterLine"};this.available=(0,d.buildPredicate)({
editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,d.not)("true"),selectedGalleryCount:(0,d.equals)("1"),selectedImageAttributes:(0,d.contains)("imageGalleryItem")})}
e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_align_image_center",(function(){
e.editor.contents.setImageSelectionAttribute("imageCenter")}));return[2,{success:!0}]}))}))};return e}();t.AlignImageCenterCommand=_;var T=function(){function e(e){this.editor=e
;this.id="align_image_full";this.label=m(g.imageAlignFull);this.icon={type:"dig",icon:"FullWidthLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,
d.equals)("true"),selectedGalleryCount:(0,d.equals)("1"),selectedImageAttributes:(0,d.contains)("imageGalleryItem")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_align_image_full",(function(){e.editor.contents.setImageSelectionAttribute("imageFull")}));return[2,{success:!0}]}))}))}
;return e}();t.AlignImageFullCommand=T;var P=function(){function e(e){this.editor=e;this.id="align_image_overlay";this.label=m(g.imageAlignOverlay);this.available=(0,d.buildPredicate)({
editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),selectedImageAttributes:(0,d.some)(),selectedGalleryCount:(0,d.equals)("1")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_align_image_overlay",(function(){e.editor.media.toggleOverlay(!0)}))
;this.editor.observer.trigger("attr-selection-change",void 0);return[2,{success:!0}]}))}))};return e}();t.AlignImageOverlayCommand=P;var w=function(){function e(e){this.editor=e
;this.id="replace_image";this.label=m(g.imageReplace);this.icon={type:"dig",icon:"ReplaceImageLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,
d.equals)("true"),isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.some)(),selectedGalleryEmbedType:(0,d.or)((0,d.equals)("image"),(0,d.equals)("dropbox-image"))})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){this.editor.media.replaceImage();this.editor.observer.trigger("attr-selection-change",void 0);return[2,{
success:!0}]}))}))};return e}();t.ReplaceImageCommand=w;var E=function(){function e(e){this.editor=e;this.id="replace_dropbox_embed";this.label=m(g.dropboxEmbedReplace);this.icon={type:"dig",
icon:"DropboxLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.some)(),
selectedGalleryEmbedType:(0,d.or)((0,d.equals)("dropbox"),(0,d.equals)("dropbox-image"))})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e
;return n.__generator(this,(function(t){e=this.editor;window.Dropbox.choose({linkType:"preview",multiselect:!1,folderselect:!0,success:function(t){var i=t[0];(0,
r.insertDropboxInAce)(e,[i],c.MediaInsertionMode.ReplaceExistingItem)}});e.observer.trigger("attr-selection-change",void 0);return[2,{success:!0}]}))}))};return e}();t.ReplaceDropboxEmbed=E
;var k=function(){function e(e){this.editor=e;this.id="delete_image";this.label=m(g.imageDelete);this.icon={type:"dig",icon:"DeleteLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,
d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.contains)("imageGalleryItem")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){this.editor.media.removeSelectedItems();return[2,{success:!0}]}))}))};return e}();t.DeleteImageCommand=k
;var I=function(){function e(e){this.editor=e;this.id="fit_image";this.label=m(g.imageFit);this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),
isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.contains)("imageGalleryItem")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
return n.__generator(this,(function(e){this.editor.observer.trigger("fit-image",void 0);return[2,{success:!0}]}))}))};return e}();t.FitImageCommand=I;var S=function(){function e(e){this.editor=e
;this.id="zoom_in_image";this.label=m(g.zoomIn);this.icon={type:"dig",icon:"ZoomInLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),
isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.contains)("imageGalleryItem")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
return n.__generator(this,(function(e){this.editor.observer.trigger("zoom-in",void 0);return[2,{success:!0}]}))}))};return e}();t.ZoomInImageCommand=S;var M=function(){function e(e){this.editor=e
;this.id="zoom_out_image";this.label=m(g.zoomOut);this.icon={type:"dig",icon:"ZoomOutLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),
isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.contains)("imageGalleryItem")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
return n.__generator(this,(function(e){this.editor.observer.trigger("zoom-out",void 0);return[2,{success:!0}]}))}))};return e}();t.ZoomOutImageCommand=M;var x=function(){function e(e){this.editor=e
;this.id="page_preview_unroll";this.label=m(g.unroll);this.icon={type:"dig",icon:"ViewSinglePageLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,
d.equals)("true"),isTitle:(0,d.not)("true"),selectedImageAttributes:(0,d.some)(),selectedGalleryCroppingSupport:(0,d.equals)("true"),selectedGalleryEmbedPageCount:(0,d.and)((0,d.some)(),(0,
d.not)("1"))})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,i,o,r,l;return n.__generator(this,(function(n){e=this.editor
;t=e.media.getSelectedGalleryEmbedData().embedUrl;i=e.selection.getStart();o=(0,h.parseFileExtensionFromUrl)(t),r=o.filenameWithoutExtension,l=o.extension;(0,s.open)({sourceFileSharedLink:t,
filenameWithoutExtension:r,extension:null!=l?l:void 0,onConfirm:function(n){if(n.length)if(e.contents.getIsEditable()){var o=n.map((function(e){return{type:"page-preview",
url:"/fetch/page-preview?sharedLinkUrl="+encodeURIComponent(t)+"&page="+e.pageIndex,pageIndex:e.pageIndex,sourceFileSharedLink:t}}));e.execute("insertPagePreviewInAce",(function(){
e.media.insertMedia(o,i,c.MediaInsertionMode.ReplaceWithReflow)}))}else(0,a.showPermissionError)()}});return[2,{success:!0}]}))}))};return e}();t.PagePreviewUnrollCommand=x;function L(e,t){
return n.__awaiter(this,void 0,Promise,(function(){var i,o,r,a,s,d,u,c,h;return n.__generator(this,(function(n){i=e.selection,o=e.managers,r=e.media;a=r.getSelectedGalleryEmbedData().index
;if(i.hasSelection){s=i.getStart();d=i.getZone();u=s.line;if(c=o.getLineManager(d,u,"gallery")){(h=c.getGalleryData()).items[a]=l.assignIn(h.items[a],{size:t});e.execute("resize-item",(function(){
e.contents.performDocumentApplyAttributesToRange(s,s.withCol(s.col+1),[["gallery",JSON.stringify(h)]])}))}}return[2,{success:!0}]}))}))}var F=function(){function e(e){this.editor=e
;this.id="resize_full";this.label=m(g.resizeFull);this.icon={type:"dig",icon:"MediaFullWidthLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),
isTitle:(0,d.not)("true"),selectedGalleryEmbedType:(0,d.equals)("dropbox")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){
return[2,L(this.editor,o.GalleryItemSize.Large)]}))}))};return e}();t.ResizeFullCommand=F;var D=function(){function e(e){this.editor=e;this.id="resize_compact";this.label=m(g.resizeCompact)
;this.icon={type:"dig",icon:"MediaCompactLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),isTitle:(0,d.not)("true"),
selectedGalleryEmbedType:(0,d.equals)("dropbox"),selectedGalleryCount:(0,d.equals)("1")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
return n.__generator(this,(function(e){return[2,L(this.editor,o.GalleryItemSize.Medium)]}))}))};return e}();t.ResizeCompactCommand=D;var A=function(){function e(e){this.editor=e
;this.id="resize_gallery";this.label=m(g.resizeCompact);this.icon={type:"dig",icon:"MediaGalleryLine"};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,
d.equals)("true"),isTitle:(0,d.not)("true"),selectedGalleryEmbedType:(0,d.equals)("dropbox"),selectedGalleryCount:(0,d.and)((0,d.some)(),(0,d.not)("1"))})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){return[2,L(this.editor,o.GalleryItemSize.Medium)]}))}))};return e}();t.ResizeGalleryCommand=A},
1810:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.open=void 0;var n=i(1),o=i(8),r=i(2),a=i(18),s=i(1811),l=i(70),d=i(40),u=i(0),c=i(36),h=i(24),m=i(71),g=i(4),p=(0,
i(5).PaperIntlFactory)()._f,f=(0,r.defineMessages)({pageSelection:{id:"0slpDb",defaultMessage:"Page Selection"}}),v=function(e){n.__extends(t,e);function t(){
return null!==e&&e.apply(this,arguments)||this}t.prototype.open=function(){this.popupRef.open()};t.prototype.close=function(){this.popupRef.close()};t.prototype.render=function(){
var e=this,t=n.__assign(n.__assign({},this.props),{onConfirm:function(t){e.props.onConfirm(t);e.close()},onCancel:function(){return e.close()}});return u.createElement(g.TrackContext,{
trackContext:g.EditorContext.PageSelection},u.createElement(l.default,{openOnMount:!0,ref:function(t){e.popupRef=t},size:"huge",onClose:this.props.onClose,className:"fetch-page-selection-popup",
"aria-label":p(f.pageSelection)},u.createElement("div",{ref:"popupContent",className:"hp-popup-content"},u.createElement(s.default,n.__assign({},t)))))};t.displayName="FetchPageSelectionPopup"
;return t=n.__decorate([d.default],t)}(u.Component);t.open=function(e){var t=document.querySelector("#hp-popup-container"),i=function(){h.unmountComponentAtNode(t);(0,a.empty)(t)};i()
;h.unmountComponentAtNode(t);(0,a.empty)(t);c.reactDomRender(u.createElement(m.ToastAndUnmountErrorBoundary,null,u.createElement(r.IntlProvider,{locale:o.default.userLocale
},u.createElement(v,n.__assign({},e,{onClose:i})))),t)}},1811:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;t.getMasonryColumnsFor=t.FetchPagePreviewsLayout=t.FetchPagePreview=t.FetchPageSelectionToolbar=t.FetchPageSelectionError=void 0
;var n=i(1),o=i(6),r=i(438),a=i(10),s=i(3),l=i(8),d=i(2),u=i(357),c=i(4),h=i(227),m=i(10),g=i(14),p=i(0),f=i(46),v=i(440),b=i(52),y=i(13),C=(0,
g.MsgFactory)("fetch-page-selection"),_=C.defineMessages,T=C.IntlMessageFormat,P=C.F,w=_({cancelButton:{msg:"Close page selection"},confirmButton:{msg:"Add to doc"},metadataFailureTitle:{
msg:"Couldnât load file",description:"Message shown when a file preview fails to be generated"},metadataFailureMessage:{msg:"Sorry for the little hiccup. Try checking back a bit later.",
description:"Secondary message shown when a file preview fails to be generated"},metadataFailureAction:{msg:"Okay",description:"Message shown in a button with a required action to be taken"},
addToDoc:{msg:"Add to doc",description:"Add one or more file pages in the active document"}}),E=((0,d.defineMessages)({cancelButton:{id:"mclLuC",defaultMessage:"Close page selection"},confirmButton:{
id:"GkFNWL",defaultMessage:"Add to doc"},metadataFailureTitle:{id:"r9KJrs",defaultMessage:"Couldnât load file"},metadataFailureMessage:{id:"AY8FUY",
defaultMessage:"Sorry for the little hiccup. Try checking back a bit later."},metadataFailureAction:{id:"oJRPZX",defaultMessage:"Okay"},addToDoc:{id:"K15mrP",defaultMessage:"Add to doc"}}),
2e3),k=4,I=function(e){n.__extends(i,e);function i(){var t=null!==e&&e.apply(this,arguments)||this;t.state={columns:k,isFadeOutAnimationPending:!1,isPageMetadataReady:!1,maxColumns:k,pages:[],
pageMetadataError:null,selectedPages:[]};t.getPageMetadataRequest=new h.FetchPageMetadataRequest;t.togglePageSelection=function(e){var i=t.state.selectedPages,n=i.indexOf(e)>-1
;i=n?i.filter((function(t){return t!==e})):i.concat([e]);var o=n?"Deselect Page Previews":"Select Page Previews";(0,c.trackUi)(o,{file_type:t.props.extension,context:c.EditorContext.PageSelection})
;t.setState({selectedPages:i})};t.getPageMetadata=function(){t.setState({isPageMetadataReady:!1},(function(){var e=t.props,i=e.sourceFileSharedLink,n=e.preselectedPages
;t.getPageMetadataRequest.getPages({sharedLinkUrl:i,onSuccess:function(e){var i=e.length>3?4:e.length,r=[];n&&n.length>0&&(r=o.at(e,n.filter((function(t){return t<e.length}))));t.setState({
isPageMetadataReady:!0,isFadeOutAnimationPending:!0,pages:e,columns:i,selectedPages:r,maxColumns:i})},onError:function(e){t.setState({isPageMetadataReady:!0,isFadeOutAnimationPending:!1,
pageMetadataError:e})}})}))};t.handleConfirm=function(){if(t.props.onConfirm){var e=t.state.selectedPages.sort((function(e,t){return e.pageIndex-t.pageIndex}));t.props.onConfirm(e)}}
;t.handleCancel=function(){t.props.onCancel&&t.props.onCancel()};t.handleSliderValueChange=function(e){t.setState({columns:e})};return t}i.prototype.componentDidMount=function(){this.getPageMetadata()
};i.prototype.componentWillUnmount=function(){this.getPageMetadataRequest.flush()};i.prototype.renderContent=function(){
var e=this,i=this.state,n=i.columns,o=i.selectedPages,r=i.pages,a=i.pageMetadataError,s=i.isFadeOutAnimationPending,l=i.isPageMetadataReady,d=this.props,u=d.extension,c=d.disableAnimations,h=Math.floor(E/n)
;return a?p.createElement(t.FetchPageSelectionError,{onClose:function(){return e.handleCancel()}}):l?!c&&l&&s?p.createElement(M,{fadeOut:!0,gridSize:k,onAnimationEnd:function(){return e.setState({
isFadeOutAnimationPending:!1})}}):p.createElement(t.FetchPagePreviewsLayout,{onClick:function(t){return e.togglePageSelection(t)},pages:r,extension:u,selectedPages:o,columns:n,columnWidth:h
}):p.createElement(M,{fadeIn:!0,gridSize:k})};i.prototype.render=function(){
var e=this,i=this.state,n=i.columns,o=i.selectedPages,r=i.pages,a=i.maxColumns,l=this.props,d=l.filenameWithoutExtension,u=l.extension;return p.createElement("div",{"data-faketext":"*",
className:s("fetch-page-selection-wrapper")},p.createElement(t.FetchPageSelectionToolbar,{isSliderEditable:!!r.length,filename:d,extension:u,onCancel:function(){return e.handleCancel()},
onSliderValueChanged:this.handleSliderValueChange.bind(this),onConfirm:function(){return e.handleConfirm()},selectedPages:o,columns:n,maxColumns:a,numPages:r.length}),this.renderContent())}
;i.displayName="FetchPageSelection";return i=n.__decorate([f.default],i)}(p.Component);t.default=I;t.FetchPageSelectionError=function(e){
var t=new T(w.metadataFailureAction,l.default.userLocale).format(),i=new T(w.metadataFailureTitle,l.default.userLocale).format();return p.createElement("div",{className:"fetch-page-selection-error"
},p.createElement("img",{className:"fetch-page-selection-error-image","aria-label":i,alt:i,src:(0,b.default)("/static/img/profsharing/error_404.png"),width:244,height:244}),p.createElement("p",{
className:"fetch-page-selection-error-title"},p.createElement(P,n.__assign({},w.metadataFailureTitle))),p.createElement("p",{className:"fetch-page-selection-error-message"
},p.createElement(P,n.__assign({},w.metadataFailureMessage))),p.createElement(m.default,{primary:!0,"aria-label":t,onClick:function(){return e.onClose()}
},p.createElement(P,n.__assign({},w.metadataFailureAction))))};t.FetchPageSelectionToolbar=function(e){
var t=e.isSliderEditable,i=e.filename,o=e.extension,r=e.onCancel,a=e.onConfirm,s=e.onSliderValueChanged,d=e.selectedPages,c=e.columns,h=e.maxColumns,g=e.numPages,f=!!d.length,b=f?p.createElement("span",{
className:"fetch-page-selection-toolbar-thumbnails"},d.map((function(e,t){return p.createElement("img",{key:"fetch-page-selection-toolbar-thumbnail-".concat(t),
className:"fetch-page-selection-toolbar-thumbnail",src:e.previewUrl,height:30,width:Math.floor(e.width/e.height*30)})
}))):null,C=new T(w.cancelButton,l.default.userLocale).format(),_=new T(w.confirmButton,l.default.userLocale).format();return p.createElement("div",{className:"fetch-page-selection-toolbar"
},p.createElement("div",{className:"fetch-page-selection-toolbar-left"},p.createElement(m.default,{"aria-label":C,onClick:function(){return r()},tabIndex:1},p.createElement(y.default,{name:"close"
})),p.createElement("span",{className:"fetch-page-selection-toolbar-icon"},p.createElement(u.default,{extension:o,large:!0})),p.createElement("span",{
className:"fetch-page-selection-toolbar-filename notranslate"},i),p.createElement(v.default,{start:h,end:1,step:-1,value:c,disabled:!t,onChange:s,tabIndex:1})),p.createElement("div",{
className:"fetch-page-selection-toolbar-right"},b,p.createElement(m.default,{primary:!0,className:"fetch-page-selection-confirm",disabled:!f,"aria-label":_,onClick:function(){return a()},tabIndex:g+1
},p.createElement(P,n.__assign({},w.addToDoc)))))};var S=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={isImageLoaded:!1,isImageFailed:!1};return t}
t.prototype.onImageFailed=function(){this.setState({isImageFailed:!0})};t.prototype.onImageLoaded=function(){this.setState({isImageLoaded:!0})};t.prototype.handleOnClick=function(){
if(this.state.isImageFailed)return!1;this.props.onClick&&this.props.onClick()};t.prototype.render=function(){var e=this.props,t=e.extension,i=e.isSelected,n=e.page,o=null
;o=this.state.isImageFailed?p.createElement("div",null,p.createElement(r.BrokenImageIcon,null),p.createElement("div",null,(0,h.getLabelForFailedPreview)(t))):p.createElement("img",{
className:"fetch-page-preview-image",style:{opacity:this.state.isImageLoaded?1:0},src:n.previewUrl,onError:this.onImageFailed.bind(this),onLoad:this.onImageLoaded.bind(this)});var d=(0,
h.getNumberedPage)(t,n.pageIndex+1),u=new T(d,l.default.userLocale).format(d.values);return p.createElement(a.default,{styleless:!0,"aria-label":u,"aria-selected":i,role:"checkbox",
tabIndex:n.pageIndex+1,onClick:this.handleOnClick.bind(this),className:s({"fetch-page-preview":!0,"fetch-page-preview--selected":i,"fetch-page-preview--failed":this.state.isImageFailed})
},p.createElement("span",{className:"fetch-page-preview-title"},(0,h.getLabelForPreview)(t),p.createElement("span",{className:"notranslate"},n.pageIndex+1)),p.createElement("span",{
className:"fetch-page-preview-image-wrapper"},o))};t.displayName="FetchPagePreview";return t=n.__decorate([f.default],t)}(p.Component);t.FetchPagePreview=S;var M=function(e){
var t=e.gridSize,i=e.fadeIn,n=e.fadeOut,o=e.onAnimationEnd,r=s("fetch-page-previews-container",{"fetch-page-previews-container--fade-in":i,"fetch-page-previews-container--fade-out":n})
;return p.createElement("div",{className:r,onAnimationEnd:function(){return!!o&&o()}},Array.apply(null,Array(t)).map((function(e,i){return p.createElement("div",{
key:"fetch-page-previews-layout-column-".concat(i),className:"fetch-page-previews-layout-column fetch-page-previews-layout-column--size-".concat(t)},Array.apply(null,Array(t)).map((function(){
return p.createElement("div",{className:"fetch-page-preview-skeleton glint-animation"},p.createElement(y.default,{name:"artboard-selection-skeleton"}))})))})))};t.FetchPagePreviewsLayout=function(e){
var t=e.onClick,i=e.pages,n=e.selectedPages,o=e.columns,r=e.columnWidth,a=e.extension;if(!i.length)return null;var s=x(i,o,r);return p.createElement("div",{className:"fetch-page-previews-container"
},s.map((function(e,i){return p.createElement("div",{key:"fetch-page-previews-layout-column-".concat(i),className:"fetch-page-previews-layout-column fetch-page-previews-layout-column--size-".concat(o)
},e.map((function(e,o){return p.createElement(S,{key:"fetch-page-preview-".concat(i,"-").concat(o),page:e,extension:a,onClick:function(){return t(e)},isSelected:n.indexOf(e)>=0})})))})))}
;function x(e,t,i){if(!i)throw new Error("Cannot generate layout with invalid column width")
;var n=Array.apply(null,Array(t)).map(Number.prototype.valueOf,0),o=Array.apply(null,Array(t)).map((function(){return new Array}));return e.reduce((function(e,t){
var o=n.indexOf(Math.min.apply(Math,n)),r=parseInt(t.height||1,10)/i;e[o].push(t);n[o]+=r;return e}),o)}t.getMasonryColumnsFor=x},1812:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;t.SelectLineCommand=void 0;var n=i(1),o=i(111),r=i(2),a=i(242),s=(0,i(5).PaperIntlFactory)()._f,l=(0,r.defineMessages)({selectLine:{id:"N1BBd2",defaultMessage:"Select line"}}),d=function(){
function e(e){this.editor=e;this.id="select_line";this.label=s(l.selectLine);this.available=(0,o.buildPredicate)({editorFocused:(0,o.equals)("true"),canEdit:(0,o.equals)("true"),selection:(0,
o.contains)("caret")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_select_line",(function(){var t=e.editor.selection.getZone(),i=e.editor.selection.getLine();e.editor.selection.set((0,a.rangeForLine)(e.editor,t,i))}));return[2,{
success:!0,preserveFocus:!0}]}))}))};return e}();t.SelectLineCommand=d},1813:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;t.RemoveTaskDueDateCommand=t.UnassignTaskCommand=t.UncheckTaskCommand=t.CheckTaskCommand=void 0
;var n=i(1),o=i(58),r=i(245),a=i(22),s=i(20),l=i(5),d=i(111),u=i(232),c=i(75),h=i(4),m=i(2),g=i(815),p=(0,l.PaperIntlFactory)()._f,f=(0,m.defineMessages)({checkTask:{id:"GhVyWm",
defaultMessage:"Check to-do"},uncheckTask:{id:"xEGGuR",defaultMessage:"Uncheck to-do"},unassignTaskFrom:{id:"m67M1N",defaultMessage:"Unassign to-do fromâ¦"},unassignTask:{id:"LcoZH/",
defaultMessage:"Unassign to-do"},selectAssignee:{id:"LZ/BFL",defaultMessage:"Unassign from whom?"},removeDueDate:{id:"ho2WfD",defaultMessage:"Clear due date"},setDueDate:{id:"OI6b9R",
defaultMessage:"Set due date"}}),v=(0,m.defineMessages)({task:{id:"qsU4Yn",defaultMessage:"Task"},checkbox:{id:"dj2VQg",defaultMessage:"Checkbox"},done:{id:"nzptIF",defaultMessage:"Done"},complete:{
id:"j7ONEU",defaultMessage:"Complete"},incomplete:{id:"lgmdpa",defaultMessage:"Incomplete"},uncheck:{id:"6VjN5L",defaultMessage:"Uncheck"},unmention:{id:"Fiowgr",defaultMessage:"Unmention"}}),b=(0,
m.defineMessages)({unassignError:{id:"bdAN0S",defaultMessage:"Must choose at least one assignee to unassign from"},noAssigneeError:{id:"w3JcC5",defaultMessage:"No assignees to remove"}}),y=function(){
function e(e){this.editor=e;this.id="check_task";this.label=p(f.checkTask);this.icon={type:"dig",icon:"ToDoLine"};this.hotkey=c.EditingHotkeys.ToggleCheckbox
;this.keywords=[p(v.task),p(v.checkbox),p(v.done),p(v.complete)];this.track={event:h.IntentionEvent.ToggleTask,wasCompleted:!1};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),
canEdit:(0,d.equals)("true"),lineType:(0,d.contains)("task")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_check_task",(function(){var t=e.editor.selection.getStart();e.editor.lists.toggleTaskLists(t.withCol(0),!0)}));return[2,{success:!0}]}))}))};return e}()
;t.CheckTaskCommand=y;var C=function(){function e(e){this.editor=e;this.id="uncheck_task";this.label=p(f.uncheckTask);this.icon={type:"dig",icon:"ToDoLine"};this.hotkey=c.EditingHotkeys.ToggleCheckbox
;this.keywords=[p(v.task),p(v.checkbox),p(v.incomplete),p(v.uncheck)];this.track={event:h.IntentionEvent.ToggleTask,wasCompleted:!0};this.available=(0,d.buildPredicate)({editorFocused:(0,
d.equals)("true"),canEdit:(0,d.equals)("true"),lineType:(0,d.contains)("taskdone")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this
;return n.__generator(this,(function(t){this.editor.execute("omnibar_uncheck_task",(function(){var t=e.editor.selection.getStart();e.editor.lists.toggleTaskLists(t.withCol(0),!1)}));return[2,{
success:!0}]}))}))};return e}();t.UncheckTaskCommand=C;var _=function(){function e(e,t){void 0===t&&(t=!1);var i=this;this.editor=e;this.chooseAssignees=t
;this.keywords=[p(v.task),p(v.checkbox),p(v.unmention)];this.track={event:h.IntentionEvent.RemoveTaskAssignee};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,
d.equals)("true"),lineType:(0,d.hasAnyOf)("task","taskdone"),taskAssignees:function(e){return e.length>(i.chooseAssignees?1:0)}})}Object.defineProperty(e.prototype,"id",{get:function(){
return this.chooseAssignees?"unassign_task_specific":"unassign_task_all"},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"label",{get:function(){
return this.chooseAssignees?p(f.unassignTaskFrom):p(f.unassignTask)},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"parameters",{get:function(){return this.chooseAssignees?[{
label:p(f.selectAssignee),key:"assignees",type:"select",provider:"taskAssigneesFromContext",mode:u.SelectParameterMode.Multiple,validator:function(e){return e&&e.length>0?{status:"ok"}:{
status:"error",error:p(b.unassignError)}}}]:[]},enumerable:!1,configurable:!0});e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,i=this
;return n.__generator(this,(function(n){if(!(t=this.chooseAssignees?e.parameterData.assignees:e.context.taskAssignees)||0===t.length)return[2,{success:!1,error:p(b.noAssigneeError)}]
;this.editor.execute("omnibar_unassign_task",(function(){for(var e=i.editor.getApool(),n=i.editor.selection.get(),l=n.start.zone,d=new s.Position(l,0,0),u=n.start.line;u<=n.end.line;u++){
var c=new s.Position(l,u,0),h=i.editor.contents.getLineType(c),m=o.parseListType(h)||{type:"none"};if(-1!==["task","taskdone"].indexOf(m.type)){
var p=i.editor.getReps(),f=p[l],v=f.lines.atIndex(u),b=a.builder(f.lines.totalWidth(),"Z",l),y=v.domInfo,C=y.text,_=y.aline,T=a.opIterator(_);(0,r.buildKeepRange)(p,b,d,c)
;g.buildChangesetUpdatingLineMentions(null,t,[],b,C,T,e);var P=b.toChangeset();a.isIdentity(P)||i.editor.contents.performDocumentApplyChangeset(P)}}}));return[2,{success:!0}]}))}))};return e}()
;t.UnassignTaskCommand=_;var T=function(){function e(e){this.editor=e;this.id="remove_task_due_date";this.label=p(f.removeDueDate);this.icon={type:"dig",icon:"CalendarLine"}
;this.keywords=[p(v.task),p(v.checkbox)];this.track={event:h.IntentionEvent.RemoveDueDate};this.available=(0,d.buildPredicate)({editorFocused:(0,d.equals)("true"),canEdit:(0,d.equals)("true"),
lineType:(0,d.hasAnyOf)("task","taskdone"),taskDueDate:(0,d.some)()})}e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_remove_task_due_date",(function(){for(var t=e.editor.selection.get(),i=t.start.zone,n=t.start.line;n<=t.end.line;n++){
var r=new s.Position(i,n,0),a=e.editor.contents.getLineType(r),l=o.parseListType(a)||{type:"none"}
;-1!==["task","taskdone"].indexOf(l.type)&&e.editor.contents.performDocumentApplyAttributesToRange(r,r.withCol(1),[["dueDate",""]])}}));return[2,{success:!0}]}))}))};return e}()
;t.RemoveTaskDueDateCommand=T},1814:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;t.InsertGardenCommand=t.InsertTimeIsoCommand=t.InsertTimeUtcCommand=t.InsertDateIsoCommand=t.InsertDateUtcCommand=t.InsertDateTimeCommand=t.InsertTimeCommand=t.InsertYesterdayCommand=t.InsertTomorrowCommand=t.InsertTodayCommand=t.InsertDateCommand=t.InsertBetterCommand=t.InsertWeeWooCommand=t.InsertGimmeCommand=t.InsertButAtWhatCostCommand=t.InsertYikesCommand=t.InsertFingerPointCommand=t.InsertDisapprovalCommand=t.InsertFixTableCommand=t.InsertFlipTableCommand=t.InsertShrugCommand=void 0
;var n=i(1),o=i(20),r=i(8),a=i(538),s=i(111),l=i(232),d=i(739),u=i(110),c=i(740),h=i(2),m=i(540),g=(0,i(5).PaperIntlFactory)()._f,p=(0,h.defineMessages)({insertShrug:{id:"zxwWKb",
defaultMessage:"Insert shrug"},insertFlipTable:{id:"Z+FIgR",defaultMessage:"Insert flip table"},insertFixTable:{id:"l7Z7wS",defaultMessage:"Insert fix table"},insertDisapproval:{id:"SlTvHo",
defaultMessage:"Insert disapproval"},insertFingerPoint:{id:"RhbkEH",defaultMessage:"Insert finger point"},insertYikes:{id:"Kp69uA",defaultMessage:"Insert yikes"},insertButAtWhatCost:{id:"9jPQGy",
defaultMessage:"Insert but at what cost"},insertGimme:{id:"JaUfMo",defaultMessage:"Insert gimme"},insertWeeWoo:{id:"cSUzWe",defaultMessage:"Insert wee woo"},insertBetter:{id:"AvKcQA",
defaultMessage:'Insert "Better in Paper" link'},insertToday:{id:"pcmen3",defaultMessage:"Insert todayâs date"},insertTomorrow:{id:"NV5/pr",defaultMessage:"Insert tomorrowâs date"},insertYesterday:{
id:"hIEu6h",defaultMessage:"Insert yesterdayâs date"},insertDate:{id:"+A9gin",defaultMessage:"Insert date"},insertTime:{id:"zyORz0",defaultMessage:"Insert time"},insertDatetime:{id:"VyRU6k",
defaultMessage:"Insert date and time"},insertDateutc:{id:"73SiP3",defaultMessage:"Insert UTC date"},insertDateiso:{id:"7mSYnF",defaultMessage:"Insert ISO-8601 date (YYYY-MM-DD)"},insertTimeutc:{
id:"6DHC9f",defaultMessage:"Insert UTC time"},insertTimeiso:{id:"3kw2Hx",defaultMessage:"Insert ISO-8601 datetime (YYYY-MM-DDTHH:mm:ss.sssZ)"},offsetParameter:{id:"wzZ5u5",
defaultMessage:'Offset from today (e.g., "Next Friday"), or leave blank to default to today'},offsetParameterError:{id:"4HdTwb",defaultMessage:"Could not understand relative date offset"},
insertGarden:{id:"bPwfBR",defaultMessage:"Insert garden"},selectGardenType:{id:"wmCJPN",defaultMessage:"Select garden typeâ¦"},noGardenTypeError:{id:"/a+cYM",
defaultMessage:"Please provide a garden type"}}),f=(0,s.buildPredicate)({editorFocused:(0,s.equals)("true"),canEdit:(0,s.equals)("true")});function v(e,t){e.execute("omnibar-insert-text",(function(){
var i=e.selection.getStart(),n=e.selection.getEnd();e.contents.performAttributePreservingDocumentReplaceRange(i,n,t)}))}var b=function(){function e(e){this.editor=e;this.id="insert_shrug"
;this.label=g(p.insertShrug);this.icon={type:"dig",icon:"EmojiSmileUpsideDownLine"};this.secret=!0;this.keywords=["/shrug"];this.available=f}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){v(this.editor,"Â¯\\_(ã)_/Â¯ ");return[2,{success:!0}]}))}))};return e}();t.InsertShrugCommand=b
;var y=function(){function e(e){this.editor=e;this.id="insert_fliptable";this.label=g(p.insertFlipTable);this.icon={type:"dig",icon:"EmojiFrownLine"};this.secret=!0;this.keywords=["/fliptable"]
;this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){v(this.editor,"(â¯Â°â¡Â°ï¼â¯ï¸µ â»ââ» ");return[2,{success:!0}]}))}))}
;return e}();t.InsertFlipTableCommand=y;var C=function(){function e(e){this.editor=e;this.id="insert_fixtable";this.label=g(p.insertFixTable);this.icon={type:"dig",icon:"EmojiSmileLine"}
;this.secret=!0;this.keywords=["/fixtable"];this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){
v(this.editor,"â¬âââ¬â¡ï¾(Â° -Â°ï¾) ");return[2,{success:!0}]}))}))};return e}();t.InsertFixTableCommand=C;var _=function(){function e(e){this.editor=e;this.id="insert_disapproval"
;this.label=g(p.insertDisapproval);this.icon={type:"dig",icon:"EmojiFrownLine"};this.secret=!0;this.keywords=["/disapproval"];this.available=f}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){v(this.editor,"à² _à²  ");return[2,{success:!0}]}))}))};return e}();t.InsertDisapprovalCommand=_;var T=function(){
function e(e){this.editor=e;this.id="insert_fingerpoint";this.label=g(p.insertFingerPoint);this.icon={type:"dig",icon:"EmojiSunglassesLine"};this.secret=!0;this.keywords=["/fingerpoint"]
;this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){v(this.editor,"(âï¾ã®ï¾)â â(ï¾ã®ï¾â) ");return[2,{success:!0}]}))}))}
;return e}();t.InsertFingerPointCommand=T;var P=function(){function e(e){this.editor=e;this.id="insert_yikes";this.label=g(p.insertYikes);this.icon={type:"dig",icon:"EmojiSmileUpsideDownLine"}
;this.secret=!0;this.keywords=["/yikes"];this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){v(this.editor,"(â__ââ) ")
;return[2,{success:!0}]}))}))};return e}();t.InsertYikesCommand=P;var w=function(){function e(e){this.editor=e;this.id="insert_butatwhatcost";this.label=g(p.insertButAtWhatCost);this.icon={type:"dig",
icon:"EmojiFrownLine"};this.secret=!0;this.keywords=["/butatwhatcost"];this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
return n.__generator(this,(function(e){v(this.editor,"á(à² çà² á) ");return[2,{success:!0}]}))}))};return e}();t.InsertButAtWhatCostCommand=w;var E=function(){function e(e){this.editor=e
;this.id="insert_gimme";this.label=g(p.insertGimme);this.icon={type:"dig",icon:"EmojiHeartEyesLine"};this.secret=!0;this.keywords=["/gimme"];this.available=f}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){v(this.editor,"à¼¼ ã¤ â_â à¼½ã¤ ");return[2,{success:!0}]}))}))};return e}();t.InsertGimmeCommand=E
;var k=function(){function e(e){this.editor=e;this.id="insert_weewoo";this.label=g(p.insertWeeWoo);this.icon={type:"dig",icon:"EmojiSunglassesLine"};this.secret=!0;this.keywords=["/weewoo"]
;this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){v(this.editor,"ðð¨WEEE WOOOð¨WEEE WOOOð¨ð ");return[2,{
success:!0}]}))}))};return e}();t.InsertWeeWooCommand=k;var I=function(){function e(e){this.editor=e;this.id="insert_better";this.label=g(p.insertBetter);this.secret=!0;this.keywords=["/better"]
;this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,i=this;return n.__generator(this,(function(n){e=(0,d.getBetterInPaperMarkdown)(this.editor)
;t=(0,m.convertMarkdownToHtml)(e);this.editor.execute("insert-better",(function(){var e=i.editor.selection.getStart(),n=i.editor.selection.getEnd()
;i.editor.contents.performDocumentReplaceRange(e,n,"");i.editor.paste.pasteHtmlAtCaret(t)}));return[2,{success:!0}]}))}))};return e}();t.InsertBetterCommand=I;var S=function(){function e(e){
this.editor=e;this.icon={type:"dig",icon:"ClockLine"};this.available=f;this.defaultValue="today"}e.prototype.parseRelativeDate=function(e){var t=a.ChronoLoadableLib.getOrAsyncLoad();if(t){
var i=new Date;return t.parseDate(e,i,{forwardDate:!0})}return null};Object.defineProperty(e.prototype,"parameters",{get:function(){var e=this;return[{defaultValue:[this.defaultValue],
label:g(p.offsetParameter),key:"offset",type:"string",validator:function(t){var i=t[0]||e.defaultValue;return e.parseRelativeDate(i)?{status:"ok"}:{status:"error",error:g(p.offsetParameterError)}}}]},
enumerable:!1,configurable:!0});e.prototype.run=function(e){var t;return n.__awaiter(this,void 0,Promise,(function(){var i,o,r;return n.__generator(this,(function(n){
i=(null===(t=e.parameterData.offset)||void 0===t?void 0:t[0])||this.defaultValue;if(o=this.parseRelativeDate(i)){r=this.format(o||new Date)+" ";v(this.editor,r);return[2,{success:!0}]}return[2,{
success:!1}]}))}))};return e}(),M=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.id="insert_date";t.label=g(p.insertDate);t.icon={type:"dig",icon:"ClockLine"
};t.keywords=["/date"];t.available=f;return t}t.prototype.format=function(e){return e.toLocaleDateString(r.default.userLocale,{year:"numeric",month:"long",day:"numeric"})};return t}(S)
;t.InsertDateCommand=M;var x=function(){function e(e){this.editor=e;this.id="insert_today";this.label=g(p.insertToday);this.icon={type:"dig",icon:"ClockLine"};this.keywords=["/today"];this.secret=!0
;this.available=f}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e;return n.__generator(this,(function(t){e=(new Date).toLocaleDateString(r.default.userLocale,{
year:"numeric",month:"long",day:"numeric"})+" ";v(this.editor,e);return[2,{success:!0}]}))}))};return e}();t.InsertTodayCommand=x;var L=function(){function e(e){this.editor=e;this.id="insert_tomorrow"
;this.label=g(p.insertTomorrow);this.icon={type:"dig",icon:"ClockLine"};this.keywords=["/tomorrow"];this.secret=!0;this.available=f}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e,t;return n.__generator(this,(function(i){(e=new Date).setDate(e.getDate()+1);t=e.toLocaleDateString(r.default.userLocale,{year:"numeric",
month:"long",day:"numeric"})+" ";v(this.editor,t);return[2,{success:!0}]}))}))};return e}();t.InsertTomorrowCommand=L;var F=function(){function e(e){this.editor=e;this.id="insert_yesterday"
;this.label=g(p.insertYesterday);this.icon={type:"dig",icon:"ClockLine"};this.keywords=["/yesterday"];this.secret=!0;this.available=f}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e,t;return n.__generator(this,(function(i){(e=new Date).setDate(e.getDate()-1);t=e.toLocaleDateString(r.default.userLocale,{year:"numeric",
month:"long",day:"numeric"})+" ";v(this.editor,t);return[2,{success:!0}]}))}))};return e}();t.InsertYesterdayCommand=F;var D=function(e){n.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.id="insert_time";t.label=g(p.insertTime);t.keywords=["/time"];return t}Object.defineProperty(t.prototype,"parameters",{get:function(){return[]},
enumerable:!1,configurable:!0});t.prototype.format=function(e){return e.toLocaleTimeString(r.default.userLocale,{hour:"numeric",minute:"numeric"})};return t}(S);t.InsertTimeCommand=D
;var A=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.id="insert_datetime";t.label=g(p.insertDatetime);t.keywords=["/datetime"];return t}
Object.defineProperty(t.prototype,"parameters",{get:function(){return[]},enumerable:!1,configurable:!0});t.prototype.format=function(e){return e.toLocaleTimeString(r.default.userLocale,{
year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})};return t}(S);t.InsertDateTimeCommand=A;var O=function(e){n.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.id="insert_dateutc";t.label=g(p.insertDateutc);t.keywords=["/dateutc","/dateu"];return t}Object.defineProperty(t.prototype,"parameters",{get:function(){
return[]},enumerable:!1,configurable:!0});t.prototype.format=function(e){return u.default.shortDateAndTimeUTC(e)};return t}(S);t.InsertDateUtcCommand=O;var R=function(e){n.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.id="insert_dateiso";t.label=g(p.insertDateiso);t.keywords=["/dateiso","/iso","/isodate"];return t}t.prototype.format=function(e){
return u.default.toISODate(e)};return t}(S);t.InsertDateIsoCommand=R;var N=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.id="insert_timeutc"
;t.label=g(p.insertTimeutc);t.icon={type:"dig",icon:"ClockLine"};t.keywords=["/timeutc","/timeu"];return t}Object.defineProperty(t.prototype,"parameters",{get:function(){return[]},enumerable:!1,
configurable:!0});t.prototype.format=function(e){return u.default.shortTimeUTC(e)};return t}(S);t.InsertTimeUtcCommand=N;var q=function(e){n.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.id="insert_timeiso";t.label=g(p.insertTimeiso);t.icon={type:"dig",icon:"ClockLine"};t.keywords=["/timeiso"];return t}
Object.defineProperty(t.prototype,"parameters",{get:function(){return[]},enumerable:!1,configurable:!0});t.prototype.format=function(e){return u.default.toISOString(e)};return t}(S)
;t.InsertTimeIsoCommand=q;var H=function(){function e(e){this.editor=e;this.id="insert_garden";this.label=g(p.insertGarden);this.icon={type:"dig",icon:"EmojiHeartEyesLine"};this.keywords=["/garden"]
;this.secret=!0;this.available=f}Object.defineProperty(e.prototype,"parameters",{get:function(){return[{label:g(p.selectGardenType),key:"type",type:"select",provider:"emojiGardenTypes",
mode:l.SelectParameterMode.Single,validator:function(e){return e&&1==e.length?{status:"ok"}:{status:"error",error:g(p.noGardenTypeError)}}}]},enumerable:!1,configurable:!0})
;e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,i;return n.__generator(this,(function(n){t=e.parameterData.type[0];i=(0,c.getEmojiGarden)(t);r=this.editor,a=i,
r.execute("omnibar-insert-text-line",(function(){var e=r.selection.getStart(),t=e=new o.Position(e.zone,e.line,e.col),i=r.getSelectedRep();if(i){
var n=i.lines.atIndex(t.line).text,s=t.withCol(0),l=t.withCol(n.length);r.contents.performDocumentReplaceRange(s,l,a)}}));var r,a;return[2,{success:!0}]}))}))};return e}();t.InsertGardenCommand=H},
1815:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.MobileEditorCommandProvider=void 0;var n=i(1),o=i(263),r=i(5),a=i(111),s=i(96),l=i(2),d=(0,r.PaperIntlFactory)()._f,u=(0,
l.defineMessages)({insertImage:{id:"otQ1h5",defaultMessage:"Insert Image"},insertDrawing:{id:"3IJh7E",defaultMessage:"Insert Drawing"},insertFromDropbox:{id:"XNNQwy",
defaultMessage:"Insert From Dropbox"},insertMention:{id:"K8+Tq3",defaultMessage:"Insert Mention"},dropboxFiles:{id:"FErH79",defaultMessage:"Dropbox filesâ¦"},setDueDate:{id:"rUd/iD",
defaultMessage:"Set Due Date"}}),c=(0,l.defineMessages)({noFilesError:{id:"LsBspR",defaultMessage:"Please provide Dropbox files"},invalidFilesError:{id:"SAxCiM",
defaultMessage:"Please provide valid files"}}),h=function(){function e(e){this.editor=e;this.id="insert_mention";this.label=d(u.insertMention);this.icon={type:"dig",icon:"MentionLine"}
;this.available=(0,a.buildPredicate)({editorFocused:(0,a.equals)("true"),canEdit:(0,a.equals)("true"),isTitle:(0,a.not)("true")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_insert_mention",(function(){
e.editor.callStack.getCurrentCallStack().alwaysHandleAutocompleteAtEnd=!0;var t=e.editor.selection.getStart();e.editor.contents.performDocumentReplaceRange(t,t,"@");e.editor.autolink.setAutolink(t)}))
;return[2,{success:!0}]}))}))};return e}(),m=function(){function e(e){this.editor=e;this.id="insert_from_dropbox";this.label=d(u.insertFromDropbox);this.icon={type:"dig",icon:"DropboxLine"}
;this.available=(0,a.buildPredicate)({editorFocused:(0,a.equals)("true"),canEdit:(0,a.equals)("true"),isTitle:(0,a.not)("true")})}Object.defineProperty(e.prototype,"parameters",{get:function(){
return[{label:d(u.dropboxFiles),key:"files",type:"string",validator:function(e){var t=[];if(e.length>0){var i=e[0];t=JSON.parse(i)}if(!t.length)return{status:"error",error:d(c.noFilesError)}
;for(var n=0,o=t;n<o.length;n++){var r=o[n];if(!r.name||!r.link||void 0===r.isDir)return{status:"error",error:d(c.invalidFilesError)}}return{status:"ok"}}}]},enumerable:!1,configurable:!0})
;e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t=this;return n.__generator(this,(function(i){this.editor.execute("omnibar_insert_from_dropbox",(function(){
var i=e.parameterData.files[0],n=JSON.parse(i);(0,o.insertDropboxInAce)(t.editor,n)}));return[2,{success:!0}]}))}))};return e}(),g=function(){function e(e,t){this.app=e;this.editor=t
;this.id="insert_image";this.label=d(u.insertImage);this.icon={type:"dig",icon:"ImageLine"};this.available=(0,a.buildPredicate)({editorFocused:(0,a.equals)("true"),canEdit:(0,a.equals)("true"),
isTitle:(0,a.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_insert_image",(function(){e.app.trigger("omnibar_insert_image",void 0)}));return[2,{success:!0}]}))}))};return e}(),p=function(){function e(e,t){this.app=e;this.editor=t
;this.id="insert_drawing";this.label=d(u.insertDrawing);this.icon={type:"dig",icon:"ScribbleLine"};this.available=(0,a.buildPredicate)({editorFocused:(0,a.equals)("true"),canEdit:(0,a.equals)("true"),
isTitle:(0,a.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_insert_drawing",(function(){e.app.trigger("omnibar_insert_drawing",void 0)}));return[2,{success:!0}]}))}))};return e}(),f=function(){function e(e,t){this.app=e
;this.editor=t;this.id="set_task_due_date";this.label=d(u.setDueDate);this.icon={type:"dig",icon:"CalendarLine"};this.available=(0,a.buildPredicate)({editorFocused:(0,a.equals)("true"),canEdit:(0,
a.equals)("true"),lineType:(0,a.contains)("task")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_set_task_due_date",(function(){var t=e.editor.contents.getTaskAttributesForLine();e.app.trigger("omnibar_set_task_due_date",t)}));return[2,{success:!0}]}))}))};return e
}(),v=function(e){n.__extends(t,e);function t(t,i){var n=e.call(this)||this;n.app=t;n.editor=i
;n.commands=[new g(n.app,n.editor),new p(n.app,n.editor),new m(n.editor),new h(n.editor),new f(n.app,n.editor)];return n}t.prototype.getCommands=function(){return this.commands};return t
}(s.BaseProvider);t.MobileEditorCommandProvider=v},1816:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.maybeShowDesktopRedirectPrefToast=t.coolOffPeriod=void 0
;var n=i(1),o=i(169),r=i(596),a=i(21),s=i(2),l=i(114),d=i(14),u=i(0),c=i(48),h=i(4),m=(0,d.MsgFactory)("composer"),g=m.defineMessages,p=m.F,f=g({prefToastTitle:{msg:"Always open in browser"},
prefToastContent:{msg:"Would you like to always open Paper links in the browser?"},prefToastCTA:{msg:"Yes, I prefer the browser"},prefToastDone:{msg:"Not now"},postCTATitle:{msg:"Preference saved"},
postCTAContent:{msg:"Links to Paper docs will now open in your browser. You can change this preference in your settings."},postDismissTitle:{msg:"Got it"},postDismissContent:{
msg:"You can always change your preference in your settings."}});(0,s.defineMessages)({prefToastTitle:{id:"PS29gk",defaultMessage:"Always open in browser"},prefToastContent:{id:"feI5lt",
defaultMessage:"Would you like to always open Paper links in the browser?"},prefToastCTA:{id:"CwKYBT",defaultMessage:"Yes, I prefer the browser"},prefToastDone:{id:"5FcUkH",defaultMessage:"Not now"},
postCTATitle:{id:"4sPtsc",defaultMessage:"Preference saved"},postCTAContent:{id:"PhfIRG",
defaultMessage:"Links to Paper docs will now open in your browser. You can change this preference in your settings."},postDismissTitle:{id:"W4An+g",defaultMessage:"Got it"},postDismissContent:{
id:"gebZMX",defaultMessage:"You can always change your preference in your settings."}});function v(e,t){var i=u.createElement("div",{className:"pathways-post-preference-toast"},u.createElement("div",{
className:"pathways-post-preference-toast__title"},e),u.createElement("div",{className:"pathways-post-preference-toast__content"},t));return c.default.showInfoToast({message:i,alignLeft:!0,
autoDismiss:!0,autoDismissDelayMs:5e3})}t.coolOffPeriod=7;t.maybeShowDesktopRedirectPrefToast=function(){
var e=l.localStorage.getNumber(r.ApolloPathwaysLocalStorageKeys.ContinuePadInWebCount)||0,i=l.localStorage.getBoolean(r.ApolloPathwaysLocalStorageKeys.DismissedDesktopRedirectPrefToast),s=o.isApolloEnabled()&&o.isDesktopAutoRedirectEnabledForDevice()&&(!i&&e>=2||e>=t.coolOffPeriod&&e%t.coolOffPeriod==0),d=function(){}
;if(s){var m=function(){l.localStorage.setItem(r.ApolloPathwaysLocalStorageKeys.DismissedDesktopRedirectPrefToast,"1");d()};(0,h.trackEng)("pathways preference-toast shown")
;d=c.default.show(u.createElement(c.default,{alignLeft:!0,disableOldLayout:!0,clickToDismiss:!1,actions:u.createElement(u.Fragment,null,u.createElement(a.default,{variant:"transparent",inverse:!0,
"track-title":"always-web",onClick:function(){(0,h.trackEng)("pathways preference-toast click-cta");o.disableDesktopAutoRedirectForDevice();m()
;v(u.createElement(p,n.__assign({},f.postCTATitle)),u.createElement(p,n.__assign({},f.postCTAContent)))}},u.createElement(p,n.__assign({},f.prefToastCTA))),u.createElement(a.default,{
variant:"transparent",inverse:!0,"track-title":"no-thanks",onClick:function(){(0,h.trackEng)("pathways preference-toast click-dismiss");m()
;v(u.createElement(p,n.__assign({},f.postDismissTitle)),u.createElement(p,n.__assign({},f.postDismissContent)))}},u.createElement(p,n.__assign({},f.prefToastDone))))},u.createElement("div",{
className:"pathways-preference-toast"
},u.createElement("b",null,u.createElement(p,n.__assign({},f.prefToastTitle))),u.createElement("br",null),u.createElement("br",null),u.createElement(p,n.__assign({},f.prefToastContent)))))}return d}},
1817:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.textFromFocusError=t.FocusError=void 0;var n,o=i(8),r=i(2),a=i(14),s=i(17),l=(0,
a.MsgFactory)("ace"),d=l.defineMessages,u=l.IntlMessageFormat;!function(e){e[e.ThreadResolved=1]="ThreadResolved";e[e.ThreadDeleted=2]="ThreadDeleted";e[e.ThreadDetached=3]="ThreadDetached"
;e[e.ThreadNotFound=4]="ThreadNotFound";e[e.LineNotFound=5]="LineNotFound";e[e.HeadingNotFound=6]="HeadingNotFound"}(n=t.FocusError||(t.FocusError={}));var c=d({ThreadResolved:{
msg:"Comment thread was resolved.",
description:"When a user attempts to navigate to a page and view a comment thread, but the comment thread has been resolved (meaning, for example, the concern brought up in the comment has been resolved, and thus the comment removed). A 'comment thread' is a sequence of comments that together forms a conversation."
},ThreadDeleted:{msg:"Comment thread was deleted.",
description:"When a user attempts to navigate to a page and view a comment thread, but the comment thread has been deleted. A 'comment thread' is a sequence of comments that together forms a conversation."
},ThreadDetached:{msg:"Comments referred to something that was deleted.",
description:"When a user attempts to navigate to a page and view a comment thread, but the comment refers to text which has been deleted."},ThreadNotFound:{msg:"Couldnât find this comment thread.",
description:"The user is trying to view a comment thread which could not be found."},LineNotFound:{msg:"Couldnât find that link.",
description:"The user followed a link to a particular line of a document, but that line cannot be found (possibly because it was deleted)"},HeadingNotFound:{msg:"Couldnât find that link.",
description:"The user followed a link to a particular section heading of a document, but that line cannot be found (possibly because it was deleted)"},Fallback:{
msg:"Linked to something that was deleted."}});(0,r.defineMessages)({ThreadResolved:{id:"fSHPm/",defaultMessage:"Comment thread was resolved."},ThreadDeleted:{id:"NGkHVl",
defaultMessage:"Comment thread was deleted."},ThreadDetached:{id:"Iis10w",defaultMessage:"Comments referred to something that was deleted."},ThreadNotFound:{id:"pVPuHa",
defaultMessage:"Couldnât find this comment thread."},LineNotFound:{id:"8f3qmd",defaultMessage:"Couldnât find that link."},HeadingNotFound:{id:"UXyg7z",defaultMessage:"Couldnât find that link."},
Fallback:{id:"iFOcvN",defaultMessage:"Linked to something that was deleted."}});t.textFromFocusError=function(e){var t=n[e];if(t in c){var i=new u(c.Fallback,o.default.userLocale).format()
;return new u(c[t],o.default.userLocale,i).format()}s.default.error.logException("Bad focus error");return"unknown focus error"}},1828:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})
;t.KeyPerfMonitorImpl=void 0;var i=function(){function e(e){this.keyPerfTrackers=e;this.alive=!1;this.extraDataFetcher=function(){return null}}e.prototype.start=function(e){void 0===e&&(e=function(){
return null});if(this.alive)throw new Error("duplicate call to KeyPerfMonitorImpl.start");this.extraDataFetcher=e;this.alive=!0};e.prototype.stop=function(){this.alive=!1
;this.extraDataFetcher=function(){return null}};e.prototype.track=function(e){var t=this;if(this.alive)return Promise.all(this.keyPerfTrackers.map((function(i){
return i.onKeyEvent(e,t.extraDataFetcher)})));throw new Error("tracking a key perf event when the monitor is not alive")};return e}();t.KeyPerfMonitorImpl=i},1829:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});t.SampledKeyPerfTrackerImpl=void 0;var n=i(1),o=i(38),r=i(4),a=function(){function e(e,t){this.clock=e;this.type=t}
e.prototype.onKeyEvent=function(e,t){var i=this;return new Promise((function(a){if(e.type===i.type){if(0==o.getRandomInt(0,100)){var s=i.clock.now();setTimeout((function(){
var e=i.clock.now(),o=Math.round(e-s);(0,r.trackEng)("key-perf-sampled-".concat(i.getType()),n.__assign({name:i.getTrackerName(),latency:o},t()));a()}),1)}else a()}else a()}))}
;e.prototype.getType=function(){return this.type};e.prototype.getTrackerName=function(){return"SampledKeyPerfTracker"};return e}();t.SampledKeyPerfTrackerImpl=a},318:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(3),r=i(99),a=i(771),s=i(11),l=i(10),d=i(1726),u=i(0),c=i(36),h=function(e){n.__extends(t,e);function t(t){var i=e.call(this,t)||this
;i.debugInfoStore=a.default.getInstance();i.openPopup=function(){var e=document.createElement("div");document.body.appendChild(e);c.reactDomRender(u.createElement(d.default,{csiData:i.state.csiData,
debugInfoStore:i.debugInfoStore,perfCloseButton:i.props.perfCloseButton}),e)};i.state={csiData:{}};return i}t.prototype.componentDidMount=function(){var e=this
;this.events.on(this.props.app,"perf-profile-menu-button-update",(function(){var t=e.props.app.getNavigationProfile();t&&e.setState({csiData:t.getPerfTicks()})}))};t.prototype.render=function(){
var e=0,t=0,i=0;for(var n in this.state.csiData){var a=Math.round(this.state.csiData[n]);e=Math.max(a,e);"timeToView"==n&&(t=a);"timeToInteractive"==n&&(i=a)}var s=o({notranslate:!0,
"hp-perf-button":!this.props.mobileStyle,"hp-perf-button-warning":t>1e3});return u.createElement(l.default,{className:s,secondary:!0,onClick:this.openPopup
},t||e,"ms",r.isOn("show-tti-tick")?"/".concat(i-t,"ms"):"")};t.displayName="PerfButton";return t=n.__decorate([s.default],t)}(u.PureComponent);t.default=h},320:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});t.ManagedThemeService=t.WebThemeService=void 0;var n=i(184),o=i(4),r=i(61),a=i(216),s=i(341);function l(){0
;return window.matchMedia&&window.matchMedia(n.DARK_MODE_QUERY).matches?"dark":"light"}var d=function(){function e(){var e=this;this.eventEmitter=new a.EventEmitter;this.on=this.eventEmitter.on
;this.off=this.eventEmitter.off;this.once=this.eventEmitter.once;this.systemTheme=l();this.updateSystemTheme=function(){e.systemTheme=l();if("system"==e.theme){c(e.getTheme());e.emitChange()}
o.IntentionEvent.SystemThemeChange.track({theme:e.getTheme(),systemTheme:e.systemTheme})};window.matchMedia&&window.matchMedia(n.DARK_MODE_QUERY).addListener(this.updateSystemTheme);this.theme=(0,
n.initialTheme)();c(this.getTheme());o.IntentionEvent.InitialTheme.track({theme:this.getTheme(),systemTheme:this.systemTheme})}e.prototype.getTheme=function(){
return"system"==this.theme?this.systemTheme:this.theme};e.prototype.getThemePref=function(){return this.theme};e.prototype.setTheme=function(e,t){this.theme=e;c(this.getTheme())
;(null==t?void 0:t.doNotPersist)||this.updateSavedPref();this.emitChange();o.IntentionEvent.ChangeTheme.track({theme:this.getTheme(),systemTheme:this.systemTheme})}
;e.prototype.isSystemThemeControlSupported=function(){return window.matchMedia&&window.matchMedia("not all and ".concat(n.DARK_MODE_QUERY,", ").concat(n.DARK_MODE_QUERY)).matches}
;e.prototype.overrideTheme=function(e){this.theme=e;c(this.getTheme());this.emitChange();o.IntentionEvent.OverrideTheme.track({theme:this.getTheme(),systemTheme:this.systemTheme})}
;e.prototype.emitChange=function(){this.eventEmitter.emit("change",this.getTheme());this.eventEmitter.emit("changePref",this.getThemePref())};e.prototype.updateSavedPref=function(){
n.themePreference.set(this.theme)};return e}();t.WebThemeService=d;var u=function(){function e(){this.eventEmitter=new a.EventEmitter;this.on=this.eventEmitter.on;this.off=this.eventEmitter.off
;this.once=this.eventEmitter.once;this.theme="light";!function(){var e="desktop_paper_theme_override",t="desktop_paper_is_using_system_key";if(localStorage){var i=localStorage.getItem(e);if(i){
n.desktopThemePref.set(i);localStorage.removeItem(e)}var o=localStorage.getItem(t);if(o){n.desktopUsesSystemPref.set(o);localStorage.removeItem(t)}}}()
;this.theme=this.validateTheme(n.desktopThemePref.get());this.isUsingSystemTheme="true"===n.desktopUsesSystemPref.get();c(this.theme);o.IntentionEvent.InitialTheme.track({theme:this.theme})}
e.prototype.validateTheme=function(e){switch(e){case"dark":case"light":case"system":return e;default:return"light"}};e.prototype.setTheme=function(e,t){this.theme=e
;this.isUsingSystemTheme=!!(null==t?void 0:t.isThemeControlledBySystem);"system"!==this.theme&&c(e);n.desktopThemePref.set(this.theme);n.desktopUsesSystemPref.set(this.isUsingSystemTheme.toString())
;this.emitChange(!!(null==t?void 0:t.isRespondingToNative));o.IntentionEvent.ChangeTheme.track({theme:this.theme})};e.prototype.getTheme=function(){return this.theme}
;e.prototype.getThemePref=function(){return this.isUsingSystemTheme?"system":this.theme};e.prototype.isSystemThemeControlSupported=function(){if(r.default.paperDesktop){
var e=r.default.paperDesktopVersion;if(e){return s.BuildVersion.fromString("1.137.0").compare(e)<=0}}return!1};e.prototype.emitChange=function(e){void 0===e&&(e=!1)
;this.eventEmitter.emit("change",this.getTheme());e||this.eventEmitter.emit("changeFromWeb",this.theme);this.eventEmitter.emit("changePref",this.getThemePref())};return e}();t.ManagedThemeService=u
;function c(e){document.documentElement.classList.toggle("dig-Theme--dark","dark"==e);document.documentElement.classList.add("paper-dig-base")
;document.documentElement.classList.toggle("paper-dig-dark","dark"==e)}},647:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.MobileCommentsUI=void 0
;var n=i(1),o=i(646),r=i(645),a=i(8),s=i(195),l=i(2),d=i(59),u=i(10),c=i(28),h=i(1801),m=i(0),g=i(24),p=i(13),f=i(18),v=(0,i(5).PaperIntlFactory)().F,b=(0,l.defineMessages)({comments:{id:"/OBuIO",
defaultMessage:"Comments"},post:{id:"eFisP/",defaultMessage:"Post"}}),y=function(e){n.__extends(t,e);function t(t){var i=e.call(this,t)||this
;i.editorComponents=["#padeditor",".hp-doclist-search-box-container","#main-header"];i.commentPageComponents=["#comments-sidebar"];i.eventEmitter=new d.EventEmittingClass;i.on=i.eventEmitter.on
;i.off=i.eventEmitter.off;i.once=i.eventEmitter.once;i.trigger=i.eventEmitter.trigger;i.handleEditableStateChanged=function(){var e=i.canCreateComments();e!=i.state.canCreateComments&&i.setState({
canCreateComments:e})};i.handleWindowResize=(0,s.debounceAndDelayUntilPageLoad)((function(){i.getHighlightThread()&&i.getHighlightThread().scrollThreadToBottom(!1)}),33);i.refreshThreads=function(){
i.setState({threads:i.mainAce.comments.getAllThreads(!1)})};i.isMarkingUnsaved=!1;i.onChange=function(){
i.state.highlightThreadId&&!i.mainAce.dom.getRoot().querySelector(".ace-line .thread-"+i.state.highlightThreadId)&&i.forceUpdate()};i.onCancel=function(){i.leaveCommentPage()};i.onPost_=function(){
var e=i.state.highlightThreadId,t=i.getCommentThread(e);t&&t.refs.commentEntry&&t.refs.commentEntry.postComment()};i.childRedraw_=function(){var e=!!i.highlightNewThreadHasEdits()
;i.state.isHighlightThreadDirty!=e&&i.setState({isHighlightThreadDirty:e})};i.onCommentThreadDeleted_=function(){c.isPhone()&&i.leaveCommentPage()};i.handleRequestAnnotation=function(e,t){}
;i.mainAce=i.props.mainAce;i.mainAce.comments.on("updated-thread",i.refreshThreads);i.mainAce.comments.on("new-thread",i.refreshThreads);i.mainAce.observer.on("change-debounced",i.onChange)
;i.mainAce.observer.on("resize",i.handleWindowResize);i.mainAce.observer.on("editable-state-changed",i.handleEditableStateChanged);i.state={threads:i.mainAce.comments.getAllThreads(!1),
highlightThreadId:null,isHighlighting:!1,isHighlightThreadDirty:!1,markingUnsaved:!1,canCreateComments:i.canCreateComments()};i.showComments(!0);return i}t.prototype.dispose=function(){var e,t,i
;this.mainAce.comments.off("updated-thread",this.refreshThreads);this.mainAce.comments.off("new-thread",this.refreshThreads);if(this.mainAce){
null===(e=this.mainAce.observer)||void 0===e||e.off("change-debounced",this.onChange);null===(t=this.mainAce.observer)||void 0===t||t.off("resize",this.handleWindowResize)
;null===(i=this.mainAce.observer)||void 0===i||i.off("editable-state-changed",this.handleEditableStateChanged)}};t.prototype.canCreateComments=function(){
return a.default.isSignedIn()&&this.mainAce.contents.getIsCommentable()};t.prototype.setMarkingUnsaved=function(e){if((e=!!e)!==this.isMarkingUnsaved){this.isMarkingUnsaved=e;this.setState({
markingUnsaved:e})}};t.prototype.focusCommentEntry=function(e){var t=this.getCommentThread(e);t&&t.refs.commentEntry&&t.refs.commentEntry.focus()};t.prototype.getCommentThread=function(e){
return this.refs["thread-"+e]};t.prototype.getHighlightThread=function(){return this.getCommentThread(this.state.highlightThreadId)};t.prototype.enterCommentPage=function(){var e=this
;this.trigger("before-comment-page-enter",void 0);return h.async().then((function(){e.getHighlightThread().scrollThreadToBottom(!1)})).then((function(){(0,
f.toggleClass)(document.body,"hp-highlighting-comment",!0)})).then((function(){
var t=c.addPageTransition(e.editorComponents.join(","),"fadeOut"),i=c.addPageTransition(e.commentPageComponents.join(","),"zoomIn");return Promise.all([t,i]).then((function(){
e.trigger("after-comment-page-enter",void 0)}))}))};t.prototype.leaveCommentPage=function(){var e=this;this.trigger("before-comment-page-leave",void 0)
;var t=this.state.highlightThreadId,i=this.getCommentThread(t);return h.async().then((function(){
var t=c.removePageTransition(e.editorComponents.join(","),"fadeOut"),n=c.removePageTransition(e.commentPageComponents.join(","),"zoomIn");Promise.all([t,n]).then((function(){i&&i.onCancel()
})).then((function(){(0,f.toggleClass)(document.body,"hp-highlighting-comment",!1)})).then((function(){e.trigger("after-comment-page-leave",void 0)}))}))};t.prototype.onResolve=function(){
this.getHighlightThread().delete()};t.prototype.highlightThreadAtNode=function(e,t,i){var n=this,o=this.mainAce.dom.getRoot();null==o||o.blur();this.showComments(!0);this.setState({
highlightThreadId:e,isHighlighting:!0},(function(){i&&i();n.enterCommentPage()}))};t.prototype.clearHighlightThread=function(){this.setState({isHighlighting:!1,highlightThreadId:null})}
;t.prototype.highlightNewThreadHasEdits=function(){if(this.state.highlightThreadId){var e=this.getHighlightThread();return e&&e.hasEdits()}return!1};t.prototype.anyThreadHasNewEdits=function(){
return this.highlightNewThreadHasEdits()};t.prototype.hoverThread=function(e){};t.prototype.unhoverThread=function(e){};t.prototype.isPadEditable=function(){
return this.mainAce.padController&&this.mainAce.padController.isPadEditable()};t.prototype.render=function(){var e;if(this.state.isHighlighting&&this.state.highlightThreadId){
var t=this.mainAce.comments.getThread(this.state.highlightThreadId);t&&(e=m.createElement(r.CommentThread,{ref:"thread-"+t.id,key:"thread-"+t.id,onOpenLink:this.props.onOpenLink,mainAce:this.mainAce,
stores:this.props.stores,app:window.App,thread:t,isHighlight:!0,redraw:this.childRedraw_,isHovered:!0,isPadEditable:this.isPadEditable(),showContext:!0,canCreateComments:this.state.canCreateComments,
markingUnsaved:this.state.markingUnsaved,onCommentThreadDeleted:this.onCommentThreadDeleted_,draftComments:null}))}return m.createElement(l.IntlProvider,{locale:a.default.userLocale
},m.createElement("div",null,m.createElement("div",{id:"comments-sidebar-header"},m.createElement("div",{className:"mobile-comment-header"},m.createElement(u.default,{className:"mobile-comment-close",
onClick:this.onCancel},m.createElement(p.default,{name:"close-mobile"})),m.createElement("div",{className:"comment-title"},m.createElement(v,n.__assign({},b.comments))),m.createElement(u.default,{
className:"mobile-comment-post",disabled:!this.state.isHighlightThreadDirty,onClick:this.onPost_},m.createElement(v,n.__assign({},b.post))))),m.createElement("div",{className:"comments-sidebar-body",
ref:"commentsSidebarBody"},e)))};t.dispose=function(e){var t=e.commentsController.getCommentsUI();if(t){t.dispose();e.commentsController.unlinkCommentsUI();var i=g.findDOMNode(t).parentNode
;g.unmountComponentAtNode(i)}};return t}(o.CommentsUI);t.MobileCommentsUI=y},648:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.PadPageBase=void 0
;var n=i(1),o=i(20),r=i(449),a=i(364),s=i(647),l=i(396),d=i(225),u=i(74),c=i(47),h=i(8),m=i(45),g=i(14),p=i(6),f=i(24),v=i(934),b=i(935),y=i(1815),C=i(936),_=i(937),T=i(938),P=i(939),w=i(940),E=i(941),k=i(942),I=i(313),S=i(943),M=i(944),x=i(945),L=i(946),F=i(947),D=i(75),A=i(491),O=i(397),R=i(147),N=(i(593),
i(948)),q=i(1816),H=i(1817),U=i(492),B=i(115),V=i(716),j=i(949),W=i(451),G=i(143),z=i(90),Z=i(119),K=i(88),Q=i(48),Y=i(50),J=i(11),X=i(950),$=i(951),ee=i(66),te=i(138),ie=i(28),ne=i(12),oe=i(195),re=i(39),ae=i(18),se=i(32),le=i(228),de=i(1828),ue=i(1829),ce=i(453),he=i(560),me=i(4),ge=i(17),pe=i(29),fe=i(0),ve=i(2),be=i(248),ye=i(30),Ce=i(7),_e=i(172),Te=i(85),Pe=i(27),we=i(61),Ee=i(160),ke=(0,
g.MsgFactory)("composer"),Ie=ke.defineMessages,Se=ke.F,Me=ke.IntlMessageFormat,xe=Ie({archive:{msg:"Archive"},archiveDismiss:{msg:"Keep doc",
description:"This one of the two options given when the user converts a doc to a template and is prompted if they want to archive or keep the original doc."},archivePrompt:{
msg:"Template created. Archive the original doc or keep it active?",description:"This message is shown when a user converts a doc to a template."},archiveSuccess:{msg:"Original doc archived.",
description:"This message is show after a user archives a doc that they turned into a template."},close:{msg:"Close"},unsavedChangesDialogHeader:{msg:"Please Confirm"},
unsavedChangesDialogLeaveButton:{msg:"Leave"},unsavedChangesWarning:{msg:"This doc has unsaved changes. Do you want to leave and discard your changes?",
description:"This message is shown to the user when they attempt to leave, if they have made unsaved edits that would be lost."},unsavedCommentsTitle:{msg:"Leave without posting?",
description:'This title of a popup shown when a user attempts to leave the page with unposted comments. The body says "You have one or more unposted comments. If you leave now, those comments will be lost."'
},unsavedCommentsWarning:{msg:"You have one or more unposted comments. If you leave now, those comments will be lost.",
description:"This message is shown to the user when they attempt to leave, if they have made unsaved comments that would be lost."},unsavedCommentsWarningFallback:{
msg:"This doc has unsaved comments. Do you want to leave and discard your changes?",
description:"This message is shown to the user when they attempt to leave, if they have made unsaved comments that would be lost."},unsavedImagesWarning:{
msg:"One or more images are still uploading. Do you want to leave and discard them?",
description:"This message is shown to the user when they attempt to leave, if they have added unsaved images that would be lost."},unsavedCaptionWarning:{
msg:"This doc has unsaved captions. Do you want to leave and discard your changes?",
description:"This message is shown to the user when they attempt to leave, if they have added unsaved captions that would be lost."},templatecopiedandaddedtoyourlibrary:{
msg:"Template copied and added to your library."},templatecreatedandaddedtoyourlibrary:{msg:"Template created and added to your library."},doccreatedfromtemplate:{msg:"Doc created from template."}
}),Le=((0,ve.defineMessages)({archive:{id:"JiHG/V",defaultMessage:"Archive"},archiveDismiss:{id:"0SLEbU",defaultMessage:"Keep doc"},archivePrompt:{id:"1VL13Q",
defaultMessage:"Template created. Archive the original doc or keep it active?"},archiveSuccess:{id:"b+wI6/",defaultMessage:"Original doc archived."},close:{id:"u/p3Pl",defaultMessage:"Close"},
unsavedChangesDialogHeader:{id:"tZlc9/",defaultMessage:"Please Confirm"},unsavedChangesDialogLeaveButton:{id:"fjUgqX",defaultMessage:"Leave"},unsavedChangesWarning:{id:"NfzIsh",
defaultMessage:"This doc has unsaved changes. Do you want to leave and discard your changes?"},unsavedCommentsTitle:{id:"oV0O+w",defaultMessage:"Leave without posting?"},unsavedCommentsWarning:{
id:"ZOH+64",defaultMessage:"You have one or more unposted comments. If you leave now, those comments will be lost."},unsavedCommentsWarningFallback:{id:"etvmc0",
defaultMessage:"This doc has unsaved comments. Do you want to leave and discard your changes?"},unsavedImagesWarning:{id:"Gt4Zbe",
defaultMessage:"One or more images are still uploading. Do you want to leave and discard them?"},unsavedCaptionWarning:{id:"rPPd8w",
defaultMessage:"This doc has unsaved captions. Do you want to leave and discard your changes?"},templatecopiedandaddedtoyourlibrary:{id:"faR+5z",
defaultMessage:"Template copied and added to your library."},templatecreatedandaddedtoyourlibrary:{id:"dCq0RU",defaultMessage:"Template created and added to your library."},doccreatedfromtemplate:{
id:"GnX+hO",defaultMessage:"Doc created from template."}}),function(e){n.__extends(t,e);function t(t){var a=e.call(this,t)||this;a.debugInstanceId=0;a.editorId="editor";a.isLoading=!0
;a.prevScrollTop=null;a.fullscreenElement=null;a.isComponentMounted=!1;a.removePageLoadListener=function(){};a.ace=null;a.aceUI=null;a.folderSidebarWrapper=null;a.isNativeMobile=!1
;a.setFolderSidebarWrapper=function(e){a.folderSidebarWrapper=e};a.setFolderSidebarIsOpen=function(e){e!=a.state.isFolderSidebarOpen&&a.setState({isFolderSidebarOpen:e})};a._onAceCreated=function(e){
a.onAceCreated(e)};a._onAceUIMounted=function(e){a.onAceUIMounted(e)};a.handleOmnibarContextChange=function(e){var t,i=e.context
;i&&"true"===(null===(t=i.docTrashed)||void 0===t?void 0:t.toString())&&a.setState({deletedPadClientVars:n.__assign(n.__assign({},a.state.deletedPadClientVars),{isTrashed:!0})})}
;a.handlePresent=function(e){e.preventDefault();a.onOpenPresenter()};a.handlePrint=function(e){e.preventDefault();me.IntentionEvent.PrintDialogShown.track({keyboard:!0});a.onPrintPad()}
;a.handleSelectAll=function(e){a.getMainAce()&&a.getMainAce().selection&&(0,r.handleSelectAllCommand)(a.getMainAce(),e)};a.saveScrollPosition=function(){var e=a.getMainAce()
;e&&(a.prevScrollTop=e.dom.getScrollTop())};a.handleFullScreen=function(){var e=X.getFullscreenElement();if(e&&"IFRAME"==e.nodeName)a.fullscreenElement=e;else if(a.fullscreenElement){
a.fullscreenElement.scrollIntoView({block:"center"});a.fullscreenElement=null}};a.handleMissingAuthors=function(e){ne.post({url:"/ep/pad/add-authors",data:{list:e.join("|"),
padId:a.padController.getPadId()},analyticsTag:"add-authors",shardingKey:ne.getShardingKeyForPad(a.padController.padId),successHandler:function(e){a.addHistoricalAuthors(e)}})}
;a.handleBeforeUnload=function(e){var t=a.checkForUnsavedChanges();if(t){(0,me.track)("notify-tried-leave",{ajax:!1});e.returnValue=t.message;return t.message}};a.handleBeforePrint=function(){
me.IntentionEvent.PrintDialogShown.track({system:!0})};a.handleOpenLink=function(e,t,i){return a.handleOpenLink_(e,t,i)};a.focusGivenFocusOptions=function(e,t){var i=a.getMainAce();if(e.threadId){
if(ie.isNativeMobileApp()&&i.options.nativeLightboxAvailable&&1==t.success){var n=i.media.getGalleryItemAtLine(t.zone,t.line,e.threadId);if(n){i.media.open(n,!1,e.threadId);return}}
i.commentsController&&i.commentsController.openCommentThreadAndFocus(e.threadId,{forceShow:!1,scrollOnlyIfOffscreen:!0,hideCommentContextForNative:!0})
}else(e.aceHash||e.headingLine||e.headingLine2||e.aceHash2||e.usuallyUniqueIds||e.timelineItemId)&&i.execute("gotoline",(function(){if(t.success){var n=new o.Position(t.zone,t.line,0)
;i.selection.set(n);var r=i.getRep(n.zone).lines.atIndex(n.line).lineNode;i.getViewport().scrollIntoViewIfNeeded(r);if(e.highlightLine){var s=i.dynamicCSS,l="#"+r.id,d=s.selectorStyle(l)
;d.animation="background-color 1s";d.backgroundColor=ye.default.color_blue_sixteen;a.timers.setTimeout((function(){d.backgroundColor="transparent";a.timers.setTimeout((function(){
return s.removeSelectorStyle(l)}),1e3)}),2e3)}var u=void 0,c=void 0,h=void 0;if(e.threadId){var m=i.commentsController.getContentNodesForThreadId(e.threadId)[0]
;c=(u=m&&i.media.getGallery(m))&&u.getIndexForEl(m);h=!0}else if(e.aceHash){if(u=i.managers.getLineManager(n.zone,n.line,"gallery")){c=0;h=!1;i.focus()}}else if(e.timelineItemId){
var g=i.managers.getLineManager(n.zone,n.line,"timeline");g&&g.selectItem(e.timelineItemId)}if(u&&null!==c){u.selectItem(c);var f=u.getElAtIndex(c);f&&h&&p.defer((function(){
i.media.open(f,!1,e.threadId)}))}}}))};a.getErrorForFocusOptions=function(e,t,i){if(e.threadId){var n=a.getMainAce().commentsController
;if(n&&!n.isCommentThreadActive(e.threadId))return n.isCommentThreadDeleted(e.threadId)?H.FocusError.ThreadDeleted:n.isCommentThreadDetached(e.threadId)?H.FocusError.ThreadDetached:n.isCommentThreadResolved(e.threadId)?i?null:H.FocusError.ThreadResolved:H.FocusError.ThreadNotFound
}else if(!t.success){if(e.aceHash||e.aceHash2)return H.FocusError.LineNotFound;if(e.headingLine||e.headingLine2)return H.FocusError.HeadingNotFound}return null};a.hasFocusEditorOrShowOnceTriggered=!1
;a.handleAfterCommentPageEnter=function(){a.setState({mobileDialogShowing:!0});a.onCommentsModalShown()};a.handleBeforeCommentPageLeave=function(){a.setState({mobileDialogShowing:!1},(function(){
a.restoreScrollPosition()}))};a.onCommentsModalHidden=function(){};a.state={noticeMessage:null,deletedPadClientVars:null,mobileDialogShowing:!1,showSharingForm:!1,isPadArchived:!1,isPadLocked:null,
isFolderSidebarOpen:!1,showSidebarButton:!1,currentPadId:null,filesystemInfo:null,isOffline:null};i.debugInstanceCounter+=1;a.debugInstanceId=i.debugInstanceCounter;return a}i=t
;t.prototype.trackEng=function(e,t){(0,me.trackEng)("[pad_page_base] ".concat(e),n.__assign(n.__assign({},t),{instanceCount:i.debugInstanceCounter,instanceId:this.debugInstanceId,
isCurrentPage:this.debugInstanceId===i.debugInstanceCounter,isMounted:this.isComponentMounted}))};t.prototype.isLoaded=function(){return!this.isLoading};t.prototype.getApp=function(){
return this.props.app};t.prototype.getFolderSidebarWrapper=function(){return this.folderSidebarWrapper};t.prototype.updateShowSidebarButton=function(){
var e=this,t=this.state.renderHiddenThings?this.padController:null;(0,G.shouldShowSidebarButton)(t,this.state.isFolderSidebarOpen,(function(i){i!=e.state.showSidebarButton&&e.setState({
showSidebarButton:i,filesystemInfo:t.filesystemInfoStore.filesystemInfo})}))};t.prototype.onAceCreated=function(e){this.ace=e;this.setState({mainAce:e})};t.prototype.onAceUIMounted=function(e){
this.aceUI=e};t.prototype.getMainAce=function(){var e;if(!this.ace){this.trackAceNotAvailable();return null}
if(null===(e=this.ace)||void 0===e?void 0:e.isDisposed())throw new Error("getMainAce() called after AceEditor was disposed. Ensure you're not hanging on to a stale PadPage");return this.ace}
;t.prototype.getMainAceSilent=function(){if(!this.ace){this.trackAceNotAvailable();return null}return this.ace.isDisposed()?null:this.ace};t.prototype.trackAceNotAvailable=function(){var e=void 0
;e=this.aceUI?this.aceUI.hasAceAttached()?"no-ace":"no-ace-attached":"no-ace-ui";this.trackEng("getMainAce() returned null",{reason:e})};t.prototype.getMainAceUI=function(){
this.aceUI||this.trackEng("getMainAceUI() returned null");return this.aceUI};t.prototype.getCurrentPadController=function(){return this.padController};t.prototype.getTitle=function(){
var e=this.getCurrentPadController();return e&&e.getTitle?e.getTitle():""};t.prototype.componentWillMount=function(){var e=this.props.initializationData;this.padController=e.padController
;this.initializeCommentsStore()};t.prototype.componentDidMount=function(){var e;null===(e=this.context.omnibar)||void 0===e||e.on("contextChange",this.handleOmnibarContextChange);!function(e,t){
t.webkit&&e.body.classList.add("hp-pad-page-safari")}(document,we.default);var t=this.props.initializationData,i=t.deletedPadClientVars,n=this.getApp().getLeftNavSidebar();n&&n.setOpenByDefault(!!i)
;if(i){this.setState({deletedPadClientVars:i});n&&n.setVisible(!0);me.IntentionEvent.VisitTrashedPad.track({padType:i.padType,isDeleted:i.isDeleted,isTrashed:i.isTrashed,__padId:i.padId})
}else if(t.padController){this.loadPad(t.padController);n&&n.setVisible(!1)}else if(t.noticeMessage){this.setState({noticeMessage:t.noticeMessage});n&&n.setVisible(!0)
}else this.loadPadWithMissingClientVars();this.bindKeyEvents_();this.isComponentMounted=!0};t.prototype.loadPadWithMissingClientVars=function(){var e=this.props.initializationData
;if(this.getApp().state.params&&this.getApp().state.params.id&&!e.loadPadClientVarsAlreadyAttempted)this.getApp().navigateToPad({id:this.getApp().state.params.id,title:this.getApp().state.params.title
});else{this.setState({noticeMessage:"An unknown error occurred."});var t=this.getApp().getLeftNavSidebar();t&&t.setVisible(!0)}};t.prototype.componentDidUpdate=function(){
this.trackEng("componentDidUpdate");if(this.padController&&this.padController.localPadId!=this.state.currentPadId){this.setState({currentPadId:this.padController.localPadId})
;this.updateShowSidebarButton()}if(this.padController&&this.padController.isCloudDoc()){var e=this.state.filesystemInfo,t=this.padController.filesystemInfoStore.filesystemInfo
;p.isEqual(e,t)||this.updateShowSidebarButton()}};t.prototype.enter=function(){var e=this.props.initializationData,t=e.deletedPadClientVars,i=this.getApp().getLeftNavSidebar();if(i){
i.setOpenByDefault(!!t);t?i.setVisible(!0):e.padController?i.setVisible(!1):e.noticeMessage&&i.setVisible(!0)}};t.prototype.leave=function(){(0,V.clearUnconfirmedEdits)()}
;t.prototype.shouldLeftNavSidebarOpenByDefault=function(){return!1};t.prototype.onPrintPad=function(){this.padController&&(0,A.printPadInNewWindow)(this.padController.getPadId())}
;t.prototype.onOpenPresenter=function(){this.padController&&(0,O.openPresenterInNewWindow)(this.padController.getPadId())};t.prototype.bindKeyEvents_=function(){
Z.WindowKeyEvents.define(D.SelectionHotkeys.SelectAll,this.handleSelectAll);Z.WindowKeyEvents.define(D.PadHotkeys.Print,this.handlePrint)
;Z.WindowKeyEvents.define(D.PadHotkeys.Present,this.handlePresent)};t.prototype.onBeforeLeave=function(e){var t=this.checkForUnsavedChanges();if(!t){var i=this.getCurrentPadController()
;me.IntentionEvent.StartPageNavigation.track({padType:i&&i.getPadType()});return!0}var n=t.message,o=t.title;o||(o=new Me(xe.unsavedChangesDialogHeader,h.default.userLocale).format())
;var r=new Me(xe.unsavedChangesDialogLeaveButton,h.default.userLocale).format(),a=fe.createElement("span",{className:"notranslate"},o),s=fe.createElement("span",{className:"notranslate"
},n),l=fe.createElement("span",{className:"notranslate"},r);z.confirm(a,s,e,{confirmText:l,cancelByDefault:!0});(0,me.track)("notify-tried-leave",{ajax:!0});return!1}
;t.prototype.componentWillUnmount=function(){var e;null===(e=this.context.omnibar)||void 0===e||e.off("contextChange",this.handleOmnibarContextChange);this.removePageLoadListener()
;this.removePageLoadListener=null;var t=this.getApp().getLeftNavSidebar();t&&t.setOpenByDefault(!1);this.getApp().padLoader.handlePadLeft(this.padController)
;if(this.padController&&this.padController.isInitialized()){this.padController.savePadClientVars();this.padController.dispose()}this.padController=null
;if(this.desktopRedirectPreferenceToastDismissFunction){this.desktopRedirectPreferenceToastDismissFunction();this.desktopRedirectPreferenceToastDismissFunction=null}
document.dispatchEvent(new Event("hp-close-popup"));if(this.commentsUI){this.commentsUI=null;ie.isPhone()?s.MobileCommentsUI.dispose(this.getMainAce()):l.SidebarCommentsUI.dispose(this.getMainAce())}
this.unbindEvents_();Z.WindowKeyEvents.off(D.SelectionHotkeys.SelectAll,this.handleSelectAll);Z.WindowKeyEvents.off(D.PadHotkeys.Print,this.handlePrint)
;Z.WindowKeyEvents.off(D.PadHotkeys.Present,this.handlePresent);this.isComponentMounted=!1};t.prototype.restoreScrollPosition=function(){var e=this.getMainAce();if(e&&null!==this.prevScrollTop){(0,
ae.setScrollTop)(e.dom.getScrollEl(),this.prevScrollTop);this.prevScrollTop=null}};t.prototype.loadPad=function(e){var t=this;window.csi&&window.csi.tick("load-pad")
;var i=ge.default.getQueryParams().showHistory;Te.default.checkArgument(e===this.padController,"can't call loadPad with a PadController different than the one in initializationData")
;this.padController.followPreferences.checkRedirect();if(this.padController.isInitialized())throw new Error("how can it be already initialized? srsly")
;var n=se.parsePadFocusOptionsFromUrlSuffix(c.default.toString());this.padController.initializeAndConnect(this.aceUI,n,this.getServerRenderInfo(),(function(){return t.handleTopOfDocRendered()
}),(function(){return t.handleFullDocRendered(n,i)}))};t.prototype.handleTopOfDocRendered=function(){this.getApp().padLoader.notifyPadVisible(this.padController.getPadId())
;window.csi&&window.csi.tick("load-pad-finished");if(!clientVars.wasServerRendered){this.context.padLoadTimingService&&this.context.padLoadTimingService.padIsViewable()
;this.getApp().markNavigationTick(le.Marks.TIME_TO_VIEW)}};t.prototype.handleFullDocRendered=function(e,t){var i=this;this.refs.header&&this.refs.header.forceUpdate()
;var n=this.padController.getPadId();n&&this.getApp().padLoader.notifyPadLoaded(n,this.padController);window.csi&&window.csi.tick("pad-controller-loaded");this.bindEvents_()
;this.removePageLoadListener=(0,oe.delayUntilPageLoad)((function(){return i.handlePageLoaded(e)}));if(t){var o={controller:this.padController,trackContext:me.AppContext.App};U.open(o)}
var r=this.padController.peopleList,a=r&&r.getGuestPolicySpec(),s={padGuestPolicy:a.guestPolicy,padPublicGuestPolicy:a.publicGuestPolicy,padFolderMemberGuestPolicy:a.folderMemberGuestPolicy,
userIsGuest:h.default.userIsGuest,ref:ge.default.getQueryParams().ref,numUsersOnPad:r&&r.getAllUsersOnDocExceptKickedOut().length,numConnectedUsersOnPad:r&&r.getConnectedUsers().length,
padType:this.padController.getPadType(),__padId:n},l=this.ace.dom.getRoot();if(l){he.default.setNodeCount((0,ce.getNodeCount)(l));he.default.setNumLines((0,ce.getLineCount)(l))
;he.default.setNumTableCellsInPad((0,ce.getTableCellsCount)(l));he.default.setNumEmbedsInPad((0,ce.getEmbedsCount)(l))}ge.default.getQueryParams()._tk&&(s._tk=ge.default.getQueryParams()._tk)
;ge.default.getQueryParams().oqa&&(s.oqa=ge.default.getQueryParams().oqa);var d=(0,_e.default)(this.padController.folderStore.getFolderData());p.assignIn(s,d);me.IntentionEvent.VisitPad.track(s)
;this.padController.padMeta.isCreatedFromTemplate&&me.IntentionEvent.VisitPadCreatedFromTemplate.track({padType:s.padType,numUsersOnPad:s.numUsersOnPad,__padId:this.padController.getPadId()})
;s.padType==Ce.PadType.customTemplate&&me.IntentionEvent.VisitTemplatePad.track({padType:s.padType,numUsersOnPad:s.numUsersOnPad,__padId:this.padController.getPadId()})
;n&&R.retrieveMeetingNotesByPadId(n,(function(e){if(!(!e||!e.nextEvents.length)){var t=r?r.getAllUsersOnDocExceptKickedOut():[];me.IntentionEvent.VisitLinkedEventPad.track({__padId:n,
numEvents:e.nextEvents.length,numUsersOnPad:t.length,percentAttendeesInvited:R.getPercentAttendeesInvited(e.nextEvents,t)})}}));this.isLoading=!1;window.csi&&window.csi.tick("pad-fully-rendered")}
;t.prototype.handlePageLoaded=function(e){var t=this,i=this.getMainAce();if(i&&!i.isDisposed()){
this.omnibar.registerContextProvider(new T.default(this.padController,this.context.stores.padList,this.context.stores.meetingNotes))
;this.omnibar.registerCommandProvider(new v.DocCommandProvider(this.getApp(),this.padController,this.context.stores.padList,this.context.panels,this.isNativeMobile))
;this.omnibar.registerContextProvider(new P.default(i));this.omnibar.registerContextProvider(new k.default(i));(0,
ee.isApollo)()&&this.padController&&this.padController.allowDisconnectedMode()&&this.omnibar.registerContextProvider(new E.default(this.context.stores.networkStatus))
;var n=this.context.stores.networkStatus;this.omnibar.registerContextProvider(new _.default(i,n,this.padController.allowDisconnectedMode()));this.omnibar.registerContextProvider(new w.default(i))
;this.omnibar.registerContextProvider(new C.default(i))
;this.omnibar.registerCommandProvider(new b.EditorCommandProvider(this.getApp(),i,this.padController.peopleList,this.context.panels,this.isNativeMobile))
;this.isNativeMobile&&this.omnibar.registerCommandProvider(new y.MobileEditorCommandProvider(this.getApp(),i));(0,ee.isApollo)()&&this.setState({isOffline:this.context.stores.networkStatus.isOffline()
});this.omnibar.registerSelectDataProvider(new F.ContextualTaskAssigneesProvider(this.padController.peopleList));this.omnibar.registerSelectDataProvider(new L.PositiveIntegersProvider)
;this.omnibar.registerSelectDataProvider(new x.TextHighlightColorProvider);this.omnibar.registerSelectDataProvider(new x.TableHighlightColorProvider)
;this.omnibar.registerSelectDataProvider(new x.NoteboxHighlightColorProvider);this.omnibar.registerSelectDataProvider(new S.EmojiGardenTypeProvider)
;this.omnibar.registerSelectDataProvider(new M.EmojiProvider);var o=this.padController.initialFocusLineResult,r=this.padController.padClientVars.collab_client_vars.collabBaseState.rev
;if(this.padController.getPadType()!==Ce.PadType.desktopImportedWordDoc&&this.padController.getPadType()!==Ce.PadType.importedWordDoc||0!==r)if(0===r||e)if(e)if(o.success)this.focusEditorOrShowToast(e,o);else{
this.getApp().setIsLoading(!0);this.padController.collabClient.on("caught-up",(function(){t.focusEditorOrShowToastOnce(e)}))}else{this.doDefaultFocus()
;this.getApp().padLoader.notifyPadFocused(this.padController.getPadId(),void 0)
}else if(this.padController.getPadType()==Ce.PadType.dropboxFileEmbeddedDoc&&r<=3)this.getMainAce().getViewport().focusFirstVisibleLine(!0);else{var a=(0,$.default)(),s=a.scrollTop
;this.refs.padPageContainer.focus();s!==a.scrollTop&&(a.scrollTop=s);this.getApp().padLoader.notifyPadFocused(this.padController.getPadId())}else;
ge.default.consumeQueryParam(be.QueryParamNames.NO_DESKTOP_REDIRECT);this.desktopRedirectPreferenceToastDismissFunction=(0,q.maybeShowDesktopRedirectPrefToast)();this.maybeShowTemplateUsedSnackbar()}}
;t.prototype.maybeShowTemplateUsedSnackbar=function(){
var e=this,t=ge.default.consumeQueryParam(be.QueryParamNames.COPY_FROM_TEMPLATE),i=ge.default.consumeQueryParam(be.QueryParamNames.CREATE_FROM_TEMPLATE),o=ge.default.consumeQueryParam(be.QueryParamNames.NEW_TEMPLATE),r=ge.default.consumeQueryParam(be.QueryParamNames.TEMPLATE_SOURCE_PAD_ID),a=this.padController.isPadTemplate()
;if(i||t||o||r)if(r){this.context.stores.padList.getPad(r,(function(t){e.showTemplatizedArchiveSnackbar(r,t)}))}else{var s
;s=a?t?fe.createElement(Se,n.__assign({},xe.templatecopiedandaddedtoyourlibrary)):fe.createElement(Se,n.__assign({},xe.templatecreatedandaddedtoyourlibrary)):fe.createElement(Se,n.__assign({},xe.doccreatedfromtemplate))
;K.Snackbar.show(fe.createElement(K.Snackbar,{className:"notranslate",closeButtonText:new Me(xe.close,h.default.userLocale).format(),timeoutDelayMs:5e3,title:s,variant:"complete"}))}}
;t.prototype.showTemplatizedArchiveSnackbar=function(e,t){var i,n;if(t){i=new Me(xe.archive,h.default.userLocale).format();n=function(){B.archivePad(null,t,(function(){
K.Snackbar.show(fe.createElement(K.Snackbar,{className:"notranslate",closeButtonText:new Me(xe.close,h.default.userLocale).format(),timeoutDelayMs:5e3,
title:new Me(xe.archiveSuccess,h.default.userLocale).format(),"track-title":"Archived template",variant:"complete"}))}))}}var o=new Me(xe.close,h.default.userLocale).format()
;K.Snackbar.show(fe.createElement(K.Snackbar,{actionButtonText:i,className:"notranslate",closeButtonText:new Me(xe.archiveDismiss,h.default.userLocale,o).format(),onActionClick:n,timeoutDelayMs:1e4,
title:new Me(xe.archivePrompt,h.default.userLocale).format(),"track-title":"Archive template prompt"}))};t.prototype.bindEvents_=function(){var e=this,t=this.getMainAce()
;document.addEventListener(we.default.fullscreenChange,this.handleFullScreen);t.hasFeature("attribution")&&(0,ae.toggleClass)(t.dom.getEditorEl(),"attribution-enabled",!0)
;this.events.on(t.observer,"open-link",(function(t){var i=t[0],n=t[1],o=t[2],r=o&&o.length>0?o[0]:null;e.handleOpenLink(i,n,r)}));this.events.on(t.observer,"missing-authors",this.handleMissingAuthors)
;this.events.on(this.padController,"auto-subscribed",(function(){e.timers.setTimeout((function(){e.padController.followPreferences.notifyAutoSubscribed()}),3e3)}))
;this.events.on(this.padController,"pad-id-changed",(function(){e.setState({currentPadId:e.padController.getPadId()})}))
;null===window||void 0===window||window.addEventListener("beforeunload",this.handleBeforeUnload);null===window||void 0===window||window.addEventListener("beforeprint",this.handleBeforePrint)}
;t.prototype.unbindEvents_=function(){null===window||void 0===window||window.removeEventListener("beforeunload",this.handleBeforeUnload)
;null===window||void 0===window||window.removeEventListener("beforeprint",this.handleBeforePrint);document.removeEventListener(we.default.fullscreenChange,this.handleFullScreen)}
;t.prototype.getHeaderSelector_=function(){return this.refs.header?"#"+f.findDOMNode(this.refs.header).id:null};t.prototype.getAceScrollSelector_=function(){return ie.isMobile()?(0,
$.default)():"#padpage-container"};t.prototype.getAceType_=function(){return h.default.isSignedIn()?"full":"static"};t.prototype.addHistoricalAuthors=function(e){var t=this
;this.padController.collabClient?this.padController.authors.tellAceAboutHistoricalAuthors(e):t.timers.setTimeout((function(){t.addHistoricalAuthors(e)}),1e3)}
;t.prototype.handleOpenLink_=function(e,t,i){var n=(0,re.parseURIOrThrow)(e),o=(0,Ee.isUrlLocal)(e);ge.default.url.isRedirectUrl(n.path)&&(o=!1);(0,me.trackAce)("open-link",{newtab:t,internal:o})
;if(t){this.navigateToExternalLink(e);return!0}if(o){if(function(e){if("/admin"==e||0==e.indexOf("/admin/"))return!0;if(new RegExp("^/i/[^/]+/admin/").test(e))return!0;return!1}(n.path)){
window.top.location.href=e;return!0}if("/"==n.path&&n.getQuery()&&n.getQuery().q){this.getApp().trigger("hp-search",[n.getQuery().q]);return!0}}this.getApp().navigateToUrl(e);return!0}
;t.prototype.openLinksInCurrentWindow=function(){return!1};t.prototype.navigateToExternalLink=function(e){(0,pe.safeWindowOpen)(e)};t.prototype.doDefaultFocus=function(){
if(this.shouldDoDefaultFocus()){var e=this.getMainAce();e&&e.focus()}};t.prototype.showFocusError=function(e,t,i){
var n=this.padController,o=n&&n.isPadEditable(),r=i==H.FocusError.ThreadResolved,a=i==H.FocusError.ThreadDetached
;(r||a)&&n&&n.padUnreadNotificationsStore&&n.padUnreadNotificationsStore.handleCommentThreadOpened(e.threadId);if((r||a)&&o){if(!ie.isMobile()){var s={controller:n,mode:"comments",trackContext:null,
focusTarget:e.threadId};U.open(s)}}else{var l=(0,H.textFromFocusError)(i);Q.default.show(fe.createElement(Q.default,{autoDismiss:!0,autoDismissDelayMs:5e3},fe.createElement("span",{dir:"auto",
className:"notranslate"},l)))}};t.prototype.focusEditorOrShowToast=function(e,t){if(!e)throw new Error("focusEditorOrShowToast expects focusOptions argument");var i=this.getMainAce();if(i){
if(e.selection){var n=JSON.safeParse(e.selection);if(n)try{var r=n.revision;if(this.getCurrentPadController().getCurrentRevisionNumber()===r){
var a=n.start,s=n.end,l=new o.Position(a.zone,a.line,a.col),d=new o.Position(s.zone,s.line,s.col);i.execute("select-and-focus",(function(){i.selection.set({start:l,end:d,isReversed:n.isReversed})
;i.selection.focusEditor()}))}}catch(e){(0,Y.logException)(e)}}if(!t){var u=i.contents.exportHand();t=(0,W.getPositionForFocusOptions)(u.raw(),u.pool(),e)}
var c=this.padController&&this.padController.isPadEditable(),h=this.getErrorForFocusOptions(e,t,c);h?this.getApp().padLoader.notifyPadFocused(this.padController.getPadId(),(0,
H.textFromFocusError)(h)):this.getApp().padLoader.notifyPadFocused(this.padController.getPadId(),void 0);!h&&t.success?this.focusGivenFocusOptions(e,t):this.doDefaultFocus()
;h&&this.showFocusError(e,t,h);se.stripFocusOptionsFromCurrentUrl()}};t.prototype.focusEditorOrShowToastOnce=function(e){if(!this.hasFocusEditorOrShowOnceTriggered){
this.hasFocusEditorOrShowOnceTriggered=!0;this.focusEditorOrShowToast(e)}};t.prototype.checkForUnsavedChanges=function(){var e=this;try{ge.default.error.loggingTryCatch((function(){
var t=e.getMainAceSilent();t&&t.execute("incorp before unload",(function(){}))}))}catch(e){if(!we.default.blink||!(0,Pe.startsWith)(e.message,"Maximum update depth exceeded."))throw e
;if(!this.getApp().clientHealthChecker.areTimersHealthy()){this.timers.setTimeout((function(){(0,me.track)("timers-recovered-after-tried-leave",{friendlyUserAgentInfo:we.default.toHumanReadable(),
userAgentInfo:we.default.toString()})}),0);return{message:new Me(xe.unsavedChangesWarning,h.default.userLocale).format()}}}var t=this.getUnsavedChangesMessageIfAny()
;t&&this.padController&&this.padController.padConnectionStatus&&this.padController.padConnectionStatus.notifyTriedLeave();return t};t.prototype.getUnsavedChangesMessageIfAny=function(){var e
;if(!this.padController)return null;var t=this.padController,i=t.collabClient,n=t.mainAce;if(i&&i.hasUncommittedChanges()&&!this.padController.allowDisconnectedMode())return{
message:new Me(xe.unsavedChangesWarning,h.default.userLocale).format()};if(this.commentsUI&&this.commentsUI.anyThreadHasNewEdits()&&!this.padController.allowDisconnectedMode()){
var o=new Me(xe.unsavedCommentsWarningFallback,h.default.userLocale).format();return{title:new Me(xe.unsavedCommentsTitle,h.default.userLocale).format(),
message:new Me(xe.unsavedCommentsWarning,h.default.userLocale,o).format()}}
return n&&(null===(e=n.media.attachmentStore)||void 0===e?void 0:e.getInflightUploadsCount)&&n.media.attachmentStore.getInflightUploadsCount()>0?{
message:new Me(xe.unsavedImagesWarning,h.default.userLocale).format()}:null};t.prototype.onMountCommentsUI=function(e){this.commentsUI=e;if(this.commentsUI){
this.commentsUI.on("before-comment-page-enter",this.saveScrollPosition);this.commentsUI.on("after-comment-page-enter",this.handleAfterCommentPageEnter)
;this.commentsUI.on("before-comment-page-leave",this.handleBeforeCommentPageLeave);this.commentsUI.on("after-comment-page-leave",this.onCommentsModalHidden)}};t.prototype.getCommentUI=function(){
return this.commentsUI};t.prototype.initializeCommentsStore=function(){0;if(this.padController){var e=this.props.initializationData;if(!e||!e.deletedPadClientVars){
var t=this.padController?this.padController.padClientVars:this.context.stores.padList.getPadClientVarsFromMemory(this.props.params.id);if(t){
this.objectStore=new d.default(t.collab_client_vars.objectStoreBaseState,t.collab_client_vars.missedChanges&&t.collab_client_vars.missedChanges.objectStoreMissedChanges,(function(){
throw new Error("Cannot do operations on ObjectStore before CollabClient ready!")}));this.padController.setObjectStore(this.objectStore)
;this.comments=new a.default(null,this.padController,null,this.padController.padUnreadNotificationsStore);this.padController.setComments(this.comments)}}}}
;t.prototype.onCommentsModalShown=function(){};t.prototype.render=function(){window.csi&&window.csi.tick("pad-page-prerender");if(this.state.deletedPadClientVars){
var e=this.state.deletedPadClientVars,t=e.isDeleted;if(e.isTrashed)return this.renderTrashedPadPage();if(t)return this.renderDeletedPadPage();(0,Y.logExceptionAndData)("Invalid deleted pad state",{
padId:this.padController.getPadId(),productType:this.getApp().getProductType()});return this.renderTrashedPadPage()}if(this.state.noticeMessage)return fe.createElement("div",{className:"centered-text"
},fe.createElement("div",{className:"centered"},fe.createElement("div",{className:"notice"},this.state.noticeMessage)))
;if(!this.getServerRenderInfo()&&!this.padController)return fe.createElement(m.default,{name:this.props.name,isSelected:this.props.isSelected})
;var i=this.renderPageBody(this._onAceUIMounted,this._onAceCreated);return fe.createElement(m.default,{name:this.props.name,isSelected:this.props.isSelected},i)}
;t.prototype.renderDeletedPadPage=function(){return fe.createElement(N.default,{name:this.props.name,isSelected:this.props.isSelected,stores:this.context.stores,
deletedPadClientVars:this.state.deletedPadClientVars})};t.prototype.renderTrashedPadPage=function(){return fe.createElement(j.default,{name:this.props.name,isSelected:this.props.isSelected,
stores:this.context.stores,deletedPadClientVars:this.state.deletedPadClientVars,onRestored:function(){(0,pe.padPageReload)("pad_page_base-restore_pad")}})};t.prototype.getServerRenderInfo=function(){
return this.props.serverRenderInfo};var i,g,ve;t.displayName="PadPageBase";t.debugInstanceCounter=0
;t.contextTypes=p.pick(u.ReactAppContextTypes,["currentUser","stores","titleUpdateService","bridgeService","panels","omnibar"]);t.defaultProps=(g=window.performance||Date,
ve=new ue.SampledKeyPerfTrackerImpl(g,"keydown"),{keyPerfMonitor:new de.KeyPerfMonitorImpl([ve])});return t=i=n.__decorate([J.default,I.default,te.default],t)}(fe.Component));t.PadPageBase=Le},
934:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.DocCommandProvider=void 0
;var n=i(1),o=i(5),r=i(472),a=i(111),s=i(96),l=i(75),d=i(378),u=i(491),c=i(462),h=i(397),m=i(115),g=i(159),p=i(414),f=i(66),v=i(241),b=i(4),y=i(0),C=i(2),_=i(7),T=(0,
o.PaperIntlFactory)(),P=T.F,w=T._f,E=(0,C.defineMessages)({starred:{id:"o0zl2d",defaultMessage:"Starred doc"},unstarred:{id:"MI4llf",defaultMessage:"Unstarred doc"},subscribedToDoc:{id:"b2W+Cj",
defaultMessage:"You are now following the doc."},subscribedToTemplate:{id:"yU5Zn7",defaultMessage:"You are now following the template."},unsubscribedFromDoc:{id:"uldiJu",
defaultMessage:"You are no longer following the doc."},unsubscribedFromTemplate:{id:"nefsn+",defaultMessage:"You are no longer following the template."},linkcopied:{id:"NDXCLl",
defaultMessage:"Link copied."}}),k=(0,C.defineMessages)({favorite:{id:"D0ln+2",defaultMessage:"Star doc"},unfavorite:{id:"MqaxtF",defaultMessage:"Unstar doc"},follow:{id:"XlK4pb",
defaultMessage:"Follow doc"},unfollow:{id:"d3VNCo",defaultMessage:"Unfollow doc"},archive:{id:"DVxJbs",defaultMessage:"Archive doc"},restore:{id:"gcF7fY",defaultMessage:"Restore doc"},trash:{
id:"e0X0fV",defaultMessage:"Trash doc"},present:{id:"ES27m2",defaultMessage:"Present doc"},print:{id:"wFCXis",defaultMessage:"Print doc"},share:{id:"CUQiHI",defaultMessage:"Share doc"},copyLink:{
id:"sNNCtF",defaultMessage:"Copy link to doc"},export:{id:"f2ZocW",defaultMessage:"Export doc"},templatize:{id:"ybBAtb",defaultMessage:"Templatize doc"},linkCalEvent:{id:"+sPUQ3",
defaultMessage:"Link calendar event to doc"},move:{id:"ri2E0q",defaultMessage:"Move doc"}}),I=(0,C.defineMessages)({favorite:{id:"KTkW1J",defaultMessage:"Favorite doc"},unfavorite:{id:"HXI5OG",
defaultMessage:"Unfavorite doc"},unarchive:{id:"4A/vwh",defaultMessage:"Unarchive doc"},delete:{id:"QHK4aF",defaultMessage:"Delete doc"},meeting:{id:"p076g4",
defaultMessage:"Attach meeting invite to doc"}}),S=function(){function e(e,t,i){this.app=e;this.padController=t;this.padList=i;this.id="favorite_doc";this.label=w(k.favorite);this.icon={type:"dig",
icon:"StarLine"};this.keywords=[w(I.favorite)];this.available=(0,a.buildPredicate)({favoriteStatusKnown:(0,a.equals)("true"),docIsFavorite:(0,a.equals)("false")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){(0,c.updatePadIsFavorite)(this.padList,this.padController.getPadId(),!0)
;this.app.ariaStatusUpdate(w(E.starred));return[2,{success:!0}]}))}))};return e}(),M=function(){function e(e,t,i){this.app=e;this.padController=t;this.padList=i;this.id="unfavorite_doc"
;this.label=w(k.unfavorite);this.icon={type:"dig",icon:"StarLine"};this.keywords=[w(I.unfavorite)];this.available=(0,a.buildPredicate)({favoriteStatusKnown:(0,a.equals)("true"),docIsFavorite:(0,
a.equals)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){(0,
c.updatePadIsFavorite)(this.padList,this.padController.getPadId(),!1);this.app.ariaStatusUpdate(w(E.unstarred));return[2,{success:!0}]}))}))};return e}(),x=function(){function e(e,t){this.app=e
;this.padController=t;this.id="follow_doc";this.label=w(k.follow);this.icon={type:"dig",icon:"FollowLine"};this.available=(0,a.buildPredicate)({isContainerBinder:(0,a.equals)("false"),
docIsFollowed:(0,a.equals)("false")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e;return n.__generator(this,(function(t){
this.padController.followPreferences.subscribeUser();e=E.subscribedToDoc;this.padController.getPadType()==_.PadType.customTemplate&&(e=E.subscribedToTemplate);this.app.ariaStatusUpdate(w(e))
;return[2,{success:!0}]}))}))};return e}(),L=function(){function e(e,t){this.app=e;this.padController=t;this.id="unfollow_doc";this.label=w(k.unfollow);this.icon={type:"dig",icon:"FollowLine"}
;this.available=(0,a.buildPredicate)({isContainerBinder:(0,a.equals)("false"),docIsFollowed:(0,a.equals)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e
;return n.__generator(this,(function(t){this.padController.followPreferences.unsubscribeUser();e=E.unsubscribedFromDoc
;this.padController.getPadType()==_.PadType.customTemplate&&(e=E.unsubscribedFromTemplate);this.app.ariaStatusUpdate(w(e));return[2,{success:!0}]}))}))};return e}(),F=function(){function e(e,t){
this.padController=e;this.padList=t;this.id="archive_doc";this.label=w(k.archive);this.icon={type:"dig",icon:"ArchiveLine"};this.available=(0,a.buildPredicate)({canArchive:(0,a.equals)("true"),
docArchived:(0,a.equals)("false")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){
m.archivePad(this.padList,this.padController.padMeta,(function(){}));return[2,{success:!0}]}))}))};return e}(),D=function(){function e(e,t){this.padController=e;this.padList=t;this.id="restore_doc"
;this.label=w(k.restore);this.keywords=[w(I.unarchive)];this.icon={type:"dig",icon:"ArchiveLine"};this.available=(0,a.buildPredicate)({canArchive:(0,a.equals)("true"),docArchived:(0,a.equals)("true")
})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){m.unarchivePad(this.padList,this.padController.padMeta,(function(){}))
;return[2,{success:!0}]}))}))};return e}(),A=function(){function e(e,t){this.padController=e;this.padList=t;this.id="trash_doc";this.label=w(k.trash);this.icon={type:"dig",icon:"DeleteLine"}
;this.keywords=[w(I.delete)];this.available=(0,a.buildPredicate)({canTrash:(0,a.equals)("true"),docTrashed:(0,a.equals)("false")})}e.prototype.run=function(){
return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){m.trashPad(this.padList,this.padController.padMeta,(function(){}));return[2,{success:!0}]}))}))};return e
}(),O=function(){function e(e,t,i){this.app=e;this.padController=t;this.isDesktop=i;this.id="present_doc";this.label=w(k.present);this.icon={type:"dig",icon:"PresentLine"}
;this.hotkey=l.PadHotkeys.Present;this.available=(0,a.buildPredicate)({isOffline:(0,a.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
return n.__generator(this,(function(e){(0,h.openPresenter)(this.app,this.padController.getPadId(),this.isDesktop);return[2,{success:!0}]}))}))};return e}(),R=function(){function e(e,t,i){this.app=e
;this.padController=t;this.isDesktop=i;this.id="print_doc";this.label=w(k.print);this.icon={type:"dig",icon:"PrintLine"};this.hotkey=l.PadHotkeys.Print;this.available=(0,a.buildPredicate)({
isOffline:(0,a.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e;return n.__generator(this,(function(t){e=this.padController.getPadId()
;this.isDesktop&&this.app.getPadPage()?this.app.getPadPage().onPrintPad():(0,u.printPadInNewWindow)(e);return[2,{success:!0}]}))}))};return e}(),N=function(){function e(e){this.padController=e
;this.id="copy_doc_link";this.label=w(k.copyLink);this.icon={type:"dig",icon:"LinkLine"};this.track={event:b.IntentionEvent.CopyPadLink};this.available=(0,a.buildPredicate)({docIsTemplate:(0,
a.equals)("false")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,i;return n.__generator(this,(function(o){e=this.padController
;t=e.isCloudDoc()?e.cloudDocsUrlStore.getMaxAccessUrl():(0,v.getSharableLinkFromLocalPadId)(e.getPadId(),e.getTitle(),!1);i=y.createElement(P,n.__assign({},E.linkcopied));p.copy(t,i);return[2,{
success:!0}]}))}))};return e}(),q=function(){function e(e){var t,i=this;this.padController=e;this.id="export_doc";this.label=w(k.export);this.icon={type:"dig",icon:"DownloadLine"}
;this.viewOnlyPadId=null;this.available=function(){return!0};this.handleViewOnlyIdUpdated=function(e){i.viewOnlyPadId=e.viewOnlyPadId};this.viewOnlyDisabled=function(){i.viewOnlyPadId=null}
;this.viewOnlyPadId=null!==(t=e.padClientVars.enabledViewOnlyPadId)&&void 0!==t?t:null;b.events.on("view-only-id-updated",this.handleViewOnlyIdUpdated)
;b.events.on("view-only-disabled",this.viewOnlyDisabled)}e.prototype.providerWillUnmount=function(){b.events.off("view-only-id-updated",this.handleViewOnlyIdUpdated)
;b.events.off("view-only-disabled",this.viewOnlyDisabled)};e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,i;return n.__generator(this,(function(n){
t=(e=this).padController,i=e.viewOnlyPadId;d.ExportPopup.show(t.getPadId(),null!=i?i:void 0,t.getTitle(),!!i,t);return[2,{success:!0}]}))}))};return e}(),H=function(){function e(e,t){this.app=e
;this.padController=t;this.id="templatize_doc";this.label=w(k.templatize);this.icon={type:"dig",icon:"AddFileTemplateLine"};this.available=(0,a.buildPredicate)({docIsTemplate:(0,a.equals)("false"),
isOffline:(0,a.not)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e,t,i=this;return n.__generator(this,(function(n){e=this.padController;t=e.getPadId()
;(0,g.createTemplate)({localPadId:t,trackContext:b.AppContext.Omnibar,successHandler:function(e){i.app.navigateToPad({id:e.padId,suffix:"?templateSourcePadId=".concat(t),cloudDocId:e.cloudDocId})}})
;return[2,{success:!0}]}))}))};return e}(),U=function(){function e(e){this.app=e;this.id="link_calendar_event_to_doc";this.label=w(k.linkCalEvent);this.icon={type:"dig",icon:"CalendarLine"}
;this.keywords=[w(I.meeting)];this.track={event:b.IntentionEvent.OpenMeetingNoteSelector};this.available=(0,a.buildPredicate)({canEdit:(0,a.equals)("true"),canLinkEvent:(0,a.equals)("true")})}
e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e;return n.__generator(this,(function(t){if(!(e=this.app.getMainAceUI()))return[2,{success:!1}]
;e.showPadTypeSelector(!0);return[2,{success:!0}]}))}))};return e}(),B=function(e){n.__extends(t,e);function t(t,i,n,o,a){void 0===a&&(a=!1);var s=e.call(this)||this;s.app=t;s.padController=i
;s.padList=n;s.panels=o;s.isNativeMobile=a;s.commands=[s.isNativeMobile?null:new r.default(s.panels,"share_doc",w(k.share),"sharing",{icon:{type:"dig",icon:"ShareLine"},hotkey:l.PadHotkeys.Share
}),new N(s.padController),new x(s.app,s.padController),new L(s.app,s.padController),new S(s.app,s.padController,s.padList),new M(s.app,s.padController,s.padList),new F(s.padController,s.padList),new D(s.padController,s.padList),new A(s.padController,s.padList),s.isNativeMobile?null:new H(s.app,s.padController),s.isNativeMobile?null:new O(s.app,s.padController,(0,
f.isApollo)()),s.isNativeMobile?null:new R(s.app,s.padController,(0,
f.isApollo)()),s.isNativeMobile?null:new q(s.padController),s.isNativeMobile?null:new U(s.app),s.isNativeMobile?null:new r.default(s.panels,"move_doc",w(k.move),"filemover",{icon:{type:"dig",
icon:"FileExplorerLine"}})].filter(Boolean);return s}t.prototype.getCommands=function(){return this.commands};return t}(s.BaseProvider);t.DocCommandProvider=B},935:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});t.EditorCommandProvider=void 0
;var n=i(1),o=i(180),r=i(22),a=i(296),s=i(20),l=i(63),d=i(5),u=i(1806),c=i(1807),h=i(1808),m=i(1809),g=i(1812),p=i(1813),f=i(1814),v=i(111),b=i(96),y=i(75),C=i(88),_=i(0),T=i(2),P=(0,
d.PaperIntlFactory)(),w=P._f,E=P.F,k=(0,T.defineMessages)({createDocWithTitle:{id:"hAjLja",defaultMessage:"Create doc with selected title"},checkAuthorship:{id:"8SBsUF",
defaultMessage:"Check authorship"},addComment:{id:"q+21mE",defaultMessage:"Comment"},suggestChanges:{id:"yYNlRY",defaultMessage:"Suggest changes"},addCommentToLine:{id:"qj9eWr",
defaultMessage:"Comment on a line"},addAnnotation:{id:"Gw4AcD",defaultMessage:"Comment on specific areas"},undo:{id:"LLICJ6",defaultMessage:"Undo"},redo:{id:"okCjVg",defaultMessage:"Redo"},
authorunknown:{id:"6M6D2y",defaultMessage:"Author unknown"},authorofthistextauthorName:{id:"obDpeH",defaultMessage:"Author of this text: {authorName}"},authorsofthistextauthorName:{id:"YBdVlR",
defaultMessage:"Authors of this text: {authorName}"}}),I=(0,T.defineMessages)({newDocWithSelection:{id:"V+qh3G",defaultMessage:"New doc with selection"},newDocWithSelectedTitle:{id:"6KM2TZ",
defaultMessage:"New doc with selected title"},createDocWithSelection:{id:"SQL5a2",defaultMessage:"Create doc with selection"},checkAttribution:{id:"LX7N7r",defaultMessage:"Check attribution"},blame:{
id:"T3QABH",defaultMessage:"Blame"}}),S=(0,T.defineMessages)({invalidLineForComment:{id:"ctwbRo",defaultMessage:"Please provide a valid line for adding comment"}}),M=(0,v.buildPredicate)({
canComment:(0,v.equals)("true")}),x=(0,v.buildPredicate)({isCommentOnly:(0,v.equals)("true")}),L=function(){function e(e,t){this.app=e;this.editor=t;this.id="create_doc_with_title"
;this.label=w(k.createDocWithTitle);this.icon={type:"dig",icon:"AddLine"};this.keywords=[w(I.newDocWithSelection),w(I.newDocWithSelectedTitle),w(I.createDocWithSelection)];this.available=(0,
v.buildPredicate)({selection:(0,v.and)((0,v.contains)("range"),(0,v.noneOf)("whitespaceOnly")),selectedLineCount:(0,v.equals)("1"),lineManagers:(0,v.none)()});this.contentTypeRegistry=new o.default}
e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,i;return n.__generator(this,(function(o){t={title:this.getTitle()};if(e.inNewTab||e.inBackground){i={timestamps:{
startTime:Date.now()},metadata:{cause:"omnibar-create-new-pad-new-tab"}};this.app.createNewPadInNewTab(n.__assign(n.__assign({},t),{metrics:i}))}else this.app.createNewPad(void 0,t);return[2,{
success:!0}]}))}))};e.prototype.getTitle=function(){var e,t,i=this.editor.getSelectedRep();if(!i)return"";var n=this.editor.selection.get(),o=n.start,s=n.end
;return new a.PlainTextRenderer(this.editor.contents.internalZatext(),this.editor.getApool(),this.contentTypeRegistry).getPlainText(null!==(e=null==i?void 0:i.alines)&&void 0!==e?e:[],r.splitTextLines(null!==(t=null==i?void 0:i.alltext)&&void 0!==t?t:""),o.line,o.col,s.line,s.col,!1,!1,!0).trim()
};return e}(),F=function(){function e(e,t){this.editor=e;this.isNativeMobile=t;this.id="add_comment";this.label=w(k.addComment);this.icon={type:"dig",icon:"CommentLine"}
;this.hotkey=y.EditingHotkeys.AddComment;this.available=function(e){return M(e)||x(e)}}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this
;return n.__generator(this,(function(t){this.editor.execute("omnibar_add_comment",(function(){e.editor.commentsController.newCommentThreadForSelection(!1,e.isNativeMobile)}));return[2,{success:!0,
preserveFocus:!0}]}))}))};return e}(),D=function(){function e(e,t){this.editor=e;this.isNativeMobile=t;this.id="suggest_changes";this.label=w(k.suggestChanges);this.icon={type:"dig",
icon:"SuggestEditLine"};this.hotkey=y.EditingHotkeys.SuggestChanges;this.available=function(e){return M(e)||x(e)}}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_suggest_changes",(function(){e.editor.commentsController.newCommentThreadForSelection(!1,e.isNativeMobile,!0)}))
;return[2,{success:!0,preserveFocus:!0}]}))}))};return e}(),A=function(){function e(e){this.editor=e;this.id="add_line_comment";this.label=w(k.addCommentToLine);this.icon={type:"dig",
icon:"CommentLine"};this.available=function(e){return M(e)||x(e)}}Object.defineProperty(e.prototype,"parameters",{get:function(){return[{label:w(k.addCommentToLine),key:"linePosition",type:"string",
validator:function(e){var t=!e||1!==e.length,i=e&&isNaN(parseInt(e[0],10));return t||i?{status:"error",error:w(S.invalidLineForComment)}:{status:"ok"}}}]},enumerable:!1,configurable:!0})
;e.prototype.run=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t=this;return n.__generator(this,(function(i){this.editor.execute("omnibar_add_line_comment",(function(){
var i=t.editor.selection.getZone(),n=new s.Position(i,parseInt(e.parameterData.linePosition[0],10),0);t.editor.commentsController.newCommentThreadForLine(n)}));return[2,{success:!0}]}))}))};return e
}(),O=function(){function e(e,t){this.editor=e;this.isNativeMobile=t;this.id="add_annotation";this.label=w(k.addAnnotation);this.icon={type:"dig",icon:"AddCommentLine"};this.available=(0,
v.buildPredicate)({editorFocused:(0,v.equals)("true"),canComment:(0,v.equals)("true"),selection:(0,v.contains)("range"),selectedImageAttributes:(0,v.contains)("imageGalleryItem")})}
e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_add_comment",(function(){
e.editor.commentsController.newCommentThreadForSelection(!0,e.isNativeMobile)}));return[2,{success:!0}]}))}))};return e}(),R=function(){function e(e,t){this.editor=e;this.peopleStore=t
;this.id="check_authorship";this.label=w(k.checkAuthorship);this.secret=!0;this.keywords=[w(I.checkAttribution),w(I.blame)];this.available=(0,v.buildPredicate)({editorFocused:(0,v.equals)("true"),
selection:(0,v.contains)("range")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){
this.editor.execute("omnibar_check_authorship",(function(){var t,i=e.editor.contents.getAllAttributesInRange(e.editor.selection.get()).filter((function(e){var t=e[0];e[1];return"author"===t
})).map((function(e){e[0];return e[1]})),o=i.map((function(t){var i=e.peopleStore.getUser(t);return i&&i.name})).filter(Boolean)
;t=0==o.length?_.createElement(E,n.__assign({},k.authorunknown)):1==o.length?_.createElement(E,n.__assign({values:{authorName:o[0]}},k.authorofthistextauthorName)):_.createElement(E,n.__assign({
values:{authorNames:o.join(", ")}},k.authorsofthistextauthorName));C.Snackbar.generic(t)}));return[2,{success:!0}]}))}))};return e}(),N=function(){function e(e){this.editor=e;this.id="editor_undo"
;this.label=w(k.undo);this.icon={type:"dig",icon:"UndoLine"};this.available=(0,v.buildPredicate)({editorFocused:(0,v.equals)("true"),canEdit:(0,v.equals)("true"),canPerformUndo:(0,v.equals)("true")})}
e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_undo",(function(){e.editor.contents.undo()
}));return[2,{success:!0}]}))}))};return e}(),q=function(){function e(e){this.editor=e;this.id="editor_redo";this.label=w(k.redo);this.icon={type:"dig",icon:"RedoLine"};this.available=(0,
v.buildPredicate)({editorFocused:(0,v.equals)("true"),canEdit:(0,v.equals)("true"),canPerformRedo:(0,v.equals)("true")})}e.prototype.run=function(){return n.__awaiter(this,void 0,Promise,(function(){
var e=this;return n.__generator(this,(function(t){this.editor.execute("omnibar_redo",(function(){e.editor.contents.redo()}));return[2,{success:!0}]}))}))};return e}(),H=function(e){n.__extends(t,e)
;function t(t,i,n,o,r){void 0===r&&(r=!1);var a=e.call(this)||this;a.app=t;a.editor=i;a.peopleStore=n;a.panels=o;a.isNativeMobile=r
;a.commands=[new u.TogglePlaceholderCommand(a.editor),new u.ToggleBoldCommand(a.editor),new u.ToggleBulletListCommand(a.editor),new u.ToggleCodeCommand(a.editor),new u.ToggleH1Command(a.editor),new u.ToggleH2Command(a.editor),new u.ToggleH3Command(a.editor),new u.ToggleItalicCommand(a.editor),new u.ToggleNumberListCommand(a.editor),new u.ToggleQuoteCommand(a.editor),new u.ToggleStrikethroughCommand(a.editor),new u.ToggleToDoListCommand(a.editor),new u.ToggleUnderlineCommand(a.editor),new u.SetCodeLanguage(a.editor),new u.HighlightTextCommand(a.editor),new u.RemoveFormattingCommand(a.editor),new u.RemoveTextHighlightCommand(a.editor),new c.IndentLineCommand(a.editor),new c.OutdentLineCommand(a.editor),new u.CreateLinkTextCommand(a.editor),new u.RemoveLinkTextCommand(a.editor),new p.CheckTaskCommand(a.editor),new p.UncheckTaskCommand(a.editor),new p.UnassignTaskCommand(a.editor,!0),new p.UnassignTaskCommand(a.editor,!1),new p.RemoveTaskDueDateCommand(a.editor),a.isNativeMobile?null:new h.InsertImageCommand(a.editor),a.panels?new h.InsertEmbedPanelCommand(a.panels):null,!a.isNativeMobile&&a.panels?new h.InsertDropboxFileCommand(a.editor,a.panels):null,new h.InsertTableCommand(a.editor),new h.InsertTimelineCommand(a.editor),new h.InsertNoteboxCommand(a.editor),new h.InsertAuditboxCommand(a.editor),new h.InsertBreakCommand(a.editor),new h.InsertEmojiCommand(a.editor),new f.InsertShrugCommand(a.editor),new f.InsertFlipTableCommand(a.editor),new f.InsertFixTableCommand(a.editor),new f.InsertDisapprovalCommand(a.editor),new f.InsertFingerPointCommand(a.editor),new f.InsertYikesCommand(a.editor),new f.InsertButAtWhatCostCommand(a.editor),new f.InsertGimmeCommand(a.editor),new f.InsertWeeWooCommand(a.editor),new f.InsertBetterCommand(a.editor),new f.InsertTodayCommand(a.editor),new f.InsertTomorrowCommand(a.editor),new f.InsertYesterdayCommand(a.editor),new f.InsertTimeCommand(a.editor),new f.InsertDateTimeCommand(a.editor),new f.InsertDateUtcCommand(a.editor),new f.InsertDateIsoCommand(a.editor),new f.InsertTimeUtcCommand(a.editor),new f.InsertTimeIsoCommand(a.editor),new f.InsertGardenCommand(a.editor),new g.SelectLineCommand(a.editor),new m.DeleteImageCommand(a.editor),new m.AlignImageLeftCommand(a.editor),new m.AlignImageRightCommand(a.editor),new m.AlignImageCenterCommand(a.editor),new m.AlignImageFullCommand(a.editor),new m.AlignImageOverlayCommand(a.editor),a.isNativeMobile?null:new m.ReplaceImageCommand(a.editor),a.isNativeMobile?null:new m.ReplaceDropboxEmbed(a.editor),new m.CropImagePreviewCommand(a.editor),new m.CropSinglePagePreview(a.editor),new m.CropImageShowcaseCommand(a.editor),new m.ZoomInImageCommand(a.editor),new m.ZoomOutImageCommand(a.editor),new m.FitImageCommand(a.editor),new m.PagePreviewUnrollCommand(a.editor),new m.CropPreviewCommand(a.editor),new m.ResizeFullCommand(a.editor),new m.ResizeCompactCommand(a.editor),new m.ResizeGalleryCommand(a.editor),new F(a.editor,a.isNativeMobile),l.isOnButDoNotLog("paper_suggested_changes")?new D(a.editor,a.isNativeMobile):null,new A(a.editor),new R(a.editor,a.peopleStore),new L(a.app,a.editor),a.isNativeMobile?null:new O(a.editor,a.isNativeMobile),new N(a.editor),new q(a.editor),new u.DeleteTimelineCommand(a.editor),new u.DeleteTableSelectionCommand(a.editor),new u.ToggleTableRowHeaderCommand(a.editor),new u.ToggleTableColumnHeaderCommand(a.editor),new u.HighlightTableSelectionCommand(a.editor),new u.RemoveTableSelectionHighlightCommand(a.editor)].filter(Boolean)
;return a}t.prototype.getCommands=function(){return this.commands};return t}(b.BaseProvider);t.EditorCommandProvider=H},936:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;var n=i(1),o=i(58),r=i(20),a=i(96),s=i(28),l=i(18),d=i(17),u=i(30),c=function(e){n.__extends(t,e);function t(t){var i,n=this;(n=e.call(this)||this).editor=t;n.handleMousemove=function(e){var t,i
;if(!(null===(i=null===(t=n.editor)||void 0===t?void 0:t.mediaDrag)||void 0===i?void 0:i.isDragging())){var o=n.getContextFromEvent(e);if(o){n.state=o;n.emit(n.state)}}};n.state={
isCommentToolbarVisible:[],commentToolbarPosition:[]};null===(i=t.observer)||void 0===i||i.on("mousemove",n.handleMousemove);return n}t.prototype.providerWillUnregister=function(){var e
;null===(e=this.editor.observer)||void 0===e||e.off("mousemove",this.handleMousemove)};t.prototype.getContext=function(){return this.state};t.prototype.getContextFromEvent=function(e){
var t=this.editor;if(!t.hasFeature("comments")||!t.contents.getIsCommentable())return null;if(!t.padController)return null;var i=t.selection.getPositionForMouseEvent(e);if(!i)return null;if((0,
s.isMobile)())return{isCommentToolbarVisible:[String(!0)],commentToolbarPosition:[JSON.stringify(i.toJSON())]};var n=t.getRep(r.Position.ROOT_ZONE);if(!(i.line>=0&&i.line<n.alines.length))return null
;var a=n.alines[i.line];if(!a)return null;if((0,o.getTableMagicObject)(a,t.getApool()))return{isCommentToolbarVisible:[String(!1)],commentToolbarPosition:[]};var d=t.dom.getRoot(),c=(0,
l.offset)(d).left+(0,l.outerWidth)(d,!0),h=100;if(t.dom.getEditorEl().classList.contains("ace-feature-due-dates")){var m=t.contents.getLineType(i)
;0==(null==m?void 0:m.indexOf("task"))&&(h+=parseInt(u.default.task_controls_full_width,10))}return e.clientX>c-h&&this.mouseMovedWithin(500)&&!this.lineBlankOrAllSpaces(i)?{
isCommentToolbarVisible:[String(!0)],commentToolbarPosition:[JSON.stringify(i.toJSON())]}:{isCommentToolbarVisible:[String(!1)],commentToolbarPosition:[]}};t.prototype.mouseMovedWithin=function(e){
var t=this.editor.mouse.getLatestMouseMoveInfo();return!!t&&Date.now()-t.date<e};t.prototype.lineBlankOrAllSpaces=function(e){var t=this.editor.getRep(e.zone).lines.atIndex(e.line)
;return t&&d.default.string.isBlank(t.text)};return t}(a.BaseProvider);t.default=c},937:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;var n=i(1),o=i(96),r=i(111),a=i(18),s=i(54),l=i(75),d=i(66),u=i(28),c=i(20),h=i(24),m=i(355),g=i(44),p=i(31),f=i(17),v=i(119),b=function(e){n.__extends(t,e);function t(t,i,n){
var o,s,d,c,m,f,b,y,C,_,T,P,w,E,k,I=this;(I=e.call(this)||this).editor=t;I.networkStatusStore=i;I.allowOfflineEditing=n;I.contextualHiddenInterval=0
;I.toolbarContainerSelector=".ace-feature-toolbar .non-editor";I.insideContextualToolbar=!1;I.emitOnSelectionChange=function(){I.cacheAndEmit(I.getContextualToolbarContext())}
;I.handleEditorBlur=function(){I.insideContextualToolbar||I.emitOnSelectionChange();(0,g.setTimeout)((function(){I.insideContextualToolbar=!1}),500)};I.emitOnTableSelectionChange=function(e){
var t=!!e.cols.length||!!e.rows.length;I.cacheAndEmit({isContextualToolbarVisible:[String(t)],contextualToolbarMode:["table"],isLinkToolbarVisible:[],linkToolbarTrigger:[]})}
;I.emitHideContextual=function(){I.insideContextualToolbar=!1;I.lastContextualHiddenTime=Date.now();I.cacheAndEmit({isContextualToolbarVisible:[String(!1)],contextualToolbarMode:[],
isLinkToolbarVisible:[],linkToolbarTrigger:[]})};I.isContextualToolbarOpen=(0,r.buildPredicate)({isContextualToolbarVisible:(0,r.equals)("true")});I.isLinkToolbarOpen=(0,r.buildPredicate)({
isLinkToolbarVisible:(0,r.equals)("true")});I.emitOnMousemove=function(){var e=I.isContextualToolbarOpen(I.state),t=I.isLinkToolbarOpen(I.state)
;e||t||Date.now()-(I.lastContextualHiddenTime||0)<I.contextualHiddenInterval||I.cacheAndEmit(I.getContextualToolbarContext())};I.handlePseudoSelection=function(){var e
;I.editor.contents.getIsCommentOnly()&&I.isEditorFocused()&&0==(null===(e=window.getSelection())||void 0===e?void 0:e.isCollapsed)&&I.cacheAndEmit(I.getContextualToolbarContext())}
;I.handleToolbarMouseover=function(e){(0,a.closest)(e.target,".hp-contextual-toolbar")&&window.clearTimeout(I.linkHoverCloseTimeout)};I.handleLinkMouseover=function(e){
var t,i=I.editor.dom.getRootSelector()+" .ace-line .attrlink a";if((0,a.closest)(e.target,i)){if(!(0,r.buildPredicate)({isContextualToolbarVisible:(0,r.equals)("true"),isLinkToolbarVisible:(0,
r.equals)("false")})(I.state)&&!1!==I.editor.selection.isCollapsed()){var n=document.activeElement;if(n){var o=null===(t=h.findDOMNode(n))||void 0===t?void 0:t.querySelector("input");if(o&&(0,
a.isFocused)(o))return}I.linkHoverStartTimeout=window.setTimeout((function(){I.editor.contents.getIsEditable()&&I.cacheAndEmit({isContextualToolbarVisible:[],contextualToolbarMode:[],
isLinkToolbarVisible:[String(!0)],linkToolbarTrigger:["mouse"]})}),500)}}};I.handleLinkMousedown=function(e){I.emitHideContextual();var t=I.editor.dom.getRootSelector()+" .ace-line .attrlink a";(0,
a.closest)(e.target,t)&&window.clearTimeout(I.linkHoverStartTimeout)};I.handleToolbarMousedown=function(e){if(null!==(0,a.closest)(e.target,".hp-contextual-toolbar")){
window.clearTimeout(I.linkHoverCloseTimeout);I.insideContextualToolbar=!0}};I.handleToolbarMouseout=function(e){if(I.isLinkToolbarOpen(I.state)){(0,
a.closest)(e.target,".hp-contextual-toolbar")?I.closeHoverLinkToolbar():window.clearTimeout(I.linkHoverStartTimeout)}else window.clearTimeout(I.linkHoverStartTimeout)}
;I.handleLinkMouseout=function(e){if(I.isLinkToolbarOpen(I.state)){var t=I.editor.dom.getRootSelector()+" .ace-line .attrlink a";(0,
a.closest)(e.target,t)?I.closeHoverLinkToolbar():window.clearTimeout(I.linkHoverStartTimeout)}else window.clearTimeout(I.linkHoverStartTimeout)};I.handleLink=function(e){e.preventDefault()
;var t=I.editor;t.contents.getIsEditable()&&t.selection.isEditorFocused()&&!t.selection.isCollapsed()&&I.cacheAndEmit({isContextualToolbarVisible:[String(!1)],contextualToolbarMode:[],
isLinkToolbarVisible:[String(!0)],linkToolbarTrigger:["keyboard"]});return!1};I.openLinkEditor=function(){var e=I.editor
;e.contents.getIsEditable()&&e.selection.isEditorFocused()&&!e.selection.isCollapsed()&&(0,g.setTimeout)((function(){I.cacheAndEmit({isContextualToolbarVisible:[String(!1)],contextualToolbarMode:[],
isLinkToolbarVisible:[String(!0)],linkToolbarTrigger:["keyboard"]})}),0);return!1};I.hideLinkEditor=function(){I.cacheAndEmit({isContextualToolbarVisible:[String(!1)],contextualToolbarMode:[],
isLinkToolbarVisible:[String(!1)],linkToolbarTrigger:[]});return!1};I.closeHoverLinkToolbar=function(){window.clearTimeout(I.linkHoverStartTimeout)
;I.linkHoverCloseTimeout=window.setTimeout((function(){if(!!!(0,a.closest)(document.activeElement,".hp-contextual-toolbar")){I.lastContextualHiddenTime=Date.now();I.cacheAndEmit({
isContextualToolbarVisible:[String(!1)],contextualToolbarMode:[],isLinkToolbarVisible:[String(!1)],linkToolbarTrigger:[]})}}),500)};I.state={isContextualToolbarVisible:[],contextualToolbarMode:[],
isLinkToolbarVisible:[],linkToolbarTrigger:[]};null===(o=t.observer)||void 0===o||o.on("selection-change",I.emitOnSelectionChange)
;null===(s=t.observer)||void 0===s||s.on("table-selection-change",I.emitOnTableSelectionChange);null===(d=t.observer)||void 0===d||d.on("enter-embed-cropping-mode",I.emitHideContextual)
;null===(c=t.observer)||void 0===c||c.on("exit-embed-cropping-mode",I.emitHideContextual);null===(m=t.observer)||void 0===m||m.on("mousemove",I.emitOnMousemove)
;null===(f=t.observer)||void 0===f||f.on("show-link-editor",I.openLinkEditor);null===(b=t.observer)||void 0===b||b.on("hide-link-editor",I.hideLinkEditor)
;null===(y=t.observer)||void 0===y||y.on("open-comments-sidebar",I.emitHideContextual)
;p.default.isOnAndLog("paper_blur_clicking_outside_tables")&&(null===(C=t.observer)||void 0===C||C.on("blur",I.handleEditorBlur));if((0,u.isApplePhone)()){I.contextualHiddenInterval=500
;null===(_=t.observer)||void 0===_||_.on("focusout",I.emitHideContextual);null===(T=t.observer)||void 0===T||T.on("touchmove",I.emitHideContextual)}
null===(P=t.observer)||void 0===P||P.on("mouseover",I.handleLinkMouseover);null===(w=t.observer)||void 0===w||w.on("mousedown",I.handleLinkMousedown)
;null===(E=t.observer)||void 0===E||E.on("mouseout",I.handleLinkMouseout);v.WindowKeyEvents.define(l.FormattingHotkeys.Link,I.handleLink);var S=document.querySelector(I.toolbarContainerSelector)
;if(S){S.addEventListener("mouseover",I.handleToolbarMouseover);S.addEventListener("mouseout",I.handleToolbarMouseout);S.addEventListener("mousedown",I.handleToolbarMousedown)}
null===(k=t.observer)||void 0===k||k.on("mouseup",I.handlePseudoSelection);return I}t.prototype.providerWillUnregister=function(){var e,t,i,n,o,r,a,s,d,u,c,h,m,g,f,b
;null===(e=this.editor.observer)||void 0===e||e.off("selection-change",this.emitOnSelectionChange)
;null===(t=this.editor.observer)||void 0===t||t.off("table-selection-change",this.emitOnTableSelectionChange)
;null===(i=this.editor.observer)||void 0===i||i.off("enter-embed-cropping-mode",this.emitHideContextual)
;null===(n=this.editor.observer)||void 0===n||n.off("exit-embed-cropping-mode",this.emitHideContextual);null===(o=this.editor.observer)||void 0===o||o.off("mousedown",this.emitHideContextual)
;null===(r=this.editor.observer)||void 0===r||r.off("mousemove",this.emitOnMousemove);null===(a=this.editor.observer)||void 0===a||a.off("focusout",this.emitHideContextual)
;null===(s=this.editor.observer)||void 0===s||s.off("touchmove",this.emitHideContextual);null===(d=this.editor.observer)||void 0===d||d.off("show-link-editor",this.openLinkEditor)
;null===(u=this.editor.observer)||void 0===u||u.off("hide-link-editor",this.hideLinkEditor);null===(c=this.editor.observer)||void 0===c||c.off("open-comments-sidebar",this.emitHideContextual)
;null===(h=this.editor.observer)||void 0===h||h.off("mouseover",this.handleLinkMouseover);null===(m=this.editor.observer)||void 0===m||m.off("mousedown",this.handleLinkMousedown)
;null===(g=this.editor.observer)||void 0===g||g.off("mouseout",this.handleLinkMouseout)
;p.default.isOnAndLog("paper_blur_clicking_outside_tables")&&(null===(f=this.editor.observer)||void 0===f||f.off("blur",this.handleEditorBlur));window.clearTimeout(this.linkHoverStartTimeout)
;window.clearTimeout(this.linkHoverCloseTimeout);v.WindowKeyEvents.define(l.FormattingHotkeys.Link,this.handleLink);var y=document.querySelector(this.toolbarContainerSelector);if(y){
y.removeEventListener("mouseover",this.handleToolbarMouseover);y.removeEventListener("mouseout",this.handleToolbarMouseout);y.removeEventListener("mousedown",this.handleToolbarMousedown)}
null===(b=this.editor.observer)||void 0===b||b.off("mouseup",this.handlePseudoSelection)};t.prototype.getContext=function(){return this.state};t.prototype.cacheAndEmit=function(e){this.state=e
;this.emit(e)};t.prototype.getContextualToolbarContext=function(){var e=this.getContextualToolbarMode();return{isContextualToolbarVisible:[String(!!e)],contextualToolbarMode:e?[e]:[],
isLinkToolbarVisible:[],linkToolbarTrigger:[]}};t.prototype.getContextualToolbarMode=function(){var e,t,i=this.editor;if(!(i&&i.isMousing()&&this.isEditorFocused()&&i.hasSelection()))return null
;if(i.contents.getEditableState()==s.EditableState.Readonly)return null;if(this.shouldShowOfflineToolbar())return"offline";var n=i.getCurrentLineEntry(),o=null==n?void 0:n.domInfo.lineManagerType
;if(o&&!i.getContentTypeRegistry().isSelectable(o))return null;var r=n?i.managers.lineManagerForLine(n,"timeline"):null;if(r)return r.isGloballySelected()?"timeline":null
;var a=i.managers.getLineManagerWithSpecialSelection("aceTable");if(a){if("function"==typeof a.isDragging&&a.isDragging())return null;var l=a.getWhollySelectedRegions()
;if((l.entireTable||l.rows.length||l.cols.length)&&i.contents.getEditableState()===s.EditableState.Editable)return"table"}if(p.default.isOnButDoNotLog("paper_fix_collapsed_selection")){
if(!i.selection.isCollapsed()&&i.media.getSelectedGalleryElement())return"gallery"}if(this.shouldCloseAllToolbars())return null;if(!i.selection.isCollapsed()){
if("TEXTAREA"==(null===(e=document.activeElement)||void 0===e?void 0:e.tagName)||"INPUT"==(null===(t=document.activeElement)||void 0===t?void 0:t.tagName))return null
;if(this.onlyNewlinesSelected())return null;if(!p.default.isOnButDoNotLog("paper_fix_collapsed_selection")){if(i.media.getSelectedGalleryElement())return"gallery"}return(0,
u.isNativeMobileApp)()&&this.isLinkSelected()?"link-only":"normal"}return null};t.prototype.isEditorFocused=function(){var e
;return!!this.editor.selection.isEditorFocused()||!(!this.editor.contents.getIsCommentOnly()||"padpage-container"!=(null===(e=document.activeElement)||void 0===e?void 0:e.id))}
;t.prototype.shouldShowOfflineToolbar=function(){return!this.editor.selection.isCollapsed()&&this.networkStatusStore.isOffline()&&(0,d.isApollo)()&&!this.allowOfflineEditing}
;t.prototype.shouldCloseAllToolbars=function(){var e=this.editor;if(!e.getSelectedRep())return!0;if(e.keystrokes.isShiftKeyPressed())return!0
;if(!e.selection.isCollapsed()&&e.mouse.getIsMousePressed())return!0;if(!e.hasFeature("toolbar"))return!0;if(e.selection.isCollapsed()&&0==e.selection.getStart().line)return!0
;var t=e.managers.currentInlineSelectedLineManager;if(t&&t.getSelectedZonesForSpecialSelection().length>1)return!0;if(e.managers.hasCurrentlySelectedLineManagers())return!0
;if(e.media.getSelectedGalleryElement()&&document.body.classList.contains("pad-lightbox-open"))return!0;var i=e.selection.getZone();return!(i==c.Position.ROOT_ZONE||!e.hasFeature("plaintext",i,{
shouldMatchRootZone:!1}))||((0,u.isNativeMobileApp)(),!1)};t.prototype.isLinkSelected=function(){var e=this.editor.selection.internalGetSelectionPoints()
;return e&&f.default.classes.has(e.startPoint.node.parentNode,"attrlink")};t.prototype.onlyNewlinesSelected=function(){var e=m.default.from(this.editor.selection.get()),t=e.start,i=e.end
;if(t.zone!=i.zone)return!1;if(!c.Position.equals(t,c.Position.endOfLine(this.editor,t)))return!1;for(var n=t.line+1;n<i.line;n++){var o=this.editor.getRep(i.zone).lines.atIndex(n)
;if(o.text.length>o.lineMarker)return!1}var r=this.editor.getRep(i.zone).lines.atIndex(i.line);return i.col<=r.lineMarker};return t}(o.BaseProvider);t.default=b},938:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(96),r=i(66),a=i(193),s=function(e){n.__extends(t,e);function t(t,i,n){var o=e.call(this)||this;o.padController=t;o.padList=i
;o.meetingNotesStore=n;o.handleMeetingNotesStoreChange=function(){o.emit(o.getContext())};o.handleFollowPreferencesChange=function(){o.emit(o.getContext())};o.handlePadListChange=function(){
o.emit(o.getContext())};o.padList.on("pad-list-change",o.handlePadListChange);o.padController.followPreferences.on("change",o.handleFollowPreferencesChange)
;o.meetingNotesStore.on("change",o.handleMeetingNotesStoreChange);return o}t.prototype.providerWillUnregister=function(){var e,t;this.padList.off("pad-list-change",this.handlePadListChange)
;null===(t=null===(e=this.padController)||void 0===e?void 0:e.followPreferences)||void 0===t||t.off("change",this.handleFollowPreferencesChange)
;this.meetingNotesStore.off("change",this.handleMeetingNotesStoreChange)};t.prototype.getContext=function(){var e=this.padController.isPadTemplate(),t=!1,i=!1,n=this.padController.getPadId();if(n){
var o=this.padList.getPadFromMemory(n);if(o){i=!0;t=o.isFavorite}}
var s=!(0,r.isApollo)()||this.meetingNotesStore.isAuthorized,l=this.padController.getPadType(),d=-1==a.NOT_PAPER_DOC_PADTYPES.indexOf(l),u=s&&d;return{docIsTemplate:[String(e)],
docIsFavorite:[String(t)],favoriteStatusKnown:[String(i)],docIsFollowed:[String(this.padController.followPreferences.isSubscribed())],docArchived:[String(this.padController.isPadArchived())],
canArchive:[String(this.padController.canUserArchivePad())],canTrash:[String(this.padController.canUserTrashPad())],canLinkEvent:[String(u)],docTrashed:[String(this.padController.isPadTrashed())]}}
;return t}(o.BaseProvider);t.default=s},939:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;var n=i(1),o=i(58),r=i(155),a=i(22),s=i(20),l=i(167),d=i(6),u=i(96),c=i(268),h=i(100),m=i(18),g=i(86),p=i(31),f=["bold","inline-code","italic","strikethrough","subscript","superscript","placeholder","underline"],v=["bold","italic","underline","strikethrough"],b=function(){
function e(e,t){void 0===t&&(t={true:[e,"true"],"":[e,"false"]});this.attribName=e;this.attribToContextMap=t;this.seenValues=new Set;this.context={}}e.prototype.checkOp=function(e){
var t=e.getAttribute(this.attribName)||"";if(t in this.attribToContextMap&&!this.seenValues.has(t)){this.seenValues.add(t)
;var i=this.attribToContextMap[t],n=i[0],o=i[1],r=this.context[n]=this.context[n]||[];("string"==typeof o?[o]:o).forEach((function(e){return r.push(e)}))}};e.prototype.getContext=function(){
return d.mapValues(this.context,d.uniq)};Object.defineProperty(e.prototype,"done",{get:function(){var e=this;return d.every(Object.keys(this.attribToContextMap),(function(t){return e.seenValues.has(t)
}))},enumerable:!1,configurable:!0});return e}(),y=function(){function e(){this.done=!1;this.seenValues=new Set;this.context={links:[]}}e.prototype.checkOp=function(e){var t=e.getAttribute("link")
;if(d.isString(t)&&d.size(t)>0&&!this.seenValues.has(t)){this.seenValues.add(t);this.context.links.push(t)}};e.prototype.getContext=function(){return{
links:["".concat(this.context.links.length>0)].concat(this.context.links.sort())}};return e}(),C=function(e){n.__extends(t,e);function t(t){var i=e.call(this)||this;i.editor=t
;i.emitTableSelectionContext=function(e){i.emit(i.getContext(n.__assign({entireTableSelected:[String(e.entireTable)],selectedTableRows:e.rows.map(String),selectedTableCols:e.cols.map(String)
},i.getTableSelectionHighlight(e))))};i.emitContextChange=function(){i.editor.core.getIMEStatus()||i.emit(i.getContext())};t.observer.on("command-state-change",i.emitContextChange)
;t.observer.on("selection-change",i.emitContextChange);t.observer.on("editable-state-changed",i.emitContextChange);t.observer.on("table-selection-change",i.emitTableSelectionContext)
;t.observer.on("show-link-editor",i.emitContextChange);return i}t.prototype.providerWillUnregister=function(){this.editor.observer.off("command-state-change",this.emitContextChange)
;this.editor.observer.off("selection-change",this.emitContextChange);this.editor.observer.off("editable-state-changed",this.emitContextChange)
;this.editor.observer.off("table-selection-change",this.emitTableSelectionContext);this.editor.observer.off("show-link-editor",this.emitContextChange)};t.prototype.getContext=function(e){var t,i=this
;void 0===e&&(e={});return(0,h.hasFreakedOut)()?{}:null!==(t=this.editor.execute("omnibar_editor_context",(function(){return i.getContextInternal(e)})))&&void 0!==t?t:{}}
;t.prototype.getTableSelectionHighlight=function(e){
var t=["false"],i=["false"],n=this.editor.managers.getLineManagerWithSpecialSelection(),o=e||n&&n.getWhollySelectedRegions(),r=n&&n.getHighlightForSelection(!0,o.rows),a=n&&n.getHighlightForSelection(!1,o.cols)
;if(o){r&&(t=["true",r]);a&&(i=["true",a])}return{tableRowHighlight:t,tableColumnHighlight:i}};t.prototype.isTitleLine=function(e,t){if(e.zone!==s.Position.ROOT_ZONE||0!==e.line)return!1
;if(0===t.line)return!0;if(1===t.line){if(0===t.col)return!0;if(1===t.col&&this.editor.contents.getLineType(t))return!0}return!1};t.prototype.isEditorFocused=function(e){var t
;return e.selection.isEditorFocused()||!!(0,m.closest)(null===(t=e.dom.getRoot())||void 0===t?void 0:t.ownerDocument.activeElement,".hp-contextual-toolbar")}
;t.prototype.getContextInternal=function(e){var t,i,r,a=this;void 0===e&&(e={})
;var l=this.editor.selection,u=[String(Boolean(this.isEditorFocused(this.editor)))],h=[String(Boolean(this.editor.contents.getIsEditable()))],m=[String(Boolean(this.editor.contents.getIsCommentable()))],g=[String(Boolean(this.editor.contents.getIsCommentOnly()))],f=c.GATED_FEATURES[this.editor.editorType],v=f.filter((function(e){
return a.editor.hasFeatureForSelectedRep(e)
})),b=this.editor.media.getSelectedGalleryEmbedData(),y=b.embedType,C=b.embedComponent,_=C&&C.hasValidThumbnail&&C.hasValidThumbnail(),T=-1!==f.indexOf("notitle"),P=C&&C.getPageCount&&C.getPageCount(),w=y?[y]:[],E=[String(_||!1)],k=P?[String(P)]:[],I=[String(p.default.isOnButDoNotLog("paper_embed_new_feature"))],S=[],M=[],x=[],L=[],F=["false"],D=[],A=[],O=[],R=[],N=["false"]
;if(l.hasSelection){var q=l.getStart(),H=l.getEnd(),U=l.getZone();!T&&this.isTitleLine(q,H)&&(F=["true"]);for(var B=q.line;B<=H.line;B++){
var V=this.editor.contents.getLineType(new s.Position(U,B,0)),j=this.editor.code.getLangForCodeLine(U,B);j&&"false"===N[0]&&(N=["true",j]);var W=this.editor.managers.getLineManagerType(U,B)
;W&&D.push(W);var G=!T&&0===B&&U===s.Position.ROOT_ZONE;if(!G&&V){var z=null!==(t=o.parseListType(V))&&void 0!==t?t:{type:"none"},Z=z.type,K=z.indent;S.push(Z)
;void 0!==K&&o.isIndentableListTypeByParsedType(Z)&&M.push(String(K))}else{S.push("none");G||W||M.push("1")}x=x.concat(this.getTaskAssigneesForLine(U,B))
;var Q=this.editor.lists.getDueDateForTaskLine(U,B);Q&&L.push(Q);if(q.line==H.line){var Y=this.editor.managers.getLineManager(U,q.line,"gallery");if(Y){
A=A.concat(this.editor.contents.getGalleryAttributesForCurrentItem(Y));O=["".concat(Y.getCount())]}}}}
var J=[],X=[],$=["false"],ee=["false"],te=["false"],ie=this.editor.managers.getLineManagerWithSpecialSelection(),ne=ie&&ie.getWhollySelectedRegions(),oe=this.getTableSelectionHighlight(),re=[String(!!(null==ie?void 0:ie.hasTopHeader()))],ae=[String(!!(null==ie?void 0:ie.hasSideHeader()))]
;if(ne){e.selectedTableCols||(J=ne.cols.map(String));e.selectedTableRows||(X=ne.rows.map(String));e.tableRowHighlight||($=null!==(i=oe.tableRowHighlight)&&void 0!==i?i:[])
;e.tableColumnHighlight||(ee=null!==(r=oe.tableColumnHighlight)&&void 0!==r?r:[]);e.entireTableSelected||(te=[String(ne.entireTable)])}
var se=this.getSelectionTags(),le=this.editor.selection.isCollapsed()?this.getContextForCaret():this.getContextFromSelectedOps(),de=this.editor.managers.getLineManagerWithSpecialSelection();if(de){
D.push(de.key);"timeline"===de.key&&de.isGloballySelected()&&R.push("globallySelected")}return d.mapValues(n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({selectedTableCols:J,
selectedTableRows:X,entireTableSelected:te,tableColumnHighlight:ee,tableRowHighlight:$},e),{canComment:m,canEdit:h,editorFeatures:f,editorFocused:u,indent:M,isCommentOnly:g,isTitle:F,
lanuageForCodeLine:N,lineType:S,selectedImageAttributes:A,selectedGalleryCount:O,selectedGalleryEmbedType:w,selectedGalleryCroppingSupport:E,selectedGalleryEmbedPageCount:k,featureIsOn:I,
isTableRowHeaderOn:re,isTableColumnHeaderOn:ae}),se),le),{selectedRepFeatures:v,lineManagers:D,taskAssignees:x,taskDueDate:L,selectedTimelineAttributes:R}),d.uniq)}
;t.prototype.getContextFromSelectedOps=function(){var e=f.map((function(e){return new b(e)})),t=new b("highlight",n.__assign({"":["highlight","false"],
true:["highlight",["true",g.TextHighlightColors.getDefaultColorForEditor(this.editor)]]},d.fromPairs(g.TextHighlightColors.colors.map((function(e){return[e,["highlight",[e,"true"]]]
}))))),i=new y,o=n.__spreadArray(n.__spreadArray([],e,!0),[t,i],!1),r=o,a=this.editor.selection.get();this.editor.contents.forEachOpInRange(a,(function(e,t,i){r.forEach((function(t){
return t.checkOp(e)}));0===(r=r.filter((function(e){return!e.done}))).length&&i()}));var s={};o.forEach((function(e){return d.assign(s,e.getContext())}));return s}
;t.prototype.getContextForCaret=function(){for(var e={},t=0,i=v;t<i.length;t++){var n=i[t];e[n]=[String(document.queryCommandState(n))]}return e};t.prototype.getSelectedPlainText=function(){
var e=this.editor.managers.getLineManagerWithSpecialSelection();if(!e&&(this.editor.selection.isCollapsed()||!this.editor.getSelectedRep()))return"";var t=e&&e.getClipboardZatextForSpecialSelection()
;return this.editor.copycut.getPlainText(t)};t.prototype.getSelectionTags=function(){var e=this.editor.selection;if(e.hasSelection){
var t=e.getStart().line,i=e.getEnd().line,n=String(i-t+1),o=e.isCollapsed(),a=o?"caret":"range",d=e.getZone(),u=d===s.Position.ROOT_ZONE?"isRootZone":null,c="aceTableCell"===(0,
r.getZoneType)(d)?"isTableCellZone":null,h=(0,l.isCurrentSelectionInTableHeader)(this.editor)?"isTableHeaderZone":null;return{selectedLineCount:[n],
selection:[a,o||0!==this.getSelectedPlainText().trim().length?null:"whitespaceOnly",this.editor.managers.getLineManagerWithSpecialSelection()?"specialSelectionWithinLineManager":null,u,c,h].filter(Boolean)
}}return{selectedLineCount:["0"],selection:["none"]}};t.prototype.getTaskAssigneesForLine=function(e,t){var i,n=new s.Position(e,t,0),r=this.editor.contents.getLineType(n),l=o.parseListType(r)||{
type:"none"};if(!(-1!==["task","taskdone"].indexOf(l.type)))return[];for(var d=this.editor.getApool(),u=[],c=this.editor.getRep(e).alines[t],h=a.opIterator(c,0);h.hasNext();){
var m=h.next(),g=null===(i=m.getAttribute)||void 0===i?void 0:i.call(m,"mentionurl",d);g&&u.push(g.substring(12))}return u};return t}(u.BaseProvider);t.default=C},940:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(96),r=i(51),a=i(58),s=function(e){n.__extends(t,e);function t(t){var i,n=this;(n=e.call(this)||this).editor=t
;n.emitOnSelectionChange=function(){n.emit(n.getContext())};n.state={isGalleryToolbarVisible:[]};null===(i=t.observer)||void 0===i||i.on("selection-change",n.emitOnSelectionChange);return n}
t.prototype.providerWillUnregister=function(){var e;null===(e=this.editor.observer)||void 0===e||e.off("selection-change",this.emitOnSelectionChange)};t.prototype.getContext=function(){
var e=this.shouldShowGallery();return{isGalleryToolbarVisible:[String(e)]}};t.prototype.shouldShowGallery=function(){var e=this.editor.selection.getZone();if((0,r.isCellId)(e))return!1
;if(document.body.classList.contains("ace-dragging-text"))return!1;var t=this.editor.media.getSelectedGalleryEmbedData().galleryItemData;return(!t||!(0,
a.isFullRowGalleryItem)(t,e))&&!!this.editor.media.getSelectedGalleryElement()};return t}(o.BaseProvider);t.default=s},941:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0})
;var n=i(1),o=function(e){n.__extends(t,e);function t(t){var i=e.call(this)||this;i.networkStore=t;i.emitContextChange=function(){i.emit(i.getContext())};t.addEventListener(i.emitContextChange)
;return i}t.prototype.providerWillUnregister=function(){this.networkStore.removeEventListener(this.emitContextChange)};t.prototype.getContext=function(){return{
isOffline:[String(this.networkStore.isOffline())]}};return t}(i(96).BaseProvider);t.default=o},942:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=function(e){
n.__extends(t,e);function t(t){var i=e.call(this)||this;i.editor=t;i.emitContextChange=function(){i.emit(i.getContext())};null==t||t.observer.on("undo-redo-updated",i.emitContextChange);return i}
t.prototype.providerWillUnregister=function(){var e;null===(e=this.editor)||void 0===e||e.observer.off("undo-redo-updated",this.emitContextChange)};t.prototype.getContext=function(){return{
canPerformUndo:[String(Boolean(this.editor.contents.canPerformUndo()))],canPerformRedo:[String(Boolean(this.editor.contents.canPerformRedo()))]}};return t}(i(96).BaseProvider);t.default=o},
943:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.EmojiGardenTypeProvider=void 0;var n=i(1),o=i(96),r=i(2),a=(0,i(5).PaperIntlFactory)()._f,s=(0,r.defineMessages)({park:{
id:"pB8fWl",defaultMessage:"Park"},office:{id:"R8cF2x",defaultMessage:"Office"},forest:{id:"lND14I",defaultMessage:"Forest"},ocean:{id:"2EMlHp",defaultMessage:"Ocean"}}),l=function(e){n.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.name="emojiGardenTypes";return t}t.prototype.getValues=function(e){return Promise.resolve([{id:"park",label:a(s.park),icon:{type:"emoji",
ch:"ð³"}},{id:"office",label:a(s.office),icon:{type:"emoji",ch:"ð¢"}},{id:"forest",label:a(s.forest),icon:{type:"emoji",ch:"ð²"}},{id:"ocean",label:a(s.ocean),icon:{type:"emoji",ch:"ð"}}])};return t
}(o.BaseProvider);t.EmojiGardenTypeProvider=l},944:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.EmojiProvider=void 0;var n=i(1),o=i(96),r=i(457),a=i(336),s=function(e){
n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.name="emojis";return t}t.prototype.getValues=function(e){return(0,a.getEmojiApi)().query(e.query,15).then((function(e){
return e.filter((function(e){return e.type==r.EmojiListEntryType.EMOJI})).map((function(e){if("custom"==e.section){var t=e,i=t.url,n=t.tags;return{id:JSON.stringify({url:i,tags:n}),label:e.tags,icon:{
type:"image",url:i}}}return{id:JSON.stringify({ch:e.ch}),label:e.name,icon:{type:"emoji",ch:e.ch}}}))}))};return t}(o.BaseProvider);t.EmojiProvider=s},945:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});t.NoteboxHighlightColorProvider=t.TableHighlightColorProvider=t.TextHighlightColorProvider=void 0;var n=i(1),o=i(96),r=i(181),a=i(429),s=i(86),l=(0,
i(5).PaperIntlFactory)()._f;function d(e){return{type:"swatch",color:e}}function u(e){return{id:e,label:l((0,a.getTooltipForColor)(e)),icon:d(e)}}var c=function(e){n.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.name="textHighlightColors";return t}t.prototype.getValues=function(e){return Promise.resolve(s.TextHighlightColors.colors.map(u))};return t
}(o.BaseProvider);t.TextHighlightColorProvider=c;var h=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.name="tableHighlightColors";return t}
t.prototype.getValues=function(e){return Promise.resolve(s.TableHighlightColors.colors.map(u))};return t}(o.BaseProvider);t.TableHighlightColorProvider=h;var m=function(e){n.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.name="noteboxHighlightColors";return t}t.prototype.getValues=function(e){var t=(0,r.getBackgroundColorForHeaderCell)(),i=(0,
s.HighlightColorShortNameToHighlightColorLight)(s.NOTEBOX_DEFAULT_COLOR_SHORT_NAME),o=s.TableHighlightColors.colors.filter((function(e){return e!=i}))
;return Promise.resolve(n.__spreadArray(n.__spreadArray([i],o,!0),["#FFFFFF",t],!1).map(u))};return t}(o.BaseProvider);t.NoteboxHighlightColorProvider=m},946:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});t.PositiveIntegersProvider=void 0;var n=i(1),o=function(e){n.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.name="positiveIntegers";return t}t.prototype.getValues=function(e){for(var t=[],i=1;i<102;++i)t.push(i);return Promise.resolve(t.map((function(e){return{id:String(e),label:String(e)}})))};return t
}(i(96).BaseProvider);t.PositiveIntegersProvider=o},947:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.ContextualTaskAssigneesProvider=void 0
;var n=i(1),o=i(96),r=i(27),a=function(e){n.__extends(t,e);function t(t){var i=e.call(this)||this;i.peopleStore=t;i.name="taskAssigneesFromContext";return i}t.prototype.getValues=function(e){
var t=this,i=e.context.taskAssignees||[];return Promise.resolve(i.map((function(e){var i=t.peopleStore.getUser("d."+e),n=t.displayNameForPadUserInfo(i);return n?{id:e,label:n,
icon:t.iconForPadUserInfo(i)}:null})).filter(Boolean))};t.prototype.displayNameForPadUserInfo=function(e){return e&&e.name||null};t.prototype.iconForPadUserInfo=function(e){if(!e)return null
;if(e.userPic)return{type:"image",url:e.userPic};var t=this.initialsForPadUserInfo(e);return t?{type:"initials",initials:t}:null};t.prototype.initialsForPadUserInfo=function(e){return e&&(0,
r.nameToInitials)({fullName:e.name,givenName:e.givenName,surname:e.surname})||null};return t}(o.BaseProvider);t.ContextualTaskAssigneesProvider=a},948:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(90),r=i(8),a=i(2),s=i(10),l=i(73),d=i(14),u=i(115),c=i(45),h=i(0),m=i(123),g=(0,
d.MsgFactory)("pad"),p=g.defineMessages,f=g.F,v=g.IntlMessageFormat,b=p({title:{id:"deletedPadPage.modal.title",description:"Title for the deleted pad page confirmation modal",msg:"Confirm doc delete"
},text:{id:"deletedPadPage.modal.text",description:"Text for the deleted pad page confirmation modal",msg:"Are you sure you want to permanently delete this doc? You canât undo this action!"},button:{
id:"deletedPadPage.modal.button",description:"Button text for the deleted pad page confirmation modal",msg:"Permanently Delete"},sinceyoueditednameyoucanrestoreit:{
msg:"Since you edited â{name}â, you can restore it."},restore:{msg:"Restore"},thisdochasbeenarchived:{msg:"This doc has been archived"}}),y=((0,a.defineMessages)({title:{id:"eBBb3M",
defaultMessage:"Confirm doc delete"},text:{id:"4ouwwr",defaultMessage:"Are you sure you want to permanently delete this doc? You canât undo this action!"},button:{id:"ahSPxJ",
defaultMessage:"Permanently Delete"},sinceyoueditednameyoucanrestoreit:{id:"HeCJ/4",defaultMessage:"Since you edited â{name}â, you can restore it."},restore:{id:"PL5ta5",defaultMessage:"Restore"},
thisdochasbeenarchived:{id:"eE0LFv",defaultMessage:"This doc has been archived"}}),function(e){n.__extends(t,e);function t(t){var i=e.call(this,t)||this;i.onPermanentDeleteConfirmClicked_=function(e){
u.permanentlyDeletePadWithPadId(i.props.stores.padList,e,(function(){return window.App.navigateToUrl("/")}))};i.onPermanentDeleteClicked_=function(e,t){e.preventDefault()
;var n=new v(b.text,r.default.userLocale).format();o.confirm(new v(b.title,r.default.userLocale).format(),n,(function(){return i.onPermanentDeleteConfirmClicked_(t)}),{
confirmText:new v(b.button,r.default.userLocale).format(),cancelByDefault:!0,confirmButtonClass:"hp-button-dangerous"})};return i}t.prototype.render=function(){
var e,t=this.props.deletedPadClientVars,i=t.initialUserInfo&&"edit"==t.initialUserInfo.permission,o=t.initialUserInfo&&t.initialUserInfo.isOwner;if(i||o){
var r="/pad/undelete?localPadId=".concat(t.padId,"&returnPath=/").concat(t.padId);e=h.createElement("div",null,h.createElement("div",{className:"deleted-pad-page-subtext"
},h.createElement("p",null,h.createElement(f,n.__assign({values:{name:t.initialTitle?"".concat(t.initialTitle):"it"}},b.sinceyoueditednameyoucanrestoreit)))),h.createElement("form",{
className:"control",method:"post",action:r},h.createElement(m.default,null),h.createElement(s.default,{type:"submit",primary:!0,className:"selenium-archived-pad-restore-button"
},h.createElement(f,n.__assign({},b.restore)))))}return h.createElement(c.default,{name:this.props.name,isSelected:this.props.isSelected,className:"hp-non-pad-page"},h.createElement("div",{
className:"hp-page-inner hp-page-empty-state"},h.createElement(l.InvertibleImage,{className:"hp-empty-state-hero",src:"/static/img/composer/rebrand/empty-states/empty-archived-docs-tab.png"
}),h.createElement("h1",null,h.createElement(f,n.__assign({},b.thisdochasbeenarchived))),e))};t.displayName="DeletedPadPage";return t}(h.PureComponent));t.default=y},949:function(e,t,i){
Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(90),r=i(2),a=i(12),s=i(10),l=i(4),d=i(73),u=i(14),c=i(29),h=i(115),m=i(45),g=i(0),p=i(44),f=i(84),v=i(48),b=(0,
u.MsgFactory)("pad"),y=b.F,C=(0,b.defineMessages)({deletethistemplateforever:{msg:"Delete this template forever?"},deletethisdocforever:{msg:"Delete this doc forever?"},templatepermanentlydeleted:{
msg:"Template permanently deleted.",description:"This message shows up after one template is deleted by the user."},docpermanentlydeleted:{msg:"1 doc permanently deleted.",
description:"This message shows up after one doc is deleted by the user."},deleteforever:{msg:"Delete forever"},thistemplatewasdeleted:{msg:"This template was deleted"},thisdocwasdeleted:{
msg:"This doc was deleted"},restoredocTitletoviewit:{msg:"Restore {docTitle} to view it."},restorethistemplatetoviewit:{msg:"Restore this template to view it."},restorethisdoctoviewit:{
msg:"Restore this doc to view it."},thedocowner:{msg:"The doc owner",description:"Used to let the user know who deleted the doc. eg. The doc owner deleted this showcase x days ago"},
deleterdeleteddocTitletimeAgo:{msg:"{deleter} deleted {docTitle} {timeAgo}."},deleterdeletedthistemplatetimeAgo:{msg:"{deleter} deleted this template {timeAgo}."},deleterdeletedthisdoctimeAgo:{
msg:"{deleter} deleted this doc {timeAgo}."},restore:{msg:"Restore"},restoreTemplateTitle:{
msg:"Restore this template to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},restoreDocTitle:{
msg:"Restore this doc to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},restoreTemplate:{
msg:"Restore this template to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."},restoreDoc:{
msg:"Restore this doc to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."},templatePermDelete:{
msg:"{docTitle} will be permanently deleted for you and everyone else. Once this template is deleted forever, it canât be restored."},docPermDelete:{
msg:"{docTitle} will be permanently deleted for you and everyone else. Once this doc is deleted forever, it canât be restored."},actorDeletedTemplate:{
msg:"{deleter} deleted this template {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},actorDeletedDoc:{
msg:"{deleter} deleted this doc {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},autoPurgeTemplate:{
msg:"{deleter} deleted this doc {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."},autoPurgeDoc:{
msg:"{deleter} deleted this doc {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."}}),_=((0,r.defineMessages)({deletethistemplateforever:{id:"33Jjnv",
defaultMessage:"Delete this template forever?"},deletethisdocforever:{id:"qucPVd",defaultMessage:"Delete this doc forever?"},templatepermanentlydeleted:{id:"36AQ33",
defaultMessage:"Template permanently deleted."},docpermanentlydeleted:{id:"bgAWL6",defaultMessage:"1 doc permanently deleted."},deleteforever:{id:"jevYoY",defaultMessage:"Delete forever"},
thistemplatewasdeleted:{id:"vTGD4W",defaultMessage:"This template was deleted"},thisdocwasdeleted:{id:"HNC/tp",defaultMessage:"This doc was deleted"},restoredocTitletoviewit:{id:"ueO94+",
defaultMessage:"Restore {docTitle} to view it."},restorethistemplatetoviewit:{id:"1pVYqg",defaultMessage:"Restore this template to view it."},restorethisdoctoviewit:{id:"+NZ6dy",
defaultMessage:"Restore this doc to view it."},thedocowner:{id:"YKKY8B",defaultMessage:"The doc owner"},deleterdeleteddocTitletimeAgo:{id:"APdTRh",
defaultMessage:"{deleter} deleted {docTitle} {timeAgo}."},deleterdeletedthistemplatetimeAgo:{id:"qeAio4",defaultMessage:"{deleter} deleted this template {timeAgo}."},deleterdeletedthisdoctimeAgo:{
id:"kaQVRg",defaultMessage:"{deleter} deleted this doc {timeAgo}."},restore:{id:"PL5ta5",defaultMessage:"Restore"},restoreTemplateTitle:{id:"mcEFwy",
defaultMessage:"Restore this template to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},restoreDocTitle:{id:"R0dASz",
defaultMessage:"Restore this doc to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},restoreTemplate:{id:"pU6FQK",
defaultMessage:"Restore this template to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."},restoreDoc:{id:"AdNNrb",
defaultMessage:"Restore this doc to view it. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."},templatePermDelete:{id:"J72UQh",
defaultMessage:"{docTitle} will be permanently deleted for you and everyone else. Once this template is deleted forever, it canât be restored."},docPermDelete:{id:"LQ1wnG",
defaultMessage:"{docTitle} will be permanently deleted for you and everyone else. Once this doc is deleted forever, it canât be restored."},actorDeletedTemplate:{id:"GdNdBO",
defaultMessage:"{deleter} deleted this template {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},actorDeletedDoc:{id:"kqzDV/",
defaultMessage:"{deleter} deleted this doc {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, {docTitle} will be permanently deleted."},autoPurgeTemplate:{id:"SoDCuw",
defaultMessage:"{deleter} deleted this doc {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."},autoPurgeDoc:{id:"SoDCuw",
defaultMessage:"{deleter} deleted this doc {timeAgo}. In {autoPurgeDays, plural, one {1 day} other {# days}}, it will be permanently deleted."}}),function(e){n.__extends(t,e);function t(){
var t=null!==e&&e.apply(this,arguments)||this;t.state={autoPurgeDays:void 0};t.handleRestoreClicked=function(){var e=t.props.deletedPadClientVars;e.isTemplate&&l.IntentionEvent.UntrashTemplate.track({
context:l.AppContext.TrashedPadPage});var i=e.padId,n=h.getUntrashUrl(i,!0);a.post({url:n,data:{},analyticsTag:"trashed_pad_page",shardingKey:a.getShardingKeyForPad(i),dataType:"json",hpAppLevel:!0,
successHandler:function(e){t.props.onRestored?t.props.onRestored():(0,c.padPageReload)("trashed_pad_page-restore_pad")},errorHandler:function(){return!0}})}
;t.handlePermanentlyDeleteClicked=function(e,i){e.preventDefault();var r,a,s=t.props.deletedPadClientVars,d=g.createElement("b",null,s.initialTitle)
;s.isTemplate&&l.IntentionEvent.PermanentlyDeleteTemplateConfirmationShown.track({context:l.AppContext.TrashedPadPage});if(s.isTemplate){r=g.createElement(y,n.__assign({},C.deletethistemplateforever))
;a=g.createElement(y,n.__assign({},C.templatePermDelete,{values:{docTitle:d}}))}else{r=g.createElement(y,n.__assign({},C.deletethisdocforever));a=g.createElement(y,n.__assign({},C.docPermDelete,{
values:{docTitle:d}}))}o.confirm(r,a,(function(){s.isTemplate&&l.IntentionEvent.PermanentlyDeleteTemplate.track({context:l.AppContext.TrashedPadPage});var e
;e=t.props.onPermanentDeleted?t.props.onPermanentDeleted:function(){(0,p.realSetTimeout)((function(){var e
;e=s.isTemplate?g.createElement(y,n.__assign({},C.templatepermanentlydeleted)):g.createElement(y,n.__assign({},C.docpermanentlydeleted));var t=g.createElement(v.default,{alignLeft:!0,autoDismiss:!0,
autoDismissDelayMs:1e4},e);v.default.show(t)}),500);window.App.navigateToUrl("/")};h.permanentlyDeletePadWithPadId(t.props.stores.padList,i,e)}),{
confirmText:g.createElement(y,n.__assign({},C.deleteforever)),cancelByDefault:!0,cancelCallback:t.handleCancelPermanentDeleteClicked,confirmButtonClass:"hp-button-dangerous"})}
;t.handleCancelPermanentDeleteClicked=function(){t.props.deletedPadClientVars.isTemplate&&l.IntentionEvent.CancelPermanentlyDeleteTemplate.track({context:l.AppContext.TrashedPadPage})};return t}
t.prototype.render=function(){var e;e=this.props.deletedPadClientVars.isTemplate?g.createElement(y,n.__assign({},C.thistemplatewasdeleted)):g.createElement(y,n.__assign({},C.thisdocwasdeleted))
;return g.createElement(m.default,{name:this.props.name,isSelected:this.props.isSelected,className:"hp-non-pad-page"},g.createElement("div",{className:"hp-page-inner hp-page-empty-state"
},g.createElement(d.InvertibleImage,{className:"hp-empty-state-hero",src:"/static/img/composer/rebrand/empty-states/doc-deleted.png"}),g.createElement("h1",null,e),this.renderBody()))}
;t.prototype.canPermaDeletePad=function(){var e=this.props.deletedPadClientVars;return e.initialUserInfo&&e.initialUserInfo.canPermanentlyDeletePad};t.prototype.renderBody=function(){
var e,t,i,o=this,r=this.state.autoPurgeDays,a=this.props.deletedPadClientVars,d=!a.isCloudDoc&&a.initialUserInfo&&a.initialUserInfo.isOwner,u=!a.isCloudDoc&&this.canPermaDeletePad()
;if(d)if(a.initialTitle){var c=g.createElement("b",null,a.initialTitle);e=r?a.isTemplate?g.createElement(y,n.__assign({},C.restoreTemplateTitle,{values:{autoPurgeDays:r,docTitle:c}
})):g.createElement(y,n.__assign({},C.restoreDocTitle,{values:{autoPurgeDays:r,docTitle:c}})):g.createElement(y,n.__assign({values:{docTitle:c}},C.restoredocTitletoviewit))
}else e=r?a.isTemplate?g.createElement(y,n.__assign({},C.restoreTemplate,{values:{autoPurgeDays:r}})):g.createElement(y,n.__assign({},C.restoreDoc,{values:{autoPurgeDays:r}
})):a.isTemplate?g.createElement(y,n.__assign({},C.restorethistemplatetoviewit)):g.createElement(y,n.__assign({},C.restorethisdoctoviewit));else{
var h=g.createElement("span",null,g.createElement(y,n.__assign({},C.thedocowner))),m=a.trashedDate?new Date(a.trashedDate):new Date,p=g.createElement(f.TimeAgo,{date:m});if(a.initialTitle){
c=g.createElement("b",null,a.initialTitle);e=r?this.props.deletedPadClientVars.isTemplate?g.createElement(y,n.__assign({},C.actorDeletedTemplate,{values:{deleter:h,timeAgo:p,autoPurgeDays:r,docTitle:c
}})):g.createElement(y,n.__assign({},C.actorDeletedDoc,{values:{deleter:h,timeAgo:p,autoPurgeDays:r,docTitle:c}})):g.createElement(y,n.__assign({values:{deleter:h,docTitle:c,timeAgo:p}
},C.deleterdeleteddocTitletimeAgo))}else e=r?this.props.deletedPadClientVars.isTemplate?g.createElement(y,n.__assign({},C.autoPurgeTemplate,{values:{deleter:h,timeAgo:p,autoPurgeDays:r}
})):g.createElement(y,n.__assign({},C.autoPurgeDoc,{values:{deleter:h,timeAgo:p,autoPurgeDays:r}})):this.props.deletedPadClientVars.isTemplate?g.createElement(y,n.__assign({values:{deleter:h,timeAgo:p
}},C.deleterdeletedthistemplatetimeAgo)):g.createElement(y,n.__assign({values:{deleter:h,timeAgo:p}},C.deleterdeletedthisdoctimeAgo))}d&&(t=g.createElement("div",{
className:"trashed-pad-page-restore-form"},g.createElement(s.default,{primary:!0,onClick:this.handleRestoreClicked},g.createElement(y,n.__assign({},C.restore)))));u&&(i=g.createElement(s.default,{
secondary:!0,className:"hp-button-dangerous",onClick:function(e){return o.handlePermanentlyDeleteClicked(e,a.padId)}},g.createElement(y,n.__assign({},C.deleteforever))))
;var v=l.AppContext.TrashedPadPage;return g.createElement(l.TrackContext,{trackContext:v},g.createElement("div",null,g.createElement("div",{className:"trashed-pad-page-subtext"
},e),g.createElement("div",{className:"trashed-pad-page-actions"},t,i)))};t.displayName="TrashedPadPage";return t}(g.PureComponent));t.default=_},950:function(e,t){
Object.defineProperty(t,"__esModule",{value:!0});t.exit=t.toggle=t.isToggled=t.getFullscreenElement=t.isEnabled=void 0;function i(){
return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||!1}t.isEnabled=i;function n(){
return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}t.getFullscreenElement=n;function o(){return!!n()}t.isToggled=o
;t.toggle=function(e){i()&&(o()?r():function(e){e||(e=document.documentElement)
;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()
}(e))};function r(){
document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()
}t.exit=r},951:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i;t.default=function(){if(i)return i;if(document.scrollingElement)return i=document.scrollingElement
;document.body.scrollTop++;if(document.body.scrollTop>0){document.body.scrollTop--;return i=document.body}return i=document.documentElement}}}]);

//# sourceMappingURL=https://paper.dropbox.com/static/sourcemap/4bdac7f4eeaafe319cda.4ljURm72FBURH3fnbBJ5yyJ-D-aa_uiL1Cvz2C-4pG8.js.map