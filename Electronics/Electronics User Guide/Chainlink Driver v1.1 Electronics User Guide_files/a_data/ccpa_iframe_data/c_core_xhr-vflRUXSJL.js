define(["exports","./c_csrf","metaserver/static/js/modules/constants/page_load"],(function(e,t,n){"use strict";function o(){if(!window.ensemble)return void 0!==n.YAPS_PROJECT&&void 0!==n.YAPS_DEPLOYMENT?`${n.YAPS_PROJECT}:${n.YAPS_DEPLOYMENT}`:void 0;const e=window.ensemble.getPageletInfoForExceptionReporting().filter((e=>void 0!==e.yaps_deployment&&void 0!==e.yaps_project));return 0!==e.length?e.sort(((e,t)=>e.pagelet_name<t.pagelet_name?-1:1)).map((e=>`${e.yaps_project}:${e.yaps_deployment}`)).join(";"):void 0}const s=function(e){};e.getAttributionHeader=o,e.sendXhr=function(e,n,r=s){t.assertDropboxDomain(e),function(e){const n=t.readCsrfToken();e.is_xhr=!0,e.t=n}(n);const i=function(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(String(e[n]))}`);return t.join("&")}(n),a=new XMLHttpRequest;a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&r(a.status)},a.open("POST",e),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const p=o();return p&&a.setRequestHeader("X-Dropbox-Client-Yaps-Attribution",p),a.send(i),a}}));
//# sourceMappingURL=c_core_xhr.js-vflOd1fsj.map
