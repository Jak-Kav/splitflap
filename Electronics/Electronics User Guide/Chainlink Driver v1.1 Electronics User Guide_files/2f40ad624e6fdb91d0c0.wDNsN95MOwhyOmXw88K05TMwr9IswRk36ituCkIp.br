(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["paper_binder~paper_bundle~paper_cloud_docs~paper_influencer~paper_jasmine_tests~paper_native_desktop~a7937731"],{
120:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(6),n=o(25),a=o(0),i=o(218),l=(0,n.createReactClass)({displayName:"DivWithTooltip",mixins:[i.default],
tooltipContent:function(){if(this.props.tooltip)return this.props.tooltip},tooltipBgcolor:function(){if(this.props.tooltipBgcolor)return this.props.tooltipBgcolor},render:function(){
var e=s.omit(this.props,["tooltip","tooltipAbove","tooltipAside","tooltipBgColor","tooltipShowDelay"]);return a.createElement("div",r.__assign({},e),this.props.children)}});t.default=l},
149:function(e,t,o){const r=o(0);e.exports=r.addons.PureRenderMixin},1527:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.FollowUnfollowButton=t.FollowFolderListItem=t.FollowPadListItem=t.FollowModalEmptyState=t.FollowingModalContents=void 0
;var r,s=o(1),n=o(2),a=o(611),i=o(7),l=o(11),c=o(853),g=o(367),d=o(10),u=o(139),p=o(4),h=o(73),f=o(250),b=o(372),m=o(14),y=o(115),C=o(0),M=o(13),_=(0,m.MsgFactory)("modals"),S=_.F,v=(0,
_.defineMessages)({managefolloweddocs:{
description:"Title for a dialog to manage docs and folders I'm subscribed to.\n                  User sees a list of docs and folders they have subscribed to below this title.",
msg:"Manage followed docs"},lastupdated:{msg:"Last updated"},unfollowdocstoreduceemails:{msg:"Unfollow docs to reduce emails",description:"Manage followed docs header content"},
whenyoucreateeditorcommentonadocyoullautomaticallystartfollowinganditllshowuphere:{msg:"When you create, edit, or comment on a doc, you'll automatically start following and it'll show up here.",
description:"Text to show users how to follow/unfollow a doc."},unfollow:{msg:"Unfollow",description:"text indicating the doc or folder will be unfollowed on click"},follow:{msg:"Follow",
description:"text indicating the doc or folder will be followed on click"}});(0,n.defineMessages)({managefolloweddocs:{id:"xgPoDN",defaultMessage:"Manage followed docs"},lastupdated:{id:"WDyeI1",
defaultMessage:"Last updated"},unfollowdocstoreduceemails:{id:"wrL1kP",defaultMessage:"Unfollow docs to reduce emails"},
whenyoucreateeditorcommentonadocyoullautomaticallystartfollowinganditllshowuphere:{id:"0BzFkC",
defaultMessage:"When you create, edit, or comment on a doc, you'll automatically start following and it'll show up here."},unfollow:{id:"cMjM/2",defaultMessage:"Unfollow"},follow:{id:"/Mda/9",
defaultMessage:"Follow"}});!function(e){e.PAD="pad";e.FOLDER="folder"}(r||(r={}));var E=function(e){s.__extends(o,e);function o(){var t=null!==e&&e.apply(this,arguments)||this
;t.followListDataSource=null;t.numUnfollowed=0;t.numRefollowed=0;t.state={loaded:!1,data:{}};t.handleListChange=function(){t.updateFromDataStore(t.state.data)};t.subscribePad=function(e){var o
;t.trackSubscriptionLevelChange(r.PAD,"subscribed");y.updatePadFollowPref(t.props.stores.padList,e,!0);var n={entry:t.state.data[e].entry,following:!0};t.setState({
data:s.__assign(s.__assign({},t.state.data),(o={},o[e]=n,o))})};t.subscribeFolder=function(e){var o;t.trackSubscriptionLevelChange(r.FOLDER,"subscribed")
;g.performFolderSubscriptionChange(e,i.FolderSubscriptionLevel.DailyEmails,t.props.stores.folderList);var n={entry:t.state.data[e].entry,following:!0};t.setState({
data:s.__assign(s.__assign({},t.state.data),(o={},o[e]=n,o))})};t.unsubscribePad=function(e){var o;t.trackSubscriptionLevelChange(r.PAD,"unsubscribed")
;y.updatePadFollowPref(t.props.stores.padList,e,!1);var n={entry:t.state.data[e].entry,following:!1};t.setState({data:s.__assign(s.__assign({},t.state.data),(o={},o[e]=n,o))})}
;t.unsubscribeFolder=function(e){var o;t.trackSubscriptionLevelChange(r.FOLDER,"unsubscribed");g.performFolderSubscriptionChange(e,i.FolderSubscriptionLevel.None,t.props.stores.folderList);var n={
entry:t.state.data[e].entry,following:!1};t.setState({data:s.__assign(s.__assign({},t.state.data),(o={},o[e]=n,o))})};return t}o.prototype.componentWillMount=function(){
this.followListDataSource=new b.default({padListStore:this.props.stores.padList,folderListStore:this.props.stores.folderList,filter:i.ListViewFilter.following,includeFolders:!0})
;this.updateFromDataStore(this.state.data)};o.prototype.componentDidMount=function(){this.followListDataSource.on("change",this.handleListChange)};o.prototype.componentWillUnmount=function(){
this.followListDataSource.off("change",this.handleListChange);this.followListDataSource.dispose()};o.prototype.resetFollowUnfollowTrackingData=function(){this.numUnfollowed=0;this.numRefollowed=0}
;o.prototype.onOpen=function(){p.IntentionEvent.OpenFollowModal.track();this.resetFollowUnfollowTrackingData();this.updateFromDataStore({})};o.prototype.onClose=function(){
p.IntentionEvent.CloseFollowModal.track({numUnfollowed:this.numUnfollowed,numRefollowed:this.numRefollowed,totalNumUnfollowed:this.numUnfollowed-this.numRefollowed})}
;o.prototype.updateFromDataStore=function(e){var t=this.followListDataSource.get();if(t.isLoaded){var o=s.__assign({},e);t.entries.forEach((function(e){var t,s=e.id.id
;e.type==r.PAD?t=g.isPadFollowed(e.pad):e.type==r.FOLDER&&(t=g.isFolderFollowed(e.folderData));o[s]={entry:e,following:t}}));this.setState({loaded:!0,data:o})}};o.prototype.sortedEntries=function(){
var e=this,t=Object.keys(this.state.data).map((function(t){return e.state.data[t].entry}));return(0,f.sortEntries)(t,i.ListViewFilter.following).reverse().map((function(t){return{entry:t,
following:e.state.data[t.id.id].following}}))};o.prototype.trackSubscriptionLevelChange=function(e,t){"unsubscribed"==t?this.numUnfollowed+=1:this.numRefollowed+=1
;p.IntentionEvent.FollowModalChangeFollowSetting.track({type:e,subscription_level:t,numRefollowed:this.numRefollowed,numUnfollowed:this.numUnfollowed})};o.prototype.render=function(){var e,o=this,n=[]
;this.state.loaded&&this.sortedEntries().forEach((function(e){var s=e.following;e.entry.type==r.PAD?n.push(C.createElement(t.FollowPadListItem,{key:"follow-list-item-"+e.entry.id.id,isSubscribed:s,
onSubscribe:o.subscribePad,onUnsubscribe:o.unsubscribePad,pad:e.entry.pad})):e.entry.type==r.FOLDER&&n.push(C.createElement(t.FollowFolderListItem,{key:"follow-list-item-"+e.entry.id.id,
stores:o.props.stores,isSubscribed:s,onSubscribe:o.subscribeFolder,onUnsubscribe:o.unsubscribeFolder,folderData:e.entry.folderData}))}));e=n.length>0?C.createElement("div",{
className:"follow-modal-data"},n):C.createElement(t.FollowModalEmptyState,null);return C.createElement("div",{className:"follow-modal-pane"},C.createElement("div",{className:"follow-modal-header"
},C.createElement("h1",{className:"follow-modal-title"},C.createElement(S,s.__assign({},v.managefolloweddocs))),n.length>0?C.createElement("div",{className:"follow-modal-sort-title"
},C.createElement(S,s.__assign({},v.lastupdated))):null),e)};return o=s.__decorate([l.default],o)}(C.PureComponent);t.FollowingModalContents=E;t.FollowModalEmptyState=function(){
return C.createElement("div",{className:"follow-modal-empty-state"},C.createElement(h.InvertibleImage,{className:"follow-modal-empty-state__illustration",
src:"/static/img/composer/rebrand/empty-states/empty-docs-tab.png"}),C.createElement("div",{className:"follow-modal-empty-state__heading-text"
},C.createElement(S,s.__assign({},v.unfollowdocstoreduceemails))),C.createElement("div",{className:"follow-modal-empty-state__description-text"
},C.createElement(S,s.__assign({},v.whenyoucreateeditorcommentonadocyoullautomaticallystartfollowinganditllshowuphere))))};t.FollowModalEmptyState.displayName="FollowModalEmptyState"
;t.FollowPadListItem=function(e){var o=e.pad,r=e.isSubscribed,s=e.onSubscribe,n=e.onUnsubscribe;return C.createElement("div",{className:"follow-modal-row"},C.createElement(u.default,{title:o.title
},C.createElement(M.default,{name:"note"})),C.createElement(a.default,{pad:o,hideFolderMembership:!0,sortOrder:i.ListViewFilter.following}),C.createElement(t.FollowUnfollowButton,{id:o.localPadId,
isSubscribed:r,onSubscribe:s,onUnsubscribe:n}))};t.FollowPadListItem.displayName="FollowPadListItem";t.FollowFolderListItem=function(e){
var o=e.folderData,r=e.isSubscribed,s=e.onSubscribe,n=e.onUnsubscribe,a=e.stores,l=o.folder.encryptedId;return C.createElement("div",{className:"follow-modal-row"},C.createElement(c.default,{
folderData:o,index:0,showPath:!0,stores:a,trackListView:"follow-modal",sortOrder:i.ListViewFilter.following,hideSharingStatus:!0,hidePresence:!0,isNoninteractive:!0
}),C.createElement(t.FollowUnfollowButton,{id:l,isSubscribed:r,onSubscribe:s,onUnsubscribe:n}))};t.FollowFolderListItem.displayName="FollowFolderListItem";t.FollowUnfollowButton=function(e){
var t=e.id,o=e.isSubscribed,r=e.onSubscribe,n=e.onUnsubscribe,a=o?C.createElement(S,s.__assign({},v.unfollow)):C.createElement(S,s.__assign({},v.follow));return C.createElement(d.default,{
onClick:o?function(){return n(t)}:function(){return r(t)},className:"follow-modal-row-button","aria-checked":o,primary:!o,secondary:o},a)};t.FollowUnfollowButton.displayName="FollowUnfollowButton"},
1528:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.getSortString=void 0;var r=o(1),s=o(2),n=o(7),a=o(14),i=o(0),l=o(84),c=(0,a.MsgFactory)("composer"),g=c.F,d=(0,
c.defineMessages)({createdcreatedTimeAgo:{description:"Doc entry subtitle message indicating the doc was created at createdTimeAgo relative time (from TimeAgo)",msg:"Created {createdTimeAgo}"},
youViewed:{msg:"You viewed {viewedTimeAgo}",description:"Doc entry subtitle message indicating the doc was viewed by the current user at viewedTimeAgo relative time (from TimeAgo)"},edited:{
msg:"Edited {editedTimeAgo}",description:"Doc entry subtitle message indicating the doc was edited at editedTimeAgo relative time (from TimeAgo)"},youWereInvited:{
msg:"You were invited {invitedTimeAgo}",description:"Doc entry subtitle message indicating current user was invited to the doc at invitedTimeAgo relative time (from TimeAgo)"},youEdited:{
msg:"You edited {myLastEditedTimeAgo}",description:"Doc entry subtitle message indicating the doc was edited by the current user at myLastEditedTimeAgo relative time (from TimeAgo)"}});(0,
s.defineMessages)({createdcreatedTimeAgo:{id:"EFi8cJ",defaultMessage:"Created {createdTimeAgo}"},youViewed:{id:"98s+Ke",defaultMessage:"You viewed {viewedTimeAgo}"},edited:{id:"rFCqAB",
defaultMessage:"Edited {editedTimeAgo}"},youWereInvited:{id:"d3Lx3a",defaultMessage:"You were invited {invitedTimeAgo}"},youEdited:{id:"YXywDq",defaultMessage:"You edited {myLastEditedTimeAgo}"}})
;t.getSortString=function(e,t,o){var s;switch(t){case n.ListViewFilter.recents:s=e.sortKey;break;case n.ListViewFilter.archived:case n.ListViewFilter.trashed:case n.ListViewFilter.createdByMe:
s="createdDate";break;case n.ListViewFilter.ownedByMe:case n.ListViewFilter.openedByMe:s="lastViewedDate";break;case n.ListViewFilter.sharedWithMe:s="currentUserInvitedDate";break
;case n.ListViewFilter.editedByMe:s="myLastEditedDate"}switch(s){case"createdDate":if(e.createdDate){var a=i.createElement(l.TimeAgo,{date:e.createdDate})
;return i.createElement("span",null,i.createElement(g,r.__assign({values:{createdTimeAgo:a}},d.createdcreatedTimeAgo)))}break;case"lastViewedDate":if(e.lastViewedDate){
var c=i.createElement(l.TimeAgo,{date:e.lastViewedDate}),u=i.createElement("span",null,i.createElement(g,r.__assign({},d.youViewed,{values:{viewedTimeAgo:c}})));if(e.lastEditedDate){
var p=new Date(e.lastEditedDate.toString()).getTime(),h=new Date(e.lastViewedDate.toString()).getTime(),f=i.createElement(l.TimeAgo,{date:e.lastEditedDate
}),b=i.createElement("span",null,i.createElement(g,r.__assign({},d.edited,{values:{editedTimeAgo:f}})));return p>h?i.createElement("span",null,u,i.createElement("span",{className:"hp-last-edited-span"
},i.createElement("span",{className:"notranslate"}," · "),i.createElement("span",{className:"hp-last-edited-emphasized"
},i.createElement("strong",null,b)))):i.createElement("span",null,u,i.createElement("span",{className:"hp-last-edited-span"},i.createElement("span",{className:"notranslate"}," · "),b))}return u}break
;case"currentUserInvitedDate":if(e.currentUserInvitedDate){var m=i.createElement(l.TimeAgo,{date:e.currentUserInvitedDate})
;return i.createElement("span",null,i.createElement(g,r.__assign({},d.youWereInvited,{values:{invitedTimeAgo:m}})))}break;case"myLastEditedDate":if(e.myLastEditedDate){
var y=i.createElement(l.TimeAgo,{date:e.myLastEditedDate});return i.createElement("span",null,i.createElement(g,r.__assign({},d.youEdited,{values:{myLastEditedTimeAgo:y}})))}}}},1529:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(4),n=o(2),a=o(1530),i=o(10),l=o(68),c=o(103),g=o(69),d=o(0),u=o(13),p=(0,o(5).PaperIntlFactory)()._f,h=(0,n.defineMessages)({
moreTooltip:{id:"EWfZuu",defaultMessage:"More"}}),f=function(e){r.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.handleMenuOpen=function(e){e.preventDefault();e.stopPropagation()}
;o.closeMenu=function(){o.refs.menuButton.close()};o.state={};return o}t.prototype.render=function(){var e=this.props,t=e.subFolderData,o=e.isPinned,r=p(h.moreTooltip)
;return d.createElement(s.TrackContext,{trackContext:s.AppContext.FolderPage.EntryOverflowMenu},d.createElement(g.default,{ref:"menuButton",dontReposition:!0,className:"hp-list-item-actions",
onClick:this.handleMenuOpen},d.createElement(i.default,{className:"hp-pad-more-button",hasPopup:!0,tooltip:r,"aria-label":r},d.createElement(u.default,{name:"dots"
})),d.createElement(l.default,null,d.createElement("ul",null,d.createElement(c.HpMenuItem,null,d.createElement(a.default,{subFolder:t.folder,subFolderData:t,isPinned:o,onClick:this.closeMenu}))))))}
;t.displayName="SubFolderEntryOverflowMenu";return t}(d.PureComponent);t.default=f},1530:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;var r=o(1),s=o(2),n=o(7),a=o(12),i=o(10),l=o(23),c=o(0),g=o(4),d=(0,o(5).PaperIntlFactory)().F,u=(0,s.defineMessages)({removepin:{id:"6mzq9i",defaultMessage:"Remove pin"},pintofolder:{id:"uxbdSg",
defaultMessage:"Pin to folder"},couldntunpinfolderTryagainlater:{id:"pVggAd",defaultMessage:"Couldn’t unpin folder. Try again later."},couldntpinfolderTryagainlater:{id:"CMkduo",
defaultMessage:"Couldn’t pin folder. Try again later."}}),p=function(e){r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={hasPermissions:!1}
;t.handleClick=function(){t.props.onClick&&t.props.onClick();t.props.isPinned?t.unpinSubfolder():t.pinSubfolder()};t.unpinSubfolder=function(){
var e=t.props.subFolder,o=e.encryptedId,s=e.encryptedParentFolderId,n=t.context.stores.mostRecentFolder.modifyEntity((function(e){e.folderPins=(e.folderPins||[]).filter((function(e){
return e.encryptedEntityId!==o}))}));(0,g.track)("overflow-menu-unpin-subfolder-from-folder-clicked");a.post({data:{folderId:s,subfolderId:o},url:"/folder/unpin-subfolder",
analyticsTag:"overflow-menu-unpin-subfolder-from-folder-clicked",shardingKey:a.getStatelessShardingKey(),successHandler:function(e){t.context.stores.mostRecentFolder.refresh()},
errorHandler:function(){n();return!1},errorModalMessage:c.createElement(d,r.__assign({},u.couldntunpinfolderTryagainlater))})};t.pinSubfolder=function(){
var e=t.props,o=e.subFolder,s=e.subFolderData,i=o.encryptedId,l=o.encryptedParentFolderId,p=t.context.stores.mostRecentFolder.modifyEntity((function(e){var t={id:-1,
encryptedProjectId:o.encryptedParentFolderId,pinOrder:1,entityType:n.ProjectPinEntityType.Folder,encryptedEntityId:i,entity:s};e.folderPins=r.__spreadArray(r.__spreadArray([],e.folderPins,!0),[t],!1)
}));(0,g.track)("overflow-menu-pin-subfolder-to-folder-clicked");a.post({data:{folderId:l,subfolderId:i},url:"/folder/pin-subfolder",analyticsTag:"overflow-menu-pin-subfolder-to-folder-clicked",
shardingKey:a.getStatelessShardingKey(),successHandler:function(e){t.context.stores.mostRecentFolder.refresh()},errorHandler:function(){p();return!1},
errorModalMessage:c.createElement(d,r.__assign({},u.couldntpinfolderTryagainlater))})};return t}t.prototype.componentWillReceiveProps=function(e){this.props.subFolder&&this.setState({hasPermissions:!0
})};t.prototype.render=function(){return this.props.isPinned?c.createElement(i.default,{onClick:this.handleClick,className:"hp-button-remove-pinned-subfolder-from-folder",role:"menuitem"
},c.createElement(d,r.__assign({},u.removepin))):c.createElement(i.default,{onClick:this.handleClick,className:"hp-button-pin-subfolder-to-folder",role:"menuitem"
},c.createElement(d,r.__assign({},u.pintofolder)))};t.displayName="FolderPinSubFolderButton";t.contextTypes={stores:l.object.isRequired};return t}(c.PureComponent);t.default=p},1624:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});t.AuthorStore=void 0;var r=o(17),s=function(){function e(e,t,o,r,s){this.userSet={};this.colorPalette=e;this.secureUserId=r.secureUserId;this.editor=t
;this.trigger=o;this.userSet[this.secureUserId]=r;this.historicalAuthorData=s;this.tellAceAboutHistoricalAuthors(s);this.tellAceActiveAuthorInfo(r)
;this.editor&&this.editor.authors.setThisAuthor(this.secureUserId)}e.prototype.currentUser=function(){return this.userSet[this.secureUserId]};e.prototype.tellAceActiveAuthorInfo=function(e){
this.tellAceAuthorInfo(e,!1)};e.prototype.tellAceAuthorInfo=function(e,t){var o=e.secureUserId,r=e.colorId,s=e.name,n=e.givenName,a=e.surname;if(r||"number"==typeof r){r=Number(r)
;if(this.editor&&this.colorPalette&&this.colorPalette[r%this.colorPalette.length]){var i={bgcolor:this.colorPalette[r%this.colorPalette.length],name:s,givenName:n,surname:a,secureUserId:o}
;this.editor.authors.setAuthorInfo(o,i)}}};e.prototype.fadeAceAuthorInfo=function(e){this.tellAceAuthorInfo(e,!0)};e.prototype.tellAceAboutHistoricalAuthors=function(e,t){for(var o in e){var r=e[o]
;this.userSet[o]&&!t||this.tellAceAuthorInfo(r,!0)}};e.prototype.handleUserEdited=function(e){var t=this,o=e.secureUserId,s=e.timestamp
;""!=o&&(this.userSet[o]?r.default.error.loggingTryCatch((function(){t.trigger("user-edited",[t.userSet[o],s||0])})):r.default.error.logException(new Error("Unknown author"),null,{author:o}))}
;e.prototype.handleUserJoin=function(e){var t=e.userInfo,o=t.secureUserId;if(this.userSet[o]){this.userSet[o]=t;this.trigger("user-update",t)}else{this.userSet[o]=t;this.trigger("user-join",t)}
this.tellAceActiveAuthorInfo(t)};e.prototype.handleUserUpdated=function(e){var t=e.userInfo;this.tellAceActiveAuthorInfo(t)};e.prototype.handleUserLeave=function(e){var t=e.userInfo,o=t.secureUserId
;if(this.userSet[o]){delete this.userSet[o];this.fadeAceAuthorInfo(t);this.trigger("user-leave",t)}};e.prototype.handleUserKilled=function(e){var t=e.userInfo,o=t.secureUserId;delete this.userSet[o]
;this.trigger("user-kill",t)};e.prototype.handleSocketClosed=function(){var e=this;Object.keys(this.userSet).forEach((function(t){if(t!=e.secureUserId){var o=e.userSet[t];delete e.userSet[t]
;e.trigger("user-leave",o)}}))};e.prototype.getDiagnosticInfo=function(){var e=[];for(var t in this.userSet)e.push(t);return{participants:e.join(",")}};return e}();t.AuthorStore=s},
1625:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.decode=t.encodeLoneCaretMessage=t.encodeUserChangesMessage=t.encodeClientReadyMessage=void 0;var r,s=o(473),n=o(133)
;t.encodeClientReadyMessage=function(e){var t=e.roomName.split("/");if("padpage"!==t[0]||2!==t.length)throw new Error("bad room name: "+e.roomName)
;var o=e.roomName.substring(8),r=new s.ClientReadyMessage;r.setPadId(o);e.clientId&&r.setClientId(e.clientId);r.setSecureUserId(e.secureUserId);r.setClientReadySeq(e.clientReadySeq)
;if(e.createPadParams){if(e.createPadParams.localPadId!==o)throw new Error("create pad param pad id should be equal");r.setPadIdSig(e.createPadParams.localPadIdSignature)
;e.createPadParams.folderId&&r.setFolderId(e.createPadParams.folderId);e.createPadParams.isCloudDoc&&r.setIsCloudDoc(e.createPadParams.isCloudDoc)}r.setLastRev(e.data.lastRev)
;r.setLastObjectStoreRev(e.data.lastObjectStoreRev);e.data.isCommitPending&&r.setIsCommitPending(!0);r.setAceVersion(e.data.aceVersion)
;"number"==typeof e.data.preferredColorId&&r.setPreferredColorId(e.data.preferredColorId+1);var n=new s.CollabMessage;n.setClientReadyMessage(r);return n};t.encodeUserChangesMessage=function(e){
var t=new s.UserChangesMessage;t.setBaseRev(e.baseRev);t.setChangeset((0,n.fixBadUnicodeSequence)(e.changeset));for(var o=[],r=0;r<e.apool.nextNum;r++)o.push((0,
n.fixBadUnicodeSequence)(e.apool.numToAttrib[r][0]+","+e.apool.numToAttrib[r][1]));t.setAttribsList(o);if(e.caretMessage){var a=new s.CaretPosition;a.setZone(e.caretMessage.caret.zone)
;a.setLine(e.caretMessage.caret.line);a.setCol(e.caretMessage.caret.col);a.setTotalPos(e.caretMessage.caret.totalPos);t.setCaret(a)}var i=new s.CollabMessage;i.setUserChangesMessage(t);return i}
;t.encodeLoneCaretMessage=function(e){var t=new s.LoneCaretMessage;t.setBaseRev(e.payload.baseRev);var o=new s.CaretPosition;o.setZone(e.payload.caret.zone);o.setLine(e.payload.caret.line)
;o.setCol(e.payload.caret.col);o.setTotalPos(e.payload.caret.totalPos);t.setCaret(o);var r=new s.CollabMessage;r.setLoneCaretMessage(t);return r};0;t.decode=function(e){var t=e.getTheMessageCase()
;if(t==r.CollabMessage.TheMessageCase.USER_CHANGES_MESSAGE){var o=e.getUserChangesMessage(),s=o.getBaseRev(),n=String(o.getChangeset()),a=null;if(o.hasCaret()){var i=o.getCaret();a={type:"caret",
caret:{zone:String(i.getZone()),line:i.getLine(),col:i.getCol(),totalPos:i.getTotalPos()},baseRev:s}}for(var l={nextNum:0,numToAttrib:{}},c=o.getAttribsList(),g=0;g<c.size();g++){
var d=String(c.get(g)),u=d.indexOf(","),p=d.substring(0,u),h=d.substring(u+1,d.length);l.numToAttrib[l.nextNum]=[p,h];l.nextNum++}return{type:"USER_CHANGES",baseRev:s,changeset:n,apool:l,
caretMessage:a}}if(t==r.CollabMessage.TheMessageCase.CLIENT_READY_MESSAGE){var f=e.getClientReadyMessage(),b=String(f.getPadId());return{type:"CLIENT_READY",roomType:"padpage",roomName:"padpage/"+b,
clientId:String(f.getClientId())||void 0,secureUserId:String(f.getSecureUserId()),clientReadySeq:f.getClientReadySeq(),createPadParams:String(f.getPadIdSig())?{localPadId:b,
localPadIdSignature:String(f.getPadIdSig()),folderId:f.getFolderId()?String(f.getFolderId()):void 0,isCloudDoc:!!f.getIsCloudDoc()&&Boolean(f.getIsCloudDoc())}:void 0,data:{lastRev:f.getLastRev(),
lastObjectStoreRev:f.getLastObjectStoreRev(),isCommitPending:!!f.getIsCommitPending(),aceVersion:f.getAceVersion(),preferredColorId:f.getPreferredColorId()?f.getPreferredColorId()-1:void 0}}}
if(t==r.CollabMessage.TheMessageCase.LONE_CARET_MESSAGE){a=e.getLoneCaretMessage();return{type:"CLIENT_MESSAGE",payload:{type:"caret",caret:{zone:String(a.getCaret().getZone()),
line:a.getCaret().getLine(),col:a.getCaret().getCol(),totalPos:a.getCaret().getTotalPos()},baseRev:s=a.getBaseRev()}}}if(t==r.CollabMessage.TheMessageCase.JSON_MESSAGE){
var m=JSON.parse(e.getJsonMessage());if("COLLABROOM"!==m.type)throw new Error("unrecognized type: "+m.type);return m.data}throw new Error("unrecognized collab proto message case: "+t)}},
1628:function(e,t,o){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS-IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0})
;t._generateFuzzyInterval=t.ReconnectingWebSocket=t.ReconnectingEtherpadWebSocket=t.ReconnectingSocket=t.canUseNewChillOutBehavior=t.CHILL_OUT_FUZZ_FACTOR=t.CHILL_OUT_UPDATE_WINDOW_MS=t.CHILL_OUT_RECONNECT_DELAY_MS=t.CHILL_OUT_DISCONNECT_DELAY_MS=void 0
;var r=o(1),s=o(1629),n=o(473),a=o(892),i=o(476),l=o(411),c=o(26),g=o(8),d=o(49),u=o(246),p=o(66),h=o(28),f=o(12),b=o(44),m=o(4),y=o(133),C=o(17),M=o(340),_=o(43),S=o(41),v=o(7),E=o(7),T=o(38),w=o(61),I=o(50)
;"undefined"==typeof streamingClientCanUseCollabService&&(streamingClientCanUseCollabService=!1);var A=10*S.Time.MINUTE,O=20*S.Time.MINUTE;t.CHILL_OUT_DISCONNECT_DELAY_MS=1*S.Time.HOUR
;t.CHILL_OUT_RECONNECT_DELAY_MS=10*S.Time.MINUTE;t.CHILL_OUT_UPDATE_WINDOW_MS=60*S.Time.SECOND;t.CHILL_OUT_FUZZ_FACTOR=.1
;var N=10*S.Time.MINUTE,P=2*S.Time.MINUTE,R=45*S.Time.SECOND,F=55*S.Time.SECOND,D=30*S.Time.SECOND,B=[30,60,120,240,360],k=20*S.Time.SECOND;t.canUseNewChillOutBehavior=function(){return!(0,
p.isApollo)()&&!(0,h.isNativeMobileApp)()};var U=function(){function e(e,o,r,s,n,a,i,l,c,g){var d=this;this.isNewPad=!1;this.channelState=v.ChannelState.RECONNECTING;this.serverDisconnectReason=null
;this.padTooBusy=!1;this.isReadOnly=!1;this.isServerDBReadOnly=!1;this.lastMsgSentTime=0;this.reconnectTimes=[];this.lastChannelStateConnectedTime=0;this.liteReconnects=0;this.hiccupCount=0
;this.chillOut=!1;this.chillOutTimer=null;this.dontReconnectUntil=null;this.flushInterval=(0,t._generateFuzzyInterval)(N,P);this.lastFlushedSeqNumber=0;this.needsReauth=!1;this.reauthTimeout=null
;this.totalNumReauthAttempts=0;this.networkIsUp=!1;this.lastConnectionAttemptStartTime=null;this.socket=null;this.paused=!1;this.reconnectingTimeout=null;this.reauth=null;this.isAbandoned=!1
;this.deferredSocketCreateFunc=null;this.socketId="";this.pingTimeout=null;this.handleWindowUnload=function(){d.teardownSocket(!1,!0)};this.handleWindowKeydown=function(e){
e.which==_.KeyCode.ESCAPE&&e.preventDefault()};this.errorCodeCounters={};this.doChillOutDisconnect=function(){d.dmesg("chill out timer: disconnecting");d.pause("chilling-out");if(d.chillOutTimer){
clearTimeout(d.chillOutTimer);d.chillOutTimer=null}d.setChillOutReconnectTimer()};this.doChillOutReconnect=function(){d.dmesg("chill out timer: reconnecting");d.unpause("chill-out-reconnect")
;if(d.chillOutTimer){clearTimeout(d.chillOutTimer);d.chillOutTimer=null}d.setChillOutDisconnectTimer(t.CHILL_OUT_UPDATE_WINDOW_MS)};this.debug=e;this.trigger=o;this.isNewPad=g;this.onSocketMessage=r
;this.onSocketOpen=s;this.onSocketClosed=n;this.getPadId=a;this.getTrackingInfo=l;this.getEncryptedDomainId=i;this.reconnectingSocketId=T.getStandardLengthRandomId()
;this.slowConnectTrackingTimeouts={};this.pingTimeout=(0,b.realSetTimeout)(this.doPing.bind(this),0,!1);window.removeEventListener("unload",this.handleWindowUnload)
;window.addEventListener("unload",this.handleWindowUnload);if(w.default.gecko){window.removeEventListener("keydown",this.handleWindowKeydown)
;window.addEventListener("keydown",this.handleWindowKeydown)}if(null==c){setTimeout(this.flushUnconfirmedMessages.bind(this),this.flushInterval);this.setUpSocketTimeout(0,"initial connect")}else{
this.handleDisconnectMessage(c);this.isAbandoned||this.abandonConnection("can't properly deal with initialErrorCode "+c)}}e.prototype.dmesg=function(e){
this.debug.dmesg("ReconnectingSocket: ".concat(e))};e.prototype.getServerDisconnectReason=function(){return this.serverDisconnectReason};e.prototype.socketType=function(){return"ReconnectingSocket"}
;e.prototype.analyticsTags=function(){return{reconnectingSocketId:this.reconnectingSocketId,socketType:this.socketType()}};e.prototype.reconnect=function(e){if(this.reconnectingTimeout){
this.setUpSocketTimeout(0,"explicit reconnect: ".concat(e));this.setChannelState(v.ChannelState.RECONNECTING)
}else this.paused?this.dmesg("asked to reconnect, but currently paused, so doing nothing"):this.reauth?this.dmesg("asked to reconnect, but currently re-authing, so doing nothing"):this.socket?this.dmesg("asked to reconnect, but socket already exists, so doing nothing"):this.isAbandoned?this.dmesg("asked to reconnect, but connection is abandoned, so doing nothing"):this.dmesg("asked to reconnect, but currently in a weird state, so doing nothing")
};e.prototype.pause=function(e){if(this.isAbandoned)this.dmesg("asked to pause, but connection is abandoned, so doing nothing");else{
this.dmesg("pausing: ".concat(e,"; socket: ").concat(this.socket?"set":"not set"));if(this.pingTimeout){clearTimeout(this.pingTimeout);this.pingTimeout=null}this.teardownSocket()
;if(this.reconnectingTimeout){clearTimeout(this.reconnectingTimeout);this.reconnectingTimeout=null}this.reauth=null;this.paused=!0;this.setChannelState(v.ChannelState.RECONNECTING)}}
;e.prototype.unpause=function(e){if(this.paused){this.pingTimeout=(0,b.realSetTimeout)(this.doPing.bind(this),k,!1);this.dmesg("unpausing: ".concat(e));this.paused=!1
;this.setUpSocketTimeout(0,"explicit reconnect: ".concat(e));this.setChannelState(v.ChannelState.RECONNECTING)}else this.dmesg("asked to unpause, but connection is not paused, so doing nothing")}
;e.prototype.abandonConnection=function(e,t){var o=this;if(!this.isAbandoned){this.isAbandoned=!0;if(this.pingTimeout){clearTimeout(this.pingTimeout);this.pingTimeout=null}
if(t)this.networkIsUp=!1;else{var r={};C.default.error.loggingTryCatch((function(){r=o.getTrackingInfo()}));r.reason=e;(0,b.realSetTimeout)(this.doPing.bind(this),0,!0);(0,
b.realSetTimeout)(this.doTrack.bind(this),5*S.Time.SECOND,r)}this.dmesg("abandoning connect ".concat(e));this.teardownSocket();this.reauth=null;this.paused=!1;if(this.reconnectingTimeout){
clearTimeout(this.reconnectingTimeout);this.reconnectingTimeout=null}if(this.chillOutTimer){clearTimeout(this.chillOutTimer);this.chillOutTimer=null}if(null!==this.reauthTimeout){
clearInterval(this.reauthTimeout);this.reauthTimeout=null}this.setChannelState(v.ChannelState.DISCONNECTED,e)}};e.prototype.setPadId=function(){this.forceReconnect("received pad id")}
;e.prototype.disconnect=function(e){this.abandonConnection("user_disconnect: ".concat(e))};e.prototype.forceReconnect=function(e){this.dmesg("force reconnect: ".concat(e))
;this.pause("force-reconnect");this.unpause("force-reconnect")};e.prototype.doTrack=function(e){e.networkOnline=this.networkIsUp;m.trackEng("disconnected",e);this.networkIsUp=!1}
;e.prototype.doPing=function(e){var t=this,o=f.FetchWrapper.getNetworkStatus(),r=Date.now()-o.time;if(r<k){this.networkIsUp=o.success;null!=this.pingTimeout&&(this.pingTimeout=(0,
b.realSetTimeout)(this.doPing.bind(this),k-r,!1))}else{var s=(null===window||void 0===window?void 0:window.clientVars)?"?tabId=".concat(clientVars.tabId):"";f.FetchWrapper.get({url:"/nginx/ping"+s,
analyticsTag:null,shardingKey:f.getStatelessShardingKey(),disableCaching:!0,skipSettingRequestHeaders:!0,successHandler:function(){t.networkIsUp=!0;null!=t.pingTimeout&&(t.pingTimeout=(0,
b.realSetTimeout)(t.doPing.bind(t),k,!1))},errorHandler:function(){t.networkIsUp=!1;null!=t.pingTimeout&&(t.pingTimeout=(0,b.realSetTimeout)(t.doPing.bind(t),k,!1));return!0}})}}
;e.prototype.preSetUpSocket=function(e){var t=this;if(this.needsReauth){this.totalNumReauthAttempts++;var o=this.totalNumReauthAttempts;this.reauth=this.totalNumReauthAttempts
;this.dmesg("attempting re-auth #".concat(this.totalNumReauthAttempts));this.performReauth((function(){if(t.reauth==o){t.reauth=null;t.needsReauth=!1;t.setUpSocket(e)}}),(function(){if(t.reauth==o){
t.reauth=null;t.serverDisconnectReason=v.BootConnectionReason.Unauthenticated;t.abandonConnection("reauth-failed")}}),(function(){if(t.reauth==o){t.reauth=null;t.handleSocketClosed({
reason:"reauth-needs-retry"})}}))}else this.getPadId()?this.setUpSocket(e):this.handleSocketClosed({reason:"no-pad-id"})};e.prototype.setUpSocket=function(e){var t=this
;if(null===this.lastConnectionAttemptStartTime){this.lastConnectionAttemptStartTime=Date.now();m.trackEng("socket-connect-attempt",this.analyticsTags());B.forEach((function(e){
t.slowConnectTrackingTimeouts[e]=setTimeout((function(){t.slowConnectTrackingTimeouts[e]=null;m.trackEng("socket-connect-slow-".concat(e,"-sec"),t.analyticsTags())}),1e3*e)}))}
this.setUpSocketInternal(e)};e.prototype.setUpSocketInternal=function(e){};e.prototype.wrapOnSocketMessage=function(e){if(e.data){var t="string"==typeof e.data?e.data:""
;e.data instanceof ArrayBuffer&&(t=JSON.stringify({type:"COLLABROOM",data:s.decode(e.data)}));this.onSocketMessage({type:"message",data:t})}};e.prototype.socketHttpHeaders=function(){
var e,t=r.__assign({"Notes-Pad-Id":this.getPadId(),"Notes-Pad-Team-Id":this.getEncryptedDomainId()},null!==(e=(0,l.getCurrentAppAuthHeaders)())&&void 0!==e?e:{})
;g.default&&g.default.encryptedTeamId&&(t["Notes-Team-Id"]=g.default.encryptedTeamId);return t};e.prototype.setUpSocketTimeout=function(e,t,o){var r=this
;if(this.paused||this.socket)throw new Error("invariant violation");this.reconnectingTimeout&&clearTimeout(this.reconnectingTimeout);this.reconnectingTimeout=setTimeout((function(){
r.dmesg("trying to reconnect: ".concat(t));r.reconnectingTimeout=null;r.preSetUpSocket(o)}),e)};e.prototype.handleSocketClosed=function(e){this.dmesg("handleSocketClosed: "+e.reason)
;this.teardownSocket();this.onSocketClosed();var o=e.reason;this.setChannelState(v.ChannelState.RECONNECTING,o);var r=Date.now();if(this.chillOut){this.dmesg("handleSocketClosed: chilling out");if((0,
t.canUseNewChillOutBehavior)())this.doChillOutDisconnect();else{var s=W(A,O);this.setUpSocketTimeout(s,"chill-out timeout is up",{connectLite:!0,timeoutMillis:void 0})}
}else if(this.dontReconnectUntil&&r<this.dontReconnectUntil){this.dmesg("handleSocketClosed: planned restart");s=this.dontReconnectUntil-r;this.setUpSocketTimeout(s,"planned restart delay is up",{
connectLite:!0,timeoutMillis:void 0})}else{this.dmesg("handleSocketClosed: ordinary timeout with backoff");this.reconnectTimes.push(Date.now());this.liteReconnects+=1
;this.setChannelState(v.ChannelState.RECONNECTING,o);var n=Math.min(D,1e3*Math.pow(2,this.liteReconnects+1)),a=(0,t._generateFuzzyInterval)(n,.4*n);this.setUpSocketTimeout(a,"backoff reconnect",{
connectLite:!0,timeoutMillis:void 0});this.reconnectTimes=this.reconnectTimes.slice(0,50)}};e.prototype.handleCometHiccup=function(e){this.dmesg("HICCUP (connected:".concat(!!e.connected,")"))
;if(e.connected){this.hiccupCount=0;this.setChannelState(v.ChannelState.CONNECTED)}else{this.hiccupCount++;this.hiccupCount>1&&this.setChannelState(v.ChannelState.RECONNECTING)}}
;e.prototype.setChannelState=function(e,t){var o=this,s=v.ChannelState[e];this.dmesg("Channel state being set to ".concat(s));if(e!=this.channelState){this.channelState=e
;this.trigger("channel-state-change",[e,null!=t?t:""]);if(this.channelState==v.ChannelState.CONNECTED){var n=Date.now();if(null!==this.lastConnectionAttemptStartTime){
m.trackEng("socket-connect-successful",r.__assign(r.__assign({},this.analyticsTags()),{"time-to-connect":n-this.lastConnectionAttemptStartTime}));B.forEach((function(e){
if(o.slowConnectTrackingTimeouts[e]){clearTimeout(o.slowConnectTrackingTimeouts[e]);o.slowConnectTrackingTimeouts[e]=null}}));this.lastConnectionAttemptStartTime=null}
this.lastChannelStateConnectedTime=n}}};e.prototype.sendMessageInternal=function(e,t){};e.prototype.sendMessage=function(e,t,o){if(this.socket){t=t||e.type
;this.dmesg("sendMessage with type ".concat(t));var r;if(o)r=e;else{var s=JSON.stringify({type:"COLLABROOM",data:e});(r=new n.CollabMessage).setJsonMessage((0,y.fixBadUnicodeSequence)(s))}
this.sendMessageInternal(r,t);this.lastMsgSentTime=Date.now();this.updateLastFlushedSeqNumber()}else this.dmesg("Can't sendMessage without a socket!")}
;e.prototype.updateLastFlushedSeqNumber=function(){};e.prototype.flushUnconfirmedMessages=function(){};e.prototype.padIsNew=function(){};e.prototype.waitAndReconnect=function(e){
this.dontReconnectUntil=Date.now()+W(R,F);this.trigger("server-planned-restart",void 0);this.setChannelState(v.ChannelState.RECONNECTING,e);this.disconnectSocket()}
;e.prototype.handlePlannedRestartMessage=function(){this.dmesg("got planned restart message");this.waitAndReconnect("planned restart")};e.prototype.handleRateLimit=function(){
this.dmesg("got rate limited by the server");this.waitAndReconnect("rate limited")};e.prototype.setReadOnly=function(){this.isReadOnly=!0};e.prototype.setReadWrite=function(){this.isReadOnly=!1}
;e.prototype.handleSwitchToReadOnlyMessage=function(){var e=this;this.setReadOnly();var t=(0,b.setInterval)((function(){0==e.isReadOnly&&clearInterval(t);e.sendMessage({
type:v.CollabMessageType.CheckReadonly})}),45e3)};e.prototype.handleSwitchToWriteMessage=function(){this.setReadWrite();this.trigger("switch-to-write",void 0);this.forceReconnect("readonly mode off")}
;e.prototype.handleServerDBStatusMessage=function(e,t){if(e===v.ServerDBStatus.READ_ONLY){t(v.ServerDBStatus.READ_ONLY);this.setServerDBReadOnly()}else if(e===v.ServerDBStatus.READ_WRITE){
t(v.ServerDBStatus.READ_WRITE);this.setServerDBReadWrite()}};e.prototype.setServerDBReadOnly=function(){var e=this;if(1!=this.isServerDBReadOnly){this.isServerDBReadOnly=!0;var t=(0,
b.setInterval)((function(){0==e.isServerDBReadOnly&&clearInterval(t);e.sendMessage({type:v.CollabMessageType.CheckServerDbStatus})}),45e3)}};e.prototype.setServerDBReadWrite=function(){
this.isServerDBReadOnly=!1};e.prototype.handleDisconnectMessage=function(e,t){var o=this;this.serverDisconnectReason=e;var r=v.BootConnectionReason[e];switch(this.serverDisconnectReason){
case v.BootConnectionReason.Unauthorized:this.abandonConnection("unauthorized");break;case v.BootConnectionReason.Unauthenticated:this.abandonConnection("unauthenticated");break
;case v.BootConnectionReason.UserMismatch:this.abandonConnection("user-mismatch");break;case v.BootConnectionReason.PadDeleted:this.abandonConnection("paddeleted");break
;case v.BootConnectionReason.PadOldArchived:this.abandonConnection("pad-old-archived");break;case v.BootConnectionReason.InvalidRev:this.abandonConnection("bad message revision on CLIENT_READY");break
;case v.BootConnectionReason.CommitFailed:case v.BootConnectionReason.ObjectRequestFailed:case v.BootConnectionReason.ClientReadyFailed:this.errorCodeCounters[e]=(this.errorCodeCounters[e]||0)+1
;this.dmesg("counter for "+r+" is now at "+this.errorCodeCounters[e]);if(this.errorCodeCounters[e]>=4){t&&e==v.BootConnectionReason.CommitFailed&&C.default.error.silentTryCatch((function(){
var e=t.changesetTracker.baseZatext.text[0];if(e.length<=1e4){for(var r=new Array(2*e.length),s=0;s<e.length;s++){var n=e.charCodeAt(s);r[2*s]=String.fromCharCode(n%256)
;r[2*s+1]=String.fromCharCode(n>>8)}o.debug.baseTextInBase64=btoa(r.join(""))}}));this.abandonConnection("BootConnectionReason."+r+" several times in a row")}break
;case v.BootConnectionReason.ReauthRequired:this.needsReauth=!0;this.forceReconnect("reauth-required");break;case v.BootConnectionReason.PadTooBusy:this.padTooBusy=!0
;this.abandonConnection("pad-too-busy");break;case v.BootConnectionReason.SwitchToComet:case v.BootConnectionReason.SwitchToWebSockets:this.pause("switching-transport");break;default:
r?this.abandonConnection("BootConnectionReason."+r):this.abandonConnection("unknown: "+e)}};e.prototype.resetErrorCounter=function(e){if(e in this.errorCodeCounters){var t=v.BootConnectionReason[e]
;this.dmesg("counter for "+t+" is reset to 0");delete this.errorCodeCounters[e]}};e.prototype.setChillOutMode=function(e){var o=this.chillOut
;this.dmesg("chillOut mode from: ".concat(o," to: ").concat(e));this.chillOut=e;if((0,
t.canUseNewChillOutBehavior)())if(e&&!o)this.setChillOutDisconnectTimer(t.CHILL_OUT_DISCONNECT_DELAY_MS);else if(!e&&o){if(null!=this.chillOutTimer){clearTimeout(this.chillOutTimer)
;this.chillOutTimer=null}this.unpause("no-longer-chilling-out")}};e.prototype.setChillOutDisconnectTimer=function(e){if(this.chillOutTimer)this.dmesg("chillOutTimer already set (disconnect)");else{
var o=(0,t._generateFuzzyInterval)(e,t.CHILL_OUT_FUZZ_FACTOR*e);this.dmesg("setting chillOutTimer to disconnect in ".concat(e," (fuzzed to ").concat(o,")"));this.chillOutTimer=(0,
b.setTimeout)(this.doChillOutDisconnect,o)}};e.prototype.setChillOutReconnectTimer=function(){if(null==this.chillOutTimer){var e=(0,
t._generateFuzzyInterval)(t.CHILL_OUT_RECONNECT_DELAY_MS,t.CHILL_OUT_FUZZ_FACTOR*t.CHILL_OUT_RECONNECT_DELAY_MS)
;this.dmesg("setting chillOutTimer to reconnect in ".concat(t.CHILL_OUT_RECONNECT_DELAY_MS," (fuzzed to ").concat(e,")"));this.chillOutTimer=(0,b.setTimeout)(this.doChillOutReconnect,e)
}else this.dmesg("chillOutTimer already set (reconnect)")};e.prototype.performReauth=function(e,t,o){var r=this;f.tryFastRefreshReauth((function(){r.reconnect("reauth: success");e()
}),(function(e,s,n,a){r.dmesg("Reauth failed. textStatus: ".concat(e,", ")+"thrownError ".concat(a,", status = ").concat(n))
;n==E.HttpResponseCodes.LoginRequired||n==E.HttpResponseCodes.AccessNotGranted?t():o();return!0}))};r.__decorate([u.freakoutOnException],e.prototype,"abandonConnection",null);return e}()
;t.ReconnectingSocket=U;var j=function(e){r.__extends(o,e);function o(){var t=null!==e&&e.apply(this,arguments)||this;t.socket=null;t.teardownSocket=function(e,o){if(t.socket){
t.socket.onmessage=function(){};t.socket.onopen=function(){};t.socket.onclosed=function(){};t.socket.onhiccup=function(){};t.disconnectSocket(e,o);t.socket.onlogmessage=function(e){
t.dmesg("(closed) ".concat(e))};t.socket=null}};t.disconnectSocket=function(e,o){var r;null===(r=t.socket)||void 0===r||r.disconnect(e,o)};return t}o.prototype.setUpSocketInternal=function(e){
var t=this,r=e&&e.connectLite,s=e&&e.timeoutMillis,n=!1;this.debug.callCatchingErrors("setUpSocket",(function(){t.socketId=T.getStandardLengthRandomId();t.dmesg("socketId = "+t.socketId)
;t.socket=o.createWebSocket(t.socketId,t.getPadId(),t.socketHttpHeaders(),t.isNewPad);t.socket.onmessage=t.wrapOnSocketMessage.bind(t)
;t.socket.onclosed=t.debug.wrapRecordingErrors("socket.onclosed",t.handleSocketClosed,t);t.socket.onopen=t.debug.wrapRecordingErrors("socket.onopen",(function(){t.hiccupCount=0;t.liteReconnects=0
;t.setChannelState(v.ChannelState.CONNECTED);t.onSocketOpen()}),t);t.socket.onhiccup=t.debug.wrapRecordingErrors("socket.onhiccup",t.handleCometHiccup,t)
;t.socket.onlogmessage=t.debug.dmesg.bind(t.debug);t.socket.connectLite=!!r;t.socket.connect(s);n=!0}));n||this.abandonConnection("initsocketfail")};o.prototype.sendMessageInternal=function(e,t){
this.socket.postMessage(e,void 0,t)};o.prototype.updateLastFlushedSeqNumber=function(){this.lastFlushedSeqNumber=this.socket.getLastReceivedSeqNumber()}
;o.prototype.flushUnconfirmedMessages=function(){var e=this.socket&&this.socket.getLastReceivedSeqNumber()||0,o=Date.now()
;if(e>this.lastFlushedSeqNumber&&o-this.lastMsgSentTime>this.flushInterval-1e3){this.sendMessage({type:v.CollabMessageType.FlushMessage});this.lastFlushedSeqNumber=e}this.flushInterval=(0,
t._generateFuzzyInterval)(N,P);setTimeout(this.flushUnconfirmedMessages.bind(this),this.flushInterval)};o.prototype.padIsNew=function(){if(this.socket&&!this.isNewPad){this.isNewPad=!0
;this.forceReconnect("pad is new")}};o.prototype.socketType=function(){return"EtherpadWebSocket"};o.createWebSocket=function(e,t,o,r){return new a.EtherpadWebSocket(e,t,o,r)};return o}(U)
;t.ReconnectingEtherpadWebSocket=j;var L=function(e){r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.socket=null;t.teardownSocket=function(e,o){if(t.socket){
t.socket.onmessage=function(){};t.socket.onopen=function(){};t.socket.onclose=function(){};t.disconnectSocket(e);t.socket=null}};t.disconnectSocket=function(e){if(t.socket){
e||t.dmesg("disconnecting WebSocket");t.socket.close()}};return t}t.canUseWebSockets=function(){return streamingClientCanUseCollabService};t.prototype.setUpWebSocket=function(e){var o=this
;this.socket=t.createWebSocket(this.socketId,this.getPadId(),this.socketHttpHeaders(),this.isNewPad,e);this.socket.onmessage=this.wrapOnSocketMessage.bind(this)
;this.socket.onclose=this.debug.wrapRecordingErrors("socket.onclose",(function(e){if(null!==o.reauthTimeout){o.dmesg("got close: clearing reauth interval");clearInterval(o.reauthTimeout)
;o.reauthTimeout=null}o.xhrManager.closeAllOpenXhrs();o.handleSocketClosed(e)}),this);this.socket.onopen=this.debug.wrapRecordingErrors("socket.onconnect",(function(){o.dmesg("socket connect event")
;o.hiccupCount=0;o.liteReconnects=0;o.setChannelState(v.ChannelState.CONNECTED);o.onSocketOpen();o.reauthTimeout=(0,b.setInterval)(o.doReauth.bind(o),t.REAUTH_INTERVAL)}),this)
;this.socket.onerror=function(e){o.dmesg("got websocket error: ".concat(e.type));console.error("[network] WebSocket error:",e);o.handlePlannedRestartMessage()}
;this.socket?this.dmesg("socket readyState = ".concat(this.socket.readyState)):this.dmesg("socket missing")
;0==this.socket.readyState||1==this.socket.readyState||this.abandonConnection("initsocketfail")};t.prototype.setUpNativeMobileWebSocket=function(){var e,t=this,o={
path:(c.default.urlPrefix||"")+"/internal/ws/mobile-auth",query:(e={id:this.socketId,tag:this.getPadId()},e[(0,M.xsrfTokenParameterName)()]=(0,M.getXsrfTokenFromCookie)(),
e.uid=g.default.dropboxUserId,e)},r=new d.URI(o).toString();this.xhrManager.request(i.HTTPMethod.Get,r,!0,null,(function(e,o,r){if(200==e){var s=(0,I.loggingTryCatch)((function(){return JSON.parse(o)
}),(function(){return t.abandonConnection("Error parsing mobile token response JSON")}));if(s){var n=s.token;n||t.abandonConnection("Empty or missing mobile auth token");t.setUpWebSocket(n)}
}else t.abandonConnection("Got ".concat(e," when fetching mobile auth token"))}))};t.prototype.setUpSocketInternal=function(e){var t=this;this.deferredSocketCreateFunc=function(){
t.debug.callCatchingErrors("setUpSocket",(function(){t.socketId=T.getStandardLengthRandomId();t.dmesg("WebSocket socketId = ".concat(t.socketId))
;t.xhrManager=new i.XHRManager(t.socketId,t.socketHttpHeaders(),t.dmesg.bind(t));(0,h.isNativeMobileApp)()?t.setUpNativeMobileWebSocket():t.setUpWebSocket()}))}
;""!==this.getPadId()&&this.deferredSocketCreateFunc()};t.prototype.sendMessageInternal=function(e,t){var o=e.serializeBinary();this.socket.send(o.buffer)}
;t.prototype.flushUnconfirmedMessages=function(){};t.prototype.padIsNew=function(){if(this.socket&&!this.isNewPad){this.isNewPad=!0;this.forceReconnect("pad is new")}}
;t.prototype.socketType=function(){return"WebSocket"};t.prototype.doReauth=function(){var e,t=this,o={path:(c.default.urlPrefix||"")+"/internal/ws/reauth",query:(e={id:this.socketId,
tag:this.getPadId()},e[(0,M.xsrfTokenParameterName)()]=(0,M.getXsrfTokenFromCookie)(),e.uid=g.default.dropboxUserId,e)},r=new d.URI(o).toString();this.dmesg("performing WebSocket reauth")
;this.xhrManager.request(i.HTTPMethod.Post,r,!0,null,(function(e,o,r){t.dmesg("WebSocket reauth status: ".concat(e))}))};t.createWebSocket=function(e,t,o,r,s){var n,a={scheme:"wss",
authority:window.location.hostname,path:(c.default.urlPrefix||"")+"/internal/ws",query:(n={id:e,tag:t},n[(0,M.xsrfTokenParameterName)()]=(0,M.getXsrfTokenFromCookie)(),n.uid=g.default.dropboxUserId,
n.token=s,n)},i=new d.URI(a).toString(),l=new window.WebSocket(i);l.binaryType="arraybuffer";return l};t.REAUTH_INTERVAL=6e4;return t}(U);t.ReconnectingWebSocket=L
;t._generateFuzzyInterval=function(e,t){return e+Math.floor(T.smartRandom()*(2*t+1)-t)};function W(e,t){return T.getRandomInt(e,t+1)}},1629:function(e,t,o){Object.defineProperty(t,"__esModule",{
value:!0});t.decode=void 0;var r=o(1630);function s(e){for(var t={nextNum:0,numToAttrib:{}},o=0;o<e.length;o++){var r=String(e[o]),s=r.indexOf(","),n=r.substring(0,s),a=r.substring(s+1,r.length)
;t.numToAttrib[t.nextNum]=[n,a];t.nextNum++}return t}function n(e){return{zone:String(e.getZone()),line:e.getLine(),col:e.getCol(),totalPos:e.getTotalPos()}}t.decode=function(e){
var t=r.ServerCollabMessage.deserializeBinary(new Uint8Array(e)),o=t.getMessageCase();switch(o){case r.ServerCollabMessage.MessageCase.ACCEPT_COMMIT_MESSAGE:
if(!(a=t.getAcceptCommitMessage()))throw new Error("Empty Accept Commit Message received.");return function(e){var t=e.getAppliedChangeset(),o=s((null==t?void 0:t.getAttribsList())||[]);return{
type:"ACCEPT_COMMIT",newRev:e.getNewRev(),appliedChangeset:{apool:o,changeset:(null==t?void 0:t.getChangeset())||""}}}(a);case r.ServerCollabMessage.MessageCase.CHANGES_MESSAGE:
if(!(a=t.getChangesMessage()))throw new Error("Empty Changes Message received.");return function(e){var t=e.getChangesMessageCase()
;if(t!=r.ChangesMessage.ChangesMessageCase.NEW_CHANGES_BATCH&&t!=r.ChangesMessage.ChangesMessageCase.NEW_CHANGES_COMPOSITION)throw new Error("unrecognized collab changes message case: "+t)
;var o=s(e.getAttribsList()),a=e.getOldRev(),i=e.getNewRev(),l=e.getCaretMessage(),c=l?n(l):void 0;if(t==r.ChangesMessage.ChangesMessageCase.NEW_CHANGES_BATCH){
for(var g=e.getNewChangesBatch(),d=[],u=(null==g?void 0:g.getChangesList())||[],p=0;p<u.length;p++){var h=u[p];d.push({changeset:String(h.getChangeset()),secureUserId:String(h.getSecureUserId()),
timestampMs:h.getTimestampMs(),revState:String(h.getRevState())})}return{type:"NEW_CHANGES_BATCH",oldRev:a,newRev:i,caretMessage:c,changes:d,apool:o}}
if(t==r.ChangesMessage.ChangesMessageCase.NEW_CHANGES_COMPOSITION){var f=e.getNewChangesComposition();return{type:"NEW_CHANGES_COMPOSITION",oldRev:a,newRev:i,caretMessage:c,
changeset:String((null==f?void 0:f.getChangeset())||""),apool:o}}}(a);case r.ServerCollabMessage.MessageCase.CLIENT_READY_ACK_MESSAGE:
if(!(a=t.getClientReadyAckMessage()))throw new Error("Empty ClientReadyAck Message received");return function(e){return{type:"CLIENT_READY_ACK",clientId:e.getClientId(),headRev:e.getHeadRev()}}(a)
;case r.ServerCollabMessage.MessageCase.NO_COMMIT_PENDING_MESSAGE:if(!(a=t.getNoCommitPendingMessage()))throw new Error("Missing NoCommitPendingMessage in proto");return{type:"NO_COMMIT_PENDING"}
;case r.ServerCollabMessage.MessageCase.DONE_SENDING_INITIAL_NEW_CHANGES_MESSAGE:
if(!(a=t.getDoneSendingInitialNewChangesMessage()))throw new Error("Missing DoneSendingInitialNewChangesMessage in proto");return{type:"DONE_SENDING_INITIAL_NEW_CHANGES"}
;case r.ServerCollabMessage.MessageCase.SWITCH_TO_WRITE_MESSAGE:if(!(a=t.getSwitchToWriteMessage()))throw new Error("Missing SwitchToWriteMessage in proto");return{type:"SWITCH_TO_WRITE"}
;case r.ServerCollabMessage.MessageCase.SERVER_DB_STATUS_MESSAGE:if(!(a=t.getServerDbStatusMessage()))throw new Error("Empty ServerDBStatusMessage received");return function(e){return{
type:"SERVER_DB_STATUS",status:e.getStatus()}}(a);case r.ServerCollabMessage.MessageCase.USER_KILL_MESSAGE:if(!(a=t.getUserKillMessage()))throw new Error("Empty UserKillMessage received")
;return function(e){var t,o=null===(t=e.getUserInfo())||void 0===t?void 0:t.getSecureUserId();if(null==o)throw new Error("There should be a secureUserId in the UserKillMessage.");return{
type:"USER_KILL",userInfo:{secureUserId:o}}}(a);case r.ServerCollabMessage.MessageCase.MODERATION_MESSAGE:if(!(a=t.getModerationMessage()))throw new Error("Empty ModerationMessage received")
;return function(e){return{type:"MODERATION_MESSAGE",payload:e.getPayload()}}(a);case r.ServerCollabMessage.MessageCase.OBJECT_REQUEST_FAILED_MESSAGE:
if(!(a=t.getObjectRequestFailedMessage()))throw new Error("Empty ObjectRequestFailedMessage received");return function(e){return{type:"OBJECT_REQUEST_FAILED",operationId:e.getOperationId()}}(a)
;case r.ServerCollabMessage.MessageCase.PLANNED_RESTART_MESSAGE:if(!(a=t.getPlannedRestartMessage()))throw new Error("Missing PlannedRestartMessage in proto");return{type:"PLANNED_RESTART"}
;case r.ServerCollabMessage.MessageCase.FILESYSTEM_NEWINFO_MESSAGE:if(!(a=t.getFilesystemNewinfoMessage()))throw new Error("Missing FilesystemNewInfoMessage in proto");return{type:"FILESYSTEM_NEWINFO"
};case r.ServerCollabMessage.MessageCase.PAD_TITLE_MESSAGE:if(!(a=t.getPadTitleMessage()))throw new Error("Missing PadTitleMessage in proto");return function(e){return{type:"padtitle",
title:e.getTitle()}}(a);case r.ServerCollabMessage.MessageCase.LONE_CARET_BROADCAST_MESSAGE:var a;if(!(a=t.getLoneCaretBroadcastMessage()))throw new Error("Missing LoneCaretBroadcastMessage in proto")
;return function(e){var t=e.getBaseRev(),o=e.getSecureChangedBy(),r=e.getCaret();if(null==r)throw new Error("There should be a caret object in the LoneCaretMessage.");return{type:"caret",caret:n(r),
baseRev:t,secureChangedBy:o}}(a);default:throw new Error("Unexpected server collab message received: "+o)}}},1630:function(e,t,o){var r=o(891),s=r,n=function(){return this}(),a=o(473)
;s.object.extend(proto,a);s.exportSymbol("proto.collab.AcceptCommitMessage",null,n);s.exportSymbol("proto.collab.AcceptCommitMessage.AppliedChangeset",null,n)
;s.exportSymbol("proto.collab.Change",null,n);s.exportSymbol("proto.collab.ChangesMessage",null,n);s.exportSymbol("proto.collab.ChangesMessage.ChangesBatchMessage",null,n)
;s.exportSymbol("proto.collab.ChangesMessage.ChangesCompositionMessage",null,n);s.exportSymbol("proto.collab.ChangesMessage.ChangesMessageCase",null,n)
;s.exportSymbol("proto.collab.ClientReadyAckMessage",null,n);s.exportSymbol("proto.collab.DoneSendingInitialNewChangesMessage",null,n);s.exportSymbol("proto.collab.FilesystemNewInfoMessage",null,n)
;s.exportSymbol("proto.collab.LoneCaretBroadcastMessage",null,n);s.exportSymbol("proto.collab.ModerationMessage",null,n);s.exportSymbol("proto.collab.NoCommitPendingMessage",null,n)
;s.exportSymbol("proto.collab.ObjectRequestFailedMessage",null,n);s.exportSymbol("proto.collab.PadTitleMessage",null,n);s.exportSymbol("proto.collab.PadUserInfoId",null,n)
;s.exportSymbol("proto.collab.PlannedRestartMessage",null,n);s.exportSymbol("proto.collab.ServerCollabMessage",null,n);s.exportSymbol("proto.collab.ServerCollabMessage.MessageCase",null,n)
;s.exportSymbol("proto.collab.ServerDBStatusMessage",null,n);s.exportSymbol("proto.collab.SwitchToWriteMessage",null,n);s.exportSymbol("proto.collab.UserKillMessage",null,n)
;proto.collab.Change=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.Change,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.Change.displayName="proto.collab.Change")
;proto.collab.ChangesMessage=function(e){r.Message.initialize(this,e,0,-1,proto.collab.ChangesMessage.repeatedFields_,proto.collab.ChangesMessage.oneofGroups_)}
;s.inherits(proto.collab.ChangesMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.ChangesMessage.displayName="proto.collab.ChangesMessage")
;proto.collab.ChangesMessage.ChangesBatchMessage=function(e){r.Message.initialize(this,e,0,-1,proto.collab.ChangesMessage.ChangesBatchMessage.repeatedFields_,null)}
;s.inherits(proto.collab.ChangesMessage.ChangesBatchMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.ChangesMessage.ChangesBatchMessage.displayName="proto.collab.ChangesMessage.ChangesBatchMessage");proto.collab.ChangesMessage.ChangesCompositionMessage=function(e){
r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.ChangesMessage.ChangesCompositionMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.ChangesMessage.ChangesCompositionMessage.displayName="proto.collab.ChangesMessage.ChangesCompositionMessage");proto.collab.AcceptCommitMessage=function(e){
r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.AcceptCommitMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.AcceptCommitMessage.displayName="proto.collab.AcceptCommitMessage");proto.collab.AcceptCommitMessage.AppliedChangeset=function(e){
r.Message.initialize(this,e,0,-1,proto.collab.AcceptCommitMessage.AppliedChangeset.repeatedFields_,null)};s.inherits(proto.collab.AcceptCommitMessage.AppliedChangeset,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.AcceptCommitMessage.AppliedChangeset.displayName="proto.collab.AcceptCommitMessage.AppliedChangeset");proto.collab.ClientReadyAckMessage=function(e){
r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.ClientReadyAckMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.ClientReadyAckMessage.displayName="proto.collab.ClientReadyAckMessage");proto.collab.NoCommitPendingMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)}
;s.inherits(proto.collab.NoCommitPendingMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.NoCommitPendingMessage.displayName="proto.collab.NoCommitPendingMessage")
;proto.collab.DoneSendingInitialNewChangesMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.DoneSendingInitialNewChangesMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.DoneSendingInitialNewChangesMessage.displayName="proto.collab.DoneSendingInitialNewChangesMessage");proto.collab.SwitchToWriteMessage=function(e){
r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.SwitchToWriteMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.SwitchToWriteMessage.displayName="proto.collab.SwitchToWriteMessage");proto.collab.ServerDBStatusMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)}
;s.inherits(proto.collab.ServerDBStatusMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.ServerDBStatusMessage.displayName="proto.collab.ServerDBStatusMessage")
;proto.collab.PadUserInfoId=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.PadUserInfoId,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.PadUserInfoId.displayName="proto.collab.PadUserInfoId");proto.collab.UserKillMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)}
;s.inherits(proto.collab.UserKillMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.UserKillMessage.displayName="proto.collab.UserKillMessage");proto.collab.ModerationMessage=function(e){
r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.ModerationMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.ModerationMessage.displayName="proto.collab.ModerationMessage")
;proto.collab.ObjectRequestFailedMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.ObjectRequestFailedMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.ObjectRequestFailedMessage.displayName="proto.collab.ObjectRequestFailedMessage");proto.collab.PlannedRestartMessage=function(e){
r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.PlannedRestartMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.PlannedRestartMessage.displayName="proto.collab.PlannedRestartMessage");proto.collab.FilesystemNewInfoMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)
};s.inherits(proto.collab.FilesystemNewInfoMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.FilesystemNewInfoMessage.displayName="proto.collab.FilesystemNewInfoMessage")
;proto.collab.PadTitleMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.PadTitleMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.PadTitleMessage.displayName="proto.collab.PadTitleMessage");proto.collab.LoneCaretBroadcastMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)}
;s.inherits(proto.collab.LoneCaretBroadcastMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.LoneCaretBroadcastMessage.displayName="proto.collab.LoneCaretBroadcastMessage")
;proto.collab.ServerCollabMessage=function(e){r.Message.initialize(this,e,0,-1,null,proto.collab.ServerCollabMessage.oneofGroups_)};s.inherits(proto.collab.ServerCollabMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.ServerCollabMessage.displayName="proto.collab.ServerCollabMessage");if(r.Message.GENERATE_TO_OBJECT){proto.collab.Change.prototype.toObject=function(e){
return proto.collab.Change.toObject(e,this)};proto.collab.Change.toObject=function(e,t){var o={changeset:r.Message.getFieldWithDefault(t,1,""),secureUserId:r.Message.getFieldWithDefault(t,2,""),
timestampMs:r.Message.getFieldWithDefault(t,3,0),revState:r.Message.getFieldWithDefault(t,4,"")};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.Change.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.Change;return proto.collab.Change.deserializeBinaryFromReader(o,t)};proto.collab.Change.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readString();e.setChangeset(o);break;case 2:o=t.readString();e.setSecureUserId(o);break;case 3:o=t.readUint64()
;e.setTimestampMs(o);break;case 4:o=t.readString();e.setRevState(o);break;default:t.skipField()}}return e};proto.collab.Change.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.Change.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.Change.serializeBinaryToWriter=function(e,t){var o=void 0
;(o=e.getChangeset()).length>0&&t.writeString(1,o);(o=e.getSecureUserId()).length>0&&t.writeString(2,o);0!==(o=e.getTimestampMs())&&t.writeUint64(3,o);(o=e.getRevState()).length>0&&t.writeString(4,o)}
;proto.collab.Change.prototype.getChangeset=function(){return r.Message.getFieldWithDefault(this,1,"")};proto.collab.Change.prototype.setChangeset=function(e){
return r.Message.setProto3StringField(this,1,e)};proto.collab.Change.prototype.getSecureUserId=function(){return r.Message.getFieldWithDefault(this,2,"")}
;proto.collab.Change.prototype.setSecureUserId=function(e){return r.Message.setProto3StringField(this,2,e)};proto.collab.Change.prototype.getTimestampMs=function(){
return r.Message.getFieldWithDefault(this,3,0)};proto.collab.Change.prototype.setTimestampMs=function(e){return r.Message.setProto3IntField(this,3,e)}
;proto.collab.Change.prototype.getRevState=function(){return r.Message.getFieldWithDefault(this,4,"")};proto.collab.Change.prototype.setRevState=function(e){
return r.Message.setProto3StringField(this,4,e)};proto.collab.ChangesMessage.repeatedFields_=[3];proto.collab.ChangesMessage.oneofGroups_=[[5,6]];proto.collab.ChangesMessage.ChangesMessageCase={
CHANGES_MESSAGE_NOT_SET:0,NEW_CHANGES_BATCH:5,NEW_CHANGES_COMPOSITION:6};proto.collab.ChangesMessage.prototype.getChangesMessageCase=function(){
return r.Message.computeOneofCase(this,proto.collab.ChangesMessage.oneofGroups_[0])};if(r.Message.GENERATE_TO_OBJECT){proto.collab.ChangesMessage.prototype.toObject=function(e){
return proto.collab.ChangesMessage.toObject(e,this)};proto.collab.ChangesMessage.toObject=function(e,t){var o,s={oldRev:r.Message.getFieldWithDefault(t,1,0),
newRev:r.Message.getFieldWithDefault(t,2,0),attribsList:null==(o=r.Message.getRepeatedField(t,3))?void 0:o,caretMessage:(o=t.getCaretMessage())&&a.CaretPosition.toObject(e,o),
newChangesBatch:(o=t.getNewChangesBatch())&&proto.collab.ChangesMessage.ChangesBatchMessage.toObject(e,o),
newChangesComposition:(o=t.getNewChangesComposition())&&proto.collab.ChangesMessage.ChangesCompositionMessage.toObject(e,o)};e&&(s.$jspbMessageInstance=t);return s}}
proto.collab.ChangesMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.ChangesMessage;return proto.collab.ChangesMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.ChangesMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readInt64();e.setOldRev(o);break;case 2:
o=t.readUint64();e.setNewRev(o);break;case 3:o=t.readString();e.addAttribs(o);break;case 4:o=new a.CaretPosition;t.readMessage(o,a.CaretPosition.deserializeBinaryFromReader);e.setCaretMessage(o);break
;case 5:o=new proto.collab.ChangesMessage.ChangesBatchMessage;t.readMessage(o,proto.collab.ChangesMessage.ChangesBatchMessage.deserializeBinaryFromReader);e.setNewChangesBatch(o);break;case 6:
o=new proto.collab.ChangesMessage.ChangesCompositionMessage;t.readMessage(o,proto.collab.ChangesMessage.ChangesCompositionMessage.deserializeBinaryFromReader);e.setNewChangesComposition(o);break
;default:t.skipField()}}return e};proto.collab.ChangesMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.ChangesMessage.serializeBinaryToWriter(this,e)
;return e.getResultBuffer()};proto.collab.ChangesMessage.serializeBinaryToWriter=function(e,t){var o=void 0;0!==(o=e.getOldRev())&&t.writeInt64(1,o);0!==(o=e.getNewRev())&&t.writeUint64(2,o)
;(o=e.getAttribsList()).length>0&&t.writeRepeatedString(3,o);null!=(o=e.getCaretMessage())&&t.writeMessage(4,o,a.CaretPosition.serializeBinaryToWriter)
;null!=(o=e.getNewChangesBatch())&&t.writeMessage(5,o,proto.collab.ChangesMessage.ChangesBatchMessage.serializeBinaryToWriter)
;null!=(o=e.getNewChangesComposition())&&t.writeMessage(6,o,proto.collab.ChangesMessage.ChangesCompositionMessage.serializeBinaryToWriter)}
;proto.collab.ChangesMessage.ChangesBatchMessage.repeatedFields_=[5];if(r.Message.GENERATE_TO_OBJECT){proto.collab.ChangesMessage.ChangesBatchMessage.prototype.toObject=function(e){
return proto.collab.ChangesMessage.ChangesBatchMessage.toObject(e,this)};proto.collab.ChangesMessage.ChangesBatchMessage.toObject=function(e,t){var o={
changesList:r.Message.toObjectList(t.getChangesList(),proto.collab.Change.toObject,e)};e&&(o.$jspbMessageInstance=t);return o}}
proto.collab.ChangesMessage.ChangesBatchMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.ChangesMessage.ChangesBatchMessage
;return proto.collab.ChangesMessage.ChangesBatchMessage.deserializeBinaryFromReader(o,t)};proto.collab.ChangesMessage.ChangesBatchMessage.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){if(5===t.getFieldNumber()){var o=new proto.collab.Change;t.readMessage(o,proto.collab.Change.deserializeBinaryFromReader);e.addChanges(o)}else t.skipField()}
return e};proto.collab.ChangesMessage.ChangesBatchMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.ChangesMessage.ChangesBatchMessage.serializeBinaryToWriter(this,e)
;return e.getResultBuffer()};proto.collab.ChangesMessage.ChangesBatchMessage.serializeBinaryToWriter=function(e,t){var o
;(o=e.getChangesList()).length>0&&t.writeRepeatedMessage(5,o,proto.collab.Change.serializeBinaryToWriter)};proto.collab.ChangesMessage.ChangesBatchMessage.prototype.getChangesList=function(){
return r.Message.getRepeatedWrapperField(this,proto.collab.Change,5)};proto.collab.ChangesMessage.ChangesBatchMessage.prototype.setChangesList=function(e){
return r.Message.setRepeatedWrapperField(this,5,e)};proto.collab.ChangesMessage.ChangesBatchMessage.prototype.addChanges=function(e,t){
return r.Message.addToRepeatedWrapperField(this,5,e,proto.collab.Change,t)};proto.collab.ChangesMessage.ChangesBatchMessage.prototype.clearChangesList=function(){return this.setChangesList([])}
;if(r.Message.GENERATE_TO_OBJECT){proto.collab.ChangesMessage.ChangesCompositionMessage.prototype.toObject=function(e){return proto.collab.ChangesMessage.ChangesCompositionMessage.toObject(e,this)}
;proto.collab.ChangesMessage.ChangesCompositionMessage.toObject=function(e,t){var o={changeset:r.Message.getFieldWithDefault(t,5,"")};e&&(o.$jspbMessageInstance=t);return o}}
proto.collab.ChangesMessage.ChangesCompositionMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.ChangesMessage.ChangesCompositionMessage
;return proto.collab.ChangesMessage.ChangesCompositionMessage.deserializeBinaryFromReader(o,t)};proto.collab.ChangesMessage.ChangesCompositionMessage.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){if(5===t.getFieldNumber()){var o=t.readString();e.setChangeset(o)}else t.skipField()}return e}
;proto.collab.ChangesMessage.ChangesCompositionMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.ChangesMessage.ChangesCompositionMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.ChangesMessage.ChangesCompositionMessage.serializeBinaryToWriter=function(e,t){var o;(o=e.getChangeset()).length>0&&t.writeString(5,o)}
;proto.collab.ChangesMessage.ChangesCompositionMessage.prototype.getChangeset=function(){return r.Message.getFieldWithDefault(this,5,"")}
;proto.collab.ChangesMessage.ChangesCompositionMessage.prototype.setChangeset=function(e){return r.Message.setProto3StringField(this,5,e)};proto.collab.ChangesMessage.prototype.getOldRev=function(){
return r.Message.getFieldWithDefault(this,1,0)};proto.collab.ChangesMessage.prototype.setOldRev=function(e){return r.Message.setProto3IntField(this,1,e)}
;proto.collab.ChangesMessage.prototype.getNewRev=function(){return r.Message.getFieldWithDefault(this,2,0)};proto.collab.ChangesMessage.prototype.setNewRev=function(e){
return r.Message.setProto3IntField(this,2,e)};proto.collab.ChangesMessage.prototype.getAttribsList=function(){return r.Message.getRepeatedField(this,3)}
;proto.collab.ChangesMessage.prototype.setAttribsList=function(e){return r.Message.setField(this,3,e||[])};proto.collab.ChangesMessage.prototype.addAttribs=function(e,t){
return r.Message.addToRepeatedField(this,3,e,t)};proto.collab.ChangesMessage.prototype.clearAttribsList=function(){return this.setAttribsList([])}
;proto.collab.ChangesMessage.prototype.getCaretMessage=function(){return r.Message.getWrapperField(this,a.CaretPosition,4)};proto.collab.ChangesMessage.prototype.setCaretMessage=function(e){
return r.Message.setWrapperField(this,4,e)};proto.collab.ChangesMessage.prototype.clearCaretMessage=function(){return this.setCaretMessage(void 0)}
;proto.collab.ChangesMessage.prototype.hasCaretMessage=function(){return null!=r.Message.getField(this,4)};proto.collab.ChangesMessage.prototype.getNewChangesBatch=function(){
return r.Message.getWrapperField(this,proto.collab.ChangesMessage.ChangesBatchMessage,5)};proto.collab.ChangesMessage.prototype.setNewChangesBatch=function(e){
return r.Message.setOneofWrapperField(this,5,proto.collab.ChangesMessage.oneofGroups_[0],e)};proto.collab.ChangesMessage.prototype.clearNewChangesBatch=function(){
return this.setNewChangesBatch(void 0)};proto.collab.ChangesMessage.prototype.hasNewChangesBatch=function(){return null!=r.Message.getField(this,5)}
;proto.collab.ChangesMessage.prototype.getNewChangesComposition=function(){return r.Message.getWrapperField(this,proto.collab.ChangesMessage.ChangesCompositionMessage,6)}
;proto.collab.ChangesMessage.prototype.setNewChangesComposition=function(e){return r.Message.setOneofWrapperField(this,6,proto.collab.ChangesMessage.oneofGroups_[0],e)}
;proto.collab.ChangesMessage.prototype.clearNewChangesComposition=function(){return this.setNewChangesComposition(void 0)};proto.collab.ChangesMessage.prototype.hasNewChangesComposition=function(){
return null!=r.Message.getField(this,6)};if(r.Message.GENERATE_TO_OBJECT){proto.collab.AcceptCommitMessage.prototype.toObject=function(e){return proto.collab.AcceptCommitMessage.toObject(e,this)}
;proto.collab.AcceptCommitMessage.toObject=function(e,t){var o,s={newRev:r.Message.getFieldWithDefault(t,1,0),
appliedChangeset:(o=t.getAppliedChangeset())&&proto.collab.AcceptCommitMessage.AppliedChangeset.toObject(e,o)};e&&(s.$jspbMessageInstance=t);return s}}
proto.collab.AcceptCommitMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.AcceptCommitMessage
;return proto.collab.AcceptCommitMessage.deserializeBinaryFromReader(o,t)};proto.collab.AcceptCommitMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
switch(t.getFieldNumber()){case 1:var o=t.readUint64();e.setNewRev(o);break;case 2:o=new proto.collab.AcceptCommitMessage.AppliedChangeset
;t.readMessage(o,proto.collab.AcceptCommitMessage.AppliedChangeset.deserializeBinaryFromReader);e.setAppliedChangeset(o);break;default:t.skipField()}}return e}
;proto.collab.AcceptCommitMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.AcceptCommitMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.AcceptCommitMessage.serializeBinaryToWriter=function(e,t){var o=void 0;0!==(o=e.getNewRev())&&t.writeUint64(1,o)
;null!=(o=e.getAppliedChangeset())&&t.writeMessage(2,o,proto.collab.AcceptCommitMessage.AppliedChangeset.serializeBinaryToWriter)};proto.collab.AcceptCommitMessage.AppliedChangeset.repeatedFields_=[2]
;if(r.Message.GENERATE_TO_OBJECT){proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.toObject=function(e){return proto.collab.AcceptCommitMessage.AppliedChangeset.toObject(e,this)}
;proto.collab.AcceptCommitMessage.AppliedChangeset.toObject=function(e,t){var o,s={changeset:r.Message.getFieldWithDefault(t,1,""),attribsList:null==(o=r.Message.getRepeatedField(t,2))?void 0:o}
;e&&(s.$jspbMessageInstance=t);return s}}proto.collab.AcceptCommitMessage.AppliedChangeset.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.AcceptCommitMessage.AppliedChangeset;return proto.collab.AcceptCommitMessage.AppliedChangeset.deserializeBinaryFromReader(o,t)}
;proto.collab.AcceptCommitMessage.AppliedChangeset.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readString()
;e.setChangeset(o);break;case 2:o=t.readString();e.addAttribs(o);break;default:t.skipField()}}return e};proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.serializeBinary=function(){
var e=new r.BinaryWriter;proto.collab.AcceptCommitMessage.AppliedChangeset.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.AcceptCommitMessage.AppliedChangeset.serializeBinaryToWriter=function(e,t){var o=void 0;(o=e.getChangeset()).length>0&&t.writeString(1,o)
;(o=e.getAttribsList()).length>0&&t.writeRepeatedString(2,o)};proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.getChangeset=function(){return r.Message.getFieldWithDefault(this,1,"")}
;proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.setChangeset=function(e){return r.Message.setProto3StringField(this,1,e)}
;proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.getAttribsList=function(){return r.Message.getRepeatedField(this,2)}
;proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.setAttribsList=function(e){return r.Message.setField(this,2,e||[])}
;proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.addAttribs=function(e,t){return r.Message.addToRepeatedField(this,2,e,t)}
;proto.collab.AcceptCommitMessage.AppliedChangeset.prototype.clearAttribsList=function(){return this.setAttribsList([])};proto.collab.AcceptCommitMessage.prototype.getNewRev=function(){
return r.Message.getFieldWithDefault(this,1,0)};proto.collab.AcceptCommitMessage.prototype.setNewRev=function(e){return r.Message.setProto3IntField(this,1,e)}
;proto.collab.AcceptCommitMessage.prototype.getAppliedChangeset=function(){return r.Message.getWrapperField(this,proto.collab.AcceptCommitMessage.AppliedChangeset,2)}
;proto.collab.AcceptCommitMessage.prototype.setAppliedChangeset=function(e){return r.Message.setWrapperField(this,2,e)};proto.collab.AcceptCommitMessage.prototype.clearAppliedChangeset=function(){
return this.setAppliedChangeset(void 0)};proto.collab.AcceptCommitMessage.prototype.hasAppliedChangeset=function(){return null!=r.Message.getField(this,2)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.ClientReadyAckMessage.prototype.toObject=function(e){return proto.collab.ClientReadyAckMessage.toObject(e,this)};proto.collab.ClientReadyAckMessage.toObject=function(e,t){var o={
clientId:r.Message.getFieldWithDefault(t,1,""),headRev:r.Message.getFieldWithDefault(t,2,0)};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.ClientReadyAckMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.ClientReadyAckMessage;return proto.collab.ClientReadyAckMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.ClientReadyAckMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readString();e.setClientId(o);break
;case 2:o=t.readUint64();e.setHeadRev(o);break;default:t.skipField()}}return e};proto.collab.ClientReadyAckMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.ClientReadyAckMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.ClientReadyAckMessage.serializeBinaryToWriter=function(e,t){var o=void 0
;(o=e.getClientId()).length>0&&t.writeString(1,o);0!==(o=e.getHeadRev())&&t.writeUint64(2,o)};proto.collab.ClientReadyAckMessage.prototype.getClientId=function(){
return r.Message.getFieldWithDefault(this,1,"")};proto.collab.ClientReadyAckMessage.prototype.setClientId=function(e){return r.Message.setProto3StringField(this,1,e)}
;proto.collab.ClientReadyAckMessage.prototype.getHeadRev=function(){return r.Message.getFieldWithDefault(this,2,0)};proto.collab.ClientReadyAckMessage.prototype.setHeadRev=function(e){
return r.Message.setProto3IntField(this,2,e)};if(r.Message.GENERATE_TO_OBJECT){proto.collab.NoCommitPendingMessage.prototype.toObject=function(e){
return proto.collab.NoCommitPendingMessage.toObject(e,this)};proto.collab.NoCommitPendingMessage.toObject=function(e,t){var o={payloadNotUsed:r.Message.getFieldWithDefault(t,1,0)}
;e&&(o.$jspbMessageInstance=t);return o}}proto.collab.NoCommitPendingMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.NoCommitPendingMessage
;return proto.collab.NoCommitPendingMessage.deserializeBinaryFromReader(o,t)};proto.collab.NoCommitPendingMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
if(1===t.getFieldNumber()){var o=t.readInt32();e.setPayloadNotUsed(o)}else t.skipField()}return e};proto.collab.NoCommitPendingMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.NoCommitPendingMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.NoCommitPendingMessage.serializeBinaryToWriter=function(e,t){var o
;0!==(o=e.getPayloadNotUsed())&&t.writeInt32(1,o)};proto.collab.NoCommitPendingMessage.prototype.getPayloadNotUsed=function(){return r.Message.getFieldWithDefault(this,1,0)}
;proto.collab.NoCommitPendingMessage.prototype.setPayloadNotUsed=function(e){return r.Message.setProto3IntField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.DoneSendingInitialNewChangesMessage.prototype.toObject=function(e){return proto.collab.DoneSendingInitialNewChangesMessage.toObject(e,this)}
;proto.collab.DoneSendingInitialNewChangesMessage.toObject=function(e,t){var o={payloadNotUsed:r.Message.getFieldWithDefault(t,1,0)};e&&(o.$jspbMessageInstance=t);return o}}
proto.collab.DoneSendingInitialNewChangesMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.DoneSendingInitialNewChangesMessage
;return proto.collab.DoneSendingInitialNewChangesMessage.deserializeBinaryFromReader(o,t)};proto.collab.DoneSendingInitialNewChangesMessage.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readInt32();e.setPayloadNotUsed(o)}else t.skipField()}return e}
;proto.collab.DoneSendingInitialNewChangesMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.DoneSendingInitialNewChangesMessage.serializeBinaryToWriter(this,e)
;return e.getResultBuffer()};proto.collab.DoneSendingInitialNewChangesMessage.serializeBinaryToWriter=function(e,t){var o;0!==(o=e.getPayloadNotUsed())&&t.writeInt32(1,o)}
;proto.collab.DoneSendingInitialNewChangesMessage.prototype.getPayloadNotUsed=function(){return r.Message.getFieldWithDefault(this,1,0)}
;proto.collab.DoneSendingInitialNewChangesMessage.prototype.setPayloadNotUsed=function(e){return r.Message.setProto3IntField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.SwitchToWriteMessage.prototype.toObject=function(e){return proto.collab.SwitchToWriteMessage.toObject(e,this)};proto.collab.SwitchToWriteMessage.toObject=function(e,t){var o={
payloadNotUsed:r.Message.getFieldWithDefault(t,1,0)};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.SwitchToWriteMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.SwitchToWriteMessage;return proto.collab.SwitchToWriteMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.SwitchToWriteMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readInt32();e.setPayloadNotUsed(o)
}else t.skipField()}return e};proto.collab.SwitchToWriteMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.SwitchToWriteMessage.serializeBinaryToWriter(this,e)
;return e.getResultBuffer()};proto.collab.SwitchToWriteMessage.serializeBinaryToWriter=function(e,t){var o;0!==(o=e.getPayloadNotUsed())&&t.writeInt32(1,o)}
;proto.collab.SwitchToWriteMessage.prototype.getPayloadNotUsed=function(){return r.Message.getFieldWithDefault(this,1,0)};proto.collab.SwitchToWriteMessage.prototype.setPayloadNotUsed=function(e){
return r.Message.setProto3IntField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){proto.collab.ServerDBStatusMessage.prototype.toObject=function(e){
return proto.collab.ServerDBStatusMessage.toObject(e,this)};proto.collab.ServerDBStatusMessage.toObject=function(e,t){var o={status:r.Message.getFieldWithDefault(t,1,"")};e&&(o.$jspbMessageInstance=t)
;return o}}proto.collab.ServerDBStatusMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.ServerDBStatusMessage
;return proto.collab.ServerDBStatusMessage.deserializeBinaryFromReader(o,t)};proto.collab.ServerDBStatusMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
if(1===t.getFieldNumber()){var o=t.readString();e.setStatus(o)}else t.skipField()}return e};proto.collab.ServerDBStatusMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.ServerDBStatusMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.ServerDBStatusMessage.serializeBinaryToWriter=function(e,t){var o
;(o=e.getStatus()).length>0&&t.writeString(1,o)};proto.collab.ServerDBStatusMessage.prototype.getStatus=function(){return r.Message.getFieldWithDefault(this,1,"")}
;proto.collab.ServerDBStatusMessage.prototype.setStatus=function(e){return r.Message.setProto3StringField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.PadUserInfoId.prototype.toObject=function(e){return proto.collab.PadUserInfoId.toObject(e,this)};proto.collab.PadUserInfoId.toObject=function(e,t){var o={
secureUserId:r.Message.getFieldWithDefault(t,1,"")};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.PadUserInfoId.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.PadUserInfoId;return proto.collab.PadUserInfoId.deserializeBinaryFromReader(o,t)};proto.collab.PadUserInfoId.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readString();e.setSecureUserId(o)}else t.skipField()}return e};proto.collab.PadUserInfoId.prototype.serializeBinary=function(){
var e=new r.BinaryWriter;proto.collab.PadUserInfoId.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.PadUserInfoId.serializeBinaryToWriter=function(e,t){var o
;(o=e.getSecureUserId()).length>0&&t.writeString(1,o)};proto.collab.PadUserInfoId.prototype.getSecureUserId=function(){return r.Message.getFieldWithDefault(this,1,"")}
;proto.collab.PadUserInfoId.prototype.setSecureUserId=function(e){return r.Message.setProto3StringField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.UserKillMessage.prototype.toObject=function(e){return proto.collab.UserKillMessage.toObject(e,this)};proto.collab.UserKillMessage.toObject=function(e,t){var o,r={
userInfo:(o=t.getUserInfo())&&proto.collab.PadUserInfoId.toObject(e,o)};e&&(r.$jspbMessageInstance=t);return r}}proto.collab.UserKillMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.UserKillMessage;return proto.collab.UserKillMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.UserKillMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=new proto.collab.PadUserInfoId
;t.readMessage(o,proto.collab.PadUserInfoId.deserializeBinaryFromReader);e.setUserInfo(o)}else t.skipField()}return e};proto.collab.UserKillMessage.prototype.serializeBinary=function(){
var e=new r.BinaryWriter;proto.collab.UserKillMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.UserKillMessage.serializeBinaryToWriter=function(e,t){var o
;null!=(o=e.getUserInfo())&&t.writeMessage(1,o,proto.collab.PadUserInfoId.serializeBinaryToWriter)};proto.collab.UserKillMessage.prototype.getUserInfo=function(){
return r.Message.getWrapperField(this,proto.collab.PadUserInfoId,1)};proto.collab.UserKillMessage.prototype.setUserInfo=function(e){return r.Message.setWrapperField(this,1,e)}
;proto.collab.UserKillMessage.prototype.clearUserInfo=function(){return this.setUserInfo(void 0)};proto.collab.UserKillMessage.prototype.hasUserInfo=function(){return null!=r.Message.getField(this,1)}
;if(r.Message.GENERATE_TO_OBJECT){proto.collab.ModerationMessage.prototype.toObject=function(e){return proto.collab.ModerationMessage.toObject(e,this)}
;proto.collab.ModerationMessage.toObject=function(e,t){var o={payload:r.Message.getFieldWithDefault(t,1,"")};e&&(o.$jspbMessageInstance=t);return o}}
proto.collab.ModerationMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.ModerationMessage;return proto.collab.ModerationMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.ModerationMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readString();e.setPayload(o)}else t.skipField()}
return e};proto.collab.ModerationMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.ModerationMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.ModerationMessage.serializeBinaryToWriter=function(e,t){var o;(o=e.getPayload()).length>0&&t.writeString(1,o)};proto.collab.ModerationMessage.prototype.getPayload=function(){
return r.Message.getFieldWithDefault(this,1,"")};proto.collab.ModerationMessage.prototype.setPayload=function(e){return r.Message.setProto3StringField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.ObjectRequestFailedMessage.prototype.toObject=function(e){return proto.collab.ObjectRequestFailedMessage.toObject(e,this)};proto.collab.ObjectRequestFailedMessage.toObject=function(e,t){
var o={operationId:r.Message.getFieldWithDefault(t,1,"")};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.ObjectRequestFailedMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.ObjectRequestFailedMessage;return proto.collab.ObjectRequestFailedMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.ObjectRequestFailedMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readString();e.setOperationId(o)
}else t.skipField()}return e};proto.collab.ObjectRequestFailedMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.ObjectRequestFailedMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.ObjectRequestFailedMessage.serializeBinaryToWriter=function(e,t){var o
;(o=e.getOperationId()).length>0&&t.writeString(1,o)};proto.collab.ObjectRequestFailedMessage.prototype.getOperationId=function(){return r.Message.getFieldWithDefault(this,1,"")}
;proto.collab.ObjectRequestFailedMessage.prototype.setOperationId=function(e){return r.Message.setProto3StringField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.PlannedRestartMessage.prototype.toObject=function(e){return proto.collab.PlannedRestartMessage.toObject(e,this)};proto.collab.PlannedRestartMessage.toObject=function(e,t){var o={
payloadNotUsed:r.Message.getFieldWithDefault(t,1,0)};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.PlannedRestartMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.PlannedRestartMessage;return proto.collab.PlannedRestartMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.PlannedRestartMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readInt32();e.setPayloadNotUsed(o)
}else t.skipField()}return e};proto.collab.PlannedRestartMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.PlannedRestartMessage.serializeBinaryToWriter(this,e)
;return e.getResultBuffer()};proto.collab.PlannedRestartMessage.serializeBinaryToWriter=function(e,t){var o;0!==(o=e.getPayloadNotUsed())&&t.writeInt32(1,o)}
;proto.collab.PlannedRestartMessage.prototype.getPayloadNotUsed=function(){return r.Message.getFieldWithDefault(this,1,0)};proto.collab.PlannedRestartMessage.prototype.setPayloadNotUsed=function(e){
return r.Message.setProto3IntField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){proto.collab.FilesystemNewInfoMessage.prototype.toObject=function(e){
return proto.collab.FilesystemNewInfoMessage.toObject(e,this)};proto.collab.FilesystemNewInfoMessage.toObject=function(e,t){var o={payloadNotUsed:r.Message.getFieldWithDefault(t,1,0)}
;e&&(o.$jspbMessageInstance=t);return o}}proto.collab.FilesystemNewInfoMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.FilesystemNewInfoMessage
;return proto.collab.FilesystemNewInfoMessage.deserializeBinaryFromReader(o,t)};proto.collab.FilesystemNewInfoMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
if(1===t.getFieldNumber()){var o=t.readInt32();e.setPayloadNotUsed(o)}else t.skipField()}return e};proto.collab.FilesystemNewInfoMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.FilesystemNewInfoMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.FilesystemNewInfoMessage.serializeBinaryToWriter=function(e,t){var o
;0!==(o=e.getPayloadNotUsed())&&t.writeInt32(1,o)};proto.collab.FilesystemNewInfoMessage.prototype.getPayloadNotUsed=function(){return r.Message.getFieldWithDefault(this,1,0)}
;proto.collab.FilesystemNewInfoMessage.prototype.setPayloadNotUsed=function(e){return r.Message.setProto3IntField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.PadTitleMessage.prototype.toObject=function(e){return proto.collab.PadTitleMessage.toObject(e,this)};proto.collab.PadTitleMessage.toObject=function(e,t){var o={
title:r.Message.getFieldWithDefault(t,1,"")};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.PadTitleMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.PadTitleMessage;return proto.collab.PadTitleMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.PadTitleMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readString();e.setTitle(o)}else t.skipField()}return e}
;proto.collab.PadTitleMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.PadTitleMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.PadTitleMessage.serializeBinaryToWriter=function(e,t){var o;(o=e.getTitle()).length>0&&t.writeString(1,o)};proto.collab.PadTitleMessage.prototype.getTitle=function(){
return r.Message.getFieldWithDefault(this,1,"")};proto.collab.PadTitleMessage.prototype.setTitle=function(e){return r.Message.setProto3StringField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.LoneCaretBroadcastMessage.prototype.toObject=function(e){return proto.collab.LoneCaretBroadcastMessage.toObject(e,this)};proto.collab.LoneCaretBroadcastMessage.toObject=function(e,t){
var o,s={caret:(o=t.getCaret())&&a.CaretPosition.toObject(e,o),baseRev:r.Message.getFieldWithDefault(t,2,0),secureChangedBy:r.Message.getFieldWithDefault(t,3,"")};e&&(s.$jspbMessageInstance=t)
;return s}}proto.collab.LoneCaretBroadcastMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.LoneCaretBroadcastMessage
;return proto.collab.LoneCaretBroadcastMessage.deserializeBinaryFromReader(o,t)};proto.collab.LoneCaretBroadcastMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
switch(t.getFieldNumber()){case 1:var o=new a.CaretPosition;t.readMessage(o,a.CaretPosition.deserializeBinaryFromReader);e.setCaret(o);break;case 2:o=t.readUint64();e.setBaseRev(o);break;case 3:
o=t.readString();e.setSecureChangedBy(o);break;default:t.skipField()}}return e};proto.collab.LoneCaretBroadcastMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.LoneCaretBroadcastMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.LoneCaretBroadcastMessage.serializeBinaryToWriter=function(e,t){var o=void 0
;null!=(o=e.getCaret())&&t.writeMessage(1,o,a.CaretPosition.serializeBinaryToWriter);0!==(o=e.getBaseRev())&&t.writeUint64(2,o);(o=e.getSecureChangedBy()).length>0&&t.writeString(3,o)}
;proto.collab.LoneCaretBroadcastMessage.prototype.getCaret=function(){return r.Message.getWrapperField(this,a.CaretPosition,1)};proto.collab.LoneCaretBroadcastMessage.prototype.setCaret=function(e){
return r.Message.setWrapperField(this,1,e)};proto.collab.LoneCaretBroadcastMessage.prototype.clearCaret=function(){return this.setCaret(void 0)}
;proto.collab.LoneCaretBroadcastMessage.prototype.hasCaret=function(){return null!=r.Message.getField(this,1)};proto.collab.LoneCaretBroadcastMessage.prototype.getBaseRev=function(){
return r.Message.getFieldWithDefault(this,2,0)};proto.collab.LoneCaretBroadcastMessage.prototype.setBaseRev=function(e){return r.Message.setProto3IntField(this,2,e)}
;proto.collab.LoneCaretBroadcastMessage.prototype.getSecureChangedBy=function(){return r.Message.getFieldWithDefault(this,3,"")}
;proto.collab.LoneCaretBroadcastMessage.prototype.setSecureChangedBy=function(e){return r.Message.setProto3StringField(this,3,e)}
;proto.collab.ServerCollabMessage.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14]];proto.collab.ServerCollabMessage.MessageCase={MESSAGE_NOT_SET:0,CHANGES_MESSAGE:1,ACCEPT_COMMIT_MESSAGE:2,
CLIENT_READY_ACK_MESSAGE:3,NO_COMMIT_PENDING_MESSAGE:4,DONE_SENDING_INITIAL_NEW_CHANGES_MESSAGE:5,SWITCH_TO_WRITE_MESSAGE:6,SERVER_DB_STATUS_MESSAGE:7,USER_KILL_MESSAGE:8,MODERATION_MESSAGE:9,
OBJECT_REQUEST_FAILED_MESSAGE:10,PLANNED_RESTART_MESSAGE:11,FILESYSTEM_NEWINFO_MESSAGE:12,PAD_TITLE_MESSAGE:13,LONE_CARET_BROADCAST_MESSAGE:14}
;proto.collab.ServerCollabMessage.prototype.getMessageCase=function(){return r.Message.computeOneofCase(this,proto.collab.ServerCollabMessage.oneofGroups_[0])};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.ServerCollabMessage.prototype.toObject=function(e){return proto.collab.ServerCollabMessage.toObject(e,this)};proto.collab.ServerCollabMessage.toObject=function(e,t){var o,r={
changesMessage:(o=t.getChangesMessage())&&proto.collab.ChangesMessage.toObject(e,o),acceptCommitMessage:(o=t.getAcceptCommitMessage())&&proto.collab.AcceptCommitMessage.toObject(e,o),
clientReadyAckMessage:(o=t.getClientReadyAckMessage())&&proto.collab.ClientReadyAckMessage.toObject(e,o),
noCommitPendingMessage:(o=t.getNoCommitPendingMessage())&&proto.collab.NoCommitPendingMessage.toObject(e,o),
doneSendingInitialNewChangesMessage:(o=t.getDoneSendingInitialNewChangesMessage())&&proto.collab.DoneSendingInitialNewChangesMessage.toObject(e,o),
switchToWriteMessage:(o=t.getSwitchToWriteMessage())&&proto.collab.SwitchToWriteMessage.toObject(e,o),
serverDbStatusMessage:(o=t.getServerDbStatusMessage())&&proto.collab.ServerDBStatusMessage.toObject(e,o),userKillMessage:(o=t.getUserKillMessage())&&proto.collab.UserKillMessage.toObject(e,o),
moderationMessage:(o=t.getModerationMessage())&&proto.collab.ModerationMessage.toObject(e,o),
objectRequestFailedMessage:(o=t.getObjectRequestFailedMessage())&&proto.collab.ObjectRequestFailedMessage.toObject(e,o),
plannedRestartMessage:(o=t.getPlannedRestartMessage())&&proto.collab.PlannedRestartMessage.toObject(e,o),
filesystemNewinfoMessage:(o=t.getFilesystemNewinfoMessage())&&proto.collab.FilesystemNewInfoMessage.toObject(e,o),
padTitleMessage:(o=t.getPadTitleMessage())&&proto.collab.PadTitleMessage.toObject(e,o),
loneCaretBroadcastMessage:(o=t.getLoneCaretBroadcastMessage())&&proto.collab.LoneCaretBroadcastMessage.toObject(e,o)};e&&(r.$jspbMessageInstance=t);return r}}
proto.collab.ServerCollabMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.ServerCollabMessage
;return proto.collab.ServerCollabMessage.deserializeBinaryFromReader(o,t)};proto.collab.ServerCollabMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
switch(t.getFieldNumber()){case 1:var o=new proto.collab.ChangesMessage;t.readMessage(o,proto.collab.ChangesMessage.deserializeBinaryFromReader);e.setChangesMessage(o);break;case 2:
o=new proto.collab.AcceptCommitMessage;t.readMessage(o,proto.collab.AcceptCommitMessage.deserializeBinaryFromReader);e.setAcceptCommitMessage(o);break;case 3:o=new proto.collab.ClientReadyAckMessage
;t.readMessage(o,proto.collab.ClientReadyAckMessage.deserializeBinaryFromReader);e.setClientReadyAckMessage(o);break;case 4:o=new proto.collab.NoCommitPendingMessage
;t.readMessage(o,proto.collab.NoCommitPendingMessage.deserializeBinaryFromReader);e.setNoCommitPendingMessage(o);break;case 5:o=new proto.collab.DoneSendingInitialNewChangesMessage
;t.readMessage(o,proto.collab.DoneSendingInitialNewChangesMessage.deserializeBinaryFromReader);e.setDoneSendingInitialNewChangesMessage(o);break;case 6:o=new proto.collab.SwitchToWriteMessage
;t.readMessage(o,proto.collab.SwitchToWriteMessage.deserializeBinaryFromReader);e.setSwitchToWriteMessage(o);break;case 7:o=new proto.collab.ServerDBStatusMessage
;t.readMessage(o,proto.collab.ServerDBStatusMessage.deserializeBinaryFromReader);e.setServerDbStatusMessage(o);break;case 8:o=new proto.collab.UserKillMessage
;t.readMessage(o,proto.collab.UserKillMessage.deserializeBinaryFromReader);e.setUserKillMessage(o);break;case 9:o=new proto.collab.ModerationMessage
;t.readMessage(o,proto.collab.ModerationMessage.deserializeBinaryFromReader);e.setModerationMessage(o);break;case 10:o=new proto.collab.ObjectRequestFailedMessage
;t.readMessage(o,proto.collab.ObjectRequestFailedMessage.deserializeBinaryFromReader);e.setObjectRequestFailedMessage(o);break;case 11:o=new proto.collab.PlannedRestartMessage
;t.readMessage(o,proto.collab.PlannedRestartMessage.deserializeBinaryFromReader);e.setPlannedRestartMessage(o);break;case 12:o=new proto.collab.FilesystemNewInfoMessage
;t.readMessage(o,proto.collab.FilesystemNewInfoMessage.deserializeBinaryFromReader);e.setFilesystemNewinfoMessage(o);break;case 13:o=new proto.collab.PadTitleMessage
;t.readMessage(o,proto.collab.PadTitleMessage.deserializeBinaryFromReader);e.setPadTitleMessage(o);break;case 14:o=new proto.collab.LoneCaretBroadcastMessage
;t.readMessage(o,proto.collab.LoneCaretBroadcastMessage.deserializeBinaryFromReader);e.setLoneCaretBroadcastMessage(o);break;default:t.skipField()}}return e}
;proto.collab.ServerCollabMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.ServerCollabMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.ServerCollabMessage.serializeBinaryToWriter=function(e,t){var o=void 0;null!=(o=e.getChangesMessage())&&t.writeMessage(1,o,proto.collab.ChangesMessage.serializeBinaryToWriter)
;null!=(o=e.getAcceptCommitMessage())&&t.writeMessage(2,o,proto.collab.AcceptCommitMessage.serializeBinaryToWriter)
;null!=(o=e.getClientReadyAckMessage())&&t.writeMessage(3,o,proto.collab.ClientReadyAckMessage.serializeBinaryToWriter)
;null!=(o=e.getNoCommitPendingMessage())&&t.writeMessage(4,o,proto.collab.NoCommitPendingMessage.serializeBinaryToWriter)
;null!=(o=e.getDoneSendingInitialNewChangesMessage())&&t.writeMessage(5,o,proto.collab.DoneSendingInitialNewChangesMessage.serializeBinaryToWriter)
;null!=(o=e.getSwitchToWriteMessage())&&t.writeMessage(6,o,proto.collab.SwitchToWriteMessage.serializeBinaryToWriter)
;null!=(o=e.getServerDbStatusMessage())&&t.writeMessage(7,o,proto.collab.ServerDBStatusMessage.serializeBinaryToWriter)
;null!=(o=e.getUserKillMessage())&&t.writeMessage(8,o,proto.collab.UserKillMessage.serializeBinaryToWriter)
;null!=(o=e.getModerationMessage())&&t.writeMessage(9,o,proto.collab.ModerationMessage.serializeBinaryToWriter)
;null!=(o=e.getObjectRequestFailedMessage())&&t.writeMessage(10,o,proto.collab.ObjectRequestFailedMessage.serializeBinaryToWriter)
;null!=(o=e.getPlannedRestartMessage())&&t.writeMessage(11,o,proto.collab.PlannedRestartMessage.serializeBinaryToWriter)
;null!=(o=e.getFilesystemNewinfoMessage())&&t.writeMessage(12,o,proto.collab.FilesystemNewInfoMessage.serializeBinaryToWriter)
;null!=(o=e.getPadTitleMessage())&&t.writeMessage(13,o,proto.collab.PadTitleMessage.serializeBinaryToWriter)
;null!=(o=e.getLoneCaretBroadcastMessage())&&t.writeMessage(14,o,proto.collab.LoneCaretBroadcastMessage.serializeBinaryToWriter)}
;proto.collab.ServerCollabMessage.prototype.getChangesMessage=function(){return r.Message.getWrapperField(this,proto.collab.ChangesMessage,1)}
;proto.collab.ServerCollabMessage.prototype.setChangesMessage=function(e){return r.Message.setOneofWrapperField(this,1,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearChangesMessage=function(){return this.setChangesMessage(void 0)};proto.collab.ServerCollabMessage.prototype.hasChangesMessage=function(){
return null!=r.Message.getField(this,1)};proto.collab.ServerCollabMessage.prototype.getAcceptCommitMessage=function(){return r.Message.getWrapperField(this,proto.collab.AcceptCommitMessage,2)}
;proto.collab.ServerCollabMessage.prototype.setAcceptCommitMessage=function(e){return r.Message.setOneofWrapperField(this,2,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearAcceptCommitMessage=function(){return this.setAcceptCommitMessage(void 0)}
;proto.collab.ServerCollabMessage.prototype.hasAcceptCommitMessage=function(){return null!=r.Message.getField(this,2)};proto.collab.ServerCollabMessage.prototype.getClientReadyAckMessage=function(){
return r.Message.getWrapperField(this,proto.collab.ClientReadyAckMessage,3)};proto.collab.ServerCollabMessage.prototype.setClientReadyAckMessage=function(e){
return r.Message.setOneofWrapperField(this,3,proto.collab.ServerCollabMessage.oneofGroups_[0],e)};proto.collab.ServerCollabMessage.prototype.clearClientReadyAckMessage=function(){
return this.setClientReadyAckMessage(void 0)};proto.collab.ServerCollabMessage.prototype.hasClientReadyAckMessage=function(){return null!=r.Message.getField(this,3)}
;proto.collab.ServerCollabMessage.prototype.getNoCommitPendingMessage=function(){return r.Message.getWrapperField(this,proto.collab.NoCommitPendingMessage,4)}
;proto.collab.ServerCollabMessage.prototype.setNoCommitPendingMessage=function(e){return r.Message.setOneofWrapperField(this,4,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearNoCommitPendingMessage=function(){return this.setNoCommitPendingMessage(void 0)}
;proto.collab.ServerCollabMessage.prototype.hasNoCommitPendingMessage=function(){return null!=r.Message.getField(this,4)}
;proto.collab.ServerCollabMessage.prototype.getDoneSendingInitialNewChangesMessage=function(){return r.Message.getWrapperField(this,proto.collab.DoneSendingInitialNewChangesMessage,5)}
;proto.collab.ServerCollabMessage.prototype.setDoneSendingInitialNewChangesMessage=function(e){return r.Message.setOneofWrapperField(this,5,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearDoneSendingInitialNewChangesMessage=function(){return this.setDoneSendingInitialNewChangesMessage(void 0)}
;proto.collab.ServerCollabMessage.prototype.hasDoneSendingInitialNewChangesMessage=function(){return null!=r.Message.getField(this,5)}
;proto.collab.ServerCollabMessage.prototype.getSwitchToWriteMessage=function(){return r.Message.getWrapperField(this,proto.collab.SwitchToWriteMessage,6)}
;proto.collab.ServerCollabMessage.prototype.setSwitchToWriteMessage=function(e){return r.Message.setOneofWrapperField(this,6,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearSwitchToWriteMessage=function(){return this.setSwitchToWriteMessage(void 0)}
;proto.collab.ServerCollabMessage.prototype.hasSwitchToWriteMessage=function(){return null!=r.Message.getField(this,6)};proto.collab.ServerCollabMessage.prototype.getServerDbStatusMessage=function(){
return r.Message.getWrapperField(this,proto.collab.ServerDBStatusMessage,7)};proto.collab.ServerCollabMessage.prototype.setServerDbStatusMessage=function(e){
return r.Message.setOneofWrapperField(this,7,proto.collab.ServerCollabMessage.oneofGroups_[0],e)};proto.collab.ServerCollabMessage.prototype.clearServerDbStatusMessage=function(){
return this.setServerDbStatusMessage(void 0)};proto.collab.ServerCollabMessage.prototype.hasServerDbStatusMessage=function(){return null!=r.Message.getField(this,7)}
;proto.collab.ServerCollabMessage.prototype.getUserKillMessage=function(){return r.Message.getWrapperField(this,proto.collab.UserKillMessage,8)}
;proto.collab.ServerCollabMessage.prototype.setUserKillMessage=function(e){return r.Message.setOneofWrapperField(this,8,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearUserKillMessage=function(){return this.setUserKillMessage(void 0)};proto.collab.ServerCollabMessage.prototype.hasUserKillMessage=function(){
return null!=r.Message.getField(this,8)};proto.collab.ServerCollabMessage.prototype.getModerationMessage=function(){return r.Message.getWrapperField(this,proto.collab.ModerationMessage,9)}
;proto.collab.ServerCollabMessage.prototype.setModerationMessage=function(e){return r.Message.setOneofWrapperField(this,9,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearModerationMessage=function(){return this.setModerationMessage(void 0)};proto.collab.ServerCollabMessage.prototype.hasModerationMessage=function(){
return null!=r.Message.getField(this,9)};proto.collab.ServerCollabMessage.prototype.getObjectRequestFailedMessage=function(){
return r.Message.getWrapperField(this,proto.collab.ObjectRequestFailedMessage,10)};proto.collab.ServerCollabMessage.prototype.setObjectRequestFailedMessage=function(e){
return r.Message.setOneofWrapperField(this,10,proto.collab.ServerCollabMessage.oneofGroups_[0],e)};proto.collab.ServerCollabMessage.prototype.clearObjectRequestFailedMessage=function(){
return this.setObjectRequestFailedMessage(void 0)};proto.collab.ServerCollabMessage.prototype.hasObjectRequestFailedMessage=function(){return null!=r.Message.getField(this,10)}
;proto.collab.ServerCollabMessage.prototype.getPlannedRestartMessage=function(){return r.Message.getWrapperField(this,proto.collab.PlannedRestartMessage,11)}
;proto.collab.ServerCollabMessage.prototype.setPlannedRestartMessage=function(e){return r.Message.setOneofWrapperField(this,11,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearPlannedRestartMessage=function(){return this.setPlannedRestartMessage(void 0)}
;proto.collab.ServerCollabMessage.prototype.hasPlannedRestartMessage=function(){return null!=r.Message.getField(this,11)}
;proto.collab.ServerCollabMessage.prototype.getFilesystemNewinfoMessage=function(){return r.Message.getWrapperField(this,proto.collab.FilesystemNewInfoMessage,12)}
;proto.collab.ServerCollabMessage.prototype.setFilesystemNewinfoMessage=function(e){return r.Message.setOneofWrapperField(this,12,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearFilesystemNewinfoMessage=function(){return this.setFilesystemNewinfoMessage(void 0)}
;proto.collab.ServerCollabMessage.prototype.hasFilesystemNewinfoMessage=function(){return null!=r.Message.getField(this,12)};proto.collab.ServerCollabMessage.prototype.getPadTitleMessage=function(){
return r.Message.getWrapperField(this,proto.collab.PadTitleMessage,13)};proto.collab.ServerCollabMessage.prototype.setPadTitleMessage=function(e){
return r.Message.setOneofWrapperField(this,13,proto.collab.ServerCollabMessage.oneofGroups_[0],e)};proto.collab.ServerCollabMessage.prototype.clearPadTitleMessage=function(){
return this.setPadTitleMessage(void 0)};proto.collab.ServerCollabMessage.prototype.hasPadTitleMessage=function(){return null!=r.Message.getField(this,13)}
;proto.collab.ServerCollabMessage.prototype.getLoneCaretBroadcastMessage=function(){return r.Message.getWrapperField(this,proto.collab.LoneCaretBroadcastMessage,14)}
;proto.collab.ServerCollabMessage.prototype.setLoneCaretBroadcastMessage=function(e){return r.Message.setOneofWrapperField(this,14,proto.collab.ServerCollabMessage.oneofGroups_[0],e)}
;proto.collab.ServerCollabMessage.prototype.clearLoneCaretBroadcastMessage=function(){return this.setLoneCaretBroadcastMessage(void 0)}
;proto.collab.ServerCollabMessage.prototype.hasLoneCaretBroadcastMessage=function(){return null!=r.Message.getField(this,14)};s.object.extend(t,proto.collab)},1631:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(628),n=o(474),a=o(476),i=o(41),l=o(475),c=function(e){r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.name="shortpolling";t.weight=0;t.connectLite=!1;t.keepRetryingConnection=!0;return t}t.prototype.connect=function(e){var t=e.connectLite;this.connectLite=t;this.attemptConnect();(0,
l.timeout)(this.timeouts,"initialConnect",15*i.Time.SECOND,this.cancelConnect.bind(this))};t.prototype.dataHandlerImpl=function(e,t,o){if(o.readyState===XMLHttpRequest.DONE){
this.timeouts.poll&&this.timeouts.poll();if(this.isConnected){429==e?this.isocket.handleStatusRateLimited():200!==e?this.isocket.hiccup(this):this.handleMessages(t,0)
;setTimeout(this.doPoll.bind(this),500);this.clearRequest()}else{this.timeouts.connectAttempt();if(200!==e){if(this.connectLite){this.disconnect();return}
this.log("".concat(this.name," connect failed: ").concat(e," / ").concat(t));setTimeout(this.attemptConnect.bind(this),500);return}this.connectLite=!1;var r=t?(0,n.readMessage)(t):null
;if(r&&r.message===n.ControlMessage.Ok){this.timeouts.initialConnect();this.isConnected=!0;this.log("".concat(this.name," transport connected!"));if(!this.notifyConnect())return;this.doPoll()
}else if(r&&r.message===n.ControlMessage.PlannedRestart)this.isocket.handlePlannedRestartMessageFromNginx();else{this.log("".concat(this.name," connect didn't get ok: ").concat(e," / ").concat(t))
;setTimeout(this.attemptConnect.bind(this),500)}}}};t.prototype.attemptConnect=function(){if(this.keepRetryingConnection){this.log("".concat(this.name," attempting connect"));this.clearRequest();(0,
l.timeout)(this.timeouts,"connectAttempt",5*i.Time.SECOND,this.attemptConnect.bind(this));this.request=this.xhrManager.request(a.HTTPMethod.Get,this.buildChannelPath({withCreate:!0,withNew:!0
}),!0,null,this.dataHandler.bind(this))}};t.prototype.cancelConnect=function(){this.clearRequest();this.keepRetryingConnection=!1};t.prototype.cancelPoll=function(){this.log("poll timed out.")
;this.clearRequest();this.isocket.hiccup(this)};t.prototype.doPoll=function(){if(!this.isClosed){(0,l.timeout)(this.timeouts,"poll",5e3,this.cancelPoll.bind(this))
;this.request=this.xhrManager.request(a.HTTPMethod.Get,this.buildChannelPath(),!0,null,this.dataHandler.bind(this))}};Object.defineProperty(t.prototype,"allowRandomSubdomain",{get:function(){return!1
},enumerable:!1,configurable:!0});return t}(s.Channel);t.default=c},1632:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.base=[];this.head=0
;this.tail=0}Object.defineProperty(e.prototype,"length",{get:function(){return this.tail-this.head},enumerable:!1,configurable:!0});e.prototype.clear=function(){this.head=0;this.tail=0;var e=this.base
;this.base=[];return e};e.prototype.offer=function(e){this.base[this.tail++]=e};return e}();t.default=o},1633:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.KEEPALIVE_TIMEOUT=void 0;var r=o(1),s=o(628),n=o(474),a=o(476),i=o(41),l=o(475);t.KEEPALIVE_TIMEOUT=60*i.Time.SECOND;var c=function(e){r.__extends(o,e);function o(){
var t=null!==e&&e.apply(this,arguments)||this;t.name="streaming";t.weight=2;t.cursor=0;return t}o.prototype.connect=function(){(0,
l.timeout)(this.timeouts,"initialConnect",15*i.Time.SECOND,this.cancelConnect.bind(this));var e=this.buildChannelPath({withCreate:!0,withNew:!0});this.log("stream to: ".concat(e))
;this.request=this.xhrManager.request(a.HTTPMethod.Get,e,!0,null,this.dataHandler.bind(this),!0);this.log("stream connection sent!")};o.prototype.clearRequest=function(){
e.prototype.clearRequest.call(this);this.timeouts.data&&this.timeouts.data()};o.prototype.dataHandlerImpl=function(e,o,r){var s=this
;if(!this.isClosed&&r.readyState!==XMLHttpRequest.UNSENT&&r.readyState!==XMLHttpRequest.OPENED){try{if(429==e){this.isocket.handleStatusRateLimited();return}if(200!=e){this.disconnect()
;if(this.isConnected){this.log("stream connection received error status");this.isocket.hiccup(this)}return}if(!o){if(r.readyState===XMLHttpRequest.DONE){this.disconnect();if(this.isConnected){
this.log("stream connection unexpectedly closed");this.isocket.hiccup(this)}}return}}catch(e){this.log("Error handling end of request: ".concat(e));return}
if(this.isConnected)this.cursor=this.handleMessages(o,this.cursor);else{var a=(0,n.readMessage)(o,this.cursor);if(!a)return;this.cursor=a.lastConsumedChar;if(a.message!==n.ControlMessage.Ok){
if(a.message===n.ControlMessage.PlannedRestart){this.isocket.handlePlannedRestartMessageFromNginx();return}this.log("stream: incorrect channel connect message: ".concat(a.message));this.disconnect()
;return}this.connectOk()}if(r&&r.readyState!==XMLHttpRequest.DONE)(0,l.timeout)(this.timeouts,"data",t.KEEPALIVE_TIMEOUT,(function(){s.isocket.hiccup(s)}));else{this.clearRequest()
;if(this.isConnected){this.log("stream connection unexpectedly closed.");this.isocket.hiccup(this)}}}};Object.defineProperty(o.prototype,"allowRandomSubdomain",{get:function(){return!0},enumerable:!1,
configurable:!0});o.prototype.getExtraDescribePairs=function(){return e.prototype.getExtraDescribePairs.call(this).concat([["cursor",this.cursor.toString()]])};o.prototype.cancelConnect=function(){
this.log("stream: failed to connect.");this.isClosed=!0;this.clearRequest()};o.prototype.connectOk=function(){this.isConnected=!0;this.timeouts.initialConnect();this.notifyConnect()};return o
}(s.Channel);t.default=c},1634:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(8),n=o(59),a=o(14),i=o(12),l=o(2),c=(0,
a.MsgFactory)("cloud_docs"),g=c.defineMessages,d=c.IntlMessageFormat,u=g({unableToLoadFolder:{msg:"Unable to load folder information"}}),p=((0,l.defineMessages)({unableToLoadFolder:{id:"Qli0DD",
defaultMessage:"Unable to load folder information"}}),function(e){r.__extends(t,e);function t(t,o){void 0===o&&(o=i);var r=e.call(this)||this;r.filesystemInfo=null;r.padController=t;r.fetchClient=o
;return r}t.prototype.setFilesystemInfo=function(e,t){this.filesystemInfo=e;t(this.filesystemInfo);this.onChange()};t.prototype.loadFilesystemInfo=function(){this.getFilesystemInfo(!0)}
;t.prototype.onChange=function(){this.trigger("change",void 0)};t.prototype.getFilesystemInfoSync=function(){return this.filesystemInfo};t.prototype.getFilesystemInfo=function(e){var t=this
;void 0===e&&(e=!1);return new Promise((function(o){e||!t.filesystemInfo?t.fetchClient.get({url:"/cloud-docs/get-filesystem-info",analyticsTag:"get-filesystem-info",data:{
localPadId:t.padController.getPadId()},shardingKey:t.fetchClient.getShardingKeyForPad(t.padController.getPadId()),errorHandler:function(e,r){if(t.fetchClient.isOfflineResponse(r))return!0
;t.setFilesystemInfo({path:null,errorMessage:new d(u.unableToLoadFolder,s.default.userLocale).format(),canUserPerformFilesystemEditOperations:!1},o);return!0},successHandler:function(e){
e&&t.setFilesystemInfo(e.filesystemInfo,o)}}):o(t.filesystemInfo)}))};return t}(n.EventEmittingClass));t.default=p},1635:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;var r=o(1),s=o(164),n=o(59),a=o(14),i=o(612),l=o(621),c=o(90),g=o(12),d=o(4),u=o(0),p=o(2),h=(0,a.MsgFactory)("data"),f=h.F,b=(0,h.defineMessages)({unabletochangefolder:{
msg:"Unable to change folder.",description:"Message displayed when the user tries to change the folder that a document is in but fails."},unabletoremovedocfromfolder:{
msg:"Unable to remove doc from folder."}}),m=((0,p.defineMessages)({unabletochangefolder:{id:"9NGWPu",defaultMessage:"Unable to change folder."},unabletoremovedocfromfolder:{id:"KsuptO",
defaultMessage:"Unable to remove doc from folder."}}),function(e){r.__extends(t,e);function t(t,o){var r=e.call(this)||this;r.padListStore=o;r.showMoveConfirmation=function(e,t){var o=0,s=0
;r.padController_.isPadTemplate()?o=1:s=1;i.default.show(e,(function(){r.changeFolder(e,{isConfirmed:!0,onSuccess:t})}),(function(){}),s,0,o)};r.onChangeFolderResponse=function(e){var t=e.data
;r.setFolder(t);r.padController_.isPadTemplate()&&d.IntentionEvent.TemplateAddedToFolder.track();e.autoFollowed&&l.showSnackbar(t.folder.encryptedId,t.subscriptionLevel)}
;r.onClearFolderResponse=function(){r.setFolder(null)};r.padController_=t;r.folderData_=null;s.folderShareSuggestionsDataSource.loadSuggestions();return r}t.prototype.setFolder=function(e){
this.folderData_=e;var t=this.padController_.getPadId();t&&this.padListStore.updatePad(t,{folderData:e});this.onChange_()};t.prototype.changeFolder=function(e,t){var o=this;g.post({
url:"/folder/set-pad-folder",data:{padId:this.padController_.getPadId(),folderId:e.folder.encryptedId,confirmed:t.isConfirmed},analyticsTag:"set-pad-folder",
shardingKey:g.getShardingKeyForPad(this.padController_.getPadId()),successHandler:function(e){if(e.success){o.onChangeFolderResponse(e);t.onSuccess&&t.onSuccess(e.data)}},errorHandler:function(s,n,a){
if(200==a){var i=JSON.safeParse(s);if(i&&i.needsConfirmation){o.showMoveConfirmation(e,t.onSuccess);return!0}}var l=u.createElement(f,r.__assign({},b.unabletochangefolder));c.errorModal({title:l})
;t.onError&&t.onError()}})};t.prototype.clearFolder=function(e){var t=this;this.folderData_&&g.post({url:"/folder/remove-pad-folder",data:{padId:this.padController_.getPadId(),
folderId:this.folderData_.folder.encryptedId},analyticsTag:"remove-pad-folder",shardingKey:g.getShardingKeyForPad(this.padController_.padId),successHandler:function(o){e&&e();t.onClearFolderResponse()
},errorModalMessage:u.createElement(f,r.__assign({},b.unabletoremovedocfromfolder))})};t.prototype.onChange_=function(){this.trigger("change",void 0)};t.prototype.getFolderData=function(){
return this.folderData_};t.prototype.hasFolder=function(){return!!this.folderData_};return t}(n.EventEmittingClass));t.default=m},1636:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;var r=o(1),s=o(59),n=o(352),a=o(297),i=function(e){r.__extends(t,e);function t(t){var o=e.call(this)||this;o.token=null;o.handleGetLinkTrackingToken=function(e){if(e){o.token=e.token
;o.trigger("link-tracking-addr-bar-token-changed",void 0)}else o.token=null};o.updateToken(t);return o}t.prototype.updateToken=function(e){
e?n.getLinkTrackingToken(e,a.TrafficSources.PaperAddressBar,this.handleGetLinkTrackingToken):this.token=null};t.prototype.updateLinkTrackingToken=function(e){this.updateToken(e)}
;t.prototype.getLinkTrackingToken=function(){return this.token};return t}(s.EventEmittingClass);t.default=i},1637:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;var r=o(1),s=o(8),n=o(2),a=o(7),i=o(59),l=o(12),c=o(14),g=o(115),d=o(881),u=o(159),p=o(4),h=o(17),f=(0,c.MsgFactory)("composer"),b=f.defineMessages,m=f.IntlMessageFormat,y=b({followingDocMessage:{
msg:"You’ll get emails about changes to this doc."},followingTemplateMessage:{msg:"You’ll get emails about changes to this template."},unfollowingMessage:{
msg:"You’ll no longer get emails about changes."}}),C=((0,n.defineMessages)({followingDocMessage:{id:"4qsz86",defaultMessage:"You’ll get emails about changes to this doc."},followingTemplateMessage:{
id:"fGvEKF",defaultMessage:"You’ll get emails about changes to this template."},unfollowingMessage:{id:"ztfrb+",defaultMessage:"You’ll no longer get emails about changes."}}),
a.FollowLevel.EVERY),M=a.FollowLevel.NO_EMAIL,_=function(e){r.__extends(t,e);function t(t,o,r,s,n){var i=e.call(this)||this;i.padListStore=s;i.padId=t;i.padType=n
;i.subscribed=o==a.FollowLevel.EVERY||o==a.FollowLevel.DEFAULT&&r;return i}t.prototype.checkRedirect=function(){
h.default.getQueryParams().newFollowPreference&&this.showSnackbar(parseInt(h.default.getQueryParams().newFollowPreference,10))};t.prototype.setPadId=function(e){this.padId=e}
;t.prototype.isSubscribed=function(){return this.subscribed};t.prototype.updateFromServer=function(){var e=this,t=this.padId;if(!t)return null;l.get({url:"/pad/are-change-emails-on",data:{padId:t},
analyticsTag:"are-change-emails-on",shardingKey:l.getShardingKeyForPad(t),successHandler:function(t){if(t&&t.success&&e.subscribed!=t.data){e.subscribed=t.data;e.trigger("change",e.subscribed)}}})}
;t.prototype.showFollowSnackbar=function(){var e=u.isTemplate(this.padType)?y.followingTemplateMessage:y.followingDocMessage,t=new m(e,s.default.userLocale).format();(0,
d.showFollowSnackbar)(t,h.default.fn.callAtMostOnce(this.unsubscribeUserFromUndo.bind(this)))};t.prototype.showUnfollowSnackbar=function(){
var e=new m(y.unfollowingMessage,s.default.userLocale).format();(0,d.showFollowManagementSnackbar)(e)};t.prototype.showSnackbar=function(e){if(e)if(e==C){this.showFollowSnackbar();this.subscribed=!0
}else{this.showUnfollowSnackbar();this.subscribed=!1}};t.prototype.notifyAutoSubscribed=function(){if(!this.subscribed){this.subscribed=!0;this.showFollowSnackbar();this.trigger("change",!0)}}
;t.prototype.resubscribeUserFromUndo=function(){(0,p.track)("email-notifications-undo",{subscribed:!0});this.subscribeUser()};t.prototype.subscribeUser=function(e){
g.updatePadFollowPref(this.padListStore,this.padId,!0);e||this.showSnackbar(C);this.subscribed=!0;this.trigger("change",!0)};t.prototype.unsubscribeUserFromUndo=function(){(0,
p.track)("email-notifications-undo",{subscribed:!1});this.unsubscribeUser()};t.prototype.unsubscribeUser=function(e){g.updatePadFollowPref(this.padListStore,this.padId,!1);e||this.showSnackbar(M)
;this.subscribed=!1;this.trigger("change",!1)};return t}(i.EventEmittingClass);t.default=_},1638:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.PadControllerConnectionStatus=void 0
;var r=o(1),s=o(8),n=o(59),a=o(14),i=o(1639),l=o(88),c=o(44),g=o(100),d=o(100),u=o(44),p=o(4),h=o(17),f=o(308),b=o(23),m=o(0),y=o(2),C=o(99),M=o(7),_=o(61),S=o(12),v=o(29),E=(0,
a.MsgFactory)("header"),T=E.defineMessages,w=E.IntlMessageFormat,I=T({padCantSave:{description:"Error message shown to users when their doc is not automatically saving.",
msg:"Having trouble saving this doc. Trying to reconnect..."}});(0,y.defineMessages)({padCantSave:{id:"e/+0oW",defaultMessage:"Having trouble saving this doc. Trying to reconnect..."}});function A(e){
return e==M.PadConnectionToastType.Unauthenticated||e==M.PadConnectionToastType.UnexpectedlyAuthenticated||e==M.PadConnectionToastType.UserMismatch}var O=function(e){r.__extends(t,e);function t(t,o){
var r=e.call(this)||this;r.reconnecting=!1;r.uncommittedChanges=!1;r.permanentlyDisconnected=!1;r.serverDisconnectReason=null;r.couldntCreateNewPad=!1;r.wasFailedNativeAppPadIdRequest=!1
;r.padTooBusy=!1;r.isReadOnly=!1;r.disposed=!1;r.brieflyReconnecting=!1;r.longTimeReconnecting=!1;r.userTriedToLeaveSinceRecon=!1;r.warnUpgradeSyncImpossible=!1;r.isDeletingPad=!1;r.isArchivingPad=!1
;r.isServerDBReadOnly=!1;r.allowEditable=!0;r.isOffline=!1;r.wasMostRecentlyUnstable=!1;r.isMarkingUnsaved=!1;r.runningTimersFailureCount=0;r.handleServerPlannedRestart=function(){
r.plannedRestartMessageAtMost120secs.on(0)};r.handleAckAnyCommit=function(){r.unsavedChangesAndNoAckForAtLeast10secs.offNow()};r.handleSwitchToWrite=function(){
r.isReadOnlyTurnedOffLessThan15secsAgo.on(0)};r.ensureTimersRunning=function(){if(!r.markUnsavedAfter){r.markUnsavedAfter=Date.now()+15e3;r.runningTimersTimeout=setTimeout((function(){
if(r.isMarkingUnsaved){l.Snackbar.close();var e={count:r.runningTimersFailureCount,friendlyUserAgentInfo:_.default.toHumanReadable(),userAgentInfo:_.default.toString(),version:"6"};(0,
p.track)("pad-connection-status-timers-recovered",e)}r.isMarkingUnsaved=!1;r.markUnsavedAfter=null;r.runningTimersFailureCount=0;r.runningTimersNotifyAfter=null}),0)}if(Date.now()>r.markUnsavedAfter){
r.runningTimersFailureCount+=1;if(r.runningTimersFailureCount>25){if(!r.isMarkingUnsaved){r.isMarkingUnsaved=!0;r.padController.setMarkingUnsaved(!0,!0)}
if(!r.runningTimersNotifyAfter||Date.now()>r.runningTimersNotifyAfter){r.runningTimersNotifyAfter=Date.now()+6e4;var e=I.padCantSave;l.Snackbar.show(m.createElement(l.Snackbar,{
className:"notranslate",timeoutDelayMs:0,title:new w(e,s.default.userLocale).format(),variant:"warn"}));var t={count:r.runningTimersFailureCount,friendlyUserAgentInfo:_.default.toHumanReadable(),
userAgentInfo:_.default.toString(),version:"6"};(0,p.track)("pad-connection-status-timers-not-running",t)}}}};r.update=function(){if(!r.disposed){try{r.updateInternal()}catch(e){(0,
d.freakout)("Rendering pad connection status toast failed",e,!1)}r.padController.updateEditability();r.trigger("change",void 0)}};r.currentToastType=M.PadConnectionToastType.None
;r.currentToastStartDisplayTime=0;r.dismissCurrentToast=null;r.padController=t;r.allowOfflineMode=o;r.unstableAtLeast15secs=new u.ToggleableWithTimer(!1,(function(e){return r.update()}))
;r.unstableAtLeast45secs=new u.ToggleableWithTimer(!1,(function(e){return r.update()}));r.unstableAtLeast60secs=new u.ToggleableWithTimer(!1,(function(e){return r.update()}))
;r.unstableAtLeast90secs=new u.ToggleableWithTimer(!1,(function(e){return r.update()}));r.plannedRestartMessageAtMost120secs=new u.ToggleableWithTimer(!1,(function(e){return r.update()}))
;r.reconnectedJustATinyBitAgo=new u.ToggleableWithTimer(!0,(function(e){return r.update()}));r.unsavedChangesAndNoAckForAtLeast10secs=new u.ToggleableWithTimer(!1,(function(e){return r.update()}))
;r.isReadOnlyTurnedOffLessThan15secsAgo=new u.ToggleableWithTimer(!1,(function(e){return r.update()}));r.bindEvents();return r}t.prototype.bindEvents=function(){var e=this.padController.collabClient
;e.on("channel-state-change",this.update);e.on("has-uncommitted-changes",this.update);e.on("moderated-pad-edited",this.update);e.on("server-planned-restart",this.handleServerPlannedRestart)
;e.on("ack-any-commit",this.handleAckAnyCommit);e.on("switch-to-write",this.handleSwitchToWrite)};t.prototype.unbindEvents=function(){var e=this.padController.collabClient
;null==e||e.off("channel-state-change",this.update);null==e||e.off("has-uncommitted-changes",this.update);null==e||e.off("moderated-pad-edited",this.update)
;null==e||e.off("server-planned-restart",this.handleServerPlannedRestart);null==e||e.off("ack-any-commit",this.handleAckAnyCommit);null==e||e.off("switch-to-write",this.handleSwitchToWrite)}
;t.prototype.dispose=function(){this.disposed=!0;this.toast(M.PadConnectionToastType.None);this.runningTimersTimeout&&clearTimeout(this.runningTimersTimeout);this.unbindEvents()}
;t.prototype.notifyCouldntCreateNewPad=function(e){void 0===e&&(e=!1);this.couldntCreateNewPad=!0;this.wasFailedNativeAppPadIdRequest=e;this.update()};t.prototype.notifyTriedLeave=function(){
this.userTriedToLeaveSinceRecon=!0;this.update()};t.prototype.notifySyncImpossible=function(){this.warnUpgradeSyncImpossible=!0;this.update()};t.prototype.preparePadDeletion=function(){
this.isDeletingPad=!0};t.prototype.preparePadArchive=function(){this.isArchivingPad=!0};t.prototype.updateInternal=function(){var e,t,o=this
;this.isReadOnlyTurnedOffLessThan15secsAgo.isOn()&&this.isReadOnlyTurnedOffLessThan15secsAgo.off(15e3);var r=this.padController.collabClient
;this.reconnecting=r.socket.channelState==M.ChannelState.RECONNECTING;this.permanentlyDisconnected=r.socket.channelState==M.ChannelState.DISCONNECTED
;this.serverDisconnectReason=r.socket.getServerDisconnectReason();this.uncommittedChanges=r.hasUncommittedChanges();this.hasReceivedModerationMessage=r.hasReceivedModerationMessage()
;this.padTooBusy=r.socket.padTooBusy;this.isReadOnly=r.socket.isReadOnly;this.isServerDBReadOnly=r.socket.isServerDBReadOnly
;this.uncommittedChanges?this.unsavedChangesAndNoAckForAtLeast10secs.isOn()||this.unsavedChangesAndNoAckForAtLeast10secs.on(1e4):this.unsavedChangesAndNoAckForAtLeast10secs.off(0);var n=!1
;if(!(null===(t=null===(e=this.padController)||void 0===e?void 0:e.mainAce)||void 0===t?void 0:t.core.getIMEStatus())){
var a=this.reconnecting&&this.uncommittedChanges,i=this.unsavedChangesAndNoAckForAtLeast10secs.isOn();n=a||i}this.wasMostRecentlyUnstable=n;if(n){this.unstableAtLeast15secs.on(15e3)
;this.unstableAtLeast45secs.on(C.isOn("dangerous-offline")?3e5:3e4);this.unstableAtLeast60secs.on(6e4);this.unstableAtLeast90secs.on(9e4)}else{this.unstableAtLeast15secs.off()
;this.unstableAtLeast45secs.off();this.unstableAtLeast60secs.off();this.unstableAtLeast90secs.off()}this.plannedRestartMessageAtMost120secs.isOn()&&this.plannedRestartMessageAtMost120secs.off(12e4)
;if(n&&!this.isReadOnly)if(this.plannedRestartMessageAtMost120secs.isOn()){
this.brieflyReconnecting=(this.brieflyReconnecting||this.unstableAtLeast60secs.isOn()||this.userTriedToLeaveSinceRecon)&&!this.isReadOnlyTurnedOffLessThan15secsAgo.isOn()
;this.longTimeReconnecting=(this.longTimeReconnecting||this.unstableAtLeast90secs.isOn())&&!this.isReadOnlyTurnedOffLessThan15secsAgo.isOn()}else{
this.brieflyReconnecting=(this.brieflyReconnecting||this.unstableAtLeast15secs.isOn()||this.userTriedToLeaveSinceRecon)&&!this.isReadOnlyTurnedOffLessThan15secsAgo.isOn()
;this.longTimeReconnecting=(this.longTimeReconnecting||this.unstableAtLeast45secs.isOn())&&!this.isReadOnlyTurnedOffLessThan15secsAgo.isOn()}else{this.brieflyReconnecting=!1
;this.longTimeReconnecting=!1;this.userTriedToLeaveSinceRecon=!1}this.longTimeReconnecting?this.reconnectedJustATinyBitAgo.off(0):this.reconnectedJustATinyBitAgo.on(2e3);if((0,g.hasFreakedOut)()){
this.toast(M.PadConnectionToastType.FreakedOut);this.padController.setMarkingUnsaved(!0);this.allowEditable=!1;this.isOffline=!1}else if(this.warnUpgradeSyncImpossible){
this.toast(M.PadConnectionToastType.UpgradeSyncImpossible);this.padController.setMarkingUnsaved(!0);this.allowEditable=!1;this.isOffline=!1}else if(this.couldntCreateNewPad){
this.toast(this.wasFailedNativeAppPadIdRequest?M.PadConnectionToastType.CouldntCreateNewPadFromNativeApp:M.PadConnectionToastType.CouldntCreateNewPad);this.padController.setMarkingUnsaved(!0)
;this.allowEditable=!1;this.isOffline=!1}else if(this.padTooBusy){this.toast(M.PadConnectionToastType.PadTooBusy);this.padController.setMarkingUnsaved(!0);this.allowEditable=!1;this.isOffline=!1
}else if(this.hasReceivedModerationMessage){this.toast(M.PadConnectionToastType.NoEditPermissions);this.padController.setMarkingUnsaved(!0);this.allowEditable=!1;this.isOffline=!1
}else if(this.isReadOnly){this.isServerDBReadOnly?this.toast(M.PadConnectionToastType.ServerDBReadOnly):this.toast(M.PadConnectionToastType.ReadOnly);this.padController.setMarkingUnsaved(!0)
;this.allowEditable=!1;this.isOffline=!1}else if(this.isDeletingPad||this.isArchivingPad){this.padController.setMarkingUnsaved(!0);this.allowEditable=!1;this.isOffline=!1
}else if(this.permanentlyDisconnected){var l=void 0
;if(this.serverDisconnectReason==M.BootConnectionReason.Unauthenticated||this.serverDisconnectReason==M.BootConnectionReason.InvalidXsrfToken)l=M.PadConnectionToastType.Unauthenticated;else if(this.serverDisconnectReason==M.BootConnectionReason.UserMismatch)l=s.default.isSignedIn()?M.PadConnectionToastType.UserMismatch:M.PadConnectionToastType.UnexpectedlyAuthenticated;else if(this.serverDisconnectReason==M.BootConnectionReason.Unauthorized)l=M.PadConnectionToastType.Unauthorized;else if(this.serverDisconnectReason==M.BootConnectionReason.PadDeleted||this.serverDisconnectReason==M.BootConnectionReason.PadOldArchived)l=M.PadConnectionToastType.None;else if(this.serverDisconnectReason==M.BootConnectionReason.PadMovedIntoBinder){
l=M.PadConnectionToastType.PadMovedIntoBinder;var d=function(e){var t=function(){e>0&&(0,c.setTimeout)((function(){d(e-1)}),1e3)};return S.get({url:"/binder/get-binder-page-redirect-url",data:{
localPadId:o.padController.localPadId,cloudDocId:o.padController.padClientVars.cloudDocId},analyticsTag:"get-enabled-view-only-pad-id",shardingKey:S.getStatelessShardingKey(),
successHandler:function(e){e.redirectUrl?(0,v.locationReplace)("pad-moved-to-binder-redirect",e.redirectUrl):t()},errorHandler:function(e){t();return!1}})};d(5)
}else l=M.PadConnectionToastType.Disconnected;A(l)&&h.default.error.loggingTryCatch((function(){var e,t
;return f.checkCurrentLoginStatus(null===(t=null===(e=o.context)||void 0===e?void 0:e.stores)||void 0===t?void 0:t.networkStatus)}));this.toast(l);this.padController.setMarkingUnsaved(!0)
;this.allowEditable=!1;this.isOffline=!1}else if(this.allowOfflineMode)if(this.brieflyReconnecting){this.toast(M.PadConnectionToastType.None);this.padController.setMarkingUnsaved(!1)
;this.allowEditable=!0;this.isOffline=!0}else{this.toast(M.PadConnectionToastType.None);this.padController.setMarkingUnsaved(!1);this.allowEditable=!0;this.isOffline=!1
}else if(this.longTimeReconnecting){this.toast(M.PadConnectionToastType.ReconnectingForAWhile);this.padController.setMarkingUnsaved(!0);this.allowEditable=!1;this.isOffline=!1
}else if(this.brieflyReconnecting){this.toast(M.PadConnectionToastType.Reconnecting);this.padController.setMarkingUnsaved(!0);this.allowEditable=!0;this.isOffline=!1}else{
this.toast(this.reconnectedJustATinyBitAgo.isOn()?M.PadConnectionToastType.None:M.PadConnectionToastType.JustReconnected);this.padController.setMarkingUnsaved(!1);this.allowEditable=!0
;this.isOffline=!1}};t.prototype.getAllowEditable=function(){return this.allowEditable};t.prototype.getIsOffline=function(){return this.isOffline};t.prototype.toast=function(e){var t=this
;f.isShowingLoginStatusPopup()&&A(e)&&(e=M.PadConnectionToastType.None);if(this.currentToastType!=e){if(this.dismissCurrentToast){this.dismissCurrentToast();this.dismissCurrentToast=null}
this.dismissCurrentToast=(0,i.makeToast)(e,(function(){return t.reconnectNow()}));var o=Date.now();this.currentToastType!=M.PadConnectionToastType.None&&(0,
p.track)("pad-connection-status-toast-time",{type:M.PadConnectionToastType[this.currentToastType],displayTime:o-this.currentToastStartDisplayTime});this.currentToastStartDisplayTime=o
;this.currentToastType=e;(0,p.track)("pad-connection-status-update",{allowEditable:this.allowEditable,allowOfflineMode:this.allowOfflineMode,brieflyReconnecting:this.brieflyReconnecting,
couldntCreateNewPad:this.couldntCreateNewPad,currentToastType:M.PadConnectionToastType[this.currentToastType],disposed:this.disposed,hasFreakedOut:(0,g.hasFreakedOut)(),
hasReceivedModerationMessage:this.hasReceivedModerationMessage,isDeletingPad:this.isDeletingPad,isArchivingPad:this.isArchivingPad,isOffline:this.isOffline,isReadOnly:this.isReadOnly,
longTimeReconnecting:this.longTimeReconnecting,padTooBusy:this.padTooBusy,permanentlyDisconnected:this.permanentlyDisconnected,reconnecting:this.reconnecting,
serverDisconnectReason:M.BootConnectionReason[this.serverDisconnectReason],uncommittedChanges:this.uncommittedChanges,unstable:this.wasMostRecentlyUnstable,
userTriedToLeaveSinceRecon:this.userTriedToLeaveSinceRecon,warnUpgradeSyncImpossible:this.warnUpgradeSyncImpossible,wasFailedNativeAppPadIdRequest:this.wasFailedNativeAppPadIdRequest})
;this.wasMostRecentlyUnstable=void 0}};t.prototype.reconnectNow=function(){this.padController.collabClient&&this.padController.collabClient.socket.forceReconnect("user clicked button")}
;t.contextTypes={stores:b.object.isRequired};return t}(n.EventEmittingClass);t.PadControllerConnectionStatus=O},1639:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.makeToastElement=t.makeToast=void 0;var r=o(1),s=o(2),n=o(1640),a=o(7),i=o(0),l=o(48),c=o(4),g=(0,o(5).PaperIntlFactory)().F,d=(0,s.defineMessages)({couldntCreateNewPad:{id:"rMJSt2",
defaultMessage:"Couldn't create new doc. Try again later."},couldntCreateNewPadFromNativeApp:{id:"Deo6BA",defaultMessage:"Couldn’t create new doc. Try again once you’re back online."},
docMovedIntoBinder:{id:"sShGsQ",defaultMessage:"This doc has been moved into a binder.  Redirecting…"},genericError:{id:"+K2pKX",
defaultMessage:"Having trouble saving this doc. Copy your changes and refresh the page."},padTooBusy:{id:"o9Qjq1",
defaultMessage:"This doc is at viewer limit. You can read, but won’t be able to make edits or see updates."},serverDBReadOnly:{id:"9wyc2e",
defaultMessage:"Editing and some features aren't available while we are doing maintenance on Paper."},noEditPermissions:{id:"1m1LVg",defaultMessage:"You don’t have permission to edit this doc."},
unauthorized:{id:"zBX7pY",defaultMessage:"You don’t have permission to access this doc."},upgradeSyncImpossible:{id:"JUUTTH",
defaultMessage:"Time to update your version of Paper. Refresh the page to view this doc."},stillofflineYoullbeabletoeditonceyourebackonline:{id:"z0WOV1",
defaultMessage:"Still offline. You’ll be able to edit once you’re back online."},connected:{id:"XoFTUK",defaultMessage:"Connected!"},
connectionlostYoureditswillsaveonceyourebackonlineTryingtoreconnect:{id:"XYKpZi",defaultMessage:"Connection lost. Your edits will save once you’re back online. Trying to reconnect…"},
connectionlostYoullbeabletoeditonceyourebackonlineTryingtoreconnect:{id:"dM+KVX",defaultMessage:"Connection lost. You’ll be able to edit once you’re back online. Trying to reconnect…"},
youarenotloggedinandchangescannotbesaved:{id:"+k49cC",defaultMessage:"You are not logged in and changes cannot be saved."},youresignedinbutviewingasaguestRefreshthepagetocontinueworking:{id:"QpZ4Wi",
defaultMessage:"You're signed in, but viewing as a guest. Refresh the page to continue working."},youvesignedinonanotherscreenRefreshthepagetocontinueworking:{id:"S9SOeG",
defaultMessage:"You’ve signed in on another screen. Refresh the page to continue working."}});t.makeToast=function(e,t){var o=u(e,t);return o&&l.default.show(o)};function u(e,t){switch(e){
case a.PadConnectionToastType.None:return null;case a.PadConnectionToastType.CouldntCreateNewPad:(0,c.track)("pad_connection_status",{type:"couldnt-connect-new-pad"})
;return i.createElement(l.default,{clickToDismiss:!1,actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.couldntCreateNewPad)))
;case a.PadConnectionToastType.CouldntCreateNewPadFromNativeApp:(0,c.track)("pad_connection_status",{type:"couldnt-connect-new-pad-from-native"});return i.createElement(l.default,{clickToDismiss:!1,
actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.couldntCreateNewPadFromNativeApp)));case a.PadConnectionToastType.Disconnected:(0,c.track)("pad_connection_status",{
type:"disconnected"});return i.createElement(l.default,{clickToDismiss:!1},i.createElement(g,r.__assign({},d.genericError)),i.createElement(n.LogButton,null))
;case a.PadConnectionToastType.ReconnectingForAWhile:(0,c.track)("pad_connection_status",{type:"reconnect-for-a-while"});return i.createElement(l.default,{clickToDismiss:!1,
actions:i.createElement(i.Fragment,null,i.createElement(n.ReconnectButton,{reconnectNow:t}),i.createElement(n.LogButton,null))
},i.createElement("div",null,i.createElement(g,r.__assign({},d.stillofflineYoullbeabletoeditonceyourebackonline))));case a.PadConnectionToastType.JustReconnected:(0,c.track)("pad_connection_status",{
type:"just-reconnected"});return i.createElement(l.default,{clickToDismiss:!0,actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.connected)))
;case a.PadConnectionToastType.Reconnecting:(0,c.track)("pad_connection_status",{type:"reconnect"});return i.createElement(l.default,{clickToDismiss:!1,actions:i.createElement(n.LogButton,null)
},i.createElement(g,r.__assign({},d.connectionlostYoureditswillsaveonceyourebackonlineTryingtoreconnect)));case a.PadConnectionToastType.FreakedOut:(0,c.track)("pad_connection_status",{type:"freakout"
});return null;case a.PadConnectionToastType.PadTooBusy:(0,c.track)("pad_connection_status",{type:"pad-too-busy"});return i.createElement(l.default,{clickToDismiss:!0,
actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.padTooBusy)));case a.PadConnectionToastType.ReadOnly:(0,c.track)("pad_connection_status",{type:"pad-read-only"})
;return i.createElement(l.default,{autoDismiss:!1,actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.connectionlostYoullbeabletoeditonceyourebackonlineTryingtoreconnect)))
;case a.PadConnectionToastType.ServerDBReadOnly:(0,c.track)("pad_connection_status",{type:"pad-read-only"});return i.createElement(l.default,{autoDismiss:!1,actions:i.createElement(n.LogButton,null)
},i.createElement(g,r.__assign({},d.serverDBReadOnly)));case a.PadConnectionToastType.NoEditPermissions:(0,c.track)("pad_connection_status",{type:"no-edit-permissions"})
;return i.createElement(l.default,{clickToDismiss:!1,actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.noEditPermissions)));case a.PadConnectionToastType.Unauthorized:(0,
c.track)("pad_connection_status",{type:"unauthorized"});return i.createElement(l.default,{clickToDismiss:!1,actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.unauthorized)))
;case a.PadConnectionToastType.Unauthenticated:(0,c.track)("pad_connection_status",{type:"unauthenticated"});return i.createElement(l.default,{clickToDismiss:!1,
actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.youarenotloggedinandchangescannotbesaved)));case a.PadConnectionToastType.UnexpectedlyAuthenticated:(0,
c.track)("pad_connection_status",{type:"unaexpectedly-authenticated"});return i.createElement(l.default,{clickToDismiss:!1,actions:i.createElement(n.LogButton,null)
},i.createElement(g,r.__assign({},d.youresignedinbutviewingasaguestRefreshthepagetocontinueworking)));case a.PadConnectionToastType.UserMismatch:(0,c.track)("pad_connection_status",{
type:"user-mismatch"});return i.createElement(l.default,{clickToDismiss:!1,actions:i.createElement(n.LogButton,null)
},i.createElement(g,r.__assign({},d.youvesignedinonanotherscreenRefreshthepagetocontinueworking)));case a.PadConnectionToastType.UpgradeSyncImpossible:(0,c.track)("pad_connection_status",{
type:"upgrade-sync-impossible"});return i.createElement(l.default,{clickToDismiss:!1,actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.upgradeSyncImpossible)))
;case a.PadConnectionToastType.PadMovedIntoBinder:(0,c.track)("pad_connection_status",{type:"pad-moved-into-binder"});return i.createElement(l.default,{clickToDismiss:!1,
actions:i.createElement(n.LogButton,null)},i.createElement(g,r.__assign({},d.docMovedIntoBinder)))}}t.makeToastElement=u},1640:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.LogButton=t.ReconnectButton=void 0;var r,s=o(1),n=o(21),a=o(25),i=o(8),l=o(2),c=o(14),g=o(70),d=o(149),u=o(0),p=o(36),h=o(71),f=(0,c.MsgFactory)("app"),b=f.F,m=(0,f.defineMessages)({trynow:{
msg:"Try now",
description:"This is a message that appears on a button. The button is below a message indicating that the page has lost connectivity with the server, and the page needs to reconnect to the server in order for the user to continue working. When this button is pressed, the page immediately attempts to reconnect."
},tryingtoreconnect:{msg:"Trying to reconnect…",description:"This message indicates that the page is currently attempting to re-establish connectivity with the server."},failedtoreachserver:{
msg:"Failed to reach server.",description:"This message indicates that the page has just now attempted to re-establish connectivity with the server, but it failed to do."}});(0,l.defineMessages)({
trynow:{id:"mGxSwh",defaultMessage:"Try now"},tryingtoreconnect:{id:"07h9dl",defaultMessage:"Trying to reconnect…"},failedtoreachserver:{id:"PuPn+8",defaultMessage:"Failed to reach server."}})
;!function(e){e[e.ShowButton=1]="ShowButton";e[e.ShowLoading=2]="ShowLoading";e[e.ShowFailure=3]="ShowFailure"}(r||(r={}));t.ReconnectButton=(0,a.createReactClass)({displayName:"ReconnectButton",
mixins:[d],timeout:null,getInitialState:function(){return{status:r.ShowButton}},render:function(){switch(this.state.status){case r.ShowButton:return u.createElement(n.default,{onClick:this.onClick,
"track-title":"reconnect-now",variant:"transparent",inverse:!0},u.createElement(b,s.__assign({},m.trynow)));case r.ShowLoading:
return u.createElement("span",null,u.createElement(b,s.__assign({},m.tryingtoreconnect)));case r.ShowFailure:return u.createElement("span",null,u.createElement(b,s.__assign({},m.failedtoreachserver)))
}},componentDidUpdate:function(e,t){var o=this;if(t.status==r.ShowButton&&this.state.status==r.ShowLoading){clearTimeout(this.timeout);this.timeout=setTimeout((function(){o.setState({
status:r.ShowFailure})}),2e4)}else if(t.status==r.ShowLoading&&this.state.status==r.ShowFailure){clearTimeout(this.timeout);this.timeout=setTimeout((function(){o.setState({status:r.ShowButton})}),2e4)
}},componentDidUnnmount:function(){clearTimeout(this.timeout)},onClick:function(){if(this.state.status==r.ShowButton){this.props.reconnectNow();this.setState({status:r.ShowLoading})}}})
;var y=function(e){s.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.onClick=function(){
var e=App.getCurrentPadController().collabClient.debug.debugMessages.join("\n"),t=document.createElement("div");document.body.appendChild(t)
;p.reactDomRender(u.createElement(h.ToastAndUnmountErrorBoundary,null,u.createElement(g.default,{openOnMount:!0,size:"xxlarge",unmountOnClose:!0},u.createElement("span",{className:"notranslate",
style:{fontFamily:"monospace",whiteSpace:"pre"}},e))),t)};return t}t.prototype.render=function(){return i.default.isComposerTeam?u.createElement(n.default,{onClick:this.onClick,variant:"transparent",
inverse:!0,className:"notranslate","track-title":"collab-logs"},"[Debug] Collab logs"):null};t.displayName="LogButton";return t}(u.Component);t.LogButton=y},1641:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});t.ignoreAccessRequest=t.grantAccess=void 0;var r=o(5),s=o(2),n=o(12),a=o(0),i=o(88),l=(0,r.PaperIntlFactory)()._f,c=(0,s.defineMessages)({close:{
id:"u/p3Pl",defaultMessage:"Close"},accessGranted:{id:"rGKiKA",defaultMessage:"Access successfully granted."},grantAccessFailure:{id:"INQbNW",defaultMessage:"Couldn’t grant access."},
accessRequestIgnored:{id:"VBAdeR",defaultMessage:"Access request ignored."},accessRequestIgnoreFailure:{id:"BBzdYg",defaultMessage:"Couldn’t ignore request."}});t.grantAccess=function(e,t){
var o=e.encryptedAccountId,r=e.localPadId,s=function(){i.Snackbar.show(a.createElement(i.Snackbar,{className:"notranslate",variant:"fail",closeButtonText:l(c.close),timeoutDelayMs:1e4,
title:l(c.grantAccessFailure),"track-title":"Grant access failed"}));t(!1)};n.post({url:"/ep/account/guest/grant-access-post",data:{encryptedAccountId:o,localPadId:r},analyticsTag:"grant-access",
shardingKey:n.getShardingKeyForPad(r),successHandler:function(e){if(e&&e.success){i.Snackbar.show(a.createElement(i.Snackbar,{className:"notranslate",variant:"complete",closeButtonText:l(c.close),
timeoutDelayMs:1e4,title:l(c.accessGranted),"track-title":"Access granted"}));t(!0)}else s()},errorHandler:function(){s();return!0}})};t.ignoreAccessRequest=function(e,t){
var o=e.encryptedAccountId,r=e.localPadId,s=function(){i.Snackbar.show(a.createElement(i.Snackbar,{className:"notranslate",variant:"fail",closeButtonText:l(c.close),timeoutDelayMs:1e4,
title:l(c.accessRequestIgnoreFailure),"track-title":"Ignore access request failed"}));t(!1)};n.post({url:"/ep/account/guest/ignore-access-request",data:{encryptedAccountId:o,localPadId:r},
analyticsTag:"grant-access",shardingKey:n.getStatelessShardingKey(),successHandler:function(e){if(e&&e.success){i.Snackbar.show(a.createElement(i.Snackbar,{className:"notranslate",
closeButtonText:l(c.close),timeoutDelayMs:1e4,title:l(c.accessRequestIgnored),"track-title":"Access request ignored"}));t(!0)}else s()},errorHandler:function(){s();return!0}})}},1642:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});var r=o(8),s=o(6),n=o(12),a=o(189),i=o(92),l=o(4),c=o(17),g=function(){function e(e,t,o,n){var i,g=this;this.buildExternalUserInfo=e
;this.padController=t;this.usersBySecureId_={};this.onChangeHandlers=[];this.userJoinOrUpdate=function(e){e.forEach(g.applyUserInfo);g.triggerOnChange()};this.applyUserInfo=function(e){
var t=g.usersBySecureId_[e.secureUserId],o=s.assign({},t,g.buildExternalUserInfo(e))
;!o.permission&&t&&t.permission&&c.default.error.logError("Overwrote permission to a falsey value for user: "+e.secureUserId,void 0,void 0,void 0,new Error,!0);if(t){
t.lastViewed&&(!o.lastViewed||new Date(o.lastViewed)<new Date(t.lastViewed))&&(o.lastViewed=t.lastViewed)
;t.lastEdited&&(!o.lastEdited||new Date(o.lastEdited)<new Date(t.lastEdited))&&(o.lastEdited=t.lastEdited);t.colorId&&(o.colorId=t.colorId)}g.usersBySecureId_[e.secureUserId]=o}
;this.logIfCurrentUserNowInSharedPad=function(){var e=g.usersBySecureId_||{},t=s.values(e).filter((function(e){return e&&!!e.email&&e.secureUserId!=r.default.secureUserId})),o=t.filter((function(e){
return e.isConnected}));r.default.isSignedIn()&&t.length>0&&(0,a.doOncePerFetchPage)("trackInSharedPad",(function(){l.IntentionEvent.InSharedPad.track({})}));r.default.isSignedIn()&&o.length>0&&(0,
a.doOncePerFetchPage)("trackInActivePad",(function(){l.IntentionEvent.InActivePad.track({})}))};o&&this.userJoinOrUpdate([o]);this.userJoinOrUpdate(n)
;null===(i=this.padController)||void 0===i||i.on("focus",this.logIfCurrentUserNowInSharedPad)}e.prototype.getAllConnectedUsers=function(){var t=s.values(this.usersBySecureId_)
;return(t=e.sortUsers(t)).filter((function(e){return e.isConnected}))};e.prototype.getConnectedUsers=function(){return this.getAllConnectedUsers().filter((function(e){
return e.secureUserId!=r.default.secureUserId}))};e.prototype.getUser=function(e){return this.usersBySecureId_[e]};e.prototype.getAllUsersOnDoc=function(){var t=s.values(this.usersBySecureId_)
;return e.sortUsers(t)};e.prototype.triggerOnChange=function(){this.onChangeHandlers.forEach((function(e){return e()}));var e=this.getConnectedUsers();e.length&&l.trigger("users-connected",{users:e})
;this.logIfCurrentUserNowInSharedPad()};e.prototype.editUserInfo=function(e,t){var o=this.getUser(e);if(null!=o){t(o);this.markUpdated_(e)}};e.prototype.userLeave=function(e){
if(e.secureUserId!=r.default.secureUserId){var t=this.usersBySecureId_[e.secureUserId];if(t){t.isConnected=!1;this.markUpdated_(e.secureUserId);this.triggerOnChange()}}}
;e.prototype.handleOwnerChange=function(e,t){if(this.usersBySecureId_[e]){this.usersBySecureId_[e].isOwner=!1;this.markUpdated_(e)}if(this.usersBySecureId_[t]){this.usersBySecureId_[t].isOwner=!0
;this.markUpdated_(t)}this.triggerOnChange()};e.prototype.handleUserEdited=function(e,t){if(this.usersBySecureId_[e]&&t){
var o=this.usersBySecureId_[e],r=o.lastEdited?new Date(t).getTime()-new Date(o.lastEdited).getTime():0;if(!o.lastEdited||r>3e4){o.lastEdited=new Date(t);this.markUpdated_(e);this.triggerOnChange()}}}
;e.prototype.removeUser=function(e){delete this.usersBySecureId_[e];this.triggerOnChange()};e.prototype.fetchCloudDocSeenStateFromServer=function(){var e=this
;this.padController&&this.padController.getPadId()&&n.get({url:"/cloud-docs/get-seen-users",analyticsTag:"get-seen-users",data:{localPadId:this.padController.getPadId()},
shardingKey:n.getStatelessShardingKey(),successHandler:function(t){e.userJoinOrUpdate(t)}})};e.prototype.removeUsersNoLongerInDoc=function(e){var t=this,o=s.map(this.usersBySecureId_,(function(e){
return e.secureUserId})),r=s.map(e,(function(e){return e.secureUserId}));s.difference(o,r).forEach((function(e){t.removeUser(e)}))};e.prototype.addOnChangeHandler=function(e){
this.onChangeHandlers.push(e)};e.prototype.markUpdated_=function(e){var t=i.deepCopy(this.usersBySecureId_[e]);this.usersBySecureId_[e]=t};e.sortUsers=function(e){return e=(e=e.filter((function(e){
return"d.0"!==e.secureUserId}))).sort((function(e,t){
return e.secureUserId==r.default.secureUserId?-1:t.secureUserId==r.default.secureUserId?1:e.isConnected&&!t.isConnected?-1:t.isConnected&&!e.isConnected?1:e.lastViewed||t.lastViewed?e.lastViewed?t.lastViewed?new Date(t.lastViewed).getTime()-new Date(e.lastViewed).getTime():-1:1:(e.name||"Guest").localeCompare(t.name||"Guest")
}))};return e}();t.default=g},172:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(6),s=o(7);t.default=function(e,t){if(!e||!e.folder)return{hasFolder:!1};var o={hasFolder:!0,
folderGuestPolicy:s.FolderGuestPolicy[e.folder.guestPolicy],folderIsFavorite:e.inSidebar,folderIsPersonalDomain:e.isPersonalDomainFolder,folderNumMembers:e.members&&e.members.length,
folderNumPads:e.folder.numPads,folderNumParents:e.parentFolders&&e.parentFolders.length,folderSubscription:e.subscriptionLevel?s.FolderSubscriptionLevel[e.subscriptionLevel]:void 0,
isProject:e.folder.isProject,__folderId:e.folder.encryptedId};if(t){var n={};r.forEach(o,(function(e,o){n[t+o]=e}));return n}return o}},1791:function(e,t,o){Object.defineProperty(t,"__esModule",{
value:!0});t.diffCS=t.getParentPointers=t.getDiffZatextForChangeset=void 0;var r=o(6),s=o(220),n=o(22),a=o(588),i=o(1792),l=o(1793),c=o(51),g=o(260),d=o(929)
;t.getDiffZatextForChangeset=function(e,t,o,r,c){void 0===c&&(c=!0);if(n.isIdentity(e))return null;n.checkRep(e);n.checkCSAppliesToZatext(e,t);var g=o.copy();e=(0,
a.filterCommentAndTrivialChanges)(t,e,g);d.catchAndWarnOnThrow("simplifyChangeset-failed",(function(){e=l.simplifyChangeset(t,e,g)}));if(n.isIdentity(e))return null
;var u=g.putAttrib(["diff","plus"],!1),p=g.putAttrib(["diff","minus"],!1),f=g.putAttrib(["longkeep","1"],!1),b=function(e,t,o,r,s,a,i,l){var c=h(e,t,o,r,s,a,i,l),g=c.cs;if(c.isTrivial)return null
;e=n.applyToZatext(g,e,o);return e}(t,e,g,u,p,f,r,(function(e){var t=g.getAttribKey(e);return s.isTrivial(t)}));if(!b)return null;r&&c&&(b=(0,i.improveDiffZatext)(b,g))
;var m=n.prepareForWire(b.attribs,g);b.attribs=m.translated;return{zatext:b,pool:g=m.pool}};function u(e,t){var o={},r=function(r){for(var s=n.opIterator(e.attribs[r]),a=0,i=0,l=0;s.hasNext();){
var g=s.next();n.eachAttribNumber(g.attribs,(function(s){var n=t.getAttribKey(s),g=t.getAttribValue(s);if("aceTable"==n){var d={zone:r,line:a,col:l,total:i},u=g.split(" "),p=u[0],h=u[1];o[p]=d;o[h]=d
;var f=(e.rows||{})[p]||[],b=(e.cols||{})[h]||[];f.forEach((function(e){b.forEach((function(t){var r=c.getCellIdFromRowAndCol(e,t);o[r]=d}))}))}}));a+=g.lines;i+=g.chars;g.lines>0?l=0:l+=g.chars}}
;for(var s in e.text)r(s);return o}t.getParentPointers=u;function p(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function h(e,t,o,s,a,i,l,d){
var h=!0,f=u(e,o),b=n.unpack(t),m=r.union(Object.keys(b),Object.keys(e.text),Object.keys(e.rows||{}),Object.keys(e.cols||{}));m.sort((function(e,t){return("0"==e?1:0)-("0"==t?1:0)}))
;var y=r.clone(b),C=e.rows||{},M=e.cols||{},_={},S={};m.forEach((function(t){var r=b[t];if(r){var c;if("Z"!=r.itemType){(T={})[t]=r;c=n.isIdentity(n.pack(T));var u=function(e,t,o,r,s){
var a=n.smartOpAssembler(),i=n.opIterator(t.ops),l=!0,c=0,d=[],u=0;for(;i.hasNext();){var p=i.next();if("="==p.opcode){a.append(p);u+=p.chars}else if("+"==p.opcode){l=!1
;p.attribs+="*"+g.numToString(o);a.append(p);c+=p.chars}else if("-"==p.opcode){l=!1;if(s){p.opcode="=";p.attribs+="*"+g.numToString(r);d=d.concat(e.slice(u,u+p.chars))}else c-=p.chars;a.append(p)
;u+=p.chars}}a.endDocument();return{unpacked:{ops:a.toString(),oldLen:t.oldLen,newLen:t.oldLen+c,itemType:t.itemType,itemBank:t.itemBank},isTrivial:l,removedIds:d,addedIds:t.itemBank}
}(("R"==r.itemType?C:M)[t]||[],r,s,a,l);b[t]=u.unpacked;c=u.isTrivial;u.addedIds.forEach((function(e){_[e]=!0}));u.removedIds.forEach((function(e){S[e]=!0}))}else{u=function(e,t,o,r,s,a,i,l){
g.assert("Z"==e.itemType);var c=n.mergingOpAssembler(),d=n.stringAssembler();g.assert(t.length==e.oldLen,"mismatched apply: ",t.length," / ",e.oldLen)
;var u=n.opIterator(e.ops),h=n.bankIterator(e.itemBank),f=n.stringIterator(t),b=!0,m=!0,y=function(){var e=u.next(),t=n.newOp();n.copyOp(e,t);switch(e.opcode){case"+":var y=h.take(e.chars)
;""!=p(y)&&(m=!1);t.attribs+="*"+g.numToString(o);c.append(t);d.append(y);b=!1;break;case"-":if(""!=p(f.take(e.chars))&&(e.attribs||a)){m=!1;t.opcode="=";t.attribs+="*"+g.numToString(r);c.append(t)
}else c.append(t);b=!1;break;case"=":var C=f.take(e.chars),M=!0;if(e.attribs){var _=!1;n.eachAttribNumber(e.attribs,(function(e){l&&l(e)||(_=!0)}));if(_){t.attribs+="*"+g.numToString(o);c.append(t)
;m=!1;M=!1}}if(M&&i){c.append(t);M=!1}if(M){var S=C.split("\n");if(S.length>4||b&&S.length>3){var v=S[0],E=S[S.length-1];if(b)v="";else{var T=n.newOp();T.opcode="=";T.chars=v.length+1;T.lines=1
;T.attribs+="*"+g.numToString(s);c.append(T)}(w=n.newOp()).opcode="-";if(b){w.chars=C.length-(E.length+1);w.lines=S.length-2}else{w.chars=C.length-(v.length+1)-(E.length+1);w.lines=S.length-3}
c.append(w);(I=n.newOp()).opcode="=";I.chars=E.length+1;I.lines=1;I.attribs+="*"+g.numToString(s);c.append(I)}else if(b&&S.length>1){var w,I;(w=n.newOp()).opcode="-";w.chars=S[0].length+1;w.lines=1
;c.append(w);(I=n.newOp()).opcode="=";I.chars=e.chars-(S[0].length+1);I.lines=e.lines-1;I.attribs+="*"+g.numToString(s);c.append(I)}else c.append(t)}b=!1}};for(;u.hasNext();)y();if(!i){
var C=f.take(f.remaining()),M=C.split("\n");if(M.length>2){var _=M[0],S=M[M.length-1];if(b)_="";else{var v=n.newOp();v.opcode="=";v.chars=_.length+1;v.lines=1;v.attribs+="*"+g.numToString(s)
;c.append(v)}var E=n.newOp();E.opcode="-";if(b){E.chars=C.length-(S.length+1);E.lines=M.length-2}else{E.chars=C.length-(_.length+1)-(S.length+1);E.lines=M.length-3}E.attribs+="*"+g.numToString(s)
;c.append(E);var T=n.newOp();T.opcode="=";T.chars=S.length+1;T.lines=1;T.attribs+="*"+g.numToString(s);c.append(T)}}var w=d.toString();return{unpacked:{itemType:e.itemType,oldLen:t.length,
newLen:t.length+w.length,ops:c.toString(),itemBank:w},isTrivial:m}}(r,e.text[t]||"\n",s,a,i,l,"0"!=t,d);b[t]=u.unpacked;c=u.isTrivial}if(!c){"0"==t&&(h=!1);var m=f[t];if(m){
var y=n.builder(e.text[m.zone].length,"Z",m.zone);y.keep(m.total-m.col,m.line);y.keep(m.col,0);y.keep(1,0,[["child-zone-changed","true"]],o);var v=y.toChangeset(),E=void 0;if(b[m.zone]){var T
;(T={})[m.zone]=b[m.zone];E=n.pack(T)}else E=n.identity();b[m.zone]=n.unpack(n.compose(v,E,o))[m.zone]}}}}));for(var v=Object.keys(b),E=0;E<v.length;E++){var T=v[E];if(c.isCellId(T)){
var w=c.getRowAndColIdFromCellId(T),I=w.rowId,A=w.colId;_[I]||_[A]?b[T]=y[T]:(S[I]||S[A])&&delete b[T]}}var O={};for(var N in b)O[N]=b[N];return{cs:n.pack(O),isTrivial:h}}t.diffCS=h},
1792:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.improveDiffZatext=void 0;var r=o(1),s=o(6),n=o(22),a=o(418);t.improveDiffZatext=function(e,t){e=n.cloneZatext(e)
;for(var o in e.text){var r=i(e.text[o],e.attribs[o],t),s=r.text,a=r.attribs;e.text[o]=s;e.attribs[o]=a}return e};function i(e,t,o){
var r=n.splitTextLines(e),s=n.splitAttributionLines(t,e),a=[],i=[],c=[];function g(){for(var e=0;e<i.length;e++)a.push(i[e]);for(e=0;e<c.length;e++)a.push(c[e]);i=[];c=[]}for(var d=0;d<r.length;d++){
l(r[d],s[d],o).forEach((function(e){switch(e.type){case"other":g();a.push(e.line);break;case"red":case"green":i.push(e.line);break;default:e.type}}))}g();return{text:a.map((function(e){return e.text
})).join(""),attribs:n.joinAttributionLines(a.map((function(e){return e.aline})))}}function l(e,t,o){function a(o){return[{line:{text:e,aline:t},type:o}]}
for(var i=n.getAttributesPerCharacter(t,o),l=0,g=0,d=0,u=(i=i.slice(0,i.length-1)).length,p=0;p<i.length;p++)"plus"==i[p].diff?g++:"minus"==i[p].diff?l++:d++;function h(){
for(var t="",a="",l=n.smartOpAssembler(),c=n.smartOpAssembler(),g=0;g<i.length;g++){if("plus"!=i[g].diff){t+=e.charAt(g);l.append({chars:1,lines:0,opcode:"+",
attribs:n.makeAttribsString("+",s.toPairs(r.__assign(r.__assign({},i[g]),{diff:"minus"})),o)})}if("minus"!=i[g].diff){a+=e.charAt(g);c.append({chars:1,lines:0,opcode:"+",
attribs:n.makeAttribsString("+",s.toPairs(r.__assign(r.__assign({},i[g]),{diff:"plus"})),o)})}}t+="\n";l.append({chars:1,lines:1,opcode:"+",attribs:""});a+="\n";c.append({chars:1,lines:1,opcode:"+",
attribs:""});return[{line:{text:t,aline:l.toString()},type:"red"},{line:{text:a,aline:c.toString()},type:"green"}]}if(0==l||0==g)return a(0==g&&0==d?"red":0==l&&0==d?"green":"other")
;var f=c(i,"red"),b=c(i,"green"),m=c(i,null);if(2*(l+g)>=u)return h();if(i.length>1&&(-1!=f.lineLevelObjectIndex||-1!=b.lineLevelObjectIndex||-1!=m.lineLevelObjectIndex))return h()
;if(-1!=f.listMarkerIndex&&-1!=m.listMarkerIndex)return h();if(-1!=b.listMarkerIndex&&-1!=m.listMarkerIndex)return h();if(-1!=f.listMarkerIndex&&-1!=b.listMarkerIndex)return h()
;if(f.listMarkerIndex>0||b.listMarkerIndex>0){var y=f.listMarkerIndex>0?f.listMarkerIndex:b.listMarkerIndex,C=f.listMarkerIndex>0?"plus":"minus";for(p=0;p<y;p++)if(i[p].diff!=C)return h()
;i=[i[y]].concat(i.splice(y,1))}return a("other")}function c(e,t){for(var o=-1,r=-1,s=null,n=0;n<e.length;n++)if(t&&e[n].diff==t||!t&&!e[n].diff){
e[n].magicObject&&a.isLineLevelMagicObject(e[n].magicObject)&&(o=n);if(e[n].list){r=n;s=e[n].list}}return{lineLevelObjectIndex:o,listMarkerIndex:r,listType:s}}},1793:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});t.simplifyChangeset=void 0;var r=o(530),s=o(261),n=o(22),a=o(133);t.simplifyChangeset=function(e,t,o){var r=n.csMap(t,(function(t,r){var n,a
;if("Z"==r.itemType){n=e.text[t]||"\n";a=e.attribs[t]||"|1+1"}else if("R"==r.itemType){n=(e.rows||{})[t]||[];a=e.attribs[t]||""}else if("C"==r.itemType){n=(e.cols||{})[t]||[];a=e.attribs[t]||""}
return function(e,t,o,r){var n=new s.OpRangeIteratorForPlusOps(t),a=(0,s.opIterator)(o.ops),c=(0,s.smartOpAssembler)(),g=(0,s.bankAssembler)(o.itemType),d=(0,
s.bankIterator)(o.itemBank),u=a.hasNext()?a.next():null;for(;u;)if("="===u.opcode){e.take(u.chars);for(var p=i(n.take(u.chars,u.lines),(0,s.opString)(u),!0,r),h=(0,
s.opIterator)(p);h.hasNext();)c.append(h.next());u=a.hasNext()?a.next():null}else{for(var f=0,b=0,m="",y=(0,s.smartOpAssembler)(),C=u;C&&"="!==C.opcode;){if("+"===C.opcode){b+=C.chars;m+=(0,
s.opString)(C)}else{f+=C.chars;for(var M=(0,s.opIterator)(n.take(C.chars,C.lines));M.hasNext();)y.append(M.next())}C=a.hasNext()?a.next():null}var _=d.take(b);l(c,g,e.take(f),y.toString(),_,m,r);u=C}
c.endDocument();o.ops=c.toString();o.itemBank=g.toResult();return o}((0,s.bankIterator)(n),a,r,o)})),a=n.applyToZatext(t,e,o),c=n.applyToZatext(r,e,o)
;if(0!=n.compareZatext("simplifyChangeset",a,c).length)throw new Error("simplifyChangeset did not produce a correct changeset! gasp!");return r};function i(e,t,o,n){return(0,
r.applyZip)(e,0,t,0,(function(e,t,a){var i,l;if(e.chars<t.chars){l=e.chars;i=e.lines}else{l=t.chars;i=t.lines}e.chars-=l;e.lines-=i;t.chars-=l;t.lines-=i;e.chars<=0&&(e.opcode="")
;t.chars<=0&&(t.opcode="");a.chars=l;a.lines=i;a.opcode="=";var c={};(0,s.eachAttribNumber)(e.attribs,(function(e){var t=n.getAttrib(e);c[t[0]]=t[1]}));var g={};(0,s.eachAttribNumber)(o?(0,
r.composeAttributes)(e.attribs,t.attribs,!1,n):t.attribs,(function(e){var t=n.getAttrib(e);g[t[0]]=t[1]}));var d=[];for(var u in g)g[u]!==c[u]&&d.push([u,g[u]]);for(var u in c)u in g||d.push([u,""])
;d.sort();a.attribs=(0,s.makeAttribsString)("=",d,n)}),!1)}function l(e,t,o,r,n,l,g){for(var d=0;d<o.length&&d<n.length&&o[d]===n[d];)d++
;for(var u=0;u<o.length&&u<n.length&&o[o.length-1-u]===n[n.length-1-u];)u++;var p=Math.min(o.length,n.length);d+u>p&&(u=p-d);if("string"==typeof o){d=a.moveCommonStartToVisualUnicodeBoundary(d,o,n)
;u=a.moveCommonEndToVisualUnicodeBoundary(u,o,n)}for(var h=c(r,o,d,u),f=c(l,n,d,u),b=(0,s.opIterator)(i(h.start,f.start,!1,g));b.hasNext();)e.append(b.next());for(b=(0,
s.opIterator)(h.mid);b.hasNext();){var m=b.next();e.append({lines:m.lines,chars:m.chars,attribs:"",opcode:"-"})}for(b=(0,s.opIterator)(f.mid);b.hasNext();)e.append(b.next())
;"string"==typeof n?t.append(n.substring(d,n.length-u)):t.append(n.slice(d,n.length-u));for(b=(0,s.opIterator)(i(h.end,f.end,!1,g));b.hasNext();)e.append(b.next())}function c(e,t,o,r){
var n=new s.OpRangeIteratorForPlusOps(e);return"string"==typeof t?{start:n.takeForText(t.substring(0,o)),mid:n.takeForText(t.substring(o,t.length-r)),
end:n.takeForText(t.substring(t.length-r,t.length))}:{start:n.take(o,0),mid:n.take(t.length-o-r,0),end:n.take(r,0)}}},200:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;var r=o(1),s=o(25),n=o(2),a=o(7),i=o(23),l=o(0),c=o(13),g=o(218),d=(0,o(5).PaperIntlFactory)().F,u=(0,n.defineMessages)({unfileddoclineBreakNotdiscoverablelineBreakwithinPaper:{id:"k6wUEf",
defaultMessage:"Unfiled doc: {lineBreak} Not discoverable {lineBreak} within Paper"},foldernamelineBreakisasharedfolder:{id:"Z4b0Wt",defaultMessage:"{folderName} {lineBreak} is a shared folder"},
onlyyoucanaccess:{id:"0FR8TW",defaultMessage:"Only you can access"},foldernamelineBreakissharedwithnumMemberspluralonepersonotherpeople:{id:"FAFRgO",
defaultMessage:"{folderName} {lineBreak} is shared with {numMembers, plural, one {1 person} other {# people}}"},foldernamelineBreakissharedwithlineBreakeveryoneatteamName:{id:"afv2hQ",
defaultMessage:"{folderName} {lineBreak} is shared with {lineBreak} everyone at {teamName}"},
foldernamelineBreakissharedwithlineBreakeveryoneatteamNamelineBreakandnumExternalUserspluraloneexternaluserotherexternalusers:{id:"AGAwy5",
defaultMessage:"{folderName} {lineBreak} is shared with {lineBreak} everyone at {teamName} {lineBreak} and {numExternalUsers, plural, one {1 external user} other {# external users}}"}}),p=(0,
s.createReactClass)({displayName:"FolderIcon",mixins:[g.default],propTypes:{small:i.bool},tooltipContent:function(){if(!this.props.hasTooltip||!this.props.useDecoratedIcon)return null
;var e=this.props.folderData;if(e){var t=e.parentFolders,o=t.length?t[0].name:this.props.folderData.folder.name;if(e.folder.guestPolicy==a.FolderGuestPolicy.private){if(e.members){
var s=e.members.length;return 1==s?l.createElement("span",null,l.createElement(d,r.__assign({},u.onlyyoucanaccess))):l.createElement("span",null,l.createElement(d,r.__assign({values:{
folderName:l.createElement("strong",null,o),numMembers:s,lineBreak:l.createElement("br",null)}},u.foldernamelineBreakissharedwithnumMemberspluralonepersonotherpeople)))}
return l.createElement("span",null,l.createElement(d,r.__assign({values:{folderName:l.createElement("strong",null,o),lineBreak:l.createElement("br",null)}},u.foldernamelineBreakisasharedfolder)))}
return e.members&&0!=e.members.length?l.createElement("span",null,l.createElement(d,r.__assign({values:{folderName:l.createElement("strong",null,o),lineBreak:l.createElement("br",null),
teamName:e.teamName,numExternalUsers:e.members.length}
},u.foldernamelineBreakissharedwithlineBreakeveryoneatteamNamelineBreakandnumExternalUserspluraloneexternaluserotherexternalusers))):l.createElement("span",null,l.createElement(d,r.__assign({values:{
folderName:l.createElement("strong",null,o),lineBreak:l.createElement("br",null),teamName:e.teamName}},u.foldernamelineBreakissharedwithlineBreakeveryoneatteamName)))}
return l.createElement("span",null,l.createElement(d,r.__assign({values:{lineBreak:l.createElement("br",null)}},u.unfileddoclineBreakNotdiscoverablelineBreakwithinPaper)))},
getBasicIconName:function(e){void 0===e&&(e=!1);var t=this.props,o=t.folderData,r=t.small,s=t.useDecoratedIcon;switch(!0){case r:return e?"folder-small-archived":"folder-small";case!s:
return e?"folder-archived":"folder";case!o:return"no-folder";case o.folder.guestPolicy==a.FolderGuestPolicy.public:return e?"company-folder-archived":"company-folder"
;case o.members&&o.members.length>1:return e?"shared-folder-archived":"shared-folder";default:return e?"folder-archived":"folder"}},renderFolderIcon:function(){
var e=Boolean(this.props.folderData&&this.props.folderData.folder.isDeleted),t=this.getBasicIconName(e);return l.createElement(c.default,{name:t})},render:function(){return this.renderFolderIcon()}})
;t.default=p},233:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.FavoriteIcon=void 0;var r=o(1),s=o(3),n=o(8),a=o(2),i=o(462),l=o(10),c=o(4),g=o(14),d=o(85),u=o(0),p=o(13),h=(0,
g.MsgFactory)("composer"),f=h.defineMessages,b=h.F,m=h.IntlMessageFormat,y=f({star:{msg:"Star this doc"},unstar:{msg:"Unstar this doc"},favorite:{msg:"Favorite",
description:"Accessibility label for a doc that you have marked as a Favorite"}}),C=((0,a.defineMessages)({star:{id:"QUElrh",defaultMessage:"Star this doc"},unstar:{id:"S+5fj6",
defaultMessage:"Unstar this doc"},favorite:{id:"OYWAxs",defaultMessage:"Favorite"}}),f({star:{msg:"Star this folder"},unstar:{msg:"Unstar this folder"},favorite:{msg:"Favorite",
description:"Accessibility label for a doc that you have marked as a Favorite"}})),M=((0,a.defineMessages)({star:{id:"rGPIum",defaultMessage:"Star this folder"},unstar:{id:"+hgzfH",
defaultMessage:"Unstar this folder"},favorite:{id:"OYWAxs",defaultMessage:"Favorite"}}),f({star:{msg:"Star this project"},unstar:{msg:"Unstar this project"},favorite:{msg:"Favorite",
description:"Accessibility label for a doc that you have marked as a Favorite"}})),_=((0,a.defineMessages)({star:{id:"pWaSyP",defaultMessage:"Star this project"},unstar:{id:"STq21R",
defaultMessage:"Unstar this project"},favorite:{id:"OYWAxs",defaultMessage:"Favorite"}}),function(e){r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.updateFolderIsFavorite=function(e){t.props.folderInfo&&i.updateFolderIsFavorite(t.props.stores.folderList,t.props.folderInfo,e,(function(e){t.props.stores.mostRecentFolder.refresh()}))}
;t.updateNoteIsFavorite=function(e){t.props.localPadId&&i.updatePadIsFavorite(t.props.stores.padList,t.props.localPadId,e,(function(e){t.props.onSave&&t.props.onSave(e)
;t.props.stores.mostRecentFolder.refresh()}))};t.handleClick=function(e){e.stopPropagation();e.preventDefault();var o=!t.props.isFavorite;c.IntentionEvent.FavoriteItem.track({type:t.props.itemType,
isFavorite:o,context:t.props.source});if("note"==t.props.itemType)t.updateNoteIsFavorite(o);else{
if("folder"!=t.props.itemType)throw new Error("Invalid item type for favorite button "+t.props.itemType);t.updateFolderIsFavorite(o)}};return t}t.prototype.checkProps=function(){
var e=this.props.itemType;d.default.checkArgument("folder"==e||"note"==e,"Invalid item type for favorite button "+e)
;"note"==e?d.default.checkArgument(!this.props.folderInfo,"Note favorite button cannot have folderInfo"):"folder"==e&&d.default.checkArgument(this.props.folderInfo&&!this.props.localPadId,"Folder favorite button needs folderInfo but not localPadId")
};t.prototype.render=function(){this.checkProps();if(!n.default.isSignedIn())return null;var e=this.props,t=e.className,o=e.inline,r=e.isFavorite,a=y
;"folder"==this.props.itemType&&(a=this.props.folderInfo.isProject?M:C);var i=new m(r?a.unstar:a.star,n.default.userLocale).format(),c=s(t,{"hp-favorite-button":!0,"hp-favorite-button-favorited":r,
"selenium-favorite-button":!0}),g=this.props.iconName;g||(g=o?"star-inline-filled":"star-filled");return u.createElement(l.default,{className:c,selected:r,ref:"favoriteButton",
"track-title":r?"Unfavorite":"Favorite",tooltip:u.createElement("span",{className:"notranslate"},i),onClick:this.handleClick,"aria-label":i},u.createElement(p.default,{name:g}))}
;t.displayName="FavoriteButton";return t}(u.PureComponent));t.default=_;t.FavoriteIcon=function(e){var t,o=e.inline,s=e.isFavorite;t=o?"star-inline-filled":"star-filled"
;var n=u.createElement(b,r.__assign({},y.favorite));return u.createElement("span",{className:"hp-favorite-icon"},u.createElement(p.default,{name:t}),s?u.createElement("span",{
className:"ax-visually-hidden"},n):null)}},250:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.sortEntries=t.constructFolderListEntry=t.constructPadListEntry=t.getNumPadEntries=t.dateSortValue=void 0;var r=o(125),s=o(8),n=o(6),a=o(32),i=o(597),l=o(7);t.dateSortValue=function(e){
return e?new Date(e.toString()).getTime():0};t.getNumPadEntries=function(e){return e.isLoaded&&null!==e.entries?e.entries.filter((function(e){return"pad"==e.type})).length:0}
;t.constructPadListEntry=function(e,t){return{type:"pad",pad:e,title:a.padTitleOrDefault(e.title,s.default.userLocale),id:{type:"doc",id:e.localPadId},sortValue:t}}
;t.constructFolderListEntry=function(e,t){return{type:"folder",folderData:e,title:e.folder.name,id:{type:"folder",id:e.folder.encryptedId},sortValue:t}};t.sortEntries=function(e,t){
var o=i.alphanumericSortBy(e,!1,(function(e){return e.title.replace(r.REGEX_EMOJI_GLOBAL,"").trim()}));switch(t){case l.ListViewFilter.recents:case l.ListViewFilter.unfiledOwnedByMe:
case l.ListViewFilter.createdByMe:case l.ListViewFilter.ownedByMe:case l.ListViewFilter.archived:case l.ListViewFilter.recentFavorites:case l.ListViewFilter.sharedWithMe:
case l.ListViewFilter.allRecents:case l.ListViewFilter.trashed:return n.sortBy(o.reverse(),"sortValue").reverse();case l.ListViewFilter.alphabetical:case l.ListViewFilter.alphabeticalFavorites:
return o;case l.ListViewFilter.member:default:return n.sortBy(o,"sortValue")}}},271:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.OptionSeparator=t.Option=t.Select=void 0
;var r=o(1),s=o(6),n=o(3),a=o(11),i=o(10),l=o(68),c=o(170),g=o(69),d=o(85),u=o(0),p=o(13),h=o(4),f=function(e){r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this
;t.bindChildSelection=function(e){return u.cloneElement(e,{onClick:function(o){e.props.onClick&&e.props.onClick(o);t.menuButton&&t.menuButton.close();t.props.onSelected(o,e)}})};return t}
t.prototype.render=function(){
var e=this,t=this.props,o=t.className,r=t.primary,n=t.tooltip,a=t.tooltipAbove,c=t.left,h=t.center,f=t.size,b=t.tabIndex,m=u.Children.map(this.props.children,this.bindChildSelection)
;d.default.checkArgument(m.length>0);var y=s.find(m,(function(e){return e.props.selected}))||s.find(m,(function(e){return e.props.isDefault}))
;d.default.checkArgument(!!y,"No selected child of className %s",o);return u.createElement("div",{className:"hp-select ".concat(o||"")},u.createElement(g.default,{
"track-title":this.props["track-title"]||m,lazyRender:this.props.lazyRender,ref:function(t){return e.menuButton=t}},u.createElement(i.default,{primary:r,secondary:!r,"disable-auto-track":!0,size:f,
tooltipAbove:a,tooltip:n,tabIndex:b},u.cloneElement(y,{onClick:function(){}}),u.createElement(p.default,{name:"caret"})),u.createElement(l.default,{left:c,center:h},u.createElement("ul",{
ref:"overflow",className:"hp-select-menu-overflow"},m))))};t.displayName="Select";return t=r.__decorate([a.default,h.trackContextDecorator],t)}(u.PureComponent);t.Select=f;var b=function(e){
r.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.getTrackContext=function(){};t.prototype.render=function(){
var e=this.props,t=e.selected,o=e.value,r=e.logAndDisable,s=e.children,a=e["track-title"],i=e.onClick,l=n("hp-option",{"hp-option-selected":t});return u.createElement("li",{className:l,"data-value":o,
"data-track":"Select List Item","data-track-context":this.getTrackContext(),"data-track-category":"ui","data-track-title":a||o,"data-disabled":!!r,"data-mixpanel-type":r,onClick:function(){
return!!i&&i(o)}},s)};t.displayName="Option";return t=r.__decorate([h.trackContextDecorator],t)}(u.PureComponent);t.Option=b;t.OptionSeparator=function(){return u.createElement(c.HpMenuSeparator,null)
};t.OptionSeparator.displayName="OptionSeparator"},272:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(6),n=o(3),a=o(2),i=o(7),l=o(138),c=o(0),g=o(13),d=(0,
o(5).PaperIntlFactory)().F,u=(0,a.defineMessages)({membersofthisfolder:{id:"s2RF0x",defaultMessage:"Members of this folder"},visibletomembersofthisfolder:{id:"Bw3OOw",
defaultMessage:"Visible to members of this folder"},visibletoonlyme:{id:"FkaJI1",defaultMessage:"Visible to only me"},onlyme:{id:"kklGm5",defaultMessage:"Only me"},visibletoeveryoneatteamName:{
id:"q6DpB1",defaultMessage:"Visible to everyone at {teamName}"},everyoneatteamName:{id:"EuZSQd",defaultMessage:"Everyone at {teamName}"},visibletoeveryoneatteamNameandexternalMemberName:{id:"/aiqaS",
defaultMessage:"Visible to everyone at {teamName} and {externalMemberName}"},everyoneatteamNameandexternalMemberName:{id:"jPdePZ",defaultMessage:"Everyone at {teamName} and {externalMemberName}"},
visibletoeveryoneatteamNamemembersCountpluraloneandexternalmemberotherandexternalmembers:{id:"e4Z7GQ",
defaultMessage:"Visible to everyone at {teamName} {membersCount, plural,\n                one {and # external member}\n                other {and # external members}\n              }"},
everyoneatteamNamemembersCountpluraloneandexternalmemberotherandexternalmembers:{id:"jxjRED",
defaultMessage:"Everyone at {teamName} {membersCount, plural,\n                one {and # external member}\n                other {and # external members}\n              }"},
visibletomembersCountpluralonepersonotherpeople:{id:"/Fqc3T",defaultMessage:"Visible to {membersCount, plural,\n                one {# person}\n                other {# people}\n              }"},
memberscountpluralonepersonotherpeople:{id:"dMwuuL",defaultMessage:"{membersCount, plural,\n                one {# person}\n                other {# people}\n              }"},visibletomemberName:{
id:"RNLaa3",defaultMessage:"Visible to {member1Name}"},visibletomemberNameandmemberName:{id:"KWo23d",defaultMessage:"Visible to {member1Name} and {member2Name}"},memberNameandmemberName:{id:"rq0V03",
defaultMessage:"{member1Name} and {member2Name}"},visibletomemberNamememberNameandmemberName:{id:"jNQiLn",defaultMessage:"Visible to {member1Name}, {member2Name}, and {member3Name}"},
memberNamememberNameandmemberName:{id:"YaVrHC",defaultMessage:"{member1Name}, {member2Name}, and {member3Name}"},visibletomemberNamememberNameandnumOthersBeyondpluraloneotherotherothers:{id:"07apcI",
defaultMessage:"Visible to {member1Name}, {member2Name}, and {numOthersBeyond2, plural,\n                  one {1 other}\n                  other {# others}\n                }"},
memberNamememberNameandnumOthersBeyondpluraloneotherotherothers:{id:"YForW5",
defaultMessage:"{member1Name}, {member2Name}, and {numOthersBeyond2, plural,\n                  one {1 other}\n                  other {# others}\n                }"},unknownaudience:{id:"whErZG",
defaultMessage:"Unknown audience"}}),p=function(e){r.__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.render=function(){
var e,t,o,s,a=this.props.folderData,l=a.teamName,p=a.folder,h=a.members;this.props.className&&(e=n(this.props.className));if(p.guestPolicy==i.FolderGuestPolicy.public){var f=[]
;h&&(f=h.filter((function(e){return e.encryptedDomainId!=p.encryptedDomainId})));t="acl-building";o=this.renderTeamFolderMessage(f,l)}else if(h)if(1==h.length){t="acl-lock"
;o=this.props.includeVisibleTo?c.createElement(d,r.__assign({},u.visibletoonlyme)):c.createElement(d,r.__assign({},u.onlyme))}else{t="acl-shared";o=this.renderPrivateFolderMessage(h)}else{
t="acl-shared";o=c.createElement(d,r.__assign({},u.membersofthisfolder));this.props.includeVisibleTo&&(o=c.createElement(d,r.__assign({},u.visibletomembersofthisfolder)))}
this.props.showIcon&&(s=c.createElement(g.default,{name:t}));return c.createElement("p",{className:e},s,o)};t.prototype.renderTeamFolderMessage=function(e,t){
return 0==e.length?this.props.includeVisibleTo?c.createElement(d,r.__assign({values:{teamName:t}},u.visibletoeveryoneatteamName)):c.createElement(d,r.__assign({values:{teamName:t}
},u.everyoneatteamName)):1==e.length&&this.props.useNames?this.props.includeVisibleTo?c.createElement(d,r.__assign({values:{teamName:t,externalMemberName:e[0].name}
},u.visibletoeveryoneatteamNameandexternalMemberName)):c.createElement(d,r.__assign({values:{teamName:t,externalMemberName:e[0].name}
},u.everyoneatteamNameandexternalMemberName)):this.props.includeVisibleTo?c.createElement(d,r.__assign({values:{teamName:t,membersCount:e.length}
},u.visibletoeveryoneatteamNamemembersCountpluraloneandexternalmemberotherandexternalmembers)):c.createElement(d,r.__assign({values:{teamName:t,membersCount:e.length}
},u.everyoneatteamNamemembersCountpluraloneandexternalmemberotherandexternalmembers))};t.prototype.renderPrivateFolderMessage=function(e){
if(!this.props.useNames)return this.props.includeVisibleTo?c.createElement(d,r.__assign({values:{membersCount:e.length}
},u.visibletomembersCountpluralonepersonotherpeople)):c.createElement(d,r.__assign({values:{membersCount:e.length}},u.memberscountpluralonepersonotherpeople));var t=s.map(e,"name"),o={
member1Name:t[0],member2Name:t[1],numOthersBeyond2:t.length-2,member3Name:t[2]};return 1==e.length?this.props.includeVisibleTo?c.createElement(d,r.__assign({values:o
},u.visibletomemberName)):t[0]:2==e.length?this.props.includeVisibleTo?c.createElement(d,r.__assign({values:o},u.visibletomemberNameandmemberName)):c.createElement(d,r.__assign({values:o
},u.memberNameandmemberName)):3==e.length?this.props.includeVisibleTo?c.createElement(d,r.__assign({values:o},u.visibletomemberNamememberNameandmemberName)):c.createElement(d,r.__assign({values:o
},u.memberNamememberNameandmemberName)):e.length>3?this.props.includeVisibleTo?c.createElement(d,r.__assign({values:o
},u.visibletomemberNamememberNameandnumOthersBeyondpluraloneotherotherothers)):c.createElement(d,r.__assign({values:o
},u.memberNamememberNameandnumOthersBeyondpluraloneotherotherothers)):c.createElement(d,r.__assign({},u.unknownaudience))};t.displayName="FolderPermissionDescription"
;return t=r.__decorate([l.default],t)}(c.Component);t.default=p},317:function(e,t,o){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS-IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0});t.ActiveMonitor=t.CollabClient=t.RequestType=t.CollabClientType=void 0
;var r,s=o(1),n=o(6),a=o(7),i=o(1625),l=o(388),c=o(7),g=o(59),d=o(246),u=o(38),p=o(190),h=o(1628),f=o(7),b=o(892),m=o(41),y=o(4),C=o(61),M=o(17),_=3*m.Time.SECOND,S=function(){function e(){}
e.ACCEPT_COMMIT="ACCEPT_COMMIT";e.CLIENT_MESSAGE="CLIENT_MESSAGE";e.CLIENT_READY_ACK="CLIENT_READY_ACK";e.DISCONNECT_REASON="DISCONNECT_REASON"
;e.DONE_SENDING_INITIAL_NEW_CHANGES="DONE_SENDING_INITIAL_NEW_CHANGES";e.EDITOR_NEWINFO="EDITOR_NEWINFO";e.FILESYSTEM_NEWINFO="FILESYSTEM_NEWINFO";e.FOLDER_NEWINFO="FOLDER_NEWINFO"
;e.FOLDER_REMOVEPAD="FOLDER_REMOVEPAD";e.MIGRATION_LOCK_NEWINFO="MIGRATION_LOCK_NEWINFO";e.MODERATION_MESSAGE="MODERATION_MESSAGE";e.NEW_CHANGES="NEW_CHANGES";e.NEW_CHANGES_BATCH="NEW_CHANGES_BATCH"
;e.NEW_CHANGES_COMPOSITION="NEW_CHANGES_COMPOSITION";e.NO_COMMIT_PENDING="NO_COMMIT_PENDING";e.OBJECTS_UPDATED="OBJECTS_UPDATED";e.OBJECT_REQUEST_FAILED="OBJECT_REQUEST_FAILED"
;e.PAD_PERMISSION="PAD_PERMISSION";e.PASS_NEWINFO="PASS_NEWINFO";e.PLANNED_RESTART="PLANNED_RESTART";e.RATE_LIMITED="RATE_LIMITED";e.SERVER_MESSAGE="SERVER_MESSAGE";e.SOCKET_CLOSED="SOCKET_CLOSED"
;e.SWITCH_TO_READONLY="SWITCH_TO_READONLY";e.SWITCH_TO_WRITE="SWITCH_TO_WRITE";e.USER_KILL="USER_KILL";e.USER_LEAVE="USER_LEAVE";e.USER_NEWINFO="USER_NEWINFO"
;e.WARN_UPGRADE_NOT_DISPLAYED_CORRECTLY="WARN_UPGRADE_NOT_DISPLAYED_CORRECTLY";e.WARN_UPGRADE_SYNC_IMPOSSIBLE="WARN_UPGRADE_SYNC_IMPOSSIBLE";e.PAD_ARCHIVED="PAD_ARCHIVED"
;e.PAD_UNARCHIVED="PAD_UNARCHIVED";e.PAD_OWNER="PAD_OWNER";e.SERVER_DB_STATUS="SERVER_DB_STATUS";e.PAD_TITLE="padtitle";e.LONE_CARET_BROADCAST="caret";return e}();t.CollabClientType=S;!function(e){
e[e.ClientReady=1]="ClientReady";e[e.Changeset=2]="Changeset";e[e.ObjectStore=3]="ObjectStore"}(r=t.RequestType||(t.RequestType={}));var v=function(e){s.__extends(t,e);function t(t,o,s,n,a,i,c,g){
var d=e.call(this)||this;d.serverDBStatusStore=i;d.clientVarsSaver=c;d.handlers={};d.clientCreateTime=0;d.initialSocketOpenTime=0;d.clientReadySeq=1;d.hasEstablishedClientReady=!1;d.hasCaughtUp=!1
;d.requestTypeOut=null;d.isChangesetPending=!1;d.lastRequestTypeOut=null;d.caretMessage=null;d.stateMessage=null;d.pendingObjectRequestId=null;d.lastRequestTime=0;d.lastCommitTime=0
;d.numCommitAttemptsSinceLastSuccessfulCommit=0;d.receivedModerationMessage=!1;d.numSlowCommitsInARow=0;d.disposed=!1;d.queueSendTimeout=null;d.queueSendNextTime=0;d.initializedWithMissedChanges=!1
;d.myUserInfo=t;d.changesetTracker=o;d.collabClientVars=s;d.clientCreateTime=Date.now();d.yetToBeCreatedParams=s.missedChanges&&s.missedChanges.yetToBeCreatedParams;d.objectStore=n
;d.objectStore.setNewOperationCallback((function(){d.saveToDiskSoon();d.queueSend(0)}));d.clientId="";d.rev=d.collabClientVars.collabBaseState.rev;d.padId=d.collabClientVars.padId
;d.encryptedDomainId=d.collabClientVars.encryptedDomainId;d.debug=g||new l.Debug;d.installHandlers();d.useWebSocket_=d.collabClientVars.useCollabService;d.createSocket(a)
;d.activeMonitor=new E(d,d.socket);d.changesetTracker.setUserChangeNotificationCallback((function(){d.saveToDiskSoon();d.queueSend(0)}))
;d.dmesg("initialize with collab client vars, rev = "+s.collabBaseState.rev+", base text length = "+s.collabBaseState.zatext.text[0].length)
;d.dmesg("root length of padclientvars on page (maybe not this doc): "+window.rootTextLengthForDebugging);if(s.missedChanges){d.dmesg("initialize with missed changes")
;d.initializedWithMissedChanges=!0;if(s.missedChanges.clientId){d.clientId=s.missedChanges.clientId;d.dmesg("initialize with clientId = "+d.clientId)}d.clientReadySeq=s.missedChanges.clientReadySeq
;if(s.missedChanges.committedChangeset){d.requestTypeOut=r.Changeset;d.isChangesetPending=!0;d.dmesg("initialize with committedChangeset")}}
d.serverDBStatusStore&&d.serverDBStatusStore.addEventListener(d.handleServerDBStatusChange.bind(d));return d}t.prototype.createWebSocket=function(e){var t=this;this.dmesg("Using WebSocket")
;if(!h.ReconnectingWebSocket.canUseWebSockets())throw new Error("Can't use WebSockets")
;this.socket=new h.ReconnectingWebSocket(this.debug,this.trigger,this.debug.wrapRecordingErrors("socket.onmessage",this.handleEtherpadWebSocketMessageFromServer,this),this.onSocketOpen.bind(this),this.onSocketClosed.bind(this),(function(){
return t.padId}),(function(){return t.encryptedDomainId}),(function(){return t.getTrackingInfo()}),e,!!this.yetToBeCreatedParams)};t.prototype.createEtherpadWebSocket=function(e){var t=this
;this.dmesg("Using EtherpadWebSocket")
;this.socket=new h.ReconnectingEtherpadWebSocket(this.debug,this.trigger,this.debug.wrapRecordingErrors("socket.onmessage",this.handleEtherpadWebSocketMessageFromServer,this),this.onSocketOpen.bind(this),this.onSocketClosed.bind(this),(function(){
return t.padId}),(function(){return t.encryptedDomainId}),(function(){return t.getTrackingInfo()}),e,!!this.yetToBeCreatedParams)};t.prototype.createSocket=function(e){
this.useWebSocket&&h.ReconnectingWebSocket.canUseWebSockets()?this.createWebSocket(e):this.createEtherpadWebSocket(e)};t.prototype.initializeChangesetTracker=function(e,t,o,r){
if(t!==this.changesetTracker.getApool())throw new Error("D: the pools need to be the same");this.changesetTracker.initializeBaseAttributedText(e);if(o){this.changesetTracker.initializeUserChangeset(o)
;this.prepareCommitMessage()}r&&this.changesetTracker.initializeUserChangeset(r)};t.prototype.saveToDiskSoon=function(){this.clientVarsSaver&&this.clientVarsSaver.saveSoon()}
;t.prototype.saveToDiskAndThen=function(e){this.clientVarsSaver?this.clientVarsSaver.saveAsap(e):e()};t.prototype.dmesg=function(e){
this.debug.dmesg("CollabClient (rev=".concat(this.rev,"): ").concat(e))};t.prototype.handleServerDBStatusChange=function(e){if(this.socket)if(e===f.ServerDBStatus.READ_ONLY){
this.socket.setServerDBReadOnly();this.socket.setReadOnly()}else if(e===f.ServerDBStatus.READ_WRITE){this.socket.setServerDBReadWrite();this.socket.setReadWrite()}};t.prototype.dispose=function(){
this.disposed=!0;this.serverDBStatusStore&&this.serverDBStatusStore.removeEventListener(this.handleServerDBStatusChange);this.socket.abandonConnection("disposing collab client",!0)
;if(this.objectStore){this.objectStore.dispose();this.objectStore=null}if(this.activeMonitor){this.activeMonitor.dispose();this.activeMonitor=null}if(this.clientVarsSaver){
this.clientVarsSaver.dispose();this.clientVarsSaver=void 0}this.handlers=null;this.socket=null;this.changesetTracker=null;if(this.queueSendTimeout){clearTimeout(this.queueSendTimeout)
;this.queueSendTimeout=null}};t.prototype.handleMessageToSend=function(){var e=this,t=Date.now();if(this.socket.channelState!==a.ChannelState.DISCONNECTED){this.trigger("user-changes",void 0)
;this.trigger("has-uncommitted-changes",void 0);if(this.socket.channelState!==a.ChannelState.CONNECTED||this.socket.isReadOnly)this.queueSend(_);else if(this.requestTypeOut){
if(t-this.lastRequestTime>b.SLOW_COMMIT_TIMEOUT&&t-this.socket.lastChannelStateConnectedTime>b.SLOW_COMMIT_TIMEOUT){this.numSlowCommitsInARow++;if(this.numSlowCommitsInARow>=3){
this.dmesg("slow commit: disconnecting, request type = "+r[this.requestTypeOut]);this.socket.disconnect("slowcommit (timeout) ".concat(r[this.requestTypeOut]," (3 in a row)"))
}else this.socket.forceReconnect("slow commit");return}this.queueSend(_)}else if(this.numCommitAttemptsSinceLastSuccessfulCommit>4){
this.dmesg("slow commit (numCommitAttemptsSinceLastSuccessfulCommit too long ago)");this.socket.abandonConnection("slowcommit (numCommitAttempts)")}else if(this.padId){
if(this.hasEstablishedClientReady)if(this.hasCaughtUp)if(!this.objectStore.getExecutingOperation()||this.changesetTracker.hasUncommittedChanges()&&this.lastRequestTypeOut!=r.Changeset){
var o=this.lastCommitTime+200;if(t<o){this.dmesg("commit too recent, delaying");this.queueSend(o-t);return}if(!this.prepareCommitMessage()){this.dmesg("no commit message prepared");return}
this.dmesg("performing commit");this.lastCommitTime=t;this.numCommitAttemptsSinceLastSuccessfulCommit++;this.requestTypeOut=r.Changeset;this.isChangesetPending=!0
;var s=i.encodeUserChangesMessage(this.stateMessage);this.saveToDiskAndThen((function(){e.socket.sendMessage(s,"USER_CHANGES",!0)}));this.trigger("commit-performed",void 0);this.queueSend(_)}else{
this.dmesg("performing object store request");this.sendObjectRequest(this.objectStore.getExecutingOperation());this.requestTypeOut=r.ObjectStore;this.queueSend(_)}else{
this.dmesg("awaiting the DONE_SENDING_USER_CHANGES message still");this.queueSend(_)}else this.sendClientReady();this.lastRequestTypeOut=this.requestTypeOut;this.lastRequestTime=t}else{
this.dmesg("do not yet have padId, so re-queueing");this.queueSend(_)}}};t.prototype.sendClientReady=function(){var e=this;1==this.clientReadySeq&&y.track("client-ready-send-latency",{
"time-to-send":Date.now()-this.initialSocketOpenTime});this.clientReadySeq++;this.dmesg("sending CLIENT_READY (clientReadySeq=".concat(this.clientReadySeq,")"));var t=this.yetToBeCreatedParams?{
localPadId:this.padId,localPadIdSignature:this.yetToBeCreatedParams.localPadIdSignature,folderId:this.yetToBeCreatedParams.folderId,isCloudDoc:this.yetToBeCreatedParams.isCloudDoc}:void 0,o={
type:"CLIENT_READY",roomType:"padpage",roomName:"padpage/".concat(this.padId),clientId:this.clientId,secureUserId:this.myUserInfo.secureUserId,clientReadySeq:this.clientReadySeq,createPadParams:t,
data:{lastRev:this.rev,lastObjectStoreRev:this.objectStore.getObjectStoreRev(),isCommitPending:this.isChangesetPending,aceVersion:p.LATEST_VERSION,preferredColorId:this.myUserInfo.colorId}}
;t&&this.socket.padIsNew();if(o.data.isCommitPending){this.lastCommitTime=Date.now()-1;this.requestTypeOut=r.Changeset}else this.requestTypeOut=r.ClientReady;var s=i.encodeClientReadyMessage(o)
;this.saveToDiskAndThen((function(){e.socket.sendMessage(s,"CLIENT_READY",!0)}))};t.prototype.handleDoneSendingInitialNewChangesMessage=function(e){this.hasCaughtUp=!0;this.queueSend(0)
;this.socket.resetErrorCounter(a.BootConnectionReason.ClientReadyFailed);this.trigger("caught-up",[e.headRev])};t.prototype.handleClientReadyAck=function(e){this.clientId=e.clientId
;if(this.yetToBeCreatedParams){this.yetToBeCreatedParams=null;this.trigger("collab-pad-creation-ack",void 0)}this.hasEstablishedClientReady=!0;this.dmesg("got clientId ".concat(this.clientId))
;this.requestTypeOut==r.ClientReady&&(this.requestTypeOut=null);y.track("client-ready-ack-latency",{"time-to-ack":Date.now()-this.lastRequestTime,"client-ready-seq":this.clientReadySeq})
;this.queueSend(0)};t.prototype.onSocketOpen=function(){if(!this.initialSocketOpenTime){this.initialSocketOpenTime=Date.now();y.track("client-initial-socket-open-latency",{
"time-to-open-socket":this.initialSocketOpenTime-this.clientCreateTime})}this.hasEstablishedClientReady=!1;this.hasCaughtUp=!1;this.pendingObjectRequestId=null;this.requestTypeOut=null
;this.queueSend(0)};t.prototype.onSocketClosed=function(){this.runHandlers(S.SOCKET_CLOSED,{type:S.SOCKET_CLOSED})};t.prototype.queueSend=function(e){var t=this,o=+Date.now()
;if(!this.queueSendTimeout||o+e<this.queueSendNextTime){this.queueSendNextTime=o+e;this.queueSendTimeout&&clearTimeout(this.queueSendTimeout);this.queueSendTimeout=setTimeout((function(){
if(!t.disposed){t.queueSendTimeout=null;t.debug.wrapRecordingErrors("handleMessageToSend",t.handleMessageToSend,t)()}}),e)}};t.prototype.prepareCommitMessage=function(){
var e=this,t=this.changesetTracker.prepareUserChangeset(),o=null;"edit"==this.myUserInfo.permission&&t.caret&&(o={type:"caret",caret:t.caret,baseRev:this.rev});if(!t.changeset){if(!o)return!1
;if(!this.caretMessage||!n.isEqual(this.caretMessage.caret,o.caret)){this.dmesg("sending caret message on its own");this.socket.sendMessage(i.encodeLoneCaretMessage({type:"CLIENT_MESSAGE",payload:o
}),"caret",!0);this.caretMessage=o}return!1}window.DEVTOOLS_CHANGESET_TRACKING&&console.log("%c[changeset-send]%c "+t.changeset,"color: blue","");M.default.error.silentTryCatch((function(){
var o=e.changesetTracker.baseZatext.text[0].length,r=t.changeset.substring(0,80).split("<")[0].split(">")[0];e.dmesg("preparing user changes; text length = "+o+", csStart = "+r)}));this.caretMessage=o
;this.stateMessage={type:"USER_CHANGES",baseRev:this.rev,changeset:t.changeset,apool:t.apool,caretMessage:o};return!0};t.prototype.sendObjectRequest=function(e){
if(null!==this.pendingObjectRequestId)throw new Error("attempt to send second object request while first request pending");var t={type:c.CollabMessageType.ObjectRequest,payload:e}
;this.socket.sendMessage(t,"OBJECT_REQUEST-".concat(e.path));this.pendingObjectRequestId=e.operationId;this.trigger("has-uncommitted-changes",void 0)};t.prototype.setPadId=function(e,t,o,r){
this.dmesg("setting pad ID to "+e);this.padId=e;this.encryptedDomainId=t;if(o){this.yetToBeCreatedParams={localPadIdSignature:o.localPadIdSignature}
;o.folderId&&(this.yetToBeCreatedParams.folderId=o.folderId);this.yetToBeCreatedParams.isCloudDoc=r}this.socket.setPadId();this.queueSend(0)};t.prototype.addHandler=function(e,t){
this.handlers[e]=this.handlers[e]||[];this.handlers[e].push(t)};t.prototype.runHandlers=function(e,t){for(var o=0,r=this.handlers&&this.handlers[e]||[];o<r.length;o++){var s=r[o];try{s(t)}catch(e){
M.default.error.logException(e)}}};t.prototype.handleEtherpadWebSocketMessageFromServer=function(e){if(this.socket.socket&&e.data){var t=JSON.parse(e.data),o=t.data;if("COLLABROOM"==t.type){
this.dmesg("got message of type ".concat(o.type));this.runHandlers(o.type,o)}}};t.prototype.installHandlers=function(){var e=this
;this.addHandler(S.ACCEPT_COMMIT,this.handleAcceptCommitMessage.bind(this));this.addHandler(S.CLIENT_MESSAGE,this.handleClientMessage.bind(this))
;this.addHandler(S.CLIENT_READY_ACK,this.handleClientReadyAck.bind(this));this.addHandler(S.DISCONNECT_REASON,(function(t){var o=t.reason;e.socket.handleDisconnectMessage(o,e)
;if(o==c.BootConnectionReason.SwitchToComet||o==c.BootConnectionReason.SwitchToWebSockets){e.useWebSocket_=o==c.BootConnectionReason.SwitchToWebSockets;e.createSocket(null)}}))
;this.addHandler(S.DONE_SENDING_INITIAL_NEW_CHANGES,this.handleDoneSendingInitialNewChangesMessage.bind(this));this.addHandler(S.FOLDER_NEWINFO,(function(t){
return e.trigger("folder-change",t.userInfo)}));this.addHandler(S.FILESYSTEM_NEWINFO,this.handleNewFilesystemInfo.bind(this));this.addHandler(S.FOLDER_REMOVEPAD,(function(t){
return e.trigger("folder-change",null)}));this.addHandler(S.MIGRATION_LOCK_NEWINFO,this.handleMigrationLockMessage.bind(this))
;this.addHandler(S.MODERATION_MESSAGE,this.handleModerationMessage.bind(this));this.addHandler(S.NEW_CHANGES,this.handleNewChangesMessage.bind(this))
;this.addHandler(S.NEW_CHANGES_BATCH,this.handleNewChangesBatchMessage.bind(this));this.addHandler(S.NEW_CHANGES_COMPOSITION,this.handleNewChangesCompositionMessage.bind(this))
;this.addHandler(S.NO_COMMIT_PENDING,this.handleNoCommitPendingMessage.bind(this));this.addHandler(S.OBJECT_REQUEST_FAILED,this.handleObjectRequestFailed.bind(this))
;this.addHandler(S.OBJECTS_UPDATED,this.handleObjectUpdate.bind(this));this.addHandler(S.PASS_NEWINFO,this.handleNewPassInfo.bind(this))
;this.addHandler(S.PLANNED_RESTART,this.handlePlannedRestartMessage.bind(this));this.addHandler(S.RATE_LIMITED,this.handleRateLimit.bind(this));this.addHandler(S.SWITCH_TO_READONLY,(function(t){
return e.socket.handleSwitchToReadOnlyMessage()}));this.addHandler(S.SWITCH_TO_WRITE,(function(t){return e.socket.handleSwitchToWriteMessage()}));this.addHandler(S.SERVER_MESSAGE,(function(t){
return e.trigger("server-message",t.payload)}));this.addHandler(S.PAD_PERMISSION,this.handlePadPermissionMessage.bind(this));this.addHandler(S.WARN_UPGRADE_NOT_DISPLAYED_CORRECTLY,(function(t){
return e.trigger("warn-upgrade-not-displayed-correctly",void 0)}));this.addHandler(S.WARN_UPGRADE_SYNC_IMPOSSIBLE,(function(t){return e.trigger("warn-upgrade-sync-impossible",void 0)}))
;this.addHandler(S.PAD_ARCHIVED,(function(t){return e.trigger("pad-archived",t.payload)}));this.addHandler(S.PAD_UNARCHIVED,(function(){return e.trigger("pad-unarchived",void 0)}))
;this.addHandler(S.PAD_OWNER,this.handlePadOwnerChange.bind(this));this.addHandler(S.PAD_TITLE,this.handlePadTitleMessage.bind(this))
;this.addHandler(S.LONE_CARET_BROADCAST,this.handleLoneCaretBroadcastMessage.bind(this));this.serverDBStatusStore&&this.addHandler(S.SERVER_DB_STATUS,(function(t){
return e.socket.handleServerDBStatusMessage(t.status,e.serverDBStatusStore.update.bind(e.serverDBStatusStore))}))};t.prototype.handlePlannedRestartMessage=function(e){
this.socket.handlePlannedRestartMessage()};t.prototype.handleRateLimit=function(e){this.socket.handleRateLimit()};t.prototype.handleNewChangesMessage=function(e){
this.handleNewChangesGeneric(e.newRev-1,e.newRev,[e.changeset],e.apool,e.caretMessage)};t.prototype.handleNewChangesBatchMessage=function(e){
e.changes.length===e.newRev-e.oldRev?this.handleNewChangesGeneric(e.oldRev,e.newRev,n.map(e.changes,"changeset"),e.apool,e.caretMessage):this.socket.abandonConnection("changes.length doesn't agree for NEW_CHANGES_BATCH")
};t.prototype.handleNewChangesCompositionMessage=function(e){this.handleNewChangesGeneric(e.oldRev,e.newRev,[e.changeset],e.apool,e.caretMessage)}
;t.prototype.handleNewChangesGeneric=function(e,t,o,r,s){if(this.rev===e){this.rev=t;window.DEVTOOLS_CHANGESET_TRACKING&&console.log("%c[changesets-received]%c "+JSON.stringify(o),"color: red","")
;try{this.changesetTracker.applyChangesToBase(o,r)}catch(e){M.default.error.logException(e);this.socket.abandonConnection("applyChangesToBase failed");return}
s&&this.changesetTracker.updateOtherUserCaretPos(s);this.saveToDiskSoon();this.trigger("new-changes",void 0)}else this.socket.abandonConnection("bad message revision on NEW_CHANGES")}
;t.prototype.handleAcceptCommitMessage=function(e){var t,o;if(this.requestTypeOut===r.Changeset){this.requestTypeOut=null;this.isChangesetPending=!1;if(100*u.smartRandom()<1){
var s=Date.now()-this.lastCommitTime;s<5e3&&y.track("commit-latency",{"time-to-accept":s})}var n=e.newRev;if(n==this.rev+1){this.rev=n;try{
this.changesetTracker.applyPreparedChangesetToBase(null===(t=e.appliedChangeset)||void 0===t?void 0:t.changeset,null===(o=e.appliedChangeset)||void 0===o?void 0:o.apool)}catch(e){
M.default.error.logException(e);this.socket.abandonConnection("applyPreparedChangesToBase failed");return}this.numCommitAttemptsSinceLastSuccessfulCommit=0;this.numSlowCommitsInARow=0
;this.saveToDiskSoon();this.socket.resetErrorCounter(a.BootConnectionReason.CommitFailed);this.trigger("ack-any-commit",void 0);this.trigger("commit-accepted",void 0)
;this.trigger("has-uncommitted-changes",void 0);this.queueSend(0)}else this.socket.abandonConnection("bad message revision on ACCEPT_COMMIT")
}else this.socket.abandonConnection("got ACCEPT_COMMIT but request type out is ".concat(r[this.requestTypeOut]))};t.prototype.handleNoCommitPendingMessage=function(e){
if(this.requestTypeOut===r.Changeset){this.isChangesetPending=!1;this.requestTypeOut=null;this.changesetTracker.unprepare();this.queueSend(0)
}else this.socket.abandonConnection("got NO_COMMIT_PENDING but requestType is ".concat(r[this.requestTypeOut]))};t.prototype.handleObjectUpdate=function(e){
if(this.pendingObjectRequestId&&e.userInfo&&e.userInfo.operationId===this.pendingObjectRequestId){this.dmesg("object update is for our own: ".concat(this.pendingObjectRequestId))
;this.numSlowCommitsInARow=0;this.pendingObjectRequestId=null;this.requestTypeOut=null;this.queueSend(0);this.socket.resetErrorCounter(a.BootConnectionReason.ObjectRequestFailed)
}else this.dmesg("object update is not our own; object id of message is "+(e.userInfo&&e.userInfo.operationId)+" and ours is ".concat(this.pendingObjectRequestId))
;this.objectStore.handleServerMessage(e.userInfo);this.saveToDiskSoon();this.trigger("has-uncommitted-changes",void 0);this.trigger("ack-any-commit",void 0)}
;t.prototype.handleObjectRequestFailed=function(e){this.requestTypeOut=null;this.pendingObjectRequestId=null;this.queueSend(0);this.objectStore.notifyOperationFailed(e.operationId)
;this.saveToDiskSoon();this.trigger("has-uncommitted-changes",void 0);this.trigger("ack-any-commit",void 0)};t.prototype.handleClientMessage=function(e){
"caret"==e.payload.type?this.handleLoneCaretBroadcastMessage(e.payload):"padoptions"===e.payload.type&&e.payload.clientId||this.trigger("client-message",e.payload)}
;t.prototype.handlePadTitleMessage=function(e){this.trigger("client-message",e)};t.prototype.handleLoneCaretBroadcastMessage=function(e){this.changesetTracker.updateOtherUserCaretPos(e)}
;t.prototype.handleMigrationLockMessage=function(){this.trigger("migration-lock",void 0)};t.prototype.handleModerationMessage=function(e){this.receivedModerationMessage=!0
;this.socket.abandonConnection("got moderation message");this.trigger("moderated-pad-edited",void 0)};t.prototype.handlePadPermissionMessage=function(e){this.trigger("pad-permission",e)}
;t.prototype.handlePadOwnerChange=function(e){this.trigger("pad-owner",e)};t.prototype.handleNewFilesystemInfo=function(){this.trigger("filesystem-update",void 0)}
;t.prototype.handleNewPassInfo=function(){this.trigger("pass-update",void 0)};t.prototype.pauseSync=function(){if(this.isChangesetPending){
this.dmesg("error: cannot pause sync, as pending changes have not been saved");return!1}this.socket.pause("pausing sync");this.trigger("sync-paused",void 0);return!0}
;t.prototype.restartSync=function(){this.socket.unpause("restarting sync");this.trigger("sync-restarted",void 0)};t.prototype.getCurrentRevisionNumber=function(){return this.rev}
;t.prototype.hasReceivedModerationMessage=function(){return this.receivedModerationMessage};t.prototype.hasUncommittedChanges=function(){
return!!(this.yetToBeCreatedParams||this.changesetTracker.hasUncommittedChanges()||this.objectStore.hasQueuedOperations())};t.prototype.getTrackingInfo=function(){return{
hasUnsavedChanges:this.hasUncommittedChanges(),offlineEnabled:!!this.clientVarsSaver,initializedWithMissedChanges:this.initializedWithMissedChanges,networkOnline:this.socket.networkIsUp}}
;t.prototype.getDiagnosticInfo=function(){var e={};e.requestTypeOut=this.requestTypeOut;e.channelState=a.ChannelState[this.socket.channelState];e.lastCommitTime=this.lastCommitTime
;e.numCommitAttemptsSinceLastSuccessfulCommit=this.numCommitAttemptsSinceLastSuccessfulCommit;e.numSocketReconnects=this.socket.reconnectTimes.length;e.secureUserId=this.myUserInfo.secureUserId
;e.currentRev=this.rev;e.currentSocketId=this.socket.socketId;e.clientId=this.clientId;var t=this.socket.socket
;(null==t?void 0:t.getDiagnosticInfo)&&(e=s.__assign(s.__assign({},e),(null==t?void 0:t.getDiagnosticInfo())||{}));return e};t.prototype.getHasCaughtUp=function(){return this.hasCaughtUp}
;Object.defineProperty(t.prototype,"useWebSocket",{get:function(){return this.useWebSocket_},enumerable:!1,configurable:!0});t.prototype.getMissedChanges=function(){
var e=this.changesetTracker.submittedChangesetForWire(),t=this.changesetTracker.userChangesetForWire();return{clientId:this.clientId,clientReadySeq:this.clientReadySeq,committedChangeset:e.changeset,
committedChangesetAPool:e.apool,furtherChangeset:t.changeset,furtherChangesetAPool:t.apool,objectStoreMissedChanges:this.objectStore.toJSONMissedChanges(),
yetToBeCreatedParams:this.yetToBeCreatedParams||null}};t.prototype.serializeCollabClientVars=function(){var e=this.changesetTracker.baseAttributedTextForWire();return{padId:this.padId,
encryptedDomainId:this.encryptedDomainId,historicalAuthorData:this.collabClientVars.historicalAuthorData,collabBaseState:{zatext:e.zatext,apool:e.pool.toJsonableNoCloning(),rev:this.rev},
objectStoreBaseState:this.objectStore.toJSONBaseState(),missedChanges:this.hasUncommittedChanges()?this.getMissedChanges():null,useCollabService:this.collabClientVars.useCollabService}}
;s.__decorate([d.freakoutOnException],t.prototype,"handleMessageToSend",null);s.__decorate([d.freakoutOnException],t.prototype,"handleEtherpadWebSocketMessageFromServer",null);return t
}(g.EventEmittingClass);t.CollabClient=v;var E=function(){function e(e,t){var o=this;this.onToggle=function(e){o.socket.setChillOutMode(!e);e&&o.socket.reconnect("tab active")};this.update=function(){
o.visible||o.collabClient.hasUncommittedChanges()?o.isActive.on():o.isActive.off(15*m.Time.SECOND)};this.onVisibilityChange=function(){
o.collabClient&&o.collabClient.trigger("visibility-change",void 0);o.visible=o.getVisible();o.update()};this.getVisible=function(){return!document[C.default.hidden]}
;this.isActive=new M.default.timers.ToggleableWithTimer(!0,this.onToggle);this.visible=!0;this.collabClient=e;this.socket=t;this.collabClient.on("has-uncommitted-changes",this.update)
;C.default.visibilityChange&&document.addEventListener(C.default.visibilityChange,this.onVisibilityChange)}e.prototype.dispose=function(){this.collabClient.off("has-uncommitted-changes",this.update)
;C.default.visibilityChange&&document.removeEventListener(C.default.visibilityChange,this.onVisibilityChange)};return e}();t.ActiveMonitor=E},372:function(e,t,o){Object.defineProperty(t,"__esModule",{
value:!0});var r=o(1),s=o(463),n=o(250),a=o(464),i=function(e){r.__extends(t,e);function t(t){var o=e.call(this)||this;o.handleDataSourceChanged=function(){o.trigger("change",void 0)};o.dataSources=[]
;o.filter=t.filter;o.maxResults=t.maxResults;t.padListStore&&o.dataSources.push(new a.default({store:t.padListStore,filter:t.filter,parentFolderId:t.parentFolderId,limit:t.limit,
includingCloudDocs:t.includingCloudDocs}));t.folderListStore&&o.dataSources.push(new s.default({store:t.folderListStore,filter:t.filter,includeFolders:t.includeFolders,
folderRecencyShouldIncludePadsInFolder:t.folderRecencyShouldIncludePadsInFolder,parentFolderId:t.parentFolderId,limit:t.limit,getPinned:t.getPinned}));o.dataSources.forEach((function(e){
e.on("change",o.handleDataSourceChanged)}));return o}t.prototype.load=function(){this.dataSources.forEach((function(e){return e.load()}))};t.prototype.dispose=function(){var e=this
;this.dataSources.forEach((function(t){t.dispose();t.off("change",e.handleDataSourceChanged)}))};t.prototype.get=function(){var e=this.dataSources.reduce((function(e,t){var o=t.get()
;e.isLoaded=e.isLoaded||o.isLoaded;e.hasManuallyCreatedAnyPads=e.hasManuallyCreatedAnyPads||o.hasManuallyCreatedAnyPads;e.entries=e.entries.concat(o.entries);return e}),{isLoaded:!1,
hasManuallyCreatedAnyPads:!1,entries:[]});e.entries=(0,n.sortEntries)(e.entries,this.filter);e.entries=this.maxResults?e.entries.slice(0,this.maxResults):e.entries;return e};return t
}(o(59).EventEmittingClass);t.default=i},387:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.ClientVarsSaver=void 0;var r=o(1),s=o(100),n=o(246),a=o(41),i=o(17),l=function(){
function e(e,t){this.saveFunc=e;this.shouldBypassDebounce=t;this.callbacks=[];this.callbacksForNextSave=[];this.isRequestOut=!1;this.isAnotherSaveRequested=!1;this.timeoutForRequest=null
;this.disposed=!1;this.lastTrackedSaveAttemptTime=0;this.numMisses=0}e.prototype.doSave=function(){var e=this;if(!this.disposed){this.sanityCheckOnDoSave();this.isRequestOut=!0
;this.saveFunc((function(){setTimeout((function(){if(!e.disposed){e.sanityCheckOnSaveComplete();e.isRequestOut=!1;var t=e.callbacks;e.callbacks=[];if(e.isAnotherSaveRequested){
e.callbacks=e.callbacksForNextSave;e.callbacksForNextSave=[];e.isAnotherSaveRequested=!1;if(e.timeoutForRequest){clearTimeout(e.timeoutForRequest);e.timeoutForRequest=null}e.doSave()}
t.forEach((function(e){i.default.error.loggingTryCatch((function(){e()}))}))}}),0)}))}};e.prototype.saveAsap=function(e){if(!this.disposed){
e&&(this.isRequestOut?this.callbacksForNextSave.push(e):this.callbacks.push(e));if(this.timeoutForRequest){clearTimeout(this.timeoutForRequest);this.timeoutForRequest=null}
this.isRequestOut?this.isAnotherSaveRequested=!0:this.doSave()}};e.prototype.saveSoon=function(){var e=this
;this.disposed||(this.shouldBypassDebounce&&this.shouldBypassDebounce()?this.saveAsap():this.timeoutForRequest||(this.timeoutForRequest=setTimeout((function(){e.saveAsap()}),5e3)))}
;e.prototype.dispose=function(){if(!this.disposed){this.disposed=!0;this.callbacks=[];this.callbacksForNextSave=[];if(this.timeoutForRequest){clearTimeout(this.timeoutForRequest)
;this.timeoutForRequest=null}}};e.prototype.sanityCheckOnDoSave=function(){var e=Date.now();if(this.lastTrackedSaveAttemptTime<e-10*a.Time.SECOND){this.lastTrackedSaveAttemptTime=e;this.numMisses++
;this.numMisses>=4&&(0,s.freakout)("ClientVarsSaver: trying to save but not getting any response")}};e.prototype.sanityCheckOnSaveComplete=function(){this.lastTrackedSaveAttemptTime=0;this.numMisses=0
};r.__decorate([n.freakoutOnException],e.prototype,"doSave",null);return e}();t.ClientVarsSaver=l},388:function(e,t,o){
/*!
 * Copyright 2009 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS-IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(t,"__esModule",{value:!0});t.Debug=void 0;var r=o(100),s=o(17),n=500;function a(e){return String(e).substring(0,n)}function i(e,t,o){var r={};t&&(r.catcher=t);o&&(r.time=o)
;["description","fileName","lineNumber","message","name","number","stack"].forEach((function(t){s.default.error.swallowExceptions((function(){e[t]&&(r[t]=e[t])}))}));r.stack&&(r.stack=a(r.stack))
;return r}var l=function(){function e(){this.caughtErrors=[];this.caughtErrorCatchers=[];this.caughtErrorTimes=[];this.debugMessages=[]}e.prototype.freakout=function(e){this.dmesg(e);(0,r.freakout)(e)
};e.prototype.dmesg=function(e){var t=(new Date).toJSON()+" "+e;this.debugMessages.push(t)
;window&&window.console&&window.console.debug&&window.COLLAB_CLIENT_CONSOLE_DEBUG&&window.console.debug("%c[network] "+t,"color: #3dcc5e; font-weight: bold")}
;e.prototype.wrapRecordingErrors=function(e,t,o){var r=this;return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return s.default.error.silentTryCatch((function(){
return t.apply(o,n)}),(function(t){r.caughtErrors.push(t);r.caughtErrorCatchers.push(e);r.caughtErrorTimes.push(Date.now())
;window&&window.console&&window.console.error&&window.COLLAB_CLIENT_CONSOLE_DEBUG&&window.console.error(i(t,e,Date.now()));throw t}))}};e.prototype.callCatchingErrors=function(e,t){var o=this
;s.default.error.loggingTryCatch((function(){o.wrapRecordingErrors(e,t,null)()}))};e.prototype.getDiagnosticInfo=function(e){var t={errors:{length:0}};function o(e,o,r){
t.errors[t.errors.length]=i(e,o,r);t.errors.length++}for(var r=0;r<this.caughtErrors.length&&r<3;r++)o(this.caughtErrors[r],this.caughtErrorCatchers[r],this.caughtErrorTimes[r]);if(e){
var s=e.callStack.getUnhandledErrors();for(r=0;r<s.length&&r<3;r++){var n=s[r];o(n.error,"ACE",n.time)}}
this.debugMessages.length>5e3&&(this.debugMessages=this.debugMessages.slice(this.debugMessages.length-5e3,this.debugMessages.length));t.debugMessages={length:0}
;for(r=0;r<this.debugMessages.length;r++){t.debugMessages[r]=a(this.debugMessages[r]);t.debugMessages.length++}t.baseTextInBase64=this.baseTextInBase64;return t};return e}();t.Debug=l},
462:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.updateBinderIsFavorite=t.updatePadIsFavorite=t.updateFolderIsFavorite=void 0;var r=o(1),s=o(2),n=o(12),a=o(14),i=o(0),l=(0,
a.MsgFactory)("favorites"),c=l.defineMessages,g=l.F,d=c({folderError:{msg:"Unable to update folder favorite setting",description:"Error if favoriting of a folder didn't work."},padError:{
msg:"Unable to update doc favorite setting",description:"Error if favoriting of a doc didn't work."}});(0,s.defineMessages)({folderError:{id:"729LI4",
defaultMessage:"Unable to update folder favorite setting"},padError:{id:"3TiUTk",defaultMessage:"Unable to update doc favorite setting"}});t.updateFolderIsFavorite=function(e,t,o,s){
var a=e.modifyEntity(t.encryptedId,(function(e){return e.inSidebar=o}));n.post({url:"/folder/set-user-folder-settings",data:{folderId:t.encryptedId,inSidebar:o},analyticsTag:"set-favorite-folder",
shardingKey:n.getStatelessShardingKey(),successHandler:function(t){s&&s(t.data);e.refresh()},errorHandler:function(){a();return!1},errorModalMessage:i.createElement(g,r.__assign({},d.folderError))})}
;t.updatePadIsFavorite=function(e,t,o,s){var a=e.modifyEntity(t,(function(e){return e.isFavorite=o}));n.post({url:"/ep/pad/follow/set-favorite",data:{localPadId:t,isFavorite:o},
analyticsTag:"set-favorite-note",shardingKey:n.getShardingKeyForPad(t),successHandler:function(){e.updatePad(t,{isFavorite:o},(function(e){s&&s(e)}));return!0},errorHandler:function(){a();return!1},
errorModalMessage:i.createElement(g,r.__assign({},d.padError))})};t.updateBinderIsFavorite=function(e,t){n.post({url:"/ep/pad/follow/set-favorite",data:{localPadId:e,isFavorite:t},
analyticsTag:"set-favorite-note",shardingKey:n.getShardingKeyForPad(e),successHandler:function(){return!0},errorHandler:function(){return!1},
errorModalMessage:i.createElement(g,r.__assign({},d.padError))})}},463:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.getFolderSortValue=void 0
;var r=o(1),s=o(8),n=o(250),a=o(59),i=o(367),l=o(7),c=o(76);function g(e,t,o){switch(t){case l.ListViewFilter.recents:case l.ListViewFilter.recentFavorites:case l.ListViewFilter.allRecents:
case l.ListViewFilter.following:if(o){var r=e.folderView,s=(0,n.dateSortValue)(r?r.lastViewedPadTime:0),a=(0,n.dateSortValue)(r?r.lastViewedFolderTime:0);return Math.max(a,s)}
return e.folderView&&e.folderView.lastViewedFolderTime?(0,n.dateSortValue)(e.folderView.lastViewedFolderTime):-1;case l.ListViewFilter.createdByMe:case l.ListViewFilter.ownedByMe:return(0,
n.dateSortValue)(e.folder.createdDate);case l.ListViewFilter.sharedWithMe:return(0,n.dateSortValue)(e.folder.lastActivityDate);case l.ListViewFilter.alphabetical:
case l.ListViewFilter.alphabeticalFavorites:case l.ListViewFilter.member:case l.ListViewFilter.archived:return e.folder.name.toLowerCase()}}t.getFolderSortValue=g;var d=function(e){r.__extends(t,e)
;function t(t){var o=e.call(this)||this;o.handleStoreChanged=function(){o.trigger("change",void 0)};o.store=t.store;o.filter=t.filter;o.parentFolderId=t.parentFolderId
;o.includeFolders=t.includeFolders;o.folderRecencyShouldIncludePadsInFolder=t.folderRecencyShouldIncludePadsInFolder;o.limit=t.limit;o.getPinned=t.getPinned
;o.store.on("folder-list-changed",o.handleStoreChanged);o.load();return o}t.prototype.load=function(){
if(this.parentFolderId)this.store.loadSubFolders(this.parentFolderId,!1,this.getPinned);else if(this.filter==l.ListViewFilter.recents)this.store.loadRecent(!1);else if(this.filter==l.ListViewFilter.archived)this.store.loadSoftDeleted(!1);else if(this.filter==l.ListViewFilter.recentFavorites||this.filter==l.ListViewFilter.alphabeticalFavorites)this.store.loadFavorites(!1);else if(this.filter==l.ListViewFilter.member||this.filter==l.ListViewFilter.sharedWithMe)this.store.loadMemberOf(!1);else if(this.filter==l.ListViewFilter.createdByMe||this.filter==l.ListViewFilter.ownedByMe)this.store.loadCreatedByMe(!1);else if(this.filter==l.ListViewFilter.alphabetical)this.store.refresh(!0);else{
if(this.filter!=l.ListViewFilter.following)throw Error("Invalid filter: "+this.filter);this.store.loadFollowed(!1)}};t.prototype.dispose=function(){
this.store.off("folder-list-changed",this.handleStoreChanged)};t.prototype.get=function(){return{isLoaded:this.isLoaded(),entries:this.getEntries()}};t.prototype.isLoaded=function(){
return this.store.hasLoaded(this.filter,this.parentFolderId)};t.prototype.getEntries=function(){var e=this;return(0,n.sortEntries)(this.getFolders().map((function(t){return(0,
n.constructFolderListEntry)(t,e.getSortValue(t))})),this.filter).slice(0,this.limit)};t.prototype.getFolders=function(){var e=this,t=function(t){if(e.parentFolderId){
var o=t.parentFolders[t.parentFolders.length-1];return!!(t.folder.encryptedParentFolderId==e.parentFolderId||o&&o.encryptedId==e.parentFolderId)&&e.includeFolders}return e.includeFolders
},o=this.store.getList().filter(t);switch(this.filter){case l.ListViewFilter.archived:return this.store.getSoftDeletedList().filter(t);case l.ListViewFilter.recents:return o.filter((function(t){
return e.folderRecencyShouldIncludePadsInFolder?!!t.folderView:!!t.folderView&&!!t.folderView.lastViewedFolderTime}));case l.ListViewFilter.recentFavorites:case l.ListViewFilter.alphabeticalFavorites:
return o.filter((function(e){return!!e.inSidebar}));case l.ListViewFilter.createdByMe:case l.ListViewFilter.ownedByMe:return o.filter((function(e){return e.isCreator}));case l.ListViewFilter.member:
return o.filter((function(e){return c.isUserMemberOfFolder(e,s.default.encryptedUserId)}));case l.ListViewFilter.sharedWithMe:return o.filter((function(e){
return c.isUserMemberOfFolder(e,s.default.encryptedUserId)&&!e.isCreator}));case l.ListViewFilter.alphabetical:return o.filter((function(t){return e.parentFolderId||0==t.parentFolders.length}))
;case l.ListViewFilter.following:return o.filter((function(e){return i.isFolderFollowed(e)}))}return o};t.prototype.getSortValue=function(e){
return g(e,this.filter,this.folderRecencyShouldIncludePadsInFolder)};return t}(a.EventEmittingClass);t.default=d},464:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.getPadSortValue=void 0;var r=o(1),s=o(8),n=o(250),a=o(59),i=o(32),l=o(7);function c(e,t){switch(t){case l.ListViewFilter.createdByMe:return(0,n.dateSortValue)(e.createdDate)
;case l.ListViewFilter.ownedByMe:case l.ListViewFilter.openedByMe:return(0,n.dateSortValue)(e.lastViewedDate);case l.ListViewFilter.sharedWithMe:return(0,n.dateSortValue)(e.currentUserInvitedDate)
;case l.ListViewFilter.editedByMe:return(0,n.dateSortValue)(e.myLastEditedDate);case l.ListViewFilter.alphabetical:case l.ListViewFilter.alphabeticalFavorites:
return i.padTitleOrDefault(e.title,s.default.userLocale).toLowerCase();case l.ListViewFilter.archived:case l.ListViewFilter.trashed:case l.ListViewFilter.recentFavorites:default:return(0,
n.dateSortValue)(e.lastActivityDate)}}t.getPadSortValue=c;var g=function(e){r.__extends(t,e);function t(t){var o=e.call(this)||this;o.pads=[];o.handleStoreChanged=function(){o.store.getPadList({
filter:o.filter,folderId:o.parentFolderId,limit:o.limit},(function(e){o.pads=e;o.trigger("change",void 0)}))};o.store=t.store;o.filter=t.filter;o.parentFolderId=t.parentFolderId;o.limit=t.limit
;o.includingCloudDocs=t.includingCloudDocs;o.store.on("pad-list-change",o.handleStoreChanged);o.load();return o}t.prototype.load=function(){var e=this;this.store.getPadList({filter:this.filter,
folderId:this.parentFolderId,limit:this.limit},(function(t){var o=e.pads&&e.pads.length>0;e.pads=t;!o&&e.pads&&e.pads.length>0&&e.trigger("change",void 0)}));this.store.loadPadList({
filter:this.filter,folderId:this.parentFolderId,limit:this.limit,includingCloudDocs:this.includingCloudDocs})};t.prototype.dispose=function(){this.store.off("pad-list-change",this.handleStoreChanged)}
;t.prototype.get=function(){return{isLoaded:this.store.hasLoaded({filter:this.filter,folderId:this.parentFolderId,limit:this.limit,includingCloudDocs:this.includingCloudDocs}),
hasManuallyCreatedAnyPads:this.store.hasManuallyCreatedAnyPads(),entries:this.getEntries()}};t.prototype.getEntries=function(){var e=this;return(0,n.sortEntries)(this.pads.map((function(t){return(0,
n.constructPadListEntry)(t,e.getSortValue(t))})),this.filter).slice(0,this.limit)};t.prototype.getSortValue=function(e){return c(e,this.filter)};return t}(a.EventEmittingClass);t.default=g},
473:function(e,t,o){var r=o(891),s=r,n=function(){return this}();s.exportSymbol("proto.collab.CaretPosition",null,n);s.exportSymbol("proto.collab.ClientReadyMessage",null,n)
;s.exportSymbol("proto.collab.CollabMessage",null,n);s.exportSymbol("proto.collab.CollabMessage.ThemessageCase",null,n);s.exportSymbol("proto.collab.CollabMessageList",null,n)
;s.exportSymbol("proto.collab.LoneCaretMessage",null,n);s.exportSymbol("proto.collab.StreamingClientControlMessage",null,n)
;s.exportSymbol("proto.collab.StreamingClientControlMessage.ControlMessageCase",null,n);s.exportSymbol("proto.collab.StreamingClientControlMessage.HiccupMessage",null,n)
;s.exportSymbol("proto.collab.StreamingClientControlMessage.KillMessage",null,n);s.exportSymbol("proto.collab.StreamingClientControlMessage.UseChannelMessage",null,n)
;s.exportSymbol("proto.collab.UserChangesMessage",null,n);proto.collab.ClientReadyMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.ClientReadyMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.ClientReadyMessage.displayName="proto.collab.ClientReadyMessage");proto.collab.UserChangesMessage=function(e){
r.Message.initialize(this,e,0,-1,proto.collab.UserChangesMessage.repeatedFields_,null)};s.inherits(proto.collab.UserChangesMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.UserChangesMessage.displayName="proto.collab.UserChangesMessage");proto.collab.CaretPosition=function(e){r.Message.initialize(this,e,0,-1,null,null)}
;s.inherits(proto.collab.CaretPosition,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.CaretPosition.displayName="proto.collab.CaretPosition");proto.collab.LoneCaretMessage=function(e){
r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.LoneCaretMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.LoneCaretMessage.displayName="proto.collab.LoneCaretMessage")
;proto.collab.StreamingClientControlMessage=function(e){r.Message.initialize(this,e,0,-1,null,proto.collab.StreamingClientControlMessage.oneofGroups_)}
;s.inherits(proto.collab.StreamingClientControlMessage,r.Message);s.DEBUG&&!COMPILED&&(proto.collab.StreamingClientControlMessage.displayName="proto.collab.StreamingClientControlMessage")
;proto.collab.StreamingClientControlMessage.KillMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.StreamingClientControlMessage.KillMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.StreamingClientControlMessage.KillMessage.displayName="proto.collab.StreamingClientControlMessage.KillMessage")
;proto.collab.StreamingClientControlMessage.HiccupMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)};s.inherits(proto.collab.StreamingClientControlMessage.HiccupMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.StreamingClientControlMessage.HiccupMessage.displayName="proto.collab.StreamingClientControlMessage.HiccupMessage")
;proto.collab.StreamingClientControlMessage.UseChannelMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)}
;s.inherits(proto.collab.StreamingClientControlMessage.UseChannelMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.StreamingClientControlMessage.UseChannelMessage.displayName="proto.collab.StreamingClientControlMessage.UseChannelMessage");proto.collab.CollabMessage=function(e){
r.Message.initialize(this,e,0,-1,null,proto.collab.CollabMessage.oneofGroups_)};s.inherits(proto.collab.CollabMessage,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.CollabMessage.displayName="proto.collab.CollabMessage");proto.collab.CollabMessageList=function(e){
r.Message.initialize(this,e,0,-1,proto.collab.CollabMessageList.repeatedFields_,null)};s.inherits(proto.collab.CollabMessageList,r.Message)
;s.DEBUG&&!COMPILED&&(proto.collab.CollabMessageList.displayName="proto.collab.CollabMessageList");if(r.Message.GENERATE_TO_OBJECT){proto.collab.ClientReadyMessage.prototype.toObject=function(e){
return proto.collab.ClientReadyMessage.toObject(e,this)};proto.collab.ClientReadyMessage.toObject=function(e,t){var o={padId:r.Message.getFieldWithDefault(t,1,""),
clientId:r.Message.getFieldWithDefault(t,2,""),secureUserId:r.Message.getFieldWithDefault(t,3,""),clientReadySeq:r.Message.getFieldWithDefault(t,4,0),padIdSig:r.Message.getFieldWithDefault(t,5,""),
lastRev:r.Message.getFieldWithDefault(t,6,0),lastObjectStoreRev:r.Message.getFieldWithDefault(t,7,0),isCommitPending:r.Message.getBooleanFieldWithDefault(t,8,!1),
aceVersion:r.Message.getFieldWithDefault(t,9,0),preferredColorId:r.Message.getFieldWithDefault(t,10,0),folderId:r.Message.getFieldWithDefault(t,11,""),
isCloudDoc:r.Message.getBooleanFieldWithDefault(t,12,!1)};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.ClientReadyMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.ClientReadyMessage;return proto.collab.ClientReadyMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.ClientReadyMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readString();e.setPadId(o);break;case 2:
o=t.readString();e.setClientId(o);break;case 3:o=t.readString();e.setSecureUserId(o);break;case 4:o=t.readInt32();e.setClientReadySeq(o);break;case 5:o=t.readString();e.setPadIdSig(o);break;case 6:
o=t.readInt32();e.setLastRev(o);break;case 7:o=t.readInt32();e.setLastObjectStoreRev(o);break;case 8:o=t.readBool();e.setIsCommitPending(o);break;case 9:o=t.readInt32();e.setAceVersion(o);break
;case 10:o=t.readInt32();e.setPreferredColorId(o);break;case 11:o=t.readString();e.setFolderId(o);break;case 12:o=t.readBool();e.setIsCloudDoc(o);break;default:t.skipField()}}return e}
;proto.collab.ClientReadyMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.ClientReadyMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.ClientReadyMessage.serializeBinaryToWriter=function(e,t){var o=void 0;(o=e.getPadId()).length>0&&t.writeString(1,o);(o=e.getClientId()).length>0&&t.writeString(2,o)
;(o=e.getSecureUserId()).length>0&&t.writeString(3,o);0!==(o=e.getClientReadySeq())&&t.writeInt32(4,o);(o=e.getPadIdSig()).length>0&&t.writeString(5,o);0!==(o=e.getLastRev())&&t.writeInt32(6,o)
;0!==(o=e.getLastObjectStoreRev())&&t.writeInt32(7,o);(o=e.getIsCommitPending())&&t.writeBool(8,o);0!==(o=e.getAceVersion())&&t.writeInt32(9,o);0!==(o=e.getPreferredColorId())&&t.writeInt32(10,o)
;(o=e.getFolderId()).length>0&&t.writeString(11,o);(o=e.getIsCloudDoc())&&t.writeBool(12,o)};proto.collab.ClientReadyMessage.prototype.getPadId=function(){
return r.Message.getFieldWithDefault(this,1,"")};proto.collab.ClientReadyMessage.prototype.setPadId=function(e){return r.Message.setProto3StringField(this,1,e)}
;proto.collab.ClientReadyMessage.prototype.getClientId=function(){return r.Message.getFieldWithDefault(this,2,"")};proto.collab.ClientReadyMessage.prototype.setClientId=function(e){
return r.Message.setProto3StringField(this,2,e)};proto.collab.ClientReadyMessage.prototype.getSecureUserId=function(){return r.Message.getFieldWithDefault(this,3,"")}
;proto.collab.ClientReadyMessage.prototype.setSecureUserId=function(e){return r.Message.setProto3StringField(this,3,e)};proto.collab.ClientReadyMessage.prototype.getClientReadySeq=function(){
return r.Message.getFieldWithDefault(this,4,0)};proto.collab.ClientReadyMessage.prototype.setClientReadySeq=function(e){return r.Message.setProto3IntField(this,4,e)}
;proto.collab.ClientReadyMessage.prototype.getPadIdSig=function(){return r.Message.getFieldWithDefault(this,5,"")};proto.collab.ClientReadyMessage.prototype.setPadIdSig=function(e){
return r.Message.setProto3StringField(this,5,e)};proto.collab.ClientReadyMessage.prototype.getLastRev=function(){return r.Message.getFieldWithDefault(this,6,0)}
;proto.collab.ClientReadyMessage.prototype.setLastRev=function(e){return r.Message.setProto3IntField(this,6,e)};proto.collab.ClientReadyMessage.prototype.getLastObjectStoreRev=function(){
return r.Message.getFieldWithDefault(this,7,0)};proto.collab.ClientReadyMessage.prototype.setLastObjectStoreRev=function(e){return r.Message.setProto3IntField(this,7,e)}
;proto.collab.ClientReadyMessage.prototype.getIsCommitPending=function(){return r.Message.getBooleanFieldWithDefault(this,8,!1)}
;proto.collab.ClientReadyMessage.prototype.setIsCommitPending=function(e){return r.Message.setProto3BooleanField(this,8,e)};proto.collab.ClientReadyMessage.prototype.getAceVersion=function(){
return r.Message.getFieldWithDefault(this,9,0)};proto.collab.ClientReadyMessage.prototype.setAceVersion=function(e){return r.Message.setProto3IntField(this,9,e)}
;proto.collab.ClientReadyMessage.prototype.getPreferredColorId=function(){return r.Message.getFieldWithDefault(this,10,0)};proto.collab.ClientReadyMessage.prototype.setPreferredColorId=function(e){
return r.Message.setProto3IntField(this,10,e)};proto.collab.ClientReadyMessage.prototype.getFolderId=function(){return r.Message.getFieldWithDefault(this,11,"")}
;proto.collab.ClientReadyMessage.prototype.setFolderId=function(e){return r.Message.setProto3StringField(this,11,e)};proto.collab.ClientReadyMessage.prototype.getIsCloudDoc=function(){
return r.Message.getBooleanFieldWithDefault(this,12,!1)};proto.collab.ClientReadyMessage.prototype.setIsCloudDoc=function(e){return r.Message.setProto3BooleanField(this,12,e)}
;proto.collab.UserChangesMessage.repeatedFields_=[3];if(r.Message.GENERATE_TO_OBJECT){proto.collab.UserChangesMessage.prototype.toObject=function(e){
return proto.collab.UserChangesMessage.toObject(e,this)};proto.collab.UserChangesMessage.toObject=function(e,t){var o,s={baseRev:r.Message.getFieldWithDefault(t,1,0),
changeset:r.Message.getFieldWithDefault(t,2,""),attribsList:null==(o=r.Message.getRepeatedField(t,3))?void 0:o,caret:(o=t.getCaret())&&proto.collab.CaretPosition.toObject(e,o)}
;e&&(s.$jspbMessageInstance=t);return s}}proto.collab.UserChangesMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.UserChangesMessage
;return proto.collab.UserChangesMessage.deserializeBinaryFromReader(o,t)};proto.collab.UserChangesMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
switch(t.getFieldNumber()){case 1:var o=t.readInt32();e.setBaseRev(o);break;case 2:o=t.readString();e.setChangeset(o);break;case 3:o=t.readString();e.addAttribs(o);break;case 4:
o=new proto.collab.CaretPosition;t.readMessage(o,proto.collab.CaretPosition.deserializeBinaryFromReader);e.setCaret(o);break;default:t.skipField()}}return e}
;proto.collab.UserChangesMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.UserChangesMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.UserChangesMessage.serializeBinaryToWriter=function(e,t){var o=void 0;0!==(o=e.getBaseRev())&&t.writeInt32(1,o);(o=e.getChangeset()).length>0&&t.writeString(2,o)
;(o=e.getAttribsList()).length>0&&t.writeRepeatedString(3,o);null!=(o=e.getCaret())&&t.writeMessage(4,o,proto.collab.CaretPosition.serializeBinaryToWriter)}
;proto.collab.UserChangesMessage.prototype.getBaseRev=function(){return r.Message.getFieldWithDefault(this,1,0)};proto.collab.UserChangesMessage.prototype.setBaseRev=function(e){
return r.Message.setProto3IntField(this,1,e)};proto.collab.UserChangesMessage.prototype.getChangeset=function(){return r.Message.getFieldWithDefault(this,2,"")}
;proto.collab.UserChangesMessage.prototype.setChangeset=function(e){return r.Message.setProto3StringField(this,2,e)};proto.collab.UserChangesMessage.prototype.getAttribsList=function(){
return r.Message.getRepeatedField(this,3)};proto.collab.UserChangesMessage.prototype.setAttribsList=function(e){return r.Message.setField(this,3,e||[])}
;proto.collab.UserChangesMessage.prototype.addAttribs=function(e,t){return r.Message.addToRepeatedField(this,3,e,t)};proto.collab.UserChangesMessage.prototype.clearAttribsList=function(){
return this.setAttribsList([])};proto.collab.UserChangesMessage.prototype.getCaret=function(){return r.Message.getWrapperField(this,proto.collab.CaretPosition,4)}
;proto.collab.UserChangesMessage.prototype.setCaret=function(e){return r.Message.setWrapperField(this,4,e)};proto.collab.UserChangesMessage.prototype.clearCaret=function(){return this.setCaret(void 0)
};proto.collab.UserChangesMessage.prototype.hasCaret=function(){return null!=r.Message.getField(this,4)};if(r.Message.GENERATE_TO_OBJECT){proto.collab.CaretPosition.prototype.toObject=function(e){
return proto.collab.CaretPosition.toObject(e,this)};proto.collab.CaretPosition.toObject=function(e,t){var o={zone:r.Message.getFieldWithDefault(t,1,""),line:r.Message.getFieldWithDefault(t,2,0),
col:r.Message.getFieldWithDefault(t,3,0),totalPos:r.Message.getFieldWithDefault(t,4,0)};e&&(o.$jspbMessageInstance=t);return o}}proto.collab.CaretPosition.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.CaretPosition;return proto.collab.CaretPosition.deserializeBinaryFromReader(o,t)};proto.collab.CaretPosition.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readString();e.setZone(o);break;case 2:o=t.readInt32();e.setLine(o);break;case 3:o=t.readInt32();e.setCol(o);break
;case 4:o=t.readInt32();e.setTotalPos(o);break;default:t.skipField()}}return e};proto.collab.CaretPosition.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.CaretPosition.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.CaretPosition.serializeBinaryToWriter=function(e,t){var o=void 0
;(o=e.getZone()).length>0&&t.writeString(1,o);0!==(o=e.getLine())&&t.writeInt32(2,o);0!==(o=e.getCol())&&t.writeInt32(3,o);0!==(o=e.getTotalPos())&&t.writeInt32(4,o)}
;proto.collab.CaretPosition.prototype.getZone=function(){return r.Message.getFieldWithDefault(this,1,"")};proto.collab.CaretPosition.prototype.setZone=function(e){
return r.Message.setProto3StringField(this,1,e)};proto.collab.CaretPosition.prototype.getLine=function(){return r.Message.getFieldWithDefault(this,2,0)}
;proto.collab.CaretPosition.prototype.setLine=function(e){return r.Message.setProto3IntField(this,2,e)};proto.collab.CaretPosition.prototype.getCol=function(){
return r.Message.getFieldWithDefault(this,3,0)};proto.collab.CaretPosition.prototype.setCol=function(e){return r.Message.setProto3IntField(this,3,e)}
;proto.collab.CaretPosition.prototype.getTotalPos=function(){return r.Message.getFieldWithDefault(this,4,0)};proto.collab.CaretPosition.prototype.setTotalPos=function(e){
return r.Message.setProto3IntField(this,4,e)};if(r.Message.GENERATE_TO_OBJECT){proto.collab.LoneCaretMessage.prototype.toObject=function(e){return proto.collab.LoneCaretMessage.toObject(e,this)}
;proto.collab.LoneCaretMessage.toObject=function(e,t){var o,s={caret:(o=t.getCaret())&&proto.collab.CaretPosition.toObject(e,o),baseRev:r.Message.getFieldWithDefault(t,2,0)}
;e&&(s.$jspbMessageInstance=t);return s}}proto.collab.LoneCaretMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.LoneCaretMessage
;return proto.collab.LoneCaretMessage.deserializeBinaryFromReader(o,t)};proto.collab.LoneCaretMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){
switch(t.getFieldNumber()){case 1:var o=new proto.collab.CaretPosition;t.readMessage(o,proto.collab.CaretPosition.deserializeBinaryFromReader);e.setCaret(o);break;case 2:o=t.readInt32()
;e.setBaseRev(o);break;default:t.skipField()}}return e};proto.collab.LoneCaretMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.LoneCaretMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.LoneCaretMessage.serializeBinaryToWriter=function(e,t){var o=void 0
;null!=(o=e.getCaret())&&t.writeMessage(1,o,proto.collab.CaretPosition.serializeBinaryToWriter);0!==(o=e.getBaseRev())&&t.writeInt32(2,o)};proto.collab.LoneCaretMessage.prototype.getCaret=function(){
return r.Message.getWrapperField(this,proto.collab.CaretPosition,1)};proto.collab.LoneCaretMessage.prototype.setCaret=function(e){return r.Message.setWrapperField(this,1,e)}
;proto.collab.LoneCaretMessage.prototype.clearCaret=function(){return this.setCaret(void 0)};proto.collab.LoneCaretMessage.prototype.hasCaret=function(){return null!=r.Message.getField(this,1)}
;proto.collab.LoneCaretMessage.prototype.getBaseRev=function(){return r.Message.getFieldWithDefault(this,2,0)};proto.collab.LoneCaretMessage.prototype.setBaseRev=function(e){
return r.Message.setProto3IntField(this,2,e)};proto.collab.StreamingClientControlMessage.oneofGroups_=[[1,2,3]];proto.collab.StreamingClientControlMessage.ControlMessageCase={
CONTROL_MESSAGE_NOT_SET:0,KILL:1,HICCUP:2,USE_CHANNEL:3};proto.collab.StreamingClientControlMessage.prototype.getControlMessageCase=function(){
return r.Message.computeOneofCase(this,proto.collab.StreamingClientControlMessage.oneofGroups_[0])};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.StreamingClientControlMessage.prototype.toObject=function(e){return proto.collab.StreamingClientControlMessage.toObject(e,this)}
;proto.collab.StreamingClientControlMessage.toObject=function(e,t){var o,r={kill:(o=t.getKill())&&proto.collab.StreamingClientControlMessage.KillMessage.toObject(e,o),
hiccup:(o=t.getHiccup())&&proto.collab.StreamingClientControlMessage.HiccupMessage.toObject(e,o),
useChannel:(o=t.getUseChannel())&&proto.collab.StreamingClientControlMessage.UseChannelMessage.toObject(e,o)};e&&(r.$jspbMessageInstance=t);return r}}
proto.collab.StreamingClientControlMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.StreamingClientControlMessage
;return proto.collab.StreamingClientControlMessage.deserializeBinaryFromReader(o,t)};proto.collab.StreamingClientControlMessage.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=new proto.collab.StreamingClientControlMessage.KillMessage
;t.readMessage(o,proto.collab.StreamingClientControlMessage.KillMessage.deserializeBinaryFromReader);e.setKill(o);break;case 2:o=new proto.collab.StreamingClientControlMessage.HiccupMessage
;t.readMessage(o,proto.collab.StreamingClientControlMessage.HiccupMessage.deserializeBinaryFromReader);e.setHiccup(o);break;case 3:o=new proto.collab.StreamingClientControlMessage.UseChannelMessage
;t.readMessage(o,proto.collab.StreamingClientControlMessage.UseChannelMessage.deserializeBinaryFromReader);e.setUseChannel(o);break;default:t.skipField()}}return e}
;proto.collab.StreamingClientControlMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.StreamingClientControlMessage.serializeBinaryToWriter(this,e)
;return e.getResultBuffer()};proto.collab.StreamingClientControlMessage.serializeBinaryToWriter=function(e,t){var o=void 0
;null!=(o=e.getKill())&&t.writeMessage(1,o,proto.collab.StreamingClientControlMessage.KillMessage.serializeBinaryToWriter)
;null!=(o=e.getHiccup())&&t.writeMessage(2,o,proto.collab.StreamingClientControlMessage.HiccupMessage.serializeBinaryToWriter)
;null!=(o=e.getUseChannel())&&t.writeMessage(3,o,proto.collab.StreamingClientControlMessage.UseChannelMessage.serializeBinaryToWriter)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.StreamingClientControlMessage.KillMessage.prototype.toObject=function(e){return proto.collab.StreamingClientControlMessage.KillMessage.toObject(e,this)}
;proto.collab.StreamingClientControlMessage.KillMessage.toObject=function(e,t){var o={reason:r.Message.getFieldWithDefault(t,1,"")};e&&(o.$jspbMessageInstance=t);return o}}
proto.collab.StreamingClientControlMessage.KillMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.StreamingClientControlMessage.KillMessage
;return proto.collab.StreamingClientControlMessage.KillMessage.deserializeBinaryFromReader(o,t)};proto.collab.StreamingClientControlMessage.KillMessage.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=t.readString();e.setReason(o)}else t.skipField()}return e}
;proto.collab.StreamingClientControlMessage.KillMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.StreamingClientControlMessage.KillMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.StreamingClientControlMessage.KillMessage.serializeBinaryToWriter=function(e,t){var o;(o=e.getReason()).length>0&&t.writeString(1,o)}
;proto.collab.StreamingClientControlMessage.KillMessage.prototype.getReason=function(){return r.Message.getFieldWithDefault(this,1,"")}
;proto.collab.StreamingClientControlMessage.KillMessage.prototype.setReason=function(e){return r.Message.setProto3StringField(this,1,e)};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.StreamingClientControlMessage.HiccupMessage.prototype.toObject=function(e){return proto.collab.StreamingClientControlMessage.HiccupMessage.toObject(e,this)}
;proto.collab.StreamingClientControlMessage.HiccupMessage.toObject=function(e,t){var o={};e&&(o.$jspbMessageInstance=t);return o}}
proto.collab.StreamingClientControlMessage.HiccupMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.StreamingClientControlMessage.HiccupMessage
;return proto.collab.StreamingClientControlMessage.HiccupMessage.deserializeBinaryFromReader(o,t)};proto.collab.StreamingClientControlMessage.HiccupMessage.deserializeBinaryFromReader=function(e,t){
for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e};proto.collab.StreamingClientControlMessage.HiccupMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter
;proto.collab.StreamingClientControlMessage.HiccupMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.StreamingClientControlMessage.HiccupMessage.serializeBinaryToWriter=function(e,t){};if(r.Message.GENERATE_TO_OBJECT){
proto.collab.StreamingClientControlMessage.UseChannelMessage.prototype.toObject=function(e){return proto.collab.StreamingClientControlMessage.UseChannelMessage.toObject(e,this)}
;proto.collab.StreamingClientControlMessage.UseChannelMessage.toObject=function(e,t){var o={channelSeq:r.Message.getFieldWithDefault(t,1,0),name:r.Message.getFieldWithDefault(t,2,"")}
;e&&(o.$jspbMessageInstance=t);return o}}proto.collab.StreamingClientControlMessage.UseChannelMessage.deserializeBinary=function(e){
var t=new r.BinaryReader(e),o=new proto.collab.StreamingClientControlMessage.UseChannelMessage;return proto.collab.StreamingClientControlMessage.UseChannelMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.StreamingClientControlMessage.UseChannelMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=t.readInt32()
;e.setChannelSeq(o);break;case 2:o=t.readString();e.setName(o);break;default:t.skipField()}}return e};proto.collab.StreamingClientControlMessage.UseChannelMessage.prototype.serializeBinary=function(){
var e=new r.BinaryWriter;proto.collab.StreamingClientControlMessage.UseChannelMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.StreamingClientControlMessage.UseChannelMessage.serializeBinaryToWriter=function(e,t){var o=void 0;0!==(o=e.getChannelSeq())&&t.writeInt32(1,o)
;(o=e.getName()).length>0&&t.writeString(2,o)};proto.collab.StreamingClientControlMessage.UseChannelMessage.prototype.getChannelSeq=function(){return r.Message.getFieldWithDefault(this,1,0)}
;proto.collab.StreamingClientControlMessage.UseChannelMessage.prototype.setChannelSeq=function(e){return r.Message.setProto3IntField(this,1,e)}
;proto.collab.StreamingClientControlMessage.UseChannelMessage.prototype.getName=function(){return r.Message.getFieldWithDefault(this,2,"")}
;proto.collab.StreamingClientControlMessage.UseChannelMessage.prototype.setName=function(e){return r.Message.setProto3StringField(this,2,e)}
;proto.collab.StreamingClientControlMessage.prototype.getKill=function(){return r.Message.getWrapperField(this,proto.collab.StreamingClientControlMessage.KillMessage,1)}
;proto.collab.StreamingClientControlMessage.prototype.setKill=function(e){return r.Message.setOneofWrapperField(this,1,proto.collab.StreamingClientControlMessage.oneofGroups_[0],e)}
;proto.collab.StreamingClientControlMessage.prototype.clearKill=function(){return this.setKill(void 0)};proto.collab.StreamingClientControlMessage.prototype.hasKill=function(){
return null!=r.Message.getField(this,1)};proto.collab.StreamingClientControlMessage.prototype.getHiccup=function(){
return r.Message.getWrapperField(this,proto.collab.StreamingClientControlMessage.HiccupMessage,2)};proto.collab.StreamingClientControlMessage.prototype.setHiccup=function(e){
return r.Message.setOneofWrapperField(this,2,proto.collab.StreamingClientControlMessage.oneofGroups_[0],e)};proto.collab.StreamingClientControlMessage.prototype.clearHiccup=function(){
return this.setHiccup(void 0)};proto.collab.StreamingClientControlMessage.prototype.hasHiccup=function(){return null!=r.Message.getField(this,2)}
;proto.collab.StreamingClientControlMessage.prototype.getUseChannel=function(){return r.Message.getWrapperField(this,proto.collab.StreamingClientControlMessage.UseChannelMessage,3)}
;proto.collab.StreamingClientControlMessage.prototype.setUseChannel=function(e){return r.Message.setOneofWrapperField(this,3,proto.collab.StreamingClientControlMessage.oneofGroups_[0],e)}
;proto.collab.StreamingClientControlMessage.prototype.clearUseChannel=function(){return this.setUseChannel(void 0)};proto.collab.StreamingClientControlMessage.prototype.hasUseChannel=function(){
return null!=r.Message.getField(this,3)};proto.collab.CollabMessage.oneofGroups_=[[1,2,3,4,16]];proto.collab.CollabMessage.ThemessageCase={THEMESSAGE_NOT_SET:0,STREAMING_CLIENT_CONTROL_MESSAGE:1,
USER_CHANGES_MESSAGE:2,CLIENT_READY_MESSAGE:3,LONE_CARET_MESSAGE:4,JSON_MESSAGE:16};proto.collab.CollabMessage.prototype.getThemessageCase=function(){
return r.Message.computeOneofCase(this,proto.collab.CollabMessage.oneofGroups_[0])};if(r.Message.GENERATE_TO_OBJECT){proto.collab.CollabMessage.prototype.toObject=function(e){
return proto.collab.CollabMessage.toObject(e,this)};proto.collab.CollabMessage.toObject=function(e,t){var o,s={
streamingClientControlMessage:(o=t.getStreamingClientControlMessage())&&proto.collab.StreamingClientControlMessage.toObject(e,o),
userChangesMessage:(o=t.getUserChangesMessage())&&proto.collab.UserChangesMessage.toObject(e,o),clientReadyMessage:(o=t.getClientReadyMessage())&&proto.collab.ClientReadyMessage.toObject(e,o),
loneCaretMessage:(o=t.getLoneCaretMessage())&&proto.collab.LoneCaretMessage.toObject(e,o),jsonMessage:r.Message.getFieldWithDefault(t,16,"")};e&&(s.$jspbMessageInstance=t);return s}}
proto.collab.CollabMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.CollabMessage;return proto.collab.CollabMessage.deserializeBinaryFromReader(o,t)}
;proto.collab.CollabMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var o=new proto.collab.StreamingClientControlMessage
;t.readMessage(o,proto.collab.StreamingClientControlMessage.deserializeBinaryFromReader);e.setStreamingClientControlMessage(o);break;case 2:o=new proto.collab.UserChangesMessage
;t.readMessage(o,proto.collab.UserChangesMessage.deserializeBinaryFromReader);e.setUserChangesMessage(o);break;case 3:o=new proto.collab.ClientReadyMessage
;t.readMessage(o,proto.collab.ClientReadyMessage.deserializeBinaryFromReader);e.setClientReadyMessage(o);break;case 4:o=new proto.collab.LoneCaretMessage
;t.readMessage(o,proto.collab.LoneCaretMessage.deserializeBinaryFromReader);e.setLoneCaretMessage(o);break;case 16:o=t.readString();e.setJsonMessage(o);break;default:t.skipField()}}return e}
;proto.collab.CollabMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;proto.collab.CollabMessage.serializeBinaryToWriter(this,e);return e.getResultBuffer()}
;proto.collab.CollabMessage.serializeBinaryToWriter=function(e,t){var o=void 0
;null!=(o=e.getStreamingClientControlMessage())&&t.writeMessage(1,o,proto.collab.StreamingClientControlMessage.serializeBinaryToWriter)
;null!=(o=e.getUserChangesMessage())&&t.writeMessage(2,o,proto.collab.UserChangesMessage.serializeBinaryToWriter)
;null!=(o=e.getClientReadyMessage())&&t.writeMessage(3,o,proto.collab.ClientReadyMessage.serializeBinaryToWriter)
;null!=(o=e.getLoneCaretMessage())&&t.writeMessage(4,o,proto.collab.LoneCaretMessage.serializeBinaryToWriter);null!=(o=r.Message.getField(e,16))&&t.writeString(16,o)}
;proto.collab.CollabMessage.prototype.getStreamingClientControlMessage=function(){return r.Message.getWrapperField(this,proto.collab.StreamingClientControlMessage,1)}
;proto.collab.CollabMessage.prototype.setStreamingClientControlMessage=function(e){return r.Message.setOneofWrapperField(this,1,proto.collab.CollabMessage.oneofGroups_[0],e)}
;proto.collab.CollabMessage.prototype.clearStreamingClientControlMessage=function(){return this.setStreamingClientControlMessage(void 0)}
;proto.collab.CollabMessage.prototype.hasStreamingClientControlMessage=function(){return null!=r.Message.getField(this,1)};proto.collab.CollabMessage.prototype.getUserChangesMessage=function(){
return r.Message.getWrapperField(this,proto.collab.UserChangesMessage,2)};proto.collab.CollabMessage.prototype.setUserChangesMessage=function(e){
return r.Message.setOneofWrapperField(this,2,proto.collab.CollabMessage.oneofGroups_[0],e)};proto.collab.CollabMessage.prototype.clearUserChangesMessage=function(){
return this.setUserChangesMessage(void 0)};proto.collab.CollabMessage.prototype.hasUserChangesMessage=function(){return null!=r.Message.getField(this,2)}
;proto.collab.CollabMessage.prototype.getClientReadyMessage=function(){return r.Message.getWrapperField(this,proto.collab.ClientReadyMessage,3)}
;proto.collab.CollabMessage.prototype.setClientReadyMessage=function(e){return r.Message.setOneofWrapperField(this,3,proto.collab.CollabMessage.oneofGroups_[0],e)}
;proto.collab.CollabMessage.prototype.clearClientReadyMessage=function(){return this.setClientReadyMessage(void 0)};proto.collab.CollabMessage.prototype.hasClientReadyMessage=function(){
return null!=r.Message.getField(this,3)};proto.collab.CollabMessage.prototype.getLoneCaretMessage=function(){return r.Message.getWrapperField(this,proto.collab.LoneCaretMessage,4)}
;proto.collab.CollabMessage.prototype.setLoneCaretMessage=function(e){return r.Message.setOneofWrapperField(this,4,proto.collab.CollabMessage.oneofGroups_[0],e)}
;proto.collab.CollabMessage.prototype.clearLoneCaretMessage=function(){return this.setLoneCaretMessage(void 0)};proto.collab.CollabMessage.prototype.hasLoneCaretMessage=function(){
return null!=r.Message.getField(this,4)};proto.collab.CollabMessage.prototype.getJsonMessage=function(){return r.Message.getFieldWithDefault(this,16,"")}
;proto.collab.CollabMessage.prototype.setJsonMessage=function(e){return r.Message.setOneofField(this,16,proto.collab.CollabMessage.oneofGroups_[0],e)}
;proto.collab.CollabMessage.prototype.clearJsonMessage=function(){return r.Message.setOneofField(this,16,proto.collab.CollabMessage.oneofGroups_[0],void 0)}
;proto.collab.CollabMessage.prototype.hasJsonMessage=function(){return null!=r.Message.getField(this,16)};proto.collab.CollabMessageList.repeatedFields_=[1];if(r.Message.GENERATE_TO_OBJECT){
proto.collab.CollabMessageList.prototype.toObject=function(e){return proto.collab.CollabMessageList.toObject(e,this)};proto.collab.CollabMessageList.toObject=function(e,t){var o={
collabMessagesList:r.Message.toObjectList(t.getCollabMessagesList(),proto.collab.CollabMessage.toObject,e)};e&&(o.$jspbMessageInstance=t);return o}}
proto.collab.CollabMessageList.deserializeBinary=function(e){var t=new r.BinaryReader(e),o=new proto.collab.CollabMessageList;return proto.collab.CollabMessageList.deserializeBinaryFromReader(o,t)}
;proto.collab.CollabMessageList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){if(1===t.getFieldNumber()){var o=new proto.collab.CollabMessage
;t.readMessage(o,proto.collab.CollabMessage.deserializeBinaryFromReader);e.addCollabMessages(o)}else t.skipField()}return e};proto.collab.CollabMessageList.prototype.serializeBinary=function(){
var e=new r.BinaryWriter;proto.collab.CollabMessageList.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.collab.CollabMessageList.serializeBinaryToWriter=function(e,t){var o
;(o=e.getCollabMessagesList()).length>0&&t.writeRepeatedMessage(1,o,proto.collab.CollabMessage.serializeBinaryToWriter)};proto.collab.CollabMessageList.prototype.getCollabMessagesList=function(){
return r.Message.getRepeatedWrapperField(this,proto.collab.CollabMessage,1)};proto.collab.CollabMessageList.prototype.setCollabMessagesList=function(e){
return r.Message.setRepeatedWrapperField(this,1,e)};proto.collab.CollabMessageList.prototype.addCollabMessages=function(e,t){
return r.Message.addToRepeatedWrapperField(this,1,e,proto.collab.CollabMessage,t)};proto.collab.CollabMessageList.prototype.clearCollabMessagesList=function(){return this.setCollabMessagesList([])}
;s.object.extend(t,proto.collab)},474:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.readMessage=t.parseWireFormat=t.ControlMessage=void 0;!function(e){e.Ok="oob:ok"
;e.PlannedRestart="oob:planned_restart";e.RestartFail="oob:restart-fail"}(t.ControlMessage||(t.ControlMessage={}));function o(e){var t=new Error(e);t.isDataFormatError=!0;return t}
t.parseWireFormat=function(e,t){void 0===t&&(t=0);for(var s=[],n=t;;){var a=r(e,n);if(!a)break;n=a.lastConsumedChar;var i=a.message,l=i.split(":");if("oob"!==l[0]){var c=Number(l[0])
;if(isNaN(c))throw o("Bad sequence number: ".concat(l[0]));var g=Number(l[1]);if(isNaN(g))throw o("Bad control: ".concat(l[1]));var d=l.slice(2).join(":");s.push({fullMessage:i,seqNumber:c,
isControl:1===g,content:d})}else s.push({fullMessage:i,oob:l.slice(1).join(":")})}return{messages:s,lastConsumedChar:n}};function r(e,t){void 0===t&&(t=0);var r=e.indexOf(":",t);if(r<0)return null
;var s=Number(e.substring(t,r));if(isNaN(s))throw o("Bad length: ".concat(e.substring(t,r)));return e.length<r+1+s?null:{message:e.substr(r+1,s),lastConsumedChar:r+1+s}}t.readMessage=r},
475:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.timeout=t.describeTimeouts=void 0;var o=function(){};t.describeTimeouts=function(e){var t=[]
;for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];t.push("".concat(r,": ").concat(s===o?"unset":"set"))}return"{ ".concat(t.join(", ")," }")};t.timeout=function(e,t,o,s){var n=setTimeout((function(){
r(e,t);s()}),o),a=function(){return clearTimeout(n)};r(e,t);e[t]=a;return a};function r(e,t){if(e.hasOwnProperty(t)){e[t]();e[t]=o}}},476:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})
;t.XHRManager=t.HTTPMethod=void 0;!function(e){e.Get="GET";e.Post="POST"}(t.HTTPMethod||(t.HTTPMethod={}));var o=function(){function e(e,t,o){this.id=e;this.extraHeaders=t;this.log=o;this.openXhrs=[]}
e.prototype.closeAllOpenXhrs=function(){var e=this;this.openXhrs.forEach((function(t){try{t.xhr.abort();e.log("closing xhr: ".concat(t.uri))}catch(t){e.log("error closing xhr: ".concat(t))}}))
;this.openXhrs=[]};e.prototype.request=function(t,o,r,s,n,a){var i=this;void 0===a&&(a=!1);var l=new XMLHttpRequest;l.open(t,o,r);this.setRequestHeaders(l);this.addOpenXhr(l,o)
;r&&(l.onreadystatechange=function(){if(a||l.readyState===XMLHttpRequest.DONE){a||i.removeOpenXhr(l);e.callCallbackWithRequestInfo(l,n)}})
;a&&"withCredentials"in XMLHttpRequest.prototype&&(l.withCredentials=!0);s&&l.setRequestHeader("Content-Type","application/octet-stream");try{l.send(s)}catch(e){l.abort()
;n(500,"Error sending data!",l)}r||e.callCallbackWithRequestInfo(l,n);return l};e.prototype.setRequestHeaders=function(e){e.setRequestHeader("Notes-Socket-Id",this.id)
;if(null===window||void 0===window?void 0:window.clientVars){e.setRequestHeader("Notes-Tab-Id",clientVars.tabId||"unknown");e.setRequestHeader("Notes-App-Version",clientVars.appVersion||"unknown")
;e.setRequestHeader("Notes-App-Time",clientVars.appTime||"unknown")}for(var t in this.extraHeaders)e.setRequestHeader(t,this.extraHeaders[t])};e.prototype.addOpenXhr=function(e,t){this.openXhrs.push({
uri:t,xhr:e})};e.prototype.removeOpenXhr=function(e){for(var t=0;t<this.openXhrs.length;t++)if(this.openXhrs[t].xhr===e){this.openXhrs.splice(t,1);break}};e.callCallbackWithRequestInfo=function(e,t){
var o,r;try{o=e.status;r=e.responseText}catch(e){}t(o,r,e)};return e}();t.XHRManager=o},477:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.PadLifecycleHookRunner=void 0
;var r=o(1),s=function(e){r.__extends(t,e);function t(t,o,r){return e.call(this,"The hook ".concat(t," timed out while running '").concat(o,"' after ").concat(r,"ms"))||this}return t
}(Error),n=function(){function e(){}e.composeError=function(e,t){if(0!==e.length){var o=e.map((function(e){return"".concat(e[0].name,":\n").concat(e[1].stack)})).join("\n")
;return new Error("One or more padLifecycleHooks caused an error during ".concat(t,":\n").concat(o))}};e.run=function(t,o,r,n){void 0===n&&(n=function(){})
;console.time("".concat(o.length," padLifecycleHooks: ").concat(t));if(0!==o.length){var a=[],i=o.length;o.forEach((function(l){console.time("".concat(l.name,":").concat(t));var c=!1;function g(r){
console.timeEnd("".concat(l.name,":").concat(t));if(!c){i--;r&&a.push([this,r]);if(0===i){console.timeEnd("".concat(o.length," padLifecycleHooks: ").concat(t));n(e.composeError(a,t))}}}
var d=l.timeouts&&l.timeouts[t]||e.DEFAULT_TIMEOUT,u=setTimeout((function(){g(new s(l,t,d));c=!0}),d);l[t](r,(function(e){if(!c){clearTimeout(u);g(e)}}))}))}else{
console.timeEnd("".concat(o.length," padLifecycleHooks: ").concat(t));n()}};e.DEFAULT_TIMEOUT=1e3;return e}();t.PadLifecycleHookRunner=n},611:function(e,t,o){Object.defineProperty(t,"__esModule",{
value:!0});var r=o(1),s=o(8),n=o(2),a=o(120),i=o(1528),l=o(60),c=o(7),g=o(12),d=o(76),u=o(66),p=o(36),h=o(14),f=o(0),b=o(32),m=o(63),y=o(84),C=(0,h.MsgFactory)("padlist"),M=C.F,_=(0,
C.defineMessages)({docfiledinDropbox:{description:"Badge on doc entry subtitle in desktop indicating that the doc is filed in Dropbox",msg:"Doc filed in Dropbox"},createdbypadCreatorName:{
description:"Doc entry subtitle message indicating the doc was created by padCreatorName",msg:"Created by {padCreatorName}"},sharedwithinvitedUserName:{
description:"Doc entry subtitle message indicating the doc was shared with invitedUserName",msg:"Shared with {invitedUserName}"},sharedwithinvitedUserCountpluraloneotherotherinvitedUserCountothers:{
description:"Doc entry subtitle message indicating the doc was shared with invitedUserCount others",
msg:"Shared with {invitedUserCount, plural,\n                 one {1 other}\n                 other {{invitedUserCount} others}\n             }"},unfiled:{
description:"Badge on doc entry subtitle indicating that the doc is unshared and not in a folder",msg:"Unfiled"},hasunsavedchanges:{
description:"Doc entry subtitle message that indicates the doc has unsaved changes",msg:"Has unsaved changes"},clouddocpath:{description:"Dropbox file path if available",msg:"{cloudDocPath}"},
savedinDropbox:{description:"Badge on doc entry subtitle in web indicating that the doc is saved in Dropbox",msg:"Saved in Dropbox"},neveredited:{
description:"Doc entry subtitle message indicating that the doc was never edited",msg:"Never edited"},lasteditedlastEditedTimeAgo:{
description:"Doc entry subtitle message indicating the doc was last edited from a relative time",msg:"Last edited {lastEditedTimeAgo}"},commentcountpluralonecommentothercomments:{
msg:"{commentCount, plural, one {1 comment} other {# comments}}",description:"indicates the number of unread comments on a doc"},numtaskspluralonetaskothertasks:{
msg:"{numTasks, plural, one {1 task} other {# tasks}}",description:"indicates the number of assigned tasks in a doc"},youEdited:{msg:"You edited {myLastEditedTimeAgo}",
description:"Doc entry subtitle message indicating the doc was edited by the current user at myLastEditedTimeAgo relative time (from TimeAgo)"},editedBy:{
msg:"Edited by {lastEditorName} {lastEditedTimeAgo}",description:"Doc entry subtitle message indicating the doc was edited lastEditorName at lastEditedTimeAgo relative time (from TimeAgo)"}}),S=((0,
n.defineMessages)({docfiledinDropbox:{id:"FNuEav",defaultMessage:"Doc filed in Dropbox"},createdbypadCreatorName:{id:"igG2vz",defaultMessage:"Created by {padCreatorName}"},sharedwithinvitedUserName:{
id:"qffp17",defaultMessage:"Shared with {invitedUserName}"},sharedwithinvitedUserCountpluraloneotherotherinvitedUserCountothers:{id:"Z4NJAl",
defaultMessage:"Shared with {invitedUserCount, plural,\n                 one {1 other}\n                 other {{invitedUserCount} others}\n             }"},unfiled:{id:"u9I2n4",
defaultMessage:"Unfiled"},hasunsavedchanges:{id:"+f/cwn",defaultMessage:"Has unsaved changes"},clouddocpath:{id:"OuFT+z",defaultMessage:"{cloudDocPath}"},savedinDropbox:{id:"74NxUu",
defaultMessage:"Saved in Dropbox"},neveredited:{id:"UI0jnm",defaultMessage:"Never edited"},lasteditedlastEditedTimeAgo:{id:"aRVESl",defaultMessage:"Last edited {lastEditedTimeAgo}"},
commentcountpluralonecommentothercomments:{id:"Q6LLjb",defaultMessage:"{commentCount, plural, one {1 comment} other {# comments}}"},numtaskspluralonetaskothertasks:{id:"WYB43O",
defaultMessage:"{numTasks, plural, one {1 task} other {# tasks}}"},youEdited:{id:"YXywDq",defaultMessage:"You edited {myLastEditedTimeAgo}"},editedBy:{id:"o9yWO+",
defaultMessage:"Edited by {lastEditorName} {lastEditedTimeAgo}"}}),function(e){r.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.state={cloudDocPath:""};return o}
t.prototype.componentDidMount=function(){this.props.pad.isCloudDoc&&m.isOnButDoNotLog("paper_legacy_paper_home_show_pifs_docs")&&!(0,u.isApollo)()&&this.props.isWebHome&&this.getFilesystemInfo()}
;t.prototype.getSharingStatus=function(){return this.props.pad.isCloudDoc&&(0,u.isApollo)()?f.createElement("span",null,f.createElement("span",{className:"notranslate"
},"☁️"),f.createElement(M,r.__assign({},_.docfiledinDropbox))):this.props.pad.isCloudDoc&&m.isOnButDoNotLog("paper_legacy_paper_home_show_pifs_docs")&&this.props.isWebHome?null:this.props.sortOrder==c.ListViewFilter.archived?f.createElement(M,r.__assign({
values:{padCreatorName:this.props.pad.creator}},_.createdbypadCreatorName)):this.props.pad.folderData?this.props.hideFolderMembership?null:f.createElement("span",{className:"hp-list-item-parent-path"
},f.createElement(l.default,{str:d.getFullFolderName(this.props.pad.folderData)})):1==this.props.pad.invitedUserCount&&this.props.pad.invitedUserName?f.createElement(M,r.__assign({values:{
invitedUserName:this.props.pad.invitedUserName}},_.sharedwithinvitedUserName)):this.props.pad.invitedUserCount?f.createElement(M,r.__assign({values:{invitedUserCount:this.props.pad.invitedUserCount}
},_.sharedwithinvitedUserCountpluraloneotherotherinvitedUserCountothers)):f.createElement("span",{className:"hp-doclist-entry-byline-badge"},f.createElement(M,r.__assign({},_.unfiled)))}
;t.prototype.renderSubtitle=function(){if(f.Children.count(this.props.children)>0)return this.props.children;var e=[],t=this.props.hideSharingStatus?null:this.getSharingStatus()
;t&&e.push(f.createElement("span",{key:"sharingStatus",className:"hp-doclist-entry-sharing-status"},t));var o=this.getNumUnreadCommentsForPad();o&&e.push(o);var s=this.getCurrentUserNumTasks()
;s&&e.push(s);var n=this.getSortString();e.push(f.createElement("span",{key:"sortString",className:"hp-doclist-entry-activity-info"},n))
;this.props.pad.hasUncommittedChanges&&e.push(f.createElement("span",{key:"offline"},f.createElement("span",{className:"notranslate"},"· "),f.createElement("span",{
className:"hp-doclist-entry-unsaved-changes"},f.createElement(M,r.__assign({},_.hasunsavedchanges)))));this.props.pad.isCloudDoc&&m.isOnButDoNotLog("paper_legacy_paper_home_show_pifs_docs")&&!(0,
u.isApollo)()&&this.props.isWebHome&&e.push(f.createElement("span",{key:"cloud doc file path"},f.createElement(a.default,{tooltip:this.state.cloudDocPath?f.createElement(M,r.__assign({values:{
cloudDocPath:this.state.cloudDocPath}},_.clouddocpath)):void 0},f.createElement(M,r.__assign({},_.savedinDropbox)))));var i=f.createElement("span",{className:"notranslate"}," · "),l=(0,p.joinJSX)(e,i)
;return f.createElement("div",{className:"hp-list-item-subtitle hp-doclist-entry-byline"},l)};t.prototype.renderBlockView=function(){
var e=[],t=this.props.hideSharingStatus?null:this.getSharingStatus();t&&e.push(f.createElement("span",{className:"hp-doclist-entry-sharing-status"},t));var o=this.getSortString()
;e.push(f.createElement("span",{className:"hp-doclist-entry-activity-info"},o));return f.createElement("div",{className:"hp-list-item-subtitle"},e)};t.prototype.getFilesystemInfo=function(){var e=this
;g.get({url:"/cloud-docs/get-filesystem-info",analyticsTag:"get-filesystem-info",data:{localPadId:this.props.pad.localPadId},shardingKey:g.getStatelessShardingKey(),successHandler:function(t){
var o=0==t.filesystemInfo.path.length?"Dropbox":t.filesystemInfo.path.map((function(e){return e.displayName})).join("/");e.setState({cloudDocPath:"in /"+o})}})};t.prototype.getTitle=function(){
return b.padTitleOrDefault(this.props.pad.title,s.default.userLocale)};t.prototype.getSortString=function(){var e=i.getSortString(this.props.pad,this.props.sortOrder);if(e)return e
;var t=f.createElement("span",null,f.createElement(M,r.__assign({},_.neveredited)));if(this.props.pad.secureLastEditorId){if(this.props.pad.secureLastEditorId==s.default.secureUserId){
var o=f.createElement(y.TimeAgo,{date:this.props.pad.lastEditedDate,pastOnly:!0});return f.createElement("span",null,f.createElement(M,r.__assign({},_.youEdited,{values:{myLastEditedTimeAgo:o}})))}
var n=f.createElement(y.TimeAgo,{date:this.props.pad.lastEditedDate,pastOnly:!0});return f.createElement("span",null,f.createElement(M,r.__assign({},_.editedBy,{values:{
lastEditorName:this.props.pad.lastEditorName,lastEditedTimeAgo:n}})))}return this.props.pad.lastEditedDate?f.createElement("span",null,f.createElement(M,r.__assign({values:{
lastEditedTimeAgo:f.createElement(y.TimeAgo,{date:this.props.pad.lastEditedDate,pastOnly:!0})}},_.lasteditedlastEditedTimeAgo))):t};t.prototype.getNumUnreadCommentsForPad=function(){var e=this
;if(!this.props.stores)return null;var t=0,o=this.props.stores.recentNotificationsList.get();if(o){var s=o.notificationsList.notifications.filter((function(t){
return t.encryptedEntityId==e.props.pad.localPadId}));if(s.length>0)for(var n=0,a=s;n<a.length;n++){switch(a[n].type){case c.NotificationType.Comment:case c.NotificationType.CommentReminder:t++}}}
return t>0?f.createElement("div",{key:"unreadComments",className:"hp-list-item-unread-notifs"},f.createElement("span",{className:"notranslate"},"● "),f.createElement(M,r.__assign({key:"comment",
values:{commentCount:t}},_.commentcountpluralonecommentothercomments))):null};t.prototype.getCurrentUserNumTasks=function(){if(this.props.pad.currentUserNumTasks){
var e=this.props.pad.currentUserNumTasks;return f.createElement("div",{key:"userTasksCount",className:"hp-list-item-unread-notifs"},f.createElement("span",{className:"notranslate"
},"● "),f.createElement(M,r.__assign({key:"task",values:{numTasks:e}},_.numtaskspluralonetaskothertasks)))}return null};t.prototype.render=function(){var e=this.props,t=e.favoriteButton,o=e.debug
;return f.createElement("div",{className:"hp-list-item-content"},f.createElement("div",{className:"hp-list-item-title"},f.createElement(l.default,{str:this.getTitle(),skipFirstEmoji:!0
}),t),this.props.blockView?this.renderBlockView():this.renderSubtitle(),o)};t.displayName="DocumentEntryContent";return t}(f.Component));t.default=S},612:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(4),n=o(8),a=o(2),i=o(200),l=o(272),c=o(10),g=o(70),d=o(0),u=o(36),p=o(71),h=o(17),f=(0,o(5).PaperIntlFactory)().F,b=(0,
a.defineMessages)({cancel:{id:"d9/SE1",defaultMessage:"Cancel"},update:{id:"40851M",defaultMessage:"Update"},updatesettingsfornumDocspluralonethisdocotherthesedocs:{id:"/53D4Z",
defaultMessage:"Update settings for {numDocs, plural,\n              one {this doc}\n              other {these docs}\n            }?"},
updatesettingsfornumFolderspluralonethisfolderotherthesefolders:{id:"mgubLS",
defaultMessage:"Update settings for {numFolders, plural,\n              one {this folder}\n              other {these folders}\n            }?"},
updatesettingsfornumTemplatespluralonethistemplateotherthesetemplates:{id:"uYN2+d",
defaultMessage:"Update settings for {numTemplates, plural,\n              one {this template}\n              other {these templates}\n            }?"},
updatesettingsfornumItemspluralonethisitemothertheseitems:{id:"dwuXt4",
defaultMessage:"Update settings for {numItems, plural,\n              one {this item}\n              other {these items}\n            }?"},byMovingNumDocs:{id:"7URPT7",
defaultMessage:"By moving {numDocs, plural, one {this doc, members of “{folderName}” will have access to this doc} other {these docs, members of “{folderName}” will have access to these # docs}}."},
bymovingthisdocmembersoffolderNamewillhaveaccesstothisdoc:{id:"9HVvRa",defaultMessage:"By moving this doc, members of “{folderName}” will have access to this doc."},
bymovingthesedocsmembersoffolderNamewillhaveaccesstothesenumDocspluralotherdocs:{id:"1d+E8m",
defaultMessage:"By moving these docs, members of “{folderName}” will have access to these {numDocs, plural, one {# doc} other {# docs}}."},byMovingNumFolders:{id:"2Spnuh",
defaultMessage:"By moving {numFolders, plural, one {this folder, members of “{folderName}” will have access to this folder} other {these folders, members of “{folderName}” will have access to these # folders}}."
},bymovingthisfoldermembersoffolderNamewillhaveaccesstothisfolder:{id:"ygulKf",defaultMessage:"By moving this folder, members of “{folderName}” will have access to this folder."},
bymovingthesefoldersmembersoffolderNamewillhaveaccesstothesenumFolderspluralotherfolders:{id:"MwGrv6",
defaultMessage:"By moving these folders, members of “{folderName}” will have access to these {numFolders, plural, one {# folder} other {# folders}}."},byMovingNumTemplates:{id:"768LKB",
defaultMessage:"By moving {numTemplates, plural, one {this template, members of “{folderName}” will have access to this template} other {these templates, members of “{folderName}” will have access to these # templates}}."
},bymovingthistemplatemembersoffolderNamewillhaveaccesstothistemplate:{id:"I7QUre",defaultMessage:"By moving this template, members of “{folderName}” will have access to this template."},
bymovingthesetemplatesmembersoffolderNamewillhaveaccesstothesenumTemplatespluralothertemplates:{id:"EGPs0j",
defaultMessage:"By moving these templates, members of “{folderName}” will have access to these\n            {numTemplates, plural, one {# template} other {# templates}}."},byMovingNumItems:{
id:"/m9rse",
defaultMessage:"By moving {numItems, plural, one {this item, members of “{folderName}” will have access to this item} other {these items, members of “{folderName}” will have access to these # items}}."
},bymovingthisitemmembersoffolderNamewillhaveaccesstothisitem:{id:"d8SnAu",defaultMessage:"By moving this item, members of “{folderName}” will have access to this item."},
bymovingtheseitemsmembersoffolderNamewillhaveaccesstothesenumItemspluralotheritems:{id:"KPXl1N",
defaultMessage:"By moving these items, members of “{folderName}” will have access to these\n            {numItems, plural, one {# item} other {# items}}."}}),m=function(e){r.__extends(t,e)
;function t(){var t=null!==e&&e.apply(this,arguments)||this;t.handleConfirm=function(){t.props.onConfirm();t.refs.popup.close()};t.handleCancel=function(){t.props.onCancel();t.refs.popup.close()}
;return t}t.prototype.render=function(){return d.createElement(s.TrackContext,{trackContext:s.AppContext.ConfirmMoveDialog},d.createElement(g.default,{ref:"popup",className:"hp-popup-link-access",
openOnMount:!0,unmountOnClose:!0},d.createElement(a.IntlProvider,{locale:n.default.userLocale},d.createElement(s.TrackContext,{trackContext:s.AppContext.ConfirmMoveDialog},d.createElement("div",{
className:"hp-popup-content"},this.renderPopupContent())))))};t.prototype.renderPopupContent=function(){
return d.createElement("div",null,d.createElement("h1",null,this.renderUpdateSettingsQuestion()),d.createElement("p",{className:"hp-sharing-status-migration-message"
},this.renderFindAndOpenMessage()),d.createElement("div",{className:"hp-sharing-bordered-folder-descriptor"},this.renderFolderDescriptor()),d.createElement("div",{className:"dmc-button-pair"
},d.createElement(c.default,{secondary:!0,onClick:this.handleCancel},d.createElement(f,r.__assign({},b.cancel))),d.createElement(c.default,{primary:!0,onClick:this.handleConfirm
},d.createElement(f,r.__assign({},b.update)))))};t.prototype.renderUpdateSettingsQuestion=function(){
if(this.props.numPads>0&&0==this.props.numFolders&&0==this.props.numTemplates)return d.createElement(f,r.__assign({values:{numDocs:this.props.numPads}
},b.updatesettingsfornumDocspluralonethisdocotherthesedocs));if(this.props.numFolders>0&&0==this.props.numPads&&0==this.props.numTemplates)return d.createElement(f,r.__assign({values:{
numFolders:this.props.numFolders}},b.updatesettingsfornumFolderspluralonethisfolderotherthesefolders))
;if(this.props.numTemplates>0&&0==this.props.numPads&&0==this.props.numFolders)return d.createElement(f,r.__assign({values:{numTemplates:this.props.numTemplates}
},b.updatesettingsfornumTemplatespluralonethistemplateotherthesetemplates));var e=this.props.numPads+this.props.numFolders+this.props.numTemplates;return d.createElement(f,r.__assign({values:{
numItems:e}},b.updatesettingsfornumItemspluralonethisitemothertheseitems))};t.prototype.renderFindAndOpenMessage=function(){var e=this.getEllipsizedTopFolderName()
;if(this.props.numPads>0&&0==this.props.numFolders&&0==this.props.numTemplates){return 1==this.props.numPads?d.createElement(f,r.__assign({values:{folderName:e}
},b.bymovingthisdocmembersoffolderNamewillhaveaccesstothisdoc)):d.createElement(f,r.__assign({values:{folderName:e,numDocs:this.props.numPads}
},b.bymovingthesedocsmembersoffolderNamewillhaveaccesstothesenumDocspluralotherdocs))}if(this.props.numFolders>0&&0==this.props.numPads&&0==this.props.numTemplates){
return 1==this.props.numFolders?d.createElement(f,r.__assign({values:{folderName:e}},b.bymovingthisfoldermembersoffolderNamewillhaveaccesstothisfolder)):d.createElement(f,r.__assign({values:{
folderName:e,numFolders:this.props.numFolders}},b.bymovingthesefoldersmembersoffolderNamewillhaveaccesstothesenumFolderspluralotherfolders))}
if(this.props.numTemplates>0&&0==this.props.numPads&&0==this.props.numFolders){return 1==this.props.numTemplates?d.createElement(f,r.__assign({values:{folderName:e}
},b.bymovingthistemplatemembersoffolderNamewillhaveaccesstothistemplate)):d.createElement(f,r.__assign({values:{folderName:e,numTemplates:this.props.numTemplates}
},b.bymovingthesetemplatesmembersoffolderNamewillhaveaccesstothesenumTemplatespluralothertemplates))}var t=this.props.numPads+this.props.numFolders+this.props.numTemplates
;return 1==t?d.createElement(f,r.__assign({values:{folderName:e}},b.bymovingthisitemmembersoffolderNamewillhaveaccesstothisitem)):d.createElement(f,r.__assign({values:{folderName:e,numItems:t}
},b.bymovingtheseitemsmembersoffolderNamewillhaveaccesstothesenumItemspluralotheritems))};t.prototype.renderFolderDescriptor=function(){var e=this.props.destinationFolderData;if(!e)return null
;var t=d.createElement(i.default,{folderData:e,hasTooltip:!1,useDecoratedIcon:!0}),o=d.createElement(l.default,{className:"hp-sharing-popup-folder-subtitle",folderData:e,showIcon:!1,useNames:!0})
;return d.createElement("div",{className:"hp-sharing-popup-folder-descriptor"},d.createElement("span",{className:"hp-sharing-popup-folder-icon"},t),d.createElement("span",{
className:"hp-sharing-popup-folder-info"},d.createElement("div",{className:"hp-sharing-popup-folder-name notranslate"},this.getEllipsizedTopFolderName()),o))}
;t.prototype.getEllipsizedTopFolderName=function(){var e=this.props.destinationFolderData;if(!e)return null;var t=e.parentFolders,o=t.length?t[0].name:e.folder.name
;return h.default.string.ellipsize(o,20)};t.show=function(e,o,r,s,n,a){var i=document.createElement("div");document.body.appendChild(i)
;u.reactDomRender(d.createElement(p.ToastAndUnmountErrorBoundary,null,d.createElement(t,{destinationFolderData:e,onConfirm:o,onCancel:r,numPads:s,numFolders:n,numTemplates:a})),i)}
;t.displayName="ConfirmMoveDialog";return t}(d.PureComponent);t.default=m},621:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.toggleSubscriptionLevel=t.getToggledSubscriptionLevelValue=t.showSnackbar=t.updateSubscriptionLevel=t.DEFAULT_SUBSCRIPTION_LEVEL=void 0
;var r=o(1),s=o(2),n=o(12),a=o(7),i=o(367),l=o(0),c=o(881),g=o(4),d=o(17),u=(0,o(5).PaperIntlFactory)(),p=u.F,h=u._f,f=(0,s.defineMessages)({followingFolderMessage:{id:"CABzp3",
defaultMessage:"You’ll get emails about changes to this folder."},unfollowingFolderMessage:{id:"ePz0OQ",defaultMessage:"You’ll no longer get emails about changes."},unabletofollowfolder:{id:"TwbPdX",
defaultMessage:"Unable to follow folder."}});t.DEFAULT_SUBSCRIPTION_LEVEL=a.FolderSubscriptionLevel.DailyEmails;function b(e,t,o){void 0===o&&(o=function(e){});(0,
g.track)("change-folder-subscription",{fromDropdown:!1,level:a.FolderSubscriptionLevel[t]});n.post({url:"/folder/set-user-folder-settings",data:{folderId:e,subscriptionLevel:t},
analyticsTag:"set-folder-subscribe",shardingKey:n.getStatelessShardingKey(),successHandler:function(r){m(e,t);o(r)},errorModalMessage:l.createElement(p,r.__assign({},f.unabletofollowfolder))})}
t.updateSubscriptionLevel=b;function m(e,o){if(i.isFolderFollowSubscriptionLevel(o)){var r=h(f.followingFolderMessage);(0,c.showFollowSnackbar)(r,d.default.fn.callAtMostOnce((function(){return(0,
t.toggleSubscriptionLevel)(e,o)})))}else{r=h(f.unfollowingFolderMessage);(0,c.showFollowManagementSnackbar)(r)}}t.showSnackbar=m;function y(e){
return i.isFolderFollowSubscriptionLevel(e)?a.FolderSubscriptionLevel.None:t.DEFAULT_SUBSCRIPTION_LEVEL}t.getToggledSubscriptionLevelValue=y;t.toggleSubscriptionLevel=function(e,t,o){
void 0===o&&(o=function(e){});b(e,y(t),o)}},627:function(e,t,o){var r;Object.defineProperty(t,"__esModule",{value:!0})
;var s=o(1),n=o(72),a=o(22),i=o(588),l=o(54),c=o(20),g=o(364),d=o(125),u=o(164),p=o(129),h=o(1624),f=o(309),b=o(387),m=o(317),y=o(388),C=o(225),M=o(26),_=o(47),S=o(8),v=o(477),E=o(890),T=o(239),w=o(1634),I=o(1635),A=o(1636),O=o(59),N=o(14),P=o(6),R=o(53),F=o(593),D=o(1637),B=o(1638),k=o(115),U=o(115),j=o(451),L=o(893),W=o(236),x=o(48),V=o(81),H=o(100),z=o(66),G=o(12),q=o(189),K=o(39),Y=o(32),X=o(44),J=o(4),Z=o(4),$=o(29),Q=o(0),ee=o(2),te=o(344),oe=o(7),re=o(7),se=o(38),ne=o(85),ae=o(31),ie=o(410),le=o(27),ce=o(61),ge=o(135),de=(0,
N.MsgFactory)("app"),ue=de.F,pe=(0,de.defineMessages)({timeToUpdatePaper:{msg:"Time to update your version of Paper. Refresh the page to view this doc.",
description:"This message is displayed if the user is running an outdated version of Paper."}}),he=((0,ee.defineMessages)({timeToUpdatePaper:{id:"clUVAf",
defaultMessage:"Time to update your version of Paper. Refresh the page to view this doc."}}),(r={})[re.UploadContentType.Audio]="audioS3PolicyAndSig",
r[re.UploadContentType.Image]="secureS3PolicyAndSig",r[re.UploadContentType.PencilKitDrawing]="pencilKitS3PolicyAndSig",r),fe=function(e){s.__extends(t,e);function t(t,o,r,n,a,i,c,g,d,u){
var p=e.call(this)||this;p.initialErrorCode=n;p.padListStore=a;p.padPreviewStore=c;p.padLifecycleHooks=g;p.serverDBStatusStore=d;p.padPreviewMode=re.PadPreviewMode.None;p.isDisposed=!1
;p.isDesktopAndOffline=function(){var e,t,o=window.App
;return!!((0,z.isApollo)()&&o&&(null===(t=null===(e=o.context)||void 0===e?void 0:e.stores)||void 0===t?void 0:t.networkStatus))&&!o.context.stores.networkStatus.isOnline()}
;p.onPadListStoreChange=function(){p.reloadPadMeta();p.updateEditability()};p.maybeLeftTaskLine=P.throttle((function(){if(ae.default.isOnButDoNotLog("sws_tasks_paper_client_sync")){
var e=p.mainAce.selection.getStart().line,t=p.mainAce.selection.getZone(),o=p.mainAce.lists.getUsuallyUniqueId(t,e);if(o!=p.lastTaskId){p.lastTaskId&&(0,k.syncPadTasks)(p.mainAce.getPadId())
;p.lastTaskId=o}}}),1e3);p.triggerDocumentScroll=function(){p.trigger("document-scroll-throttled",void 0)};p.triggerRepChange=function(){p.trigger("rep-change",void 0)}
;p.updateLastDomMutationEventTime=function(){p.lastDomMutationEventTime=Date.now()};p.onFocus=function(){p.trigger("focus",void 0)};p.onBlur=function(){p.trigger("blur",void 0)}
;p.triggerDocumentChanged=function(){p.title!=p.mainAce.contents.getTitle()&&p.handleNewTitle(p.mainAce.contents.getTitle());p.lastEditedTime=Date.now();p.updatePadLastEditedDateThrottled()
;p.performDeferredCreationIfNecessary();p.trigger("document-changed","document")};p.triggerCommentsChanged=function(){p.lastEditedTime=Date.now();p.updatePadLastEditedDateThrottled()
;p.trigger("document-changed","comments");p.isDesktopAndOffline()&&p.clientVarsSaver&&p.clientVarsSaver.saveSoon()};p.handleUserJoin=function(e){
for(var t=p.invitedUserInfos,o=!1,r=0;r<t.length;r++)if(t[r].secureUserId===e.secureUserId){t[r]=e;o=!0;break}o||t.push(e);p.peopleList&&p.peopleList.userJoinOrUpdate([e])
;p.clientVarsSaver&&p.clientVarsSaver.saveSoon()};p.handleUserUpdate=function(e){if(p.peopleList){p.peopleList.userJoinOrUpdate([e])
;e.secureUserId==p.myUserInfo.secureUserId&&P.assignIn(p.myUserInfo,e);p.updateEditability()}};p.handlePassInfoUpdate=function(){p.fetchCloudDocSeenStateFromServer()}
;p.handleMigrationLockStart=function(){p.trigger("migration-lock-start",void 0)};p.handlePadPermissionChange=function(e){if(e.userPermissions){
p.peopleList&&p.peopleList.updateUserPermissions(e.userPermissions);e.userPermissions.forEach((function(e){if(e.secureUserId==p.myUserInfo.secureUserId){p.myUserInfo.permission=e.permission
;p.updateEditability()}}))}e.guestPolicy&&p.handleGuestPolicyChange(e.guestPolicy,e.publicGuestPolicy,e.folderMemberGuestPolicy)};p.handlePadArchivedChange=function(e){p.notifyArchiveToNativeDevices()
;p.padListStore.updatePad(p.localPadId,{isArchived:!0,archivedDate:e.archivedDate,archiver:{secureUserId:e.archiver.secureUserId,name:e.archiver.name}})};p.handlePadUnarchivedChange=function(){
p.padListStore.updatePad(p.localPadId,{isArchived:!1,archiver:{}})};p.handleUserLeave=function(e){p.peopleList&&p.peopleList.userLeave(e);p.clientVarsSaver&&p.clientVarsSaver.saveSoon()
;p.mainAce.observer.trigger("remove-user-caret",e)};p.handleUserKill=function(e){for(var t=p.invitedUserInfos,o=0;o<t.length;o++)if(t[o].secureUserId===e.secureUserId){t.splice(o,1);break}
p.peopleList&&p.peopleList.userKill(e);p.clientVarsSaver&&p.clientVarsSaver.saveSoon();p.mainAce.observer.trigger("remove-user-caret",e)};p.handleUserEdited=function(e){var t=e[0],o=e[1]
;p.peopleList&&p.peopleList.userEdited(t.secureUserId,o)};p.handleFolderChange=function(e){p.folderStore&&(e?p.folderStore.setFolder(e):p.folderStore.setFolder(null))}
;p.handleFilesystemInfoUpdate=function(){p.refetchFilesystemInfo()};p.handlePadOwnerChange=function(e){e.oldOwnerSecureUserId==p.myUserInfo.secureUserId&&(p.myUserInfo.isOwner=!1)
;e.newOwnerSecureUserId==p.myUserInfo.secureUserId&&(p.myUserInfo.isOwner=!0);p.peopleList&&p.peopleList.handleOwnerChange(e.oldOwnerSecureUserId,e.newOwnerSecureUserId)
;var t=p.peopleList.getUser(e.newOwnerSecureUserId);t&&p.padListStore.updatePad(p.localPadId,{owner:t.name});p.padClientVars.secureOwnerId=e.newOwnerSecureUserId;p.secureOwnerId=e.newOwnerSecureUserId
;p.trigger("pad-owner-changed",void 0)};p.fetchAndSaveFreshCloudDocPadMetaFields=function(){p.padListStore.fetchAndSaveFreshCloudDocPadMetaFields(p.localPadId,p.padClientVars).then((function(e){
p.reloadPadMeta();e&&p.clientVarsSaver&&p.clientVarsSaver.saveSoon()}))};p.handleClientMessage=function(e){
e.type==m.CollabClientType.PAD_TITLE&&e.title!=p.title?p.handleNewTitle(e.title):"padoptions"==e.type&&p.handleOptionsChange(e.options)};p.handleServerMessage=function(e){
if("RELOAD"===e.type)e.padUrl&&_.default.href==e.padUrl&&(0,$.padPageReload)("pad_controller-handleServerMessage-RELOAD",!0);else if("HARD_RESTART"===e.type)(0,
$.padPageReload)("pad_controller-handleServerMessage-HARD_RESTART",!0);else if("NICE_RESTART"===e.type)(0,E.default)();else if("NOTICE"==e.type){if(e.text){var t=U.simpleDateTime(new Date)+" "+e.text
;x.default.show(Q.createElement(x.default,{autoDismiss:!0},t))}}else if("AUTO_SUBSCRIBED"==e.type&&!P.includes([re.PadType.space],p.getPadType())){p.trigger("auto-subscribed",void 0);(0,
J.track)("email-notifications-auto-subscribed")}};p.handleChannelStateChange=function(e){var t=e[0],o=e[1];if(t==re.ChannelState.DISCONNECTED){if(!p.allowDisconnectedMode()){
p.diagnosticInfo.disconnectedMessage=o;p.diagnosticInfo.padInitTime=p.initTime;p.asyncSendDiagnosticInfo()}var r=p.collabClient.socket.getServerDisconnectReason()
;r!=re.BootConnectionReason.PadDeleted||p.padConnectionStatus.isDeletingPad?r!=re.BootConnectionReason.PadOldArchived||p.padConnectionStatus.isArchivingPad||p.handleOldArchive():p.handleDelete()}
t==re.ChannelState.CONNECTED&&p.isCloudDoc()&&(0,X.setTimeout)((function(){return p.fetchCloudDocSeenStateFromServerThrottled()}),1e3*(15+5*se.smartRandom()))
;p.trigger("collab-channel-state-change",void 0)};p.handleCommitPerformed=function(){p.peopleList&&p.peopleList.editByCurrentUser();if(!p.isLastEditCommentOrTrivialChange()){(0,
q.doOncePerFetchPage)("trackeditstarted",(function(){Z.IntentionEvent.StartEdit.track({has_folder:p.folderStore.hasFolder(),padType:p.getPadType(),__padId:p.getPadId()})}))
;p.isLastEditOnTableCell()&&(0,q.doOncePerFetchPage)("tracktableeditstarted",(function(){Z.IntentionEvent.StartTableEdit.track()}))}};p.handleCommitAccepted=function(){
p.isLastEditCommentOrTrivialChange()||(0,q.doOncePerFetchPage)("trackedited",(function(){Z.trackEng("Edit Accepted",{has_folder:p.folderStore.hasFolder()})}))};p.lastSavePadClientVarsTime=null
;p.lastSavePadClientVarsJson=null;p.hasDisplayedWarningNotDisplayCorrectly=!1;p.warnUpgradeNotDisplayedCorrectly=function(){if(!p.hasDisplayedWarningNotDisplayCorrectly){
p.hasDisplayedWarningNotDisplayCorrectly=!0;x.default.show(Q.createElement(x.default,{clickToDismiss:!0},Q.createElement(ue,s.__assign({},pe.timeToUpdatePaper))))}}
;p.warnUpgradeSyncImpossible=function(){p.padConnectionStatus.notifySyncImpossible()};p.initTime=r?null:Date.now();p.padClientVars=t;p.padMeta=o;p.isCreationDeferred=r
;ne.default.checkArgument(!!p.padClientVars);ne.default.checkArgument(!!p.padClientVars.collab_client_vars||!!p.padClientVars.deletedPadId);p.secureS3PolicyAndSig=p.padClientVars.secureS3PolicyAndSig
;p.audioS3PolicyAndSig=p.padClientVars.audioS3PolicyAndSig;p.pencilKitS3PolicyAndSig=p.padClientVars.pencilKitS3PolicyAndSig;p.padId=p.localPadId=p.padClientVars.padId
;p.padType=p.padClientVars.padType;p.padEncryptedDomainId=p.padClientVars.encryptedDomainId;p.deletedPadId=p.padClientVars.deletedPadId;p.hashedPadId=ie.hashCode(p.localPadId);p.changesetTracker=null
;p.collabClient=null;p.secureCreatorId=p.padClientVars.secureCreatorId;p.secureOwnerId=p.padClientVars.secureOwnerId;p.diagnosticInfo={};p.mainAce=null;p.mainAceUI=null
;p.padOptions=p.padClientVars.initialOptions;p.invitedUserInfos=p.padClientVars.invitedUserInfos;p.myUserInfo=p.padClientVars.initialUserInfo
;p.peopleList=p.invitedUserInfos?new L.default(p,p.myUserInfo,p.invitedUserInfos):null;p.title=p.padClientVars.initialTitle;p.lastEditedTime=p.padClientVars.lastEditedTime;p.currentUserIsCreator=null
;p.folderStore=new I.default(p,p.padListStore);p.filesystemInfoStore=new w.default(p);p.cloudDocsUrlStore=new T.default(p)
;p.followPreferences=new D.default(p.getPadId(),p.padMeta.followPref,p.padMeta.currentUserIsCreator,p.padListStore,p.padMeta.padType);p.lastDomMutationEventTime=null
;p.linkTrackingTokenStore=new A.default(p.getPadId());p.lastTaskId=null;p.preferredEditableState=void 0!==u?u:l.EditableState.Editable
;p.updatePageUrlWithNewTitleThrottled=P.debounce(p.updatePageUrlWithNewTitle_.bind(p),1e3);p.updatePadLastEditedDateThrottled=P.debounce(p.updatePadLastEditedDate_.bind(p),1e3)
;p.updatePadLastViewedDateThrottled=P.debounce(p.updatePadLastViewedDate_.bind(p),1e3);p.debouncedTrackCommitPerformed=P.debounce((function(e){return Z.IntentionEvent.StartEdit.track(e)}),14e3,{
leading:!0,trailing:!1});p.debouncedTrackCommitAccepted=P.debounce(Z.trackEng,14e3,{leading:!0,trailing:!1})
;p.fetchCloudDocSeenStateFromServerThrottled=P.debounce(p.fetchCloudDocSeenStateFromServer.bind(p),2500,{leading:!0,trailing:!1})
;p.padUnreadNotificationsStore=new F.default(i,p.localPadId,p.padClientVars.initialUnreadNotifications||[],p.padClientVars.initialNotificationsLastUpdatedTime||0);return p}
t.prototype.getComments=function(){return this.comments};t.prototype.setComments=function(e){this.comments=e};t.prototype.setObjectStore=function(e){this.objectStore=e}
;t.prototype.reloadPadMeta=function(){if(this.localPadId){this.padMeta=this.padListStore.getPadFromMemory(this.localPadId);this.trigger("pad-meta-changed",void 0)}}
;t.prototype.getIsPublicPad=function(){return"allow"===this.padOptions.guestPolicy};t.prototype.getPadId=function(){return this.localPadId};t.prototype.getHashedPadId=function(){
return this.hashedPadId};t.prototype.getPadEncryptedDomainId=function(){return this.padEncryptedDomainId};t.prototype.getDomainOrgName=function(){return this.padClientVars.domainOrgName}
;t.prototype.isLinkExternallyAccessible=function(){return this.padClientVars.domainDocSharePolicy===te.PaperDocSharePolicy.AnyoneWithLink};t.prototype.isDocsExternallySharable=function(){
return this.padClientVars.domainDocSharePolicy!=te.PaperDocSharePolicy.OnlyTeam};t.prototype.isPersonalDomainPad=function(){return this.padClientVars.isPersonalDomainPad}
;t.prototype.isPadFavorited=function(){return this.padMeta.isFavorite};t.prototype.isPadArchived=function(){return this.padMeta.isArchived};t.prototype.isPadTrashed=function(){
return this.padMeta.isTrashed};t.prototype.isCloudDoc=function(){return this.padMeta.isCloudDoc};t.prototype.getTitle=function(){return this.title};t.prototype.getSpaceId=function(){
return this.padClientVars.spaceId};t.prototype.getUrl=function(){var e="".concat(_.default.protocol,"//").concat(_.default.host).concat(_.default.pathname);if(this.padClientVars.isCloudDoc){
var t=this.cloudDocsUrlStore.getReferenceLink();t&&(e=t)}return e};t.prototype.getDocStatus=function(){return this.padMeta.docStatus};t.prototype.getPadType=function(){
return this.padType||this.padClientVars&&this.padClientVars.padType};t.prototype.isPadTemplate=function(){return this.getPadType()==re.PadType.customTemplate};t.prototype.getSecureUserId=function(){
if(!this.myUserInfo.secureUserId)throw Error("missing secure user id");return this.myUserInfo.secureUserId};t.prototype.getUserInfo=function(){return this.myUserInfo}
;t.prototype.getUserIsCreator=function(){return this.secureCreatorId===S.default.secureUserId};t.prototype.getUserIsOwner=function(){return this.secureOwnerId===S.default.secureUserId}
;t.prototype.getUserIsArchiver=function(){return this.isPadArchived()&&this.padMeta.archiver&&this.padMeta.archiver.secureUserId===S.default.secureUserId};t.prototype.getCreatorName=function(){
var e=this.peopleList&&this.peopleList.getUser(this.secureCreatorId);return e?e.name:null};t.prototype.getOwnerName=function(){var e=this.peopleList&&this.peopleList.getUser(this.secureOwnerId)
;return e?e.name:null};t.prototype.canUserArchivePad=function(){return this.getUserIsOwner()||this.myUserInfo&&"edit"==this.myUserInfo.permission};t.prototype.canUserDeletePad=function(){
return this.getUserIsCreator()||this.myUserInfo&&"edit"==this.myUserInfo.permission};t.prototype.canUserGetCloudDocFilesystemInfo=function(){if(!this.padClientVars.isCloudDoc)return!1
;var e=this.filesystemInfoStore.getFilesystemInfoSync();return e&&!!e.canUserPerformFilesystemEditOperations};t.prototype.canUserTrashPad=function(){
return this.padClientVars.isCloudDoc?this.canUserTrashCloudDoc():this.getUserIsOwner()};t.prototype.canUserTrashCloudDoc=function(){
return!!this.padClientVars.isCloudDoc&&this.canUserGetCloudDocFilesystemInfo()};t.prototype.getFolderData=function(){return this.folderStore.getFolderData()}
;t.prototype.getCurrentRevisionNumber=function(){return this.collabClient.getCurrentRevisionNumber()};t.prototype.getS3PolicyAndSig=function(e){return this[he[e]]}
;t.prototype.getLinkTrackingToken=function(){return this.isCloudDoc()?null:this.linkTrackingTokenStore.getLinkTrackingToken()};t.prototype.refreshS3PolicyAndSig=function(e,t){var o=this;G.post({
url:"/ep/pad/s3-policy",data:{localPadId:this.getPadId(),version:3},analyticsTag:"get-s3-policy",shardingKey:G.getShardingKeyForPad(this.padId),successHandler:function(r){
o.secureS3PolicyAndSig=r.secureS3PolicyAndSig;o.audioS3PolicyAndSig=r.audioS3PolicyAndSig;o.pencilKitS3PolicyAndSig=r.pencilKitS3PolicyAndSig;var s=he[e];t(o[s])}})}
;t.prototype.getObjectStore=function(){return this.objectStore};t.prototype.getChangesetTracker=function(){return this.changesetTracker};t.prototype.commentsController=function(){
return this.mainAce.commentsController};t.prototype.isInitialized=function(){return null!==this.collabClient};t.prototype.initializeObjectStore=function(){
var e=this.padClientVars||this.padListStore.getPadClientVarsFromMemory(this.padId);if(e){
this.objectStore=new C.default(e.collab_client_vars.objectStoreBaseState,e.collab_client_vars.missedChanges&&e.collab_client_vars.missedChanges.objectStoreMissedChanges,(function(){
throw new Error("Cannot do operations on ObjectStore before CollabClient ready!")}));this.comments=new g.default(null,this,null,this.padUnreadNotificationsStore)}}
;t.prototype.initializeAndConnect=function(e,t,o,r,s){ne.default.checkArgument(!!this.padClientVars);ne.default.checkArgument(!!this.padClientVars.collab_client_vars);this.debug=new y.Debug
;this.title=this.padClientVars.initialTitle;this.pageType=e.getPageType();this.padClientVars.initialFolderData&&this.folderStore.setFolder(this.padClientVars.initialFolderData)
;this.prerender(e,t,o,r,s)};t.prototype.prerender=function(e,t,o,r,s){var n=this,a=(0,
j.getInitializationZatext)(this.padClientVars),i=a.aceZatext,l=a.baseZatext,c=a.pool,g=a.userChangeset,d=a.submittedChangeset,u=a.initialIdMapToHighlight;this.initialFocusLineResult=t&&(0,
j.getPositionForFocusOptions)(i,c,t);e.prerender(i,c,o,this.initialFocusLineResult,u,r,(function(t){n.initializeAndConnectFinish(t,e,l,d,g,c,s)}))}
;t.prototype.initializeAndConnectFinish=function(e,t,o,r,s,n,a){var i=this;this.mainAce=e;this.mainAceUI=t;this.clientVarsSaver=this.allowSavePadClientVars()?new b.ClientVarsSaver((function(e){
return i.savePadClientVars(e)}),this.isDesktopAndOffline):void 0;this.changesetTracker=new f.default(this.mainAce)
;this.collabClient=new m.CollabClient(this.myUserInfo,this.changesetTracker,this.padClientVars.collab_client_vars,this.objectStore,this.initialErrorCode,this.serverDBStatusStore,this.clientVarsSaver,this.debug)
;this.authors=new h.AuthorStore(M.default.colorPalette,this.mainAce,this.collabClient.trigger,this.myUserInfo,this.padClientVars.collab_client_vars.historicalAuthorData)
;this.collabClient.initializeChangesetTracker(o,n,r,s);this.collabClient.addHandler(m.CollabClientType.EDITOR_NEWINFO,(function(e){return i.authors.handleUserUpdated(e)}))
;this.collabClient.addHandler(m.CollabClientType.USER_KILL,(function(e){return i.authors.handleUserKilled(e)}));this.collabClient.addHandler(m.CollabClientType.USER_LEAVE,(function(e){
return i.authors.handleUserLeave(e)}));this.collabClient.addHandler(m.CollabClientType.USER_NEWINFO,(function(e){return i.authors.handleUserJoin(e)}))
;this.collabClient.addHandler(m.CollabClientType.NEW_CHANGES,(function(e){return i.authors.handleUserEdited(e)}));this.collabClient.addHandler(m.CollabClientType.SOCKET_CLOSED,(function(e){
return i.authors.handleSocketClosed()}));this.bindCollabClientEvents();this.padListStore.on("pad-list-change",this.onPadListStoreChange)
;this.linkTrackingTokenStore.on("link-tracking-addr-bar-token-changed",this.updatePageUrlWithNewTitleThrottled)
;this.padConnectionStatus=new B.PadControllerConnectionStatus(this,this.allowDisconnectedMode());this.padConnectionStatus.update();this.linkTrackingTokenStore.updateLinkTrackingToken(this.getPadId())
;this.handleNewTitle(this.padClientVars.initialTitle||"");this.secureCreatorId=this.padClientVars.secureCreatorId;this.currentUserIsCreator=this.secureCreatorId===S.default.secureUserId
;this.lastEditedTime=this.padClientVars.lastEditedTime;this.mainAce.comments&&this.mainAce.comments.registerWithObjectStore(this.getObjectStore());this.handleOptionsChange(this.padOptions)
;this.registerDocumentEvents();this.setupUnreadNotificationsHighlighting();u.peopleDataSource.clear();this.trigger("initialized",void 0)
;!this.deletedPadId&&this.localPadId&&this.padListStore.updatePad(this.localPadId,{lastViewedDate:new Date,lastActivityDate:new Date})
;v.PadLifecycleHookRunner.run("afterPadControllerInitialized",this.padLifecycleHooks,{canUserEditDoc:this.isPadEditable(),canUserDeleteDoc:this.canUserDeletePad(),
canUserArchiveDoc:this.canUserArchivePad()},a)};t.prototype.bindCollabClientEvents=function(){this.collabClient.on("user-join",this.handleUserJoin)
;this.collabClient.on("user-update",this.handleUserUpdate);this.collabClient.on("user-leave",this.handleUserLeave);this.collabClient.on("user-kill",this.handleUserKill)
;this.collabClient.on("user-edited",this.handleUserEdited);this.collabClient.on("pad-permission",this.handlePadPermissionChange);this.collabClient.on("pad-archived",this.handlePadArchivedChange)
;this.collabClient.on("pad-unarchived",this.handlePadUnarchivedChange);this.collabClient.on("client-message",this.handleClientMessage);this.collabClient.on("server-message",this.handleServerMessage)
;this.collabClient.on("channel-state-change",this.handleChannelStateChange);this.collabClient.on("commit-performed",this.handleCommitPerformed)
;this.collabClient.on("commit-accepted",this.handleCommitAccepted);this.collabClient.on("folder-change",this.handleFolderChange)
;this.collabClient.on("filesystem-update",this.handleFilesystemInfoUpdate);this.collabClient.on("pass-update",this.handlePassInfoUpdate)
;this.collabClient.on("migration-lock",this.handleMigrationLockStart);this.collabClient.on("visibility-change",this.updatePadLastViewedDateThrottled)
;this.collabClient.on("pad-owner",this.handlePadOwnerChange);this.collabClient.on("warn-upgrade-not-displayed-correctly",this.warnUpgradeNotDisplayedCorrectly)
;this.collabClient.on("warn-upgrade-sync-impossible",this.warnUpgradeSyncImpossible);this.collabClient.on("collab-pad-creation-ack",this.fetchAndSaveFreshCloudDocPadMetaFields)}
;t.prototype.unbindCollabClientEvents=function(){this.collabClient.off("user-join",this.handleUserJoin);this.collabClient.off("user-update",this.handleUserUpdate)
;this.collabClient.off("user-leave",this.handleUserLeave);this.collabClient.off("user-kill",this.handleUserKill);this.collabClient.off("user-edited",this.handleUserEdited)
;this.collabClient.off("pad-permission",this.handlePadPermissionChange);this.collabClient.off("pad-archived",this.handlePadArchivedChange)
;this.collabClient.off("pad-unarchived",this.handlePadUnarchivedChange);this.collabClient.off("client-message",this.handleClientMessage)
;this.collabClient.off("server-message",this.handleServerMessage);this.collabClient.off("channel-state-change",this.handleChannelStateChange)
;this.collabClient.off("commit-performed",this.handleCommitPerformed);this.collabClient.off("commit-accepted",this.handleCommitAccepted);this.collabClient.off("folder-change",this.handleFolderChange)
;this.collabClient.off("filesystem-update",this.handleFilesystemInfoUpdate);this.collabClient.off("pass-update",this.handlePassInfoUpdate)
;this.collabClient.off("migration-lock",this.handleMigrationLockStart);this.collabClient.off("visibility-change",this.updatePadLastViewedDateThrottled)
;this.collabClient.off("pad-owner",this.handlePadOwnerChange);this.collabClient.off("warn-upgrade-not-displayed-correctly",this.warnUpgradeNotDisplayedCorrectly)
;this.collabClient.off("warn-upgrade-sync-impossible",this.warnUpgradeSyncImpossible);this.collabClient.off("collab-pad-creation-ack",this.fetchAndSaveFreshCloudDocPadMetaFields)}
;t.prototype.getDiagnosticInfo=function(){var e={};e.time=Date.now();e=s.__assign(s.__assign({},e),this.debug.getDiagnosticInfo(this.mainAce))
;return e=s.__assign(s.__assign({},e),this.authors.getDiagnosticInfo())};t.prototype.loadFromNewClientVars=function(e,t,o){this.padMeta=t;this.setPadId(e.padId,e.encryptedDomainId,o,e.isCloudDoc)
;e.isCloudDoc&&(this.padClientVars.isCloudDoc=e.isCloudDoc);e.cloudDocId&&(this.padClientVars.cloudDocId=e.cloudDocId);e.fileId&&(this.padClientVars.fileId=e.fileId)
;e.cloudDocMaxAccessUrl&&(this.padClientVars.cloudDocMaxAccessUrl=e.cloudDocMaxAccessUrl)
;this.padUnreadNotificationsStore&&this.padUnreadNotificationsStore.initializeForNewPad(e.padId,e.initialUnreadNotifications||[],e.initialNotificationsLastUpdatedTime||0)
;this.secureS3PolicyAndSig=e.secureS3PolicyAndSig;this.audioS3PolicyAndSig=e.audioS3PolicyAndSig;this.pencilKitS3PolicyAndSig=e.pencilKitS3PolicyAndSig
;e.initialFolderData&&this.folderStore.setFolder(e.initialFolderData)};t.prototype.setPadId=function(e,t,o,r){ne.default.checkArgument(!this.padId);this.padId=this.localPadId=e
;this.hashedPadId=ie.hashCode(this.localPadId);this.padEncryptedDomainId=t;this.collabClient.setPadId(e,t,o,r);this.followPreferences.setPadId(this.getPadId())
;this.linkTrackingTokenStore.updateLinkTrackingToken(this.getPadId());this.trigger("pad-id-changed",void 0);this.handleNewTitle(this.title)};t.prototype.setPadType=function(e){this.padType=e
;this.trigger("pad-type-changed",void 0)};t.prototype.createCommentForSelection=function(e){var t=null,o=this.mainAce.comments.getSelectionThreadIds()
;o.length>0?t=o[o.length-1]:this.mainAce.execute("createThread",(function(){t=this.mainAce.comments.createThreadForSelection()}),{shouldIncorp:!1});var r={atext:e,apool:{},createdTime:new Date,
lastModifiedTime:new Date,secureAuthorId:S.default.secureUserId,authorName:S.default.userName,authorPic:S.default.userPic,isDeleted:!1,rev:0};return this.mainAce.comments.addCommentToThread(t,r)}
;t.prototype.getSelectionCommentsJson=function(){return this.mainAce.comments.getSelectionComments().map((function(e){var t=null;if(e){var o=e.map((function(e){t=e.threadId;return{id:e.id,
text:e.atext.text?e.atext.text:e.atext,apool:e.apool,authorName:e.authorName,authorPic:e.authorPic,createdDate:Date.parse(e.createdTime),isDeleted:e.isDeleted,secureAuthorId:e.secureAuthorId,
authorInitials:(0,le.nameToInitials)(e.authorName)}}));return{id:t,comments:o}}}))};t.prototype.openSharingPanel=function(e){this.trigger("open-sharing-panel",e)};t.prototype.dispose=function(){
this.isDisposed=!0;this.updatePageUrlWithNewTitleThrottled.cancel();this.updatePadLastEditedDateThrottled.cancel();this.updatePadLastViewedDateThrottled.cancel()
;this.fetchCloudDocSeenStateFromServerThrottled.cancel();this.maybeLeftTaskLine.cancel();this.debouncedTrackCommitPerformed.cancel();this.debouncedTrackCommitAccepted.cancel()
;ae.default.isOnButDoNotLog("sws_tasks_paper_client_sync")&&this.lastTaskId&&(0,k.syncPadTasks)(this.mainAce.getPadId());this.unregisterDocumentEvents();this.unbindCollabClientEvents()
;this.padListStore.off("pad-list-change",this.onPadListStoreChange);this.linkTrackingTokenStore.off("link-tracking-addr-bar-token-changed",this.updatePageUrlWithNewTitleThrottled);this.mainAce=null
;this.mainAceUI=null;this.changesetTracker=null;this.myUserInfo=null;this.peopleList=null};t.prototype.disconnect=function(e){
this.collabClient&&this.collabClient.socket.disconnect("string"==typeof e?"padController disconnect: ".concat(e):e)};t.prototype.disconnectBeforePadDeletion=function(){
if(this.collabClient&&!this.collabClient.hasUncommittedChanges()){this.padConnectionStatus.preparePadDeletion();this.collabClient.socket.disconnect("prepare for pad deletion");return!0}return!1}
;t.prototype.disconnectBeforePadArchive=function(){if(this.collabClient&&!this.collabClient.hasUncommittedChanges()){this.padConnectionStatus.preparePadArchive()
;this.collabClient.socket.disconnect("prepare for pad archive");return!0}return!1};t.prototype.unregisterDocumentEvents=function(){var e,t,o,r,s,n;if(this.mainAce&&this.mainAce.observer){
null===(e=this.mainAce.observer)||void 0===e||e.off("change",this.triggerDocumentChanged);null===(t=this.mainAce.observer)||void 0===t||t.off("rep-change",this.triggerRepChange)
;null===(o=this.mainAce.observer)||void 0===o||o.off("focus",this.onFocus);null===(r=this.mainAce.observer)||void 0===r||r.off("blur",this.onBlur)
;null===(s=this.mainAce.observer)||void 0===s||s.off("scroll-throttled",this.triggerDocumentScroll)
;null===(n=this.mainAce.observer)||void 0===n||n.off("dom-mutation",this.updateLastDomMutationEventTime);this.mainAce.observer.off("selection-change",this.maybeLeftTaskLine)
;this.mainAce.observer.off("table-selection-change",this.maybeLeftTaskLine);this.mainAce.observer.off("blur",this.maybeLeftTaskLine)}
this.getObjectStore().events.off("new-object",this.triggerCommentsChanged);this.getObjectStore().events.off("updated-object",this.triggerCommentsChanged)
;document.removeEventListener("keydown",this.padConnectionStatus.ensureTimersRunning);document.removeEventListener("mousedown",this.padConnectionStatus.ensureTimersRunning)}
;t.prototype.registerDocumentEvents=function(){this.mainAce.observer.on("change",this.triggerDocumentChanged);this.mainAce.observer.on("rep-change",this.triggerRepChange)
;this.mainAce.observer.on("focus",this.onFocus);this.mainAce.observer.on("blur",this.onBlur);this.mainAce.observer.on("scroll-throttled",this.triggerDocumentScroll)
;this.mainAce.observer.on("dom-mutation",this.updateLastDomMutationEventTime);this.mainAce.observer.on("selection-change",this.maybeLeftTaskLine)
;this.mainAce.observer.on("table-selection-change",this.maybeLeftTaskLine);this.mainAce.observer.on("blur",this.maybeLeftTaskLine)
;this.getObjectStore().events.on("new-object",this.triggerCommentsChanged);this.getObjectStore().events.on("updated-object",this.triggerCommentsChanged)
;document.addEventListener("keydown",this.padConnectionStatus.ensureTimersRunning);document.addEventListener("mousedown",this.padConnectionStatus.ensureTimersRunning)}
;t.prototype.setupUnreadNotificationsHighlighting=function(){var e=this;this.padUnreadNotificationsStore&&this.padUnreadNotificationsStore.on("pad-unread-notifications-change",(function(){
e.mainAce.notifications.updateHighlightedNotifications(e.padUnreadNotificationsStore.getInDocUnreadMentionNotificationsMap())}))};t.prototype.setMarkingUnsaved=function(e,t){
this.changesetTracker.setMarkingUnsaved(e,t);var o=this.commentsController();o&&o.getCommentsUI()&&o.getCommentsUI().setMarkingUnsaved(e)};t.prototype.handleGuestPolicyChange=function(e,t,o){
if(this.padOptions.guestPolicy!=e||this.padOptions.publicGuestPolicy!=t||this.padOptions.folderMemberGuestPolicy!=o){this.padOptions.guestPolicy=e;this.padOptions.publicGuestPolicy=t
;this.padOptions.folderMemberGuestPolicy=o;this.peopleList&&this.peopleList.onGuestPolicyChange()}};t.prototype.handleOptionsChange=function(e){
this.handleGuestPolicyChange(e.guestPolicy,e.publicGuestPolicy,e.folderMemberGuestPolicy);this.updateEditability()};t.prototype.updateEditability=function(){if(this.mainAce){
this.mainAce.contents.setEditable(this.getEditableState())&&v.PadLifecycleHookRunner.run("afterEditabilityChange",this.padLifecycleHooks,{editableState:this.getEditableState(),
preferredEditableState:this.preferredEditableState})}};t.prototype.setPreferredEditableState=function(e,t){this.preferredEditableState=e;this.updateEditability()
;t&&e==l.EditableState.Editable&&this.mainAce.getViewport().focusFirstVisibleLine()};t.prototype.getEditableState=function(e){var t=l.EditableState.Readonly
;return this.mainAce?t=!(window.App&&window.App.padLoader.containsPadController(this))||(0,
H.hasFreakedOut)()||S.default.isCurrentUserBeingAssumed||!this.padConnectionStatus||!this.padConnectionStatus.getAllowEditable()||this.padPreviewMode!=re.PadPreviewMode.None||this.isPadArchived()?l.EditableState.Readonly:this.isPadEditable()?e?l.EditableState.Editable:this.preferredEditableState:l.EditableState.CommentOnly:t
};t.prototype.setPadPreviewMode=function(e){this.padPreviewMode=e;this.updateEditability()};t.prototype.getPadPreviewMode=function(){return this.padPreviewMode};t.prototype.getPadOptions=function(){
return this.padOptions};t.prototype.isPadEditable=function(){if(this.isInitialized())return"edit"==this.myUserInfo.permission;if(S.default.isCurrentUserBeingAssumed)return!1;if(this.invitedUserInfos){
var e=this.invitedUserInfos.filter((function(e){return e.secureUserId==S.default.secureUserId}))[0];if(e)return e.isOwner||"edit"==e.permission}return!1}
;t.prototype.notifyArchiveToNativeDevices=function(){var e=window.NativeMobileAppContainer,t=e&&e.refs&&e.refs.app
;t&&t.trigger("hp-pad-connection-status-change",[re.ChannelState.DISCONNECTED,re.BootConnectionReason.PadArchived])};t.prototype.refetchFilesystemInfo=function(){
this.filesystemInfoStore&&this.filesystemInfoStore.loadFilesystemInfo()};t.prototype.handleNewTitle=function(e){this.title=Y.padTitleOrDefault(e,S.default.userLocale)
;this.updatePageUrlWithNewTitleThrottled()};t.prototype.updateShareUrl=function(e){var t=window.DesktopAppContainer,o=t&&t.refs&&t.refs.app;if(o&&e!==this.padShareUrl){
o.trigger("hp-pad-share-url-change",[this.localPadId,e]);this.padShareUrl=e}};t.prototype.updatePageUrlWithNewTitle_=function(){this.localPadId&&this.padListStore.updatePad(this.localPadId,{
title:this.title});var e,t=this.getPadType()===oe.PadType.binderPage,o=this.getPadType()===oe.PadType.space,r=this.title,s=(0,d.getFirstEmojiFromTitle)(this.title,!0);if(o){r=this.title;s=null
}else if(s){e=(0,d.getUrl)(M.default.cdn,s);var n=(0,d.getFirstEmojiFromTitle)(this.title,!0);n&&!ce.default.webkit&&(r=r.substring(n.length))}else if(this.mainAce){
var a=this.mainAce.getRep(c.Position.ROOT_ZONE).lines.atIndex(0).domInfo;if(a&&a.anyInlineMagicObj){
var i=this.mainAce.contents.getAttributesForLine(new c.Position(c.Position.ROOT_ZONE,0,0)).find((function(e){return"customEmoji"==e.key}));if(i){var l=JSON.parse(i.value);e=l.url
;if(!ce.default.webkit){var g=":".concat(l.tags,":");(r=r.trim()).substring(0,g.length)==g&&(r=r.substring(g.length).trim())}}}}var u=window.App;if(u){u.setPageTitle(r);u.setFavicon(e)
}else document.title="".concat(r," – ").concat(M.default.siteNameIncludingDropbox);if(this.getPadId()&&this.pageType!=R.default.PRESENTER&&!o&&!t)if((0,W.isCloudDocNoframe)()){
var p=Y.updateTitleInCloudDocUrl(document.location.href,this.title);(0,ge.historyReplaceState)({},document.title,p)}else{
var h=Y.preservableSuffixStringFromUrl(_.default.toString()),f=Y.relativePrettyPaperDocUrl(this.getPadId(),this.title,this.getLinkTrackingToken());(0,ge.historyReplaceState)({},document.title,(0,
K.addPathPrefix)(f+h))}var b={title:this.title,titleExcludingIcon:r,iconUrl:e};this.trigger(re.DocEvents.TitleChanged,b)};t.prototype.updatePadLastEditedDate_=function(){
this.localPadId&&this.padListStore.updatePad(this.localPadId,{lastEditedDate:new Date})};t.prototype.updatePadLastViewedDate_=function(){if(!this.deletedPadId&&this.localPadId){
this.padListStore.updatePad(this.localPadId,{lastViewedDate:new Date,lastActivityDate:new Date});var e=window.App,t=[],o=[];if(this.padMeta.folderData){
t.push(this.padMeta.folderData.folder.encryptedId);o.push(this.padMeta.folderData.folder.name);for(var r=0,s=this.padMeta.folderData.parentFolders;r<s.length;r++){var n=s[r];t.push(n.encryptedId)
;o.push(n.name)}}e&&e.trigger("record-local-paper-change",[this.localPadId,name,t,o]);S.default.isSignedIn()&&G.post({url:"/ep/pad/record-view",data:{localPadId:this.localPadId},
analyticsTag:"record-pad-view",shardingKey:G.getShardingKeyForPad(this.localPadId),dataType:"json",hpAppLevel:!1,errorHandler:function(){return!0}})}};t.prototype.dmesg=function(e){}
;t.prototype.allowDisconnectedMode=function(){var e=window.App;return!!e&&e.getNativeFeatureDetectionService().isOfflineModeEnabled()};t.prototype.asyncSendDiagnosticInfo=function(){var e=this
;this.collabClient.socket.dmesg("sending diagnostic info");this.diagnosticInfo.collabDiagnosticInfo=this.getDiagnosticInfo();window.setTimeout((function(){e.padId&&G.post({
url:"/log/connection-diagnostic-info",analyticsTag:"send-connection-diagnostic-info",shardingKey:G.getShardingKeyForPad(e.padId),suppressGlobalErrorTracking:!0,data:{padId:e.getPadId(),
diagnosticInfo:JSON.stringify(e.diagnosticInfo)}})}),0)};t.prototype.isLastEditCommentOrTrivialChange=function(){if(!this.isPadEditable())return!1
;var e=this.changesetTracker.baseAttributedTextForWire(),t=this.changesetTracker.submittedChangesetForWire(),o=t.changeset,r=t.apool;if(!o)return!1;var s=(new n.default).fromJsonableNoCloning(r)
;return(0,i.isCommentOrTrivialChange)(e.zatext,a.moveOpsToNewPool(o,s,e.pool),e.pool)};t.prototype.isLastEditOnTableCell=function(){if(!this.isPadEditable())return!1
;var e=this.changesetTracker.hasSubmittedChangeset()?this.changesetTracker.submittedChangesetForWire().changeset:null;return p.isChangesetOnTableCellInnerZone(e)};t.prototype.handleDelete=function(){
this.markAsInactiveAndNavigate(!0,!1)};t.prototype.handleOldArchive=function(){(0,z.isApollo)()?this.markAsInactiveAndNavigate(!1,!0):(0,$.padPageReload)("pad_controller-handleOldArchive")}
;t.prototype.markAsInactiveAndNavigate=function(e,t){var o=window.App;o||(0,$.padPageReload)("pad_controller-markAsInactiveAndNavigate");this.padListStore.updatePad(this.localPadId,{isTrashed:e,
isDeleted:t});var r=R.default.PAD,n={id:this.localPadId,title:this.title},a={deletedPadClientVars:s.__assign(s.__assign({},P.pick(this.padClientVars,["initialUserInfo","initialTitle","isCloudDoc"])),{
padId:this.localPadId,isTrashed:e,isDeleted:t})};o.navigate(r,n,(function(){}),a,{forceSoftNavigation:!0})};t.prototype.serializeUserInfo=function(e){return s.__assign(s.__assign({},e),{isConnected:!1
})};t.prototype.serializeInvitedUserInfos=function(){return this.invitedUserInfos.map(this.serializeUserInfo)};t.prototype.serializePadClientVars=function(){var e,t,o
;if(this.padUnreadNotificationsStore){e=this.padUnreadNotificationsStore.getPadUnreadNotifications();t=this.padUnreadNotificationsStore.lastBoltRevisionLoadedTime}else{
e=this.padClientVars.initialUnreadNotifications;t=this.padClientVars.initialNotificationsLastUpdatedTime}
o=this.collabClient?this.collabClient.serializeCollabClientVars():this.padClientVars.collab_client_vars
;var r=this.getPadType(),s=this.serializeUserInfo(this.myUserInfo),n=this.serializeInvitedUserInfos();return{version:this.padClientVars.version,collab_client_vars:o,
secureCreatorId:this.padClientVars.secureCreatorId,secureOwnerId:this.padClientVars.secureOwnerId,domainDocSharePolicy:this.padClientVars.domainDocSharePolicy,
isPersonalDomainPad:this.isPersonalDomainPad(),domainOrgName:this.getDomainOrgName(),encryptedDomainId:this.padEncryptedDomainId,initialFolderData:this.folderStore.getFolderData(),
initialOptions:this.padOptions,initialUserInfo:s,invitedUserInfos:n,initialTitle:this.title,padType:r,lastEditedTime:this.lastEditedTime,padId:this.padId,
secureS3PolicyAndSig:this.getS3PolicyAndSig(re.UploadContentType.Image),audioS3PolicyAndSig:this.getS3PolicyAndSig(re.UploadContentType.Audio),
pencilKitS3PolicyAndSig:this.getS3PolicyAndSig(re.UploadContentType.PencilKitDrawing),deletedPadId:this.deletedPadId,isCloudDoc:this.padClientVars.isCloudDoc,cloudDocId:this.padClientVars.cloudDocId,
fileId:this.padClientVars.fileId,cloudDocMaxAccessUrl:this.padClientVars.cloudDocMaxAccessUrl,initialUnreadNotifications:e,initialNotificationsLastUpdatedTime:t,
padFeatures:this.padClientVars.padFeatures,spaceId:this.padClientVars.spaceId,spacePid:this.padClientVars.spacePid}};t.prototype.allowSavePadClientVars=function(){var e,t=window.App
;return this.allowDisconnectedMode()||(null===(e=null==t?void 0:t.getNativeFeatureDetectionService())||void 0===e?void 0:e.isNativeSaveClientvarsEnabled())};t.prototype.savePadClientVars=function(e){
var t=this;if(this.getPadId()&&!(0,H.hasFreakedOut)()){var o=this.serializePadClientVars();this.allowDisconnectedMode()||(o.collab_client_vars.missedChanges=null);var r={padClientVars:o}
;v.PadLifecycleHookRunner.run("beforeSavePadClientVars",this.padLifecycleHooks,r,(function(){t.padListStore.setPadClientVars(t.getPadId(),o,(function(){t.lastSavePadClientVarsTime=Date.now()
;t.lastSavePadClientVarsJson=JSON.stringify(o);e&&e()}))}))}else e&&e()};t.prototype.unresolveCommentThread=function(e){ne.default.checkNotNull(e);ne.default.checkNotNull(this.commentsController())
;ne.default.checkArgument(this.getObjectStore().getObject(e).isDeleted);this.commentsController().undeleteCommentThread(e,!1)};t.prototype.fetchCloudDocSeenStateFromServer=function(){
null!=this.peopleList&&this.peopleList.passStore.fetchCloudDocSeenStateFromServer()};t.prototype.performDeferredCreationIfNecessary=function(){if(!this.initTime){this.initTime=Date.now()
;var e=window.App;e&&e.padLoader.createDeferredPad(this)}};s.__decorate([V.dispose],t.prototype,"padConnectionStatus",void 0);s.__decorate([V.dispose],t.prototype,"changesetTracker",void 0)
;s.__decorate([V.dispose],t.prototype,"collabClient",void 0);s.__decorate([V.dispose],t.prototype,"objectStore",void 0);s.__decorate([V.dispose],t.prototype,"comments",void 0)
;s.__decorate([V.dispose],t.prototype,"authors",void 0);s.__decorate([V.dispose],t.prototype,"folderStore",void 0);s.__decorate([V.dispose],t.prototype,"filesystemInfoStore",void 0)
;s.__decorate([V.dispose],t.prototype,"followPreferences",void 0);s.__decorate([V.dispose],t.prototype,"padUnreadNotificationsStore",void 0);return t}(O.EventEmittingClass);t.default=fe},
628:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.Channel=t.ChannelTypeName=void 0;var r=o(474),s=o(475),n=o(246),a=o(38),i=o(361)
;"undefined"==typeof streamingClientContextPath&&(streamingClientContextPath="");"undefined"==typeof streamingClientCanUseSubDomains&&(streamingClientCanUseSubDomains=!1)
;var l=["paper.dropbox.com","showcase.dropbox.com"];!function(e){e.ShortPolling="shortpolling";e.Streaming="streaming"}(t.ChannelTypeName||(t.ChannelTypeName={}));var c=function(){function e(e){
this.isClosed=!1;this.isConnected=!1;this.request=null;this.timeouts={};this.id=e.id;this.tagArg=e.tagArg;this.xhrManager=e.xhrManager;this.isocket=e.isocket;this.isNewPad=!!e.newPad}
Object.defineProperty(e,"canUseSubdomains",{get:function(){var e=0===window.location.protocol.indexOf(i.NATIVE_ASSETS_CUSTOM_PROTOCOL_SCHEME);return streamingClientCanUseSubDomains&&!e},enumerable:!1,
configurable:!0});Object.defineProperty(e,"cometHostSuffix",{get:function(){var e=window.location.host
;return"www.dropbox.com"==e?".comet.dropbox.com":2===e.split(".").length||-1!==l.indexOf(e)?".".concat(e):"comet".concat(e)},enumerable:!1,configurable:!0});e.prototype.dataHandler=function(e,t,o){(0,
n.freakoutOnExceptionWrapper)(this.dataHandlerImpl.bind(this))(e,t,o)};e.prototype.describe=function(){var e=[["isConnected",this.isConnected],["isClosed",this.isClosed],["timeouts",(0,
s.describeTimeouts)(this.timeouts)],["request",this.request?'"set"':'"not set"']].concat(this.getExtraDescribePairs());return e.reduce((function(t,o,r){var s=o[0],n=o[1]
;return r===e.length-1?"".concat(t).concat(s,": ").concat(n," }"):"".concat(t).concat(s,": ").concat(n,", ")}),"{ ")};e.prototype.disconnect=function(){this.log("".concat(this.name," disconnected"))
;this.isClosed=!0;this.clearRequest()};e.prototype.getIsConnected=function(){return this.isConnected};e.prototype.getIsClosed=function(){return this.isClosed};e.prototype.buildChannelPath=function(t){
void 0===t&&(t={});var o=t.withCreate,r=t.withNew,s="";if(o){var n=this.isocket.isOpen()?"no":"yes";s="&create=".concat(n)}var i=r?"&new=yes":"",l=""
;this.allowRandomSubdomain&&e.canUseSubdomains&&"withCredentials"in XMLHttpRequest.prototype&&(l="//".concat(this.randomStreamingDomainId()).concat(e.cometHostSuffix));var c="&padIsNew=false"
;this.isNewPad&&(c="&padIsNew=true")
;return"".concat(l).concat(streamingClientContextPath,"/channel")+"?v=".concat(2)+"&r=".concat(a.getStandardLengthRandomId())+"&id=".concat(this.id)+"&channel=".concat(this.name)+"&seq=".concat(this.isocket.getLastReceivedSeqNumber())+s+i+this.tagArg+c
};e.prototype.clearRequest=function(){if(this.request){this.request.onreadystatechange=function(){};this.request.abort();this.request=null}};e.prototype.getExtraDescribePairs=function(){return[]}
;e.prototype.log=function(e){this.isocket.log(e)};e.prototype.notifyConnect=function(){if(this.isocket.notifyConnect(this))return!0
;this.log("".concat(this.name," transport not chosen for activation."));this.disconnect();return!1};e.prototype.handleMessages=function(e,t){var o;try{o=(0,r.parseWireFormat)(e,t)}catch(e){
if(e.isDataFormatError){this.log("Data format error: ".concat(e.message));this.isocket.hiccup(this);return null}this.log("".concat(e.toString()," on line: ").concat(e.lineNumber))}
for(var s=0,n=o.messages;s<n.length;s++){var a=n[s];if(a.oob){this.log("oob message: ".concat(a.oob));if(a.fullMessage===r.ControlMessage.RestartFail){this.isocket.doDisconnect({reconnect:!0,
reason:"Server restarted or socket timed out on server."});return null}if(a.oob===r.ControlMessage.PlannedRestart){this.isocket.handlePlannedRestartMessageFromNginx();return null}
}else if(!this.isocket.dataHandler(a))break}return o.lastConsumedChar};e.prototype.randomStreamingDomainId=function(){return a.getRandomInt(1,100)};return e}();t.Channel=c},852:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});t.showFollowModal=t.shouldShowFollowModal=t.FollowModal=void 0;var r=o(1),s=o(11),n=o(1527),a=o(70),i=o(0),l=o(71),c=o(4),g=o(17),d=function(e){
r.__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.state={wasEverOpened:!1};t.afterPageLoad=function(){t.shouldAutoOpenFollowModal()&&t.open()}
;t.handlePopupOpened=function(){t.refs.followModalContents.onOpen()};t.onClose=function(){t.refs.followModalContents.onClose()};return t}t.prototype.componentDidMount=function(){
var e=this.props.appProxy.getApp();if(!e)throw Error("No app variable when follow modal was binding events.");e.on("hp-after-page-load",this.afterPageLoad)}
;t.prototype.componentWillUnmount=function(){var e,t;null===(t=null===(e=this.props.appProxy)||void 0===e?void 0:e.getApp())||void 0===t||t.off("hp-after-page-load",this.afterPageLoad)}
;t.prototype.shouldAutoOpenFollowModal=function(){return!!g.default.consumeQueryParam("followModal")};t.prototype.open=function(){var e=this;this.ensureRendered((function(){e.refs.popup.open()}))}
;t.prototype.ensureRendered=function(e){this.state.wasEverOpened?e():this.setState({wasEverOpened:!0},e)};t.prototype.render=function(){
return this.state.wasEverOpened?i.createElement(l.ToastAndUnmountErrorBoundary,null,i.createElement(c.TrackContext,{trackContext:"follow-modal"},i.createElement(a.default,{
className:"follow-manager-popup",ref:"popup",size:"large",closeButton:!0,onClose:this.onClose,onOpen:this.handlePopupOpened},i.createElement(n.FollowingModalContents,{ref:"followModalContents",
stores:this.props.stores})))):null};return t=r.__decorate([s.default],t)}(i.PureComponent);t.FollowModal=d;function u(){return window.App&&window.App.getFollowModal()}t.shouldShowFollowModal=u
;t.showFollowModal=function(){u()&&window.App.getFollowModal().open()}},853:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;var r=o(1),s=o(3),n=o(89),a=o(250),i=o(2),l=o(60),c=o(7),g=o(233),d=o(76),u=o(200),p=o(854),h=o(272),f=o(172),b=o(10),m=o(139),y=o(138),C=o(855),M=o(0),_=o(1529),S=o(84),v=o(4),E=(0,
o(5).PaperIntlFactory)(),T=E._f,w=E.F,I=(0,i.defineMessages)({axFolderLabel:{id:"xw0VuL",defaultMessage:"folder"},axTeamFolderLabel:{id:"84pWl3",defaultMessage:"team folder"},axSharedFolderLabel:{
id:"J8k+hB",defaultMessage:"shared folder"},cantselectfolderbecauseitwascreatedwithanolderversionofPaper:{id:"FuTbdi",
defaultMessage:"Can’t select folder because it was created with an older version of Paper."},lastviewedtimeAgo:{id:"hKhS9m",defaultMessage:"Last viewed {timeAgo}"},
containsnumPadspluralonedocotherdocsandfolders:{id:"jcxsko",
defaultMessage:"\n                {contains}{numPads, plural,\n                    one {# doc}\n                    other {# docs}\n                } and {folders}\n            "},contains:{
id:"G47KcV",defaultMessage:"Contains "},numfolderspluralonefolderotherfolders:{id:"Mh6XFE",
defaultMessage:"{numFolders, plural,\n                          one {# folder}\n                          other {# folders}\n                      }"}}),A=function(e){r.__extends(t,e);function t(t){
var o=e.call(this,t)||this;o.handleNetworkStatusChange=function(){o.setState({isOffline:o.props.stores.networkStatus.isOffline()})};o.handleClick=function(e){(0,v.track)("folder-clicked",r.__assign({
index:o.props.index},(0,f.default)(o.props.folderData)));App.onLinkClicked(e)};o.state={isOffline:!1};return o}t.prototype.componentDidMount=function(){var e=this.props.folderData.folder
;e.numPads<0&&(0,v.track)("negative-num-pads-for-folder",{count:e.numPads,__folderId:e.encryptedId});e.numSubFolders<0&&(0,v.track)("negative-num-sub-folders-for-folder",{count:e.numSubFolders,
__folderId:e.encryptedId});this.props.stores.networkStatus.addEventListener(this.handleNetworkStatusChange);this.handleNetworkStatusChange()};t.prototype.componentWillUnmount=function(){
this.props.stores.networkStatus.removeEventListener(this.handleNetworkStatusChange)};t.prototype.shouldShowFavoriteButton=function(){
return!this.props.isNoninteractive&&(!this.state.isOffline&&this.state.renderHiddenThings&&this.props.folderData&&this.props.folderData.folder&&!this.props.folderData.folder.isDeleted)}
;t.prototype.shouldShowOverflowMenu=function(){return!this.props.isNoninteractive&&(this.state.renderHiddenThings&&this.props.showOverflowMenu)};t.prototype.renderCheckboxTooltipContent=function(){
if((0,n.cloudDocsUxEnabled)())return M.createElement(w,r.__assign({},I.cantselectfolderbecauseitwascreatedwithanolderversionofPaper))};t.prototype.renderSubtitle=function(){
if(M.Children.count(this.props.children)>0)return this.props.children;if(this.props.hideSubtitle)return null;var e,t=this.props.folderData,o=t.folder,s=t.parentFolders
;this.props.showPath&&s&&s.length&&(e=M.createElement("span",{className:"hp-list-item-parent-path",key:"path"},M.createElement(l.default,{str:d.getFullParentFolderName(this.props.folderData)})))
;var n=this.props.hideSharingStatus?null:M.createElement(h.default,{folderData:this.props.folderData,showIcon:!1,stores:this.props.stores,includeVisibleTo:!0})
;if(this.props.sortOrder&&this.props.sortOrder==c.ListViewFilter.openedByMe&&this.props.folderData.folderView){var i=Math.max((0,
a.dateSortValue)(this.props.folderData.folderView.lastViewedFolderTime),(0,a.dateSortValue)(this.props.folderData.folderView.lastViewedPadTime));n=M.createElement(w,r.__assign({values:{
timeAgo:M.createElement(S.TimeAgo,{date:i,pastOnly:!0})}},I.lastviewedtimeAgo))}return M.createElement("div",{className:"hp-list-item-subtitle"},e,e?M.createElement("span",{className:"notranslate"
}," · "):null,n,n?M.createElement("span",{className:"notranslate"}," · "):null,M.createElement(w,r.__assign({values:{contains:M.createElement("span",{className:"ax-visually-hidden"
},M.createElement(w,r.__assign({},I.contains))),numPads:Math.max(o.numPads,0),folders:M.createElement(w,r.__assign({values:{numFolders:Math.max(o.numSubFolders,0)}
},I.numfolderspluralonefolderotherfolders))}},I.containsnumPadspluralonedocotherdocsandfolders)))};t.prototype.renderPresence=function(){if(this.props.hidePresence)return null
;var e=this.props.folderData,t=e.folder,o=e.members,r=[];(t.guestPolicy==c.FolderGuestPolicy.public||o.length>1)&&(r=o);return M.createElement(y.LazyRenderForServer,null,M.createElement("div",{
className:"hp-list-item-presence"},M.createElement(p.default,{border:!0,users:r})))};t.prototype.render=function(){var e,t=this;if(this.shouldShowFavoriteButton()){
var o=this.props.folderData&&this.props.folderData.inSidebar;e=M.createElement(y.LazyRenderForServer,null,M.createElement(g.default,{inline:!0,itemType:"folder",
folderInfo:this.props.folderData.folder,isFavorite:o,className:"hp-list-item-star",source:this.props.trackListView,stores:this.props.stores}))}
var r=this.shouldShowOverflowMenu()?M.createElement(_.default,{subFolderData:this.props.folderData,isPinned:this.props.isPinned
}):null,n=s("hp-list-item","hp-list-item-folder","selenium-list-item-folder",{"hp-list-item-selected":this.props.checked,"hp-list-item-cursor":this.props.cursor}),a=I.axFolderLabel
;this.props.folderData.folder.guestPolicy==c.FolderGuestPolicy.public?a=I.axTeamFolderLabel:this.props.folderData.members.length>1&&(a=I.axSharedFolderLabel)
;var i=T(a),p=d.prettyFolderUrl(this.props.folderData.folder),h=M.createElement(C.MultiselectCheckbox,{onToggle:function(e){return t.props.onToggle(t.props.checkboxId,e)},checked:this.props.checked,
enableCheckbox:this.props.enableCheckbox,alwaysShowCheckbox:this.props.alwaysShowCheckbox,className:this.props.checkboxClassName,lazyRender:!this.state.renderHiddenThings,
title:this.props.folderData.folder.name,tooltipContent:this.renderCheckboxTooltipContent()});return M.createElement(b.default,{styleless:!0,disabled:this.props.isNoninteractive,className:n,
href:this.props.isNoninteractive?void 0:p,"track-title":"Folder entry","track-index":this.props.index,"data-id":this.props.folderData.folder.encryptedId,onClick:this.handleClick
},h,M.createElement(m.default,{title:this.props.folderData.folder.name,hideEmojiBadge:!0},M.createElement(u.default,{folderData:this.props.folderData,useDecoratedIcon:!0})),M.createElement("div",{
className:"hp-list-item-content"},M.createElement("div",{className:"hp-list-item-title"},M.createElement(l.default,{str:this.props.folderData.folder.name}),M.createElement("div",{
className:"ax-visually-hidden"}," ",i),e),this.renderSubtitle()),this.renderPresence(),r)};t.displayName="FolderListEntry";return t=r.__decorate([y.default],t)}(M.Component);t.default=A},
854:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(25),s=o(10),n=o(149),a=o(0),i=o(102),l=(0,r.createReactClass)({displayName:"FolderInvitedUsers",mixins:[n],
render:function(){return a.createElement("div",{className:"hp-sharing-connected-users"},this.render_("hp-sharing-connected-users-list",4),this.render_("hp-sharing-connected-users-list-compact",1))},
render_:function(e,t){var o,r;if(this.props.users.length>t+1){o=this.props.users.slice(0,t).map(this.renderUser_,this);var n=this.props.users.length-t,i=n>=100?"99+":n
;r=a.createElement("li",null,a.createElement(s.default,{className:"hp-sharing-overflow-button notranslate",hasPopup:!0,onClick:this.onExtraUsersClick_},i))
}else o=this.props.users.map(this.renderUser_,this);o=o.reverse();return a.createElement("ul",{className:e},r,o)},onExtraUsersClick_:function(){
this.props.onExtraPeopleClick&&this.props.onExtraPeopleClick()},renderUser_:function(e){var t=e.encryptedAccountId;return a.createElement("li",{className:t,key:t},a.createElement(i.default,{user:e,
onUserClick:this.onUserClicked_,border:this.props.border,showConnectedStatus:!1,tooltipSubtitle:e.email}))}});t.default=l},855:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0})
;t.MultiselectCheckbox=void 0;var r=o(1),s=o(258),n=o(3),a=o(120),i=o(0),l=function(e){r.__extends(t,e);function t(t){var o=e.call(this,t)||this;o.handleClick=function(e){
o.props.onToggle&&o.props.onToggle(e);e.preventDefault();e.stopPropagation();return!1};o.state={renderCheckbox:!t.lazyRender,id:void 0};return o}t.prototype.componentDidMount=function(){
this.setState({id:t.uniqueId++})};t.prototype.componentWillReceiveProps=function(e){this.state.renderCheckbox||!e.checked&&!e.alwaysShowCheckbox&&e.lazyRender||this.setState({renderCheckbox:!0})}
;t.prototype.onChange=function(){};t.prototype.render=function(){
var e,t=this.state.id?"hp-multiselect-checkbox-".concat(this.state.id):void 0,o=n("hp-checkbox-icon","selenium-checkbox",this.props.className,{"hp-checkbox-icon-enabled":this.props.enableCheckbox,
"hp-checkbox-icon-shown":this.props.alwaysShowCheckbox}),r=null;this.state.renderCheckbox&&(r=i.createElement(s.Checkbox,{id:t,checked:this.props.checked,title:this.props.title,onChange:this.onChange
}));var l="hp-checkbox-icon-checkbox checkbox-icon-checkbox-dig";e=this.props.tooltipContent?i.createElement(a.default,{tooltip:this.props.tooltipContent,tooltipAside:"right",className:l,
onClick:this.handleClick},r,i.createElement("label",{htmlFor:t})):i.createElement("div",{className:l,onClick:this.handleClick},r,i.createElement("label",{htmlFor:t}));return i.createElement("div",{
className:o},e)};t.displayName="MultiselectCheckbox";t.uniqueId=1;t.defaultProps={checked:!1};return t}(i.PureComponent);t.MultiselectCheckbox=l},881:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});t.showFollowSnackbar=t.showFollowManagementSnackbar=void 0;var r=o(1),s=o(8),n=o(2),a=o(14),i=o(0),l=o(852),c=o(88),g=(0,
a.MsgFactory)("composer"),d=g.defineMessages,u=g.IntlMessageFormat,p=d({manageFollowedDocs:{msg:"Manage followed docs",
description:"Button to show list of docs and folders that the user is subscribed to / following."},unfollow:{msg:"Unfollow",
description:"Button allowing user to unfollow / unsubscribe to doc or folder."}});(0,n.defineMessages)({manageFollowedDocs:{id:"7zietj",defaultMessage:"Manage followed docs"},unfollow:{id:"RT80dm",
defaultMessage:"Unfollow"}});t.showFollowManagementSnackbar=function(e){var t=(0,
l.shouldShowFollowModal)(),o=new u(p.manageFollowedDocs,s.default.userLocale).format(),n=new u(c.SNACKBAR_MESSAGES.close,s.default.userLocale).format()
;c.Snackbar.show(i.createElement(c.Snackbar,r.__assign({className:"notranslate",variant:"complete",title:e,timeoutDelayMs:1e4,closeButtonText:n},t?{onActionClick:l.showFollowModal,actionButtonText:o
}:{})))};t.showFollowSnackbar=function(e,t){var o=new u(p.unfollow,s.default.userLocale).format(),r=new u(c.SNACKBAR_MESSAGES.close,s.default.userLocale).format()
;c.Snackbar.show(i.createElement(c.Snackbar,{className:"notranslate",variant:"complete",title:e,timeoutDelayMs:1e4,onActionClick:t,actionButtonText:o,closeButtonText:r}))}},890:function(e,t,o){
Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(8),n=o(14),a=o(10),i=o(70),l=o(25),c=o(136),g=o(29),d=o(0),u=o(36),p=(0,n.MsgFactory)("util"),h=p.F,f=(0,p.defineMessages)({
restartNeeded:{msg:"Restart Needed…",description:"Header of a popup-message that appears when the user needs to restart the app."},paperhasreleasedanewversionandthepagemustberefreshedtocontinue:{
msg:"Paper has released a new version and the page must be refreshed to continue.",description:"Body of a popup-message that appears when the user needs to restart the app."},
weapologizefortheinconveniencethisisarareoccurence:{msg:"We apologize for the inconvenience, this is a rare occurence.",
description:"Body of a popup-message that appears when the user needs to restart the app."},iwanttocopymyworkfirstplease:{msg:"I want to copy my work first, please.",
description:"Button on a popup-message that appears when the user needs to restart the app. If the user clicks this button, then the popup disappears, which allows the user to copy their work."},
restartnow:{msg:"Restart now",description:"Button on a popup-message that appears when the user needs to restart the app. If the user clicks this button, then the app refreshes."}})
;t.default=function(){console.error("App restart!");var e=document.createElement("div");document.body.appendChild(e)
;u.reactDomRender(d.createElement(c.PageErrorBoundary,null,d.createElement(b,null)),e)};var b=(0,l.createReactClass)({displayName:"AppRestartPopup",mouseMoveTimeout_:null,componentDidMount:function(){
clearTimeout(this.mouseMoveTimeout_);this.mouseMoveTimeout_=window.realSetTimeout(this.refresh,3e5);document.removeEventListener("mousemove",this.handleMouseMove)
;document.addEventListener("mousemove",this.handleMouseMove)},handleMouseMove:function(){clearTimeout(this.mouseMoveTimeout_)},close:function(){this.refs.popup.close();setTimeout(this.open,6e4)},
refresh:function(){(0,g.locationReload)("restart-refresh")},render:function(){return d.createElement(i.default,{openOnMount:!0,ref:"popup",className:"hp-freakout-popup",size:"large"
},d.createElement(n.IntlProvider,{locale:s.default.userLocale},d.createElement("div",{className:"hp-popup-content"
},d.createElement("h1",null,d.createElement(h,r.__assign({},f.restartNeeded))),d.createElement("strong",null,d.createElement(h,r.__assign({},f.paperhasreleasedanewversionandthepagemustberefreshedtocontinue))),d.createElement("br",null),d.createElement(h,r.__assign({},f.weapologizefortheinconveniencethisisarareoccurence)),d.createElement("br",null),d.createElement("br",null),d.createElement("div",{
className:"dmc-button-pair-full"},d.createElement(a.default,{secondary:!0,onClick:this.close},d.createElement(h,r.__assign({},f.iwanttocopymyworkfirstplease))),d.createElement(a.default,{primary:!0,
onClick:this.refresh},d.createElement(h,r.__assign({},f.restartnow)))))))}})},891:function(module,exports,__webpack_require__){(function(global,Buffer){
/*! protobuf
Copyright 2014, Google Inc.  All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
    * Neither the name of Google Inc. nor the names of its
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(e,t,o){e instanceof String&&(e=String(e));for(var r=e.length,s=0;s<r;s++){var n=e[s];if(t.call(o,n,s,e))return{i:s,v:n}}return{
i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1
;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,o){e!=Array.prototype&&e!=Object.prototype&&(e[t]=o.value)}
;$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(e,t,o,r){if(t){
o=$jscomp.global;e=e.split(".");for(r=0;r<e.length-1;r++){var s=e[r];s in o||(o[s]={});o=o[s]}(t=t(r=o[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(o,e,{configurable:!0,writable:!0,value:t})
}};$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3");$jscomp.checkStringArgs=function(e,t,o){
if(null==e)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined")
;if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return e+""};$jscomp.polyfill("String.prototype.startsWith",(function(e){
return e||function(e,t){var o=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var r=o.length,s=e.length;t=Math.max(0,Math.min(0|t,o.length));for(var n=0;n<s&&t<r;)if(o[t++]!=e[n++])return!1
;return n>=s}}),"es6","es3");$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var o=$jscomp.checkStringArgs(this,e,"endsWith");e+="";void 0===t&&(t=o.length)
;t=Math.max(0,Math.min(0|t,o.length));for(var r=e.length;0<r&&0<t;)if(o[--t]!=e[--r])return!1;return 0>=r}}),"es6","es3");$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){
var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var o="";e;)(1&e&&(o+=t),e>>>=1)&&(t+=t);return o}}),"es6","es3")
;$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this
;goog.isDef=function(e){return void 0!==e};goog.isString=function(e){return"string"==typeof e};goog.isBoolean=function(e){return"boolean"==typeof e};goog.isNumber=function(e){return"number"==typeof e}
;goog.exportPath_=function(e,t,o){e=e.split(".");o=o||goog.global;e[0]in o||void 0===o.execScript||o.execScript("var "+e[0])
;for(var r;e.length&&(r=e.shift());)!e.length&&goog.isDef(t)?o[r]=t:o=o[r]&&o[r]!==Object.prototype[r]?o[r]:o[r]={}};goog.define=function(e,t){if(!COMPILED){
var o=goog.global.CLOSURE_UNCOMPILED_DEFINES,r=goog.global.CLOSURE_DEFINES
;o&&void 0===o.nodeType&&Object.prototype.hasOwnProperty.call(o,e)?t=o[e]:r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)&&(t=r[e])}goog.exportPath_(e,t);return t};goog.DEBUG=!0
;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(e){
if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)
};goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var o=e;(o=o.substring(0,o.lastIndexOf(".")))&&!goog.getObjectByName(o);)goog.implicitNamespaces_[o]=!0}
goog.exportPath_(e,t)};goog.getScriptNonce=function(e){if(e&&e!=goog.global)return goog.getScriptNonce_(e.document);null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document))
;return goog.cspNonce_};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.cspNonce_=null;goog.getScriptNonce_=function(e){
return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/
;goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier")
;if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.")
;if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e;if(!COMPILED){
if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}};goog.module.get=function(e){return goog.module.getInternal_(e)}
;goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}
return null};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()}
;goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};goog.isInEs6ModuleLoader_=function(){
if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())}
;goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module")
;if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0}
;goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module")
;if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.")
;if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp
;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath());goog.loadedModules_[e]={exports:t,
type:goog.ModuleType.ES6,moduleId:e}}};goog.module.declareNamespace=goog.declareModuleId;goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",
Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))};goog.forwardDeclare=function(e){};COMPILED||(goog.isProvided_=function(e){
return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0});goog.getObjectByName=function(e,t){
e=e.split(".");t=t||goog.global;for(var o=0;o<e.length;o++)if(t=t[e[o]],!goog.isDefAndNotNull(t))return null;return t};goog.globalize=function(e,t){t=t||goog.global;for(var o in e)t[o]=e[o]}
;goog.addDependency=function(e,t,o,r){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,o,r)};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(e){
goog.global.console&&goog.global.console.error(e)};goog.require=function(e){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e);if(goog.isProvided_(e)){
if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{
goog.moduleLoaderState_=t}}return null}};goog.requireType=function(e){return{}};goog.basePath="";goog.nullFunction=function(){};goog.abstractMethod=function(){
throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(e){e.instance_=void 0;e.getInstance=function(){if(e.instance_)return e.instance_
;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e);return e.instance_=new e}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0
;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE="detect";goog.ASSUME_ES_MODULES_TRANSPILED=!1
;goog.TRANSPILE_TO_LANGUAGE="";goog.TRANSPILER="transpile.js";goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{
var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping}
;goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"};goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",
declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};if(goog.isFunction(e))var o=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition")
;goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),o=goog.loadModuleFromSource_.call(void 0,e)}var r=goog.moduleLoaderState_.moduleName
;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"')
;goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof o&&null!=o&&Object.seal(o),goog.loadedModules_[r]={exports:o,
type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}};goog.loadModuleFromSource_=function(a){eval(a);return{}};goog.normalizePath_=function(e){
e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")};goog.loadFileSync_=function(e){
if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;t.open("get",e,!1);t.send()
;return 0==t.status||200==t.status?t.responseText:null}catch(e){return null}};goog.transpile_=function(a,b,c){var d=goog.global.$jscomp;d||(goog.global.$jscomp=d={});var e=d.transpile;if(!e){
var f=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(f);if(g){(function(){eval(g+"\n//# sourceURL="+f)}).call(goog.global)
;if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport))
;goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile;d=goog.global.$jscomp;e=d.transpile}}e||(e=d.transpile=function(e,t){
goog.logToConsole_(t+" requires transpilation but no transpiler was found.");return e});return e(a,b,c)};goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null"
;if(e instanceof Array)return"array";if(e instanceof Object)return t;var o=Object.prototype.toString.call(e);if("[object Window]"==o)return"object"
;if("[object Array]"==o||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array"
;if("[object Function]"==o||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}
;goog.isNull=function(e){return null===e};goog.isDefAndNotNull=function(e){return null!=e};goog.isArray=function(e){return"array"==goog.typeOf(e)};goog.isArrayLike=function(e){var t=goog.typeOf(e)
;return"array"==t||"object"==t&&"number"==typeof e.length};goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear};goog.isFunction=function(e){
return"function"==goog.typeOf(e)};goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t};goog.getUid=function(e){
return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]};goog.removeUid=function(e){
null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}};goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0);goog.uidCounter_=0
;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone()
;t="array"==t?[]:{};for(var o in e)t[o]=goog.cloneObject(e[o]);return t}return e};goog.bindNative_=function(e,t,o){return e.call.apply(e.bind,arguments)};goog.bindJs_=function(e,t,o){
if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(o,r)
;return e.apply(t,o)}}return function(){return e.apply(t,arguments)}};goog.bind=function(e,t,o){
Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)}
;goog.partial=function(e,t){var o=Array.prototype.slice.call(arguments,1);return function(){var t=o.slice();t.push.apply(t,arguments);return e.apply(this,t)}};goog.mixin=function(e,t){
for(var o in t)e[o]=t[o]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{
if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{
delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{
var t=goog.global.document,o=t.createElement("SCRIPT");o.type="text/javascript";o.defer=!1;o.appendChild(t.createTextNode(e));t.head.appendChild(o);t.head.removeChild(o)}}}
;goog.evalWorksForGlobals_=null;goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var o=function(e){
return goog.cssNameMapping_[e]||e},r=function(e){e=e.split("-");for(var t=[],r=0;r<e.length;r++)t.push(o(e[r]));return t.join("-")}
;r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:r:function(e){return e};e=t?e+"-"+r(t):r(e);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e}
;goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e;goog.cssNameMappingStyle_=t};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING)
;goog.getMsg=function(e,t){t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,o){return null!=t&&o in t?t[o]:e})));return e};goog.getMsgWithFallback=function(e,t){return e};goog.exportSymbol=function(e,t,o){
goog.exportPath_(e,t,o)};goog.exportProperty=function(e,t,o){e[t]=o};goog.inherits=function(e,t){function o(){}o.prototype=t.prototype;e.superClass_=t.prototype;e.prototype=new o
;e.prototype.constructor=e;e.base=function(e,o,r){for(var s=Array(arguments.length-2),n=2;n<arguments.length;n++)s[n-2]=arguments[n];return t.prototype[o].apply(e,s)}};goog.base=function(e,t,o){
var r=arguments.callee.caller
;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C")
;if(void 0!==r.superClass_){for(var s=Array(arguments.length-1),n=1;n<arguments.length;n++)s[n-1]=arguments[n];return r.superClass_.constructor.apply(e,s)}
if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");s=Array(arguments.length-2);for(n=2;n<arguments.length;n++)s[n-2]=arguments[n]
;n=!1;for(var a=e.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[t]===r)n=!0;else if(n)return a.prototype[t].apply(e,s)
;if(e[t]===r)return e.constructor.prototype[t].apply(e,s);throw Error("goog.base called from a method of one name to a method of a different name")};goog.scope=function(e){
if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);goog.defineClass=function(e,t){
var o=t.constructor,r=t.statics;o&&o!=Object.prototype.constructor||(o=function(){throw Error("cannot instantiate an interface (no constructor defined).")})
;o=goog.defineClass.createSealingConstructor_(o,e);e&&goog.inherits(o,e);delete t.constructor;delete t.statics;goog.defineClass.applyProperties_(o.prototype,t)
;null!=r&&(r instanceof Function?r(o):goog.defineClass.applyProperties_(o,r));return o};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;goog.defineClass.createSealingConstructor_=function(e,t){
if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var o=!goog.defineClass.isUnsealable_(t),r=function(){var t=e.apply(this,arguments)||this;t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_]
;this.constructor===r&&o&&Object.seal instanceof Function&&Object.seal(t);return t};return r};goog.defineClass.isUnsealable_=function(e){
return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]}
;goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.defineClass.applyProperties_=function(e,t){
for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)o=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],
Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])};goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)}
;goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document
;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){
if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){
var e=goog.global.document,t=e.currentScript;for(t=(e=t?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var o=e[t].src,r=o.lastIndexOf("?");r=-1==r?o.length:r;if("base.js"==o.substr(r-7,7)){
goog.basePath=o.substr(0,r-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},
goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,o){e?d[t]=!0:o()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1
},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";a("es5",(function(){return b("[1,].length==1")}));a("es6",(function(){
return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')
}));a("es6-impl",(function(){return!0}));a("es7",(function(){return b("2 ** 2 == 4")}));a("es8",(function(){return b("async () => 1, true")}));a("es9",(function(){return b("({...rest} = {}), true")}))
;a("es_next",(function(){return!1}));return{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1
;if(!this.requiresTranspilation_){var o=this.createRequiresTranspilation_();this.requiresTranspilation_=o.map;this.transpilationTarget_=this.transpilationTarget_||o.target}
if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"))
;throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,
goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={};this.idToPath_={};this.written_={};this.loadingDeps_=[]
;this.depsToLoad_=[];this.paused_=!1;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){
function o(){r&&(goog.global.setTimeout(r,0),r=null)}var r=t;if(e.length){t=[];for(var s=0;s<e.length;s++){var n=this.getPathFromDeps_(e[s]);if(!n)throw Error("Unregonized namespace: "+e[s])
;t.push(this.dependencies_[n])}n=goog.require;var a=0;for(s=0;s<e.length;s++)n(e[s]),t[s].onLoad((function(){++a==e.length&&o()}))}else o()},goog.DebugLoader_.prototype.loadClosureDeps=function(){
this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1));this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){
(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},
goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,
goog.logToConsole_(e),Error(e);var t=this,o=[],r=function(e){var s=t.getPathFromDeps_(e);if(!s)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[s]){t.written_[s]=!0;e=t.dependencies_[s]
;for(s=0;s<e.requires.length;s++)goog.isProvided_(e.requires[s])||r(e.requires[s]);o.push(e)}};r(e);e=!!this.depsToLoad_.length;this.depsToLoad_=this.depsToLoad_.concat(o)
;this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var o=!1,r=e.depsToLoad_.shift(),s=!1
;e.loading_(r);var n={pause:function(){if(o)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){o?e.resume_():t=!1},loaded:function(){
if(s)throw Error("Double call to loaded.");s=!0;e.loaded_(r)},pending:function(){for(var t=[],o=0;o<e.loadingDeps_.length;o++)t.push(e.loadingDeps_[o]);return t},setModuleState:function(e){
goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,o){o&&(goog.loadedModules_[o]={exports:t,type:goog.ModuleType.ES6,moduleId:o||""})},
registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){
if(o)throw Error("Cannot register with defer after the call to load.");e.defer_(r,t)},areDepsLoaded:function(){return e.areDepsLoaded_(r.requires)}};try{r.load(n)}finally{o=!0}}();t&&this.pause_()},
goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},
goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){
this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}
if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},
goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var o=this.getPathFromDeps_(e[t]);if(!o||!(o in this.deferredCallbacks_)&&!goog.isProvided_(e[t]))return!1}return!0},
goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){
this.deferredCallbacks_[e.path]=t;this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},
goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,o){},
goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},
goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,o,r,s){this.path=e;this.relativePath=t;this.provides=o;this.requires=r;this.loadFlags=s;this.loaded_=!1
;this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");0<=t&&(0<=(t=(e=e.substring(t+3)).indexOf("/"))&&(e=e.substring(t+1)));return e},
goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[]
;for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32)
;goog.Dependency.callbackMap_[t]=e;return t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){
if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).")
;for(var o=goog.Dependency.callbackMap_[e],r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);o.apply(void 0,r)},goog.Dependency.prototype.load=function(e){
if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document
;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path)){e.loaded();return}throw Error('Cannot write "'+this.path+'" after document load')}
if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var o=goog.Dependency.registerCallback_((function(t){
goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(o),e.loaded())
})),r=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':""
;t.write('<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+o+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+r+"><\/script>")
}else{var s=t.createElement("script");s.defer=goog.Dependency.defer_;s.async=!1;s.type="text/javascript";(r=goog.getScriptNonce())&&s.setAttribute("nonce",r);goog.DebugLoader_.IS_OLD_IE_?(e.pause(),
s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(e.loaded(),e.resume())}):s.onload=function(){s.onload=null;e.loaded()};s.src=this.path;t.head.appendChild(s)}
}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),
"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},
goog.Es6ModuleDependency=function(e,t,o,r,s){goog.Dependency.call(this,e,t,o,r,s)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){
if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document,o=this;if(goog.isDocumentLoading_()){
var r=function(e,o){o?t.write('<script type="module" crossorigin>'+o+"<\/script>"):t.write('<script type="module" crossorigin src="'+e+'"><\/script>')};goog.Dependency.defer_=!0}else r=function(e,o){
var r=t.createElement("script");r.defer=!0;r.async=!1;r.type="module";r.setAttribute("crossorigin",!0);var s=goog.getScriptNonce();s&&r.setAttribute("nonce",s);o?r.textContent=o:r.src=e
;t.head.appendChild(r)};var s=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(s);e.setModuleState(goog.ModuleType.ES6)}))
;r(void 0,'goog.Dependency.callback_("'+s+'")');r(this.path,void 0);var n=goog.Dependency.registerCallback_((function(t){goog.Dependency.unregisterCallback_(n)
;e.registerEs6ModuleExports(o.path,t,goog.moduleLoaderState_.moduleName)}));r(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+n+'", m)')
;var a=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(a);e.clearModuleState();e.loaded()}));r(void 0,'goog.Dependency.callback_("'+a+'")')
}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,o,r,s){goog.Dependency.call(this,e,t,o,r,s)
;this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),
goog.TransformedDependency.prototype.load=function(e){function t(){r.contents_=goog.loadFileSync_(r.path);r.contents_&&(r.contents_=r.transform(r.contents_),
r.contents_&&(r.contents_+="\n//# sourceURL="+r.path))}function o(){r.lazyFetch_&&t();if(r.contents_){s&&e.setModuleState(goog.ModuleType.ES6);try{var o=r.contents_;r.contents_=null;goog.globalEval(o)
;if(s)var n=goog.moduleLoaderState_.moduleName}finally{s&&e.clearModuleState()}s&&goog.global.$jscomp.require.ensure([r.getPathName()],(function(){
e.registerEs6ModuleExports(r.path,goog.global.$jscomp.require(r.getPathName()),n)}));e.loaded()}}var r=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),
this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var s=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t()
;var n=1<e.pending().length,a=n&&goog.DebugLoader_.IS_OLD_IE_;n=goog.Dependency.defer_&&(n||goog.isDocumentLoading_());if(a||n)e.defer((function(){o()}));else{var i=goog.global.document
;a=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global;if(s&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!a){goog.Dependency.defer_=!0;e.pause();var l=i.onreadystatechange
;i.onreadystatechange=function(){"interactive"==i.readyState&&(i.onreadystatechange=l,o(),e.resume());goog.isFunction(l)&&l.apply(void 0,arguments)}
}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_((function(){
goog.Dependency.unregisterCallback_(t);o()}));e.write('<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>")}():o()}}},
goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,o,r,s,n){goog.TransformedDependency.call(this,e,t,o,r,s);this.transpiler=n},
goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},
goog.PreTranspiledEs6ModuleDependency=function(e,t,o,r,s){goog.TransformedDependency.call(this,e,t,o,r,s)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),
goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,o,r,s,n,a){goog.TransformedDependency.call(this,e,t,o,r,s);this.needsTranspile_=n
;this.transpiler_=a},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){
this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName()))
;return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"
},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,o,r){t=t||[];e=e.replace(/\\/g,"/")
;var s=goog.normalizePath_(goog.basePath+e);r&&"boolean"!=typeof r||(r=r?{module:goog.ModuleType.GOOG}:{})
;o=this.factory_.createDependency(s,e,t,o,r,goog.transpiler_.needsTranspile(r.lang||"es3",r.module));this.dependencies_[s]=o;for(o=0;o<t.length;o++)this.idToPath_[t[o]]=s;this.idToPath_[e]=s},
goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,o,r,s,n){
return s.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,o,r,s,n,this.transpiler):n?new goog.TranspiledDependency(e,t,o,r,s,this.transpiler):s.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,o,r,s):new goog.Es6ModuleDependency(e,t,o,r,s):new goog.Dependency(e,t,o,r,s)
},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},
goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)});var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},
BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,
SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31};jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5}
;jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,o=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:
case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return o.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return o.FIXED64;case t.STRING:case t.MESSAGE:
case t.BYTES:return o.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return o.FIXED32;default:return o.INVALID}};jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1
;jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60;jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54;jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22
;jspb.BinaryConstants.FLOAT64_EPS=5e-324;jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324;jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292;jspb.BinaryConstants.TWO_TO_20=1048576
;jspb.BinaryConstants.TWO_TO_23=8388608;jspb.BinaryConstants.TWO_TO_31=2147483648;jspb.BinaryConstants.TWO_TO_32=4294967296;jspb.BinaryConstants.TWO_TO_52=4503599627370496
;jspb.BinaryConstants.TWO_TO_63=0x8000000000000000;jspb.BinaryConstants.TWO_TO_64=0x10000000000000000;jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0";goog.dom={};goog.dom.NodeType={ELEMENT:1,
ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.debug={}
;goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))
;this.reportErrorToServer=!0};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG
;goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t));this.messagePattern=e};goog.inherits(goog.asserts.AssertionError,goog.debug.Error)
;goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER
;goog.asserts.subs_=function(e,t){for(var o="",r=(e=e.split("%s")).length-1,s=0;s<r;s++)o+=e[s]+(s<t.length?t[s]:"%s");return o+e[r]};goog.asserts.doAssertFailure_=function(e,t,o,r){
var s="Assertion failed";if(o){s+=": "+o;var n=r}else e&&(s+=": "+e,n=t);e=new goog.asserts.AssertionError(""+s,n||[]);goog.asserts.errorHandler_(e)};goog.asserts.setErrorHandler=function(e){
goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)};goog.asserts.assert=function(e,t,o){
goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.fail=function(e,t){
goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(e,t,o){
goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e}
;goog.asserts.assertString=function(e,t,o){
goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e}
;goog.asserts.assertFunction=function(e,t,o){
goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e}
;goog.asserts.assertObject=function(e,t,o){
goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e}
;goog.asserts.assertArray=function(e,t,o){
goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e}
;goog.asserts.assertBoolean=function(e,t,o){
goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e}
;goog.asserts.assertElement=function(e,t,o){
!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2))
;return e};goog.asserts.assertInstanceof=function(e,t,o,r){
!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],o,Array.prototype.slice.call(arguments,3))
;return e};goog.asserts.assertFinite=function(e,t,o){
!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2));return e}
;goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")};goog.asserts.getType_=function(e){
return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e}
;goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.ASSUME_NATIVE_FUNCTIONS=!1;goog.array.peek=function(e){return e[e.length-1]};goog.array.last=goog.array.peek
;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,o){goog.asserts.assert(null!=e.length)
;return Array.prototype.indexOf.call(e,t,o)}:function(e,t,o){o=null==o?0:0>o?Math.max(0,e.length+o):o;if(goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,o):-1
;for(;o<e.length;o++)if(o in e&&e[o]===t)return o;return-1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,o){
goog.asserts.assert(null!=e.length);return Array.prototype.lastIndexOf.call(e,t,null==o?e.length-1:o)}:function(e,t,o){0>(o=null==o?e.length-1:o)&&(o=Math.max(0,e.length+o))
;if(goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,o):-1;for(;0<=o;o--)if(o in e&&e[o]===t)return o;return-1}
;goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,o){goog.asserts.assert(null!=e.length);Array.prototype.forEach.call(e,t,o)
}:function(e,t,o){for(var r=e.length,s=goog.isString(e)?e.split(""):e,n=0;n<r;n++)n in s&&t.call(o,s[n],n,e)};goog.array.forEachRight=function(e,t,o){var r=e.length,s=goog.isString(e)?e.split(""):e
;for(--r;0<=r;--r)r in s&&t.call(o,s[r],r,e)};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,o){
goog.asserts.assert(null!=e.length);return Array.prototype.filter.call(e,t,o)}:function(e,t,o){for(var r=e.length,s=[],n=0,a=goog.isString(e)?e.split(""):e,i=0;i<r;i++)if(i in a){var l=a[i]
;t.call(o,l,i,e)&&(s[n++]=l)}return s};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,o){goog.asserts.assert(null!=e.length)
;return Array.prototype.map.call(e,t,o)}:function(e,t,o){for(var r=e.length,s=Array(r),n=goog.isString(e)?e.split(""):e,a=0;a<r;a++)a in n&&(s[a]=t.call(o,n[a],a,e));return s}
;goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,o,r){goog.asserts.assert(null!=e.length);r&&(t=goog.bind(t,r))
;return Array.prototype.reduce.call(e,t,o)}:function(e,t,o,r){var s=o;goog.array.forEach(e,(function(o,n){s=t.call(r,s,o,n,e)}));return s}
;goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,o,r){goog.asserts.assert(null!=e.length)
;goog.asserts.assert(null!=t);r&&(t=goog.bind(t,r));return Array.prototype.reduceRight.call(e,t,o)}:function(e,t,o,r){var s=o;goog.array.forEachRight(e,(function(o,n){s=t.call(r,s,o,n,e)}));return s}
;goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,o){goog.asserts.assert(null!=e.length);return Array.prototype.some.call(e,t,o)
}:function(e,t,o){for(var r=e.length,s=goog.isString(e)?e.split(""):e,n=0;n<r;n++)if(n in s&&t.call(o,s[n],n,e))return!0;return!1}
;goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,o){goog.asserts.assert(null!=e.length);return Array.prototype.every.call(e,t,o)
}:function(e,t,o){for(var r=e.length,s=goog.isString(e)?e.split(""):e,n=0;n<r;n++)if(n in s&&!t.call(o,s[n],n,e))return!1;return!0};goog.array.count=function(e,t,o){var r=0
;goog.array.forEach(e,(function(e,s,n){t.call(o,e,s,n)&&++r}),o);return r};goog.array.find=function(e,t,o){return 0>(t=goog.array.findIndex(e,t,o))?null:goog.isString(e)?e.charAt(t):e[t]}
;goog.array.findIndex=function(e,t,o){for(var r=e.length,s=goog.isString(e)?e.split(""):e,n=0;n<r;n++)if(n in s&&t.call(o,s[n],n,e))return n;return-1};goog.array.findRight=function(e,t,o){
return 0>(t=goog.array.findIndexRight(e,t,o))?null:goog.isString(e)?e.charAt(t):e[t]};goog.array.findIndexRight=function(e,t,o){var r=e.length,s=goog.isString(e)?e.split(""):e
;for(--r;0<=r;r--)if(r in s&&t.call(o,s[r],r,e))return r;return-1};goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)};goog.array.isEmpty=function(e){return 0==e.length}
;goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0};goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)}
;goog.array.insertAt=function(e,t,o){goog.array.splice(e,o,0,t)};goog.array.insertArrayAt=function(e,t,o){goog.partial(goog.array.splice,e,o,0).apply(null,t)};goog.array.insertBefore=function(e,t,o){
var r;2==arguments.length||0>(r=goog.array.indexOf(e,o))?e.push(t):goog.array.insertAt(e,t,r)};goog.array.remove=function(e,t){var o;(o=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t)
;return o};goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)};goog.array.removeAt=function(e,t){goog.asserts.assert(null!=e.length)
;return 1==Array.prototype.splice.call(e,t,1).length};goog.array.removeIf=function(e,t,o){return 0<=(t=goog.array.findIndex(e,t,o))&&(goog.array.removeAt(e,t),!0)}
;goog.array.removeAllIf=function(e,t,o){var r=0;goog.array.forEachRight(e,(function(s,n){t.call(o,s,n,e)&&goog.array.removeAt(e,n)&&r++}));return r};goog.array.concat=function(e){
return Array.prototype.concat.apply([],arguments)};goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)};goog.array.toArray=function(e){var t=e.length;if(0<t){
for(var o=Array(t),r=0;r<t;r++)o[r]=e[r];return o}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(e,t){for(var o=1;o<arguments.length;o++){var r=arguments[o]
;if(goog.isArrayLike(r)){var s=e.length||0,n=r.length||0;e.length=s+n;for(var a=0;a<n;a++)e[s+a]=r[a]}else e.push(r)}};goog.array.splice=function(e,t,o,r){goog.asserts.assert(null!=e.length)
;return Array.prototype.splice.apply(e,goog.array.slice(arguments,1))};goog.array.slice=function(e,t,o){goog.asserts.assert(null!=e.length)
;return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,o)};goog.array.removeDuplicates=function(e,t,o){t=t||e;var r=function(e){
return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};o=o||r;r={};for(var s=0,n=0;n<e.length;){var a=e[n++],i=o(a);Object.prototype.hasOwnProperty.call(r,i)||(r[i]=!0,t[s++]=a)}t.length=s
};goog.array.binarySearch=function(e,t,o){return goog.array.binarySearch_(e,o||goog.array.defaultCompare,!1,t)};goog.array.binarySelect=function(e,t,o){return goog.array.binarySearch_(e,t,!0,void 0,o)
};goog.array.binarySearch_=function(e,t,o,r,s){for(var n,a=0,i=e.length;a<i;){var l=a+i>>1,c=o?t.call(s,e[l],l,e):t(r,e[l]);0<c?a=l+1:(i=l,n=!c)}return n?a:~a};goog.array.sort=function(e,t){
e.sort(t||goog.array.defaultCompare)};goog.array.stableSort=function(e,t){for(var o=Array(e.length),r=0;r<e.length;r++)o[r]={index:r,value:e[r]};var s=t||goog.array.defaultCompare
;goog.array.sort(o,(function(e,t){return s(e.value,t.value)||e.index-t.index}));for(r=0;r<e.length;r++)e[r]=o[r].value};goog.array.sortByKey=function(e,t,o){var r=o||goog.array.defaultCompare
;goog.array.sort(e,(function(e,o){return r(t(e),t(o))}))};goog.array.sortObjectsByKey=function(e,t,o){goog.array.sortByKey(e,(function(e){return e[t]}),o)};goog.array.isSorted=function(e,t,o){
t=t||goog.array.defaultCompare;for(var r=1;r<e.length;r++){var s=t(e[r-1],e[r]);if(0<s||0==s&&o)return!1}return!0};goog.array.equals=function(e,t,o){
if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var r=e.length;o=o||goog.array.defaultCompareEquality;for(var s=0;s<r;s++)if(!o(e[s],t[s]))return!1;return!0}
;goog.array.compare3=function(e,t,o){o=o||goog.array.defaultCompare;for(var r=Math.min(e.length,t.length),s=0;s<r;s++){var n=o(e[s],t[s]);if(0!=n)return n}
return goog.array.defaultCompare(e.length,t.length)};goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0};goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)
};goog.array.defaultCompareEquality=function(e,t){return e===t};goog.array.binaryInsert=function(e,t,o){return 0>(o=goog.array.binarySearch(e,t,o))&&(goog.array.insertAt(e,t,-(o+1)),!0)}
;goog.array.binaryRemove=function(e,t,o){return 0<=(t=goog.array.binarySearch(e,t,o))&&goog.array.removeAt(e,t)};goog.array.bucket=function(e,t,o){for(var r={},s=0;s<e.length;s++){
var n=e[s],a=t.call(o,n,s,e);goog.isDef(a)&&(r[a]||(r[a]=[])).push(n)}return r};goog.array.toObject=function(e,t,o){var r={};goog.array.forEach(e,(function(s,n){r[t.call(o,s,n,e)]=s}));return r}
;goog.array.range=function(e,t,o){var r=[],s=0,n=e;void 0!==t&&(s=e,n=t);if(0>(o=o||1)*(n-s))return[];if(0<o)for(e=s;e<n;e+=o)r.push(e);else for(e=s;e>n;e+=o)r.push(e);return r}
;goog.array.repeat=function(e,t){for(var o=[],r=0;r<t;r++)o[r]=e;return o};goog.array.flatten=function(e){for(var t=[],o=0;o<arguments.length;o++){var r=arguments[o]
;if(goog.isArray(r))for(var s=0;s<r.length;s+=8192){var n=goog.array.slice(r,s,s+8192);n=goog.array.flatten.apply(null,n);for(var a=0;a<n.length;a++)t.push(n[a])}else t.push(r)}return t}
;goog.array.rotate=function(e,t){goog.asserts.assert(null!=e.length);e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t)))
;return e};goog.array.moveItem=function(e,t,o){goog.asserts.assert(0<=t&&t<e.length);goog.asserts.assert(0<=o&&o<e.length);t=Array.prototype.splice.call(e,t,1);Array.prototype.splice.call(e,o,0,t[0])}
;goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],o=arguments[0].length,r=1;r<arguments.length;r++)arguments[r].length<o&&(o=arguments[r].length);for(r=0;r<o;r++){
for(var s=[],n=0;n<arguments.length;n++)s.push(arguments[n][r]);t.push(s)}return t};goog.array.shuffle=function(e,t){t=t||Math.random;for(var o=e.length-1;0<o;o--){var r=Math.floor(t()*(o+1)),s=e[o]
;e[o]=e[r];e[r]=s}};goog.array.copyByIndex=function(e,t){var o=[];goog.array.forEach(t,(function(t){o.push(e[t])}));return o};goog.array.concatMap=function(e,t,o){
return goog.array.concat.apply([],goog.array.map(e,t,o))};goog.crypt={};goog.crypt.stringToByteArray=function(e){for(var t=[],o=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);255<s&&(t[o++]=255&s,s>>=8)
;t[o++]=s}return t};goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",o=0;o<e.length;o+=8192){var r=goog.array.slice(e,o,o+8192)
;t+=String.fromCharCode.apply(null,r)}return t};goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")}
;goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],o=0;o<e.length;o+=2)t.push(parseInt(e.substring(o,o+2),16));return t}
;goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],o=0,r=0;r<e.length;r++){var s=e.charCodeAt(r)
;128>s?t[o++]=s:(2048>s?t[o++]=s>>6|192:(55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[o++]=s>>18|240,
t[o++]=s>>12&63|128):t[o++]=s>>12|224,t[o++]=s>>6&63|128),t[o++]=63&s|128)}return t};goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],o=0,r=0;o<e.length;){var s=e[o++]
;if(128>s)t[r++]=String.fromCharCode(s);else if(191<s&&224>s){var n=e[o++];t[r++]=String.fromCharCode((31&s)<<6|63&n)}else if(239<s&&365>s){n=e[o++];var a=e[o++]
;s=((7&s)<<18|(63&n)<<12|(63&a)<<6|63&e[o++])-65536;t[r++]=String.fromCharCode(55296+(s>>10));t[r++]=String.fromCharCode(56320+(1023&s))}else n=e[o++],a=e[o++],
t[r++]=String.fromCharCode((15&s)<<12|(63&n)<<6|63&a)}return t.join("")};goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match")
;for(var o=[],r=0;r<e.length;r++)o.push(e[r]^t[r]);return o};goog.string={};goog.string.internal={};goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)}
;goog.string.internal.endsWith=function(e,t){var o=e.length-t.length;return 0<=o&&e.indexOf(t,o)==o};goog.string.internal.caseInsensitiveStartsWith=function(e,t){
return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))};goog.string.internal.caseInsensitiveEndsWith=function(e,t){
return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))};goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()}
;goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)};goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){
return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1}
;goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")};goog.string.internal.htmlEscape=function(e,t){
if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{
if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;"));-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;"))
;-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;"));-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;"))
;-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;"));-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e};goog.string.internal.AMP_RE_=/&/g
;goog.string.internal.LT_RE_=/</g;goog.string.internal.GT_RE_=/>/g;goog.string.internal.QUOT_RE_=/"/g;goog.string.internal.SINGLE_QUOTE_RE_=/'/g;goog.string.internal.NULL_RE_=/\x00/g
;goog.string.internal.ALL_RE_=/[\x00&<>"']/;goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)}
;goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)};goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())}
;goog.string.internal.compareVersions=function(e,t){var o=0;e=goog.string.internal.trim(String(e)).split(".");t=goog.string.internal.trim(String(t)).split(".")
;for(var r=Math.max(e.length,t.length),s=0;0==o&&s<r;s++){var n=e[s]||"",a=t[s]||"";do{n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""];a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""]
;if(0==n[0].length&&0==a[0].length)break;o=0==n[1].length?0:parseInt(n[1],10);var i=0==a[1].length?0:parseInt(a[1],10)
;o=goog.string.internal.compareElements_(o,i)||goog.string.internal.compareElements_(0==n[2].length,0==a[2].length)||goog.string.internal.compareElements_(n[2],a[2]);n=n[3];a=a[3]}while(0==o)}return o
};goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0};goog.string.DETECT_DOUBLE_ESCAPING=!1;goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1;goog.string.Unicode={NBSP:" "}
;goog.string.startsWith=goog.string.internal.startsWith;goog.string.endsWith=goog.string.internal.endsWith;goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith
;goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith;goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals;goog.string.subs=function(e,t){
for(var o=e.split("%s"),r="",s=Array.prototype.slice.call(arguments,1);s.length&&1<o.length;)r+=o.shift()+s.shift();return r+o.join("%s")};goog.string.collapseWhitespace=function(e){
return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace;goog.string.isEmptyString=function(e){return 0==e.length}
;goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))}
;goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)};goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)}
;goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)};goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)};goog.string.isSpace=function(e){return" "==e}
;goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e};goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")}
;goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")}
;goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")
};goog.string.trim=goog.string.internal.trim;goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")}
;goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare;goog.string.numberAwareCompare_=function(e,t,o){if(e==t)return 0;if(!e)return-1;if(!t)return 1
;for(var r=e.toLowerCase().match(o),s=t.toLowerCase().match(o),n=Math.min(r.length,s.length),a=0;a<n;a++){o=r[a];var i=s[a];if(o!=i)return e=parseInt(o,10),!isNaN(e)&&(t=parseInt(i,10),
!isNaN(t)&&e-t)?e-t:o<i?-1:1}return r.length!=s.length?r.length-s.length:e<t?-1:1};goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)}
;goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)};goog.string.numerateCompare=goog.string.floatAwareCompare;goog.string.urlEncode=function(e){
return encodeURIComponent(String(e))};goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))};goog.string.newLineToBr=goog.string.internal.newLineToBr
;goog.string.htmlEscape=function(e,t){e=goog.string.internal.htmlEscape(e,t);goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;"));return e};goog.string.E_RE_=/e/g
;goog.string.unescapeEntities=function(e){
return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e}
;goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e};goog.string.unescapeEntitiesUsingDom_=function(e,t){var o={
"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var s=o[e]
;if(s)return s;"#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(s=String.fromCharCode(t)));s||(r.innerHTML=e+" ",s=r.firstChild.nodeValue.slice(0,-1));return o[e]=s}))}
;goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:
return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(e,t){
return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)};goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)}
;goog.string.stripQuotes=function(e,t){for(var o=t.length,r=0;r<o;r++){var s=1==o?t:t.charAt(r);if(e.charAt(0)==s&&e.charAt(e.length-1)==s)return e.substring(1,e.length-1)}return e}
;goog.string.truncate=function(e,t,o){o&&(e=goog.string.unescapeEntities(e));e.length>t&&(e=e.substring(0,t-3)+"...");o&&(e=goog.string.htmlEscape(e));return e}
;goog.string.truncateMiddle=function(e,t,o,r){o&&(e=goog.string.unescapeEntities(e));if(r&&e.length>t){r>t&&(r=t);var s=e.length-r;e=e.substring(0,t-r)+"..."+e.substring(s)
}else e.length>t&&(r=Math.floor(t/2),s=e.length-r,e=e.substring(0,r+t%2)+"..."+e.substring(s));o&&(e=goog.string.htmlEscape(e));return e};goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b",
"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(e){e=String(e)
;for(var t=['"'],o=0;o<e.length;o++){var r=e.charAt(o),s=r.charCodeAt(0);t[o+1]=goog.string.specialEscapeChars_[r]||(31<s&&127>s?r:goog.string.escapeChar(r))}t.push('"');return t.join("")}
;goog.string.escapeString=function(e){for(var t=[],o=0;o<e.length;o++)t[o]=goog.string.escapeChar(e.charAt(o));return t.join("")};goog.string.escapeChar=function(e){
if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e]
;var t=e.charCodeAt(0);if(31<t&&127>t)var o=e;else{256>t?(o="\\x",16>t||256<t)&&(o+="0"):(o="\\u",4096>t&&(o+="0"));o+=t.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[e]=o}
;goog.string.contains=goog.string.internal.contains;goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains;goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0
};goog.string.removeAt=function(e,t,o){var r=e;0<=t&&t<e.length&&0<o&&(r=e.substr(0,t)+e.substr(t+o,e.length-t-o));return r};goog.string.remove=function(e,t){return e.replace(t,"")}
;goog.string.removeAll=function(e,t){t=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(t,"")};goog.string.replaceAll=function(e,t,o){t=new RegExp(goog.string.regExpEscape(t),"g")
;return e.replace(t,o.replace(/\$/g,"$$$$"))};goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}
;goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)};goog.string.padNumber=function(e,t,o){
-1==(o=(e=goog.isDef(o)?e.toFixed(o):String(e)).indexOf("."))&&(o=e.length);return goog.string.repeat("0",Math.max(0,t-o))+e};goog.string.makeSafe=function(e){return null==e?"":String(e)}
;goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){
return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};goog.string.compareVersions=goog.string.internal.compareVersions
;goog.string.hashCode=function(e){for(var t=0,o=0;o<e.length;++o)t=31*t+e.charCodeAt(o)>>>0;return t};goog.string.uniqueStringCounter_=2147483648*Math.random()|0
;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t}
;goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)};goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)};goog.string.toCamelCase=function(e){
return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))};goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()}
;goog.string.toTitleCase=function(e,t){t=goog.isString(t)?goog.string.regExpEscape(t):"\\s";return e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,o){
return t+o.toUpperCase()}))};goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()};goog.string.parseInt=function(e){isFinite(e)&&(e=String(e))
;return goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN};goog.string.splitLimit=function(e,t,o){e=e.split(t);for(var r=[];0<o&&e.length;)r.push(e.shift()),o--
;e.length&&r.push(e.join(t));return r};goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var o=-1,r=0;r<t.length;r++)if(""!=t[r]){var s=e.lastIndexOf(t[r])
;s>o&&(o=s)}return-1==o?e:e.slice(o+1)};goog.string.editDistance=function(e,t){var o=[],r=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length)
;for(var s=0;s<t.length+1;s++)o[s]=s;for(s=0;s<e.length;s++){r[0]=s+1;for(var n=0;n<t.length;n++)r[n+1]=Math.min(r[n]+1,o[n+1]+1,o[n]+Number(e[s]!=t[n]));for(n=0;n<o.length;n++)o[n]=r[n]}
return r[t.length]};goog.labs={};goog.labs.userAgent={};goog.labs.userAgent.util={};goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_()
;return e&&(e=e.userAgent)?e:""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator}
;goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(e){
goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()};goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_}
;goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)}
;goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)}
;goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,o=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,r=[];t=o.exec(e);)r.push([t[1],t[2],t[3]||void 0]);return r}
;goog.labs.userAgent.platform={};goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){
return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){
return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")}
;goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIos=function(){
return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){
return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")}
;goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};goog.labs.userAgent.platform.isChromeOS=function(){
return goog.labs.userAgent.util.matchUserAgent("CrOS")};goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")}
;goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")};goog.labs.userAgent.platform.isGo2Phone=function(){
return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")};goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t=""
;goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1])
;return t||""};goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)};goog.object={}
;goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};goog.object.forEach=function(e,t,o){for(var r in e)t.call(o,e[r],r,e)};goog.object.filter=function(e,t,o){var r,s={}
;for(r in e)t.call(o,e[r],r,e)&&(s[r]=e[r]);return s};goog.object.map=function(e,t,o){var r,s={};for(r in e)s[r]=t.call(o,e[r],r,e);return s};goog.object.some=function(e,t,o){
for(var r in e)if(t.call(o,e[r],r,e))return!0;return!1};goog.object.every=function(e,t,o){for(var r in e)if(!t.call(o,e[r],r,e))return!1;return!0};goog.object.getCount=function(e){var t,o=0
;for(t in e)o++;return o};goog.object.getAnyKey=function(e){for(var t in e)return t};goog.object.getAnyValue=function(e){for(var t in e)return e[t]};goog.object.contains=function(e,t){
return goog.object.containsValue(e,t)};goog.object.getValues=function(e){var t,o=[],r=0;for(t in e)o[r++]=e[t];return o};goog.object.getKeys=function(e){var t,o=[],r=0;for(t in e)o[r++]=t;return o}
;goog.object.getValueByKeys=function(e,t){var o=goog.isArrayLike(t),r=o?t:arguments;for(o=o?0:1;o<r.length;o++){if(null==e)return;e=e[r[o]]}return e};goog.object.containsKey=function(e,t){
return null!==e&&t in e};goog.object.containsValue=function(e,t){for(var o in e)if(e[o]==t)return!0;return!1};goog.object.findKey=function(e,t,o){for(var r in e)if(t.call(o,e[r],r,e))return r}
;goog.object.findValue=function(e,t,o){return(t=goog.object.findKey(e,t,o))&&e[t]};goog.object.isEmpty=function(e){for(var t in e)return!1;return!0};goog.object.clear=function(e){
for(var t in e)delete e[t]};goog.object.remove=function(e,t){var o;(o=t in e)&&delete e[t];return o};goog.object.add=function(e,t,o){
if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,o)};goog.object.get=function(e,t,o){return null!==e&&t in e?e[t]:o};goog.object.set=function(e,t,o){
e[t]=o};goog.object.setIfUndefined=function(e,t,o){return t in e?e[t]:e[t]=o};goog.object.setWithReturnValueIfNotSet=function(e,t,o){if(t in e)return e[t];o=o();return e[t]=o}
;goog.object.equals=function(e,t){for(var o in e)if(!(o in t)||e[o]!==t[o])return!1;for(o in t)if(!(o in e))return!1;return!0};goog.object.clone=function(e){var t,o={};for(t in e)o[t]=e[t];return o}
;goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();t="array"==t?[]:{};for(var o in e)t[o]=goog.object.unsafeClone(e[o])
;return t}return e};goog.object.transpose=function(e){var t,o={};for(t in e)o[e[t]]=t;return o}
;goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.object.extend=function(e,t){
for(var o,r,s=1;s<arguments.length;s++){r=arguments[s];for(o in r)e[o]=r[o];for(var n=0;n<goog.object.PROTOTYPE_FIELDS_.length;n++)o=goog.object.PROTOTYPE_FIELDS_[n],
Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}};goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0])
;if(t%2)throw Error("Uneven number of arguments");for(var o={},r=0;r<t;r+=2)o[arguments[r]]=arguments[r+1];return o};goog.object.createSet=function(e){var t=arguments.length
;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var o={},r=0;r<t;r++)o[arguments[r]]=!0;return o};goog.object.createImmutableView=function(e){var t=e
;Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t));return t};goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)}
;goog.object.getAllPropertyNames=function(e,t,o){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e)
;for(var r={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||o);){for(var s=Object.getOwnPropertyNames(e),n=0;n<s.length;n++)r[s[n]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(r)
};goog.labs.userAgent.browser={};goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")};goog.labs.userAgent.browser.matchIE_=function(){
return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchEdge_=function(){
return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.browser.matchFirefox_=function(){
return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")};goog.labs.userAgent.browser.matchSafari_=function(){
return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))
};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};goog.labs.userAgent.browser.matchIosWebview_=function(){
return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")
};goog.labs.userAgent.browser.matchChrome_=function(){
return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()}
;goog.labs.userAgent.browser.matchAndroidBrowser_=function(){
return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())
};goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_
;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_
;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_
;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_
;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")}
;goog.labs.userAgent.browser.getVersion=function(){function e(e){e=goog.array.find(e,r);return o[e]||""}var t=goog.labs.userAgent.util.getUserAgent()
;if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var o={};goog.array.forEach(t,(function(e){o[e[0]]=e[1]}))
;var r=goog.partial(goog.object.containsKey,o)
;return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""}
;goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)}
;goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var o=/MSIE +([\d\.]+)/.exec(e);if(o&&o[1])if(e=/Trident\/(\d.\d)/.exec(e),
"7.0"==o[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=o[1];return t};goog.reflect={}
;goog.reflect.object=function(e,t){return t};goog.reflect.objectProperty=function(e,t){return e};goog.reflect.sinkValue=function(e){goog.reflect.sinkValue[" "](e);return e}
;goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1};goog.reflect.cache=function(e,t,o,r){
r=r?r(t):t;return Object.prototype.hasOwnProperty.call(e,r)?e[r]:e[r]=o(t)};goog.labs.userAgent.engine={};goog.labs.userAgent.engine.isPresto=function(){
return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){
return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){
return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.engine.isWebKit=function(){
return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){
return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()}
;goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e)
;var t,o=goog.labs.userAgent.engine.getEngineTuple_(e);if(o)return"Gecko"==o[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):o[1]
;if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""};goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1]
;for(var t=0;t<e.length;t++){var o=e[t];if("Edge"==o[0])return o}};goog.labs.userAgent.engine.isVersionOrHigher=function(e){
return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)};goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]
})))&&e[1]||""};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_EDGE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1
;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1
;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA
;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null}
;goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera()
;goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE()
;goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE
;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko()
;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){
return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_()
;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""}
;goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1
;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;goog.userAgent.ASSUME_IPOD=!1;goog.userAgent.ASSUME_KAIOS=!1;goog.userAgent.ASSUME_GO2PHONE=!1
;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD
;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh()
;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){
return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()}
;goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped()
;return!!e&&goog.string.contains(e.appVersion||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_()
;goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid()
;goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone()
;goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad()
;goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod()
;goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos()
;goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS()
;goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone();goog.userAgent.determineVersion_=function(){
var e="",t=goog.userAgent.getVersionRegexResult_();t&&(e=t?t[1]:"");return goog.userAgent.IE&&(null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e))?String(t):e}
;goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString()
;return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0
};goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(e,t){
return goog.string.compareVersions(e,t)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(e){
return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))}
;goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e}
;goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_()
;if(e&&goog.userAgent.IE)return t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5)}();goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1
;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1
;goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI
;goog.userAgent.product.OPERA=goog.userAgent.OPERA;goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.EDGE=goog.userAgent.EDGE
;goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox();goog.userAgent.product.isIphoneOrIpod_=function(){
return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()}
;goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_()
;goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad()
;goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser()
;goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome();goog.userAgent.product.isSafariDesktop_=function(){
return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()}
;goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_();goog.crypt.base64={}
;goog.crypt.base64.byteToCharMap_=null;goog.crypt.base64.charToByteMap_=null;goog.crypt.base64.byteToCharMapWebSafe_=null
;goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/="
;goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_."
;goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA
;goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa
;goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob
;goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter");goog.crypt.base64.init_()
;t=t?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_;for(var o=[],r=0;r<e.length;r+=3){var s=e[r],n=r+1<e.length,a=n?e[r+1]:0,i=r+2<e.length,l=i?e[r+2]:0,c=s>>2
;s=(3&s)<<4|a>>4;a=(15&a)<<2|l>>6;l&=63;i||(l=64,n||(a=64));o.push(t[c],t[s],t[a],t[l])}return o.join("")};goog.crypt.base64.encodeString=function(e,t){
return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)};goog.crypt.base64.decodeString=function(e,t){
if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var o="";goog.crypt.base64.decodeStringInternal_(e,(function(e){o+=String.fromCharCode(e)}));return o}
;goog.crypt.base64.decodeStringToByteArray=function(e,t){var o=[];goog.crypt.base64.decodeStringInternal_(e,(function(e){o.push(e)}));return o};goog.crypt.base64.decodeStringToUint8Array=function(e){
goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,o=0;"="===e[t-2]?o=2:"="===e[t-1]&&(o=1)
;var r=new Uint8Array(Math.ceil(3*t/4)-o),s=0;goog.crypt.base64.decodeStringInternal_(e,(function(e){r[s++]=e}));return r.subarray(0,s)};goog.crypt.base64.decodeStringInternal_=function(e,t){
function o(t){for(;r<e.length;){var o=e.charAt(r++),s=goog.crypt.base64.charToByteMap_[o];if(null!=s)return s;if(!goog.string.isEmptyOrWhitespace(o))throw Error("Unknown base64 encoding at char: "+o)}
return t}goog.crypt.base64.init_();for(var r=0;;){var s=o(-1),n=o(0),a=o(64),i=o(64);if(64===i&&-1===s)break;t(s<<2|n>>4);64!=a&&(t(n<<4&240|a>>2),64!=i&&t(a<<6&192|i))}}
;goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={};goog.crypt.base64.charToByteMap_={};goog.crypt.base64.byteToCharMapWebSafe_={}
;for(var e=0;e<goog.crypt.base64.ENCODED_VALS.length;e++)goog.crypt.base64.byteToCharMap_[e]=goog.crypt.base64.ENCODED_VALS.charAt(e),
goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[e]]=e,goog.crypt.base64.byteToCharMapWebSafe_[e]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e),
e>=goog.crypt.base64.ENCODED_VALS_BASE.length&&(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e)]=e)}};jspb.utils={};jspb.utils.split64Low=0;jspb.utils.split64High=0
;jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0;jspb.utils.split64Low=t;jspb.utils.split64High=e};jspb.utils.splitInt64=function(e){
var t=0>e,o=(e=Math.abs(e))>>>0;e=Math.floor((e-o)/jspb.BinaryConstants.TWO_TO_32);e>>>=0;t&&(e=~e>>>0,4294967295<(o=1+(~o>>>0))&&(o=0,4294967295<++e&&(e=0)));jspb.utils.split64Low=o
;jspb.utils.split64High=e};jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e);jspb.utils.splitUint64(e);e=jspb.utils.split64Low;var o=jspb.utils.split64High
;t&&(0==e?0==o?o=e=4294967295:(o--,e=4294967295):e--);jspb.utils.split64Low=e;jspb.utils.split64High=o};jspb.utils.splitFloat32=function(e){var t=0>e?1:0
;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,
jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,
jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{
var o=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-o);e=8388607&Math.round(e*jspb.BinaryConstants.TWO_TO_23);jspb.utils.split64High=0;jspb.utils.split64Low=(t<<31|o+127<<23|e)>>>0}}
;jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,
jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){
var o=e/Math.pow(2,-1074);e=o/jspb.BinaryConstants.TWO_TO_32;jspb.utils.split64High=(t<<31|e)>>>0;jspb.utils.split64Low=o>>>0}else{var r=Math.floor(Math.log(e)/Math.LN2);1024==r&&(r=1023)
;e=(o=e*Math.pow(2,-r))*jspb.BinaryConstants.TWO_TO_20&1048575;o=o*jspb.BinaryConstants.TWO_TO_52>>>0;jspb.utils.split64High=(t<<31|r+1023<<20|e)>>>0;jspb.utils.split64Low=o}}
;jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),o=e.charCodeAt(1),r=e.charCodeAt(2),s=e.charCodeAt(3),n=e.charCodeAt(4),a=e.charCodeAt(5),i=e.charCodeAt(6);e=e.charCodeAt(7)
;jspb.utils.split64Low=t+(o<<8)+(r<<16)+(s<<24)>>>0;jspb.utils.split64High=n+(a<<8)+(i<<16)+(e<<24)>>>0};jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+e}
;jspb.utils.joinInt64=function(e,t){var o=2147483648&t;o&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0));e=jspb.utils.joinUint64(e,t);return o?-e:e};jspb.utils.joinZigzag64=function(e,t){var o=1&e
;e=(e>>>1|t<<31)>>>0;t>>>=1;o&&(0==(e=e+1>>>0)&&(t=t+1>>>0));e=jspb.utils.joinUint64(e,t);return o?-e:e};jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var o=e>>>23&255;e&=8388607
;return 255==o?e?NaN:1/0*t:0==o?t*Math.pow(2,-149)*e:t*Math.pow(2,o-150)*(e+Math.pow(2,23))};jspb.utils.joinFloat64=function(e,t){var o=2*(t>>31)+1,r=t>>>20&2047
;e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e;return 2047==r?e?NaN:1/0*o:0==r?o*Math.pow(2,-1074)*e:o*Math.pow(2,r-1075)*(e+jspb.BinaryConstants.TWO_TO_52)};jspb.utils.joinHash64=function(e,t){
return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)};jspb.utils.DIGITS="0123456789abcdef".split("")
;jspb.utils.joinUnsignedDecimalString=function(e,t){function o(e){for(var t=1e7,o=0;7>o;o++){var r=e/(t/=10)%10>>>0;(0!=r||n)&&(n=!0,a+=s[r])}}
if(2097151>=t)return""+(jspb.BinaryConstants.TWO_TO_32*t+e);var r=(e>>>24|t<<8)>>>0&16777215;e=(16777215&e)+6777216*r+6710656*(t=t>>16&65535);r+=8147497*t;t*=2;1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7)
;1e7<=r&&(t+=Math.floor(r/1e7),r%=1e7);var s=jspb.utils.DIGITS,n=!1,a="";(t||n)&&o(t);(r||n)&&o(r);(e||n)&&o(e);return a};jspb.utils.joinSignedDecimalString=function(e,t){var o=2147483648&t
;o&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0);e=jspb.utils.joinUnsignedDecimalString(e,t);return o?"-"+e:e};jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e);e=jspb.utils.split64Low
;var o=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,o):jspb.utils.joinUnsignedDecimalString(e,o)};jspb.utils.hash64ArrayToDecimalStrings=function(e,t){
for(var o=Array(e.length),r=0;r<e.length;r++)o[r]=jspb.utils.hash64ToDecimalString(e[r],t);return o};jspb.utils.decimalStringToHash64=function(e){function t(e,t){
for(var o=0;8>o&&(1!==e||0<t);o++)t=e*r[o]+t,r[o]=255&t,t>>>=8}goog.asserts.assert(0<e.length);var o=!1;"-"===e[0]&&(o=!0,e=e.slice(1))
;for(var r=[0,0,0,0,0,0,0,0],s=0;s<e.length;s++)t(10,jspb.utils.DIGITS.indexOf(e[s]));o&&(function(){for(var e=0;8>e;e++)r[e]=255&~r[e]}(),t(1,1));return goog.crypt.byteArrayToString(r)}
;jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))};jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0";t[1]="x";for(var o=0;8>o;o++){
var r=e.charCodeAt(7-o);t[2*o+2]=jspb.utils.DIGITS[r>>4];t[2*o+3]=jspb.utils.DIGITS[15&r]}return t.join("")};jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase()
;goog.asserts.assert(18==e.length);goog.asserts.assert("0"==e[0]);goog.asserts.assert("x"==e[1]);for(var t="",o=0;8>o;o++){
var r=jspb.utils.DIGITS.indexOf(e[2*o+2]),s=jspb.utils.DIGITS.indexOf(e[2*o+3]);t=String.fromCharCode(16*r+s)+t}return t};jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e)
;e=jspb.utils.split64Low;var o=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,o):jspb.utils.joinUint64(e,o)};jspb.utils.numberToHash64=function(e){jspb.utils.splitInt64(e)
;return jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.utils.countVarints=function(e,t,o){for(var r=0,s=t;s<o;s++)r+=e[s]>>7;return o-t-r}
;jspb.utils.countVarintFields=function(e,t,o,r){var s=0;if(128>(r=8*r+jspb.BinaryConstants.WireType.VARINT))for(;t<o&&e[t++]==r;)for(s++;;){var n=e[t++];if(0==(128&n))break}else for(;t<o;){
for(n=r;128<n;){if(e[t]!=(127&n|128))return s;t++;n>>=7}if(e[t++]!=n)break;for(s++;0!=(128&(n=e[t++])););}return s};jspb.utils.countFixedFields_=function(e,t,o,r,s){var n=0
;if(128>r)for(;t<o&&e[t++]==r;)n++,t+=s;else for(;t<o;){for(var a=r;128<a;){if(e[t++]!=(127&a|128))return n;a>>=7}if(e[t++]!=a)break;n++;t+=s}return n};jspb.utils.countFixed32Fields=function(e,t,o,r){
return jspb.utils.countFixedFields_(e,t,o,8*r+jspb.BinaryConstants.WireType.FIXED32,4)};jspb.utils.countFixed64Fields=function(e,t,o,r){
return jspb.utils.countFixedFields_(e,t,o,8*r+jspb.BinaryConstants.WireType.FIXED64,8)};jspb.utils.countDelimitedFields=function(e,t,o,r){var s=0
;for(r=8*r+jspb.BinaryConstants.WireType.DELIMITED;t<o;){for(var n=r;128<n;){if(e[t++]!=(127&n|128))return s;n>>=7}if(e[t++]!=n)break;s++;for(var a=0,i=1;a+=(127&(n=e[t++]))*i,i*=128,0!=(128&n););t+=a
}return s};jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var o=0;o<e.length;o++)t+="\\x",16>e[o]&&(t+="0"),t+=e[o].toString(16)}return t+'"'}
;jspb.utils.debugScalarToTextFormat=function(e){return goog.isString(e)?goog.string.quote(e):e.toString()};jspb.utils.stringToByteArray=function(e){
for(var t=new Uint8Array(e.length),o=0;o<e.length;o++){var r=e.charCodeAt(o);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");t[o]=r}return t}
;jspb.utils.byteSourceToUint8Array=function(e){if(e.constructor===Uint8Array)return e
;if(e.constructor===ArrayBuffer||void 0!==Buffer&&e.constructor===Buffer||e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return goog.crypt.base64.decodeStringToUint8Array(e)
;goog.asserts.fail("Type not convertible to Uint8Array.");return new Uint8Array(0)};jspb.BinaryIterator=function(e,t,o){this.elements_=this.nextMethod_=this.decoder_=null;this.cursor_=0
;this.nextValue_=null;this.atEnd_=!0;this.init_(e,t,o)};jspb.BinaryIterator.prototype.init_=function(e,t,o){e&&t&&(this.decoder_=e,this.nextMethod_=t);this.elements_=o||null;this.cursor_=0
;this.nextValue_=null;this.atEnd_=!this.decoder_&&!this.elements_;this.next()};jspb.BinaryIterator.instanceCache_=[];jspb.BinaryIterator.alloc=function(e,t,o){
if(jspb.BinaryIterator.instanceCache_.length){var r=jspb.BinaryIterator.instanceCache_.pop();r.init_(e,t,o);return r}return new jspb.BinaryIterator(e,t,o)}
;jspb.BinaryIterator.prototype.free=function(){this.clear();100>jspb.BinaryIterator.instanceCache_.length&&jspb.BinaryIterator.instanceCache_.push(this)}
;jspb.BinaryIterator.prototype.clear=function(){this.decoder_&&this.decoder_.free();this.elements_=this.nextMethod_=this.decoder_=null;this.cursor_=0;this.nextValue_=null;this.atEnd_=!0}
;jspb.BinaryIterator.prototype.get=function(){return this.nextValue_};jspb.BinaryIterator.prototype.atEnd=function(){return this.atEnd_};jspb.BinaryIterator.prototype.next=function(){
var e=this.nextValue_;this.decoder_?this.decoder_.atEnd()?(this.nextValue_=null,
this.atEnd_=!0):this.nextValue_=this.nextMethod_.call(this.decoder_):this.elements_&&(this.cursor_==this.elements_.length?(this.nextValue_=null,
this.atEnd_=!0):this.nextValue_=this.elements_[this.cursor_++]);return e};jspb.BinaryDecoder=function(e,t,o){this.bytes_=null;this.tempHigh_=this.tempLow_=this.cursor_=this.end_=this.start_=0
;this.error_=!1;e&&this.setBlock(e,t,o)};jspb.BinaryDecoder.instanceCache_=[];jspb.BinaryDecoder.alloc=function(e,t,o){if(jspb.BinaryDecoder.instanceCache_.length){
var r=jspb.BinaryDecoder.instanceCache_.pop();e&&r.setBlock(e,t,o);return r}return new jspb.BinaryDecoder(e,t,o)};jspb.BinaryDecoder.prototype.free=function(){this.clear()
;100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)};jspb.BinaryDecoder.prototype.clone=function(){
return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)};jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null;this.cursor_=this.end_=this.start_=0;this.error_=!1}
;jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_};jspb.BinaryDecoder.prototype.setBlock=function(e,t,o){this.bytes_=jspb.utils.byteSourceToUint8Array(e)
;this.start_=goog.isDef(t)?t:0;this.end_=goog.isDef(o)?this.start_+o:this.bytes_.length;this.cursor_=this.start_};jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_}
;jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e};jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_};jspb.BinaryDecoder.prototype.getCursor=function(){
return this.cursor_};jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e};jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e;goog.asserts.assert(this.cursor_<=this.end_)}
;jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_};jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_}
;jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_};jspb.BinaryDecoder.prototype.readSplitVarint64_=function(){
for(var e,t,o=0,r=0;4>r;r++)if(o|=(127&(e=this.bytes_[this.cursor_++]))<<7*r,128>e){this.tempLow_=o>>>0;this.tempHigh_=0;return}o|=(127&(e=this.bytes_[this.cursor_++]))<<28;t=0|(127&e)>>4
;if(128>e)this.tempLow_=o>>>0,this.tempHigh_=t>>>0;else{for(r=0;5>r;r++)if(t|=(127&(e=this.bytes_[this.cursor_++]))<<7*r+3,128>e){this.tempLow_=o>>>0;this.tempHigh_=t>>>0;return}
goog.asserts.fail("Failed to read varint, encoding is invalid.");this.error_=!0}};jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++}
;jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--};jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){
var e=this.bytes_,t=e[this.cursor_+0],o=127&t;if(128>t)return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),o;o|=(127&(t=e[this.cursor_+1]))<<7;if(128>t)return this.cursor_+=2,
goog.asserts.assert(this.cursor_<=this.end_),o;o|=(127&(t=e[this.cursor_+2]))<<14;if(128>t)return this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),o;o|=(127&(t=e[this.cursor_+3]))<<21
;if(128>t)return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),o;o|=(15&(t=e[this.cursor_+4]))<<28;if(128>t)return this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),o>>>0
;this.cursor_+=5;128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&goog.asserts.assert(!1)
;goog.asserts.assert(this.cursor_<=this.end_);return o};jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32
;jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()};jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){
return this.readSignedVarint32().toString()};jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)}
;jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){this.readSplitVarint64_();return jspb.utils.joinUint64(this.tempLow_,this.tempHigh_)}
;jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){this.readSplitVarint64_();return jspb.utils.joinUnsignedDecimalString(this.tempLow_,this.tempHigh_)}
;jspb.BinaryDecoder.prototype.readSignedVarint64=function(){this.readSplitVarint64_();return jspb.utils.joinInt64(this.tempLow_,this.tempHigh_)}
;jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){this.readSplitVarint64_();return jspb.utils.joinSignedDecimalString(this.tempLow_,this.tempHigh_)}
;jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){this.readSplitVarint64_();return jspb.utils.joinZigzag64(this.tempLow_,this.tempHigh_)}
;jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readZigzagVarint64().toString()};jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0]
;this.cursor_+=1;goog.asserts.assert(this.cursor_<=this.end_);return e};jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1]
;this.cursor_+=2;goog.asserts.assert(this.cursor_<=this.end_);return e<<0|t<<8};jspb.BinaryDecoder.prototype.readUint32=function(){
var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],o=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];this.cursor_+=4;goog.asserts.assert(this.cursor_<=this.end_)
;return(e<<0|t<<8|o<<16|r<<24)>>>0};jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)}
;jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)}
;jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];this.cursor_+=1;goog.asserts.assert(this.cursor_<=this.end_);return e<<24>>24}
;jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];this.cursor_+=2;goog.asserts.assert(this.cursor_<=this.end_)
;return(e<<0|t<<8)<<16>>16};jspb.BinaryDecoder.prototype.readInt32=function(){
var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],o=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];this.cursor_+=4;goog.asserts.assert(this.cursor_<=this.end_)
;return e<<0|t<<8|o<<16|r<<24};jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)}
;jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)};jspb.BinaryDecoder.prototype.readFloat=function(){
var e=this.readUint32();return jspb.utils.joinFloat32(e,0)};jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)}
;jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]};jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()}
;jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,o=this.cursor_;e=o+e;for(var r=[],s="";o<e;){var n=t[o++];if(128>n)r.push(n);else{if(192>n)continue;if(224>n){var a=t[o++]
;r.push((31&n)<<6|63&a)}else if(240>n){a=t[o++];var i=t[o++];r.push((15&n)<<12|(63&a)<<6|63&i)}else if(248>n){n=(7&n)<<18|(63&(a=t[o++]))<<12|(63&(i=t[o++]))<<6|63&t[o++];n-=65536
;r.push(55296+(n>>10&1023),56320+(1023&n))}}8192<=r.length&&(s+=String.fromCharCode.apply(null,r),r.length=0)}s+=goog.crypt.byteArrayToString(r);this.cursor_=o;return s}
;jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)};jspb.BinaryDecoder.prototype.readBytes=function(e){
if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);this.cursor_+=e
;goog.asserts.assert(this.cursor_<=this.end_);return t};jspb.BinaryDecoder.prototype.readVarintHash64=function(){this.readSplitVarint64_();return jspb.utils.joinHash64(this.tempLow_,this.tempHigh_)}
;jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,o=e[t+0],r=e[t+1],s=e[t+2],n=e[t+3],a=e[t+4],i=e[t+5],l=e[t+6];e=e[t+7];this.cursor_+=8
;return String.fromCharCode(o,r,s,n,a,i,l,e)};jspb.BinaryReader=function(e,t,o){this.decoder_=jspb.BinaryDecoder.alloc(e,t,o);this.fieldCursor_=this.decoder_.getCursor()
;this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID;this.error_=!1;this.readCallbacks_=null};jspb.BinaryReader.instanceCache_=[]
;jspb.BinaryReader.alloc=function(e,t,o){if(jspb.BinaryReader.instanceCache_.length){var r=jspb.BinaryReader.instanceCache_.pop();e&&r.decoder_.setBlock(e,t,o);return r}
return new jspb.BinaryReader(e,t,o)};jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc;jspb.BinaryReader.prototype.free=function(){this.decoder_.clear()
;this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID;this.error_=!1;this.readCallbacks_=null
;100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)};jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_}
;jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()};jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()}
;jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_};jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_}
;jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP};jspb.BinaryReader.prototype.getError=function(){
return this.error_||this.decoder_.getError()};jspb.BinaryReader.prototype.setBlock=function(e,t,o){this.decoder_.setBlock(e,t,o);this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER
;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID};jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset();this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER
;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID};jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)};jspb.BinaryReader.prototype.nextField=function(){
if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3
;if((e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP)return goog.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),
this.error_=!0,!1;this.nextField_=t;this.nextWireType_=e;return!0};jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)}
;jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField()
;this.decoder_.atEnd()||this.unskipHeader()};jspb.BinaryReader.prototype.skipVarintField=function(){
this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()}
;jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),
this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}};jspb.BinaryReader.prototype.skipFixed32Field=function(){
this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)}
;jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),
this.skipField()):this.decoder_.advance(8)};jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){
goog.asserts.fail("Unmatched start-group tag: stream EOF");this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){
this.nextField_!=e&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}};jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){
case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:
this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:
goog.asserts.fail("Invalid wire encoding for field.")}};jspb.BinaryReader.prototype.registerReadCallback=function(e,t){goog.isNull(this.readCallbacks_)&&(this.readCallbacks_={})
;goog.asserts.assert(!this.readCallbacks_[e]);this.readCallbacks_[e]=t};jspb.BinaryReader.prototype.runReadCallback=function(e){goog.asserts.assert(!goog.isNull(this.readCallbacks_))
;e=this.readCallbacks_[e];goog.asserts.assert(e);return e(this)};jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e)
;var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64()
;case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString()
;case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes()
;case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32()
;case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0
};jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED)
;var o=this.decoder_.getEnd(),r=this.decoder_.readUnsignedVarint32();r=this.decoder_.getCursor()+r;this.decoder_.setEnd(r);t(e,this);this.decoder_.setCursor(r);this.decoder_.setEnd(o)}
;jspb.BinaryReader.prototype.readGroup=function(e,t,o){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP);goog.asserts.assert(this.nextField_==e);o(t,this)
;this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)}
;jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED)
;var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),o=t+e;e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e);this.decoder_.setCursor(o);return e}
;jspb.BinaryReader.prototype.readInt32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint32()}
;jspb.BinaryReader.prototype.readInt32String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint32String()}
;jspb.BinaryReader.prototype.readInt64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint64()}
;jspb.BinaryReader.prototype.readInt64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint64String()}
;jspb.BinaryReader.prototype.readUint32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint32()}
;jspb.BinaryReader.prototype.readUint32String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint32String()}
;jspb.BinaryReader.prototype.readUint64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint64()}
;jspb.BinaryReader.prototype.readUint64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint64String()}
;jspb.BinaryReader.prototype.readSint32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readZigzagVarint32()}
;jspb.BinaryReader.prototype.readSint64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readZigzagVarint64()}
;jspb.BinaryReader.prototype.readSint64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readZigzagVarint64String()}
;jspb.BinaryReader.prototype.readFixed32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readUint32()}
;jspb.BinaryReader.prototype.readFixed64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readUint64()}
;jspb.BinaryReader.prototype.readFixed64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readUint64String()}
;jspb.BinaryReader.prototype.readSfixed32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readInt32()}
;jspb.BinaryReader.prototype.readSfixed32String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readInt32().toString()}
;jspb.BinaryReader.prototype.readSfixed64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readInt64()}
;jspb.BinaryReader.prototype.readSfixed64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readInt64String()}
;jspb.BinaryReader.prototype.readFloat=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readFloat()}
;jspb.BinaryReader.prototype.readDouble=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readDouble()}
;jspb.BinaryReader.prototype.readBool=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return!!this.decoder_.readUnsignedVarint32()}
;jspb.BinaryReader.prototype.readEnum=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint64()}
;jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32()
;return this.decoder_.readString(e)};jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED)
;var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)};jspb.BinaryReader.prototype.readVarintHash64=function(){
goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readVarintHash64()};jspb.BinaryReader.prototype.readFixedHash64=function(){
goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readFixedHash64()};jspb.BinaryReader.prototype.readPackedField_=function(e){
goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t
;for(var o=[];this.decoder_.getCursor()<t;)o.push(e.call(this.decoder_));return o};jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)
};jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)};jspb.BinaryReader.prototype.readPackedInt64=function(){
return this.readPackedField_(this.decoder_.readSignedVarint64)};jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)}
;jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)};jspb.BinaryReader.prototype.readPackedUint32String=function(){
return this.readPackedField_(this.decoder_.readUnsignedVarint32String)};jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)}
;jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)};jspb.BinaryReader.prototype.readPackedSint32=function(){
return this.readPackedField_(this.decoder_.readZigzagVarint32)};jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)}
;jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)};jspb.BinaryReader.prototype.readPackedFixed32=function(){
return this.readPackedField_(this.decoder_.readUint32)};jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)}
;jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)};jspb.BinaryReader.prototype.readPackedSfixed32=function(){
return this.readPackedField_(this.decoder_.readInt32)};jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)}
;jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)};jspb.BinaryReader.prototype.readPackedFloat=function(){
return this.readPackedField_(this.decoder_.readFloat)};jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)}
;jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)};jspb.BinaryReader.prototype.readPackedEnum=function(){
return this.readPackedField_(this.decoder_.readEnum)};jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)}
;jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)};jspb.Map=function(e,t){this.arr_=e;this.valueCtor_=t;this.map_={}
;this.arrClean=!0;0<this.arr_.length&&this.loadFromArray_()};jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],o=t[0]
;this.map_[o.toString()]=new jspb.Map.Entry_(o,t[1])}this.arrClean=!0};jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_
;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var o=t[e].valueWrapper;o&&o.toArray()}}}else{this.arr_.length=0;(t=this.stringKeys_()).sort();for(e=0;e<t.length;e++){var r=this.map_[t[e]]
;(o=r.valueWrapper)&&o.toArray();this.arr_.push([r.key,r.value])}this.arrClean=!0}return this.arr_};jspb.Map.prototype.toObject=function(e,t){for(var o=this.toArray(),r=[],s=0;s<o.length;s++){
var n=this.map_[o[s][0].toString()];this.wrapEntry_(n);var a=n.valueWrapper;a?(goog.asserts.assert(t),r.push([n.key,t(e,a)])):r.push([n.key,n.value])}return r};jspb.Map.fromObject=function(e,t,o){
t=new jspb.Map([],t);for(var r=0;r<e.length;r++){var s=e[r][0],n=o(e[r][1]);t.set(s,n)}return t};jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0;this.arr_=e}
;jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}}
;"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this});jspb.Map.prototype.getLength=function(){return this.stringKeys_().length}
;jspb.Map.prototype.clear=function(){this.map_={};this.arrClean=!1};jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);delete this.map_[e];this.arrClean=!1;return t}
;jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var o=0;o<t.length;o++){var r=this.map_[t[o]];e.push([r.key,r.value])}return e}
;jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var o=0;o<t.length;o++){var r=this.map_[t[o]];e.push([r.key,this.wrapEntry_(r)])}
return new jspb.Map.ArrayIteratorIterable_(e)};jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var o=0;o<t.length;o++)e.push(this.map_[t[o]].key)
;return new jspb.Map.ArrayIteratorIterable_(e)};jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var o=0;o<t.length;o++)e.push(this.wrapEntry_(this.map_[t[o]]))
;return new jspb.Map.ArrayIteratorIterable_(e)};jspb.Map.prototype.forEach=function(e,t){var o=this.stringKeys_();o.sort();for(var r=0;r<o.length;r++){var s=this.map_[o[r]]
;e.call(t,this.wrapEntry_(s),s.key,this)}};jspb.Map.prototype.set=function(e,t){var o=new jspb.Map.Entry_(e);this.valueCtor_?(o.valueWrapper=t,o.value=t.toArray()):o.value=t;this.map_[e.toString()]=o
;this.arrClean=!1;return this};jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value}
;jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)};jspb.Map.prototype.has=function(e){return e.toString()in this.map_}
;jspb.Map.prototype.serializeBinary=function(e,t,o,r,s){var n=this.stringKeys_();n.sort();for(var a=0;a<n.length;a++){var i=this.map_[n[a]];t.beginSubMessage(e);o.call(t,1,i.key)
;this.valueCtor_?r.call(t,2,this.wrapEntry_(i),s):r.call(t,2,i.value);t.endSubMessage()}};jspb.Map.deserializeBinary=function(e,t,o,r,s,n){for(var a=void 0;t.nextField()&&!t.isEndGroup();){
var i=t.getFieldNumber();1==i?n=o.call(t):2==i&&(e.valueCtor_?(goog.asserts.assert(s),a=new e.valueCtor_,r.call(t,a,s)):a=r.call(t))}goog.asserts.assert(null!=n);goog.asserts.assert(null!=a)
;e.set(n,a)};jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,o=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&o.push(e);return o};jspb.Map.Entry_=function(e,t){this.key=e
;this.value=t;this.valueWrapper=void 0};jspb.ExtensionFieldInfo=function(e,t,o,r,s){this.fieldIndex=e;this.fieldName=t;this.ctor=o;this.toObjectFn=r;this.isRepeated=s}
;jspb.ExtensionFieldBinaryInfo=function(e,t,o,r,s,n){this.fieldInfo=e;this.binaryReaderFn=t;this.binaryWriterFn=o;this.binaryMessageSerializeFn=r;this.binaryMessageDeserializeFn=s;this.isPacked=n}
;jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor};jspb.Message=function(){};jspb.Message.GENERATE_TO_OBJECT=!0
;jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE;jspb.Message.GENERATE_TO_STRING=!0;jspb.Message.ASSUME_LOCAL_ARRAYS=!1;jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0
;jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array;jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_};jspb.Message.getIndex_=function(e,t){
return t+e.arrayIndexOffset_};jspb.Message.hiddenES6Property_=function(){};jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_};jspb.Message.initialize=function(e,t,o,r,s,n){
e.wrappers_=null;t||(t=o?[o]:[]);e.messageId_=o?String(o):void 0;e.arrayIndexOffset_=0===o?-1:0;e.array=t;jspb.Message.initPivotAndExtensionObject_(e,r);e.convertedPrimitiveFields_={}
;jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=s);if(s)for(t=0;t<s.length;t++)(o=s[t])<e.pivot_?(o=jspb.Message.getIndex_(e,o),
e.array[o]=e.array[o]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[o]=e.extensionObject_[o]||jspb.Message.EMPTY_LIST_SENTINEL_)
;if(n&&n.length)for(t=0;t<n.length;t++)jspb.Message.computeOneofCase(e,n[t])};jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[];jspb.Message.isArray_=function(e){
return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:goog.isArray(e)};jspb.Message.isExtensionObject_=function(e){
return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)};jspb.Message.initPivotAndExtensionObject_=function(e,t){
var o=e.array.length,r=-1;if(o&&(r=o-1,o=e.array[r],jspb.Message.isExtensionObject_(o))){e.pivot_=jspb.Message.getFieldNumber_(e,r);e.extensionObject_=o
}else-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,r+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE};jspb.Message.maybeInitEmptyExtensionObject_=function(e){
var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})};jspb.Message.toObjectList=function(e,t,o){for(var r=[],s=0;s<e.length;s++)r[s]=t.call(e[s],o,e[s]);return r}
;jspb.Message.toObjectExtension=function(e,t,o,r,s){for(var n in o){var a=o[n],i=r.call(e,a);if(null!=i){for(var l in a.fieldName)if(a.fieldName.hasOwnProperty(l))break
;t[l]=a.toObjectFn?a.isRepeated?jspb.Message.toObjectList(i,a.toObjectFn,s):a.toObjectFn(s,i):i}}};jspb.Message.serializeBinaryExtensions=function(e,t,o,r){for(var s in o){var n=o[s],a=n.fieldInfo
;if(!n.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var i=r.call(e,a);if(null!=i)if(a.isMessageType()){
if(!n.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format")
;n.binaryWriterFn.call(t,a.fieldIndex,i,n.binaryMessageSerializeFn)}else n.binaryWriterFn.call(t,a.fieldIndex,i)}};jspb.Message.readBinaryExtension=function(e,t,o,r,s){var n=o[t.getFieldNumber()]
;if(n){o=n.fieldInfo;if(!n.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(o.isMessageType()){var a=new o.ctor
;n.binaryReaderFn.call(t,a,n.binaryMessageDeserializeFn)}else a=n.binaryReaderFn.call(t);o.isRepeated&&!n.isPacked?(t=r.call(e,o))?t.push(a):s.call(e,o,[a]):s.call(e,o,a)}else t.skipField()}
;jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var o=e.array[t];return o===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:o}
if(e.extensionObject_)return(o=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:o};jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)}
;jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e};jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e
};jspb.Message.getRepeatedFloatingPointField=function(e,t){var o=jspb.Message.getRepeatedField(e,t);e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={});if(!e.convertedPrimitiveFields_[t]){
for(var r=0;r<o.length;r++)o[r]=+o[r];e.convertedPrimitiveFields_[t]=!0}return o};jspb.Message.getRepeatedBooleanField=function(e,t){var o=jspb.Message.getRepeatedField(e,t)
;e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={});if(!e.convertedPrimitiveFields_[t]){for(var r=0;r<o.length;r++)o[r]=!!o[r];e.convertedPrimitiveFields_[t]=!0}return o}
;jspb.Message.bytesAsB64=function(e){if(null==e||goog.isString(e))return e;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return goog.crypt.base64.encodeByteArray(e)
;goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e));return null};jspb.Message.bytesAsU8=function(e){if(null==e||e instanceof Uint8Array)return e
;if(goog.isString(e))return goog.crypt.base64.decodeStringToUint8Array(e);goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e));return null};jspb.Message.bytesListAsB64=function(e){
jspb.Message.assertConsistentTypes_(e);return!e.length||goog.isString(e[0])?e:goog.array.map(e,jspb.Message.bytesAsB64)};jspb.Message.bytesListAsU8=function(e){jspb.Message.assertConsistentTypes_(e)
;return!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)};jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0])
;goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}}
;jspb.Message.getFieldWithDefault=function(e,t,o){return null==(e=jspb.Message.getField(e,t))?o:e};jspb.Message.getBooleanFieldWithDefault=function(e,t,o){
return null==(e=jspb.Message.getBooleanField(e,t))?o:e};jspb.Message.getFloatingPointFieldWithDefault=function(e,t,o){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?o:e}
;jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault;jspb.Message.getMapField=function(e,t,o,r){e.wrappers_||(e.wrappers_={});if(t in e.wrappers_)return e.wrappers_[t]
;var s=jspb.Message.getField(e,t);if(!s){if(o)return;s=[];jspb.Message.setField(e,t,s)}return e.wrappers_[t]=new jspb.Map(s,r)};jspb.Message.setField=function(e,t,o){
t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=o:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=o)};jspb.Message.setProto3IntField=function(e,t,o){
jspb.Message.setFieldIgnoringDefault_(e,t,o,0)};jspb.Message.setProto3FloatField=function(e,t,o){jspb.Message.setFieldIgnoringDefault_(e,t,o,0)};jspb.Message.setProto3BooleanField=function(e,t,o){
jspb.Message.setFieldIgnoringDefault_(e,t,o,!1)};jspb.Message.setProto3StringField=function(e,t,o){jspb.Message.setFieldIgnoringDefault_(e,t,o,"")};jspb.Message.setProto3BytesField=function(e,t,o){
jspb.Message.setFieldIgnoringDefault_(e,t,o,"")};jspb.Message.setProto3EnumField=function(e,t,o){jspb.Message.setFieldIgnoringDefault_(e,t,o,0)};jspb.Message.setProto3StringIntField=function(e,t,o){
jspb.Message.setFieldIgnoringDefault_(e,t,o,"0")};jspb.Message.setFieldIgnoringDefault_=function(e,t,o,r){o!==r?jspb.Message.setField(e,t,o):e.array[jspb.Message.getIndex_(e,t)]=null}
;jspb.Message.addToRepeatedField=function(e,t,o,r){e=jspb.Message.getRepeatedField(e,t);null!=r?e.splice(r,0,o):e.push(o)};jspb.Message.setOneofField=function(e,t,o,r){
(o=jspb.Message.computeOneofCase(e,o))&&o!==t&&void 0!==r&&(e.wrappers_&&o in e.wrappers_&&(e.wrappers_[o]=void 0),jspb.Message.setField(e,o,void 0));jspb.Message.setField(e,t,r)}
;jspb.Message.computeOneofCase=function(e,t){for(var o,r,s=0;s<t.length;s++){var n=t[s],a=jspb.Message.getField(e,n);null!=a&&(o=n,r=a,jspb.Message.setField(e,n,void 0))}
return o?(jspb.Message.setField(e,o,r),o):0};jspb.Message.getWrapperField=function(e,t,o,r){e.wrappers_||(e.wrappers_={});if(!e.wrappers_[o]){var s=jspb.Message.getField(e,o)
;(r||s)&&(e.wrappers_[o]=new t(s))}return e.wrappers_[o]};jspb.Message.getRepeatedWrapperField=function(e,t,o){jspb.Message.wrapRepeatedField_(e,t,o)
;(t=e.wrappers_[o])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[o]=[]);return t};jspb.Message.wrapRepeatedField_=function(e,t,o){e.wrappers_||(e.wrappers_={});if(!e.wrappers_[o]){
for(var r=jspb.Message.getRepeatedField(e,o),s=[],n=0;n<r.length;n++)s[n]=new t(r[n]);e.wrappers_[o]=s}};jspb.Message.setWrapperField=function(e,t,o){e.wrappers_||(e.wrappers_={})
;var r=o?o.toArray():o;e.wrappers_[t]=o;jspb.Message.setField(e,t,r)};jspb.Message.setOneofWrapperField=function(e,t,o,r){e.wrappers_||(e.wrappers_={});var s=r?r.toArray():r;e.wrappers_[t]=r
;jspb.Message.setOneofField(e,t,o,s)};jspb.Message.setRepeatedWrapperField=function(e,t,o){e.wrappers_||(e.wrappers_={});o=o||[];for(var r=[],s=0;s<o.length;s++)r[s]=o[s].toArray();e.wrappers_[t]=o
;jspb.Message.setField(e,t,r)};jspb.Message.addToRepeatedWrapperField=function(e,t,o,r,s){jspb.Message.wrapRepeatedField_(e,r,t);var n=e.wrappers_[t];n||(n=e.wrappers_[t]=[]);o=o||new r
;e=jspb.Message.getRepeatedField(e,t);null!=s?(n.splice(s,0,o),e.splice(s,0,o.toArray())):(n.push(o),e.push(o.toArray()));return o};jspb.Message.toMap=function(e,t,o,r){
for(var s={},n=0;n<e.length;n++)s[t.call(e[n])]=o?o.call(e[n],r,e[n]):e[n];return s};jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){
var t=this.wrappers_[e];if(goog.isArray(t))for(var o=0;o<t.length;o++)t[o]&&t[o].toArray();else t&&t.toArray()}};jspb.Message.prototype.toArray=function(){this.syncMapFields_();return this.array}
;jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){this.syncMapFields_();return this.array.toString()});jspb.Message.prototype.getExtension=function(e){
if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){
if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]
}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}}
;jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={});jspb.Message.maybeInitEmptyExtensionObject_(this);var o=e.fieldIndex;e.isRepeated?(t=t||[],
e.isMessageType()?(this.wrappers_[o]=t,this.extensionObject_[o]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[o]=t):e.isMessageType()?(this.wrappers_[o]=t,
this.extensionObject_[o]=t?t.toArray():t):this.extensionObject_[o]=t;return this};jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.")
;var o=e.toArray();t=t.toArray();var r=[],s=0,n=o.length>t.length?o.length:t.length;e.getJsPbMessageId()&&(r[0]=e.getJsPbMessageId(),s=1)
;for(;s<n;s++)jspb.Message.compareFields(o[s],t[s])||(r[s]=t[s]);return new e.constructor(r)};jspb.Message.equals=function(e,t){
return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())};jspb.Message.compareExtensions=function(e,t){e=e||{};t=t||{};var o,r={};for(o in e)r[o]=0
;for(o in t)r[o]=0;for(o in r)if(!jspb.Message.compareFields(e[o],t[o]))return!1;return!0};jspb.Message.compareFields=function(e,t){if(e==t)return!0
;if(!goog.isObject(e)||!goog.isObject(t))return!!(goog.isNumber(e)&&isNaN(e)||goog.isNumber(t)&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1
;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!=t[o])return!1;return!0}if(e.constructor===Array){
var r=void 0,s=void 0,n=Math.max(e.length,t.length);for(o=0;o<n;o++){var a=e[o],i=t[o];a&&a.constructor==Object&&(goog.asserts.assert(void 0===r),goog.asserts.assert(o===e.length-1),r=a,a=void 0)
;i&&i.constructor==Object&&(goog.asserts.assert(void 0===s),goog.asserts.assert(o===t.length-1),s=i,i=void 0);if(!jspb.Message.compareFields(a,i))return!1}return!r&&!s||(r=r||{},s=s||{},
jspb.Message.compareExtensions(r,s))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")};jspb.Message.prototype.cloneMessage=function(){
return jspb.Message.cloneMessage(this)};jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)};jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)}
;jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))};jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message)
;goog.asserts.assertInstanceof(t,jspb.Message);goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type.");e=jspb.Message.clone(e)
;for(var o=t.toArray(),r=e.toArray(),s=o.length=0;s<r.length;s++)o[s]=r[s];t.wrappers_=e.wrappers_;t.extensionObject_=e.extensionObject_};jspb.Message.clone_=function(e){if(goog.isArray(e)){
for(var t=Array(e.length),o=0;o<e.length;o++){var r=e[o];null!=r&&(t[o]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r)}return t}
if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);t={};for(o in e)null!=(r=e[o])&&(t[o]="object"==typeof r?jspb.Message.clone_(goog.asserts.assert(r)):r);return t}
;jspb.Message.registerMessageType=function(e,t){jspb.Message.registry_[e]=t;t.messageId=e};jspb.Message.registry_={};jspb.Message.messageSetExtensions={};jspb.Message.messageSetExtensionsBinary={}
;jspb.arith={};jspb.arith.UInt64=function(e,t){this.lo=e;this.hi=t};jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1}
;jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)};jspb.arith.UInt64.prototype.leftShift=function(){
return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)};jspb.arith.UInt64.prototype.lsb=function(){
return!!(1&this.lo)};jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi};jspb.arith.UInt64.prototype.add=function(e){
return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)};jspb.arith.UInt64.prototype.sub=function(e){
return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)};jspb.arith.UInt64.mul32x32=function(e,t){var o=65535&e,r=65535&t,s=t>>>16
;t=o*r+65536*(o*s&65535)+65536*((e>>>=16)*r&65535);for(o=e*s+(o*s>>>16)+(e*r>>>16);4294967296<=t;)t-=4294967296,o+=1;return new jspb.arith.UInt64(t>>>0,o>>>0)}
;jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo;e.lo=0;return t.add(e)}
;jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),o=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0)
;for(var r=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),r=r.leftShift();for(;!r.zero();)0>=e.cmp(o)&&(t=t.add(r),o=o.sub(e)),e=e.rightShift(),r=r.rightShift();return[t,o]}
;jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var o=(t=t.div(10))[0];e=t[1].lo+e;t=o}""==e&&(e="0");return e};jspb.arith.UInt64.fromString=function(e){
for(var t=new jspb.arith.UInt64(0,0),o=new jspb.arith.UInt64(0,0),r=0;r<e.length;r++){if("0">e[r]||"9"<e[r])return null;var s=parseInt(e[r],10);o.lo=s;t=t.mul(10).add(o)}return t}
;jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)};jspb.arith.Int64=function(e,t){this.lo=e;this.hi=t};jspb.arith.Int64.prototype.add=function(e){
return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)};jspb.arith.Int64.prototype.sub=function(e){
return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)};jspb.arith.Int64.prototype.clone=function(){
return new jspb.arith.Int64(this.lo,this.hi)};jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi)
;e&&(t=new jspb.arith.UInt64(0,0).sub(t));return(e?"-":"")+t.toString()};jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];t&&(e=e.substring(1))
;if(null===(e=jspb.arith.UInt64.fromString(e)))return null;t&&(e=new jspb.arith.UInt64(0,0).sub(e));return new jspb.arith.Int64(e.lo,e.hi)};jspb.BinaryEncoder=function(){this.buffer_=[]}
;jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length};jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;this.buffer_=[];return e}
;jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(t==Math.floor(t));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32)
;for(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)}
;jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(t==Math.floor(t));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32)
;goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);this.writeUint32(e);this.writeUint32(t)};jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){
goog.asserts.assert(e==Math.floor(e));for(goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)}
;jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31)
;if(0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}};jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){
goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64);jspb.utils.splitInt64(e);this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)}
;jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63)
;jspb.utils.splitInt64(e);this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e))
;goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31);this.writeUnsignedVarint32((e<<1^e>>31)>>>0)};jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){
goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63);jspb.utils.splitZigzag64(e)
;this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarint64(parseInt(e,10))}
;jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&256>e);this.buffer_.push(e>>>0&255)}
;jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&65536>e);this.buffer_.push(e>>>0&255);this.buffer_.push(e>>>8&255)}
;jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);this.buffer_.push(e>>>0&255)
;this.buffer_.push(e>>>8&255);this.buffer_.push(e>>>16&255);this.buffer_.push(e>>>24&255)};jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e))
;goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64);jspb.utils.splitUint64(e);this.writeUint32(jspb.utils.split64Low);this.writeUint32(jspb.utils.split64High)}
;jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(-128<=e&&128>e);this.buffer_.push(e>>>0&255)}
;jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(-32768<=e&&32768>e);this.buffer_.push(e>>>0&255);this.buffer_.push(e>>>8&255)}
;jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31)
;this.buffer_.push(e>>>0&255);this.buffer_.push(e>>>8&255);this.buffer_.push(e>>>16&255);this.buffer_.push(e>>>24&255)};jspb.BinaryEncoder.prototype.writeInt64=function(e){
goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63);jspb.utils.splitInt64(e)
;this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e))
;goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63);jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))
;this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeFloat=function(e){
goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX);jspb.utils.splitFloat32(e);this.writeUint32(jspb.utils.split64Low)}
;jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX);jspb.utils.splitFloat64(e)
;this.writeUint32(jspb.utils.split64Low);this.writeUint32(jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert(goog.isBoolean(e)||goog.isNumber(e))
;this.buffer_.push(e?1:0)};jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e))
;goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31);this.writeSignedVarint32(e)};jspb.BinaryEncoder.prototype.writeBytes=function(e){
this.buffer_.push.apply(this.buffer_,e)};jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e);this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)}
;jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e);this.writeUint32(jspb.utils.split64Low);this.writeUint32(jspb.utils.split64High)}
;jspb.BinaryEncoder.prototype.writeString=function(e){for(var t=this.buffer_.length,o=0;o<e.length;o++){var r=e.charCodeAt(o);if(128>r)this.buffer_.push(r);else if(2048>r)this.buffer_.push(r>>6|192),
this.buffer_.push(63&r|128);else if(65536>r)if(55296<=r&&56319>=r&&o+1<e.length){var s=e.charCodeAt(o+1);56320<=s&&57343>=s&&(r=1024*(r-55296)+s-56320+65536,this.buffer_.push(r>>18|240),
this.buffer_.push(r>>12&63|128),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128),o++)}else this.buffer_.push(r>>12|224),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128)}
return this.buffer_.length-t};jspb.BinaryWriter=function(){this.blocks_=[];this.totalLength_=0;this.encoder_=new jspb.BinaryEncoder;this.bookmarks_=[]}
;jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t);this.blocks_.push(e);this.totalLength_+=t.length+e.length}
;jspb.BinaryWriter.prototype.beginDelimited_=function(e){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);e=this.encoder_.end();this.blocks_.push(e);this.totalLength_+=e.length
;e.push(this.totalLength_);return e};jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();t=this.totalLength_+this.encoder_.length()-t
;for(goog.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t);this.totalLength_++};jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,o){
this.appendUint8Array_(e.subarray(t,o))};jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,o){null!=e&&null!=t&&null!=o&&this.writeSerializedMessage(e,t,o)}
;jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[];this.encoder_.end();this.totalLength_=0;this.bookmarks_=[]};jspb.BinaryWriter.prototype.getResultBuffer=function(){
goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,o=t.length,r=0,s=0;s<o;s++){var n=t[s];e.set(n,r);r+=n.length}
t=this.encoder_.end();e.set(t,r);r+=t.length;goog.asserts.assert(r==e.length);this.blocks_=[e];return e};jspb.BinaryWriter.prototype.getResultBase64String=function(e){
return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)};jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))}
;jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length);this.endDelimited_(this.bookmarks_.pop())}
;jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e));this.encoder_.writeUnsignedVarint32(8*e+t)}
;jspb.BinaryWriter.prototype.writeAny=function(e,t,o){var r=jspb.BinaryConstants.FieldType;switch(e){case r.DOUBLE:this.writeDouble(t,o);break;case r.FLOAT:this.writeFloat(t,o);break;case r.INT64:
this.writeInt64(t,o);break;case r.UINT64:this.writeUint64(t,o);break;case r.INT32:this.writeInt32(t,o);break;case r.FIXED64:this.writeFixed64(t,o);break;case r.FIXED32:this.writeFixed32(t,o);break
;case r.BOOL:this.writeBool(t,o);break;case r.STRING:this.writeString(t,o);break;case r.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case r.MESSAGE:
goog.asserts.fail("Message field type not supported in writeAny()");break;case r.BYTES:this.writeBytes(t,o);break;case r.UINT32:this.writeUint32(t,o);break;case r.ENUM:this.writeEnum(t,o);break
;case r.SFIXED32:this.writeSfixed32(t,o);break;case r.SFIXED64:this.writeSfixed64(t,o);break;case r.SINT32:this.writeSint32(t,o);break;case r.SINT64:this.writeSint64(t,o);break;case r.FHASH64:
this.writeFixedHash64(t,o);break;case r.VHASH64:this.writeVarintHash64(t,o);break;default:goog.asserts.fail("Invalid field type in writeAny()")}}
;jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))}
;jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))}
;jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))}
;jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))}
;jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))}
;jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))}
;jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))}
;jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))}
;jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),
this.writeSignedVarint32_(e,t))};jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),
this.writeSignedVarint64_(e,t))};jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),
this.encoder_.writeSplitVarint64(t.lo,t.hi))};jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),
this.writeUnsignedVarint32_(e,t))};jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),
this.writeUnsignedVarint32_(e,t))};jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))}
;jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),
this.encoder_.writeSplitVarint64(t.lo,t.hi))};jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),
this.writeZigzagVarint32_(e,t))};jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),
this.writeZigzagVarint64_(e,t))};jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&(goog.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),
this.writeZigzagVarint64String_(e,t))};jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),
this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))};jspb.BinaryWriter.prototype.writeFixed64=function(e,t){
null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))}
;jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),
this.encoder_.writeSplitFixed64(t.lo,t.hi))};jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){
null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))}
;jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),
this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))};jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),
this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))};jspb.BinaryWriter.prototype.writeFloat=function(e,t){
null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))};jspb.BinaryWriter.prototype.writeDouble=function(e,t){
null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))};jspb.BinaryWriter.prototype.writeBool=function(e,t){
null!=t&&(goog.asserts.assert(goog.isBoolean(t)||goog.isNumber(t)),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))}
;jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),
this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))};jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),
this.encoder_.writeString(t),this.endDelimited_(e))};jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),
this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))};jspb.BinaryWriter.prototype.writeMessage=function(e,t,o){
null!=t&&(e=this.beginDelimited_(e),o(t,this),this.endDelimited_(e))};jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,o){
null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),
e=this.beginDelimited_(3),o(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))};jspb.BinaryWriter.prototype.writeGroup=function(e,t,o){
null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),o(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))}
;jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),
this.encoder_.writeFixedHash64(t))};jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),
this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))};jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeSignedVarint32_(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeInt32String(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeSignedVarint64_(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeInt64String(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeUnsignedVarint32_(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeUint32String(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeUnsignedVarint64_(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeUint64String(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeZigzagVarint32_(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeZigzagVarint64_(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeZigzagVarint64String_(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeFixed32(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeFixed64(e,t[o])}
;jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeFixed64String(e,t[o])}
;jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeSfixed32(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeSfixed64(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeSfixed64String(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeFloat(e,t[o])}
;jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeDouble(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeBool(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeEnum(e,t[o])}
;jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeString(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){
if(null!=t)for(var o=0;o<t.length;o++)this.writeBytes(e,t[o])};jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,o){if(null!=t)for(var r=0;r<t.length;r++){var s=this.beginDelimited_(e)
;o(t[r],this);this.endDelimited_(s)}};jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,o){
if(null!=t)for(var r=0;r<t.length;r++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),o(t[r],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)}
;jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeFixedHash64(e,t[o])}
;jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var o=0;o<t.length;o++)this.writeVarintHash64(e,t[o])};jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){
if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSignedVarint32(t[o]);this.endDelimited_(e)}}
;jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSignedVarint32(parseInt(t[o],10))
;this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSignedVarint64(t[o])
;this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++){
var r=jspb.arith.Int64.fromString(t[o]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){
e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeUnsignedVarint32(t[o]);this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){
if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeUnsignedVarint32(parseInt(t[o],10));this.endDelimited_(e)}}
;jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeUnsignedVarint64(t[o]);this.endDelimited_(e)}
};jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++){var r=jspb.arith.UInt64.fromString(t[o])
;this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e)
;for(var o=0;o<t.length;o++)this.encoder_.writeZigzagVarint32(t[o]);this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e)
;for(var o=0;o<t.length;o++)this.encoder_.writeZigzagVarint64(t[o]);this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){
e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeZigzagVarint64(parseInt(t[o],10));this.endDelimited_(e)}};jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){
if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])}
;jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),
this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])};jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){
if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var o=jspb.arith.UInt64.fromString(t[e])
;this.encoder_.writeSplitFixed64(o.lo,o.hi)}};jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),
this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])};jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){
if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])}
;jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),
this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])};jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){
if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])}
;jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),
e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])};jspb.BinaryWriter.prototype.writePackedBool=function(e,t){
if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])}
;jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeEnum(t[o]);this.endDelimited_(e)}}
;jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),
this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])};jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){
e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeVarintHash64(t[o]);this.endDelimited_(e)}};jspb.Export={};exports.Map=jspb.Map;exports.Message=jspb.Message
;exports.BinaryReader=jspb.BinaryReader;exports.BinaryWriter=jspb.BinaryWriter;exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo;exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo
;exports.exportSymbol=goog.exportSymbol;exports.inherits=goog.inherits;exports.object={extend:goog.object.extend};exports.typeOf=goog.typeOf;module.exports=exports
}).call(this,__webpack_require__(152),__webpack_require__(1035).Buffer)},892:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.EtherpadWebSocket=t.SLOW_COMMIT_TIMEOUT=void 0
;var r=o(628),s=o(473),n=o(474),a=o(475),i=o(476),l=o(38),c=o(44),g=o(1631),d=o(1632),u=o(1633),p=o(41),h=o(308);"undefined"==typeof streamingClientContextPath&&(streamingClientContextPath="")
;"undefined"==typeof streamingClientAcceptableChannelTypes&&(streamingClientAcceptableChannelTypes=[])
;var f,b="".concat(n.ControlMessage.PlannedRestart.length,":").concat(n.ControlMessage.PlannedRestart),m=15*p.Time.SECOND,y=1*p.Time.SECOND;t.SLOW_COMMIT_TIMEOUT=m+u.KEEPALIVE_TIMEOUT+15*p.Time.SECOND
;!function(e){e[e.INIT=-1]="INIT";e[e.CONNECTING=0]="CONNECTING";e[e.OPEN=1]="OPEN";e[e.CLOSED=2]="CLOSED"}(f||(f={}));var C=function(){function e(e,t,o,r,s){void 0===t&&(t="");this.id=e;this.tag=t
;this.extraHeaders=o;this.isNewPad=r;this.connectLite=!1;this.onclosed=function(){};this.onhiccup=function(){};this.onlogmessage=function(){};this.onmessage=function(){};this.onopen=function(){}
;this.channelSeq=1;this.currentBackoffStep=0;this.hiccupRequest=null;this.hiccupResetInterval=null;this.hiccupsLastMinute=0;this.isHiccuping=!1;this.isPosting=!1;this.lastReceivedSeqNumber=0
;this.officialChannel=null;this.postSeq=1;this.readyState=f.INIT;this.activeChannels={};this.lastPost=null;this.outgoingMessageQueue=new d.default;this.postTimeouts={};this.timeouts={};this.version=2
;this.xhrManager=s||new i.XHRManager(e,this.extraHeaders,this.log.bind(this));this.initHiccupResetInterval()}Object.defineProperty(e.prototype,"officialChannelName",{get:function(){
return this.officialChannel?this.officialChannel.name:"none"},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"tagArg",{get:function(){return this.tag?"&tag=".concat(this.tag):""},
enumerable:!1,configurable:!0});e.prototype.connect=function(e){this.log("socket connecting: ".concat(this.id));this.doConnect(e)};e.prototype.getOfficialChannel=function(){return this.officialChannel
};e.prototype.dataHandler=function(e){if(e.seqNumber>this.lastReceivedSeqNumber+1){this.log("bad sequence number. expecting: ".concat(this.lastReceivedSeqNumber+1,", got: ").concat(e.seqNumber))
;this.hiccup(this);return!1}if(e.seqNumber<this.lastReceivedSeqNumber+1)return!0;this.lastReceivedSeqNumber=e.seqNumber;if(!e.isControl){this.onmessage({data:e.content});return!0}
if("kill"===e.content){this.doDisconnect({reason:"Killed by server.",reconnect:!1});return!1}};e.prototype.disconnect=function(e,t){void 0===e&&(e=!1);void 0===t&&(t=!1);this.doDisconnect({
reason:"Closed by client.",reconnect:!1},e,t)};e.prototype.doDisconnect=function(e,t,o){this.log("disconnected: ".concat(e.reason," / ").concat(e.data?"data: ".concat(e.data):""));this.logAll()
;this.closeAllChannels();this.xhrManager.closeAllOpenXhrs();if(this.readyState!==f.CLOSED){this.readyState=f.CLOSED;if(!t){var r=new s.StreamingClientControlMessage.KillMessage;r.setReason(e.reason)
;var n=new s.StreamingClientControlMessage;n.setKill(r);var a=new s.CollabMessage;a.setStreamingClientControlMessage(n);this.postSingleMessageNow(a,o,!0)}this.onclosed(e)}}
;e.prototype.getDiagnosticInfo=function(){return{channelSeq:this.channelSeq,hiccupsLastMinute:this.hiccupsLastMinute,id:this.id,isHiccuping:this.isHiccuping,isPosting:this.isPosting,
lastPost:this.lastPost,lastReceivedSeqNumber:this.lastReceivedSeqNumber,officialChannel:this.officialChannelName,readyState:this.readyState}};e.prototype.getLastReceivedSeqNumber=function(){
return this.lastReceivedSeqNumber};e.prototype.getReadyState=function(){return this.readyState};e.prototype.handlePlannedRestartMessageFromNginx=function(){this.onmessage({data:JSON.stringify({
type:"COLLABROOM",data:{type:"PLANNED_RESTART"}})})};e.prototype.handleStatusRateLimited=function(){this.onmessage({data:JSON.stringify({type:"COLLABROOM",data:{type:"RATE_LIMITED"}})})}
;e.prototype.hiccup=function(e){var t=this;if((e===this.officialChannel||e===this)&&!this.isHiccuping){this.log("hiccup: ".concat(e.name));var o=this.hiccupsLastMinute;this.hiccupsLastMinute++
;o>10&&this.doDisconnect({reason:"Too many hiccups!",reconnect:!0});this.closeAllChannels();(0,a.timeout)(this.timeouts,"hiccup",15*p.Time.SECOND,(function(){t.isHiccuping=!1
;t.timeouts.singleHiccup&&t.timeouts.singleHiccup();t.clearHiccupRequest();t.doDisconnect({reason:"Couldn't contact server to hiccup.",reconnect:!1,reconnectLite:!0})}));this.isHiccuping=!0
;this.tryHiccup()}};e.prototype.isOpen=function(){return this.readyState===f.OPEN};e.prototype.notifyConnect=function(e){var t=this;this.timeouts.connect()
;if(this.officialChannel&&e.weight<=this.officialChannel.weight)return!1;this.log("switching to use channel: ".concat(e.name));var o=this.officialChannel;this.officialChannel=e;setTimeout((function(){
var r=t.channelSeq++;t.log("notifyConnect: sending useChannel: ".concat(r,": ").concat(e.name));var n=new s.StreamingClientControlMessage.UseChannelMessage;n.setChannelSeq(r);n.setName(e.name)
;var a=new s.StreamingClientControlMessage;a.setUseChannel(n);var i=new s.CollabMessage;i.setStreamingClientControlMessage(a);t.postSingleMessageNow(i,!1,!1,(function(r,s){
if(t.officialChannel===e)if(r){t.log("notifyConnect: success for ".concat(n));o&&o.disconnect();if(t.readyState!==f.OPEN){t.readyState=f.OPEN;t.onopen()}else t.onhiccup({connected:!0})
;o||t.doOtherConnect()}else{t.log("notifyConnect: fail for ".concat(n));t.doDisconnect({data:s,reason:"Failed to select channel on server.",reconnect:!0})
}else t.log("ignoring useChannel response as officialChannel has changed from ".concat(e.name))}))}),0);return!0};e.prototype.postMessage=function(e,t,o){var r=this;if(this.readyState===f.OPEN){
this.outgoingMessageQueue.offer({message:e,callback:t,remark:o});setTimeout((function(){return r.postPendingMessages()}),0)}};e.prototype.debugDoHiccupOnActiveChannel=function(e){
this.hiccup(this.activeChannels[e])};e.prototype.backoffWaitTime=function(){return Math.pow(2,this.currentBackoffStep-1)*y};e.prototype.backoff=function(){if(4===this.currentBackoffStep)return!1
;this.currentBackoffStep=Math.min(4,this.currentBackoffStep+1);return!0};e.prototype.resetBackoff=function(){this.currentBackoffStep=0};e.prototype.clearHiccupRequest=function(){
if(this.hiccupRequest){this.hiccupRequest.onreadystatechange=function(){};this.hiccupRequest.abort();this.hiccupRequest=null}};e.prototype.closeAllChannels=function(){
for(var e in this.activeChannels)this.activeChannels.hasOwnProperty(e)&&this.activeChannels[e].disconnect();this.officialChannel=null};e.prototype.describe=function(){
return"socket state: { "+"id: ".concat(this.id,", ")+"readyState: ".concat(this.readyState,", ")+"isHiccuping: ".concat(this.isHiccuping,", ")+"timeouts: ".concat((0,
a.describeTimeouts)(this.timeouts),", ")+"officialChannel: ".concat(this.officialChannelName,", ")+"channels: ".concat(this.describeChannels(),", ")+"isPosting: ".concat(this.isPosting,", ")+"lastReceivedSeqNumber: ".concat(this.lastReceivedSeqNumber,", ")+"lastPost: ".concat(this.lastPost)+"postTimeouts: ".concat((0,
a.describeTimeouts)(this.postTimeouts),", ")+"channelSeq: ".concat(this.channelSeq," }")};e.prototype.describeChannels=function(){var e=[]
;for(var t in this.activeChannels)this.activeChannels.hasOwnProperty(t)&&e.push("".concat(t,": ").concat(this.activeChannels[t].describe()));return"[ ".concat(e.join(", ")," ]")}
;e.prototype.doBasicConnect=function(){var e=this.getBasicChannel();this.log("basic connect on type: ".concat(e));var t=this.newChannelFromType(e);this.activeChannels[e]=t;t.connect({
connectLite:this.connectLite})};e.prototype.doConnect=function(e){var t=this;void 0===e&&(e=15*p.Time.SECOND);this.log("doing connect!");(0,a.timeout)(this.timeouts,"connect",e,(function(){
t.doDisconnect({reason:"Timeout connecting to server: no channel type was able to connect.",reconnect:!1,reconnectLite:!0},!0)}));this.doBasicConnect()};e.prototype.doOtherConnect=function(){
var e=this;this.getOtherChannels().forEach((function(t){e.log("other connect on type: ".concat(t));var o=e.newChannelFromType(t);e.activeChannels[t]=o;o.connect()}))}
;e.prototype.newChannelFromType=function(e){var t={id:this.id,isocket:this,tagArg:this.tagArg,xhrManager:this.xhrManager,log:this.log.bind(this),newPad:this.isNewPad};switch(e){
case r.ChannelTypeName.ShortPolling:return new g.default(t);case r.ChannelTypeName.Streaming:return new u.default(t);default:throw new Error("Unexpected channel type ".concat(e))}}
;e.prototype.getBasicChannel=function(){return this.getValidChannels()[0]};e.prototype.getOtherChannels=function(){return this.getValidChannels().slice(1)};e.prototype.getValidChannels=function(){
return streamingClientAcceptableChannelTypes};e.prototype.hiccupCallback=function(e,t){if(this.isHiccuping&&this.hiccupRequest){this.hiccupRequest=null
;this.timeouts.singleHiccup&&this.timeouts.singleHiccup();try{if(t.trim()===b){this.handlePlannedRestartMessageFromNginx();return}}catch(e){}if("restart-fail"===t.substring(0,12)){
this.timeouts.hiccup();this.doDisconnect({reason:"Server restarted or socket timed out on server.",reconnect:!0})}else if(200!==e||"ok"!=t.substring(0,2)){
this.log("Failed to hiccup with error: ".concat(e," / ").concat(t));setTimeout(this.tryHiccup.bind(this),500)}else{this.isHiccuping=!1;this.timeouts.hiccup();this.doConnect()}}}
;e.prototype.initHiccupResetInterval=function(){var e=this;this.hiccupResetInterval=(0,c.setInterval)((function(){e.hiccupsLastMinute=0;e.readyState===f.CLOSED&&clearInterval(e.hiccupResetInterval)
}),60*p.Time.SECOND)};e.prototype.logAll=function(){this.log(this.describe())};e.prototype.postPath=function(e){
return"".concat(streamingClientContextPath,"/post")+"?r=".concat(l.getStandardLengthRandomId())+"&v=".concat(this.version)+"&id=".concat(this.id)+"&seq=".concat(this.lastReceivedSeqNumber)+this.tagArg+"&xsrf=".concat(h.getXsrfTokenFromCookie())+"&postSeq=".concat(this.postSeq++)+"&remark=".concat(encodeURIComponent(e||""))+"&padIsNew=".concat(this.isNewPad.toString())
};e.prototype.postSingleMessageNow=function(e,t,o,r){this.doPostMessages([{message:e,callback:r}],t,o)};e.prototype.doPostMessages=function(e,t,o,r){if(o||this.readyState!==f.CLOSED)if(0!==e.length){
var n=[],a=[],i=[];e.forEach((function(e){var t=e.message,o=e.callback,r=e.remark;n.push(t);o&&a.push(o);r&&i.push(r)}));var l=new s.CollabMessageList;l.setCollabMessagesList(n)
;var c=l.serializeBinary(),g=i.join(",");this.postMessageRequest(g,c,t,a,r)}else r&&r()};e.prototype.postMessageRequest=function(e,t,o,r,s){var n=this,l=this.postPath(e);(0,
a.timeout)(this.postTimeouts,"post",m,(function(){n.log("doPostMessages: post timed out ".concat(l));n.doDisconnect({reconnect:!0,reason:"Posting message timed out."},!0)}))
;this.log("doPostMessages: making post ".concat(l));this.xhrManager.request(i.HTTPMethod.Post,l,!o,t,(function(a,i,c){n.postTimeouts.post();if(429===a&&!o&&n.backoff()){var g=n.backoffWaitTime()
;n.log("doPostMessages: received 429, backing off for ".concat(g,"ms"));setTimeout((function(){n.postMessageRequest(e,t,o,r,s)}),g)}else if(200!==a||"ok"!==i.substring(0,2)){n.resetBackoff()
;n.log("doPostMessages: post failed (".concat(a,") ").concat(l));n.postMessageRequestFailed(a,i,c,"1",r)}else{n.resetBackoff();n.log("doPostMessages: post success (".concat(a,") ").concat(l))
;r.forEach((function(e){return e(!0)}));s&&s()}}))};e.prototype.postMessageRequestFailed=function(e,t,o,r,s){var n="";try{n="".concat(e,": ").concat(o.statusText," - ").concat(t," (").concat(r,")")
}catch(e){}this.log("postFailed: ".concat(n));this.doDisconnect({reconnect:!0,reason:"Posting message failed.",data:n},!0);s.forEach((function(e){return e(!1,n)}))}
;e.prototype.postPendingMessages=function(){var e=this;if(!this.isPosting){var t=this.outgoingMessageQueue.clear();if(0!==t.length){this.isPosting=!0;this.doPostMessages(t,!1,!1,(function(){
e.isPosting=!1;setTimeout(e.postPendingMessages.bind(e),0)}))}}};e.prototype.tryHiccup=function(){var e=this;if(this.readyState!==f.CLOSED&&this.isHiccuping){this.onhiccup({connected:!1})
;this.log("trying hiccup");(0,a.timeout)(this.timeouts,"singleHiccup",5*p.Time.SECOND,(function(){e.tryHiccup()}));this.clearHiccupRequest();var t=new s.StreamingClientControlMessage
;t.setHiccup(new s.StreamingClientControlMessage.HiccupMessage);var o=new s.CollabMessage;o.setStreamingClientControlMessage(t);var r=new s.CollabMessageList;r.setCollabMessagesList([o])
;var n=r.serializeBinary();this.hiccupRequest=this.xhrManager.request(i.HTTPMethod.Post,this.postPath(),!0,n,this.hiccupCallback.bind(this))}};e.prototype.log=function(e){
var t=Math.floor((new Date).valueOf()/100)%1e7;this.onlogmessage("(comet @t: ".concat(t,") ").concat(e))};return e}();t.EtherpadWebSocket=C},893:function(e,t,o){Object.defineProperty(t,"__esModule",{
value:!0});var r=o(1),s=o(6),n=o(1641),a=o(8),i=o(59),l=o(12),c=o(1642),g=o(17),d=function(e){r.__extends(t,e);function t(t,o,r){var n=e.call(this)||this;n.padController=t;n.pendingAccessRequests=[]
;n.passStore=new c.default((function(e){return s.assign(e,{isRemoved:!1})}),n.padController,o,r);n.passStore.addOnChangeHandler((function(){return n.onChange()}));n.loadPendingAccessRequests()
;return n}t.prototype.onChange=function(){this.trigger("change",void 0)};t.prototype.getAllConnectedUsers=function(){return this.passStore.getAllConnectedUsers()}
;t.prototype.getConnectedUsers=function(){return this.passStore.getConnectedUsers()};t.prototype.getUser=function(e){return this.passStore.getUser(e)};t.prototype.getAllUsersOnDoc=function(){
return this.passStore.getAllUsersOnDoc().map((function(e){return{info:s.assign({},e,{isRemoved:void 0}),isRemoved:e.isRemoved}}))};t.prototype.getAllUsersOnDocExceptKickedOut=function(){
return this.getAllUsersOnDoc().filter((function(e){return!e.isRemoved}))};t.prototype.isUserWithEmailInDoc=function(e){return this.getAllUsersOnDocExceptKickedOut().some((function(t){
return t.info.email==e}))};t.prototype.isUserWithSecureUserIdInDoc=function(e){return this.getAllUsersOnDocExceptKickedOut().some((function(t){return t.info.secureUserId==e}))}
;t.prototype.loadPendingAccessRequests=function(){var e=this,t=this.padController&&this.padController.getPadId();this.padController&&this.padController.getUserIsOwner()&&t&&l.get({
url:"/ep/account/guest/pending-access-requests",data:{localPadId:this.padController.getPadId()},analyticsTag:"pending-access-requests",shardingKey:l.getStatelessShardingKey(),
successHandler:function(t){if(t&&!s.isEqual(e.pendingAccessRequests,t.pendingAccessRequests)){e.pendingAccessRequests=t.pendingAccessRequests;e.onChange()}}})}
;t.prototype.getPendingAccessRequests=function(){return this.pendingAccessRequests.slice().sort((function(e,t){return(e.name||"Guest").localeCompare(t.name||"Guest")}))}
;t.prototype.grantAccess=function(e){var t=this;n.grantAccess(e,(function(o){t.removeAccessRequest(e)}))};t.prototype.ignoreAccessRequest=function(e){var t=this;n.ignoreAccessRequest(e,(function(o){
t.removeAccessRequest(e)}))};t.prototype.removeAccessRequest=function(e){this.pendingAccessRequests=this.pendingAccessRequests.filter((function(t){return e.encryptedAccountId!=t.encryptedAccountId}))
;this.onChange();this.loadPendingAccessRequests()};t.prototype.getCurrentUser=function(){return this.passStore.getUser(a.default.secureUserId)};t.prototype.canCurrentUserChangePermissions=function(){
return!!a.default.isSignedIn()&&"edit"===this.getCurrentUser().permission};t.prototype.canCurrentUserChangeFolder=function(){return this.canCurrentUserChangePermissions()}
;t.prototype.canMakeUserOwner=function(e){
var t=this.getCurrentUser(),o=t&&t.isOwner,r=a.default.isDomainAdmin&&a.default.encryptedTeamId==this.padController.padEncryptedDomainId,s=e.encryptedTeamId==this.padController.padEncryptedDomainId
;return(o||r)&&s};t.prototype.userJoinOrUpdate=function(e){this.passStore.userJoinOrUpdate(e)};t.prototype.userLeave=function(e){this.passStore.userLeave(e)};t.prototype.userKill=function(e){
this.passStore.editUserInfo(e.secureUserId,(function(e){e.isRemoved=!0}));this.onChange()};t.prototype.handleOwnerChange=function(e,t){this.passStore.handleOwnerChange(e,t)}
;t.prototype.setUserPermission=function(e,t){t?this.passStore.editUserInfo(e,(function(e){e.permission=t})):g.default.error.logError("Received a falsey value for user permission for user: "+e)}
;t.prototype.editUserPermission=function(e,t){this.setUserPermission(e.secureUserId,t);this.onChange()};t.prototype.updateUserPermissions=function(e){if(e){for(var t=0,o=e;t<o.length;t++){var r=o[t]
;this.setUserPermission(r.secureUserId,r.permission)}this.onChange()}};t.prototype.undoUserKill=function(e){this.passStore.editUserInfo(e.secureUserId,(function(e){e.isRemoved=!1}));this.onChange()}
;t.prototype.userEdited=function(e,t){this.passStore.handleUserEdited(e,t)};t.prototype.editByCurrentUser=function(){this.userEdited(a.default.secureUserId,(new Date).getTime())}
;t.prototype.onGuestPolicyChange=function(){this.onChange()};t.prototype.getGuestPolicySpec=function(){if(this.padController)return{guestPolicy:this.padController.getPadOptions().guestPolicy,
publicGuestPolicy:this.padController.getPadOptions().publicGuestPolicy,folderMemberGuestPolicy:this.padController.getPadOptions().folderMemberGuestPolicy}
;throw new Error("Called getGuestPolicySpec with null padController")};t.prototype.removeDeletedUsers=function(){var e=this;this.passStore.getAllUsersOnDoc().forEach((function(t){
t.isRemoved&&e.passStore.removeUser(t.secureUserId)}))};t.prototype.isCurrentUser=function(e){return a.default.secureUserId==e.info.secureUserId};return t}(i.EventEmittingClass);t.default=d},
928:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(6),n=o(238),a=o(22),i=o(30),l=o(1791),c=o(64),g=o(166),d=o(39),u=o(182),p=o(32),h=o(592),f=o(93),b=function(){
function e(e,t,o,r,s){this.zatext=e;this.apool=t;this.contentTypeRegistry=o;this.options=r;this.prefetchData=s;this.isTrivial=!1;this.newText=""
;!1!==this.options.isForEmail&&(this.options.isForEmail=!0);this.renderContext=(0,g.getDiffRendererContext)(r.isForEmail)}e.renderSegment=function(t,o,r,s,n){
var a=JSON.parse(t.zatext),i=l.getDiffZatextForChangeset(t.cs,a,o,!0);return null==i?null:new e(i.zatext,i.pool,s,{hideElipsis:!0,isForEmail:!1,localPadId:r,urlPrefix:"",locale:n}).render()}
;e.prototype._renderLine=function(e,t){return u.renderLine({renderContext:this.renderContext,isDiff:!0,relativeUrlPrefix:this.options.urlPrefix,hand:e,lineNumberInHand:t,lineNumberInEditor:t,
disallowAnchorTags:!0,classToStyleFunc:this._classToStyle.bind(this),locale:this.options.locale,padId:this.options.localPadId},this.contentTypeRegistry,this.prefetchData)}
;e.prototype._renderZone=function(){var e,t=this.zatext,o=this.apool,n=this.options,l=(0,c.docHand)(t,o),g=[],u=l.textlines(),h=l.alines(),b=!0;n.maxHeight&&(e=n.maxHeight);var m={};if(n.isForEmail){
m.src="email-line";m.eid=n.trackingIdGuid}for(var y,C=0,M=n.localPadId;C<u.length&&C!=n.maxLines&&!(n.maxHeight&&e<=0);C++){var _=u[C],S=h[C],v=null;if(!("\n"==_)||C!=u.length-1){if(n.maxHeight){
var E=110*e;if(_.length>E){_=_.substring(0,E);S=a.subattribution(S,0,E)}e-=Math.ceil(_.length/110)}var T=this._resolveLineChanges(S,o,_),w=s.includes(["unchanged","renumber"],T.type)
;this.newText+=T.text;y="";if(!v){var I=this._renderLine(l,C);y=this._wholeLineStyleForNode(I.node,!w);v=I.node}this.options.isForEmail&&(y+="font-size: 14px; line-height: 26px;")
;if(!/^(&nbsp;)*$/.test(v.innerHTML)||!b){b=!1;var A=y?" style='"+y+"' ":"",O=p.padUrlSuffix(p.fullLineFocusOptions(_,S,o)),N=(0,
d.parseURIOrThrow)(this.options.urlPrefix+p.relativePrettyPaperDocUrl(M,null)).setQuery(r.__assign(r.__assign({},m),O.query)).setFragment(O.fragment).toString(),P=w?i.default.color_stone:"#000001"
;g.push('<div dir="auto" '+A+' class="',v.className,'">')
;!1!==this.options.isForEmail?g.push('<a style="border-bottom:none; color:'+P+'; text-decoration:none;" href="'+f.escapeHtml(N)+'">',v.innerHTML,"</a>"):g.push(v.innerHTML);g.push("</div>\n")}}}
if((C==n.maxLines||n.maxHeight&&e<=0)&&!n.hideElipsis){P=i.default.color_stone,O=p.padUrlSuffix(p.fullLineFocusOptions(u[C],h[C],o)),N=(0,
d.parseURIOrThrow)(this.options.urlPrefix+p.relativePrettyPaperDocUrl(M,null)).setQuery(r.__assign(r.__assign({},m),O.query)).setFragment(O.fragment).toString()
;g.push('<div style="'+y+'"><a style="border-bottom:none; color:'+P+'; text-decoration:none;" href="'+f.escapeHtml(N)+'">...</a></div>')}var R=g.join("");return""==R?"&nbsp;":R}
;e.prototype.render=function(){var e=this.options,t=[]
;e.isForEmail&&t.push('<div style="background-color: '+i.default.color_chalk+"; border: 1px solid "+i.default.color_border+'; border-top: none; border-radius: 0 0 4px 4px; padding: 25px;">')
;t.push(this._renderZone());this.isTrivial=this.options.isForEmail&&(!this.newText.length||1==this.newText.length&&/^[a-zA-Z]$/.test(this.newText));t.push('<div style="clear: both;"></div>')
;e.isForEmail&&t.push("</div>");return t.join("")};e.prototype._getLineUserId=function(e){for(var t=e.className.split(" "),o=0;o<t.length;o++){var r=n.className2Author(t[o]);if(r)return r}return null}
;e.prototype._resolveLineChanges=function(e,t,o){for(var r=a.opIterator(e),s=a.stringIterator(o),n=a.attributeTester(["diff","plus"],t),i="",l=[];r.hasNext();){var c=r.next();if(n(c.attribs)){
i+=s.take(c.chars);this._isNumberChange(c,t)?l.push("renumber"):l.push("insert")}else s.skip(c.chars)}return{text:i,
type:1===l.length&&"renumber"===l[0]?"renumber":0!==i.length&&"\n"!==i?"insert":"\n"===o&&"\n"===i?"newline":"unchanged"}};e.prototype._wholeLineStyleForNode=function(e,t){
return t?"border-left-color: "+i.default.color_ink+";":"border-left-color: "+i.default.color_stone_forty+";"};e.prototype._isNumberChange=function(e,t){var o=a.opAttributeValue(e,"list",t)
;return Boolean(o.match(/^number/))};e.prototype.getIsTrivial=function(){return this.isTrivial};e.prototype.getNewText=function(){return this.newText};e.prototype._classToStyle=function(e){
var t=e.split(" ")
;return this.options.skipDiffColoring||t.indexOf("gallery")>-1?"":t.indexOf("added")>-1?"background-color: "+i.default.color_diff_added+";":t.indexOf("removed")>=0?"background-color: "+i.default.color_diff_bg_removed+"; color: "+i.default.color_diff_text_removed+"; text-decoration: line-through; ":void 0
};r.__decorate([(0,h.trace)()],e.prototype,"render",null);r.__decorate([(0,h.trace)()],e,"renderSegment",null);return e}();t.default=b},929:function(e,t,o){Object.defineProperty(t,"__esModule",{
value:!0});t.catchAndWarnOnThrow=void 0;var r=o(50);0;t.catchAndWarnOnThrow=function(e,t){try{t()}catch(t){r.logError(t.message,t.fileName,t.lineNumber,t.columnNumber,t,!0,{name:e,isWarningLog:!0})
;window.console&&console.error("[warning: "+e+"] ",t.stack)}}}}]);

//# sourceMappingURL=https://paper.dropbox.com/static/sourcemap/2f40ad624e6fdb91d0c0.wDNsN95MOwhyOmXw88K05TMwr9IswRk36ituCkIpdZE.js.map